(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(u){if(u.ep)return;u.ep=!0;const c=n(u);fetch(u.href,c)}})();var m_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function x1(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Np={exports:{}},ud={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function O5(){if(p_)return ud;p_=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,u,c){var d=null;if(c!==void 0&&(d=""+c),u.key!==void 0&&(d=""+u.key),"key"in u){c={};for(var m in u)m!=="key"&&(c[m]=u[m])}else c=u;return u=c.ref,{$$typeof:a,type:s,key:d,ref:u!==void 0?u:null,props:c}}return ud.Fragment=t,ud.jsx=n,ud.jsxs=n,ud}var y_;function M5(){return y_||(y_=1,Np.exports=O5()),Np.exports}var Qt=M5(),Op={exports:{}},fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function x5(){if(__)return fe;__=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.iterator;function U(Q){return Q===null||typeof Q!="object"?null:(Q=R&&Q[R]||Q["@@iterator"],typeof Q=="function"?Q:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,I={};function z(Q,it,Et){this.props=Q,this.context=it,this.refs=I,this.updater=Et||C}z.prototype.isReactComponent={},z.prototype.setState=function(Q,it){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,it,"setState")},z.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function F(){}F.prototype=z.prototype;function M(Q,it,Et){this.props=Q,this.context=it,this.refs=I,this.updater=Et||C}var D=M.prototype=new F;D.constructor=M,O(D,z.prototype),D.isPureReactComponent=!0;var L=Array.isArray,H={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function q(Q,it,Et,rt,gt,Rt){return Et=Rt.ref,{$$typeof:a,type:Q,key:it,ref:Et!==void 0?Et:null,props:Rt}}function x(Q,it){return q(Q.type,it,void 0,void 0,void 0,Q.props)}function w(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===a}function V(Q){var it={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(Et){return it[Et]})}var G=/\/+/g;function Y(Q,it){return typeof Q=="object"&&Q!==null&&Q.key!=null?V(""+Q.key):it.toString(36)}function T(){}function K(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(T,T):(Q.status="pending",Q.then(function(it){Q.status==="pending"&&(Q.status="fulfilled",Q.value=it)},function(it){Q.status==="pending"&&(Q.status="rejected",Q.reason=it)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function k(Q,it,Et,rt,gt){var Rt=typeof Q;(Rt==="undefined"||Rt==="boolean")&&(Q=null);var Nt=!1;if(Q===null)Nt=!0;else switch(Rt){case"bigint":case"string":case"number":Nt=!0;break;case"object":switch(Q.$$typeof){case a:case t:Nt=!0;break;case b:return Nt=Q._init,k(Nt(Q._payload),it,Et,rt,gt)}}if(Nt)return gt=gt(Q),Nt=rt===""?"."+Y(Q,0):rt,L(gt)?(Et="",Nt!=null&&(Et=Nt.replace(G,"$&/")+"/"),k(gt,it,Et,"",function(At){return At})):gt!=null&&(w(gt)&&(gt=x(gt,Et+(gt.key==null||Q&&Q.key===gt.key?"":(""+gt.key).replace(G,"$&/")+"/")+Nt)),it.push(gt)),1;Nt=0;var et=rt===""?".":rt+":";if(L(Q))for(var ct=0;ct<Q.length;ct++)rt=Q[ct],Rt=et+Y(rt,ct),Nt+=k(rt,it,Et,Rt,gt);else if(ct=U(Q),typeof ct=="function")for(Q=ct.call(Q),ct=0;!(rt=Q.next()).done;)rt=rt.value,Rt=et+Y(rt,ct++),Nt+=k(rt,it,Et,Rt,gt);else if(Rt==="object"){if(typeof Q.then=="function")return k(K(Q),it,Et,rt,gt);throw it=String(Q),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return Nt}function X(Q,it,Et){if(Q==null)return Q;var rt=[],gt=0;return k(Q,rt,"","",function(Rt){return it.call(Et,Rt,gt++)}),rt}function $(Q){if(Q._status===-1){var it=Q._result;it=it(),it.then(function(Et){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=Et)},function(Et){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=Et)}),Q._status===-1&&(Q._status=0,Q._result=it)}if(Q._status===1)return Q._result.default;throw Q._result}var at=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)};function dt(){}return fe.Children={map:X,forEach:function(Q,it,Et){X(Q,function(){it.apply(this,arguments)},Et)},count:function(Q){var it=0;return X(Q,function(){it++}),it},toArray:function(Q){return X(Q,function(it){return it})||[]},only:function(Q){if(!w(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},fe.Component=z,fe.Fragment=n,fe.Profiler=u,fe.PureComponent=M,fe.StrictMode=s,fe.Suspense=_,fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,fe.act=function(){throw Error("act(...) is not supported in production builds of React.")},fe.cache=function(Q){return function(){return Q.apply(null,arguments)}},fe.cloneElement=function(Q,it,Et){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var rt=O({},Q.props),gt=Q.key,Rt=void 0;if(it!=null)for(Nt in it.ref!==void 0&&(Rt=void 0),it.key!==void 0&&(gt=""+it.key),it)!j.call(it,Nt)||Nt==="key"||Nt==="__self"||Nt==="__source"||Nt==="ref"&&it.ref===void 0||(rt[Nt]=it[Nt]);var Nt=arguments.length-2;if(Nt===1)rt.children=Et;else if(1<Nt){for(var et=Array(Nt),ct=0;ct<Nt;ct++)et[ct]=arguments[ct+2];rt.children=et}return q(Q.type,gt,void 0,void 0,Rt,rt)},fe.createContext=function(Q){return Q={$$typeof:d,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:c,_context:Q},Q},fe.createElement=function(Q,it,Et){var rt,gt={},Rt=null;if(it!=null)for(rt in it.key!==void 0&&(Rt=""+it.key),it)j.call(it,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(gt[rt]=it[rt]);var Nt=arguments.length-2;if(Nt===1)gt.children=Et;else if(1<Nt){for(var et=Array(Nt),ct=0;ct<Nt;ct++)et[ct]=arguments[ct+2];gt.children=et}if(Q&&Q.defaultProps)for(rt in Nt=Q.defaultProps,Nt)gt[rt]===void 0&&(gt[rt]=Nt[rt]);return q(Q,Rt,void 0,void 0,null,gt)},fe.createRef=function(){return{current:null}},fe.forwardRef=function(Q){return{$$typeof:m,render:Q}},fe.isValidElement=w,fe.lazy=function(Q){return{$$typeof:b,_payload:{_status:-1,_result:Q},_init:$}},fe.memo=function(Q,it){return{$$typeof:v,type:Q,compare:it===void 0?null:it}},fe.startTransition=function(Q){var it=H.T,Et={};H.T=Et;try{var rt=Q(),gt=H.S;gt!==null&&gt(Et,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(dt,at)}catch(Rt){at(Rt)}finally{H.T=it}},fe.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},fe.use=function(Q){return H.H.use(Q)},fe.useActionState=function(Q,it,Et){return H.H.useActionState(Q,it,Et)},fe.useCallback=function(Q,it){return H.H.useCallback(Q,it)},fe.useContext=function(Q){return H.H.useContext(Q)},fe.useDebugValue=function(){},fe.useDeferredValue=function(Q,it){return H.H.useDeferredValue(Q,it)},fe.useEffect=function(Q,it){return H.H.useEffect(Q,it)},fe.useId=function(){return H.H.useId()},fe.useImperativeHandle=function(Q,it,Et){return H.H.useImperativeHandle(Q,it,Et)},fe.useInsertionEffect=function(Q,it){return H.H.useInsertionEffect(Q,it)},fe.useLayoutEffect=function(Q,it){return H.H.useLayoutEffect(Q,it)},fe.useMemo=function(Q,it){return H.H.useMemo(Q,it)},fe.useOptimistic=function(Q,it){return H.H.useOptimistic(Q,it)},fe.useReducer=function(Q,it,Et){return H.H.useReducer(Q,it,Et)},fe.useRef=function(Q){return H.H.useRef(Q)},fe.useState=function(Q){return H.H.useState(Q)},fe.useSyncExternalStore=function(Q,it,Et){return H.H.useSyncExternalStore(Q,it,Et)},fe.useTransition=function(){return H.H.useTransition()},fe.version="19.0.0",fe}var v_;function w0(){return v_||(v_=1,Op.exports=x5()),Op.exports}var Pe=w0();const ua=x1(Pe);var Mp={exports:{}},cd={},xp={exports:{}},Vp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function V5(){return E_||(E_=1,function(a){function t(X,$){var at=X.length;X.push($);t:for(;0<at;){var dt=at-1>>>1,Q=X[dt];if(0<u(Q,$))X[dt]=$,X[at]=Q,at=dt;else break t}}function n(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var $=X[0],at=X.pop();if(at!==$){X[0]=at;t:for(var dt=0,Q=X.length,it=Q>>>1;dt<it;){var Et=2*(dt+1)-1,rt=X[Et],gt=Et+1,Rt=X[gt];if(0>u(rt,at))gt<Q&&0>u(Rt,rt)?(X[dt]=Rt,X[gt]=at,dt=gt):(X[dt]=rt,X[Et]=at,dt=Et);else if(gt<Q&&0>u(Rt,at))X[dt]=Rt,X[gt]=at,dt=gt;else break t}}return $}function u(X,$){var at=X.sortIndex-$.sortIndex;return at!==0?at:X.id-$.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();a.unstable_now=function(){return d.now()-m}}var _=[],v=[],b=1,R=null,U=3,C=!1,O=!1,I=!1,z=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function D(X){for(var $=n(v);$!==null;){if($.callback===null)s(v);else if($.startTime<=X)s(v),$.sortIndex=$.expirationTime,t(_,$);else break;$=n(v)}}function L(X){if(I=!1,D(X),!O)if(n(_)!==null)O=!0,K();else{var $=n(v);$!==null&&k(L,$.startTime-X)}}var H=!1,j=-1,q=5,x=-1;function w(){return!(a.unstable_now()-x<q)}function V(){if(H){var X=a.unstable_now();x=X;var $=!0;try{t:{O=!1,I&&(I=!1,F(j),j=-1),C=!0;var at=U;try{e:{for(D(X),R=n(_);R!==null&&!(R.expirationTime>X&&w());){var dt=R.callback;if(typeof dt=="function"){R.callback=null,U=R.priorityLevel;var Q=dt(R.expirationTime<=X);if(X=a.unstable_now(),typeof Q=="function"){R.callback=Q,D(X),$=!0;break e}R===n(_)&&s(_),D(X)}else s(_);R=n(_)}if(R!==null)$=!0;else{var it=n(v);it!==null&&k(L,it.startTime-X),$=!1}}break t}finally{R=null,U=at,C=!1}$=void 0}}finally{$?G():H=!1}}}var G;if(typeof M=="function")G=function(){M(V)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,T=Y.port2;Y.port1.onmessage=V,G=function(){T.postMessage(null)}}else G=function(){z(V,0)};function K(){H||(H=!0,G())}function k(X,$){j=z(function(){X(a.unstable_now())},$)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(X){X.callback=null},a.unstable_continueExecution=function(){O||C||(O=!0,K())},a.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<X?Math.floor(1e3/X):5},a.unstable_getCurrentPriorityLevel=function(){return U},a.unstable_getFirstCallbackNode=function(){return n(_)},a.unstable_next=function(X){switch(U){case 1:case 2:case 3:var $=3;break;default:$=U}var at=U;U=$;try{return X()}finally{U=at}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(X,$){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var at=U;U=X;try{return $()}finally{U=at}},a.unstable_scheduleCallback=function(X,$,at){var dt=a.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?dt+at:dt):at=dt,X){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=at+Q,X={id:b++,callback:$,priorityLevel:X,startTime:at,expirationTime:Q,sortIndex:-1},at>dt?(X.sortIndex=at,t(v,X),n(_)===null&&X===n(v)&&(I?(F(j),j=-1):I=!0,k(L,at-dt))):(X.sortIndex=Q,t(_,X),O||C||(O=!0,K())),X},a.unstable_shouldYield=w,a.unstable_wrapCallback=function(X){var $=U;return function(){var at=U;U=$;try{return X.apply(this,arguments)}finally{U=at}}}}(Vp)),Vp}var S_;function V1(){return S_||(S_=1,xp.exports=V5()),xp.exports}var Up={exports:{}},sa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function U5(){if(T_)return sa;T_=1;var a=w0();function t(_){var v="https://react.dev/errors/"+_;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)v+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+_+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},u=Symbol.for("react.portal");function c(_,v,b){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:R==null?null:""+R,children:_,containerInfo:v,implementation:b}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(_,v){if(_==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return sa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,sa.createPortal=function(_,v){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(t(299));return c(_,v,null,b)},sa.flushSync=function(_){var v=d.T,b=s.p;try{if(d.T=null,s.p=2,_)return _()}finally{d.T=v,s.p=b,s.d.f()}},sa.preconnect=function(_,v){typeof _=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,s.d.C(_,v))},sa.prefetchDNS=function(_){typeof _=="string"&&s.d.D(_)},sa.preinit=function(_,v){if(typeof _=="string"&&v&&typeof v.as=="string"){var b=v.as,R=m(b,v.crossOrigin),U=typeof v.integrity=="string"?v.integrity:void 0,C=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;b==="style"?s.d.S(_,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:R,integrity:U,fetchPriority:C}):b==="script"&&s.d.X(_,{crossOrigin:R,integrity:U,fetchPriority:C,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},sa.preinitModule=function(_,v){if(typeof _=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var b=m(v.as,v.crossOrigin);s.d.M(_,{crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&s.d.M(_)},sa.preload=function(_,v){if(typeof _=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var b=v.as,R=m(b,v.crossOrigin);s.d.L(_,b,{crossOrigin:R,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},sa.preloadModule=function(_,v){if(typeof _=="string")if(v){var b=m(v.as,v.crossOrigin);s.d.m(_,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else s.d.m(_)},sa.requestFormReset=function(_){s.d.r(_)},sa.unstable_batchedUpdates=function(_,v){return _(v)},sa.useFormState=function(_,v,b){return d.H.useFormState(_,v,b)},sa.useFormStatus=function(){return d.H.useHostTransitionStatus()},sa.version="19.0.0",sa}var b_;function I5(){if(b_)return Up.exports;b_=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Up.exports=U5(),Up.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_;function L5(){if(A_)return cd;A_=1;var a=V1(),t=w0(),n=I5();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var c=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),U=Symbol.for("react.consumer"),C=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),L=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function j(e){return e===null||typeof e!="object"?null:(e=H&&e[H]||e["@@iterator"],typeof e=="function"?e:null)}var q=Symbol.for("react.client.reference");function x(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===q?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case m:return"Portal";case b:return"Profiler";case v:return"StrictMode";case I:return"Suspense";case z:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case C:return(e.displayName||"Context")+".Provider";case U:return(e._context.displayName||"Context")+".Consumer";case O:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F:return i=e.displayName||null,i!==null?i:x(e.type)||"Memo";case M:i=e._payload,e=e._init;try{return x(e(i))}catch{}}return null}var w=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=Object.assign,G,Y;function T(e){if(G===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);G=i&&i[1]||"",Y=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+G+e+Y}var K=!1;function k(e,i){if(!e||K)return"";K=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(i){var Mt=function(){throw Error()};if(Object.defineProperty(Mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Mt,[])}catch(St){var yt=St}Reflect.construct(e,[],Mt)}else{try{Mt.call()}catch(St){yt=St}e.call(Mt.prototype)}}else{try{throw Error()}catch(St){yt=St}(Mt=e())&&typeof Mt.catch=="function"&&Mt.catch(function(){})}}catch(St){if(St&&yt&&typeof St.stack=="string")return[St.stack,yt.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=h.DetermineComponentFrameRoot(),B=E[0],Z=E[1];if(B&&Z){var tt=B.split(`
`),lt=Z.split(`
`);for(p=h=0;h<tt.length&&!tt[h].includes("DetermineComponentFrameRoot");)h++;for(;p<lt.length&&!lt[p].includes("DetermineComponentFrameRoot");)p++;if(h===tt.length||p===lt.length)for(h=tt.length-1,p=lt.length-1;1<=h&&0<=p&&tt[h]!==lt[p];)p--;for(;1<=h&&0<=p;h--,p--)if(tt[h]!==lt[p]){if(h!==1||p!==1)do if(h--,p--,0>p||tt[h]!==lt[p]){var bt=`
`+tt[h].replace(" at new "," at ");return e.displayName&&bt.includes("<anonymous>")&&(bt=bt.replace("<anonymous>",e.displayName)),bt}while(1<=h&&0<=p);break}}}finally{K=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?T(o):""}function X(e){switch(e.tag){case 26:case 27:case 5:return T(e.type);case 16:return T("Lazy");case 13:return T("Suspense");case 19:return T("SuspenseList");case 0:case 15:return e=k(e.type,!1),e;case 11:return e=k(e.type.render,!1),e;case 1:return e=k(e.type,!0),e;default:return""}}function $(e){try{var i="";do i+=X(e),e=e.return;while(e);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function at(e){var i=e,o=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,i.flags&4098&&(o=i.return),e=i.return;while(e)}return i.tag===3?o:null}function dt(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function Q(e){if(at(e)!==e)throw Error(s(188))}function it(e){var i=e.alternate;if(!i){if(i=at(e),i===null)throw Error(s(188));return i!==e?null:e}for(var o=e,h=i;;){var p=o.return;if(p===null)break;var E=p.alternate;if(E===null){if(h=p.return,h!==null){o=h;continue}break}if(p.child===E.child){for(E=p.child;E;){if(E===o)return Q(p),e;if(E===h)return Q(p),i;E=E.sibling}throw Error(s(188))}if(o.return!==h.return)o=p,h=E;else{for(var B=!1,Z=p.child;Z;){if(Z===o){B=!0,o=p,h=E;break}if(Z===h){B=!0,h=p,o=E;break}Z=Z.sibling}if(!B){for(Z=E.child;Z;){if(Z===o){B=!0,o=E,h=p;break}if(Z===h){B=!0,h=E,o=p;break}Z=Z.sibling}if(!B)throw Error(s(189))}}if(o.alternate!==h)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?e:i}function Et(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=Et(e),i!==null)return i;e=e.sibling}return null}var rt=Array.isArray,gt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Rt={pending:!1,data:null,method:null,action:null},Nt=[],et=-1;function ct(e){return{current:e}}function At(e){0>et||(e.current=Nt[et],Nt[et]=null,et--)}function Ct(e,i){et++,Nt[et]=e.current,e.current=i}var It=ct(null),zt=ct(null),$t=ct(null),oe=ct(null);function Yt(e,i){switch(Ct($t,i),Ct(zt,e),Ct(It,null),e=i.nodeType,e){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?jy(i):0;break;default:if(e=e===8?i.parentNode:i,i=e.tagName,e=e.namespaceURI)e=jy(e),i=Fy(e,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}At(It),Ct(It,i)}function Fe(){At(It),At(zt),At($t)}function le(e){e.memoizedState!==null&&Ct(oe,e);var i=It.current,o=Fy(i,e.type);i!==o&&(Ct(zt,e),Ct(It,o))}function Ke(e){zt.current===e&&(At(It),At(zt)),oe.current===e&&(At(oe),ad._currentValue=Rt)}var gi=Object.prototype.hasOwnProperty,ke=a.unstable_scheduleCallback,ui=a.unstable_cancelCallback,en=a.unstable_shouldYield,Qn=a.unstable_requestPaint,nn=a.unstable_now,Oi=a.unstable_getCurrentPriorityLevel,Ce=a.unstable_ImmediatePriority,He=a.unstable_UserBlockingPriority,Xn=a.unstable_NormalPriority,ga=a.unstable_LowPriority,ji=a.unstable_IdlePriority,ma=a.log,Pn=a.unstable_setDisableYieldValue,an=null,Ae=null;function pa(e){if(Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(an,e,void 0,(e.current.flags&128)===128)}catch{}}function Fi(e){if(typeof ma=="function"&&Pn(e),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(an,e)}catch{}}var Zn=Math.clz32?Math.clz32:Hu,Kr=Math.log,ku=Math.LN2;function Hu(e){return e>>>=0,e===0?32:31-(Kr(e)/ku|0)|0}var ya=128,Yr=4194304;function Ki(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _a(e,i){var o=e.pendingLanes;if(o===0)return 0;var h=0,p=e.suspendedLanes,E=e.pingedLanes,B=e.warmLanes;e=e.finishedLanes!==0;var Z=o&134217727;return Z!==0?(o=Z&~p,o!==0?h=Ki(o):(E&=Z,E!==0?h=Ki(E):e||(B=Z&~B,B!==0&&(h=Ki(B))))):(Z=o&~p,Z!==0?h=Ki(Z):E!==0?h=Ki(E):e||(B=o&~B,B!==0&&(h=Ki(B)))),h===0?0:i!==0&&i!==h&&!(i&p)&&(p=h&-h,B=i&-i,p>=B||p===32&&(B&4194176)!==0)?i:h}function Qr(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Xr(e,i){switch(e){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zr(){var e=ya;return ya<<=1,!(ya&4194176)&&(ya=128),e}function er(){var e=Yr;return Yr<<=1,!(Yr&62914560)&&(Yr=4194304),e}function Ll(e){for(var i=[],o=0;31>o;o++)i.push(e);return i}function Sn(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function qu(e,i,o,h,p,E){var B=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var Z=e.entanglements,tt=e.expirationTimes,lt=e.hiddenUpdates;for(o=B&~o;0<o;){var bt=31-Zn(o),Mt=1<<bt;Z[bt]=0,tt[bt]=-1;var yt=lt[bt];if(yt!==null)for(lt[bt]=null,bt=0;bt<yt.length;bt++){var St=yt[bt];St!==null&&(St.lane&=-536870913)}o&=~Mt}h!==0&&Tr(e,h,0),E!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=E&~(B&~i))}function Tr(e,i,o){e.pendingLanes|=i,e.suspendedLanes&=~i;var h=31-Zn(i);e.entangledLanes|=i,e.entanglements[h]=e.entanglements[h]|1073741824|o&4194218}function br(e,i){var o=e.entangledLanes|=i;for(e=e.entanglements;o;){var h=31-Zn(o),p=1<<h;p&i|e[h]&i&&(e[h]|=i),o&=~p}}function nr(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function ju(){var e=gt.p;return e!==0?e:(e=window.event,e===void 0?32:u_(e.type))}function Mi(e,i){var o=gt.p;try{return gt.p=e,i()}finally{gt.p=o}}var ni=Math.random().toString(36).slice(2),Rn="__reactFiber$"+ni,ue="__reactProps$"+ni,ir="__reactContainer$"+ni,Wr="__reactEvents$"+ni,Pl="__reactListeners$"+ni,ar="__reactHandles$"+ni,Fu="__reactResources$"+ni,Ar="__reactMarker$"+ni;function Jr(e){delete e[Rn],delete e[ue],delete e[Wr],delete e[Pl],delete e[ar]}function va(e){var i=e[Rn];if(i)return i;for(var o=e.parentNode;o;){if(i=o[ir]||o[Rn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(e=Qy(e);e!==null;){if(o=e[Rn])return o;e=Qy(e)}return i}e=o,o=e.parentNode}return null}function Tn(e){if(e=e[Rn]||e[ir]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Je(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function xa(e){var i=e[Fu];return i||(i=e[Fu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function rn(e){e[Ar]=!0}var zl=new Set,Yi={};function mi(e,i){pi(e,i),pi(e+"Capture",i)}function pi(e,i){for(Yi[e]=i,e=0;e<i.length;e++)zl.add(i[e])}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oo={},Mo={};function Ku(e){return gi.call(Mo,e)?!0:gi.call(Oo,e)?!1:Kc.test(e)?Mo[e]=!0:(Oo[e]=!0,!1)}function $r(e,i,o){if(Ku(i))if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var h=i.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+o)}}function ts(e,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+o)}}function Qi(e,i,o,h){if(h===null)e.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(i,o,""+h)}}function yi(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yc(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Qc(e){var i=Yc(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),h=""+e[i];if(!e.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,E=o.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return p.call(this)},set:function(B){h=""+B,E.call(this,B)}}),Object.defineProperty(e,i,{enumerable:o.enumerable}),{getValue:function(){return h},setValue:function(B){h=""+B},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Ps(e){e._valueTracker||(e._valueTracker=Qc(e))}function xo(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var o=i.getValue(),h="";return e&&(h=Yc(e)?e.checked?"true":"false":e.value),e=h,e!==o?(i.setValue(e),!0):!1}function zs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Rr=/[\n"\\]/g;function pn(e){return e.replace(Rr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function es(e,i,o,h,p,E,B,Z){e.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?e.type=B:e.removeAttribute("type"),i!=null?B==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+yi(i)):e.value!==""+yi(i)&&(e.value=""+yi(i)):B!=="submit"&&B!=="reset"||e.removeAttribute("value"),i!=null?Bl(e,B,yi(i)):o!=null?Bl(e,B,yi(o)):h!=null&&e.removeAttribute("value"),p==null&&E!=null&&(e.defaultChecked=!!E),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?e.name=""+yi(Z):e.removeAttribute("name")}function Bs(e,i,o,h,p,E,B,Z){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(e.type=E),i!=null||o!=null){if(!(E!=="submit"&&E!=="reset"||i!=null))return;o=o!=null?""+yi(o):"",i=i!=null?""+yi(i):o,Z||i===e.value||(e.value=i),e.defaultValue=i}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,e.checked=Z?e.checked:!!h,e.defaultChecked=!!h,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(e.name=B)}function Bl(e,i,o){i==="number"&&zs(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function Ve(e,i,o,h){if(e=e.options,i){i={};for(var p=0;p<o.length;p++)i["$"+o[p]]=!0;for(o=0;o<e.length;o++)p=i.hasOwnProperty("$"+e[o].value),e[o].selected!==p&&(e[o].selected=p),p&&h&&(e[o].defaultSelected=!0)}else{for(o=""+yi(o),i=null,p=0;p<e.length;p++){if(e[p].value===o){e[p].selected=!0,h&&(e[p].defaultSelected=!0);return}i!==null||e[p].disabled||(i=e[p])}i!==null&&(i.selected=!0)}}function Gs(e,i,o){if(i!=null&&(i=""+yi(i),i!==e.value&&(e.value=i),o==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=o!=null?""+yi(o):""}function Ea(e,i,o,h){if(i==null){if(h!=null){if(o!=null)throw Error(s(92));if(rt(h)){if(1<h.length)throw Error(s(93));h=h[0]}o=h}o==null&&(o=""),i=o}o=yi(i),e.defaultValue=o,h=e.textContent,h===o&&h!==""&&h!==null&&(e.value=h)}function Sa(e,i){if(i){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=i;return}}e.textContent=i}var Vo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ks(e,i,o){var h=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?h?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":h?e.setProperty(i,o):typeof o!="number"||o===0||Vo.has(i)?i==="float"?e.cssFloat=o:e[i]=(""+o).trim():e[i]=o+"px"}function Yu(e,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,o!=null){for(var h in o)!o.hasOwnProperty(h)||i!=null&&i.hasOwnProperty(h)||(h.indexOf("--")===0?e.setProperty(h,""):h==="float"?e.cssFloat="":e[h]="");for(var p in i)h=i[p],i.hasOwnProperty(p)&&o[p]!==h&&ks(e,p,h)}else for(var E in i)i.hasOwnProperty(E)&&ks(e,E,i[E])}function Gl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rr(e){return Zc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ta=null;function Hs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Cr=null,wr=null;function sr(e){var i=Tn(e);if(i&&(e=i.stateNode)){var o=e[ue]||null;t:switch(e=i.stateNode,i.type){case"input":if(es(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+pn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var h=o[i];if(h!==e&&h.form===e.form){var p=h[ue]||null;if(!p)throw Error(s(90));es(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<o.length;i++)h=o[i],h.form===e.form&&xo(h)}break t;case"textarea":Gs(e,o.value,o.defaultValue);break t;case"select":i=o.value,i!=null&&Ve(e,!!o.multiple,i,!1)}}}var Uo=!1;function Qu(e,i,o){if(Uo)return e(i,o);Uo=!0;try{var h=e(i);return h}finally{if(Uo=!1,(Cr!==null||wr!==null)&&(go(),Cr&&(i=Cr,e=wr,wr=Cr=null,sr(i),e)))for(i=0;i<e.length;i++)sr(e[i])}}function qs(e,i){var o=e.stateNode;if(o===null)return null;var h=o[ue]||null;if(h===null)return null;o=h[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break t;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var Xi=!1;if(xi)try{var js={};Object.defineProperty(js,"passive",{get:function(){Xi=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{Xi=!1}var lr=null,Fs=null,ns=null;function Io(){if(ns)return ns;var e,i=Fs,o=i.length,h,p="value"in lr?lr.value:lr.textContent,E=p.length;for(e=0;e<o&&i[e]===p[e];e++);var B=o-e;for(h=1;h<=B&&i[o-h]===p[E-h];h++);return ns=p.slice(e,1<h?1-h:void 0)}function Zi(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Va(){return!0}function Ks(){return!1}function Wn(e){function i(o,h,p,E,B){this._reactName=o,this._targetInst=p,this.type=h,this.nativeEvent=E,this.target=B,this.currentTarget=null;for(var Z in e)e.hasOwnProperty(Z)&&(o=e[Z],this[Z]=o?o(E):E[Z]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Va:Ks,this.isPropagationStopped=Ks,this}return V(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Va)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Va)},persist:function(){},isPersistent:Va}),i}var ze={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ys=Wn(ze),Qs=V({},ze,{view:0,detail:0}),Xu=Wn(Qs),Ua,is,or,as=V({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&e.type==="mousemove"?(Ua=e.screenX-or.screenX,is=e.screenY-or.screenY):is=Ua=0,or=e),Ua)},movementY:function(e){return"movementY"in e?e.movementY:is}}),ba=Wn(as),Zu=V({},as,{dataTransfer:0}),cf=Wn(Zu),yn=V({},Qs,{relatedTarget:0}),kl=Wn(yn),Lo=V({},ze,{animationName:0,elapsedTime:0,pseudoElement:0}),Hl=Wn(Lo),Wu=V({},ze,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ql=Wn(Wu),jl=V({},ze,{data:0}),Fl=Wn(jl),Xs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kl(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=$u[e])?!!i[e]:!1}function rs(){return Kl}var tc=V({},Qs,{key:function(e){if(e.key){var i=Xs[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Zi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ju[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rs,charCode:function(e){return e.type==="keypress"?Zi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zs=Wn(tc),Po=V({},as,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yl=Wn(Po),Dr=V({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rs}),zo=Wn(Dr),ec=V({},ze,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ia=Wn(ec),Bo=V({},as,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Go=Wn(Bo),_i=V({},ze,{newState:0,oldState:0}),ur=Wn(_i),La=[9,13,27,32],Pa=xi&&"CompositionEvent"in window,g=null;xi&&"documentMode"in document&&(g=document.documentMode);var A=xi&&"TextEvent"in window&&!g,P=xi&&(!Pa||g&&8<g&&11>=g),J=" ",ot=!1;function vt(e,i){switch(e){case"keyup":return La.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ve=!1;function _n(e,i){switch(e){case"compositionend":return Lt(i);case"keypress":return i.which!==32?null:(ot=!0,J);case"textInput":return e=i.data,e===J&&ot?null:e;default:return null}}function Ee(e,i){if(ve)return e==="compositionend"||!Pa&&vt(e,i)?(e=Io(),ns=Fs=lr=null,ve=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return P&&i.locale!=="ko"?null:i.data;default:return null}}var Cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Cn[e.type]:i==="textarea"}function wn(e,i,o,h){Cr?wr?wr.push(h):wr=[h]:Cr=h,i=Nm(i,"onChange"),0<i.length&&(o=new Ys("onChange","change",null,o,h),e.push({event:o,listeners:i}))}var ii=null,za=null;function ko(e){By(e,0)}function nc(e){var i=Je(e);if(xo(i))return e}function Wc(e,i){if(e==="change")return i}var Jc=!1;if(xi){var $c;if(xi){var Ho="oninput"in document;if(!Ho){var qo=document.createElement("div");qo.setAttribute("oninput","return;"),Ho=typeof qo.oninput=="function"}$c=Ho}else $c=!1;Jc=$c&&(!document.documentMode||9<document.documentMode)}function fn(){ii&&(ii.detachEvent("onpropertychange",Mg),za=ii=null)}function Mg(e){if(e.propertyName==="value"&&nc(za)){var i=[];wn(i,za,e,Hs(e)),Qu(ko,i)}}function Z0(e,i,o){e==="focusin"?(fn(),ii=i,za=o,ii.attachEvent("onpropertychange",Mg)):e==="focusout"&&fn()}function xg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nc(za)}function ic(e,i){if(e==="click")return nc(i)}function Ws(e,i){if(e==="input"||e==="change")return nc(i)}function Vg(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Wi=typeof Object.is=="function"?Object.is:Vg;function cr(e,i){if(Wi(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var o=Object.keys(e),h=Object.keys(i);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var p=o[h];if(!gi.call(i,p)||!Wi(e[p],i[p]))return!1}return!0}function Ji(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hf(e,i){var o=Ji(e);e=0;for(var h;o;){if(o.nodeType===3){if(h=e+o.textContent.length,e<=i&&h>=i)return{node:o,offset:i-e};e=h}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Ji(o)}}function ff(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?ff(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function df(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=zs(e.document);i instanceof e.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)e=i.contentWindow;else break;i=zs(e.document)}return i}function ac(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function gf(e,i){var o=df(i);i=e.focusedElem;var h=e.selectionRange;if(o!==i&&i&&i.ownerDocument&&ff(i.ownerDocument.documentElement,i)){if(h!==null&&ac(i)){if(e=h.start,o=h.end,o===void 0&&(o=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(o,i.value.length);else if(o=(e=i.ownerDocument||document)&&e.defaultView||window,o.getSelection){o=o.getSelection();var p=i.textContent.length,E=Math.min(h.start,p);h=h.end===void 0?E:Math.min(h.end,p),!o.extend&&E>h&&(p=h,h=E,E=p),p=hf(i,E);var B=hf(i,h);p&&B&&(o.rangeCount!==1||o.anchorNode!==p.node||o.anchorOffset!==p.offset||o.focusNode!==B.node||o.focusOffset!==B.offset)&&(e=e.createRange(),e.setStart(p.node,p.offset),o.removeAllRanges(),E>h?(o.addRange(e),o.extend(B.node,B.offset)):(e.setEnd(B.node,B.offset),o.addRange(e)))}}for(e=[],o=i;o=o.parentNode;)o.nodeType===1&&e.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)o=e[i],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var th=xi&&"documentMode"in document&&11>=document.documentMode,Ql=null,mf=null,jo=null,eh=!1;function Ba(e,i,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;eh||Ql==null||Ql!==zs(h)||(h=Ql,"selectionStart"in h&&ac(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),jo&&cr(jo,h)||(jo=h,h=Nm(mf,"onSelect"),0<h.length&&(i=new Ys("onSelect","select",null,i,o),e.push({event:i,listeners:h}),i.target=Ql)))}function ss(e,i){var o={};return o[e.toLowerCase()]=i.toLowerCase(),o["Webkit"+e]="webkit"+i,o["Moz"+e]="moz"+i,o}var Xl={animationend:ss("Animation","AnimationEnd"),animationiteration:ss("Animation","AnimationIteration"),animationstart:ss("Animation","AnimationStart"),transitionrun:ss("Transition","TransitionRun"),transitionstart:ss("Transition","TransitionStart"),transitioncancel:ss("Transition","TransitionCancel"),transitionend:ss("Transition","TransitionEnd")},pf={},nh={};xi&&(nh=document.createElement("div").style,"AnimationEvent"in window||(delete Xl.animationend.animation,delete Xl.animationiteration.animation,delete Xl.animationstart.animation),"TransitionEvent"in window||delete Xl.transitionend.transition);function Bn(e){if(pf[e])return pf[e];if(!Xl[e])return e;var i=Xl[e],o;for(o in i)if(i.hasOwnProperty(o)&&o in nh)return pf[e]=i[o];return e}var yf=Bn("animationend"),$i=Bn("animationiteration"),_f=Bn("animationstart"),ls=Bn("transitionrun"),Fo=Bn("transitionstart"),Js=Bn("transitioncancel"),ih=Bn("transitionend"),ah=new Map,os="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Ga(e,i){ah.set(e,i),mi(i,[e])}var ci=[],Nr=0,us=0;function rc(){for(var e=Nr,i=us=Nr=0;i<e;){var o=ci[i];ci[i++]=null;var h=ci[i];ci[i++]=null;var p=ci[i];ci[i++]=null;var E=ci[i];if(ci[i++]=null,h!==null&&p!==null){var B=h.pending;B===null?p.next=p:(p.next=B.next,B.next=p),h.pending=p}E!==0&&lc(o,p,E)}}function sc(e,i,o,h){ci[Nr++]=e,ci[Nr++]=i,ci[Nr++]=o,ci[Nr++]=h,us|=h,e.lanes|=h,e=e.alternate,e!==null&&(e.lanes|=h)}function Zl(e,i,o,h){return sc(e,i,o,h),oc(e)}function cs(e,i){return sc(e,null,null,i),oc(e)}function lc(e,i,o){e.lanes|=o;var h=e.alternate;h!==null&&(h.lanes|=o);for(var p=!1,E=e.return;E!==null;)E.childLanes|=o,h=E.alternate,h!==null&&(h.childLanes|=o),E.tag===22&&(e=E.stateNode,e===null||e._visibility&1||(p=!0)),e=E,E=E.return;p&&i!==null&&e.tag===3&&(E=e.stateNode,p=31-Zn(o),E=E.hiddenUpdates,e=E[p],e===null?E[p]=[i]:e.push(i),i.lane=o|536870912)}function oc(e){if(50<Za)throw Za=0,Ms=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var $s={},rh=new WeakMap;function ta(e,i){if(typeof e=="object"&&e!==null){var o=rh.get(e);return o!==void 0?o:(i={value:e,source:i,stack:$(i)},rh.set(e,i),i)}return{value:e,source:i,stack:$(i)}}var Wl=[],tl=0,vi=null,uc=0,sn=[],Aa=0,hs=null,Or=1,fs="";function Vi(e,i){Wl[tl++]=uc,Wl[tl++]=vi,vi=e,uc=i}function vf(e,i,o){sn[Aa++]=Or,sn[Aa++]=fs,sn[Aa++]=hs,hs=e;var h=Or;e=fs;var p=32-Zn(h)-1;h&=~(1<<p),o+=1;var E=32-Zn(i)+p;if(30<E){var B=p-p%5;E=(h&(1<<B)-1).toString(32),h>>=B,p-=B,Or=1<<32-Zn(i)+p|o<<p|h,fs=E+e}else Or=1<<E|o<<p|h,fs=e}function cc(e){e.return!==null&&(Vi(e,1),vf(e,1,0))}function el(e){for(;e===vi;)vi=Wl[--tl],Wl[tl]=null,uc=Wl[--tl],Wl[tl]=null;for(;e===hs;)hs=sn[--Aa],sn[Aa]=null,fs=sn[--Aa],sn[Aa]=null,Or=sn[--Aa],sn[Aa]=null}var Ei=null,ai=null,Ne=!1,ka=null,Ha=!1,hc=Error(s(519));function Jl(e){var i=Error(s(418,""));throw Mr(ta(i,e)),hc}function Ug(e){var i=e.stateNode,o=e.type,h=e.memoizedProps;switch(i[Rn]=e,i[ue]=h,o){case"dialog":Me("cancel",i),Me("close",i);break;case"iframe":case"object":case"embed":Me("load",i);break;case"video":case"audio":for(o=0;o<$f.length;o++)Me($f[o],i);break;case"source":Me("error",i);break;case"img":case"image":case"link":Me("error",i),Me("load",i);break;case"details":Me("toggle",i);break;case"input":Me("invalid",i),Bs(i,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Ps(i);break;case"select":Me("invalid",i);break;case"textarea":Me("invalid",i),Ea(i,h.value,h.defaultValue,h.children),Ps(i)}o=h.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||h.suppressHydrationWarning===!0||qy(i.textContent,o)?(h.popover!=null&&(Me("beforetoggle",i),Me("toggle",i)),h.onScroll!=null&&Me("scroll",i),h.onScrollEnd!=null&&Me("scrollend",i),h.onClick!=null&&(i.onclick=Om),i=!0):i=!1,i||Jl(e)}function Ig(e){for(Ei=e.return;Ei;)switch(Ei.tag){case 3:case 27:Ha=!0;return;case 5:case 13:Ha=!1;return;default:Ei=Ei.return}}function Ko(e){if(e!==Ei)return!1;if(!Ne)return Ig(e),Ne=!0,!1;var i=!1,o;if((o=e.tag!==3&&e.tag!==27)&&((o=e.tag===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||pp(e.type,e.memoizedProps)),o=!o),o&&(i=!0),i&&ai&&Jl(e),Ig(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(o=e.data,o==="/$"){if(i===0){ai=Vs(e.nextSibling);break t}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;e=e.nextSibling}ai=null}}else ai=Ei?Vs(e.stateNode.nextSibling):null;return!0}function Yo(){ai=Ei=null,Ne=!1}function Mr(e){ka===null?ka=[e]:ka.push(e)}var nl=Error(s(460)),Ef=Error(s(474)),sh={then:function(){}};function Lg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function fc(){}function il(e,i,o){switch(o=e[o],o===void 0?e.push(i):o!==i&&(i.then(fc,fc),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,e===nl?Error(s(483)):e;default:if(typeof i.status=="string")i.then(fc,fc);else{if(e=Qe,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(h){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=h}},function(h){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=h}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,e===nl?Error(s(483)):e}throw Qo=i,nl}}var Qo=null;function Be(){if(Qo===null)throw Error(s(459));var e=Qo;return Qo=null,e}var al=null,dc=0;function gc(e){var i=dc;return dc+=1,al===null&&(al=[]),il(al,e,i)}function mc(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function lh(e,i){throw i.$$typeof===c?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Pg(e){var i=e._init;return i(e._payload)}function zg(e){function i(ht,st){if(e){var mt=ht.deletions;mt===null?(ht.deletions=[st],ht.flags|=16):mt.push(st)}}function o(ht,st){if(!e)return null;for(;st!==null;)i(ht,st),st=st.sibling;return null}function h(ht){for(var st=new Map;ht!==null;)ht.key!==null?st.set(ht.key,ht):st.set(ht.index,ht),ht=ht.sibling;return st}function p(ht,st){return ht=Pi(ht,st),ht.index=0,ht.sibling=null,ht}function E(ht,st,mt){return ht.index=mt,e?(mt=ht.alternate,mt!==null?(mt=mt.index,mt<st?(ht.flags|=33554434,st):mt):(ht.flags|=33554434,st)):(ht.flags|=1048576,st)}function B(ht){return e&&ht.alternate===null&&(ht.flags|=33554434),ht}function Z(ht,st,mt,wt){return st===null||st.tag!==6?(st=qn(mt,ht.mode,wt),st.return=ht,st):(st=p(st,mt),st.return=ht,st)}function tt(ht,st,mt,wt){var Gt=mt.type;return Gt===_?bt(ht,st,mt.props.children,wt,mt.key):st!==null&&(st.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===M&&Pg(Gt)===st.type)?(st=p(st,mt.props),mc(st,mt),st.return=ht,st):(st=uu(mt.type,mt.key,mt.props,null,ht.mode,wt),mc(st,mt),st.return=ht,st)}function lt(ht,st,mt,wt){return st===null||st.tag!==4||st.stateNode.containerInfo!==mt.containerInfo||st.stateNode.implementation!==mt.implementation?(st=wc(mt,ht.mode,wt),st.return=ht,st):(st=p(st,mt.children||[]),st.return=ht,st)}function bt(ht,st,mt,wt,Gt){return st===null||st.tag!==7?(st=bl(mt,ht.mode,wt,Gt),st.return=ht,st):(st=p(st,mt),st.return=ht,st)}function Mt(ht,st,mt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return st=qn(""+st,ht.mode,mt),st.return=ht,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case d:return mt=uu(st.type,st.key,st.props,null,ht.mode,mt),mc(mt,st),mt.return=ht,mt;case m:return st=wc(st,ht.mode,mt),st.return=ht,st;case M:var wt=st._init;return st=wt(st._payload),Mt(ht,st,mt)}if(rt(st)||j(st))return st=bl(st,ht.mode,mt,null),st.return=ht,st;if(typeof st.then=="function")return Mt(ht,gc(st),mt);if(st.$$typeof===C)return Mt(ht,Ah(ht,st),mt);lh(ht,st)}return null}function yt(ht,st,mt,wt){var Gt=st!==null?st.key:null;if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return Gt!==null?null:Z(ht,st,""+mt,wt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case d:return mt.key===Gt?tt(ht,st,mt,wt):null;case m:return mt.key===Gt?lt(ht,st,mt,wt):null;case M:return Gt=mt._init,mt=Gt(mt._payload),yt(ht,st,mt,wt)}if(rt(mt)||j(mt))return Gt!==null?null:bt(ht,st,mt,wt,null);if(typeof mt.then=="function")return yt(ht,st,gc(mt),wt);if(mt.$$typeof===C)return yt(ht,st,Ah(ht,mt),wt);lh(ht,mt)}return null}function St(ht,st,mt,wt,Gt){if(typeof wt=="string"&&wt!==""||typeof wt=="number"||typeof wt=="bigint")return ht=ht.get(mt)||null,Z(st,ht,""+wt,Gt);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case d:return ht=ht.get(wt.key===null?mt:wt.key)||null,tt(st,ht,wt,Gt);case m:return ht=ht.get(wt.key===null?mt:wt.key)||null,lt(st,ht,wt,Gt);case M:var Te=wt._init;return wt=Te(wt._payload),St(ht,st,mt,wt,Gt)}if(rt(wt)||j(wt))return ht=ht.get(mt)||null,bt(st,ht,wt,Gt,null);if(typeof wt.then=="function")return St(ht,st,mt,gc(wt),Gt);if(wt.$$typeof===C)return St(ht,st,mt,Ah(st,wt),Gt);lh(st,wt)}return null}function qt(ht,st,mt,wt){for(var Gt=null,Te=null,jt=st,Wt=st=0,wi=null;jt!==null&&Wt<mt.length;Wt++){jt.index>Wt?(wi=jt,jt=null):wi=jt.sibling;var Ge=yt(ht,jt,mt[Wt],wt);if(Ge===null){jt===null&&(jt=wi);break}e&&jt&&Ge.alternate===null&&i(ht,jt),st=E(Ge,st,Wt),Te===null?Gt=Ge:Te.sibling=Ge,Te=Ge,jt=wi}if(Wt===mt.length)return o(ht,jt),Ne&&Vi(ht,Wt),Gt;if(jt===null){for(;Wt<mt.length;Wt++)jt=Mt(ht,mt[Wt],wt),jt!==null&&(st=E(jt,st,Wt),Te===null?Gt=jt:Te.sibling=jt,Te=jt);return Ne&&Vi(ht,Wt),Gt}for(jt=h(jt);Wt<mt.length;Wt++)wi=St(jt,ht,Wt,mt[Wt],wt),wi!==null&&(e&&wi.alternate!==null&&jt.delete(wi.key===null?Wt:wi.key),st=E(wi,st,Wt),Te===null?Gt=wi:Te.sibling=wi,Te=wi);return e&&jt.forEach(function(_u){return i(ht,_u)}),Ne&&Vi(ht,Wt),Gt}function re(ht,st,mt,wt){if(mt==null)throw Error(s(151));for(var Gt=null,Te=null,jt=st,Wt=st=0,wi=null,Ge=mt.next();jt!==null&&!Ge.done;Wt++,Ge=mt.next()){jt.index>Wt?(wi=jt,jt=null):wi=jt.sibling;var _u=yt(ht,jt,Ge.value,wt);if(_u===null){jt===null&&(jt=wi);break}e&&jt&&_u.alternate===null&&i(ht,jt),st=E(_u,st,Wt),Te===null?Gt=_u:Te.sibling=_u,Te=_u,jt=wi}if(Ge.done)return o(ht,jt),Ne&&Vi(ht,Wt),Gt;if(jt===null){for(;!Ge.done;Wt++,Ge=mt.next())Ge=Mt(ht,Ge.value,wt),Ge!==null&&(st=E(Ge,st,Wt),Te===null?Gt=Ge:Te.sibling=Ge,Te=Ge);return Ne&&Vi(ht,Wt),Gt}for(jt=h(jt);!Ge.done;Wt++,Ge=mt.next())Ge=St(jt,ht,Wt,Ge.value,wt),Ge!==null&&(e&&Ge.alternate!==null&&jt.delete(Ge.key===null?Wt:Ge.key),st=E(Ge,st,Wt),Te===null?Gt=Ge:Te.sibling=Ge,Te=Ge);return e&&jt.forEach(function(N5){return i(ht,N5)}),Ne&&Vi(ht,Wt),Gt}function Kn(ht,st,mt,wt){if(typeof mt=="object"&&mt!==null&&mt.type===_&&mt.key===null&&(mt=mt.props.children),typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case d:t:{for(var Gt=mt.key;st!==null;){if(st.key===Gt){if(Gt=mt.type,Gt===_){if(st.tag===7){o(ht,st.sibling),wt=p(st,mt.props.children),wt.return=ht,ht=wt;break t}}else if(st.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===M&&Pg(Gt)===st.type){o(ht,st.sibling),wt=p(st,mt.props),mc(wt,mt),wt.return=ht,ht=wt;break t}o(ht,st);break}else i(ht,st);st=st.sibling}mt.type===_?(wt=bl(mt.props.children,ht.mode,wt,mt.key),wt.return=ht,ht=wt):(wt=uu(mt.type,mt.key,mt.props,null,ht.mode,wt),mc(wt,mt),wt.return=ht,ht=wt)}return B(ht);case m:t:{for(Gt=mt.key;st!==null;){if(st.key===Gt)if(st.tag===4&&st.stateNode.containerInfo===mt.containerInfo&&st.stateNode.implementation===mt.implementation){o(ht,st.sibling),wt=p(st,mt.children||[]),wt.return=ht,ht=wt;break t}else{o(ht,st);break}else i(ht,st);st=st.sibling}wt=wc(mt,ht.mode,wt),wt.return=ht,ht=wt}return B(ht);case M:return Gt=mt._init,mt=Gt(mt._payload),Kn(ht,st,mt,wt)}if(rt(mt))return qt(ht,st,mt,wt);if(j(mt)){if(Gt=j(mt),typeof Gt!="function")throw Error(s(150));return mt=Gt.call(mt),re(ht,st,mt,wt)}if(typeof mt.then=="function")return Kn(ht,st,gc(mt),wt);if(mt.$$typeof===C)return Kn(ht,st,Ah(ht,mt),wt);lh(ht,mt)}return typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint"?(mt=""+mt,st!==null&&st.tag===6?(o(ht,st.sibling),wt=p(st,mt),wt.return=ht,ht=wt):(o(ht,st),wt=qn(mt,ht.mode,wt),wt.return=ht,ht=wt),B(ht)):o(ht,st)}return function(ht,st,mt,wt){try{dc=0;var Gt=Kn(ht,st,mt,wt);return al=null,Gt}catch(jt){if(jt===nl)throw jt;var Te=Un(29,jt,null,ht.mode);return Te.lanes=wt,Te.return=ht,Te}finally{}}}var ds=zg(!0),gs=zg(!1),$l=ct(null),to=ct(0);function rl(e,i){e=Os,Ct(to,e),Ct($l,i),Os=e|i.baseLanes}function oh(){Ct(to,Os),Ct($l,$l.current)}function pc(){Os=to.current,At($l),At(to)}var ea=ct(null),xr=null;function ms(e){var i=e.alternate;Ct(Gn,Gn.current&1),Ct(ea,e),xr===null&&(i===null||$l.current!==null||i.memoizedState!==null)&&(xr=e)}function Sf(e){if(e.tag===22){if(Ct(Gn,Gn.current),Ct(ea,e),xr===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(xr=e)}}else ps()}function ps(){Ct(Gn,Gn.current),Ct(ea,ea.current)}function Vr(e){At(ea),xr===e&&(xr=null),At(Gn)}var Gn=ct(0);function Xo(e){for(var i=e;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var me=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(o,h){e.push(h)}};this.abort=function(){i.aborted=!0,e.forEach(function(o){return o()})}},W0=a.unstable_scheduleCallback,Ra=a.unstable_NormalPriority,Dn={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tf(){return{controller:new me,data:new Map,refCount:0}}function sl(e){e.refCount--,e.refCount===0&&W0(Ra,function(){e.controller.abort()})}var Ur=null,ll=0,eo=0,ol=null;function J0(e,i){if(Ur===null){var o=Ur=[];ll=0,eo=lp(),ol={status:"pending",value:void 0,then:function(h){o.push(h)}}}return ll++,i.then(bf,bf),i}function bf(){if(--ll===0&&Ur!==null){ol!==null&&(ol.status="fulfilled");var e=Ur;Ur=null,eo=0,ol=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function ul(e,i){var o=[],h={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return e.then(function(){h.status="fulfilled",h.value=i;for(var p=0;p<o.length;p++)(0,o[p])(i)},function(p){for(h.status="rejected",h.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),h}var uh=w.S;w.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&J0(e,i),uh!==null&&uh(e,i)};var ys=ct(null);function yc(){var e=ys.current;return e!==null?e:Qe.pooledCache}function Zo(e,i){i===null?Ct(ys,ys.current):Ct(ys,i.pool)}function _s(){var e=yc();return e===null?null:{parent:Dn._currentValue,pool:e}}var vs=0,ce=null,qe=null,kn=null,Zt=!1,cl=!1,hl=!1,Wo=0,fl=0,Jo=null,$0=0;function bn(){throw Error(s(321))}function no(e,i){if(i===null)return!1;for(var o=0;o<i.length&&o<e.length;o++)if(!Wi(e[o],i[o]))return!1;return!0}function Af(e,i,o,h,p,E){return vs=E,ce=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,w.H=e===null||e.memoizedState===null?gl:Ss,hl=!1,E=o(h,p),hl=!1,cl&&(E=Gg(i,o,h,p)),Bg(e),E}function Bg(e){w.H=Lr;var i=qe!==null&&qe.next!==null;if(vs=0,kn=qe=ce=null,Zt=!1,fl=0,Jo=null,i)throw Error(s(300));e===null||Jn||(e=e.dependencies,e!==null&&iu(e)&&(Jn=!0))}function Gg(e,i,o,h){ce=e;var p=0;do{if(cl&&(Jo=null),fl=0,cl=!1,25<=p)throw Error(s(301));if(p+=1,kn=qe=null,e.updateQueue!=null){var E=e.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}w.H=ro,E=i(o,h)}while(cl);return E}function tp(){var e=w.H,i=e.useState()[0];return i=typeof i.then=="function"?vc(i):i,e=e.useState()[0],(qe!==null?qe.memoizedState:null)!==e&&(ce.flags|=1024),i}function Rf(){var e=Wo!==0;return Wo=0,e}function _c(e,i,o){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~o}function ch(e){if(Zt){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Zt=!1}vs=0,kn=qe=ce=null,cl=!1,fl=Wo=0,Jo=null}function hi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?ce.memoizedState=kn=e:kn=kn.next=e,kn}function Nn(){if(qe===null){var e=ce.alternate;e=e!==null?e.memoizedState:null}else e=qe.next;var i=kn===null?ce.memoizedState:kn.next;if(i!==null)kn=i,qe=e;else{if(e===null)throw ce.alternate===null?Error(s(467)):Error(s(310));qe=e,e={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},kn===null?ce.memoizedState=kn=e:kn=kn.next=e}return kn}var hh;hh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function vc(e){var i=fl;return fl+=1,Jo===null&&(Jo=[]),e=il(Jo,e,i),i=ce,(kn===null?i.memoizedState:kn.next)===null&&(i=i.alternate,w.H=i===null||i.memoizedState===null?gl:Ss),e}function $o(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return vc(e);if(e.$$typeof===C)return Si(e)}throw Error(s(438,String(e)))}function hr(e){var i=null,o=ce.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var h=ce.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(i={data:h.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=hh(),ce.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(e),h=0;h<e;h++)o[h]=L;return i.index++,o}function dn(e,i){return typeof i=="function"?i(e):i}function fr(e){var i=Nn();return na(i,qe,e)}function na(e,i,o){var h=e.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=o;var p=e.baseQueue,E=h.pending;if(E!==null){if(p!==null){var B=p.next;p.next=E.next,E.next=B}i.baseQueue=p=E,h.pending=null}if(E=e.baseState,p===null)e.memoizedState=E;else{i=p.next;var Z=B=null,tt=null,lt=i,bt=!1;do{var Mt=lt.lane&-536870913;if(Mt!==lt.lane?(Kt&Mt)===Mt:(vs&Mt)===Mt){var yt=lt.revertLane;if(yt===0)tt!==null&&(tt=tt.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),Mt===eo&&(bt=!0);else if((vs&yt)===yt){lt=lt.next,yt===eo&&(bt=!0);continue}else Mt={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},tt===null?(Z=tt=Mt,B=E):tt=tt.next=Mt,ce.lanes|=yt,vr|=yt;Mt=lt.action,hl&&o(E,Mt),E=lt.hasEagerState?lt.eagerState:o(E,Mt)}else yt={lane:Mt,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},tt===null?(Z=tt=yt,B=E):tt=tt.next=yt,ce.lanes|=Mt,vr|=Mt;lt=lt.next}while(lt!==null&&lt!==i);if(tt===null?B=E:tt.next=Z,!Wi(E,e.memoizedState)&&(Jn=!0,bt&&(o=ol,o!==null)))throw o;e.memoizedState=E,e.baseState=B,e.baseQueue=tt,h.lastRenderedState=E}return p===null&&(h.lanes=0),[e.memoizedState,h.dispatch]}function fh(e){var i=Nn(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var h=o.dispatch,p=o.pending,E=i.memoizedState;if(p!==null){o.pending=null;var B=p=p.next;do E=e(E,B.action),B=B.next;while(B!==p);Wi(E,i.memoizedState)||(Jn=!0),i.memoizedState=E,i.baseQueue===null&&(i.baseState=E),o.lastRenderedState=E}return[E,h]}function kg(e,i,o){var h=ce,p=Nn(),E=Ne;if(E){if(o===void 0)throw Error(s(407));o=o()}else o=i();var B=!Wi((qe||p).memoizedState,o);if(B&&(p.memoizedState=o,Jn=!0),p=p.queue,Nf(Hg.bind(null,h,p,e),[e]),p.getSnapshot!==i||B||kn!==null&&kn.memoizedState.tag&1){if(h.flags|=2048,Ir(9,dl.bind(null,h,p,o,i),{destroy:void 0},null),Qe===null)throw Error(s(349));E||vs&60||Ui(h,i,o)}return o}function Ui(e,i,o){e.flags|=16384,e={getSnapshot:i,value:o},i=ce.updateQueue,i===null?(i=hh(),ce.updateQueue=i,i.stores=[e]):(o=i.stores,o===null?i.stores=[e]:o.push(e))}function dl(e,i,o,h){i.value=o,i.getSnapshot=h,qg(i)&&jg(e)}function Hg(e,i,o){return o(function(){qg(i)&&jg(e)})}function qg(e){var i=e.getSnapshot;e=e.value;try{var o=i();return!Wi(e,o)}catch{return!0}}function jg(e){var i=cs(e,2);i!==null&&Fn(i,e,2)}function Cf(e){var i=hi();if(typeof e=="function"){var o=e;if(e=o(),hl){Fi(!0);try{o()}finally{Fi(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:e},i}function wf(e,i,o,h){return e.baseState=o,na(e,qe,typeof h=="function"?h:dn)}function ep(e,i,o,h,p){if(yh(e))throw Error(s(485));if(e=i.action,e!==null){var E={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){E.listeners.push(B)}};w.T!==null?o(!0):E.isTransition=!1,h(E),o=i.pending,o===null?(E.next=i.pending=E,Df(i,E)):(E.next=o.next,i.pending=o.next=E)}}function Df(e,i){var o=i.action,h=i.payload,p=e.state;if(i.isTransition){var E=w.T,B={};w.T=B;try{var Z=o(p,h),tt=w.S;tt!==null&&tt(B,Z),Fg(e,i,Z)}catch(lt){Es(e,i,lt)}finally{w.T=E}}else try{E=o(p,h),Fg(e,i,E)}catch(lt){Es(e,i,lt)}}function Fg(e,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(h){io(e,i,h)},function(h){return Es(e,i,h)}):io(e,i,o)}function io(e,i,o){i.status="fulfilled",i.value=o,Kg(i),e.state=o,i=e.pending,i!==null&&(o=i.next,o===i?e.pending=null:(o=o.next,i.next=o,Df(e,o)))}function Es(e,i,o){var h=e.pending;if(e.pending=null,h!==null){h=h.next;do i.status="rejected",i.reason=o,Kg(i),i=i.next;while(i!==h)}e.action=null}function Kg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Yg(e,i){return i}function Qg(e,i){if(Ne){var o=Qe.formState;if(o!==null){t:{var h=ce;if(Ne){if(ai){e:{for(var p=ai,E=Ha;p.nodeType!==8;){if(!E){p=null;break e}if(p=Vs(p.nextSibling),p===null){p=null;break e}}E=p.data,p=E==="F!"||E==="F"?p:null}if(p){ai=Vs(p.nextSibling),h=p.data==="F!";break t}}Jl(h)}h=!1}h&&(i=o[0])}}return o=hi(),o.memoizedState=o.baseState=i,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yg,lastRenderedState:i},o.queue=h,o=Vf.bind(null,ce,h),h.dispatch=o,h=Cf(!1),E=Ec.bind(null,ce,!1,h.queue),h=hi(),p={state:i,dispatch:null,action:e,pending:null},h.queue=p,o=ep.bind(null,ce,p,E,o),p.dispatch=o,h.memoizedState=e,[i,o,!1]}function tu(e){var i=Nn();return Xg(i,qe,e)}function Xg(e,i,o){i=na(e,i,Yg)[0],e=fr(dn)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?vc(i):i;var h=Nn(),p=h.queue,E=p.dispatch;return o!==h.memoizedState&&(ce.flags|=2048,Ir(9,np.bind(null,p,o),{destroy:void 0},null)),[i,E,e]}function np(e,i){e.action=i}function Zg(e){var i=Nn(),o=qe;if(o!==null)return Xg(i,o,e);Nn(),i=i.memoizedState,o=Nn();var h=o.queue.dispatch;return o.memoizedState=e,[i,h,!1]}function Ir(e,i,o,h){return e={tag:e,create:i,inst:o,deps:h,next:null},i=ce.updateQueue,i===null&&(i=hh(),ce.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=e.next=e:(h=o.next,o.next=e,e.next=h,i.lastEffect=e),e}function Wg(){return Nn().memoizedState}function dh(e,i,o,h){var p=hi();ce.flags|=e,p.memoizedState=Ir(1|i,o,{destroy:void 0},h===void 0?null:h)}function gh(e,i,o,h){var p=Nn();h=h===void 0?null:h;var E=p.memoizedState.inst;qe!==null&&h!==null&&no(h,qe.memoizedState.deps)?p.memoizedState=Ir(i,o,E,h):(ce.flags|=e,p.memoizedState=Ir(1|i,o,E,h))}function Jg(e,i){dh(8390656,8,e,i)}function Nf(e,i){gh(2048,8,e,i)}function $g(e,i){return gh(4,2,e,i)}function tm(e,i){return gh(4,4,e,i)}function em(e,i){if(typeof i=="function"){e=e();var o=i(e);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function nm(e,i,o){o=o!=null?o.concat([e]):null,gh(4,4,em.bind(null,i,e),o)}function Of(){}function im(e,i){var o=Nn();i=i===void 0?null:i;var h=o.memoizedState;return i!==null&&no(i,h[1])?h[0]:(o.memoizedState=[e,i],e)}function am(e,i){var o=Nn();i=i===void 0?null:i;var h=o.memoizedState;if(i!==null&&no(i,h[1]))return h[0];if(h=e(),hl){Fi(!0);try{e()}finally{Fi(!1)}}return o.memoizedState=[h,i],h}function mh(e,i,o){return o===void 0||vs&1073741824?e.memoizedState=i:(e.memoizedState=o,e=Oa(),ce.lanes|=e,vr|=e,o)}function rm(e,i,o,h){return Wi(o,i)?o:$l.current!==null?(e=mh(e,o,h),Wi(e,i)||(Jn=!0),e):vs&42?(e=Oa(),ce.lanes|=e,vr|=e,i):(Jn=!0,e.memoizedState=o)}function sm(e,i,o,h,p){var E=gt.p;gt.p=E!==0&&8>E?E:8;var B=w.T,Z={};w.T=Z,Ec(e,!1,i,o);try{var tt=p(),lt=w.S;if(lt!==null&&lt(Z,tt),tt!==null&&typeof tt=="object"&&typeof tt.then=="function"){var bt=ul(tt,h);ao(e,i,bt,Bi(e))}else ao(e,i,h,Bi(e))}catch(Mt){ao(e,i,{then:function(){},status:"rejected",reason:Mt},Bi())}finally{gt.p=E,w.T=B}}function ip(){}function Mf(e,i,o,h){if(e.tag!==5)throw Error(s(476));var p=lm(e).queue;sm(e,p,i,Rt,o===null?ip:function(){return om(e),o(h)})}function lm(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:Rt,baseState:Rt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:Rt},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:o},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function om(e){var i=lm(e).next.queue;ao(e,i,{},Bi())}function ph(){return Si(ad)}function xf(){return Nn().memoizedState}function um(){return Nn().memoizedState}function cm(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var o=Bi();e=Da(o);var h=Na(i,e,o);h!==null&&(Fn(h,i,o),yl(h,i,o)),i={cache:Tf()},e.payload=i;return}i=i.return}}function hm(e,i,o){var h=Bi();o={lane:h,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},yh(e)?fm(i,o):(o=Zl(e,i,o,h),o!==null&&(Fn(o,e,h),dm(o,i,h)))}function Vf(e,i,o){var h=Bi();ao(e,i,o,h)}function ao(e,i,o,h){var p={lane:h,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(yh(e))fm(i,p);else{var E=e.alternate;if(e.lanes===0&&(E===null||E.lanes===0)&&(E=i.lastRenderedReducer,E!==null))try{var B=i.lastRenderedState,Z=E(B,o);if(p.hasEagerState=!0,p.eagerState=Z,Wi(Z,B))return sc(e,i,p,0),Qe===null&&rc(),!1}catch{}finally{}if(o=Zl(e,i,p,h),o!==null)return Fn(o,e,h),dm(o,i,h),!0}return!1}function Ec(e,i,o,h){if(h={lane:2,revertLane:lp(),action:h,hasEagerState:!1,eagerState:null,next:null},yh(e)){if(i)throw Error(s(479))}else i=Zl(e,o,h,2),i!==null&&Fn(i,e,2)}function yh(e){var i=e.alternate;return e===ce||i!==null&&i===ce}function fm(e,i){cl=Zt=!0;var o=e.pending;o===null?i.next=i:(i.next=o.next,o.next=i),e.pending=i}function dm(e,i,o){if(o&4194176){var h=i.lanes;h&=e.pendingLanes,o|=h,i.lanes=o,br(e,o)}}var Lr={readContext:Si,use:$o,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useLayoutEffect:bn,useInsertionEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useSyncExternalStore:bn,useId:bn};Lr.useCacheRefresh=bn,Lr.useMemoCache=bn,Lr.useHostTransitionStatus=bn,Lr.useFormState=bn,Lr.useActionState=bn,Lr.useOptimistic=bn;var gl={readContext:Si,use:$o,useCallback:function(e,i){return hi().memoizedState=[e,i===void 0?null:i],e},useContext:Si,useEffect:Jg,useImperativeHandle:function(e,i,o){o=o!=null?o.concat([e]):null,dh(4194308,4,em.bind(null,i,e),o)},useLayoutEffect:function(e,i){return dh(4194308,4,e,i)},useInsertionEffect:function(e,i){dh(4,2,e,i)},useMemo:function(e,i){var o=hi();i=i===void 0?null:i;var h=e();if(hl){Fi(!0);try{e()}finally{Fi(!1)}}return o.memoizedState=[h,i],h},useReducer:function(e,i,o){var h=hi();if(o!==void 0){var p=o(i);if(hl){Fi(!0);try{o(i)}finally{Fi(!1)}}}else p=i;return h.memoizedState=h.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},h.queue=e,e=e.dispatch=hm.bind(null,ce,e),[h.memoizedState,e]},useRef:function(e){var i=hi();return e={current:e},i.memoizedState=e},useState:function(e){e=Cf(e);var i=e.queue,o=Vf.bind(null,ce,i);return i.dispatch=o,[e.memoizedState,o]},useDebugValue:Of,useDeferredValue:function(e,i){var o=hi();return mh(o,e,i)},useTransition:function(){var e=Cf(!1);return e=sm.bind(null,ce,e.queue,!0,!1),hi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,o){var h=ce,p=hi();if(Ne){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),Qe===null)throw Error(s(349));Kt&60||Ui(h,i,o)}p.memoizedState=o;var E={value:o,getSnapshot:i};return p.queue=E,Jg(Hg.bind(null,h,E,e),[e]),h.flags|=2048,Ir(9,dl.bind(null,h,E,o,i),{destroy:void 0},null),o},useId:function(){var e=hi(),i=Qe.identifierPrefix;if(Ne){var o=fs,h=Or;o=(h&~(1<<32-Zn(h)-1)).toString(32)+o,i=":"+i+"R"+o,o=Wo++,0<o&&(i+="H"+o.toString(32)),i+=":"}else o=$0++,i=":"+i+"r"+o.toString(32)+":";return e.memoizedState=i},useCacheRefresh:function(){return hi().memoizedState=cm.bind(null,ce)}};gl.useMemoCache=hr,gl.useHostTransitionStatus=ph,gl.useFormState=Qg,gl.useActionState=Qg,gl.useOptimistic=function(e){var i=hi();i.memoizedState=i.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Ec.bind(null,ce,!0,o),o.dispatch=i,[e,i]};var Ss={readContext:Si,use:$o,useCallback:im,useContext:Si,useEffect:Nf,useImperativeHandle:nm,useInsertionEffect:$g,useLayoutEffect:tm,useMemo:am,useReducer:fr,useRef:Wg,useState:function(){return fr(dn)},useDebugValue:Of,useDeferredValue:function(e,i){var o=Nn();return rm(o,qe.memoizedState,e,i)},useTransition:function(){var e=fr(dn)[0],i=Nn().memoizedState;return[typeof e=="boolean"?e:vc(e),i]},useSyncExternalStore:kg,useId:xf};Ss.useCacheRefresh=um,Ss.useMemoCache=hr,Ss.useHostTransitionStatus=ph,Ss.useFormState=tu,Ss.useActionState=tu,Ss.useOptimistic=function(e,i){var o=Nn();return wf(o,qe,e,i)};var ro={readContext:Si,use:$o,useCallback:im,useContext:Si,useEffect:Nf,useImperativeHandle:nm,useInsertionEffect:$g,useLayoutEffect:tm,useMemo:am,useReducer:fh,useRef:Wg,useState:function(){return fh(dn)},useDebugValue:Of,useDeferredValue:function(e,i){var o=Nn();return qe===null?mh(o,e,i):rm(o,qe.memoizedState,e,i)},useTransition:function(){var e=fh(dn)[0],i=Nn().memoizedState;return[typeof e=="boolean"?e:vc(e),i]},useSyncExternalStore:kg,useId:xf};ro.useCacheRefresh=um,ro.useMemoCache=hr,ro.useHostTransitionStatus=ph,ro.useFormState=Zg,ro.useActionState=Zg,ro.useOptimistic=function(e,i){var o=Nn();return qe!==null?wf(o,qe,e,i):(o.baseState=e,[e,o.queue.dispatch])};function Uf(e,i,o,h){i=e.memoizedState,o=o(h,i),o=o==null?i:V({},i,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var If={isMounted:function(e){return(e=e._reactInternals)?at(e)===e:!1},enqueueSetState:function(e,i,o){e=e._reactInternals;var h=Bi(),p=Da(h);p.payload=i,o!=null&&(p.callback=o),i=Na(e,p,h),i!==null&&(Fn(i,e,h),yl(i,e,h))},enqueueReplaceState:function(e,i,o){e=e._reactInternals;var h=Bi(),p=Da(h);p.tag=1,p.payload=i,o!=null&&(p.callback=o),i=Na(e,p,h),i!==null&&(Fn(i,e,h),yl(i,e,h))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var o=Bi(),h=Da(o);h.tag=2,i!=null&&(h.callback=i),i=Na(e,h,o),i!==null&&(Fn(i,e,o),yl(i,e,o))}};function gm(e,i,o,h,p,E,B){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,E,B):i.prototype&&i.prototype.isPureReactComponent?!cr(o,h)||!cr(p,E):!0}function mm(e,i,o,h){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,h),i.state!==e&&If.enqueueReplaceState(i,i.state,null)}function so(e,i){var o=i;if("ref"in i){o={};for(var h in i)h!=="ref"&&(o[h]=i[h])}if(e=e.defaultProps){o===i&&(o=V({},o));for(var p in e)o[p]===void 0&&(o[p]=e[p])}return o}var _h=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function pm(e){_h(e)}function ym(e){console.error(e)}function _m(e){_h(e)}function vh(e,i){try{var o=e.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(h){setTimeout(function(){throw h})}}function vm(e,i,o){try{var h=e.onCaughtError;h(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Lf(e,i,o){return o=Da(o),o.tag=3,o.payload={element:null},o.callback=function(){vh(e,i)},o}function Pf(e){return e=Da(e),e.tag=3,e}function Em(e,i,o,h){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var E=h.value;e.payload=function(){return p(E)},e.callback=function(){vm(i,o,h)}}var B=o.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(e.callback=function(){vm(i,o,h),typeof p!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var Z=h.stack;this.componentDidCatch(h.value,{componentStack:Z!==null?Z:""})})}function ap(e,i,o,h,p){if(o.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(i=o.alternate,i!==null&&Tc(i,o,p,!0),o=ea.current,o!==null){switch(o.tag){case 13:return xr===null?Oc():o.alternate===null&&hn===0&&(hn=3),o.flags&=-257,o.flags|=65536,o.lanes=p,h===sh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([h]):i.add(h),ie(e,h,p)),!1;case 22:return o.flags|=65536,h===sh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([h])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([h]):o.add(h)),ie(e,h,p)),!1}throw Error(s(435,o.tag))}return ie(e,h,p),Oc(),!1}if(Ne)return i=ea.current,i!==null?(!(i.flags&65536)&&(i.flags|=256),i.flags|=65536,i.lanes=p,h!==hc&&(e=Error(s(422),{cause:h}),Mr(ta(e,o)))):(h!==hc&&(i=Error(s(423),{cause:h}),Mr(ta(i,o))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,h=ta(h,o),p=Lf(e.stateNode,h,p),ru(e,p),hn!==4&&(hn=2)),!1;var E=Error(s(520),{cause:h});if(E=ta(E,o),Nc===null?Nc=[E]:Nc.push(E),hn!==4&&(hn=2),i===null)return!0;h=ta(h,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,e=p&-p,o.lanes|=e,e=Lf(o.stateNode,h,e),ru(o,e),!1;case 1:if(i=o.type,E=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(jn===null||!jn.has(E))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Pf(p),Em(p,e,o,h),ru(o,p),!1}o=o.return}while(o!==null);return!1}var Ca=Error(s(461)),Jn=!1;function $n(e,i,o,h){i.child=e===null?gs(i,null,o,h):ds(i,e.child,o,h)}function zf(e,i,o,h,p){o=o.render;var E=i.ref;if("ref"in h){var B={};for(var Z in h)Z!=="ref"&&(B[Z]=h[Z])}else B=h;return oo(i),h=Af(e,i,o,B,E,p),Z=Rf(),e!==null&&!Jn?(_c(e,i,p),On(e,i,p)):(Ne&&Z&&cc(i),i.flags|=1,$n(e,i,h,p),i.child)}function Bf(e,i,o,h,p){if(e===null){var E=o.type;return typeof E=="function"&&!Ds(E)&&E.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=E,Gf(e,i,E,h,p)):(e=uu(o.type,null,h,i,i.mode,p),e.ref=i.ref,e.return=i,i.child=e)}if(E=e.child,!Yf(e,p)){var B=E.memoizedProps;if(o=o.compare,o=o!==null?o:cr,o(B,h)&&e.ref===i.ref)return On(e,i,p)}return i.flags|=1,e=Pi(E,h),e.ref=i.ref,e.return=i,i.child=e}function Gf(e,i,o,h,p){if(e!==null){var E=e.memoizedProps;if(cr(E,h)&&e.ref===i.ref)if(Jn=!1,i.pendingProps=h=E,Yf(e,p))e.flags&131072&&(Jn=!0);else return i.lanes=e.lanes,On(e,i,p)}return Hf(e,i,o,h,p)}function Sm(e,i,o){var h=i.pendingProps,p=h.children,E=(i.stateNode._pendingVisibility&2)!==0,B=e!==null?e.memoizedState:null;if(eu(e,i),h.mode==="hidden"||E){if(i.flags&128){if(h=B!==null?B.baseLanes|o:o,e!==null){for(p=i.child=e.child,E=0;p!==null;)E=E|p.lanes|p.childLanes,p=p.sibling;i.childLanes=E&~h}else i.childLanes=0,i.child=null;return kf(e,i,h,o)}if(o&536870912)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Zo(i,B!==null?B.cachePool:null),B!==null?rl(i,B):oh(),Sf(i);else return i.lanes=i.childLanes=536870912,kf(e,i,B!==null?B.baseLanes|o:o,o)}else B!==null?(Zo(i,B.cachePool),rl(i,B),ps(),i.memoizedState=null):(e!==null&&Zo(i,null),oh(),ps());return $n(e,i,p,o),i.child}function kf(e,i,o,h){var p=yc();return p=p===null?null:{parent:Dn._currentValue,pool:p},i.memoizedState={baseLanes:o,cachePool:p},e!==null&&Zo(i,null),oh(),Sf(i),e!==null&&Tc(e,i,h,!0),null}function eu(e,i){var o=i.ref;if(o===null)e!==null&&e.ref!==null&&(i.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(e===null||e.ref!==o)&&(i.flags|=2097664)}}function Hf(e,i,o,h,p){return oo(i),o=Af(e,i,o,h,void 0,p),h=Rf(),e!==null&&!Jn?(_c(e,i,p),On(e,i,p)):(Ne&&h&&cc(i),i.flags|=1,$n(e,i,o,p),i.child)}function Tm(e,i,o,h,p,E){return oo(i),i.updateQueue=null,o=Gg(i,h,o,p),Bg(e),h=Rf(),e!==null&&!Jn?(_c(e,i,E),On(e,i,E)):(Ne&&h&&cc(i),i.flags|=1,$n(e,i,o,E),i.child)}function bm(e,i,o,h,p){if(oo(i),i.stateNode===null){var E=$s,B=o.contextType;typeof B=="object"&&B!==null&&(E=Si(B)),E=new o(h,E),i.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=If,i.stateNode=E,E._reactInternals=i,E=i.stateNode,E.props=h,E.state=i.memoizedState,E.refs={},Ii(i),B=o.contextType,E.context=typeof B=="object"&&B!==null?Si(B):$s,E.state=i.memoizedState,B=o.getDerivedStateFromProps,typeof B=="function"&&(Uf(i,o,B,h),E.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(B=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),B!==E.state&&If.enqueueReplaceState(E,E.state,null),gr(i,h,E,p),Ti(),E.state=i.memoizedState),typeof E.componentDidMount=="function"&&(i.flags|=4194308),h=!0}else if(e===null){E=i.stateNode;var Z=i.memoizedProps,tt=so(o,Z);E.props=tt;var lt=E.context,bt=o.contextType;B=$s,typeof bt=="object"&&bt!==null&&(B=Si(bt));var Mt=o.getDerivedStateFromProps;bt=typeof Mt=="function"||typeof E.getSnapshotBeforeUpdate=="function",Z=i.pendingProps!==Z,bt||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(Z||lt!==B)&&mm(i,E,h,B),Hn=!1;var yt=i.memoizedState;E.state=yt,gr(i,h,E,p),Ti(),lt=i.memoizedState,Z||yt!==lt||Hn?(typeof Mt=="function"&&(Uf(i,o,Mt,h),lt=i.memoizedState),(tt=Hn||gm(i,o,tt,h,yt,lt,B))?(bt||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(i.flags|=4194308)):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=lt),E.props=h,E.state=lt,E.context=B,h=tt):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{E=i.stateNode,Rh(e,i),B=i.memoizedProps,bt=so(o,B),E.props=bt,Mt=i.pendingProps,yt=E.context,lt=o.contextType,tt=$s,typeof lt=="object"&&lt!==null&&(tt=Si(lt)),Z=o.getDerivedStateFromProps,(lt=typeof Z=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(B!==Mt||yt!==tt)&&mm(i,E,h,tt),Hn=!1,yt=i.memoizedState,E.state=yt,gr(i,h,E,p),Ti();var St=i.memoizedState;B!==Mt||yt!==St||Hn||e!==null&&e.dependencies!==null&&iu(e.dependencies)?(typeof Z=="function"&&(Uf(i,o,Z,h),St=i.memoizedState),(bt=Hn||gm(i,o,bt,h,yt,St,tt)||e!==null&&e.dependencies!==null&&iu(e.dependencies))?(lt||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,St,tt),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,St,tt)),typeof E.componentDidUpdate=="function"&&(i.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof E.componentDidUpdate!="function"||B===e.memoizedProps&&yt===e.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||B===e.memoizedProps&&yt===e.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=St),E.props=h,E.state=St,E.context=tt,h=bt):(typeof E.componentDidUpdate!="function"||B===e.memoizedProps&&yt===e.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||B===e.memoizedProps&&yt===e.memoizedState||(i.flags|=1024),h=!1)}return E=h,eu(e,i),h=(i.flags&128)!==0,E||h?(E=i.stateNode,o=h&&typeof o.getDerivedStateFromError!="function"?null:E.render(),i.flags|=1,e!==null&&h?(i.child=ds(i,e.child,null,p),i.child=ds(i,null,o,p)):$n(e,i,o,p),i.memoizedState=E.state,e=i.child):e=On(e,i,p),e}function qf(e,i,o,h){return Yo(),i.flags|=256,$n(e,i,o,h),i.child}var jf={dehydrated:null,treeContext:null,retryLane:0};function ri(e){return{baseLanes:e,cachePool:_s()}}function Eh(e,i,o){return e=e!==null?e.childLanes&~o:0,i&&(e|=zi),e}function Am(e,i,o){var h=i.pendingProps,p=!1,E=(i.flags&128)!==0,B;if((B=E)||(B=e!==null&&e.memoizedState===null?!1:(Gn.current&2)!==0),B&&(p=!0,i.flags&=-129),B=(i.flags&32)!==0,i.flags&=-33,e===null){if(Ne){if(p?ms(i):ps(),Ne){var Z=ai,tt;if(tt=Z){t:{for(tt=Z,Z=Ha;tt.nodeType!==8;){if(!Z){Z=null;break t}if(tt=Vs(tt.nextSibling),tt===null){Z=null;break t}}Z=tt}Z!==null?(i.memoizedState={dehydrated:Z,treeContext:hs!==null?{id:Or,overflow:fs}:null,retryLane:536870912},tt=Un(18,null,null,0),tt.stateNode=Z,tt.return=i,i.child=tt,Ei=i,ai=null,tt=!0):tt=!1}tt||Jl(i)}if(Z=i.memoizedState,Z!==null&&(Z=Z.dehydrated,Z!==null))return Z.data==="$!"?i.lanes=16:i.lanes=536870912,null;Vr(i)}return Z=h.children,h=h.fallback,p?(ps(),p=i.mode,Z=Kf({mode:"hidden",children:Z},p),h=bl(h,p,o,null),Z.return=i,h.return=i,Z.sibling=h,i.child=Z,p=i.child,p.memoizedState=ri(o),p.childLanes=Eh(e,B,o),i.memoizedState=jf,h):(ms(i),Ff(i,Z))}if(tt=e.memoizedState,tt!==null&&(Z=tt.dehydrated,Z!==null)){if(E)i.flags&256?(ms(i),i.flags&=-257,i=Sh(e,i,o)):i.memoizedState!==null?(ps(),i.child=e.child,i.flags|=128,i=null):(ps(),p=h.fallback,Z=i.mode,h=Kf({mode:"visible",children:h.children},Z),p=bl(p,Z,o,null),p.flags|=2,h.return=i,p.return=i,h.sibling=p,i.child=h,ds(i,e.child,null,o),h=i.child,h.memoizedState=ri(o),h.childLanes=Eh(e,B,o),i.memoizedState=jf,i=p);else if(ms(i),Z.data==="$!"){if(B=Z.nextSibling&&Z.nextSibling.dataset,B)var lt=B.dgst;B=lt,h=Error(s(419)),h.stack="",h.digest=B,Mr({value:h,source:null,stack:null}),i=Sh(e,i,o)}else if(Jn||Tc(e,i,o,!1),B=(o&e.childLanes)!==0,Jn||B){if(B=Qe,B!==null){if(h=o&-o,h&42)h=1;else switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=64;break;case 268435456:h=134217728;break;default:h=0}if(h=h&(B.suspendedLanes|o)?0:h,h!==0&&h!==tt.retryLane)throw tt.retryLane=h,cs(e,h),Fn(B,e,h),Ca}Z.data==="$?"||Oc(),i=Sh(e,i,o)}else Z.data==="$?"?(i.flags|=128,i.child=e.child,i=po.bind(null,e),Z._reactRetry=i,i=null):(e=tt.treeContext,ai=Vs(Z.nextSibling),Ei=i,Ne=!0,ka=null,Ha=!1,e!==null&&(sn[Aa++]=Or,sn[Aa++]=fs,sn[Aa++]=hs,Or=e.id,fs=e.overflow,hs=i),i=Ff(i,h.children),i.flags|=4096);return i}return p?(ps(),p=h.fallback,Z=i.mode,tt=e.child,lt=tt.sibling,h=Pi(tt,{mode:"hidden",children:h.children}),h.subtreeFlags=tt.subtreeFlags&31457280,lt!==null?p=Pi(lt,p):(p=bl(p,Z,o,null),p.flags|=2),p.return=i,h.return=i,h.sibling=p,i.child=h,h=p,p=i.child,Z=e.child.memoizedState,Z===null?Z=ri(o):(tt=Z.cachePool,tt!==null?(lt=Dn._currentValue,tt=tt.parent!==lt?{parent:lt,pool:lt}:tt):tt=_s(),Z={baseLanes:Z.baseLanes|o,cachePool:tt}),p.memoizedState=Z,p.childLanes=Eh(e,B,o),i.memoizedState=jf,h):(ms(i),o=e.child,e=o.sibling,o=Pi(o,{mode:"visible",children:h.children}),o.return=i,o.sibling=null,e!==null&&(B=i.deletions,B===null?(i.deletions=[e],i.flags|=16):B.push(e)),i.child=o,i.memoizedState=null,o)}function Ff(e,i){return i=Kf({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Kf(e,i){return Xf(e,i,0,null)}function Sh(e,i,o){return ds(i,e.child,null,o),e=Ff(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Th(e,i,o){e.lanes|=i;var h=e.alternate;h!==null&&(h.lanes|=i),wa(e.return,i,o)}function ml(e,i,o,h,p){var E=e.memoizedState;E===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:p}:(E.isBackwards=i,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=o,E.tailMode=p)}function lo(e,i,o){var h=i.pendingProps,p=h.revealOrder,E=h.tail;if($n(e,i,h.children,o),h=Gn.current,h&2)h=h&1|2,i.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Th(e,o,i);else if(e.tag===19)Th(e,o,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}h&=1}switch(Ct(Gn,h),p){case"forwards":for(o=i.child,p=null;o!==null;)e=o.alternate,e!==null&&Xo(e)===null&&(p=o),o=o.sibling;o=p,o===null?(p=i.child,i.child=null):(p=o.sibling,o.sibling=null),ml(i,!1,p,o,E);break;case"backwards":for(o=null,p=i.child,i.child=null;p!==null;){if(e=p.alternate,e!==null&&Xo(e)===null){i.child=p;break}e=p.sibling,p.sibling=o,o=p,p=e}ml(i,!0,o,null,E);break;case"together":ml(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function On(e,i,o){if(e!==null&&(i.dependencies=e.dependencies),vr|=i.lanes,!(o&i.childLanes))if(e!==null){if(Tc(e,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,o=Pi(e,e.pendingProps),i.child=o,o.return=i;e.sibling!==null;)e=e.sibling,o=o.sibling=Pi(e,e.pendingProps),o.return=i;o.sibling=null}return i.child}function Yf(e,i){return e.lanes&i?!0:(e=e.dependencies,!!(e!==null&&iu(e)))}function rp(e,i,o){switch(i.tag){case 3:Yt(i,i.stateNode.containerInfo),pl(i,Dn,e.memoizedState.cache),Yo();break;case 27:case 5:le(i);break;case 4:Yt(i,i.stateNode.containerInfo);break;case 10:pl(i,i.type,i.memoizedProps.value);break;case 13:var h=i.memoizedState;if(h!==null)return h.dehydrated!==null?(ms(i),i.flags|=128,null):o&i.child.childLanes?Am(e,i,o):(ms(i),e=On(e,i,o),e!==null?e.sibling:null);ms(i);break;case 19:var p=(e.flags&128)!==0;if(h=(o&i.childLanes)!==0,h||(Tc(e,i,o,!1),h=(o&i.childLanes)!==0),p){if(h)return lo(e,i,o);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ct(Gn,Gn.current),h)break;return null;case 22:case 23:return i.lanes=0,Sm(e,i,o);case 24:pl(i,Dn,e.memoizedState.cache)}return On(e,i,o)}function Sc(e,i,o){if(e!==null)if(e.memoizedProps!==i.pendingProps)Jn=!0;else{if(!Yf(e,o)&&!(i.flags&128))return Jn=!1,rp(e,i,o);Jn=!!(e.flags&131072)}else Jn=!1,Ne&&i.flags&1048576&&vf(i,uc,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var h=i.elementType,p=h._init;if(h=p(h._payload),i.type=h,typeof h=="function")Ds(h)?(e=so(h,e),i.tag=1,i=bm(null,i,h,e,o)):(i.tag=0,i=Hf(null,i,h,e,o));else{if(h!=null){if(p=h.$$typeof,p===O){i.tag=11,i=zf(null,i,h,e,o);break t}else if(p===F){i.tag=14,i=Bf(null,i,h,e,o);break t}}throw i=x(h)||h,Error(s(306,i,""))}}return i;case 0:return Hf(e,i,i.type,i.pendingProps,o);case 1:return h=i.type,p=so(h,i.pendingProps),bm(e,i,h,p,o);case 3:t:{if(Yt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));var E=i.pendingProps;p=i.memoizedState,h=p.element,Rh(e,i),gr(i,E,null,o);var B=i.memoizedState;if(E=B.cache,pl(i,Dn,E),E!==p.cache&&bh(i,[Dn],o,!0),Ti(),E=B.element,p.isDehydrated)if(p={element:E,isDehydrated:!1,cache:B.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=qf(e,i,E,o);break t}else if(E!==h){h=ta(Error(s(424)),i),Mr(h),i=qf(e,i,E,o);break t}else for(ai=Vs(i.stateNode.containerInfo.firstChild),Ei=i,Ne=!0,ka=null,Ha=!0,o=gs(i,null,E,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Yo(),E===h){i=On(e,i,o);break t}$n(e,i,E,o)}i=i.child}return i;case 26:return eu(e,i),e===null?(o=Jy(i.type,null,i.pendingProps,null))?i.memoizedState=o:Ne||(o=i.type,e=i.pendingProps,h=Mm($t.current).createElement(o),h[Rn]=i,h[ue]=e,Gi(h,o,e),rn(h),i.stateNode=h):i.memoizedState=Jy(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return le(i),e===null&&Ne&&(h=i.stateNode=Xy(i.type,i.pendingProps,$t.current),Ei=i,Ha=!0,ai=Vs(h.firstChild)),h=i.pendingProps.children,e!==null||Ne?$n(e,i,h,o):i.child=ds(i,null,h,o),eu(e,i),i.child;case 5:return e===null&&Ne&&((p=h=ai)&&(h=r5(h,i.type,i.pendingProps,Ha),h!==null?(i.stateNode=h,Ei=i,ai=Vs(h.firstChild),Ha=!1,p=!0):p=!1),p||Jl(i)),le(i),p=i.type,E=i.pendingProps,B=e!==null?e.memoizedProps:null,h=E.children,pp(p,E)?h=null:B!==null&&pp(p,B)&&(i.flags|=32),i.memoizedState!==null&&(p=Af(e,i,tp,null,null,o),ad._currentValue=p),eu(e,i),$n(e,i,h,o),i.child;case 6:return e===null&&Ne&&((e=o=ai)&&(o=s5(o,i.pendingProps,Ha),o!==null?(i.stateNode=o,Ei=i,ai=null,e=!0):e=!1),e||Jl(i)),null;case 13:return Am(e,i,o);case 4:return Yt(i,i.stateNode.containerInfo),h=i.pendingProps,e===null?i.child=ds(i,null,h,o):$n(e,i,h,o),i.child;case 11:return zf(e,i,i.type,i.pendingProps,o);case 7:return $n(e,i,i.pendingProps,o),i.child;case 8:return $n(e,i,i.pendingProps.children,o),i.child;case 12:return $n(e,i,i.pendingProps.children,o),i.child;case 10:return h=i.pendingProps,pl(i,i.type,h.value),$n(e,i,h.children,o),i.child;case 9:return p=i.type._context,h=i.pendingProps.children,oo(i),p=Si(p),h=h(p),i.flags|=1,$n(e,i,h,o),i.child;case 14:return Bf(e,i,i.type,i.pendingProps,o);case 15:return Gf(e,i,i.type,i.pendingProps,o);case 19:return lo(e,i,o);case 22:return Sm(e,i,o);case 24:return oo(i),h=Si(Dn),e===null?(p=yc(),p===null&&(p=Qe,E=Tf(),p.pooledCache=E,E.refCount++,E!==null&&(p.pooledCacheLanes|=o),p=E),i.memoizedState={parent:h,cache:p},Ii(i),pl(i,Dn,p)):(e.lanes&o&&(Rh(e,i),gr(i,null,null,o),Ti()),p=e.memoizedState,E=i.memoizedState,p.parent!==h?(p={parent:h,cache:h},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),pl(i,Dn,h)):(h=E.cache,pl(i,Dn,h),h!==p.cache&&bh(i,[Dn],o,!0))),$n(e,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}var nu=ct(null),Pr=null,dr=null;function pl(e,i,o){Ct(nu,i._currentValue),i._currentValue=o}function Ts(e){e._currentValue=nu.current,At(nu)}function wa(e,i,o){for(;e!==null;){var h=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),e===o)break;e=e.return}}function bh(e,i,o,h){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var E=p.dependencies;if(E!==null){var B=p.child;E=E.firstContext;t:for(;E!==null;){var Z=E;E=p;for(var tt=0;tt<i.length;tt++)if(Z.context===i[tt]){E.lanes|=o,Z=E.alternate,Z!==null&&(Z.lanes|=o),wa(E.return,o,e),h||(B=null);break t}E=Z.next}}else if(p.tag===18){if(B=p.return,B===null)throw Error(s(341));B.lanes|=o,E=B.alternate,E!==null&&(E.lanes|=o),wa(B,o,e),B=null}else B=p.child;if(B!==null)B.return=p;else for(B=p;B!==null;){if(B===e){B=null;break}if(p=B.sibling,p!==null){p.return=B.return,B=p;break}B=B.return}p=B}}function Tc(e,i,o,h){e=null;for(var p=i,E=!1;p!==null;){if(!E){if(p.flags&524288)E=!0;else if(p.flags&262144)break}if(p.tag===10){var B=p.alternate;if(B===null)throw Error(s(387));if(B=B.memoizedProps,B!==null){var Z=p.type;Wi(p.pendingProps.value,B.value)||(e!==null?e.push(Z):e=[Z])}}else if(p===oe.current){if(B=p.alternate,B===null)throw Error(s(387));B.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(ad):e=[ad])}p=p.return}e!==null&&bh(i,e,o,h),i.flags|=262144}function iu(e){for(e=e.firstContext;e!==null;){if(!Wi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function oo(e){Pr=e,dr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Si(e){return au(Pr,e)}function Ah(e,i){return Pr===null&&oo(e),au(e,i)}function au(e,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},dr===null){if(e===null)throw Error(s(308));dr=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else dr=dr.next=i;return o}var Hn=!1;function Ii(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rh(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Da(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Na(e,i,o){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,ne&2){var p=h.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),h.pending=i,i=oc(e),lc(e,null,o),i}return sc(e,h,i,o),oc(e)}function yl(e,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194176)!==0)){var h=i.lanes;h&=e.pendingLanes,o|=h,i.lanes=o,br(e,o)}}function ru(e,i){var o=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var p=null,E=null;if(o=o.firstBaseUpdate,o!==null){do{var B={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};E===null?p=E=B:E=E.next=B,o=o.next}while(o!==null);E===null?p=E=i:E=E.next=i}else p=E=i;o={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:E,shared:h.shared,callbacks:h.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=i:e.next=i,o.lastBaseUpdate=i}var ia=!1;function Ti(){if(ia){var e=ol;if(e!==null)throw e}}function gr(e,i,o,h){ia=!1;var p=e.updateQueue;Hn=!1;var E=p.firstBaseUpdate,B=p.lastBaseUpdate,Z=p.shared.pending;if(Z!==null){p.shared.pending=null;var tt=Z,lt=tt.next;tt.next=null,B===null?E=lt:B.next=lt,B=tt;var bt=e.alternate;bt!==null&&(bt=bt.updateQueue,Z=bt.lastBaseUpdate,Z!==B&&(Z===null?bt.firstBaseUpdate=lt:Z.next=lt,bt.lastBaseUpdate=tt))}if(E!==null){var Mt=p.baseState;B=0,bt=lt=tt=null,Z=E;do{var yt=Z.lane&-536870913,St=yt!==Z.lane;if(St?(Kt&yt)===yt:(h&yt)===yt){yt!==0&&yt===eo&&(ia=!0),bt!==null&&(bt=bt.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});t:{var qt=e,re=Z;yt=i;var Kn=o;switch(re.tag){case 1:if(qt=re.payload,typeof qt=="function"){Mt=qt.call(Kn,Mt,yt);break t}Mt=qt;break t;case 3:qt.flags=qt.flags&-65537|128;case 0:if(qt=re.payload,yt=typeof qt=="function"?qt.call(Kn,Mt,yt):qt,yt==null)break t;Mt=V({},Mt,yt);break t;case 2:Hn=!0}}yt=Z.callback,yt!==null&&(e.flags|=64,St&&(e.flags|=8192),St=p.callbacks,St===null?p.callbacks=[yt]:St.push(yt))}else St={lane:yt,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},bt===null?(lt=bt=St,tt=Mt):bt=bt.next=St,B|=yt;if(Z=Z.next,Z===null){if(Z=p.shared.pending,Z===null)break;St=Z,Z=St.next,St.next=null,p.lastBaseUpdate=St,p.shared.pending=null}}while(!0);bt===null&&(tt=Mt),p.baseState=tt,p.firstBaseUpdate=lt,p.lastBaseUpdate=bt,E===null&&(p.shared.lanes=0),vr|=B,e.lanes=B,e.memoizedState=Mt}}function zr(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Br(e,i){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)zr(o[e],i)}function Mn(e,i){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var p=h.next;o=p;do{if((o.tag&e)===e){h=void 0;var E=o.create,B=o.inst;h=E(),B.destroy=h}o=o.next}while(o!==p)}}catch(Z){Vt(i,i.return,Z)}}function qa(e,i,o){try{var h=i.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var E=p.next;h=E;do{if((h.tag&e)===e){var B=h.inst,Z=B.destroy;if(Z!==void 0){B.destroy=void 0,p=i;var tt=o;try{Z()}catch(lt){Vt(p,tt,lt)}}}h=h.next}while(h!==E)}}catch(lt){Vt(i,i.return,lt)}}function bs(e){var i=e.updateQueue;if(i!==null){var o=e.stateNode;try{Br(i,o)}catch(h){Vt(e,e.return,h)}}}function bc(e,i,o){o.props=so(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(h){Vt(e,i,h)}}function xn(e,i){try{var o=e.ref;if(o!==null){var h=e.stateNode;switch(e.tag){case 26:case 27:case 5:var p=h;break;default:p=h}typeof o=="function"?e.refCleanup=o(p):o.current=p}}catch(E){Vt(e,i,E)}}function Ye(e,i){var o=e.ref,h=e.refCleanup;if(o!==null)if(typeof h=="function")try{h()}catch(p){Vt(e,i,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){Vt(e,i,p)}else o.current=null}function Oe(e){var i=e.type,o=e.memoizedProps,h=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&h.focus();break t;case"img":o.src?h.src=o.src:o.srcSet&&(h.srcset=o.srcSet)}}catch(p){Vt(e,e.return,p)}}function ja(e,i,o){try{var h=e.stateNode;t5(h,e.type,o,i),h[ue]=i}catch(p){Vt(e,e.return,p)}}function mr(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function Ac(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||mr(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function aa(e,i,o){var h=e.tag;if(h===5||h===6)e=e.stateNode,i?o.nodeType===8?o.parentNode.insertBefore(e,i):o.insertBefore(e,i):(o.nodeType===8?(i=o.parentNode,i.insertBefore(e,o)):(i=o,i.appendChild(e)),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Om));else if(h!==4&&h!==27&&(e=e.child,e!==null))for(aa(e,i,o),e=e.sibling;e!==null;)aa(e,i,o),e=e.sibling}function As(e,i,o){var h=e.tag;if(h===5||h===6)e=e.stateNode,i?o.insertBefore(e,i):o.appendChild(e);else if(h!==4&&h!==27&&(e=e.child,e!==null))for(As(e,i,o),e=e.sibling;e!==null;)As(e,i,o),e=e.sibling}var pr=!1,un=!1,_l=!1,Ch=typeof WeakSet=="function"?WeakSet:Set,Vn=null,wh=!1;function su(e,i){if(e=e.containerInfo,gp=Pm,e=df(e),ac(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else t:{o=(o=e.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var p=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{o.nodeType,E.nodeType}catch{o=null;break t}var B=0,Z=-1,tt=-1,lt=0,bt=0,Mt=e,yt=null;e:for(;;){for(var St;Mt!==o||p!==0&&Mt.nodeType!==3||(Z=B+p),Mt!==E||h!==0&&Mt.nodeType!==3||(tt=B+h),Mt.nodeType===3&&(B+=Mt.nodeValue.length),(St=Mt.firstChild)!==null;)yt=Mt,Mt=St;for(;;){if(Mt===e)break e;if(yt===o&&++lt===p&&(Z=B),yt===E&&++bt===h&&(tt=B),(St=Mt.nextSibling)!==null)break;Mt=yt,yt=Mt.parentNode}Mt=St}o=Z===-1||tt===-1?null:{start:Z,end:tt}}else o=null}o=o||{start:0,end:0}}else o=null;for(mp={focusedElem:e,selectionRange:o},Pm=!1,Vn=i;Vn!==null;)if(i=Vn,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Vn=e;else for(;Vn!==null;){switch(i=Vn,E=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&E!==null){e=void 0,o=i,p=E.memoizedProps,E=E.memoizedState,h=o.stateNode;try{var qt=so(o.type,p,o.elementType===o.type);e=h.getSnapshotBeforeUpdate(qt,E),h.__reactInternalSnapshotBeforeUpdate=e}catch(re){Vt(o,o.return,re)}}break;case 3:if(e&1024){if(e=i.stateNode.containerInfo,o=e.nodeType,o===9)vp(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vp(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Vn=e;break}Vn=i.return}return qt=wh,wh=!1,qt}function lu(e,i,o){var h=o.flags;switch(o.tag){case 0:case 11:case 15:Gr(e,o),h&4&&Mn(5,o);break;case 1:if(Gr(e,o),h&4)if(e=o.stateNode,i===null)try{e.componentDidMount()}catch(Z){Vt(o,o.return,Z)}else{var p=so(o.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(p,i,e.__reactInternalSnapshotBeforeUpdate)}catch(Z){Vt(o,o.return,Z)}}h&64&&bs(o),h&512&&xn(o,o.return);break;case 3:if(Gr(e,o),h&64&&(h=o.updateQueue,h!==null)){if(e=null,o.child!==null)switch(o.child.tag){case 27:case 5:e=o.child.stateNode;break;case 1:e=o.child.stateNode}try{Br(h,e)}catch(Z){Vt(o,o.return,Z)}}break;case 26:Gr(e,o),h&512&&xn(o,o.return);break;case 27:case 5:Gr(e,o),i===null&&h&4&&Oe(o),h&512&&xn(o,o.return);break;case 12:Gr(e,o);break;case 13:Gr(e,o),h&4&&Rm(e,o);break;case 22:if(p=o.memoizedState!==null||pr,!p){i=i!==null&&i.memoizedState!==null||un;var E=pr,B=un;pr=p,(un=i)&&!B?_r(e,o,(o.subtreeFlags&8772)!==0):Gr(e,o),pr=E,un=B}h&512&&(o.memoizedProps.mode==="manual"?xn(o,o.return):Ye(o,o.return));break;default:Gr(e,o)}}function Dh(e){var i=e.alternate;i!==null&&(e.alternate=null,Dh(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Jr(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var cn=null,si=!1;function bi(e,i,o){for(o=o.child;o!==null;)Nh(e,i,o),o=o.sibling}function Nh(e,i,o){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(an,o)}catch{}switch(o.tag){case 26:un||Ye(o,i),bi(e,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:un||Ye(o,i);var h=cn,p=si;for(cn=o.stateNode,bi(e,i,o),o=o.stateNode,i=o.attributes;i.length;)o.removeAttributeNode(i[0]);Jr(o),cn=h,si=p;break;case 5:un||Ye(o,i);case 6:p=cn;var E=si;if(cn=null,bi(e,i,o),cn=p,si=E,cn!==null)if(si)try{e=cn,h=o.stateNode,e.nodeType===8?e.parentNode.removeChild(h):e.removeChild(h)}catch(B){Vt(o,i,B)}else try{cn.removeChild(o.stateNode)}catch(B){Vt(o,i,B)}break;case 18:cn!==null&&(si?(i=cn,o=o.stateNode,i.nodeType===8?_p(i.parentNode,o):i.nodeType===1&&_p(i,o),od(i)):_p(cn,o.stateNode));break;case 4:h=cn,p=si,cn=o.stateNode.containerInfo,si=!0,bi(e,i,o),cn=h,si=p;break;case 0:case 11:case 14:case 15:un||qa(2,o,i),un||qa(4,o,i),bi(e,i,o);break;case 1:un||(Ye(o,i),h=o.stateNode,typeof h.componentWillUnmount=="function"&&bc(o,i,h)),bi(e,i,o);break;case 21:bi(e,i,o);break;case 22:un||Ye(o,i),un=(h=un)||o.memoizedState!==null,bi(e,i,o),un=h;break;default:bi(e,i,o)}}function Rm(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{od(e)}catch(o){Vt(i,i.return,o)}}function Rc(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Ch),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Ch),i;default:throw Error(s(435,e.tag))}}function Cc(e,i){var o=Rc(e);i.forEach(function(h){var p=pt.bind(null,e,h);o.has(h)||(o.add(h),h.then(p,p))})}function Li(e,i){var o=i.deletions;if(o!==null)for(var h=0;h<o.length;h++){var p=o[h],E=e,B=i,Z=B;t:for(;Z!==null;){switch(Z.tag){case 27:case 5:cn=Z.stateNode,si=!1;break t;case 3:cn=Z.stateNode.containerInfo,si=!0;break t;case 4:cn=Z.stateNode.containerInfo,si=!0;break t}Z=Z.return}if(cn===null)throw Error(s(160));Nh(E,B,p),cn=null,si=!1,E=p.alternate,E!==null&&(E.return=null),p.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)uo(i,e),i=i.sibling}var Ai=null;function uo(e,i){var o=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Li(i,e),Ri(e),h&4&&(qa(3,e,e.return),Mn(3,e),qa(5,e,e.return));break;case 1:Li(i,e),Ri(e),h&512&&(un||o===null||Ye(o,o.return)),h&64&&pr&&(e=e.updateQueue,e!==null&&(h=e.callbacks,h!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?h:o.concat(h))));break;case 26:var p=Ai;if(Li(i,e),Ri(e),h&512&&(un||o===null||Ye(o,o.return)),h&4){var E=o!==null?o.memoizedState:null;if(h=e.memoizedState,o===null)if(h===null)if(e.stateNode===null){t:{h=e.type,o=e.memoizedProps,p=p.ownerDocument||p;e:switch(h){case"title":E=p.getElementsByTagName("title")[0],(!E||E[Ar]||E[Rn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=p.createElement(h),p.head.insertBefore(E,p.querySelector("head > title"))),Gi(E,h,o),E[Rn]=e,rn(E),h=E;break t;case"link":var B=e_("link","href",p).get(h+(o.href||""));if(B){for(var Z=0;Z<B.length;Z++)if(E=B[Z],E.getAttribute("href")===(o.href==null?null:o.href)&&E.getAttribute("rel")===(o.rel==null?null:o.rel)&&E.getAttribute("title")===(o.title==null?null:o.title)&&E.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){B.splice(Z,1);break e}}E=p.createElement(h),Gi(E,h,o),p.head.appendChild(E);break;case"meta":if(B=e_("meta","content",p).get(h+(o.content||""))){for(Z=0;Z<B.length;Z++)if(E=B[Z],E.getAttribute("content")===(o.content==null?null:""+o.content)&&E.getAttribute("name")===(o.name==null?null:o.name)&&E.getAttribute("property")===(o.property==null?null:o.property)&&E.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&E.getAttribute("charset")===(o.charSet==null?null:o.charSet)){B.splice(Z,1);break e}}E=p.createElement(h),Gi(E,h,o),p.head.appendChild(E);break;default:throw Error(s(468,h))}E[Rn]=e,rn(E),h=E}e.stateNode=h}else n_(p,e.type,e.stateNode);else e.stateNode=t_(p,h,e.memoizedProps);else E!==h?(E===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):E.count--,h===null?n_(p,e.type,e.stateNode):t_(p,h,e.memoizedProps)):h===null&&e.stateNode!==null&&ja(e,e.memoizedProps,o.memoizedProps)}break;case 27:if(h&4&&e.alternate===null){p=e.stateNode,E=e.memoizedProps;try{for(var tt=p.firstChild;tt;){var lt=tt.nextSibling,bt=tt.nodeName;tt[Ar]||bt==="HEAD"||bt==="BODY"||bt==="SCRIPT"||bt==="STYLE"||bt==="LINK"&&tt.rel.toLowerCase()==="stylesheet"||p.removeChild(tt),tt=lt}for(var Mt=e.type,yt=p.attributes;yt.length;)p.removeAttributeNode(yt[0]);Gi(p,Mt,E),p[Rn]=e,p[ue]=E}catch(qt){Vt(e,e.return,qt)}}case 5:if(Li(i,e),Ri(e),h&512&&(un||o===null||Ye(o,o.return)),e.flags&32){p=e.stateNode;try{Sa(p,"")}catch(qt){Vt(e,e.return,qt)}}h&4&&e.stateNode!=null&&(p=e.memoizedProps,ja(e,p,o!==null?o.memoizedProps:p)),h&1024&&(_l=!0);break;case 6:if(Li(i,e),Ri(e),h&4){if(e.stateNode===null)throw Error(s(162));h=e.memoizedProps,o=e.stateNode;try{o.nodeValue=h}catch(qt){Vt(e,e.return,qt)}}break;case 3:if(Um=null,p=Ai,Ai=xm(i.containerInfo),Li(i,e),Ai=p,Ri(e),h&4&&o!==null&&o.memoizedState.isDehydrated)try{od(i.containerInfo)}catch(qt){Vt(e,e.return,qt)}_l&&(_l=!1,vl(e));break;case 4:h=Ai,Ai=xm(e.stateNode.containerInfo),Li(i,e),Ri(e),Ai=h;break;case 12:Li(i,e),Ri(e);break;case 13:Li(i,e),Ri(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(he=nn()),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Cc(e,h)));break;case 22:if(h&512&&(un||o===null||Ye(o,o.return)),tt=e.memoizedState!==null,lt=o!==null&&o.memoizedState!==null,bt=pr,Mt=un,pr=bt||tt,un=Mt||lt,Li(i,e),un=Mt,pr=bt,Ri(e),i=e.stateNode,i._current=e,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,h&8192&&(i._visibility=tt?i._visibility&-2:i._visibility|1,tt&&(i=pr||un,o===null||lt||i||yr(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))t:for(o=null,i=e;;){if(i.tag===5||i.tag===26||i.tag===27){if(o===null){lt=o=i;try{if(p=lt.stateNode,tt)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{B=lt.stateNode,Z=lt.memoizedProps.style;var St=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;B.style.display=St==null||typeof St=="boolean"?"":(""+St).trim()}}catch(qt){Vt(lt,lt.return,qt)}}}else if(i.tag===6){if(o===null){lt=i;try{lt.stateNode.nodeValue=tt?"":lt.memoizedProps}catch(qt){Vt(lt,lt.return,qt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}h&4&&(h=e.updateQueue,h!==null&&(o=h.retryQueue,o!==null&&(h.retryQueue=null,Cc(e,o))));break;case 19:Li(i,e),Ri(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Cc(e,h)));break;case 21:break;default:Li(i,e),Ri(e)}}function Ri(e){var i=e.flags;if(i&2){try{if(e.tag!==27){t:{for(var o=e.return;o!==null;){if(mr(o)){var h=o;break t}o=o.return}throw Error(s(160))}switch(h.tag){case 27:var p=h.stateNode,E=Ac(e);As(e,E,p);break;case 5:var B=h.stateNode;h.flags&32&&(Sa(B,""),h.flags&=-33);var Z=Ac(e);As(e,Z,B);break;case 3:case 4:var tt=h.stateNode.containerInfo,lt=Ac(e);aa(e,lt,tt);break;default:throw Error(s(161))}}}catch(bt){Vt(e,e.return,bt)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function vl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;vl(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Gr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)lu(e,i.alternate,i),i=i.sibling}function yr(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:qa(4,i,i.return),yr(i);break;case 1:Ye(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&bc(i,i.return,o),yr(i);break;case 26:case 27:case 5:Ye(i,i.return),yr(i);break;case 22:Ye(i,i.return),i.memoizedState===null&&yr(i);break;default:yr(i)}e=e.sibling}}function _r(e,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var h=i.alternate,p=e,E=i,B=E.flags;switch(E.tag){case 0:case 11:case 15:_r(p,E,o),Mn(4,E);break;case 1:if(_r(p,E,o),h=E,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(lt){Vt(h,h.return,lt)}if(h=E,p=h.updateQueue,p!==null){var Z=h.stateNode;try{var tt=p.shared.hiddenCallbacks;if(tt!==null)for(p.shared.hiddenCallbacks=null,p=0;p<tt.length;p++)zr(tt[p],Z)}catch(lt){Vt(h,h.return,lt)}}o&&B&64&&bs(E),xn(E,E.return);break;case 26:case 27:case 5:_r(p,E,o),o&&h===null&&B&4&&Oe(E),xn(E,E.return);break;case 12:_r(p,E,o);break;case 13:_r(p,E,o),o&&B&4&&Rm(p,E);break;case 22:E.memoizedState===null&&_r(p,E,o),xn(E,E.return);break;default:_r(p,E,o)}i=i.sibling}}function ra(e,i){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&sl(o))}function Fa(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&sl(e))}function ln(e,i,o,h){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Rs(e,i,o,h),i=i.sibling}function Rs(e,i,o,h){var p=i.flags;switch(i.tag){case 0:case 11:case 15:ln(e,i,o,h),p&2048&&Mn(9,i);break;case 3:ln(e,i,o,h),p&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&sl(e)));break;case 12:if(p&2048){ln(e,i,o,h),e=i.stateNode;try{var E=i.memoizedProps,B=E.id,Z=E.onPostCommit;typeof Z=="function"&&Z(B,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(tt){Vt(i,i.return,tt)}}else ln(e,i,o,h);break;case 23:break;case 22:E=i.stateNode,i.memoizedState!==null?E._visibility&4?ln(e,i,o,h):Ue(e,i):E._visibility&4?ln(e,i,o,h):(E._visibility|=4,ee(e,i,o,h,(i.subtreeFlags&10256)!==0)),p&2048&&ra(i.alternate,i);break;case 24:ln(e,i,o,h),p&2048&&Fa(i.alternate,i);break;default:ln(e,i,o,h)}}function ee(e,i,o,h,p){for(p=p&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var E=e,B=i,Z=o,tt=h,lt=B.flags;switch(B.tag){case 0:case 11:case 15:ee(E,B,Z,tt,p),Mn(8,B);break;case 23:break;case 22:var bt=B.stateNode;B.memoizedState!==null?bt._visibility&4?ee(E,B,Z,tt,p):Ue(E,B):(bt._visibility|=4,ee(E,B,Z,tt,p)),p&&lt&2048&&ra(B.alternate,B);break;case 24:ee(E,B,Z,tt,p),p&&lt&2048&&Fa(B.alternate,B);break;default:ee(E,B,Z,tt,p)}i=i.sibling}}function Ue(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=e,h=i,p=h.flags;switch(h.tag){case 22:Ue(o,h),p&2048&&ra(h.alternate,h);break;case 24:Ue(o,h),p&2048&&Fa(h.alternate,h);break;default:Ue(o,h)}i=i.sibling}}var gn=8192;function Cs(e){if(e.subtreeFlags&gn)for(e=e.child;e!==null;)co(e),e=e.sibling}function co(e){switch(e.tag){case 26:Cs(e),e.flags&gn&&e.memoizedState!==null&&v5(Ai,e.memoizedState,e.memoizedProps);break;case 5:Cs(e);break;case 3:case 4:var i=Ai;Ai=xm(e.stateNode.containerInfo),Cs(e),Ai=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=gn,gn=16777216,Cs(e),gn=i):Cs(e));break;default:Cs(e)}}function El(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Sl(e){var i=e.deletions;if(e.flags&16){if(i!==null)for(var o=0;o<i.length;o++){var h=i[o];Vn=h,Cm(h,e)}El(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ou(e),e=e.sibling}function ou(e){switch(e.tag){case 0:case 11:case 15:Sl(e),e.flags&2048&&qa(9,e,e.return);break;case 3:Sl(e);break;case 12:Sl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&4&&(e.return===null||e.return.tag!==13)?(i._visibility&=-5,ws(e)):Sl(e);break;default:Sl(e)}}function ws(e){var i=e.deletions;if(e.flags&16){if(i!==null)for(var o=0;o<i.length;o++){var h=i[o];Vn=h,Cm(h,e)}El(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:qa(8,i,i.return),ws(i);break;case 22:o=i.stateNode,o._visibility&4&&(o._visibility&=-5,ws(i));break;default:ws(i)}e=e.sibling}}function Cm(e,i){for(;Vn!==null;){var o=Vn;switch(o.tag){case 0:case 11:case 15:qa(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var h=o.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:sl(o.memoizedState.cache)}if(h=o.child,h!==null)h.return=o,Vn=h;else t:for(o=e;Vn!==null;){h=Vn;var p=h.sibling,E=h.return;if(Dh(h),h===o){Vn=null;break t}if(p!==null){p.return=E,Vn=p;break t}Vn=E}}}function Qf(e,i,o,h){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(e,i,o,h){return new Qf(e,i,o,h)}function Ds(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Pi(e,i){var o=e.alternate;return o===null?(o=Un(e.tag,i,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=i,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&31457280,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,i=e.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function Tl(e,i){e.flags&=31457282;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,i=o.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function uu(e,i,o,h,p,E){var B=0;if(h=e,typeof e=="function")Ds(e)&&(B=1);else if(typeof e=="string")B=y5(e,o,It.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case _:return bl(o.children,p,E,i);case v:B=8,p|=24;break;case b:return e=Un(12,o,i,p|2),e.elementType=b,e.lanes=E,e;case I:return e=Un(13,o,i,p),e.elementType=I,e.lanes=E,e;case z:return e=Un(19,o,i,p),e.elementType=z,e.lanes=E,e;case D:return Xf(o,p,E,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R:case C:B=10;break t;case U:B=9;break t;case O:B=11;break t;case F:B=14;break t;case M:B=16,h=null;break t}B=29,o=Error(s(130,e===null?"null":typeof e,"")),h=null}return i=Un(B,o,i,p),i.elementType=e,i.type=h,i.lanes=E,i}function bl(e,i,o,h){return e=Un(7,e,h,i),e.lanes=o,e}function Xf(e,i,o,h){e=Un(22,e,h,i),e.elementType=D,e.lanes=o;var p={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var E=p._current;if(E===null)throw Error(s(456));if(!(p._pendingVisibility&2)){var B=cs(E,2);B!==null&&(p._pendingVisibility|=2,Fn(B,E,2))}},attach:function(){var E=p._current;if(E===null)throw Error(s(456));if(p._pendingVisibility&2){var B=cs(E,2);B!==null&&(p._pendingVisibility&=-3,Fn(B,E,2))}}};return e.stateNode=p,e}function qn(e,i,o){return e=Un(6,e,null,i),e.lanes=o,e}function wc(e,i,o){return i=Un(4,e.children!==null?e.children:[],e.key,i),i.lanes=o,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function Ka(e){e.flags|=4}function Al(e,i){if(i.type!=="stylesheet"||i.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!i_(i)){if(i=ea.current,i!==null&&((Kt&4194176)===Kt?xr!==null:(Kt&62914560)!==Kt&&!(Kt&536870912)||i!==xr))throw Qo=sh,Ef;e.flags|=8192}}function Ya(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?er():536870912,e.lanes|=i,Hr|=i)}function Dc(e,i){if(!Ne)switch(e.tailMode){case"hidden":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function vn(e){var i=e.alternate!==null&&e.alternate.child===e.child,o=0,h=0;if(i)for(var p=e.child;p!==null;)o|=p.lanes|p.childLanes,h|=p.subtreeFlags&31457280,h|=p.flags&31457280,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)o|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=h,e.childLanes=o,i}function sp(e,i,o){var h=i.pendingProps;switch(el(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(i),null;case 1:return vn(i),null;case 3:return o=i.stateNode,h=null,e!==null&&(h=e.memoizedState.cache),i.memoizedState.cache!==h&&(i.flags|=2048),Ts(Dn),Fe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Ko(i)?Ka(i):e===null||e.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,ka!==null&&(Wa(ka),ka=null))),vn(i),null;case 26:return o=i.memoizedState,e===null?(Ka(i),o!==null?(vn(i),Al(i,o)):(vn(i),i.flags&=-16777217)):o?o!==e.memoizedState?(Ka(i),vn(i),Al(i,o)):(vn(i),i.flags&=-16777217):(e.memoizedProps!==h&&Ka(i),vn(i),i.flags&=-16777217),null;case 27:Ke(i),o=$t.current;var p=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==h&&Ka(i);else{if(!h){if(i.stateNode===null)throw Error(s(166));return vn(i),null}e=It.current,Ko(i)?Ug(i):(e=Xy(p,h,o),i.stateNode=e,Ka(i))}return vn(i),null;case 5:if(Ke(i),o=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==h&&Ka(i);else{if(!h){if(i.stateNode===null)throw Error(s(166));return vn(i),null}if(e=It.current,Ko(i))Ug(i);else{switch(p=Mm($t.current),e){case 1:e=p.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:e=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":e=p.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":e=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof h.is=="string"?p.createElement("select",{is:h.is}):p.createElement("select"),h.multiple?e.multiple=!0:h.size&&(e.size=h.size);break;default:e=typeof h.is=="string"?p.createElement(o,{is:h.is}):p.createElement(o)}}e[Rn]=i,e[ue]=h;t:for(p=i.child;p!==null;){if(p.tag===5||p.tag===6)e.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===i)break t;for(;p.sibling===null;){if(p.return===null||p.return===i)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}i.stateNode=e;t:switch(Gi(e,o,h),o){case"button":case"input":case"select":case"textarea":e=!!h.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Ka(i)}}return vn(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==h&&Ka(i);else{if(typeof h!="string"&&i.stateNode===null)throw Error(s(166));if(e=$t.current,Ko(i)){if(e=i.stateNode,o=i.memoizedProps,h=null,p=Ei,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}e[Rn]=i,e=!!(e.nodeValue===o||h!==null&&h.suppressHydrationWarning===!0||qy(e.nodeValue,o)),e||Jl(i)}else e=Mm(e).createTextNode(h),e[Rn]=i,i.stateNode=e}return vn(i),null;case 13:if(h=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Ko(i),h!==null&&h.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[Rn]=i}else Yo(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;vn(i),p=!1}else ka!==null&&(Wa(ka),ka=null),p=!0;if(!p)return i.flags&256?(Vr(i),i):(Vr(i),null)}if(Vr(i),i.flags&128)return i.lanes=o,i;if(o=h!==null,e=e!==null&&e.memoizedState!==null,o){h=i.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool);var E=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==p&&(h.flags|=2048)}return o!==e&&o&&(i.child.flags|=8192),Ya(i,i.updateQueue),vn(i),null;case 4:return Fe(),e===null&&hp(i.stateNode.containerInfo),vn(i),null;case 10:return Ts(i.type),vn(i),null;case 19:if(At(Gn),p=i.memoizedState,p===null)return vn(i),null;if(h=(i.flags&128)!==0,E=p.rendering,E===null)if(h)Dc(p,!1);else{if(hn!==0||e!==null&&e.flags&128)for(e=i.child;e!==null;){if(E=Xo(e),E!==null){for(i.flags|=128,Dc(p,!1),e=E.updateQueue,i.updateQueue=e,Ya(i,e),i.subtreeFlags=0,e=o,o=i.child;o!==null;)Tl(o,e),o=o.sibling;return Ct(Gn,Gn.current&1|2),i.child}e=e.sibling}p.tail!==null&&nn()>ye&&(i.flags|=128,h=!0,Dc(p,!1),i.lanes=4194304)}else{if(!h)if(e=Xo(E),e!==null){if(i.flags|=128,h=!0,e=e.updateQueue,i.updateQueue=e,Ya(i,e),Dc(p,!0),p.tail===null&&p.tailMode==="hidden"&&!E.alternate&&!Ne)return vn(i),null}else 2*nn()-p.renderingStartTime>ye&&o!==536870912&&(i.flags|=128,h=!0,Dc(p,!1),i.lanes=4194304);p.isBackwards?(E.sibling=i.child,i.child=E):(e=p.last,e!==null?e.sibling=E:i.child=E,p.last=E)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=nn(),i.sibling=null,e=Gn.current,Ct(Gn,h?e&1|2:e&1),i):(vn(i),null);case 22:case 23:return Vr(i),pc(),h=i.memoizedState!==null,e!==null?e.memoizedState!==null!==h&&(i.flags|=8192):h&&(i.flags|=8192),h?o&536870912&&!(i.flags&128)&&(vn(i),i.subtreeFlags&6&&(i.flags|=8192)):vn(i),o=i.updateQueue,o!==null&&Ya(i,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),h=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),h!==o&&(i.flags|=2048),e!==null&&At(ys),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ts(Dn),vn(i),null;case 25:return null}throw Error(s(156,i.tag))}function An(e,i){switch(el(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Ts(Dn),Fe(),e=i.flags,e&65536&&!(e&128)?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Ke(i),null;case 13:if(Vr(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Yo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return At(Gn),null;case 4:return Fe(),null;case 10:return Ts(i.type),null;case 22:case 23:return Vr(i),pc(),e!==null&&At(ys),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Ts(Dn),null;case 25:return null;default:return null}}function Zf(e,i){switch(el(i),i.tag){case 3:Ts(Dn),Fe();break;case 26:case 27:case 5:Ke(i);break;case 4:Fe();break;case 13:Vr(i);break;case 19:At(Gn);break;case 10:Ts(i.type);break;case 22:case 23:Vr(i),pc(),e!==null&&At(ys);break;case 24:Ts(Dn)}}var ho={getCacheForType:function(e){var i=Si(Dn),o=i.data.get(e);return o===void 0&&(o=e(),i.data.set(e,o)),o}},Ns=typeof WeakMap=="function"?WeakMap:Map,ne=0,Qe=null,de=null,Kt=0,$e=0,Ie=null,In=!1,Ci=!1,Rl=!1,Os=0,hn=0,vr=0,kr=0,cu=0,zi=0,Hr=0,Nc=null,pe=null,Xe=!1,he=0,ye=1/0,je=null,jn=null,Qa=!1,Xa=null,fo=0,Er=0,mn=null,Za=0,Ms=null;function Bi(){if(ne&2&&Kt!==0)return Kt&-Kt;if(w.T!==null){var e=eo;return e!==0?e:lp()}return ju()}function Oa(){zi===0&&(zi=!(Kt&536870912)||Ne?Zr():536870912);var e=ea.current;return e!==null&&(e.flags|=32),zi}function Fn(e,i,o){(e===Qe&&$e===2||e.cancelPendingCommit!==null)&&(xs(e,0),Ma(e,Kt,zi,!1)),Sn(e,o),(!(ne&2)||e!==Qe)&&(e===Qe&&(!(ne&2)&&(kr|=o),hn===4&&Ma(e,Kt,zi,!1)),tn(e))}function hu(e,i,o){if(ne&6)throw Error(s(327));var h=!o&&(i&60)===0&&(i&e.expiredLanes)===0||Qr(e,i),p=h?r(e,i):mo(e,i,!0),E=h;do{if(p===0){Ci&&!h&&Ma(e,i,0,!1);break}else if(p===6)Ma(e,i,0,!In);else{if(o=e.current.alternate,E&&!Wf(o)){p=mo(e,i,!1),E=!1;continue}if(p===2){if(E=i,e.errorRecoveryDisabledLanes&E)var B=0;else B=e.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){i=B;t:{var Z=e;p=Nc;var tt=Z.current.memoizedState.isDehydrated;if(tt&&(xs(Z,B).flags|=256),B=mo(Z,B,!1),B!==2){if(Rl&&!tt){Z.errorRecoveryDisabledLanes|=E,kr|=E,p=4;break t}E=pe,pe=p,E!==null&&Wa(E)}p=B}if(E=!1,p!==2)continue}}if(p===1){xs(e,0),Ma(e,i,0,!0);break}t:{switch(h=e,p){case 0:case 1:throw Error(s(345));case 4:if((i&4194176)===i){Ma(h,i,zi,!In);break t}break;case 2:pe=null;break;case 3:case 5:break;default:throw Error(s(329))}if(h.finishedWork=o,h.finishedLanes=i,(i&62914560)===i&&(E=he+300-nn(),10<E)){if(Ma(h,i,zi,!In),_a(h,0)!==0)break t;h.timeoutHandle=Ky(Oh.bind(null,h,o,pe,je,Xe,i,zi,kr,Hr,In,2,-0,0),E);break t}Oh(h,o,pe,je,Xe,i,zi,kr,Hr,In,0,-0,0)}}break}while(!0);tn(e)}function Wa(e){pe===null?pe=e:pe.push.apply(pe,e)}function Oh(e,i,o,h,p,E,B,Z,tt,lt,bt,Mt,yt){var St=i.subtreeFlags;if((St&8192||(St&16785408)===16785408)&&(id={stylesheets:null,count:0,unsuspend:_5},co(i),i=E5(),i!==null)){e.cancelPendingCommit=i(nt.bind(null,e,o,h,p,B,Z,tt,1,Mt,yt)),Ma(e,E,B,!lt);return}nt(e,o,h,p,B,Z,tt,bt,Mt,yt)}function Wf(e){for(var i=e;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var h=0;h<o.length;h++){var p=o[h],E=p.getSnapshot;p=p.value;try{if(!Wi(E(),p))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ma(e,i,o,h){i&=~cu,i&=~kr,e.suspendedLanes|=i,e.pingedLanes&=~i,h&&(e.warmLanes|=i),h=e.expirationTimes;for(var p=i;0<p;){var E=31-Zn(p),B=1<<E;h[E]=-1,p&=~B}o!==0&&Tr(e,o,i)}function go(){return ne&6?!0:(Se(0),!1)}function qr(){if(de!==null){if($e===0)var e=de.return;else e=de,dr=Pr=null,ch(e),al=null,dc=0,e=de;for(;e!==null;)Zf(e.alternate,e),e=e.return;de=null}}function xs(e,i){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,n5(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),qr(),Qe=e,de=o=Pi(e.current,null),Kt=i,$e=0,Ie=null,In=!1,Ci=Qr(e,i),Rl=!1,Hr=zi=cu=kr=vr=hn=0,pe=Nc=null,Xe=!1,i&8&&(i|=i&32);var h=e.entangledLanes;if(h!==0)for(e=e.entanglements,h&=i;0<h;){var p=31-Zn(h),E=1<<p;i|=e[p],h&=~E}return Os=i,rc(),o}function Cl(e,i){ce=null,w.H=Lr,i===nl?(i=Be(),$e=3):i===Ef?(i=Be(),$e=4):$e=i===Ca?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ie=i,de===null&&(hn=1,vh(e,ta(i,e.current)))}function fu(){var e=w.H;return w.H=Lr,e===null?Lr:e}function Mh(){var e=w.A;return w.A=ho,e}function Oc(){hn=4,In||(Kt&4194176)!==Kt&&ea.current!==null||(Ci=!0),!(vr&134217727)&&!(kr&134217727)||Qe===null||Ma(Qe,Kt,zi,!1)}function mo(e,i,o){var h=ne;ne|=2;var p=fu(),E=Mh();(Qe!==e||Kt!==i)&&(je=null,xs(e,i)),i=!1;var B=hn;t:do try{if($e!==0&&de!==null){var Z=de,tt=Ie;switch($e){case 8:qr(),B=6;break t;case 3:case 2:case 6:ea.current===null&&(i=!0);var lt=$e;if($e=0,Ie=null,S(e,Z,tt,lt),o&&Ci){B=0;break t}break;default:lt=$e,$e=0,Ie=null,S(e,Z,tt,lt)}}Jf(),B=hn;break}catch(bt){Cl(e,bt)}while(!0);return i&&e.shellSuspendCounter++,dr=Pr=null,ne=h,w.H=p,w.A=E,de===null&&(Qe=null,Kt=0,rc()),B}function Jf(){for(;de!==null;)f(de)}function r(e,i){var o=ne;ne|=2;var h=fu(),p=Mh();Qe!==e||Kt!==i?(je=null,ye=nn()+500,xs(e,i)):Ci=Qr(e,i);t:do try{if($e!==0&&de!==null){i=de;var E=Ie;e:switch($e){case 1:$e=0,Ie=null,S(e,i,E,1);break;case 2:if(Lg(E)){$e=0,Ie=null,y(i);break}i=function(){$e===2&&Qe===e&&($e=7),tn(e)},E.then(i,i);break t;case 3:$e=7;break t;case 4:$e=5;break t;case 7:Lg(E)?($e=0,Ie=null,y(i)):($e=0,Ie=null,S(e,i,E,7));break;case 5:var B=null;switch(de.tag){case 26:B=de.memoizedState;case 5:case 27:var Z=de;if(!B||i_(B)){$e=0,Ie=null;var tt=Z.sibling;if(tt!==null)de=tt;else{var lt=Z.return;lt!==null?(de=lt,N(lt)):de=null}break e}}$e=0,Ie=null,S(e,i,E,5);break;case 6:$e=0,Ie=null,S(e,i,E,6);break;case 8:qr(),hn=6;break t;default:throw Error(s(462))}}l();break}catch(bt){Cl(e,bt)}while(!0);return dr=Pr=null,w.H=h,w.A=p,ne=o,de!==null?0:(Qe=null,Kt=0,rc(),hn)}function l(){for(;de!==null&&!en();)f(de)}function f(e){var i=Sc(e.alternate,e,Os);e.memoizedProps=e.pendingProps,i===null?N(e):de=i}function y(e){var i=e,o=i.alternate;switch(i.tag){case 15:case 0:i=Tm(o,i,i.pendingProps,i.type,void 0,Kt);break;case 11:i=Tm(o,i,i.pendingProps,i.type.render,i.ref,Kt);break;case 5:ch(i);default:Zf(o,i),i=de=Tl(i,Os),i=Sc(o,i,Os)}e.memoizedProps=e.pendingProps,i===null?N(e):de=i}function S(e,i,o,h){dr=Pr=null,ch(i),al=null,dc=0;var p=i.return;try{if(ap(e,p,i,o,Kt)){hn=1,vh(e,ta(o,e.current)),de=null;return}}catch(E){if(p!==null)throw de=p,E;hn=1,vh(e,ta(o,e.current)),de=null;return}i.flags&32768?(Ne||h===1?e=!0:Ci||Kt&536870912?e=!1:(In=e=!0,(h===2||h===3||h===6)&&(h=ea.current,h!==null&&h.tag===13&&(h.flags|=16384))),W(i,e)):N(i)}function N(e){var i=e;do{if(i.flags&32768){W(i,In);return}e=i.return;var o=sp(i.alternate,i,Os);if(o!==null){de=o;return}if(i=i.sibling,i!==null){de=i;return}de=i=e}while(i!==null);hn===0&&(hn=5)}function W(e,i){do{var o=An(e.alternate,e);if(o!==null){o.flags&=32767,de=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(e=e.sibling,e!==null)){de=e;return}de=e=o}while(e!==null);hn=6,de=null}function nt(e,i,o,h,p,E,B,Z,tt,lt){var bt=w.T,Mt=gt.p;try{gt.p=2,w.T=null,ft(e,i,o,h,Mt,p,E,B,Z,tt,lt)}finally{w.T=bt,gt.p=Mt}}function ft(e,i,o,h,p,E,B,Z){do Ut();while(Xa!==null);if(ne&6)throw Error(s(327));var tt=e.finishedWork;if(h=e.finishedLanes,tt===null)return null;if(e.finishedWork=null,e.finishedLanes=0,tt===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var lt=tt.lanes|tt.childLanes;if(lt|=us,qu(e,h,lt,E,B,Z),e===Qe&&(de=Qe=null,Kt=0),!(tt.subtreeFlags&10256)&&!(tt.flags&10256)||Qa||(Qa=!0,Er=lt,mn=o,ut(Xn,function(){return Ut(),null})),o=(tt.flags&15990)!==0,tt.subtreeFlags&15990||o?(o=w.T,w.T=null,E=gt.p,gt.p=2,B=ne,ne|=4,su(e,tt),uo(tt,e),gf(mp,e.containerInfo),Pm=!!gp,mp=gp=null,e.current=tt,lu(e,tt.alternate,tt),Qn(),ne=B,gt.p=E,w.T=o):e.current=tt,Qa?(Qa=!1,Xa=e,fo=h):Tt(e,lt),lt=e.pendingLanes,lt===0&&(jn=null),pa(tt.stateNode),tn(e),i!==null)for(p=e.onRecoverableError,tt=0;tt<i.length;tt++)lt=i[tt],p(lt.value,{componentStack:lt.stack});return fo&3&&Ut(),lt=e.pendingLanes,h&4194218&&lt&42?e===Ms?Za++:(Za=0,Ms=e):Za=0,Se(0),null}function Tt(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,sl(i)))}function Ut(){if(Xa!==null){var e=Xa,i=Er;Er=0;var o=nr(fo),h=w.T,p=gt.p;try{if(gt.p=32>o?32:o,w.T=null,Xa===null)var E=!1;else{o=mn,mn=null;var B=Xa,Z=fo;if(Xa=null,fo=0,ne&6)throw Error(s(331));var tt=ne;if(ne|=4,ou(B.current),Rs(B,B.current,Z,o),ne=tt,Se(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(an,B)}catch{}E=!0}return E}finally{gt.p=p,w.T=h,Tt(e,i)}}return!1}function Pt(e,i,o){i=ta(o,i),i=Lf(e.stateNode,i,2),e=Na(e,i,2),e!==null&&(Sn(e,2),tn(e))}function Vt(e,i,o){if(e.tag===3)Pt(e,e,o);else for(;i!==null;){if(i.tag===3){Pt(i,e,o);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(jn===null||!jn.has(h))){e=ta(o,e),o=Pf(2),h=Na(i,o,2),h!==null&&(Em(o,h,i,e),Sn(h,2),tn(h));break}}i=i.return}}function ie(e,i,o){var h=e.pingCache;if(h===null){h=e.pingCache=new Ns;var p=new Set;h.set(i,p)}else p=h.get(i),p===void 0&&(p=new Set,h.set(i,p));p.has(o)||(Rl=!0,p.add(o),e=Ja.bind(null,e,i,o),i.then(e,e))}function Ja(e,i,o){var h=e.pingCache;h!==null&&h.delete(i),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,Qe===e&&(Kt&o)===o&&(hn===4||hn===3&&(Kt&62914560)===Kt&&300>nn()-he?!(ne&2)&&xs(e,0):cu|=o,Hr===Kt&&(Hr=0)),tn(e)}function du(e,i){i===0&&(i=er()),e=cs(e,i),e!==null&&(Sn(e,i),tn(e))}function po(e){var i=e.memoizedState,o=0;i!==null&&(o=i.retryLane),du(e,o)}function pt(e,i){var o=0;switch(e.tag){case 13:var h=e.stateNode,p=e.memoizedState;p!==null&&(o=p.retryLane);break;case 19:h=e.stateNode;break;case 22:h=e.stateNode._retryCache;break;default:throw Error(s(314))}h!==null&&h.delete(i),du(e,o)}function ut(e,i){return ke(e,i)}var _t=null,xt=null,Ht=!1,Ze=!1,Xt=!1,ge=0;function tn(e){e!==xt&&e.next===null&&(xt===null?_t=xt=e:xt=xt.next=e),Ze=!0,Ht||(Ht=!0,Y3(wl))}function Se(e,i){if(!Xt&&Ze){Xt=!0;do for(var o=!1,h=_t;h!==null;){if(e!==0){var p=h.pendingLanes;if(p===0)var E=0;else{var B=h.suspendedLanes,Z=h.pingedLanes;E=(1<<31-Zn(42|e)+1)-1,E&=p&~(B&~Z),E=E&201326677?E&201326677|1:E?E|2:0}E!==0&&(o=!0,Ly(h,E))}else E=Kt,E=_a(h,h===Qe?E:0),!(E&3)||Qr(h,E)||(o=!0,Ly(h,E));h=h.next}while(o);Xt=!1}}function wl(){Ze=Ht=!1;var e=0;ge!==0&&(e5()&&(e=ge),ge=0);for(var i=nn(),o=null,h=_t;h!==null;){var p=h.next,E=wm(h,i);E===0?(h.next=null,o===null?_t=p:o.next=p,p===null&&(xt=o)):(o=h,(e!==0||E&3)&&(Ze=!0)),h=p}Se(e)}function wm(e,i){for(var o=e.suspendedLanes,h=e.pingedLanes,p=e.expirationTimes,E=e.pendingLanes&-62914561;0<E;){var B=31-Zn(E),Z=1<<B,tt=p[B];tt===-1?(!(Z&o)||Z&h)&&(p[B]=Xr(Z,i)):tt<=i&&(e.expiredLanes|=Z),E&=~Z}if(i=Qe,o=Kt,o=_a(e,e===i?o:0),h=e.callbackNode,o===0||e===i&&$e===2||e.cancelPendingCommit!==null)return h!==null&&h!==null&&ui(h),e.callbackNode=null,e.callbackPriority=0;if(!(o&3)||Qr(e,o)){if(i=o&-o,i===e.callbackPriority)return i;switch(h!==null&&ui(h),nr(o)){case 2:case 8:o=He;break;case 32:o=Xn;break;case 268435456:o=ji;break;default:o=Xn}return h=Iy.bind(null,e),o=ke(o,h),e.callbackPriority=i,e.callbackNode=o,i}return h!==null&&h!==null&&ui(h),e.callbackPriority=2,e.callbackNode=null,2}function Iy(e,i){var o=e.callbackNode;if(Ut()&&e.callbackNode!==o)return null;var h=Kt;return h=_a(e,e===Qe?h:0),h===0?null:(hu(e,h,i),wm(e,nn()),e.callbackNode!=null&&e.callbackNode===o?Iy.bind(null,e):null)}function Ly(e,i){if(Ut())return null;hu(e,i,!0)}function Y3(e){i5(function(){ne&6?ke(Ce,e):e()})}function lp(){return ge===0&&(ge=Zr()),ge}function Py(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:rr(""+e)}function zy(e,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,e.id&&o.setAttribute("form",e.id),i.parentNode.insertBefore(o,i),e=new FormData(e),o.parentNode.removeChild(o),e}function Q3(e,i,o,h,p){if(i==="submit"&&o&&o.stateNode===p){var E=Py((p[ue]||null).action),B=h.submitter;B&&(i=(i=B[ue]||null)?Py(i.formAction):B.getAttribute("formAction"),i!==null&&(E=i,B=null));var Z=new Ys("action","action",null,h,p);e.push({event:Z,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ge!==0){var tt=B?zy(p,B):new FormData(p);Mf(o,{pending:!0,data:tt,method:p.method,action:E},null,tt)}}else typeof E=="function"&&(Z.preventDefault(),tt=B?zy(p,B):new FormData(p),Mf(o,{pending:!0,data:tt,method:p.method,action:E},E,tt))},currentTarget:p}]})}}for(var op=0;op<os.length;op++){var up=os[op],X3=up.toLowerCase(),Z3=up[0].toUpperCase()+up.slice(1);Ga(X3,"on"+Z3)}Ga(yf,"onAnimationEnd"),Ga($i,"onAnimationIteration"),Ga(_f,"onAnimationStart"),Ga("dblclick","onDoubleClick"),Ga("focusin","onFocus"),Ga("focusout","onBlur"),Ga(ls,"onTransitionRun"),Ga(Fo,"onTransitionStart"),Ga(Js,"onTransitionCancel"),Ga(ih,"onTransitionEnd"),pi("onMouseEnter",["mouseout","mouseover"]),pi("onMouseLeave",["mouseout","mouseover"]),pi("onPointerEnter",["pointerout","pointerover"]),pi("onPointerLeave",["pointerout","pointerover"]),mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $f="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($f));function By(e,i){i=(i&4)!==0;for(var o=0;o<e.length;o++){var h=e[o],p=h.event;h=h.listeners;t:{var E=void 0;if(i)for(var B=h.length-1;0<=B;B--){var Z=h[B],tt=Z.instance,lt=Z.currentTarget;if(Z=Z.listener,tt!==E&&p.isPropagationStopped())break t;E=Z,p.currentTarget=lt;try{E(p)}catch(bt){_h(bt)}p.currentTarget=null,E=tt}else for(B=0;B<h.length;B++){if(Z=h[B],tt=Z.instance,lt=Z.currentTarget,Z=Z.listener,tt!==E&&p.isPropagationStopped())break t;E=Z,p.currentTarget=lt;try{E(p)}catch(bt){_h(bt)}p.currentTarget=null,E=tt}}}}function Me(e,i){var o=i[Wr];o===void 0&&(o=i[Wr]=new Set);var h=e+"__bubble";o.has(h)||(Gy(i,e,2,!1),o.add(h))}function cp(e,i,o){var h=0;i&&(h|=4),Gy(o,e,h,i)}var Dm="_reactListening"+Math.random().toString(36).slice(2);function hp(e){if(!e[Dm]){e[Dm]=!0,zl.forEach(function(o){o!=="selectionchange"&&(W3.has(o)||cp(o,!1,e),cp(o,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Dm]||(i[Dm]=!0,cp("selectionchange",!1,i))}}function Gy(e,i,o,h){switch(u_(i)){case 2:var p=b5;break;case 8:p=A5;break;default:p=Ap}o=p.bind(null,i,o,e),p=void 0,!Xi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),h?p!==void 0?e.addEventListener(i,o,{capture:!0,passive:p}):e.addEventListener(i,o,!0):p!==void 0?e.addEventListener(i,o,{passive:p}):e.addEventListener(i,o,!1)}function fp(e,i,o,h,p){var E=h;if(!(i&1)&&!(i&2)&&h!==null)t:for(;;){if(h===null)return;var B=h.tag;if(B===3||B===4){var Z=h.stateNode.containerInfo;if(Z===p||Z.nodeType===8&&Z.parentNode===p)break;if(B===4)for(B=h.return;B!==null;){var tt=B.tag;if((tt===3||tt===4)&&(tt=B.stateNode.containerInfo,tt===p||tt.nodeType===8&&tt.parentNode===p))return;B=B.return}for(;Z!==null;){if(B=va(Z),B===null)return;if(tt=B.tag,tt===5||tt===6||tt===26||tt===27){h=E=B;continue t}Z=Z.parentNode}}h=h.return}Qu(function(){var lt=E,bt=Hs(o),Mt=[];t:{var yt=ah.get(e);if(yt!==void 0){var St=Ys,qt=e;switch(e){case"keypress":if(Zi(o)===0)break t;case"keydown":case"keyup":St=Zs;break;case"focusin":qt="focus",St=kl;break;case"focusout":qt="blur",St=kl;break;case"beforeblur":case"afterblur":St=kl;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":St=ba;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":St=cf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":St=zo;break;case yf:case $i:case _f:St=Hl;break;case ih:St=Ia;break;case"scroll":case"scrollend":St=Xu;break;case"wheel":St=Go;break;case"copy":case"cut":case"paste":St=ql;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":St=Yl;break;case"toggle":case"beforetoggle":St=ur}var re=(i&4)!==0,Kn=!re&&(e==="scroll"||e==="scrollend"),ht=re?yt!==null?yt+"Capture":null:yt;re=[];for(var st=lt,mt;st!==null;){var wt=st;if(mt=wt.stateNode,wt=wt.tag,wt!==5&&wt!==26&&wt!==27||mt===null||ht===null||(wt=qs(st,ht),wt!=null&&re.push(td(st,wt,mt))),Kn)break;st=st.return}0<re.length&&(yt=new St(yt,qt,null,o,bt),Mt.push({event:yt,listeners:re}))}}if(!(i&7)){t:{if(yt=e==="mouseover"||e==="pointerover",St=e==="mouseout"||e==="pointerout",yt&&o!==Ta&&(qt=o.relatedTarget||o.fromElement)&&(va(qt)||qt[ir]))break t;if((St||yt)&&(yt=bt.window===bt?bt:(yt=bt.ownerDocument)?yt.defaultView||yt.parentWindow:window,St?(qt=o.relatedTarget||o.toElement,St=lt,qt=qt?va(qt):null,qt!==null&&(Kn=at(qt),re=qt.tag,qt!==Kn||re!==5&&re!==27&&re!==6)&&(qt=null)):(St=null,qt=lt),St!==qt)){if(re=ba,wt="onMouseLeave",ht="onMouseEnter",st="mouse",(e==="pointerout"||e==="pointerover")&&(re=Yl,wt="onPointerLeave",ht="onPointerEnter",st="pointer"),Kn=St==null?yt:Je(St),mt=qt==null?yt:Je(qt),yt=new re(wt,st+"leave",St,o,bt),yt.target=Kn,yt.relatedTarget=mt,wt=null,va(bt)===lt&&(re=new re(ht,st+"enter",qt,o,bt),re.target=mt,re.relatedTarget=Kn,wt=re),Kn=wt,St&&qt)e:{for(re=St,ht=qt,st=0,mt=re;mt;mt=xh(mt))st++;for(mt=0,wt=ht;wt;wt=xh(wt))mt++;for(;0<st-mt;)re=xh(re),st--;for(;0<mt-st;)ht=xh(ht),mt--;for(;st--;){if(re===ht||ht!==null&&re===ht.alternate)break e;re=xh(re),ht=xh(ht)}re=null}else re=null;St!==null&&ky(Mt,yt,St,re,!1),qt!==null&&Kn!==null&&ky(Mt,Kn,qt,re,!0)}}t:{if(yt=lt?Je(lt):window,St=yt.nodeName&&yt.nodeName.toLowerCase(),St==="select"||St==="input"&&yt.type==="file")var Gt=Wc;else if(zn(yt))if(Jc)Gt=Ws;else{Gt=xg;var Te=Z0}else St=yt.nodeName,!St||St.toLowerCase()!=="input"||yt.type!=="checkbox"&&yt.type!=="radio"?lt&&Gl(lt.elementType)&&(Gt=Wc):Gt=ic;if(Gt&&(Gt=Gt(e,lt))){wn(Mt,Gt,o,bt);break t}Te&&Te(e,yt,lt),e==="focusout"&&lt&&yt.type==="number"&&lt.memoizedProps.value!=null&&Bl(yt,"number",yt.value)}switch(Te=lt?Je(lt):window,e){case"focusin":(zn(Te)||Te.contentEditable==="true")&&(Ql=Te,mf=lt,jo=null);break;case"focusout":jo=mf=Ql=null;break;case"mousedown":eh=!0;break;case"contextmenu":case"mouseup":case"dragend":eh=!1,Ba(Mt,o,bt);break;case"selectionchange":if(th)break;case"keydown":case"keyup":Ba(Mt,o,bt)}var jt;if(Pa)t:{switch(e){case"compositionstart":var Wt="onCompositionStart";break t;case"compositionend":Wt="onCompositionEnd";break t;case"compositionupdate":Wt="onCompositionUpdate";break t}Wt=void 0}else ve?vt(e,o)&&(Wt="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Wt="onCompositionStart");Wt&&(P&&o.locale!=="ko"&&(ve||Wt!=="onCompositionStart"?Wt==="onCompositionEnd"&&ve&&(jt=Io()):(lr=bt,Fs="value"in lr?lr.value:lr.textContent,ve=!0)),Te=Nm(lt,Wt),0<Te.length&&(Wt=new Fl(Wt,e,null,o,bt),Mt.push({event:Wt,listeners:Te}),jt?Wt.data=jt:(jt=Lt(o),jt!==null&&(Wt.data=jt)))),(jt=A?_n(e,o):Ee(e,o))&&(Wt=Nm(lt,"onBeforeInput"),0<Wt.length&&(Te=new Fl("onBeforeInput","beforeinput",null,o,bt),Mt.push({event:Te,listeners:Wt}),Te.data=jt)),Q3(Mt,e,lt,o,bt)}By(Mt,i)})}function td(e,i,o){return{instance:e,listener:i,currentTarget:o}}function Nm(e,i){for(var o=i+"Capture",h=[];e!==null;){var p=e,E=p.stateNode;p=p.tag,p!==5&&p!==26&&p!==27||E===null||(p=qs(e,o),p!=null&&h.unshift(td(e,p,E)),p=qs(e,i),p!=null&&h.push(td(e,p,E))),e=e.return}return h}function xh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ky(e,i,o,h,p){for(var E=i._reactName,B=[];o!==null&&o!==h;){var Z=o,tt=Z.alternate,lt=Z.stateNode;if(Z=Z.tag,tt!==null&&tt===h)break;Z!==5&&Z!==26&&Z!==27||lt===null||(tt=lt,p?(lt=qs(o,E),lt!=null&&B.unshift(td(o,lt,tt))):p||(lt=qs(o,E),lt!=null&&B.push(td(o,lt,tt)))),o=o.return}B.length!==0&&e.push({event:i,listeners:B})}var J3=/\r\n?/g,$3=/\u0000|\uFFFD/g;function Hy(e){return(typeof e=="string"?e:""+e).replace(J3,`
`).replace($3,"")}function qy(e,i){return i=Hy(i),Hy(e)===i}function Om(){}function on(e,i,o,h,p,E){switch(o){case"children":typeof h=="string"?i==="body"||i==="textarea"&&h===""||Sa(e,h):(typeof h=="number"||typeof h=="bigint")&&i!=="body"&&Sa(e,""+h);break;case"className":ts(e,"class",h);break;case"tabIndex":ts(e,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":ts(e,o,h);break;case"style":Yu(e,h,E);break;case"data":if(i!=="object"){ts(e,"data",h);break}case"src":case"href":if(h===""&&(i!=="a"||o!=="href")){e.removeAttribute(o);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(o);break}h=rr(""+h),e.setAttribute(o,h);break;case"action":case"formAction":if(typeof h=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(o==="formAction"?(i!=="input"&&on(e,i,"name",p.name,p,null),on(e,i,"formEncType",p.formEncType,p,null),on(e,i,"formMethod",p.formMethod,p,null),on(e,i,"formTarget",p.formTarget,p,null)):(on(e,i,"encType",p.encType,p,null),on(e,i,"method",p.method,p,null),on(e,i,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(o);break}h=rr(""+h),e.setAttribute(o,h);break;case"onClick":h!=null&&(e.onclick=Om);break;case"onScroll":h!=null&&Me("scroll",e);break;case"onScrollEnd":h!=null&&Me("scrollend",e);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(o=h.__html,o!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=o}}break;case"multiple":e.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":e.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){e.removeAttribute("xlink:href");break}o=rr(""+h),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,""+h):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":h===!0?e.setAttribute(o,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,h):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?e.setAttribute(o,h):e.removeAttribute(o);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?e.removeAttribute(o):e.setAttribute(o,h);break;case"popover":Me("beforetoggle",e),Me("toggle",e),$r(e,"popover",h);break;case"xlinkActuate":Qi(e,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Qi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Qi(e,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Qi(e,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Qi(e,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Qi(e,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Qi(e,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Qi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Qi(e,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":$r(e,"is",h);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Xc.get(o)||o,$r(e,o,h))}}function dp(e,i,o,h,p,E){switch(o){case"style":Yu(e,h,E);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(o=h.__html,o!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=o}}break;case"children":typeof h=="string"?Sa(e,h):(typeof h=="number"||typeof h=="bigint")&&Sa(e,""+h);break;case"onScroll":h!=null&&Me("scroll",e);break;case"onScrollEnd":h!=null&&Me("scrollend",e);break;case"onClick":h!=null&&(e.onclick=Om);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yi.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),i=o.slice(2,p?o.length-7:void 0),E=e[ue]||null,E=E!=null?E[o]:null,typeof E=="function"&&e.removeEventListener(i,E,p),typeof h=="function")){typeof E!="function"&&E!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(i,h,p);break t}o in e?e[o]=h:h===!0?e.setAttribute(o,""):$r(e,o,h)}}}function Gi(e,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",e),Me("load",e);var h=!1,p=!1,E;for(E in o)if(o.hasOwnProperty(E)){var B=o[E];if(B!=null)switch(E){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:on(e,i,E,B,o,null)}}p&&on(e,i,"srcSet",o.srcSet,o,null),h&&on(e,i,"src",o.src,o,null);return;case"input":Me("invalid",e);var Z=E=B=p=null,tt=null,lt=null;for(h in o)if(o.hasOwnProperty(h)){var bt=o[h];if(bt!=null)switch(h){case"name":p=bt;break;case"type":B=bt;break;case"checked":tt=bt;break;case"defaultChecked":lt=bt;break;case"value":E=bt;break;case"defaultValue":Z=bt;break;case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(s(137,i));break;default:on(e,i,h,bt,o,null)}}Bs(e,E,Z,tt,lt,B,p,!1),Ps(e);return;case"select":Me("invalid",e),h=B=E=null;for(p in o)if(o.hasOwnProperty(p)&&(Z=o[p],Z!=null))switch(p){case"value":E=Z;break;case"defaultValue":B=Z;break;case"multiple":h=Z;default:on(e,i,p,Z,o,null)}i=E,o=B,e.multiple=!!h,i!=null?Ve(e,!!h,i,!1):o!=null&&Ve(e,!!h,o,!0);return;case"textarea":Me("invalid",e),E=p=h=null;for(B in o)if(o.hasOwnProperty(B)&&(Z=o[B],Z!=null))switch(B){case"value":h=Z;break;case"defaultValue":p=Z;break;case"children":E=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(91));break;default:on(e,i,B,Z,o,null)}Ea(e,h,p,E),Ps(e);return;case"option":for(tt in o)if(o.hasOwnProperty(tt)&&(h=o[tt],h!=null))switch(tt){case"selected":e.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:on(e,i,tt,h,o,null)}return;case"dialog":Me("cancel",e),Me("close",e);break;case"iframe":case"object":Me("load",e);break;case"video":case"audio":for(h=0;h<$f.length;h++)Me($f[h],e);break;case"image":Me("error",e),Me("load",e);break;case"details":Me("toggle",e);break;case"embed":case"source":case"link":Me("error",e),Me("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in o)if(o.hasOwnProperty(lt)&&(h=o[lt],h!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:on(e,i,lt,h,o,null)}return;default:if(Gl(i)){for(bt in o)o.hasOwnProperty(bt)&&(h=o[bt],h!==void 0&&dp(e,i,bt,h,o,void 0));return}}for(Z in o)o.hasOwnProperty(Z)&&(h=o[Z],h!=null&&on(e,i,Z,h,o,null))}function t5(e,i,o,h){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,E=null,B=null,Z=null,tt=null,lt=null,bt=null;for(St in o){var Mt=o[St];if(o.hasOwnProperty(St)&&Mt!=null)switch(St){case"checked":break;case"value":break;case"defaultValue":tt=Mt;default:h.hasOwnProperty(St)||on(e,i,St,null,h,Mt)}}for(var yt in h){var St=h[yt];if(Mt=o[yt],h.hasOwnProperty(yt)&&(St!=null||Mt!=null))switch(yt){case"type":E=St;break;case"name":p=St;break;case"checked":lt=St;break;case"defaultChecked":bt=St;break;case"value":B=St;break;case"defaultValue":Z=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(s(137,i));break;default:St!==Mt&&on(e,i,yt,St,h,Mt)}}es(e,B,Z,tt,lt,bt,E,p);return;case"select":St=B=Z=yt=null;for(E in o)if(tt=o[E],o.hasOwnProperty(E)&&tt!=null)switch(E){case"value":break;case"multiple":St=tt;default:h.hasOwnProperty(E)||on(e,i,E,null,h,tt)}for(p in h)if(E=h[p],tt=o[p],h.hasOwnProperty(p)&&(E!=null||tt!=null))switch(p){case"value":yt=E;break;case"defaultValue":Z=E;break;case"multiple":B=E;default:E!==tt&&on(e,i,p,E,h,tt)}i=Z,o=B,h=St,yt!=null?Ve(e,!!o,yt,!1):!!h!=!!o&&(i!=null?Ve(e,!!o,i,!0):Ve(e,!!o,o?[]:"",!1));return;case"textarea":St=yt=null;for(Z in o)if(p=o[Z],o.hasOwnProperty(Z)&&p!=null&&!h.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:on(e,i,Z,null,h,p)}for(B in h)if(p=h[B],E=o[B],h.hasOwnProperty(B)&&(p!=null||E!=null))switch(B){case"value":yt=p;break;case"defaultValue":St=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==E&&on(e,i,B,p,h,E)}Gs(e,yt,St);return;case"option":for(var qt in o)if(yt=o[qt],o.hasOwnProperty(qt)&&yt!=null&&!h.hasOwnProperty(qt))switch(qt){case"selected":e.selected=!1;break;default:on(e,i,qt,null,h,yt)}for(tt in h)if(yt=h[tt],St=o[tt],h.hasOwnProperty(tt)&&yt!==St&&(yt!=null||St!=null))switch(tt){case"selected":e.selected=yt&&typeof yt!="function"&&typeof yt!="symbol";break;default:on(e,i,tt,yt,h,St)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var re in o)yt=o[re],o.hasOwnProperty(re)&&yt!=null&&!h.hasOwnProperty(re)&&on(e,i,re,null,h,yt);for(lt in h)if(yt=h[lt],St=o[lt],h.hasOwnProperty(lt)&&yt!==St&&(yt!=null||St!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(s(137,i));break;default:on(e,i,lt,yt,h,St)}return;default:if(Gl(i)){for(var Kn in o)yt=o[Kn],o.hasOwnProperty(Kn)&&yt!==void 0&&!h.hasOwnProperty(Kn)&&dp(e,i,Kn,void 0,h,yt);for(bt in h)yt=h[bt],St=o[bt],!h.hasOwnProperty(bt)||yt===St||yt===void 0&&St===void 0||dp(e,i,bt,yt,h,St);return}}for(var ht in o)yt=o[ht],o.hasOwnProperty(ht)&&yt!=null&&!h.hasOwnProperty(ht)&&on(e,i,ht,null,h,yt);for(Mt in h)yt=h[Mt],St=o[Mt],!h.hasOwnProperty(Mt)||yt===St||yt==null&&St==null||on(e,i,Mt,yt,h,St)}var gp=null,mp=null;function Mm(e){return e.nodeType===9?e:e.ownerDocument}function jy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fy(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function pp(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var yp=null;function e5(){var e=window.event;return e&&e.type==="popstate"?e===yp?!1:(yp=e,!0):(yp=null,!1)}var Ky=typeof setTimeout=="function"?setTimeout:void 0,n5=typeof clearTimeout=="function"?clearTimeout:void 0,Yy=typeof Promise=="function"?Promise:void 0,i5=typeof queueMicrotask=="function"?queueMicrotask:typeof Yy<"u"?function(e){return Yy.resolve(null).then(e).catch(a5)}:Ky;function a5(e){setTimeout(function(){throw e})}function _p(e,i){var o=i,h=0;do{var p=o.nextSibling;if(e.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(h===0){e.removeChild(p),od(i);return}h--}else o!=="$"&&o!=="$?"&&o!=="$!"||h++;o=p}while(o);od(i)}function vp(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":vp(o),Jr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function r5(e,i,o,h){for(;e.nodeType===1;){var p=o;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!h&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(h){if(!e[Ar])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(E=e.getAttribute("rel"),E==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(E!==p.rel||e.getAttribute("href")!==(p.href==null?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(E=e.getAttribute("src"),(E!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&E&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var E=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===E)return e}else return e;if(e=Vs(e.nextSibling),e===null)break}return null}function s5(e,i,o){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=Vs(e.nextSibling),e===null))return null;return e}function Vs(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}function Qy(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return e;i--}else o==="/$"&&i++}e=e.previousSibling}return null}function Xy(e,i,o){switch(i=Mm(o),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}var jr=new Map,Zy=new Set;function xm(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var yo=gt.d;gt.d={f:l5,r:o5,D:u5,C:c5,L:h5,m:f5,X:g5,S:d5,M:m5};function l5(){var e=yo.f(),i=go();return e||i}function o5(e){var i=Tn(e);i!==null&&i.tag===5&&i.type==="form"?om(i):yo.r(e)}var Vh=typeof document>"u"?null:document;function Wy(e,i,o){var h=Vh;if(h&&typeof i=="string"&&i){var p=pn(i);p='link[rel="'+e+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),Zy.has(p)||(Zy.add(p),e={rel:e,crossOrigin:o,href:i},h.querySelector(p)===null&&(i=h.createElement("link"),Gi(i,"link",e),rn(i),h.head.appendChild(i)))}}function u5(e){yo.D(e),Wy("dns-prefetch",e,null)}function c5(e,i){yo.C(e,i),Wy("preconnect",e,i)}function h5(e,i,o){yo.L(e,i,o);var h=Vh;if(h&&e&&i){var p='link[rel="preload"][as="'+pn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+pn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+pn(o.imageSizes)+'"]')):p+='[href="'+pn(e)+'"]';var E=p;switch(i){case"style":E=Uh(e);break;case"script":E=Ih(e)}jr.has(E)||(e=V({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:e,as:i},o),jr.set(E,e),h.querySelector(p)!==null||i==="style"&&h.querySelector(ed(E))||i==="script"&&h.querySelector(nd(E))||(i=h.createElement("link"),Gi(i,"link",e),rn(i),h.head.appendChild(i)))}}function f5(e,i){yo.m(e,i);var o=Vh;if(o&&e){var h=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+pn(h)+'"][href="'+pn(e)+'"]',E=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Ih(e)}if(!jr.has(E)&&(e=V({rel:"modulepreload",href:e},i),jr.set(E,e),o.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(nd(E)))return}h=o.createElement("link"),Gi(h,"link",e),rn(h),o.head.appendChild(h)}}}function d5(e,i,o){yo.S(e,i,o);var h=Vh;if(h&&e){var p=xa(h).hoistableStyles,E=Uh(e);i=i||"default";var B=p.get(E);if(!B){var Z={loading:0,preload:null};if(B=h.querySelector(ed(E)))Z.loading=5;else{e=V({rel:"stylesheet",href:e,"data-precedence":i},o),(o=jr.get(E))&&Ep(e,o);var tt=B=h.createElement("link");rn(tt),Gi(tt,"link",e),tt._p=new Promise(function(lt,bt){tt.onload=lt,tt.onerror=bt}),tt.addEventListener("load",function(){Z.loading|=1}),tt.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,Vm(B,i,h)}B={type:"stylesheet",instance:B,count:1,state:Z},p.set(E,B)}}}function g5(e,i){yo.X(e,i);var o=Vh;if(o&&e){var h=xa(o).hoistableScripts,p=Ih(e),E=h.get(p);E||(E=o.querySelector(nd(p)),E||(e=V({src:e,async:!0},i),(i=jr.get(p))&&Sp(e,i),E=o.createElement("script"),rn(E),Gi(E,"link",e),o.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(p,E))}}function m5(e,i){yo.M(e,i);var o=Vh;if(o&&e){var h=xa(o).hoistableScripts,p=Ih(e),E=h.get(p);E||(E=o.querySelector(nd(p)),E||(e=V({src:e,async:!0,type:"module"},i),(i=jr.get(p))&&Sp(e,i),E=o.createElement("script"),rn(E),Gi(E,"link",e),o.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(p,E))}}function Jy(e,i,o,h){var p=(p=$t.current)?xm(p):null;if(!p)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Uh(o.href),o=xa(p).hoistableStyles,h=o.get(i),h||(h={type:"style",instance:null,count:0,state:null},o.set(i,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=Uh(o.href);var E=xa(p).hoistableStyles,B=E.get(e);if(B||(p=p.ownerDocument||p,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(e,B),(E=p.querySelector(ed(e)))&&!E._p&&(B.instance=E,B.state.loading=5),jr.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},jr.set(e,o),E||p5(p,e,o,B.state))),i&&h===null)throw Error(s(528,""));return B}if(i&&h!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ih(o),o=xa(p).hoistableScripts,h=o.get(i),h||(h={type:"script",instance:null,count:0,state:null},o.set(i,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Uh(e){return'href="'+pn(e)+'"'}function ed(e){return'link[rel="stylesheet"]['+e+"]"}function $y(e){return V({},e,{"data-precedence":e.precedence,precedence:null})}function p5(e,i,o,h){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?h.loading=1:(i=e.createElement("link"),h.preload=i,i.addEventListener("load",function(){return h.loading|=1}),i.addEventListener("error",function(){return h.loading|=2}),Gi(i,"link",o),rn(i),e.head.appendChild(i))}function Ih(e){return'[src="'+pn(e)+'"]'}function nd(e){return"script[async]"+e}function t_(e,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var h=e.querySelector('style[data-href~="'+pn(o.href)+'"]');if(h)return i.instance=h,rn(h),h;var p=V({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return h=(e.ownerDocument||e).createElement("style"),rn(h),Gi(h,"style",p),Vm(h,o.precedence,e),i.instance=h;case"stylesheet":p=Uh(o.href);var E=e.querySelector(ed(p));if(E)return i.state.loading|=4,i.instance=E,rn(E),E;h=$y(o),(p=jr.get(p))&&Ep(h,p),E=(e.ownerDocument||e).createElement("link"),rn(E);var B=E;return B._p=new Promise(function(Z,tt){B.onload=Z,B.onerror=tt}),Gi(E,"link",h),i.state.loading|=4,Vm(E,o.precedence,e),i.instance=E;case"script":return E=Ih(o.src),(p=e.querySelector(nd(E)))?(i.instance=p,rn(p),p):(h=o,(p=jr.get(E))&&(h=V({},o),Sp(h,p)),e=e.ownerDocument||e,p=e.createElement("script"),rn(p),Gi(p,"link",h),e.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&!(i.state.loading&4)&&(h=i.instance,i.state.loading|=4,Vm(h,o.precedence,e));return i.instance}function Vm(e,i,o){for(var h=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,E=p,B=0;B<h.length;B++){var Z=h[B];if(Z.dataset.precedence===i)E=Z;else if(E!==p)break}E?E.parentNode.insertBefore(e,E.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(e,i.firstChild))}function Ep(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Sp(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Um=null;function e_(e,i,o){if(Um===null){var h=new Map,p=Um=new Map;p.set(o,h)}else p=Um,h=p.get(o),h||(h=new Map,p.set(o,h));if(h.has(e))return h;for(h.set(e,null),o=o.getElementsByTagName(e),p=0;p<o.length;p++){var E=o[p];if(!(E[Ar]||E[Rn]||e==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var B=E.getAttribute(i)||"";B=e+B;var Z=h.get(B);Z?Z.push(E):h.set(B,[E])}}return h}function n_(e,i,o){e=e.ownerDocument||e,e.head.insertBefore(o,i==="title"?e.querySelector("head > title"):null)}function y5(e,i,o){if(o===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function i_(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var id=null;function _5(){}function v5(e,i,o){if(id===null)throw Error(s(475));var h=id;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&!(i.state.loading&4)){if(i.instance===null){var p=Uh(o.href),E=e.querySelector(ed(p));if(E){e=E._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(h.count++,h=Im.bind(h),e.then(h,h)),i.state.loading|=4,i.instance=E,rn(E);return}E=e.ownerDocument||e,o=$y(o),(p=jr.get(p))&&Ep(o,p),E=E.createElement("link"),rn(E);var B=E;B._p=new Promise(function(Z,tt){B.onload=Z,B.onerror=tt}),Gi(E,"link",o),i.instance=E}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(i,e),(e=i.state.preload)&&!(i.state.loading&3)&&(h.count++,i=Im.bind(h),e.addEventListener("load",i),e.addEventListener("error",i))}}function E5(){if(id===null)throw Error(s(475));var e=id;return e.stylesheets&&e.count===0&&Tp(e,e.stylesheets),0<e.count?function(i){var o=setTimeout(function(){if(e.stylesheets&&Tp(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o)}}:null}function Im(){if(this.count--,this.count===0){if(this.stylesheets)Tp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Lm=null;function Tp(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Lm=new Map,i.forEach(S5,e),Lm=null,Im.call(e))}function S5(e,i){if(!(i.state.loading&4)){var o=Lm.get(e);if(o)var h=o.get(null);else{o=new Map,Lm.set(e,o);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<p.length;E++){var B=p[E];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(o.set(B.dataset.precedence,B),h=B)}h&&o.set(null,h)}p=i.instance,B=p.getAttribute("data-precedence"),E=o.get(B)||h,E===h&&o.set(null,p),o.set(B,p),this.count++,h=Im.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),E?E.parentNode.insertBefore(p,E.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),i.state.loading|=4}}var ad={$$typeof:C,Provider:null,Consumer:null,_currentValue:Rt,_currentValue2:Rt,_threadCount:0};function T5(e,i,o,h,p,E,B,Z){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ll(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.hiddenUpdates=Ll(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=E,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function a_(e,i,o,h,p,E,B,Z,tt,lt,bt,Mt){return e=new T5(e,i,o,B,Z,tt,lt,Mt),i=1,E===!0&&(i|=24),E=Un(3,null,null,i),e.current=E,E.stateNode=e,i=Tf(),i.refCount++,e.pooledCache=i,i.refCount++,E.memoizedState={element:h,isDehydrated:o,cache:i},Ii(E),e}function r_(e){return e?(e=$s,e):$s}function s_(e,i,o,h,p,E){p=r_(p),h.context===null?h.context=p:h.pendingContext=p,h=Da(i),h.payload={element:o},E=E===void 0?null:E,E!==null&&(h.callback=E),o=Na(e,h,i),o!==null&&(Fn(o,e,i),yl(o,e,i))}function l_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<i?o:i}}function bp(e,i){l_(e,i),(e=e.alternate)&&l_(e,i)}function o_(e){if(e.tag===13){var i=cs(e,67108864);i!==null&&Fn(i,e,67108864),bp(e,67108864)}}var Pm=!0;function b5(e,i,o,h){var p=w.T;w.T=null;var E=gt.p;try{gt.p=2,Ap(e,i,o,h)}finally{gt.p=E,w.T=p}}function A5(e,i,o,h){var p=w.T;w.T=null;var E=gt.p;try{gt.p=8,Ap(e,i,o,h)}finally{gt.p=E,w.T=p}}function Ap(e,i,o,h){if(Pm){var p=Rp(h);if(p===null)fp(e,i,h,zm,o),c_(e,h);else if(C5(p,e,i,o,h))h.stopPropagation();else if(c_(e,h),i&4&&-1<R5.indexOf(e)){for(;p!==null;){var E=Tn(p);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var B=Ki(E.pendingLanes);if(B!==0){var Z=E;for(Z.pendingLanes|=2,Z.entangledLanes|=2;B;){var tt=1<<31-Zn(B);Z.entanglements[1]|=tt,B&=~tt}tn(E),!(ne&6)&&(ye=nn()+500,Se(0))}}break;case 13:Z=cs(E,2),Z!==null&&Fn(Z,E,2),go(),bp(E,2)}if(E=Rp(h),E===null&&fp(e,i,h,zm,o),E===p)break;p=E}p!==null&&h.stopPropagation()}else fp(e,i,h,null,o)}}function Rp(e){return e=Hs(e),Cp(e)}var zm=null;function Cp(e){if(zm=null,e=va(e),e!==null){var i=at(e);if(i===null)e=null;else{var o=i.tag;if(o===13){if(e=dt(i),e!==null)return e;e=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return zm=e,null}function u_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oi()){case Ce:return 2;case He:return 8;case Xn:case ga:return 32;case ji:return 268435456;default:return 32}default:return 32}}var wp=!1,gu=null,mu=null,pu=null,rd=new Map,sd=new Map,yu=[],R5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c_(e,i){switch(e){case"focusin":case"focusout":gu=null;break;case"dragenter":case"dragleave":mu=null;break;case"mouseover":case"mouseout":pu=null;break;case"pointerover":case"pointerout":rd.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":sd.delete(i.pointerId)}}function ld(e,i,o,h,p,E){return e===null||e.nativeEvent!==E?(e={blockedOn:i,domEventName:o,eventSystemFlags:h,nativeEvent:E,targetContainers:[p]},i!==null&&(i=Tn(i),i!==null&&o_(i)),e):(e.eventSystemFlags|=h,i=e.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),e)}function C5(e,i,o,h,p){switch(i){case"focusin":return gu=ld(gu,e,i,o,h,p),!0;case"dragenter":return mu=ld(mu,e,i,o,h,p),!0;case"mouseover":return pu=ld(pu,e,i,o,h,p),!0;case"pointerover":var E=p.pointerId;return rd.set(E,ld(rd.get(E)||null,e,i,o,h,p)),!0;case"gotpointercapture":return E=p.pointerId,sd.set(E,ld(sd.get(E)||null,e,i,o,h,p)),!0}return!1}function h_(e){var i=va(e.target);if(i!==null){var o=at(i);if(o!==null){if(i=o.tag,i===13){if(i=dt(o),i!==null){e.blockedOn=i,Mi(e.priority,function(){if(o.tag===13){var h=Bi(),p=cs(o,h);p!==null&&Fn(p,o,h),bp(o,h)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bm(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var o=Rp(e.nativeEvent);if(o===null){o=e.nativeEvent;var h=new o.constructor(o.type,o);Ta=h,o.target.dispatchEvent(h),Ta=null}else return i=Tn(o),i!==null&&o_(i),e.blockedOn=o,!1;i.shift()}return!0}function f_(e,i,o){Bm(e)&&o.delete(i)}function w5(){wp=!1,gu!==null&&Bm(gu)&&(gu=null),mu!==null&&Bm(mu)&&(mu=null),pu!==null&&Bm(pu)&&(pu=null),rd.forEach(f_),sd.forEach(f_)}function Gm(e,i){e.blockedOn===i&&(e.blockedOn=null,wp||(wp=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,w5)))}var km=null;function d_(e){km!==e&&(km=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){km===e&&(km=null);for(var i=0;i<e.length;i+=3){var o=e[i],h=e[i+1],p=e[i+2];if(typeof h!="function"){if(Cp(h||o)===null)continue;break}var E=Tn(o);E!==null&&(e.splice(i,3),i-=3,Mf(E,{pending:!0,data:p,method:o.method,action:h},h,p))}}))}function od(e){function i(tt){return Gm(tt,e)}gu!==null&&Gm(gu,e),mu!==null&&Gm(mu,e),pu!==null&&Gm(pu,e),rd.forEach(i),sd.forEach(i);for(var o=0;o<yu.length;o++){var h=yu[o];h.blockedOn===e&&(h.blockedOn=null)}for(;0<yu.length&&(o=yu[0],o.blockedOn===null);)h_(o),o.blockedOn===null&&yu.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(h=0;h<o.length;h+=3){var p=o[h],E=o[h+1],B=p[ue]||null;if(typeof E=="function")B||d_(o);else if(B){var Z=null;if(E&&E.hasAttribute("formAction")){if(p=E,B=E[ue]||null)Z=B.formAction;else if(Cp(p)!==null)continue}else Z=B.action;typeof Z=="function"?o[h+1]=Z:(o.splice(h,3),h-=3),d_(o)}}}function Dp(e){this._internalRoot=e}Hm.prototype.render=Dp.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,h=Bi();s_(o,h,e,i,null,null)},Hm.prototype.unmount=Dp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;e.tag===0&&Ut(),s_(e.current,2,null,e,null,null),go(),i[ir]=null}};function Hm(e){this._internalRoot=e}Hm.prototype.unstable_scheduleHydration=function(e){if(e){var i=ju();e={blockedOn:null,target:e,priority:i};for(var o=0;o<yu.length&&i!==0&&i<yu[o].priority;o++);yu.splice(o,0,e),o===0&&h_(e)}};var g_=t.version;if(g_!=="19.0.0")throw Error(s(527,g_,"19.0.0"));gt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=it(i),e=e!==null?Et(e):null,e=e===null?null:e.stateNode,e};var D5={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:w,findFiberByHostInstance:va,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qm.isDisabled&&qm.supportsFiber)try{an=qm.inject(D5),Ae=qm}catch{}}return cd.createRoot=function(e,i){if(!u(e))throw Error(s(299));var o=!1,h="",p=pm,E=ym,B=_m,Z=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(E=i.onCaughtError),i.onRecoverableError!==void 0&&(B=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(Z=i.unstable_transitionCallbacks)),i=a_(e,1,!1,null,null,o,h,p,E,B,Z,null),e[ir]=i.current,hp(e.nodeType===8?e.parentNode:e),new Dp(i)},cd.hydrateRoot=function(e,i,o){if(!u(e))throw Error(s(299));var h=!1,p="",E=pm,B=ym,Z=_m,tt=null,lt=null;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(E=o.onUncaughtError),o.onCaughtError!==void 0&&(B=o.onCaughtError),o.onRecoverableError!==void 0&&(Z=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(tt=o.unstable_transitionCallbacks),o.formState!==void 0&&(lt=o.formState)),i=a_(e,1,!0,i,o??null,h,p,E,B,Z,tt,lt),i.context=r_(null),o=i.current,h=Bi(),p=Da(h),p.callback=null,Na(o,p,h),i.current.lanes=h,Sn(i,h),tn(i),e[ir]=i.current,hp(e),new Hm(i)},cd.version="19.0.0",cd}var R_;function P5(){if(R_)return Mp.exports;R_=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Mp.exports=L5(),Mp.exports}var z5=P5(),Jm={exports:{}},hd={},Ip={},Lp={},C_;function _e(){return C_||(C_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a._registerNode=a.Konva=a.glob=void 0;const t=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}a.glob=typeof m_<"u"?m_:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},a.Konva={_global:a.glob,version:"9.3.18",isBrowser:n(),isUnminified:/param/.test((function(u){}).toString()),dblClickWindow:400,getAngle(u){return a.Konva.angleDeg?u*t:u},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return a.Konva.DD.isDragging},isTransforming(){var u;return(u=a.Konva.Transformer)===null||u===void 0?void 0:u.isTransforming()},isDragReady(){return!!a.Konva.DD.node},releaseCanvasOnDestroy:!0,document:a.glob.document,_injectGlobal(u){a.glob.Konva=u}};const s=u=>{a.Konva[u.prototype.getClassName()]=u};a._registerNode=s,a.Konva._injectGlobal(a.Konva)}(Lp)),Lp}var Pp={},w_;function Yn(){return w_||(w_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.Transform=void 0;const t=_e();class n{constructor(L=[1,0,0,1,0,0]){this.dirty=!1,this.m=L&&L.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(L){L.m[0]=this.m[0],L.m[1]=this.m[1],L.m[2]=this.m[2],L.m[3]=this.m[3],L.m[4]=this.m[4],L.m[5]=this.m[5]}point(L){const H=this.m;return{x:H[0]*L.x+H[2]*L.y+H[4],y:H[1]*L.x+H[3]*L.y+H[5]}}translate(L,H){return this.m[4]+=this.m[0]*L+this.m[2]*H,this.m[5]+=this.m[1]*L+this.m[3]*H,this}scale(L,H){return this.m[0]*=L,this.m[1]*=L,this.m[2]*=H,this.m[3]*=H,this}rotate(L){const H=Math.cos(L),j=Math.sin(L),q=this.m[0]*H+this.m[2]*j,x=this.m[1]*H+this.m[3]*j,w=this.m[0]*-j+this.m[2]*H,V=this.m[1]*-j+this.m[3]*H;return this.m[0]=q,this.m[1]=x,this.m[2]=w,this.m[3]=V,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(L,H){const j=this.m[0]+this.m[2]*H,q=this.m[1]+this.m[3]*H,x=this.m[2]+this.m[0]*L,w=this.m[3]+this.m[1]*L;return this.m[0]=j,this.m[1]=q,this.m[2]=x,this.m[3]=w,this}multiply(L){const H=this.m[0]*L.m[0]+this.m[2]*L.m[1],j=this.m[1]*L.m[0]+this.m[3]*L.m[1],q=this.m[0]*L.m[2]+this.m[2]*L.m[3],x=this.m[1]*L.m[2]+this.m[3]*L.m[3],w=this.m[0]*L.m[4]+this.m[2]*L.m[5]+this.m[4],V=this.m[1]*L.m[4]+this.m[3]*L.m[5]+this.m[5];return this.m[0]=H,this.m[1]=j,this.m[2]=q,this.m[3]=x,this.m[4]=w,this.m[5]=V,this}invert(){const L=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),H=this.m[3]*L,j=-this.m[1]*L,q=-this.m[2]*L,x=this.m[0]*L,w=L*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),V=L*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=H,this.m[1]=j,this.m[2]=q,this.m[3]=x,this.m[4]=w,this.m[5]=V,this}getMatrix(){return this.m}decompose(){const L=this.m[0],H=this.m[1],j=this.m[2],q=this.m[3],x=this.m[4],w=this.m[5],V=L*q-H*j,G={x,y:w,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(L!=0||H!=0){const Y=Math.sqrt(L*L+H*H);G.rotation=H>0?Math.acos(L/Y):-Math.acos(L/Y),G.scaleX=Y,G.scaleY=V/Y,G.skewX=(L*j+H*q)/V,G.skewY=0}else if(j!=0||q!=0){const Y=Math.sqrt(j*j+q*q);G.rotation=Math.PI/2-(q>0?Math.acos(-j/Y):-Math.acos(j/Y)),G.scaleX=V/Y,G.scaleY=Y,G.skewX=0,G.skewY=(L*j+H*q)/V}return G.rotation=a.Util._getRotation(G.rotation),G}}a.Transform=n;const s="[object Array]",u="[object Number]",c="[object String]",d="[object Boolean]",m=Math.PI/180,_=180/Math.PI,v="#",b="",R="0",U="Konva warning: ",C="Konva error: ",O="rgb(",I={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},z=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let F=[];const M=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(D){setTimeout(D,60)};a.Util={_isElement(D){return!!(D&&D.nodeType==1)},_isFunction(D){return!!(D&&D.constructor&&D.call&&D.apply)},_isPlainObject(D){return!!D&&D.constructor===Object},_isArray(D){return Object.prototype.toString.call(D)===s},_isNumber(D){return Object.prototype.toString.call(D)===u&&!isNaN(D)&&isFinite(D)},_isString(D){return Object.prototype.toString.call(D)===c},_isBoolean(D){return Object.prototype.toString.call(D)===d},isObject(D){return D instanceof Object},isValidSelector(D){if(typeof D!="string")return!1;const L=D[0];return L==="#"||L==="."||L===L.toUpperCase()},_sign(D){return D===0||D>0?1:-1},requestAnimFrame(D){F.push(D),F.length===1&&M(function(){const L=F;F=[],L.forEach(function(H){H()})})},createCanvasElement(){const D=document.createElement("canvas");try{D.style=D.style||{}}catch{}return D},createImageElement(){return document.createElement("img")},_isInDocument(D){for(;D=D.parentNode;)if(D==document)return!0;return!1},_urlToImage(D,L){const H=a.Util.createImageElement();H.onload=function(){L(H)},H.src=D},_rgbToHex(D,L,H){return((1<<24)+(D<<16)+(L<<8)+H).toString(16).slice(1)},_hexToRgb(D){D=D.replace(v,b);const L=parseInt(D,16);return{r:L>>16&255,g:L>>8&255,b:L&255}},getRandomColor(){let D=(Math.random()*16777215<<0).toString(16);for(;D.length<6;)D=R+D;return v+D},getRGB(D){let L;return D in I?(L=I[D],{r:L[0],g:L[1],b:L[2]}):D[0]===v?this._hexToRgb(D.substring(1)):D.substr(0,4)===O?(L=z.exec(D.replace(/ /g,"")),{r:parseInt(L[1],10),g:parseInt(L[2],10),b:parseInt(L[3],10)}):{r:0,g:0,b:0}},colorToRGBA(D){return D=D||"black",a.Util._namedColorToRBA(D)||a.Util._hex3ColorToRGBA(D)||a.Util._hex4ColorToRGBA(D)||a.Util._hex6ColorToRGBA(D)||a.Util._hex8ColorToRGBA(D)||a.Util._rgbColorToRGBA(D)||a.Util._rgbaColorToRGBA(D)||a.Util._hslColorToRGBA(D)},_namedColorToRBA(D){const L=I[D.toLowerCase()];return L?{r:L[0],g:L[1],b:L[2],a:1}:null},_rgbColorToRGBA(D){if(D.indexOf("rgb(")===0){D=D.match(/rgb\(([^)]+)\)/)[1];const L=D.split(/ *, */).map(Number);return{r:L[0],g:L[1],b:L[2],a:1}}},_rgbaColorToRGBA(D){if(D.indexOf("rgba(")===0){D=D.match(/rgba\(([^)]+)\)/)[1];const L=D.split(/ *, */).map((H,j)=>H.slice(-1)==="%"?j===3?parseInt(H)/100:parseInt(H)/100*255:Number(H));return{r:L[0],g:L[1],b:L[2],a:L[3]}}},_hex8ColorToRGBA(D){if(D[0]==="#"&&D.length===9)return{r:parseInt(D.slice(1,3),16),g:parseInt(D.slice(3,5),16),b:parseInt(D.slice(5,7),16),a:parseInt(D.slice(7,9),16)/255}},_hex6ColorToRGBA(D){if(D[0]==="#"&&D.length===7)return{r:parseInt(D.slice(1,3),16),g:parseInt(D.slice(3,5),16),b:parseInt(D.slice(5,7),16),a:1}},_hex4ColorToRGBA(D){if(D[0]==="#"&&D.length===5)return{r:parseInt(D[1]+D[1],16),g:parseInt(D[2]+D[2],16),b:parseInt(D[3]+D[3],16),a:parseInt(D[4]+D[4],16)/255}},_hex3ColorToRGBA(D){if(D[0]==="#"&&D.length===4)return{r:parseInt(D[1]+D[1],16),g:parseInt(D[2]+D[2],16),b:parseInt(D[3]+D[3],16),a:1}},_hslColorToRGBA(D){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(D)){const[L,...H]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(D),j=Number(H[0])/360,q=Number(H[1])/100,x=Number(H[2])/100;let w,V,G;if(q===0)return G=x*255,{r:Math.round(G),g:Math.round(G),b:Math.round(G),a:1};x<.5?w=x*(1+q):w=x+q-x*q;const Y=2*x-w,T=[0,0,0];for(let K=0;K<3;K++)V=j+1/3*-(K-1),V<0&&V++,V>1&&V--,6*V<1?G=Y+(w-Y)*6*V:2*V<1?G=w:3*V<2?G=Y+(w-Y)*(2/3-V)*6:G=Y,T[K]=G*255;return{r:Math.round(T[0]),g:Math.round(T[1]),b:Math.round(T[2]),a:1}}},haveIntersection(D,L){return!(L.x>D.x+D.width||L.x+L.width<D.x||L.y>D.y+D.height||L.y+L.height<D.y)},cloneObject(D){const L={};for(const H in D)this._isPlainObject(D[H])?L[H]=this.cloneObject(D[H]):this._isArray(D[H])?L[H]=this.cloneArray(D[H]):L[H]=D[H];return L},cloneArray(D){return D.slice(0)},degToRad(D){return D*m},radToDeg(D){return D*_},_degToRad(D){return a.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),a.Util.degToRad(D)},_radToDeg(D){return a.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),a.Util.radToDeg(D)},_getRotation(D){return t.Konva.angleDeg?a.Util.radToDeg(D):D},_capitalize(D){return D.charAt(0).toUpperCase()+D.slice(1)},throw(D){throw new Error(C+D)},error(D){console.error(C+D)},warn(D){t.Konva.showWarnings&&console.warn(U+D)},each(D,L){for(const H in D)L(H,D[H])},_inRange(D,L,H){return L<=D&&D<H},_getProjectionToSegment(D,L,H,j,q,x){let w,V,G;const Y=(D-H)*(D-H)+(L-j)*(L-j);if(Y==0)w=D,V=L,G=(q-H)*(q-H)+(x-j)*(x-j);else{const T=((q-D)*(H-D)+(x-L)*(j-L))/Y;T<0?(w=D,V=L,G=(D-q)*(D-q)+(L-x)*(L-x)):T>1?(w=H,V=j,G=(H-q)*(H-q)+(j-x)*(j-x)):(w=D+T*(H-D),V=L+T*(j-L),G=(w-q)*(w-q)+(V-x)*(V-x))}return[w,V,G]},_getProjectionToLine(D,L,H){const j=a.Util.cloneObject(D);let q=Number.MAX_VALUE;return L.forEach(function(x,w){if(!H&&w===L.length-1)return;const V=L[(w+1)%L.length],G=a.Util._getProjectionToSegment(x.x,x.y,V.x,V.y,D.x,D.y),Y=G[0],T=G[1],K=G[2];K<q&&(j.x=Y,j.y=T,q=K)}),j},_prepareArrayForTween(D,L,H){const j=[],q=[];if(D.length>L.length){const w=L;L=D,D=w}for(let w=0;w<D.length;w+=2)j.push({x:D[w],y:D[w+1]});for(let w=0;w<L.length;w+=2)q.push({x:L[w],y:L[w+1]});const x=[];return q.forEach(function(w){const V=a.Util._getProjectionToLine(w,j,H);x.push(V.x),x.push(V.y)}),x},_prepareToStringify(D){let L;D.visitedByCircularReferenceRemoval=!0;for(const H in D)if(D.hasOwnProperty(H)&&D[H]&&typeof D[H]=="object"){if(L=Object.getOwnPropertyDescriptor(D,H),D[H].visitedByCircularReferenceRemoval||a.Util._isElement(D[H]))if(L.configurable)delete D[H];else return null;else if(a.Util._prepareToStringify(D[H])===null)if(L.configurable)delete D[H];else return null}return delete D.visitedByCircularReferenceRemoval,D},_assign(D,L){for(const H in L)D[H]=L[H];return D},_getFirstPointerId(D){return D.touches?D.changedTouches[0].identifier:D.pointerId||999},releaseCanvas(...D){t.Konva.releaseCanvasOnDestroy&&D.forEach(L=>{L.width=0,L.height=0})},drawRoundedRectPath(D,L,H,j){let q=0,x=0,w=0,V=0;typeof j=="number"?q=x=w=V=Math.min(j,L/2,H/2):(q=Math.min(j[0]||0,L/2,H/2),x=Math.min(j[1]||0,L/2,H/2),V=Math.min(j[2]||0,L/2,H/2),w=Math.min(j[3]||0,L/2,H/2)),D.moveTo(q,0),D.lineTo(L-x,0),D.arc(L-x,x,x,Math.PI*3/2,0,!1),D.lineTo(L,H-V),D.arc(L-V,H-V,V,0,Math.PI/2,!1),D.lineTo(w,H),D.arc(w,H-w,w,Math.PI/2,Math.PI,!1),D.lineTo(0,q),D.arc(q,q,q,Math.PI,Math.PI*3/2,!1)}}}(Pp)),Pp}var fd={},zp={},$a={},D_;function Re(){if(D_)return $a;D_=1,Object.defineProperty($a,"__esModule",{value:!0}),$a.RGBComponent=s,$a.alphaComponent=u,$a.getNumberValidator=c,$a.getNumberOrArrayOfNumbersValidator=d,$a.getNumberOrAutoValidator=m,$a.getStringValidator=_,$a.getStringOrGradientValidator=v,$a.getFunctionValidator=b,$a.getNumberArrayValidator=R,$a.getBooleanValidator=U,$a.getComponentValidator=C;const a=_e(),t=Yn();function n(O){return t.Util._isString(O)?'"'+O+'"':Object.prototype.toString.call(O)==="[object Number]"||t.Util._isBoolean(O)?O:Object.prototype.toString.call(O)}function s(O){return O>255?255:O<0?0:Math.round(O)}function u(O){return O>1?1:O<1e-4?1e-4:O}function c(){if(a.Konva.isUnminified)return function(O,I){return t.Util._isNumber(O)||t.Util.warn(n(O)+' is a not valid value for "'+I+'" attribute. The value should be a number.'),O}}function d(O){if(a.Konva.isUnminified)return function(I,z){let F=t.Util._isNumber(I),M=t.Util._isArray(I)&&I.length==O;return!F&&!M&&t.Util.warn(n(I)+' is a not valid value for "'+z+'" attribute. The value should be a number or Array<number>('+O+")"),I}}function m(){if(a.Konva.isUnminified)return function(O,I){var z=t.Util._isNumber(O),F=O==="auto";return z||F||t.Util.warn(n(O)+' is a not valid value for "'+I+'" attribute. The value should be a number or "auto".'),O}}function _(){if(a.Konva.isUnminified)return function(O,I){return t.Util._isString(O)||t.Util.warn(n(O)+' is a not valid value for "'+I+'" attribute. The value should be a string.'),O}}function v(){if(a.Konva.isUnminified)return function(O,I){const z=t.Util._isString(O),F=Object.prototype.toString.call(O)==="[object CanvasGradient]"||O&&O.addColorStop;return z||F||t.Util.warn(n(O)+' is a not valid value for "'+I+'" attribute. The value should be a string or a native gradient.'),O}}function b(){if(a.Konva.isUnminified)return function(O,I){return t.Util._isFunction(O)||t.Util.warn(n(O)+' is a not valid value for "'+I+'" attribute. The value should be a function.'),O}}function R(){if(a.Konva.isUnminified)return function(O,I){const z=Int8Array?Object.getPrototypeOf(Int8Array):null;return z&&O instanceof z||(t.Util._isArray(O)?O.forEach(function(F){t.Util._isNumber(F)||t.Util.warn('"'+I+'" attribute has non numeric element '+F+". Make sure that all elements are numbers.")}):t.Util.warn(n(O)+' is a not valid value for "'+I+'" attribute. The value should be a array of numbers.')),O}}function U(){if(a.Konva.isUnminified)return function(O,I){var z=O===!0||O===!1;return z||t.Util.warn(n(O)+' is a not valid value for "'+I+'" attribute. The value should be a boolean.'),O}}function C(O){if(a.Konva.isUnminified)return function(I,z){return I==null||t.Util.isObject(I)||t.Util.warn(n(I)+' is a not valid value for "'+z+'" attribute. The value should be an object with properties '+O),I}}return $a}var N_;function be(){return N_||(N_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Factory=void 0;const t=Yn(),n=Re(),s="get",u="set";a.Factory={addGetterSetter(c,d,m,_,v){a.Factory.addGetter(c,d,m),a.Factory.addSetter(c,d,_,v),a.Factory.addOverloadedGetterSetter(c,d)},addGetter(c,d,m){var _=s+t.Util._capitalize(d);c.prototype[_]=c.prototype[_]||function(){const v=this.attrs[d];return v===void 0?m:v}},addSetter(c,d,m,_){var v=u+t.Util._capitalize(d);c.prototype[v]||a.Factory.overWriteSetter(c,d,m,_)},overWriteSetter(c,d,m,_){var v=u+t.Util._capitalize(d);c.prototype[v]=function(b){return m&&b!==void 0&&b!==null&&(b=m.call(this,b,d)),this._setAttr(d,b),_&&_.call(this),this}},addComponentsGetterSetter(c,d,m,_,v){const b=m.length,R=t.Util._capitalize,U=s+R(d),C=u+R(d);c.prototype[U]=function(){const I={};for(let z=0;z<b;z++){const F=m[z];I[F]=this.getAttr(d+R(F))}return I};const O=(0,n.getComponentValidator)(m);c.prototype[C]=function(I){const z=this.attrs[d];_&&(I=_.call(this,I,d)),O&&O.call(this,I,d);for(const F in I)I.hasOwnProperty(F)&&this._setAttr(d+R(F),I[F]);return I||m.forEach(F=>{this._setAttr(d+R(F),void 0)}),this._fireChangeEvent(d,z,I),v&&v.call(this),this},a.Factory.addOverloadedGetterSetter(c,d)},addOverloadedGetterSetter(c,d){var m=t.Util._capitalize(d),_=u+m,v=s+m;c.prototype[d]=function(){return arguments.length?(this[_](arguments[0]),this):this[v]()}},addDeprecatedGetterSetter(c,d,m,_){t.Util.error("Adding deprecated "+d);const v=s+t.Util._capitalize(d),b=d+" property is deprecated and will be removed soon. Look at Konva change log for more information.";c.prototype[v]=function(){t.Util.error(b);const R=this.attrs[d];return R===void 0?m:R},a.Factory.addSetter(c,d,_,function(){t.Util.error(b)}),a.Factory.addOverloadedGetterSetter(c,d)},backCompat(c,d){t.Util.each(d,function(m,_){const v=c.prototype[_],b=s+t.Util._capitalize(m),R=u+t.Util._capitalize(m);function U(){v.apply(this,arguments),t.Util.error('"'+m+'" method is deprecated and will be removed soon. Use ""'+_+'" instead.')}c.prototype[m]=U,c.prototype[b]=U,c.prototype[R]=U})},afterSetFilter(){this._filterUpToDate=!1}}}(zp)),zp}var _o={},vo={},O_;function y4(){if(O_)return vo;O_=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.HitContext=vo.SceneContext=vo.Context=void 0;const a=Yn(),t=_e();function n(F){const M=[],D=F.length,L=a.Util;for(let H=0;H<D;H++){let j=F[H];L._isNumber(j)?j=Math.round(j*1e3)/1e3:L._isString(j)||(j=j+""),M.push(j)}return M}const s=",",u="(",c=")",d="([",m="])",_=";",v="()",b="=",R=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],U=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],C=100;let O=class{constructor(M){this.canvas=M,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(M){M.fillEnabled()&&this._fill(M)}_fill(M){}strokeShape(M){M.hasStroke()&&this._stroke(M)}_stroke(M){}fillStrokeShape(M){M.attrs.fillAfterStrokeEnabled?(this.strokeShape(M),this.fillShape(M)):(this.fillShape(M),this.strokeShape(M))}getTrace(M,D){let L=this.traceArr,H=L.length,j="",q,x,w,V;for(q=0;q<H;q++)x=L[q],w=x.method,w?(V=x.args,j+=w,M?j+=v:a.Util._isArray(V[0])?j+=d+V.join(s)+m:(D&&(V=V.map(G=>typeof G=="number"?Math.floor(G):G)),j+=u+V.join(s)+c)):(j+=x.property,M||(j+=b+x.val)),j+=_;return j}clearTrace(){this.traceArr=[]}_trace(M){let D=this.traceArr,L;D.push(M),L=D.length,L>=C&&D.shift()}reset(){const M=this.getCanvas().getPixelRatio();this.setTransform(1*M,0,0,1*M,0,0)}getCanvas(){return this.canvas}clear(M){const D=this.getCanvas();M?this.clearRect(M.x||0,M.y||0,M.width||0,M.height||0):this.clearRect(0,0,D.getWidth()/D.pixelRatio,D.getHeight()/D.pixelRatio)}_applyLineCap(M){const D=M.attrs.lineCap;D&&this.setAttr("lineCap",D)}_applyOpacity(M){const D=M.getAbsoluteOpacity();D!==1&&this.setAttr("globalAlpha",D)}_applyLineJoin(M){const D=M.attrs.lineJoin;D&&this.setAttr("lineJoin",D)}setAttr(M,D){this._context[M]=D}arc(M,D,L,H,j,q){this._context.arc(M,D,L,H,j,q)}arcTo(M,D,L,H,j){this._context.arcTo(M,D,L,H,j)}beginPath(){this._context.beginPath()}bezierCurveTo(M,D,L,H,j,q){this._context.bezierCurveTo(M,D,L,H,j,q)}clearRect(M,D,L,H){this._context.clearRect(M,D,L,H)}clip(...M){this._context.clip.apply(this._context,M)}closePath(){this._context.closePath()}createImageData(M,D){const L=arguments;if(L.length===2)return this._context.createImageData(M,D);if(L.length===1)return this._context.createImageData(M)}createLinearGradient(M,D,L,H){return this._context.createLinearGradient(M,D,L,H)}createPattern(M,D){return this._context.createPattern(M,D)}createRadialGradient(M,D,L,H,j,q){return this._context.createRadialGradient(M,D,L,H,j,q)}drawImage(M,D,L,H,j,q,x,w,V){const G=arguments,Y=this._context;G.length===3?Y.drawImage(M,D,L):G.length===5?Y.drawImage(M,D,L,H,j):G.length===9&&Y.drawImage(M,D,L,H,j,q,x,w,V)}ellipse(M,D,L,H,j,q,x,w){this._context.ellipse(M,D,L,H,j,q,x,w)}isPointInPath(M,D,L,H){return L?this._context.isPointInPath(L,M,D,H):this._context.isPointInPath(M,D,H)}fill(...M){this._context.fill.apply(this._context,M)}fillRect(M,D,L,H){this._context.fillRect(M,D,L,H)}strokeRect(M,D,L,H){this._context.strokeRect(M,D,L,H)}fillText(M,D,L,H){H?this._context.fillText(M,D,L,H):this._context.fillText(M,D,L)}measureText(M){return this._context.measureText(M)}getImageData(M,D,L,H){return this._context.getImageData(M,D,L,H)}lineTo(M,D){this._context.lineTo(M,D)}moveTo(M,D){this._context.moveTo(M,D)}rect(M,D,L,H){this._context.rect(M,D,L,H)}roundRect(M,D,L,H,j){this._context.roundRect(M,D,L,H,j)}putImageData(M,D,L){this._context.putImageData(M,D,L)}quadraticCurveTo(M,D,L,H){this._context.quadraticCurveTo(M,D,L,H)}restore(){this._context.restore()}rotate(M){this._context.rotate(M)}save(){this._context.save()}scale(M,D){this._context.scale(M,D)}setLineDash(M){this._context.setLineDash?this._context.setLineDash(M):"mozDash"in this._context?this._context.mozDash=M:"webkitLineDash"in this._context&&(this._context.webkitLineDash=M)}getLineDash(){return this._context.getLineDash()}setTransform(M,D,L,H,j,q){this._context.setTransform(M,D,L,H,j,q)}stroke(M){M?this._context.stroke(M):this._context.stroke()}strokeText(M,D,L,H){this._context.strokeText(M,D,L,H)}transform(M,D,L,H,j,q){this._context.transform(M,D,L,H,j,q)}translate(M,D){this._context.translate(M,D)}_enableTrace(){let M=this,D=R.length,L=this.setAttr,H,j;const q=function(x){let w=M[x],V;M[x]=function(){return j=n(Array.prototype.slice.call(arguments,0)),V=w.apply(M,arguments),M._trace({method:x,args:j}),V}};for(H=0;H<D;H++)q(R[H]);M.setAttr=function(){L.apply(M,arguments);const x=arguments[0];let w=arguments[1];(x==="shadowOffsetX"||x==="shadowOffsetY"||x==="shadowBlur")&&(w=w/this.canvas.getPixelRatio()),M._trace({property:x,val:w})}}_applyGlobalCompositeOperation(M){const D=M.attrs.globalCompositeOperation;!D||D==="source-over"||this.setAttr("globalCompositeOperation",D)}};vo.Context=O,U.forEach(function(F){Object.defineProperty(O.prototype,F,{get(){return this._context[F]},set(M){this._context[F]=M}})});class I extends O{constructor(M,{willReadFrequently:D=!1}={}){super(M),this._context=M._canvas.getContext("2d",{willReadFrequently:D})}_fillColor(M){const D=M.fill();this.setAttr("fillStyle",D),M._fillFunc(this)}_fillPattern(M){this.setAttr("fillStyle",M._getFillPattern()),M._fillFunc(this)}_fillLinearGradient(M){const D=M._getLinearGradient();D&&(this.setAttr("fillStyle",D),M._fillFunc(this))}_fillRadialGradient(M){const D=M._getRadialGradient();D&&(this.setAttr("fillStyle",D),M._fillFunc(this))}_fill(M){const D=M.fill(),L=M.getFillPriority();if(D&&L==="color"){this._fillColor(M);return}const H=M.getFillPatternImage();if(H&&L==="pattern"){this._fillPattern(M);return}const j=M.getFillLinearGradientColorStops();if(j&&L==="linear-gradient"){this._fillLinearGradient(M);return}const q=M.getFillRadialGradientColorStops();if(q&&L==="radial-gradient"){this._fillRadialGradient(M);return}D?this._fillColor(M):H?this._fillPattern(M):j?this._fillLinearGradient(M):q&&this._fillRadialGradient(M)}_strokeLinearGradient(M){const D=M.getStrokeLinearGradientStartPoint(),L=M.getStrokeLinearGradientEndPoint(),H=M.getStrokeLinearGradientColorStops(),j=this.createLinearGradient(D.x,D.y,L.x,L.y);if(H){for(let q=0;q<H.length;q+=2)j.addColorStop(H[q],H[q+1]);this.setAttr("strokeStyle",j)}}_stroke(M){const D=M.dash(),L=M.getStrokeScaleEnabled();if(M.hasStroke()){if(!L){this.save();const j=this.getCanvas().getPixelRatio();this.setTransform(j,0,0,j,0,0)}this._applyLineCap(M),D&&M.dashEnabled()&&(this.setLineDash(D),this.setAttr("lineDashOffset",M.dashOffset())),this.setAttr("lineWidth",M.strokeWidth()),M.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),M.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(M):this.setAttr("strokeStyle",M.stroke()),M._strokeFunc(this),L||this.restore()}}_applyShadow(M){var D,L,H;const j=(D=M.getShadowRGBA())!==null&&D!==void 0?D:"black",q=(L=M.getShadowBlur())!==null&&L!==void 0?L:5,x=(H=M.getShadowOffset())!==null&&H!==void 0?H:{x:0,y:0},w=M.getAbsoluteScale(),V=this.canvas.getPixelRatio(),G=w.x*V,Y=w.y*V;this.setAttr("shadowColor",j),this.setAttr("shadowBlur",q*Math.min(Math.abs(G),Math.abs(Y))),this.setAttr("shadowOffsetX",x.x*G),this.setAttr("shadowOffsetY",x.y*Y)}}vo.SceneContext=I;class z extends O{constructor(M){super(M),this._context=M._canvas.getContext("2d",{willReadFrequently:!0})}_fill(M){this.save(),this.setAttr("fillStyle",M.colorKey),M._fillFuncHit(this),this.restore()}strokeShape(M){M.hasHitStroke()&&this._stroke(M)}_stroke(M){if(M.hasHitStroke()){const D=M.getStrokeScaleEnabled();if(!D){this.save();const j=this.getCanvas().getPixelRatio();this.setTransform(j,0,0,j,0,0)}this._applyLineCap(M);const L=M.hitStrokeWidth(),H=L==="auto"?M.strokeWidth():L;this.setAttr("lineWidth",H),this.setAttr("strokeStyle",M.colorKey),M._strokeFuncHit(this),D||this.restore()}}}return vo.HitContext=z,vo}var M_;function D0(){if(M_)return _o;M_=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.HitCanvas=_o.SceneCanvas=_o.Canvas=void 0;const a=Yn(),t=y4(),n=_e(),s=be(),u=Re();let c;function d(){if(c)return c;const b=a.Util.createCanvasElement(),R=b.getContext("2d");return c=function(){const U=n.Konva._global.devicePixelRatio||1,C=R.webkitBackingStorePixelRatio||R.mozBackingStorePixelRatio||R.msBackingStorePixelRatio||R.oBackingStorePixelRatio||R.backingStorePixelRatio||1;return U/C}(),a.Util.releaseCanvas(b),c}let m=class{constructor(R){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const C=(R||{}).pixelRatio||n.Konva.pixelRatio||d();this.pixelRatio=C,this._canvas=a.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(R){const U=this.pixelRatio;this.pixelRatio=R,this.setSize(this.getWidth()/U,this.getHeight()/U)}setWidth(R){this.width=this._canvas.width=R*this.pixelRatio,this._canvas.style.width=R+"px";const U=this.pixelRatio;this.getContext()._context.scale(U,U)}setHeight(R){this.height=this._canvas.height=R*this.pixelRatio,this._canvas.style.height=R+"px";const U=this.pixelRatio;this.getContext()._context.scale(U,U)}getWidth(){return this.width}getHeight(){return this.height}setSize(R,U){this.setWidth(R||0),this.setHeight(U||0)}toDataURL(R,U){try{return this._canvas.toDataURL(R,U)}catch{try{return this._canvas.toDataURL()}catch(O){return a.Util.error("Unable to get data URL. "+O.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};_o.Canvas=m,s.Factory.addGetterSetter(m,"pixelRatio",void 0,(0,u.getNumberValidator)());class _ extends m{constructor(R={width:0,height:0,willReadFrequently:!1}){super(R),this.context=new t.SceneContext(this,{willReadFrequently:R.willReadFrequently}),this.setSize(R.width,R.height)}}_o.SceneCanvas=_;class v extends m{constructor(R={width:0,height:0}){super(R),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(R.width,R.height)}}return _o.HitCanvas=v,_o}var Bp={},x_;function U1(){return x_||(x_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.DD=void 0;const t=_e(),n=Yn();a.DD={get isDragging(){let s=!1;return a.DD._dragElements.forEach(u=>{u.dragStatus==="dragging"&&(s=!0)}),s},justDragged:!1,get node(){let s;return a.DD._dragElements.forEach(u=>{s=u.node}),s},_dragElements:new Map,_drag(s){const u=[];a.DD._dragElements.forEach((c,d)=>{const{node:m}=c,_=m.getStage();_.setPointersPositions(s),c.pointerId===void 0&&(c.pointerId=n.Util._getFirstPointerId(s));const v=_._changedPointerPositions.find(b=>b.id===c.pointerId);if(v){if(c.dragStatus!=="dragging"){const b=m.dragDistance();if(Math.max(Math.abs(v.x-c.startPointerPos.x),Math.abs(v.y-c.startPointerPos.y))<b||(m.startDrag({evt:s}),!m.isDragging()))return}m._setDragPosition(s,c),u.push(m)}}),u.forEach(c=>{c.fire("dragmove",{type:"dragmove",target:c,evt:s},!0)})},_endDragBefore(s){const u=[];a.DD._dragElements.forEach(c=>{const{node:d}=c,m=d.getStage();if(s&&m.setPointersPositions(s),!m._changedPointerPositions.find(b=>b.id===c.pointerId))return;(c.dragStatus==="dragging"||c.dragStatus==="stopped")&&(a.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,c.dragStatus="stopped");const v=c.node.getLayer()||c.node instanceof t.Konva.Stage&&c.node;v&&u.indexOf(v)===-1&&u.push(v)}),u.forEach(c=>{c.draw()})},_endDragAfter(s){a.DD._dragElements.forEach((u,c)=>{u.dragStatus==="stopped"&&u.node.fire("dragend",{type:"dragend",target:u.node,evt:s},!0),u.dragStatus!=="dragging"&&a.DD._dragElements.delete(c)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",a.DD._endDragBefore,!0),window.addEventListener("touchend",a.DD._endDragBefore,!0),window.addEventListener("touchcancel",a.DD._endDragBefore,!0),window.addEventListener("mousemove",a.DD._drag),window.addEventListener("touchmove",a.DD._drag),window.addEventListener("mouseup",a.DD._endDragAfter,!1),window.addEventListener("touchend",a.DD._endDragAfter,!1),window.addEventListener("touchcancel",a.DD._endDragAfter,!1))}(Bp)),Bp}var V_;function ei(){if(V_)return fd;V_=1,Object.defineProperty(fd,"__esModule",{value:!0}),fd.Node=void 0;const a=Yn(),t=be(),n=D0(),s=_e(),u=U1(),c=Re(),d="absoluteOpacity",m="allEventListeners",_="absoluteTransform",v="absoluteScale",b="canvas",R="Change",U="children",C="konva",O="listening",I="mouseenter",z="mouseleave",F="set",M="Shape",D=" ",L="stage",H="transform",j="Stage",q="visible",x=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(D);let w=1,V=class r1{constructor(T){this._id=w++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(T),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(T){(T===H||T===_)&&this._cache.get(T)?this._cache.get(T).dirty=!0:T?this._cache.delete(T):this._cache.clear()}_getCache(T,K){let k=this._cache.get(T);return(k===void 0||(T===H||T===_)&&k.dirty===!0)&&(k=K.call(this),this._cache.set(T,k)),k}_calculate(T,K,k){if(!this._attachedDepsListeners.get(T)){const X=K.map($=>$+"Change.konva").join(D);this.on(X,()=>{this._clearCache(T)}),this._attachedDepsListeners.set(T,!0)}return this._getCache(T,k)}_getCanvasCache(){return this._cache.get(b)}_clearSelfAndDescendantCache(T){this._clearCache(T),T===_&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(b)){const{scene:T,filter:K,hit:k}=this._cache.get(b);a.Util.releaseCanvas(T,K,k),this._cache.delete(b)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(T){const K=T||{};let k={};(K.x===void 0||K.y===void 0||K.width===void 0||K.height===void 0)&&(k=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let X=Math.ceil(K.width||k.width),$=Math.ceil(K.height||k.height),at=K.pixelRatio,dt=K.x===void 0?Math.floor(k.x):K.x,Q=K.y===void 0?Math.floor(k.y):K.y,it=K.offset||0,Et=K.drawBorder||!1,rt=K.hitCanvasPixelRatio||1;if(!X||!$){a.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const gt=Math.abs(Math.round(k.x)-dt)>.5?1:0,Rt=Math.abs(Math.round(k.y)-Q)>.5?1:0;X+=it*2+gt,$+=it*2+Rt,dt-=it,Q-=it;const Nt=new n.SceneCanvas({pixelRatio:at,width:X,height:$}),et=new n.SceneCanvas({pixelRatio:at,width:0,height:0,willReadFrequently:!0}),ct=new n.HitCanvas({pixelRatio:rt,width:X,height:$}),At=Nt.getContext(),Ct=ct.getContext();return ct.isCache=!0,Nt.isCache=!0,this._cache.delete(b),this._filterUpToDate=!1,K.imageSmoothingEnabled===!1&&(Nt.getContext()._context.imageSmoothingEnabled=!1,et.getContext()._context.imageSmoothingEnabled=!1),At.save(),Ct.save(),At.translate(-dt,-Q),Ct.translate(-dt,-Q),this._isUnderCache=!0,this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(v),this.drawScene(Nt,this),this.drawHit(ct,this),this._isUnderCache=!1,At.restore(),Ct.restore(),Et&&(At.save(),At.beginPath(),At.rect(0,0,X,$),At.closePath(),At.setAttr("strokeStyle","red"),At.setAttr("lineWidth",5),At.stroke(),At.restore()),this._cache.set(b,{scene:Nt,filter:et,hit:ct,x:dt,y:Q}),this._requestDraw(),this}isCached(){return this._cache.has(b)}getClientRect(T){throw new Error('abstract "getClientRect" method call')}_transformedRect(T,K){const k=[{x:T.x,y:T.y},{x:T.x+T.width,y:T.y},{x:T.x+T.width,y:T.y+T.height},{x:T.x,y:T.y+T.height}];let X=1/0,$=1/0,at=-1/0,dt=-1/0;const Q=this.getAbsoluteTransform(K);return k.forEach(function(it){const Et=Q.point(it);X===void 0&&(X=at=Et.x,$=dt=Et.y),X=Math.min(X,Et.x),$=Math.min($,Et.y),at=Math.max(at,Et.x),dt=Math.max(dt,Et.y)}),{x:X,y:$,width:at-X,height:dt-$}}_drawCachedSceneCanvas(T){T.save(),T._applyOpacity(this),T._applyGlobalCompositeOperation(this);const K=this._getCanvasCache();T.translate(K.x,K.y);const k=this._getCachedSceneCanvas(),X=k.pixelRatio;T.drawImage(k._canvas,0,0,k.width/X,k.height/X),T.restore()}_drawCachedHitCanvas(T){const K=this._getCanvasCache(),k=K.hit;T.save(),T.translate(K.x,K.y),T.drawImage(k._canvas,0,0,k.width/k.pixelRatio,k.height/k.pixelRatio),T.restore()}_getCachedSceneCanvas(){let T=this.filters(),K=this._getCanvasCache(),k=K.scene,X=K.filter,$=X.getContext(),at,dt,Q,it;if(T){if(!this._filterUpToDate){const Et=k.pixelRatio;X.setSize(k.width/k.pixelRatio,k.height/k.pixelRatio);try{for(at=T.length,$.clear(),$.drawImage(k._canvas,0,0,k.getWidth()/Et,k.getHeight()/Et),dt=$.getImageData(0,0,X.getWidth(),X.getHeight()),Q=0;Q<at;Q++){if(it=T[Q],typeof it!="function"){a.Util.error("Filter should be type of function, but got "+typeof it+" instead. Please check correct filters");continue}it.call(this,dt),$.putImageData(dt,0,0)}}catch(rt){a.Util.error("Unable to apply filter. "+rt.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return X}return k}on(T,K){if(this._cache&&this._cache.delete(m),arguments.length===3)return this._delegate.apply(this,arguments);let k=T.split(D),X=k.length,$,at,dt,Q,it;for($=0;$<X;$++)at=k[$],dt=at.split("."),Q=dt[0],it=dt[1]||"",this.eventListeners[Q]||(this.eventListeners[Q]=[]),this.eventListeners[Q].push({name:it,handler:K});return this}off(T,K){let k=(T||"").split(D),X=k.length,$,at,dt,Q,it,Et;if(this._cache&&this._cache.delete(m),!T)for(at in this.eventListeners)this._off(at);for($=0;$<X;$++)if(dt=k[$],Q=dt.split("."),it=Q[0],Et=Q[1],it)this.eventListeners[it]&&this._off(it,Et,K);else for(at in this.eventListeners)this._off(at,Et,K);return this}dispatchEvent(T){const K={target:this,type:T.type,evt:T};return this.fire(T.type,K),this}addEventListener(T,K){return this.on(T,function(k){K.call(this,k.evt)}),this}removeEventListener(T){return this.off(T),this}_delegate(T,K,k){const X=this;this.on(T,function($){const at=$.target.findAncestors(K,!0,X);for(let dt=0;dt<at.length;dt++)$=a.Util.cloneObject($),$.currentTarget=at[dt],k.call(at[dt],$)})}remove(){return this.isDragging()&&this.stopDrag(),u.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(_),this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(L),this._clearSelfAndDescendantCache(q),this._clearSelfAndDescendantCache(O)}_remove(){this._clearCaches();const T=this.getParent();T&&T.children&&(T.children.splice(this.index,1),T._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(T){const K="get"+a.Util._capitalize(T);return a.Util._isFunction(this[K])?this[K]():this.attrs[T]}getAncestors(){let T=this.getParent(),K=[];for(;T;)K.push(T),T=T.getParent();return K}getAttrs(){return this.attrs||{}}setAttrs(T){return this._batchTransformChanges(()=>{let K,k;if(!T)return this;for(K in T)K!==U&&(k=F+a.Util._capitalize(K),a.Util._isFunction(this[k])?this[k](T[K]):this._setAttr(K,T[K]))}),this}isListening(){return this._getCache(O,this._isListening)}_isListening(T){if(!this.listening())return!1;const k=this.getParent();return k&&k!==T&&this!==T?k._isListening(T):!0}isVisible(){return this._getCache(q,this._isVisible)}_isVisible(T){if(!this.visible())return!1;const k=this.getParent();return k&&k!==T&&this!==T?k._isVisible(T):!0}shouldDrawHit(T,K=!1){if(T)return this._isVisible(T)&&this._isListening(T);const k=this.getLayer();let X=!1;u.DD._dragElements.forEach(at=>{at.dragStatus==="dragging"&&(at.node.nodeType==="Stage"||at.node.getLayer()===k)&&(X=!0)});const $=!K&&!s.Konva.hitOnDragEnabled&&(X||s.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!$}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let T=this.getDepth(),K=this,k=0,X,$,at,dt;function Q(Et){for(X=[],$=Et.length,at=0;at<$;at++)dt=Et[at],k++,dt.nodeType!==M&&(X=X.concat(dt.getChildren().slice())),dt._id===K._id&&(at=$);X.length>0&&X[0].getDepth()<=T&&Q(X)}const it=this.getStage();return K.nodeType!==j&&it&&Q(it.getChildren()),k}getDepth(){let T=0,K=this.parent;for(;K;)T++,K=K.parent;return T}_batchTransformChanges(T){this._batchingTransformChange=!0,T(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(H),this._clearSelfAndDescendantCache(_)),this._needClearTransformCache=!1}setPosition(T){return this._batchTransformChanges(()=>{this.x(T.x),this.y(T.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const T=this.getStage();if(!T)return null;const K=T.getPointerPosition();if(!K)return null;const k=this.getAbsoluteTransform().copy();return k.invert(),k.point(K)}getAbsolutePosition(T){let K=!1,k=this.parent;for(;k;){if(k.isCached()){K=!0;break}k=k.parent}K&&!T&&(T=!0);const X=this.getAbsoluteTransform(T).getMatrix(),$=new a.Transform,at=this.offset();return $.m=X.slice(),$.translate(at.x,at.y),$.getTranslation()}setAbsolutePosition(T){const{x:K,y:k,...X}=this._clearTransform();this.attrs.x=K,this.attrs.y=k,this._clearCache(H);const $=this._getAbsoluteTransform().copy();return $.invert(),$.translate(T.x,T.y),T={x:this.attrs.x+$.getTranslation().x,y:this.attrs.y+$.getTranslation().y},this._setTransform(X),this.setPosition({x:T.x,y:T.y}),this._clearCache(H),this._clearSelfAndDescendantCache(_),this}_setTransform(T){let K;for(K in T)this.attrs[K]=T[K]}_clearTransform(){const T={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,T}move(T){let K=T.x,k=T.y,X=this.x(),$=this.y();return K!==void 0&&(X+=K),k!==void 0&&($+=k),this.setPosition({x:X,y:$}),this}_eachAncestorReverse(T,K){let k=[],X=this.getParent(),$,at;if(!(K&&K._id===this._id)){for(k.unshift(this);X&&(!K||X._id!==K._id);)k.unshift(X),X=X.parent;for($=k.length,at=0;at<$;at++)T(k[at])}}rotate(T){return this.rotation(this.rotation()+T),this}moveToTop(){if(!this.parent)return a.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const T=this.index,K=this.parent.getChildren().length;return T<K-1?(this.parent.children.splice(T,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return a.Util.warn("Node has no parent. moveUp function is ignored."),!1;const T=this.index,K=this.parent.getChildren().length;return T<K-1?(this.parent.children.splice(T,1),this.parent.children.splice(T+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return a.Util.warn("Node has no parent. moveDown function is ignored."),!1;const T=this.index;return T>0?(this.parent.children.splice(T,1),this.parent.children.splice(T-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return a.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const T=this.index;return T>0?(this.parent.children.splice(T,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(T){if(!this.parent)return a.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(T<0||T>=this.parent.children.length)&&a.Util.warn("Unexpected value "+T+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const K=this.index;return this.parent.children.splice(K,1),this.parent.children.splice(T,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(d,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let T=this.opacity();const K=this.getParent();return K&&!K._isUnderCache&&(T*=K.getAbsoluteOpacity()),T}moveTo(T){return this.getParent()!==T&&(this._remove(),T.add(this)),this}toObject(){let T=this.getAttrs(),K,k,X,$,at;const dt={attrs:{},className:this.getClassName()};for(K in T)k=T[K],at=a.Util.isObject(k)&&!a.Util._isPlainObject(k)&&!a.Util._isArray(k),!at&&(X=typeof this[K]=="function"&&this[K],delete T[K],$=X?X.call(this):null,T[K]=k,$!==k&&(dt.attrs[K]=k));return a.Util._prepareToStringify(dt)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(T,K,k){const X=[];K&&this._isMatch(T)&&X.push(this);let $=this.parent;for(;$;){if($===k)return X;$._isMatch(T)&&X.push($),$=$.parent}return X}isAncestorOf(T){return!1}findAncestor(T,K,k){return this.findAncestors(T,K,k)[0]}_isMatch(T){if(!T)return!1;if(typeof T=="function")return T(this);let K=T.replace(/ /g,"").split(","),k=K.length,X,$;for(X=0;X<k;X++)if($=K[X],a.Util.isValidSelector($)||(a.Util.warn('Selector "'+$+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),a.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),a.Util.warn("Konva is awesome, right?")),$.charAt(0)==="#"){if(this.id()===$.slice(1))return!0}else if($.charAt(0)==="."){if(this.hasName($.slice(1)))return!0}else if(this.className===$||this.nodeType===$)return!0;return!1}getLayer(){const T=this.getParent();return T?T.getLayer():null}getStage(){return this._getCache(L,this._getStage)}_getStage(){const T=this.getParent();return T?T.getStage():null}fire(T,K={},k){return K.target=K.target||this,k?this._fireAndBubble(T,K):this._fire(T,K),this}getAbsoluteTransform(T){return T?this._getAbsoluteTransform(T):this._getCache(_,this._getAbsoluteTransform)}_getAbsoluteTransform(T){let K;if(T)return K=new a.Transform,this._eachAncestorReverse(function(k){const X=k.transformsEnabled();X==="all"?K.multiply(k.getTransform()):X==="position"&&K.translate(k.x()-k.offsetX(),k.y()-k.offsetY())},T),K;{K=this._cache.get(_)||new a.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(K):K.reset();const k=this.transformsEnabled();if(k==="all")K.multiply(this.getTransform());else if(k==="position"){const X=this.attrs.x||0,$=this.attrs.y||0,at=this.attrs.offsetX||0,dt=this.attrs.offsetY||0;K.translate(X-at,$-dt)}return K.dirty=!1,K}}getAbsoluteScale(T){let K=this;for(;K;)K._isUnderCache&&(T=K),K=K.getParent();const X=this.getAbsoluteTransform(T).decompose();return{x:X.scaleX,y:X.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(H,this._getTransform)}_getTransform(){var T,K;const k=this._cache.get(H)||new a.Transform;k.reset();const X=this.x(),$=this.y(),at=s.Konva.getAngle(this.rotation()),dt=(T=this.attrs.scaleX)!==null&&T!==void 0?T:1,Q=(K=this.attrs.scaleY)!==null&&K!==void 0?K:1,it=this.attrs.skewX||0,Et=this.attrs.skewY||0,rt=this.attrs.offsetX||0,gt=this.attrs.offsetY||0;return(X!==0||$!==0)&&k.translate(X,$),at!==0&&k.rotate(at),(it!==0||Et!==0)&&k.skew(it,Et),(dt!==1||Q!==1)&&k.scale(dt,Q),(rt!==0||gt!==0)&&k.translate(-1*rt,-1*gt),k.dirty=!1,k}clone(T){let K=a.Util.cloneObject(this.attrs),k,X,$,at,dt;for(k in T)K[k]=T[k];const Q=new this.constructor(K);for(k in this.eventListeners)for(X=this.eventListeners[k],$=X.length,at=0;at<$;at++)dt=X[at],dt.name.indexOf(C)<0&&(Q.eventListeners[k]||(Q.eventListeners[k]=[]),Q.eventListeners[k].push(dt));return Q}_toKonvaCanvas(T){T=T||{};const K=this.getClientRect(),k=this.getStage(),X=T.x!==void 0?T.x:Math.floor(K.x),$=T.y!==void 0?T.y:Math.floor(K.y),at=T.pixelRatio||1,dt=new n.SceneCanvas({width:T.width||Math.ceil(K.width)||(k?k.width():0),height:T.height||Math.ceil(K.height)||(k?k.height():0),pixelRatio:at}),Q=dt.getContext(),it=new n.SceneCanvas({width:dt.width/dt.pixelRatio+Math.abs(X),height:dt.height/dt.pixelRatio+Math.abs($),pixelRatio:dt.pixelRatio});return T.imageSmoothingEnabled===!1&&(Q._context.imageSmoothingEnabled=!1),Q.save(),(X||$)&&Q.translate(-1*X,-1*$),this.drawScene(dt,void 0,it),Q.restore(),dt}toCanvas(T){return this._toKonvaCanvas(T)._canvas}toDataURL(T){T=T||{};const K=T.mimeType||null,k=T.quality||null,X=this._toKonvaCanvas(T).toDataURL(K,k);return T.callback&&T.callback(X),X}toImage(T){return new Promise((K,k)=>{try{const X=T==null?void 0:T.callback;X&&delete T.callback,a.Util._urlToImage(this.toDataURL(T),function($){K($),X==null||X($)})}catch(X){k(X)}})}toBlob(T){return new Promise((K,k)=>{try{const X=T==null?void 0:T.callback;X&&delete T.callback,this.toCanvas(T).toBlob($=>{K($),X==null||X($)},T==null?void 0:T.mimeType,T==null?void 0:T.quality)}catch(X){k(X)}})}setSize(T){return this.width(T.width),this.height(T.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():s.Konva.dragDistance}_off(T,K,k){let X=this.eventListeners[T],$,at,dt;for($=0;$<X.length;$++)if(at=X[$].name,dt=X[$].handler,(at!=="konva"||K==="konva")&&(!K||at===K)&&(!k||k===dt)){if(X.splice($,1),X.length===0){delete this.eventListeners[T];break}$--}}_fireChangeEvent(T,K,k){this._fire(T+R,{oldVal:K,newVal:k})}addName(T){if(!this.hasName(T)){const K=this.name(),k=K?K+" "+T:T;this.name(k)}return this}hasName(T){if(!T)return!1;const K=this.name();return K?(K||"").split(/\s/g).indexOf(T)!==-1:!1}removeName(T){const K=(this.name()||"").split(/\s/g),k=K.indexOf(T);return k!==-1&&(K.splice(k,1),this.name(K.join(" "))),this}setAttr(T,K){const k=this[F+a.Util._capitalize(T)];return a.Util._isFunction(k)?k.call(this,K):this._setAttr(T,K),this}_requestDraw(){if(s.Konva.autoDrawEnabled){const T=this.getLayer()||this.getStage();T==null||T.batchDraw()}}_setAttr(T,K){const k=this.attrs[T];k===K&&!a.Util.isObject(K)||(K==null?delete this.attrs[T]:this.attrs[T]=K,this._shouldFireChangeEvents&&this._fireChangeEvent(T,k,K),this._requestDraw())}_setComponentAttr(T,K,k){let X;k!==void 0&&(X=this.attrs[T],X||(this.attrs[T]=this.getAttr(T)),this.attrs[T][K]=k,this._fireChangeEvent(T,X,k))}_fireAndBubble(T,K,k){if(K&&this.nodeType===M&&(K.target=this),!((T===I||T===z)&&(k&&(this===k||this.isAncestorOf&&this.isAncestorOf(k))||this.nodeType==="Stage"&&!k))){this._fire(T,K);const $=(T===I||T===z)&&k&&k.isAncestorOf&&k.isAncestorOf(this)&&!k.isAncestorOf(this.parent);(K&&!K.cancelBubble||!K)&&this.parent&&this.parent.isListening()&&!$&&(k&&k.parent?this._fireAndBubble.call(this.parent,T,K,k):this._fireAndBubble.call(this.parent,T,K))}}_getProtoListeners(T){var K,k,X;const $=(K=this._cache.get(m))!==null&&K!==void 0?K:{};let at=$==null?void 0:$[T];if(at===void 0){at=[];let dt=Object.getPrototypeOf(this);for(;dt;){const Q=(X=(k=dt.eventListeners)===null||k===void 0?void 0:k[T])!==null&&X!==void 0?X:[];at.push(...Q),dt=Object.getPrototypeOf(dt)}$[T]=at,this._cache.set(m,$)}return at}_fire(T,K){K=K||{},K.currentTarget=this,K.type=T;const k=this._getProtoListeners(T);if(k)for(var X=0;X<k.length;X++)k[X].handler.call(this,K);const $=this.eventListeners[T];if($)for(var X=0;X<$.length;X++)$[X].handler.call(this,K)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(T){const K=T?T.pointerId:void 0,k=this.getStage(),X=this.getAbsolutePosition();if(!k)return;const $=k._getPointerById(K)||k._changedPointerPositions[0]||X;u.DD._dragElements.set(this._id,{node:this,startPointerPos:$,offset:{x:$.x-X.x,y:$.y-X.y},dragStatus:"ready",pointerId:K})}startDrag(T,K=!0){u.DD._dragElements.has(this._id)||this._createDragElement(T);const k=u.DD._dragElements.get(this._id);k.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:T&&T.evt},K)}_setDragPosition(T,K){const k=this.getStage()._getPointerById(K.pointerId);if(!k)return;let X={x:k.x-K.offset.x,y:k.y-K.offset.y};const $=this.dragBoundFunc();if($!==void 0){const at=$.call(this,X,T);at?X=at:a.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==X.x||this._lastPos.y!==X.y)&&(this.setAbsolutePosition(X),this._requestDraw()),this._lastPos=X}stopDrag(T){const K=u.DD._dragElements.get(this._id);K&&(K.dragStatus="stopped"),u.DD._endDragBefore(T),u.DD._endDragAfter(T)}setDraggable(T){this._setAttr("draggable",T),this._dragChange()}isDragging(){const T=u.DD._dragElements.get(this._id);return T?T.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(T){if(!(!(T.evt.button!==void 0)||s.Konva.dragButtons.indexOf(T.evt.button)>=0)||this.isDragging())return;let X=!1;u.DD._dragElements.forEach($=>{this.isAncestorOf($.node)&&(X=!0)}),X||this._createDragElement(T)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const K=u.DD._dragElements.get(this._id),k=K&&K.dragStatus==="dragging",X=K&&K.dragStatus==="ready";k?this.stopDrag():X&&u.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(T={x:0,y:0}){const K=this.getStage();if(!K)return!1;const k={x:-T.x,y:-T.y,width:K.width()+2*T.x,height:K.height()+2*T.y};return a.Util.haveIntersection(k,this.getClientRect())}static create(T,K){return a.Util._isString(T)&&(T=JSON.parse(T)),this._createNode(T,K)}static _createNode(T,K){let k=r1.prototype.getClassName.call(T),X=T.children,$,at,dt;K&&(T.attrs.container=K),s.Konva[k]||(a.Util.warn('Can not find a node with class name "'+k+'". Fallback to "Shape".'),k="Shape");const Q=s.Konva[k];if($=new Q(T.attrs),X)for(at=X.length,dt=0;dt<at;dt++)$.add(r1._createNode(X[dt]));return $}};fd.Node=V,V.prototype.nodeType="Node",V.prototype._attrsAffectingSize=[],V.prototype.eventListeners={},V.prototype.on.call(V.prototype,x,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(H),this._clearSelfAndDescendantCache(_)}),V.prototype.on.call(V.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(q)}),V.prototype.on.call(V.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(O)}),V.prototype.on.call(V.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(d)});const G=t.Factory.addGetterSetter;return G(V,"zIndex"),G(V,"absolutePosition"),G(V,"position"),G(V,"x",0,(0,c.getNumberValidator)()),G(V,"y",0,(0,c.getNumberValidator)()),G(V,"globalCompositeOperation","source-over",(0,c.getStringValidator)()),G(V,"opacity",1,(0,c.getNumberValidator)()),G(V,"name","",(0,c.getStringValidator)()),G(V,"id","",(0,c.getStringValidator)()),G(V,"rotation",0,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(V,"scale",["x","y"]),G(V,"scaleX",1,(0,c.getNumberValidator)()),G(V,"scaleY",1,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(V,"skew",["x","y"]),G(V,"skewX",0,(0,c.getNumberValidator)()),G(V,"skewY",0,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(V,"offset",["x","y"]),G(V,"offsetX",0,(0,c.getNumberValidator)()),G(V,"offsetY",0,(0,c.getNumberValidator)()),G(V,"dragDistance",void 0,(0,c.getNumberValidator)()),G(V,"width",0,(0,c.getNumberValidator)()),G(V,"height",0,(0,c.getNumberValidator)()),G(V,"listening",!0,(0,c.getBooleanValidator)()),G(V,"preventDefault",!0,(0,c.getBooleanValidator)()),G(V,"filters",void 0,function(Y){return this._filterUpToDate=!1,Y}),G(V,"visible",!0,(0,c.getBooleanValidator)()),G(V,"transformsEnabled","all",(0,c.getStringValidator)()),G(V,"size"),G(V,"dragBoundFunc"),G(V,"draggable",!1,(0,c.getBooleanValidator)()),t.Factory.backCompat(V,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),fd}var dd={},U_;function N0(){if(U_)return dd;U_=1,Object.defineProperty(dd,"__esModule",{value:!0}),dd.Container=void 0;const a=be(),t=ei(),n=Re();let s=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(c){if(!c)return this.children||[];const d=this.children||[],m=[];return d.forEach(function(_){c(_)&&m.push(_)}),m}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(c=>{c.parent=null,c.index=0,c.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(c=>{c.parent=null,c.index=0,c.destroy()}),this.children=[],this._requestDraw(),this}add(...c){if(c.length===0)return this;if(c.length>1){for(let m=0;m<c.length;m++)this.add(c[m]);return this}const d=c[0];return d.getParent()?(d.moveTo(this),this):(this._validateAdd(d),d.index=this.getChildren().length,d.parent=this,d._clearCaches(),this.getChildren().push(d),this._fire("add",{child:d}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(c){return this._generalFind(c,!1)}findOne(c){const d=this._generalFind(c,!0);return d.length>0?d[0]:void 0}_generalFind(c,d){const m=[];return this._descendants(_=>{const v=_._isMatch(c);return v&&m.push(_),!!(v&&d)}),m}_descendants(c){let d=!1;const m=this.getChildren();for(const _ of m){if(d=c(_),d)return!0;if(_.hasChildren()&&(d=_._descendants(c),d))return!0}return!1}toObject(){const c=t.Node.prototype.toObject.call(this);return c.children=[],this.getChildren().forEach(d=>{c.children.push(d.toObject())}),c}isAncestorOf(c){let d=c.getParent();for(;d;){if(d._id===this._id)return!0;d=d.getParent()}return!1}clone(c){const d=t.Node.prototype.clone.call(this,c);return this.getChildren().forEach(function(m){d.add(m.clone())}),d}getAllIntersections(c){const d=[];return this.find("Shape").forEach(m=>{m.isVisible()&&m.intersects(c)&&d.push(m)}),d}_clearSelfAndDescendantCache(c){var d;super._clearSelfAndDescendantCache(c),!this.isCached()&&((d=this.children)===null||d===void 0||d.forEach(function(m){m._clearSelfAndDescendantCache(c)}))}_setChildrenIndices(){var c;(c=this.children)===null||c===void 0||c.forEach(function(d,m){d.index=m}),this._requestDraw()}drawScene(c,d,m){const _=this.getLayer(),v=c||_&&_.getCanvas(),b=v&&v.getContext(),R=this._getCanvasCache(),U=R&&R.scene,C=v&&v.isCache;if(!this.isVisible()&&!C)return this;if(U){b.save();const O=this.getAbsoluteTransform(d).getMatrix();b.transform(O[0],O[1],O[2],O[3],O[4],O[5]),this._drawCachedSceneCanvas(b),b.restore()}else this._drawChildren("drawScene",v,d,m);return this}drawHit(c,d){if(!this.shouldDrawHit(d))return this;const m=this.getLayer(),_=c||m&&m.hitCanvas,v=_&&_.getContext(),b=this._getCanvasCache();if(b&&b.hit){v.save();const U=this.getAbsoluteTransform(d).getMatrix();v.transform(U[0],U[1],U[2],U[3],U[4],U[5]),this._drawCachedHitCanvas(v),v.restore()}else this._drawChildren("drawHit",_,d);return this}_drawChildren(c,d,m,_){var v;const b=d&&d.getContext(),R=this.clipWidth(),U=this.clipHeight(),C=this.clipFunc(),O=typeof R=="number"&&typeof U=="number"||C,I=m===this;if(O){b.save();const F=this.getAbsoluteTransform(m);let M=F.getMatrix();b.transform(M[0],M[1],M[2],M[3],M[4],M[5]),b.beginPath();let D;if(C)D=C.call(this,b,this);else{const L=this.clipX(),H=this.clipY();b.rect(L||0,H||0,R,U)}b.clip.apply(b,D),M=F.copy().invert().getMatrix(),b.transform(M[0],M[1],M[2],M[3],M[4],M[5])}const z=!I&&this.globalCompositeOperation()!=="source-over"&&c==="drawScene";z&&(b.save(),b._applyGlobalCompositeOperation(this)),(v=this.children)===null||v===void 0||v.forEach(function(F){F[c](d,m,_)}),z&&b.restore(),O&&b.restore()}getClientRect(c={}){var d;const m=c.skipTransform,_=c.relativeTo;let v,b,R,U,C={x:1/0,y:1/0,width:0,height:0};const O=this;(d=this.children)===null||d===void 0||d.forEach(function(F){if(!F.visible())return;const M=F.getClientRect({relativeTo:O,skipShadow:c.skipShadow,skipStroke:c.skipStroke});M.width===0&&M.height===0||(v===void 0?(v=M.x,b=M.y,R=M.x+M.width,U=M.y+M.height):(v=Math.min(v,M.x),b=Math.min(b,M.y),R=Math.max(R,M.x+M.width),U=Math.max(U,M.y+M.height)))});const I=this.find("Shape");let z=!1;for(let F=0;F<I.length;F++)if(I[F]._isVisible(this)){z=!0;break}return z&&v!==void 0?C={x:v,y:b,width:R-v,height:U-b}:C={x:0,y:0,width:0,height:0},m?C:this._transformedRect(C,_)}};return dd.Container=s,a.Factory.addComponentsGetterSetter(s,"clip",["x","y","width","height"]),a.Factory.addGetterSetter(s,"clipX",void 0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(s,"clipY",void 0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(s,"clipWidth",void 0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(s,"clipHeight",void 0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(s,"clipFunc"),dd}var Gp={},vu={},I_;function _4(){if(I_)return vu;I_=1,Object.defineProperty(vu,"__esModule",{value:!0}),vu.getCapturedShape=s,vu.createEvent=u,vu.hasPointerCapture=c,vu.setPointerCapture=d,vu.releaseCapture=m;const a=_e(),t=new Map,n=a.Konva._global.PointerEvent!==void 0;function s(_){return t.get(_)}function u(_){return{evt:_,pointerId:_.pointerId}}function c(_,v){return t.get(_)===v}function d(_,v){m(_),v.getStage()&&(t.set(_,v),n&&v._fire("gotpointercapture",u(new PointerEvent("gotpointercapture"))))}function m(_,v){const b=t.get(_);if(!b)return;const R=b.getStage();R&&R.content,t.delete(_),n&&b._fire("lostpointercapture",u(new PointerEvent("lostpointercapture")))}return vu}var L_;function B5(){return L_||(L_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Stage=a.stages=void 0;const t=Yn(),n=be(),s=N0(),u=_e(),c=D0(),d=U1(),m=_e(),_=_4(),v="Stage",b="string",R="px",U="mouseout",C="mouseleave",O="mouseover",I="mouseenter",z="mousemove",F="mousedown",M="mouseup",D="pointermove",L="pointerdown",H="pointerup",j="pointercancel",q="lostpointercapture",x="pointerout",w="pointerleave",V="pointerover",G="pointerenter",Y="contextmenu",T="touchstart",K="touchend",k="touchmove",X="touchcancel",$="wheel",at=5,dt=[[I,"_pointerenter"],[F,"_pointerdown"],[z,"_pointermove"],[M,"_pointerup"],[C,"_pointerleave"],[T,"_pointerdown"],[k,"_pointermove"],[K,"_pointerup"],[X,"_pointercancel"],[O,"_pointerover"],[$,"_wheel"],[Y,"_contextmenu"],[L,"_pointerdown"],[D,"_pointermove"],[H,"_pointerup"],[j,"_pointercancel"],[q,"_lostpointercapture"]],Q={mouse:{[x]:U,[w]:C,[V]:O,[G]:I,[D]:z,[L]:F,[H]:M,[j]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[x]:"touchout",[w]:"touchleave",[V]:"touchover",[G]:"touchenter",[D]:k,[L]:T,[H]:K,[j]:X,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[x]:x,[w]:w,[V]:V,[G]:G,[D]:D,[L]:L,[H]:H,[j]:j,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},it=Nt=>Nt.indexOf("pointer")>=0?"pointer":Nt.indexOf("touch")>=0?"touch":"mouse",Et=Nt=>{const et=it(Nt);if(et==="pointer")return u.Konva.pointerEventsEnabled&&Q.pointer;if(et==="touch")return Q.touch;if(et==="mouse")return Q.mouse};function rt(Nt={}){return(Nt.clipFunc||Nt.clipWidth||Nt.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Nt}const gt="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";a.stages=[];class Rt extends s.Container{constructor(et){super(rt(et)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),a.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{rt(this.attrs)}),this._checkVisibility()}_validateAdd(et){const ct=et.getType()==="Layer",At=et.getType()==="FastLayer";ct||At||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const et=this.visible()?"":"none";this.content.style.display=et}setContainer(et){if(typeof et===b){if(et.charAt(0)==="."){const At=et.slice(1);et=document.getElementsByClassName(At)[0]}else{var ct;et.charAt(0)!=="#"?ct=et:ct=et.slice(1),et=document.getElementById(ct)}if(!et)throw"Can not find container in document with id "+ct}return this._setAttr("container",et),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),et.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const et=this.children,ct=et.length;for(let At=0;At<ct;At++)et[At].clear();return this}clone(et){return et||(et={}),et.container=typeof document<"u"&&document.createElement("div"),s.Container.prototype.clone.call(this,et)}destroy(){super.destroy();const et=this.content;et&&t.Util._isInDocument(et)&&this.container().removeChild(et);const ct=a.stages.indexOf(this);return ct>-1&&a.stages.splice(ct,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const et=this._pointerPositions[0]||this._changedPointerPositions[0];return et?{x:et.x,y:et.y}:(t.Util.warn(gt),null)}_getPointerById(et){return this._pointerPositions.find(ct=>ct.id===et)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(et){et=et||{},et.x=et.x||0,et.y=et.y||0,et.width=et.width||this.width(),et.height=et.height||this.height();const ct=new c.SceneCanvas({width:et.width,height:et.height,pixelRatio:et.pixelRatio||1}),At=ct.getContext()._context,Ct=this.children;return(et.x||et.y)&&At.translate(-1*et.x,-1*et.y),Ct.forEach(function(It){if(!It.isVisible())return;const zt=It._toKonvaCanvas(et);At.drawImage(zt._canvas,et.x,et.y,zt.getWidth()/zt.getPixelRatio(),zt.getHeight()/zt.getPixelRatio())}),ct}getIntersection(et){if(!et)return null;const ct=this.children,At=ct.length,Ct=At-1;for(let It=Ct;It>=0;It--){const zt=ct[It].getIntersection(et);if(zt)return zt}return null}_resizeDOM(){const et=this.width(),ct=this.height();this.content&&(this.content.style.width=et+R,this.content.style.height=ct+R),this.bufferCanvas.setSize(et,ct),this.bufferHitCanvas.setSize(et,ct),this.children.forEach(At=>{At.setSize({width:et,height:ct}),At.draw()})}add(et,...ct){if(arguments.length>1){for(let Ct=0;Ct<arguments.length;Ct++)this.add(arguments[Ct]);return this}super.add(et);const At=this.children.length;return At>at&&t.Util.warn("The stage has "+At+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),et.setSize({width:this.width(),height:this.height()}),et.draw(),u.Konva.isBrowser&&this.content.appendChild(et.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(et){return _.hasPointerCapture(et,this)}setPointerCapture(et){_.setPointerCapture(et,this)}releaseCapture(et){_.releaseCapture(et,this)}getLayers(){return this.children}_bindContentEvents(){u.Konva.isBrowser&&dt.forEach(([et,ct])=>{this.content.addEventListener(et,At=>{this[ct](At)},{passive:!1})})}_pointerenter(et){this.setPointersPositions(et);const ct=Et(et.type);ct&&this._fire(ct.pointerenter,{evt:et,target:this,currentTarget:this})}_pointerover(et){this.setPointersPositions(et);const ct=Et(et.type);ct&&this._fire(ct.pointerover,{evt:et,target:this,currentTarget:this})}_getTargetShape(et){let ct=this[et+"targetShape"];return ct&&!ct.getStage()&&(ct=null),ct}_pointerleave(et){const ct=Et(et.type),At=it(et.type);if(!ct)return;this.setPointersPositions(et);const Ct=this._getTargetShape(At),It=!(u.Konva.isDragging()||u.Konva.isTransforming())||u.Konva.hitOnDragEnabled;Ct&&It?(Ct._fireAndBubble(ct.pointerout,{evt:et}),Ct._fireAndBubble(ct.pointerleave,{evt:et}),this._fire(ct.pointerleave,{evt:et,target:this,currentTarget:this}),this[At+"targetShape"]=null):It&&(this._fire(ct.pointerleave,{evt:et,target:this,currentTarget:this}),this._fire(ct.pointerout,{evt:et,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(et){const ct=Et(et.type),At=it(et.type);if(!ct)return;this.setPointersPositions(et);let Ct=!1;this._changedPointerPositions.forEach(It=>{const zt=this.getIntersection(It);if(d.DD.justDragged=!1,u.Konva["_"+At+"ListenClick"]=!0,!zt||!zt.isListening()){this[At+"ClickStartShape"]=void 0;return}u.Konva.capturePointerEventsEnabled&&zt.setPointerCapture(It.id),this[At+"ClickStartShape"]=zt,zt._fireAndBubble(ct.pointerdown,{evt:et,pointerId:It.id}),Ct=!0;const $t=et.type.indexOf("touch")>=0;zt.preventDefault()&&et.cancelable&&$t&&et.preventDefault()}),Ct||this._fire(ct.pointerdown,{evt:et,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(et){const ct=Et(et.type),At=it(et.type);if(!ct||(u.Konva.isDragging()&&d.DD.node.preventDefault()&&et.cancelable&&et.preventDefault(),this.setPointersPositions(et),!(!(u.Konva.isDragging()||u.Konva.isTransforming())||u.Konva.hitOnDragEnabled)))return;const It={};let zt=!1;const $t=this._getTargetShape(At);this._changedPointerPositions.forEach(oe=>{const Yt=_.getCapturedShape(oe.id)||this.getIntersection(oe),Fe=oe.id,le={evt:et,pointerId:Fe},Ke=$t!==Yt;if(Ke&&$t&&($t._fireAndBubble(ct.pointerout,{...le},Yt),$t._fireAndBubble(ct.pointerleave,{...le},Yt)),Yt){if(It[Yt._id])return;It[Yt._id]=!0}Yt&&Yt.isListening()?(zt=!0,Ke&&(Yt._fireAndBubble(ct.pointerover,{...le},$t),Yt._fireAndBubble(ct.pointerenter,{...le},$t),this[At+"targetShape"]=Yt),Yt._fireAndBubble(ct.pointermove,{...le})):$t&&(this._fire(ct.pointerover,{evt:et,target:this,currentTarget:this,pointerId:Fe}),this[At+"targetShape"]=null)}),zt||this._fire(ct.pointermove,{evt:et,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(et){const ct=Et(et.type),At=it(et.type);if(!ct)return;this.setPointersPositions(et);const Ct=this[At+"ClickStartShape"],It=this[At+"ClickEndShape"],zt={};let $t=!1;this._changedPointerPositions.forEach(oe=>{const Yt=_.getCapturedShape(oe.id)||this.getIntersection(oe);if(Yt){if(Yt.releaseCapture(oe.id),zt[Yt._id])return;zt[Yt._id]=!0}const Fe=oe.id,le={evt:et,pointerId:Fe};let Ke=!1;u.Konva["_"+At+"InDblClickWindow"]?(Ke=!0,clearTimeout(this[At+"DblTimeout"])):d.DD.justDragged||(u.Konva["_"+At+"InDblClickWindow"]=!0,clearTimeout(this[At+"DblTimeout"])),this[At+"DblTimeout"]=setTimeout(function(){u.Konva["_"+At+"InDblClickWindow"]=!1},u.Konva.dblClickWindow),Yt&&Yt.isListening()?($t=!0,this[At+"ClickEndShape"]=Yt,Yt._fireAndBubble(ct.pointerup,{...le}),u.Konva["_"+At+"ListenClick"]&&Ct&&Ct===Yt&&(Yt._fireAndBubble(ct.pointerclick,{...le}),Ke&&It&&It===Yt&&Yt._fireAndBubble(ct.pointerdblclick,{...le}))):(this[At+"ClickEndShape"]=null,u.Konva["_"+At+"ListenClick"]&&this._fire(ct.pointerclick,{evt:et,target:this,currentTarget:this,pointerId:Fe}),Ke&&this._fire(ct.pointerdblclick,{evt:et,target:this,currentTarget:this,pointerId:Fe}))}),$t||this._fire(ct.pointerup,{evt:et,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),u.Konva["_"+At+"ListenClick"]=!1,et.cancelable&&At!=="touch"&&At!=="pointer"&&et.preventDefault()}_contextmenu(et){this.setPointersPositions(et);const ct=this.getIntersection(this.getPointerPosition());ct&&ct.isListening()?ct._fireAndBubble(Y,{evt:et}):this._fire(Y,{evt:et,target:this,currentTarget:this})}_wheel(et){this.setPointersPositions(et);const ct=this.getIntersection(this.getPointerPosition());ct&&ct.isListening()?ct._fireAndBubble($,{evt:et}):this._fire($,{evt:et,target:this,currentTarget:this})}_pointercancel(et){this.setPointersPositions(et);const ct=_.getCapturedShape(et.pointerId)||this.getIntersection(this.getPointerPosition());ct&&ct._fireAndBubble(H,_.createEvent(et)),_.releaseCapture(et.pointerId)}_lostpointercapture(et){_.releaseCapture(et.pointerId)}setPointersPositions(et){const ct=this._getContentPosition();let At=null,Ct=null;et=et||window.event,et.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(et.touches,It=>{this._pointerPositions.push({id:It.identifier,x:(It.clientX-ct.left)/ct.scaleX,y:(It.clientY-ct.top)/ct.scaleY})}),Array.prototype.forEach.call(et.changedTouches||et.touches,It=>{this._changedPointerPositions.push({id:It.identifier,x:(It.clientX-ct.left)/ct.scaleX,y:(It.clientY-ct.top)/ct.scaleY})})):(At=(et.clientX-ct.left)/ct.scaleX,Ct=(et.clientY-ct.top)/ct.scaleY,this.pointerPos={x:At,y:Ct},this._pointerPositions=[{x:At,y:Ct,id:t.Util._getFirstPointerId(et)}],this._changedPointerPositions=[{x:At,y:Ct,id:t.Util._getFirstPointerId(et)}])}_setPointerPosition(et){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(et)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const et=this.content.getBoundingClientRect();return{top:et.top,left:et.left,scaleX:et.width/this.content.clientWidth||1,scaleY:et.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new c.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new c.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!u.Konva.isBrowser)return;const et=this.container();if(!et)throw"Stage has no container. A container is required.";et.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),et.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(et){et.batchDraw()}),this}}a.Stage=Rt,Rt.prototype.nodeType=v,(0,m._registerNode)(Rt),n.Factory.addGetterSetter(Rt,"container"),u.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{a.stages.forEach(Nt=>{Nt.batchDraw()})})}(Gp)),Gp}var gd={},kp={},P_;function Ni(){return P_||(P_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Shape=a.shapes=void 0;const t=_e(),n=Yn(),s=be(),u=ei(),c=Re(),d=_e(),m=_4(),_="hasShadow",v="shadowRGBA",b="patternImage",R="linearGradient",U="radialGradient";let C;function O(){return C||(C=n.Util.createCanvasElement().getContext("2d"),C)}a.shapes={};function I(w){const V=this.attrs.fillRule;V?w.fill(V):w.fill()}function z(w){w.stroke()}function F(w){const V=this.attrs.fillRule;V?w.fill(V):w.fill()}function M(w){w.stroke()}function D(){this._clearCache(_)}function L(){this._clearCache(v)}function H(){this._clearCache(b)}function j(){this._clearCache(R)}function q(){this._clearCache(U)}class x extends u.Node{constructor(V){super(V);let G;for(;G=n.Util.getRandomColor(),!(G&&!(G in a.shapes)););this.colorKey=G,a.shapes[G]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(_,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(b,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const G=O().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(G&&G.setTransform){const Y=new n.Transform;Y.translate(this.fillPatternX(),this.fillPatternY()),Y.rotate(t.Konva.getAngle(this.fillPatternRotation())),Y.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),Y.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const T=Y.getMatrix(),K=typeof DOMMatrix>"u"?{a:T[0],b:T[1],c:T[2],d:T[3],e:T[4],f:T[5]}:new DOMMatrix(T);G.setTransform(K)}return G}}_getLinearGradient(){return this._getCache(R,this.__getLinearGradient)}__getLinearGradient(){const V=this.fillLinearGradientColorStops();if(V){const G=O(),Y=this.fillLinearGradientStartPoint(),T=this.fillLinearGradientEndPoint(),K=G.createLinearGradient(Y.x,Y.y,T.x,T.y);for(let k=0;k<V.length;k+=2)K.addColorStop(V[k],V[k+1]);return K}}_getRadialGradient(){return this._getCache(U,this.__getRadialGradient)}__getRadialGradient(){const V=this.fillRadialGradientColorStops();if(V){const G=O(),Y=this.fillRadialGradientStartPoint(),T=this.fillRadialGradientEndPoint(),K=G.createRadialGradient(Y.x,Y.y,this.fillRadialGradientStartRadius(),T.x,T.y,this.fillRadialGradientEndRadius());for(let k=0;k<V.length;k+=2)K.addColorStop(V[k],V[k+1]);return K}}getShadowRGBA(){return this._getCache(v,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const V=n.Util.colorToRGBA(this.shadowColor());if(V)return"rgba("+V.r+","+V.g+","+V.b+","+V.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const V=this.hitStrokeWidth();return V==="auto"?this.hasStroke():this.strokeEnabled()&&!!V}intersects(V){const G=this.getStage();if(!G)return!1;const Y=G.bufferHitCanvas;return Y.getContext().clear(),this.drawHit(Y,void 0,!0),Y.context.getImageData(Math.round(V.x),Math.round(V.y),1,1).data[3]>0}destroy(){return u.Node.prototype.destroy.call(this),delete a.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(V){var G;if(!((G=this.attrs.perfectDrawEnabled)!==null&&G!==void 0?G:!0))return!1;const T=V||this.hasFill(),K=this.hasStroke(),k=this.getAbsoluteOpacity()!==1;if(T&&K&&k)return!0;const X=this.hasShadow(),$=this.shadowForStrokeEnabled();return!!(T&&K&&X&&$)}setStrokeHitEnabled(V){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),V?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const V=this.size();return{x:this._centroid?-V.width/2:0,y:this._centroid?-V.height/2:0,width:V.width,height:V.height}}getClientRect(V={}){let G=!1,Y=this.getParent();for(;Y;){if(Y.isCached()){G=!0;break}Y=Y.getParent()}const T=V.skipTransform,K=V.relativeTo||G&&this.getStage()||void 0,k=this.getSelfRect(),$=!V.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,at=k.width+$,dt=k.height+$,Q=!V.skipShadow&&this.hasShadow(),it=Q?this.shadowOffsetX():0,Et=Q?this.shadowOffsetY():0,rt=at+Math.abs(it),gt=dt+Math.abs(Et),Rt=Q&&this.shadowBlur()||0,Nt=rt+Rt*2,et=gt+Rt*2,ct={width:Nt,height:et,x:-($/2+Rt)+Math.min(it,0)+k.x,y:-($/2+Rt)+Math.min(Et,0)+k.y};return T?ct:this._transformedRect(ct,K)}drawScene(V,G,Y){const T=this.getLayer();let K=V||T.getCanvas(),k=K.getContext(),X=this._getCanvasCache(),$=this.getSceneFunc(),at=this.hasShadow(),dt,Q;const it=K.isCache,Et=G===this;if(!this.isVisible()&&!Et)return this;if(X){k.save();const gt=this.getAbsoluteTransform(G).getMatrix();return k.transform(gt[0],gt[1],gt[2],gt[3],gt[4],gt[5]),this._drawCachedSceneCanvas(k),k.restore(),this}if(!$)return this;if(k.save(),this._useBufferCanvas()&&!it){dt=this.getStage();const gt=Y||dt.bufferCanvas;Q=gt.getContext(),Q.clear(),Q.save(),Q._applyLineJoin(this);var rt=this.getAbsoluteTransform(G).getMatrix();Q.transform(rt[0],rt[1],rt[2],rt[3],rt[4],rt[5]),$.call(this,Q,this),Q.restore();const Rt=gt.pixelRatio;at&&k._applyShadow(this),k._applyOpacity(this),k._applyGlobalCompositeOperation(this),k.drawImage(gt._canvas,0,0,gt.width/Rt,gt.height/Rt)}else{if(k._applyLineJoin(this),!Et){var rt=this.getAbsoluteTransform(G).getMatrix();k.transform(rt[0],rt[1],rt[2],rt[3],rt[4],rt[5]),k._applyOpacity(this),k._applyGlobalCompositeOperation(this)}at&&k._applyShadow(this),$.call(this,k,this)}return k.restore(),this}drawHit(V,G,Y=!1){if(!this.shouldDrawHit(G,Y))return this;const T=this.getLayer(),K=V||T.hitCanvas,k=K&&K.getContext(),X=this.hitFunc()||this.sceneFunc(),$=this._getCanvasCache(),at=$&&$.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),at){k.save();const Q=this.getAbsoluteTransform(G).getMatrix();return k.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]),this._drawCachedHitCanvas(k),k.restore(),this}if(!X)return this;if(k.save(),k._applyLineJoin(this),!(this===G)){const Q=this.getAbsoluteTransform(G).getMatrix();k.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5])}return X.call(this,k,this),k.restore(),this}drawHitFromCache(V=0){const G=this._getCanvasCache(),Y=this._getCachedSceneCanvas(),T=G.hit,K=T.getContext(),k=T.getWidth(),X=T.getHeight();K.clear(),K.drawImage(Y._canvas,0,0,k,X);try{const $=K.getImageData(0,0,k,X),at=$.data,dt=at.length,Q=n.Util._hexToRgb(this.colorKey);for(let it=0;it<dt;it+=4)at[it+3]>V?(at[it]=Q.r,at[it+1]=Q.g,at[it+2]=Q.b,at[it+3]=255):at[it+3]=0;K.putImageData($,0,0)}catch($){n.Util.error("Unable to draw hit graph from cached scene canvas. "+$.message)}return this}hasPointerCapture(V){return m.hasPointerCapture(V,this)}setPointerCapture(V){m.setPointerCapture(V,this)}releaseCapture(V){m.releaseCapture(V,this)}}a.Shape=x,x.prototype._fillFunc=I,x.prototype._strokeFunc=z,x.prototype._fillFuncHit=F,x.prototype._strokeFuncHit=M,x.prototype._centroid=!1,x.prototype.nodeType="Shape",(0,d._registerNode)(x),x.prototype.eventListeners={},x.prototype.on.call(x.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",D),x.prototype.on.call(x.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",L),x.prototype.on.call(x.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",H),x.prototype.on.call(x.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",j),x.prototype.on.call(x.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",q),s.Factory.addGetterSetter(x,"stroke",void 0,(0,c.getStringOrGradientValidator)()),s.Factory.addGetterSetter(x,"strokeWidth",2,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(x,"fillAfterStrokeEnabled",!1),s.Factory.addGetterSetter(x,"hitStrokeWidth","auto",(0,c.getNumberOrAutoValidator)()),s.Factory.addGetterSetter(x,"strokeHitEnabled",!0,(0,c.getBooleanValidator)()),s.Factory.addGetterSetter(x,"perfectDrawEnabled",!0,(0,c.getBooleanValidator)()),s.Factory.addGetterSetter(x,"shadowForStrokeEnabled",!0,(0,c.getBooleanValidator)()),s.Factory.addGetterSetter(x,"lineJoin"),s.Factory.addGetterSetter(x,"lineCap"),s.Factory.addGetterSetter(x,"sceneFunc"),s.Factory.addGetterSetter(x,"hitFunc"),s.Factory.addGetterSetter(x,"dash"),s.Factory.addGetterSetter(x,"dashOffset",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(x,"shadowColor",void 0,(0,c.getStringValidator)()),s.Factory.addGetterSetter(x,"shadowBlur",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(x,"shadowOpacity",1,(0,c.getNumberValidator)()),s.Factory.addComponentsGetterSetter(x,"shadowOffset",["x","y"]),s.Factory.addGetterSetter(x,"shadowOffsetX",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(x,"shadowOffsetY",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(x,"fillPatternImage"),s.Factory.addGetterSetter(x,"fill",void 0,(0,c.getStringOrGradientValidator)()),s.Factory.addGetterSetter(x,"fillPatternX",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(x,"fillPatternY",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(x,"fillLinearGradientColorStops"),s.Factory.addGetterSetter(x,"strokeLinearGradientColorStops"),s.Factory.addGetterSetter(x,"fillRadialGradientStartRadius",0),s.Factory.addGetterSetter(x,"fillRadialGradientEndRadius",0),s.Factory.addGetterSetter(x,"fillRadialGradientColorStops"),s.Factory.addGetterSetter(x,"fillPatternRepeat","repeat"),s.Factory.addGetterSetter(x,"fillEnabled",!0),s.Factory.addGetterSetter(x,"strokeEnabled",!0),s.Factory.addGetterSetter(x,"shadowEnabled",!0),s.Factory.addGetterSetter(x,"dashEnabled",!0),s.Factory.addGetterSetter(x,"strokeScaleEnabled",!0),s.Factory.addGetterSetter(x,"fillPriority","color"),s.Factory.addComponentsGetterSetter(x,"fillPatternOffset",["x","y"]),s.Factory.addGetterSetter(x,"fillPatternOffsetX",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(x,"fillPatternOffsetY",0,(0,c.getNumberValidator)()),s.Factory.addComponentsGetterSetter(x,"fillPatternScale",["x","y"]),s.Factory.addGetterSetter(x,"fillPatternScaleX",1,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(x,"fillPatternScaleY",1,(0,c.getNumberValidator)()),s.Factory.addComponentsGetterSetter(x,"fillLinearGradientStartPoint",["x","y"]),s.Factory.addComponentsGetterSetter(x,"strokeLinearGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(x,"fillLinearGradientStartPointX",0),s.Factory.addGetterSetter(x,"strokeLinearGradientStartPointX",0),s.Factory.addGetterSetter(x,"fillLinearGradientStartPointY",0),s.Factory.addGetterSetter(x,"strokeLinearGradientStartPointY",0),s.Factory.addComponentsGetterSetter(x,"fillLinearGradientEndPoint",["x","y"]),s.Factory.addComponentsGetterSetter(x,"strokeLinearGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(x,"fillLinearGradientEndPointX",0),s.Factory.addGetterSetter(x,"strokeLinearGradientEndPointX",0),s.Factory.addGetterSetter(x,"fillLinearGradientEndPointY",0),s.Factory.addGetterSetter(x,"strokeLinearGradientEndPointY",0),s.Factory.addComponentsGetterSetter(x,"fillRadialGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(x,"fillRadialGradientStartPointX",0),s.Factory.addGetterSetter(x,"fillRadialGradientStartPointY",0),s.Factory.addComponentsGetterSetter(x,"fillRadialGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(x,"fillRadialGradientEndPointX",0),s.Factory.addGetterSetter(x,"fillRadialGradientEndPointY",0),s.Factory.addGetterSetter(x,"fillPatternRotation",0),s.Factory.addGetterSetter(x,"fillRule",void 0,(0,c.getStringValidator)()),s.Factory.backCompat(x,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(kp)),kp}var z_;function v4(){if(z_)return gd;z_=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.Layer=void 0;const a=Yn(),t=N0(),n=ei(),s=be(),u=D0(),c=Re(),d=Ni(),m=_e(),_="#",v="beforeDraw",b="draw",R=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],U=R.length;class C extends t.Container{constructor(I){super(I),this.canvas=new u.SceneCanvas,this.hitCanvas=new u.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(I){return this.getContext().clear(I),this.getHitCanvas().getContext().clear(I),this}setZIndex(I){super.setZIndex(I);const z=this.getStage();return z&&z.content&&(z.content.removeChild(this.getNativeCanvasElement()),I<z.children.length-1?z.content.insertBefore(this.getNativeCanvasElement(),z.children[I+1].getCanvas()._canvas):z.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);const I=this.getStage();return I&&I.content&&(I.content.removeChild(this.getNativeCanvasElement()),I.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!n.Node.prototype.moveUp.call(this))return!1;const z=this.getStage();return!z||!z.content?!1:(z.content.removeChild(this.getNativeCanvasElement()),this.index<z.children.length-1?z.content.insertBefore(this.getNativeCanvasElement(),z.children[this.index+1].getCanvas()._canvas):z.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){const I=this.getStage();if(I){const z=I.children;I.content&&(I.content.removeChild(this.getNativeCanvasElement()),I.content.insertBefore(this.getNativeCanvasElement(),z[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){const I=this.getStage();if(I){const z=I.children;I.content&&(I.content.removeChild(this.getNativeCanvasElement()),I.content.insertBefore(this.getNativeCanvasElement(),z[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const I=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),I&&I.parentNode&&a.Util._isInDocument(I)&&I.parentNode.removeChild(I),this}getStage(){return this.parent}setSize({width:I,height:z}){return this.canvas.setSize(I,z),this.hitCanvas.setSize(I,z),this._setSmoothEnabled(),this}_validateAdd(I){const z=I.getType();z!=="Group"&&z!=="Shape"&&a.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(I){return I=I||{},I.width=I.width||this.getWidth(),I.height=I.height||this.getHeight(),I.x=I.x!==void 0?I.x:this.x(),I.y=I.y!==void 0?I.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,I)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){a.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){a.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,a.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(I){if(!this.isListening()||!this.isVisible())return null;let z=1,F=!1;for(;;){for(let M=0;M<U;M++){const D=R[M],L=this._getIntersection({x:I.x+D.x*z,y:I.y+D.y*z}),H=L.shape;if(H)return H;if(F=!!L.antialiased,!L.antialiased)break}if(F)z+=1;else return null}}_getIntersection(I){const z=this.hitCanvas.pixelRatio,F=this.hitCanvas.context.getImageData(Math.round(I.x*z),Math.round(I.y*z),1,1).data,M=F[3];if(M===255){const D=a.Util._rgbToHex(F[0],F[1],F[2]),L=d.shapes[_+D];return L?{shape:L}:{antialiased:!0}}else if(M>0)return{antialiased:!0};return{}}drawScene(I,z){const F=this.getLayer(),M=I||F&&F.getCanvas();return this._fire(v,{node:this}),this.clearBeforeDraw()&&M.getContext().clear(),t.Container.prototype.drawScene.call(this,M,z),this._fire(b,{node:this}),this}drawHit(I,z){const F=this.getLayer(),M=I||F&&F.hitCanvas;return F&&F.clearBeforeDraw()&&F.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,M,z),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(I){a.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(I)}getHitGraphEnabled(I){return a.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const I=this.parent;!!this.hitCanvas._canvas.parentNode?I.content.removeChild(this.hitCanvas._canvas):I.content.appendChild(this.hitCanvas._canvas)}destroy(){return a.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return gd.Layer=C,C.prototype.nodeType="Layer",(0,m._registerNode)(C),s.Factory.addGetterSetter(C,"imageSmoothingEnabled",!0),s.Factory.addGetterSetter(C,"clearBeforeDraw",!0),s.Factory.addGetterSetter(C,"hitGraphEnabled",!0,(0,c.getBooleanValidator)()),gd}var md={},B_;function G5(){if(B_)return md;B_=1,Object.defineProperty(md,"__esModule",{value:!0}),md.FastLayer=void 0;const a=Yn(),t=v4(),n=_e();let s=class extends t.Layer{constructor(c){super(c),this.listening(!1),a.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return md.FastLayer=s,s.prototype.nodeType="FastLayer",(0,n._registerNode)(s),md}var pd={},G_;function I1(){if(G_)return pd;G_=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.Group=void 0;const a=Yn(),t=N0(),n=_e();let s=class extends t.Container{_validateAdd(c){const d=c.getType();d!=="Group"&&d!=="Shape"&&a.Util.throw("You may only add groups and shapes to groups.")}};return pd.Group=s,s.prototype.nodeType="Group",(0,n._registerNode)(s),pd}var yd={},k_;function L1(){if(k_)return yd;k_=1,Object.defineProperty(yd,"__esModule",{value:!0}),yd.Animation=void 0;const a=_e(),t=Yn(),n=function(){return a.glob.performance&&a.glob.performance.now?function(){return a.glob.performance.now()}:function(){return new Date().getTime()}}();let s=class zh{constructor(c,d){this.id=zh.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=c,this.setLayers(d)}setLayers(c){let d=[];return c&&(d=Array.isArray(c)?c:[c]),this.layers=d,this}getLayers(){return this.layers}addLayer(c){const d=this.layers,m=d.length;for(let _=0;_<m;_++)if(d[_]._id===c._id)return!1;return this.layers.push(c),!0}isRunning(){const d=zh.animations,m=d.length;for(let _=0;_<m;_++)if(d[_].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),zh._addAnimation(this),this}stop(){return zh._removeAnimation(this),this}_updateFrameObject(c){this.frame.timeDiff=c-this.frame.lastTime,this.frame.lastTime=c,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(c){this.animations.push(c),this._handleAnimation()}static _removeAnimation(c){const d=c.id,m=this.animations,_=m.length;for(let v=0;v<_;v++)if(m[v].id===d){this.animations.splice(v,1);break}}static _runFrames(){const c={},d=this.animations;for(let m=0;m<d.length;m++){const _=d[m],v=_.layers,b=_.func;_._updateFrameObject(n());const R=v.length;let U;if(b?U=b.call(_,_.frame)!==!1:U=!0,!!U)for(let C=0;C<R;C++){const O=v[C];O._id!==void 0&&(c[O._id]=O)}}for(const m in c)c.hasOwnProperty(m)&&c[m].batchDraw()}static _animationLoop(){const c=zh;c.animations.length?(c._runFrames(),t.Util.requestAnimFrame(c._animationLoop)):c.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return yd.Animation=s,s.animations=[],s.animIdCounter=0,s.animRunning=!1,yd}var Hp={},H_;function k5(){return H_||(H_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Easings=a.Tween=void 0;const t=Yn(),n=L1(),s=ei(),u=_e(),c={node:1,duration:1,easing:1,onFinish:1,yoyo:1},d=1,m=2,_=3,v=["fill","stroke","shadowColor"];let b=0;class R{constructor(O,I,z,F,M,D,L){this.prop=O,this.propFunc=I,this.begin=F,this._pos=F,this.duration=D,this._change=0,this.prevPos=0,this.yoyo=L,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=z,this._change=M-this.begin,this.pause()}fire(O){const I=this[O];I&&I()}setTime(O){O>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():O<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=O,this.update())}getTime(){return this._time}setPosition(O){this.prevPos=this._pos,this.propFunc(O),this._pos=O}getPosition(O){return O===void 0&&(O=this._time),this.func(O,this.begin,this._change,this.duration)}play(){this.state=m,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=_,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(O){this.pause(),this._time=O,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const O=this.getTimer()-this._startTime;this.state===m?this.setTime(O):this.state===_&&this.setTime(this.duration-O)}pause(){this.state=d,this.fire("onPause")}getTimer(){return new Date().getTime()}}class U{constructor(O){const I=this,z=O.node,F=z._id,M=O.easing||a.Easings.Linear,D=!!O.yoyo;let L,H;typeof O.duration>"u"?L=.3:O.duration===0?L=.001:L=O.duration,this.node=z,this._id=b++;const j=z.getLayer()||(z instanceof u.Konva.Stage?z.getLayers():null);j||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){I.tween.onEnterFrame()},j),this.tween=new R(H,function(q){I._tweenFunc(q)},M,0,1,L*1e3,D),this._addListeners(),U.attrs[F]||(U.attrs[F]={}),U.attrs[F][this._id]||(U.attrs[F][this._id]={}),U.tweens[F]||(U.tweens[F]={});for(H in O)c[H]===void 0&&this._addAttr(H,O[H]);this.reset(),this.onFinish=O.onFinish,this.onReset=O.onReset,this.onUpdate=O.onUpdate}_addAttr(O,I){const z=this.node,F=z._id;let M,D,L,H,j;const q=U.tweens[F][O];q&&delete U.attrs[F][q][O];let x=z.getAttr(O);if(t.Util._isArray(I))if(M=[],D=Math.max(I.length,x.length),O==="points"&&I.length!==x.length&&(I.length>x.length?(H=x,x=t.Util._prepareArrayForTween(x,I,z.closed())):(L=I,I=t.Util._prepareArrayForTween(I,x,z.closed()))),O.indexOf("fill")===0)for(let w=0;w<D;w++)if(w%2===0)M.push(I[w]-x[w]);else{const V=t.Util.colorToRGBA(x[w]);j=t.Util.colorToRGBA(I[w]),x[w]=V,M.push({r:j.r-V.r,g:j.g-V.g,b:j.b-V.b,a:j.a-V.a})}else for(let w=0;w<D;w++)M.push(I[w]-x[w]);else v.indexOf(O)!==-1?(x=t.Util.colorToRGBA(x),j=t.Util.colorToRGBA(I),M={r:j.r-x.r,g:j.g-x.g,b:j.b-x.b,a:j.a-x.a}):M=I-x;U.attrs[F][this._id][O]={start:x,diff:M,end:I,trueEnd:L,trueStart:H},U.tweens[F][O]=this._id}_tweenFunc(O){const I=this.node,z=U.attrs[I._id][this._id];let F,M,D,L,H,j,q,x;for(F in z){if(M=z[F],D=M.start,L=M.diff,x=M.end,t.Util._isArray(D))if(H=[],q=Math.max(D.length,x.length),F.indexOf("fill")===0)for(j=0;j<q;j++)j%2===0?H.push((D[j]||0)+L[j]*O):H.push("rgba("+Math.round(D[j].r+L[j].r*O)+","+Math.round(D[j].g+L[j].g*O)+","+Math.round(D[j].b+L[j].b*O)+","+(D[j].a+L[j].a*O)+")");else for(j=0;j<q;j++)H.push((D[j]||0)+L[j]*O);else v.indexOf(F)!==-1?H="rgba("+Math.round(D.r+L.r*O)+","+Math.round(D.g+L.g*O)+","+Math.round(D.b+L.b*O)+","+(D.a+L.a*O)+")":H=D+L*O;I.setAttr(F,H)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const O=this.node,I=U.attrs[O._id][this._id];I.points&&I.points.trueEnd&&O.setAttr("points",I.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const O=this.node,I=U.attrs[O._id][this._id];I.points&&I.points.trueStart&&O.points(I.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(O){return this.tween.seek(O*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const O=this.node._id,I=this._id,z=U.tweens[O];this.pause();for(const F in z)delete U.tweens[O][F];delete U.attrs[O][I]}}a.Tween=U,U.attrs={},U.tweens={},s.Node.prototype.to=function(C){const O=C.onFinish;C.node=this,C.onFinish=function(){this.destroy(),O&&O()},new U(C).play()},a.Easings={BackEaseIn(C,O,I,z){return I*(C/=z)*C*((1.70158+1)*C-1.70158)+O},BackEaseOut(C,O,I,z){return I*((C=C/z-1)*C*((1.70158+1)*C+1.70158)+1)+O},BackEaseInOut(C,O,I,z){let F=1.70158;return(C/=z/2)<1?I/2*(C*C*(((F*=1.525)+1)*C-F))+O:I/2*((C-=2)*C*(((F*=1.525)+1)*C+F)+2)+O},ElasticEaseIn(C,O,I,z,F,M){let D=0;return C===0?O:(C/=z)===1?O+I:(M||(M=z*.3),!F||F<Math.abs(I)?(F=I,D=M/4):D=M/(2*Math.PI)*Math.asin(I/F),-(F*Math.pow(2,10*(C-=1))*Math.sin((C*z-D)*(2*Math.PI)/M))+O)},ElasticEaseOut(C,O,I,z,F,M){let D=0;return C===0?O:(C/=z)===1?O+I:(M||(M=z*.3),!F||F<Math.abs(I)?(F=I,D=M/4):D=M/(2*Math.PI)*Math.asin(I/F),F*Math.pow(2,-10*C)*Math.sin((C*z-D)*(2*Math.PI)/M)+I+O)},ElasticEaseInOut(C,O,I,z,F,M){let D=0;return C===0?O:(C/=z/2)===2?O+I:(M||(M=z*(.3*1.5)),!F||F<Math.abs(I)?(F=I,D=M/4):D=M/(2*Math.PI)*Math.asin(I/F),C<1?-.5*(F*Math.pow(2,10*(C-=1))*Math.sin((C*z-D)*(2*Math.PI)/M))+O:F*Math.pow(2,-10*(C-=1))*Math.sin((C*z-D)*(2*Math.PI)/M)*.5+I+O)},BounceEaseOut(C,O,I,z){return(C/=z)<1/2.75?I*(7.5625*C*C)+O:C<2/2.75?I*(7.5625*(C-=1.5/2.75)*C+.75)+O:C<2.5/2.75?I*(7.5625*(C-=2.25/2.75)*C+.9375)+O:I*(7.5625*(C-=2.625/2.75)*C+.984375)+O},BounceEaseIn(C,O,I,z){return I-a.Easings.BounceEaseOut(z-C,0,I,z)+O},BounceEaseInOut(C,O,I,z){return C<z/2?a.Easings.BounceEaseIn(C*2,0,I,z)*.5+O:a.Easings.BounceEaseOut(C*2-z,0,I,z)*.5+I*.5+O},EaseIn(C,O,I,z){return I*(C/=z)*C+O},EaseOut(C,O,I,z){return-I*(C/=z)*(C-2)+O},EaseInOut(C,O,I,z){return(C/=z/2)<1?I/2*C*C+O:-I/2*(--C*(C-2)-1)+O},StrongEaseIn(C,O,I,z){return I*(C/=z)*C*C*C*C+O},StrongEaseOut(C,O,I,z){return I*((C=C/z-1)*C*C*C*C+1)+O},StrongEaseInOut(C,O,I,z){return(C/=z/2)<1?I/2*C*C*C*C*C+O:I/2*((C-=2)*C*C*C*C+2)+O},Linear(C,O,I,z){return I*C/z+O}}}(Hp)),Hp}var q_;function s1(){return q_||(q_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Konva=void 0;const t=_e(),n=Yn(),s=ei(),u=N0(),c=B5(),d=v4(),m=G5(),_=I1(),v=U1(),b=Ni(),R=L1(),U=k5(),C=y4(),O=D0();a.Konva=n.Util._assign(t.Konva,{Util:n.Util,Transform:n.Transform,Node:s.Node,Container:u.Container,Stage:c.Stage,stages:c.stages,Layer:d.Layer,FastLayer:m.FastLayer,Group:_.Group,DD:v.DD,Shape:b.Shape,shapes:b.shapes,Animation:R.Animation,Tween:U.Tween,Easings:U.Easings,Context:C.Context,Canvas:O.Canvas}),a.default=a.Konva}(Ip)),Ip}var _d={},j_;function H5(){if(j_)return _d;j_=1,Object.defineProperty(_d,"__esModule",{value:!0}),_d.Arc=void 0;const a=be(),t=Ni(),n=_e(),s=Re(),u=_e();let c=class extends t.Shape{_sceneFunc(m){const _=n.Konva.getAngle(this.angle()),v=this.clockwise();m.beginPath(),m.arc(0,0,this.outerRadius(),0,_,v),m.arc(0,0,this.innerRadius(),_,0,!v),m.closePath(),m.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(m){this.outerRadius(m/2)}setHeight(m){this.outerRadius(m/2)}getSelfRect(){const m=this.innerRadius(),_=this.outerRadius(),v=this.clockwise(),b=n.Konva.getAngle(v?360-this.angle():this.angle()),R=Math.cos(Math.min(b,Math.PI)),U=1,C=Math.sin(Math.min(Math.max(Math.PI,b),3*Math.PI/2)),O=Math.sin(Math.min(b,Math.PI/2)),I=R*(R>0?m:_),z=U*_,F=C*(C>0?m:_),M=O*(O>0?_:m);return{x:I,y:v?-1*M:F,width:z-I,height:M-F}}};return _d.Arc=c,c.prototype._centroid=!0,c.prototype.className="Arc",c.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,u._registerNode)(c),a.Factory.addGetterSetter(c,"innerRadius",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(c,"outerRadius",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(c,"angle",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(c,"clockwise",!1,(0,s.getBooleanValidator)()),_d}var vd={},Ed={},F_;function E4(){if(F_)return Ed;F_=1,Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.Line=void 0;const a=be(),t=_e(),n=Ni(),s=Re();function u(m,_,v,b,R,U,C){const O=Math.sqrt(Math.pow(v-m,2)+Math.pow(b-_,2)),I=Math.sqrt(Math.pow(R-v,2)+Math.pow(U-b,2)),z=C*O/(O+I),F=C*I/(O+I),M=v-z*(R-m),D=b-z*(U-_),L=v+F*(R-m),H=b+F*(U-_);return[M,D,L,H]}function c(m,_){const v=m.length,b=[];for(let R=2;R<v-2;R+=2){const U=u(m[R-2],m[R-1],m[R],m[R+1],m[R+2],m[R+3],_);isNaN(U[0])||(b.push(U[0]),b.push(U[1]),b.push(m[R]),b.push(m[R+1]),b.push(U[2]),b.push(U[3]))}return b}class d extends n.Shape{constructor(_){super(_),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(_){let v=this.points(),b=v.length,R=this.tension(),U=this.closed(),C=this.bezier(),O,I,z;if(b){if(_.beginPath(),_.moveTo(v[0],v[1]),R!==0&&b>4){for(O=this.getTensionPoints(),I=O.length,z=U?0:4,U||_.quadraticCurveTo(O[0],O[1],O[2],O[3]);z<I-2;)_.bezierCurveTo(O[z++],O[z++],O[z++],O[z++],O[z++],O[z++]);U||_.quadraticCurveTo(O[I-2],O[I-1],v[b-2],v[b-1])}else if(C)for(z=2;z<b;)_.bezierCurveTo(v[z++],v[z++],v[z++],v[z++],v[z++],v[z++]);else for(z=2;z<b;z+=2)_.lineTo(v[z],v[z+1]);U?(_.closePath(),_.fillStrokeShape(this)):_.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():c(this.points(),this.tension())}_getTensionPointsClosed(){const _=this.points(),v=_.length,b=this.tension(),R=u(_[v-2],_[v-1],_[0],_[1],_[2],_[3],b),U=u(_[v-4],_[v-3],_[v-2],_[v-1],_[0],_[1],b),C=c(_,b);return[R[2],R[3]].concat(C).concat([U[0],U[1],_[v-2],_[v-1],U[2],U[3],R[0],R[1],_[0],_[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let _=this.points();if(_.length<4)return{x:_[0]||0,y:_[1]||0,width:0,height:0};this.tension()!==0?_=[_[0],_[1],...this._getTensionPoints(),_[_.length-2],_[_.length-1]]:_=this.points();let v=_[0],b=_[0],R=_[1],U=_[1],C,O;for(let I=0;I<_.length/2;I++)C=_[I*2],O=_[I*2+1],v=Math.min(v,C),b=Math.max(b,C),R=Math.min(R,O),U=Math.max(U,O);return{x:v,y:R,width:b-v,height:U-R}}}return Ed.Line=d,d.prototype.className="Line",d.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(d),a.Factory.addGetterSetter(d,"closed",!1),a.Factory.addGetterSetter(d,"bezier",!1),a.Factory.addGetterSetter(d,"tension",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(d,"points",[],(0,s.getNumberArrayValidator)()),Ed}var Sd={},qp={},K_;function q5(){return K_||(K_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.t2length=a.getQuadraticArcLength=a.getCubicArcLength=a.binomialCoefficients=a.cValues=a.tValues=void 0,a.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],a.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],a.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(d,m,_)=>{let v,b;const U=_/2;v=0;for(let C=0;C<20;C++)b=U*a.tValues[20][C]+U,v+=a.cValues[20][C]*s(d,m,b);return U*v};a.getCubicArcLength=t;const n=(d,m,_)=>{_===void 0&&(_=1);const v=d[0]-2*d[1]+d[2],b=m[0]-2*m[1]+m[2],R=2*d[1]-2*d[0],U=2*m[1]-2*m[0],C=4*(v*v+b*b),O=4*(v*R+b*U),I=R*R+U*U;if(C===0)return _*Math.sqrt(Math.pow(d[2]-d[0],2)+Math.pow(m[2]-m[0],2));const z=O/(2*C),F=I/C,M=_+z,D=F-z*z,L=M*M+D>0?Math.sqrt(M*M+D):0,H=z*z+D>0?Math.sqrt(z*z+D):0,j=z+Math.sqrt(z*z+D)!==0?D*Math.log(Math.abs((M+L)/(z+H))):0;return Math.sqrt(C)/2*(M*L-z*H+j)};a.getQuadraticArcLength=n;function s(d,m,_){const v=u(1,_,d),b=u(1,_,m),R=v*v+b*b;return Math.sqrt(R)}const u=(d,m,_)=>{const v=_.length-1;let b,R;if(v===0)return 0;if(d===0){R=0;for(let U=0;U<=v;U++)R+=a.binomialCoefficients[v][U]*Math.pow(1-m,v-U)*Math.pow(m,U)*_[U];return R}else{b=new Array(v);for(let U=0;U<v;U++)b[U]=v*(_[U+1]-_[U]);return u(d-1,m,b)}},c=(d,m,_)=>{let v=1,b=d/m,R=(d-_(b))/m,U=0;for(;v>.001;){const C=_(b+R),O=Math.abs(d-C)/m;if(O<v)v=O,b+=R;else{const I=_(b-R),z=Math.abs(d-I)/m;z<v?(v=z,b-=R):R/=2}if(U++,U>500)break}return b};a.t2length=c}(qp)),qp}var Y_;function P1(){if(Y_)return Sd;Y_=1,Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.Path=void 0;const a=be(),t=Ni(),n=_e(),s=q5();class u extends t.Shape{constructor(d){super(d),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=u.parsePathData(this.data()),this.pathLength=u.getPathLength(this.dataArray)}_sceneFunc(d){const m=this.dataArray;d.beginPath();let _=!1;for(let L=0;L<m.length;L++){const H=m[L].command,j=m[L].points;switch(H){case"L":d.lineTo(j[0],j[1]);break;case"M":d.moveTo(j[0],j[1]);break;case"C":d.bezierCurveTo(j[0],j[1],j[2],j[3],j[4],j[5]);break;case"Q":d.quadraticCurveTo(j[0],j[1],j[2],j[3]);break;case"A":var v=j[0],b=j[1],R=j[2],U=j[3],C=j[4],O=j[5],I=j[6],z=j[7],F=R>U?R:U,M=R>U?1:R/U,D=R>U?U/R:1;d.translate(v,b),d.rotate(I),d.scale(M,D),d.arc(0,0,F,C,C+O,1-z),d.scale(1/M,1/D),d.rotate(-I),d.translate(-v,-b);break;case"z":_=!0,d.closePath();break}}!_&&!this.hasFill()?d.strokeShape(this):d.fillStrokeShape(this)}getSelfRect(){let d=[];this.dataArray.forEach(function(C){if(C.command==="A"){const O=C.points[4],I=C.points[5],z=C.points[4]+I;let F=Math.PI/180;if(Math.abs(O-z)<F&&(F=Math.abs(O-z)),I<0)for(let M=O-F;M>z;M-=F){const D=u.getPointOnEllipticalArc(C.points[0],C.points[1],C.points[2],C.points[3],M,0);d.push(D.x,D.y)}else for(let M=O+F;M<z;M+=F){const D=u.getPointOnEllipticalArc(C.points[0],C.points[1],C.points[2],C.points[3],M,0);d.push(D.x,D.y)}}else if(C.command==="C")for(let O=0;O<=1;O+=.01){const I=u.getPointOnCubicBezier(O,C.start.x,C.start.y,C.points[0],C.points[1],C.points[2],C.points[3],C.points[4],C.points[5]);d.push(I.x,I.y)}else d=d.concat(C.points)});let m=d[0],_=d[0],v=d[1],b=d[1],R,U;for(let C=0;C<d.length/2;C++)R=d[C*2],U=d[C*2+1],isNaN(R)||(m=Math.min(m,R),_=Math.max(_,R)),isNaN(U)||(v=Math.min(v,U),b=Math.max(b,U));return{x:m,y:v,width:_-m,height:b-v}}getLength(){return this.pathLength}getPointAtLength(d){return u.getPointAtLengthOfDataArray(d,this.dataArray)}static getLineLength(d,m,_,v){return Math.sqrt((_-d)*(_-d)+(v-m)*(v-m))}static getPathLength(d){let m=0;for(let _=0;_<d.length;++_)m+=d[_].pathLength;return m}static getPointAtLengthOfDataArray(d,m){let _,v=0,b=m.length;if(!b)return null;for(;v<b&&d>m[v].pathLength;)d-=m[v].pathLength,++v;if(v===b)return _=m[v-1].points.slice(-2),{x:_[0],y:_[1]};if(d<.01)return _=m[v].points.slice(0,2),{x:_[0],y:_[1]};const R=m[v],U=R.points;switch(R.command){case"L":return u.getPointOnLine(d,R.start.x,R.start.y,U[0],U[1]);case"C":return u.getPointOnCubicBezier((0,s.t2length)(d,u.getPathLength(m),L=>(0,s.getCubicArcLength)([R.start.x,U[0],U[2],U[4]],[R.start.y,U[1],U[3],U[5]],L)),R.start.x,R.start.y,U[0],U[1],U[2],U[3],U[4],U[5]);case"Q":return u.getPointOnQuadraticBezier((0,s.t2length)(d,u.getPathLength(m),L=>(0,s.getQuadraticArcLength)([R.start.x,U[0],U[2]],[R.start.y,U[1],U[3]],L)),R.start.x,R.start.y,U[0],U[1],U[2],U[3]);case"A":var C=U[0],O=U[1],I=U[2],z=U[3],F=U[4],M=U[5],D=U[6];return F+=M*d/R.pathLength,u.getPointOnEllipticalArc(C,O,I,z,F,D)}return null}static getPointOnLine(d,m,_,v,b,R,U){R=R??m,U=U??_;const C=this.getLineLength(m,_,v,b);if(C<1e-10)return{x:m,y:_};if(v===m)return{x:R,y:U+(b>_?d:-d)};const O=(b-_)/(v-m),I=Math.sqrt(d*d/(1+O*O))*(v<m?-1:1),z=O*I;if(Math.abs(U-_-O*(R-m))<1e-10)return{x:R+I,y:U+z};const F=((R-m)*(v-m)+(U-_)*(b-_))/(C*C),M=m+F*(v-m),D=_+F*(b-_),L=this.getLineLength(R,U,M,D),H=Math.sqrt(d*d-L*L),j=Math.sqrt(H*H/(1+O*O))*(v<m?-1:1),q=O*j;return{x:M+j,y:D+q}}static getPointOnCubicBezier(d,m,_,v,b,R,U,C,O){function I(H){return H*H*H}function z(H){return 3*H*H*(1-H)}function F(H){return 3*H*(1-H)*(1-H)}function M(H){return(1-H)*(1-H)*(1-H)}const D=C*I(d)+R*z(d)+v*F(d)+m*M(d),L=O*I(d)+U*z(d)+b*F(d)+_*M(d);return{x:D,y:L}}static getPointOnQuadraticBezier(d,m,_,v,b,R,U){function C(M){return M*M}function O(M){return 2*M*(1-M)}function I(M){return(1-M)*(1-M)}const z=R*C(d)+v*O(d)+m*I(d),F=U*C(d)+b*O(d)+_*I(d);return{x:z,y:F}}static getPointOnEllipticalArc(d,m,_,v,b,R){const U=Math.cos(R),C=Math.sin(R),O={x:_*Math.cos(b),y:v*Math.sin(b)};return{x:d+(O.x*U-O.y*C),y:m+(O.x*C+O.y*U)}}static parsePathData(d){if(!d)return[];let m=d;const _=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];m=m.replace(new RegExp(" ","g"),",");for(var v=0;v<_.length;v++)m=m.replace(new RegExp(_[v],"g"),"|"+_[v]);const b=m.split("|"),R=[],U=[];let C=0,O=0;const I=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let z;for(v=1;v<b.length;v++){let T=b[v],K=T.charAt(0);for(T=T.slice(1),U.length=0;z=I.exec(T);)U.push(z[0]);const k=[];for(let X=0,$=U.length;X<$;X++){if(U[X]==="00"){k.push(0,0);continue}const at=parseFloat(U[X]);isNaN(at)?k.push(0):k.push(at)}for(;k.length>0&&!isNaN(k[0]);){let X="",$=[];const at=C,dt=O;var F,M,D,L,H,j,q,x,w,V;switch(K){case"l":C+=k.shift(),O+=k.shift(),X="L",$.push(C,O);break;case"L":C=k.shift(),O=k.shift(),$.push(C,O);break;case"m":var G=k.shift(),Y=k.shift();if(C+=G,O+=Y,X="M",R.length>2&&R[R.length-1].command==="z"){for(let Q=R.length-2;Q>=0;Q--)if(R[Q].command==="M"){C=R[Q].points[0]+G,O=R[Q].points[1]+Y;break}}$.push(C,O),K="l";break;case"M":C=k.shift(),O=k.shift(),X="M",$.push(C,O),K="L";break;case"h":C+=k.shift(),X="L",$.push(C,O);break;case"H":C=k.shift(),X="L",$.push(C,O);break;case"v":O+=k.shift(),X="L",$.push(C,O);break;case"V":O=k.shift(),X="L",$.push(C,O);break;case"C":$.push(k.shift(),k.shift(),k.shift(),k.shift()),C=k.shift(),O=k.shift(),$.push(C,O);break;case"c":$.push(C+k.shift(),O+k.shift(),C+k.shift(),O+k.shift()),C+=k.shift(),O+=k.shift(),X="C",$.push(C,O);break;case"S":M=C,D=O,F=R[R.length-1],F.command==="C"&&(M=C+(C-F.points[2]),D=O+(O-F.points[3])),$.push(M,D,k.shift(),k.shift()),C=k.shift(),O=k.shift(),X="C",$.push(C,O);break;case"s":M=C,D=O,F=R[R.length-1],F.command==="C"&&(M=C+(C-F.points[2]),D=O+(O-F.points[3])),$.push(M,D,C+k.shift(),O+k.shift()),C+=k.shift(),O+=k.shift(),X="C",$.push(C,O);break;case"Q":$.push(k.shift(),k.shift()),C=k.shift(),O=k.shift(),$.push(C,O);break;case"q":$.push(C+k.shift(),O+k.shift()),C+=k.shift(),O+=k.shift(),X="Q",$.push(C,O);break;case"T":M=C,D=O,F=R[R.length-1],F.command==="Q"&&(M=C+(C-F.points[0]),D=O+(O-F.points[1])),C=k.shift(),O=k.shift(),X="Q",$.push(M,D,C,O);break;case"t":M=C,D=O,F=R[R.length-1],F.command==="Q"&&(M=C+(C-F.points[0]),D=O+(O-F.points[1])),C+=k.shift(),O+=k.shift(),X="Q",$.push(M,D,C,O);break;case"A":L=k.shift(),H=k.shift(),j=k.shift(),q=k.shift(),x=k.shift(),w=C,V=O,C=k.shift(),O=k.shift(),X="A",$=this.convertEndpointToCenterParameterization(w,V,C,O,q,x,L,H,j);break;case"a":L=k.shift(),H=k.shift(),j=k.shift(),q=k.shift(),x=k.shift(),w=C,V=O,C+=k.shift(),O+=k.shift(),X="A",$=this.convertEndpointToCenterParameterization(w,V,C,O,q,x,L,H,j);break}R.push({command:X||K,points:$,start:{x:at,y:dt},pathLength:this.calcLength(at,dt,X||K,$)})}(K==="z"||K==="Z")&&R.push({command:"z",points:[],start:void 0,pathLength:0})}return R}static calcLength(d,m,_,v){let b,R,U,C;const O=u;switch(_){case"L":return O.getLineLength(d,m,v[0],v[1]);case"C":return(0,s.getCubicArcLength)([d,v[0],v[2],v[4]],[m,v[1],v[3],v[5]],1);case"Q":return(0,s.getQuadraticArcLength)([d,v[0],v[2]],[m,v[1],v[3]],1);case"A":b=0;var I=v[4],z=v[5],F=v[4]+z,M=Math.PI/180;if(Math.abs(I-F)<M&&(M=Math.abs(I-F)),R=O.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],I,0),z<0)for(C=I-M;C>F;C-=M)U=O.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],C,0),b+=O.getLineLength(R.x,R.y,U.x,U.y),R=U;else for(C=I+M;C<F;C+=M)U=O.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],C,0),b+=O.getLineLength(R.x,R.y,U.x,U.y),R=U;return U=O.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],F,0),b+=O.getLineLength(R.x,R.y,U.x,U.y),b}return 0}static convertEndpointToCenterParameterization(d,m,_,v,b,R,U,C,O){const I=O*(Math.PI/180),z=Math.cos(I)*(d-_)/2+Math.sin(I)*(m-v)/2,F=-1*Math.sin(I)*(d-_)/2+Math.cos(I)*(m-v)/2,M=z*z/(U*U)+F*F/(C*C);M>1&&(U*=Math.sqrt(M),C*=Math.sqrt(M));let D=Math.sqrt((U*U*(C*C)-U*U*(F*F)-C*C*(z*z))/(U*U*(F*F)+C*C*(z*z)));b===R&&(D*=-1),isNaN(D)&&(D=0);const L=D*U*F/C,H=D*-C*z/U,j=(d+_)/2+Math.cos(I)*L-Math.sin(I)*H,q=(m+v)/2+Math.sin(I)*L+Math.cos(I)*H,x=function(k){return Math.sqrt(k[0]*k[0]+k[1]*k[1])},w=function(k,X){return(k[0]*X[0]+k[1]*X[1])/(x(k)*x(X))},V=function(k,X){return(k[0]*X[1]<k[1]*X[0]?-1:1)*Math.acos(w(k,X))},G=V([1,0],[(z-L)/U,(F-H)/C]),Y=[(z-L)/U,(F-H)/C],T=[(-1*z-L)/U,(-1*F-H)/C];let K=V(Y,T);return w(Y,T)<=-1&&(K=Math.PI),w(Y,T)>=1&&(K=0),R===0&&K>0&&(K=K-2*Math.PI),R===1&&K<0&&(K=K+2*Math.PI),[j,q,U,C,G,K,I,R]}}return Sd.Path=u,u.prototype.className="Path",u.prototype._attrsAffectingSize=["data"],(0,n._registerNode)(u),a.Factory.addGetterSetter(u,"data"),Sd}var Q_;function j5(){if(Q_)return vd;Q_=1,Object.defineProperty(vd,"__esModule",{value:!0}),vd.Arrow=void 0;const a=be(),t=E4(),n=Re(),s=_e(),u=P1();let c=class extends t.Line{_sceneFunc(m){super._sceneFunc(m);const _=Math.PI*2,v=this.points();let b=v;const R=this.tension()!==0&&v.length>4;R&&(b=this.getTensionPoints());const U=this.pointerLength(),C=v.length;let O,I;if(R){const M=[b[b.length-4],b[b.length-3],b[b.length-2],b[b.length-1],v[C-2],v[C-1]],D=u.Path.calcLength(b[b.length-4],b[b.length-3],"C",M),L=u.Path.getPointOnQuadraticBezier(Math.min(1,1-U/D),M[0],M[1],M[2],M[3],M[4],M[5]);O=v[C-2]-L.x,I=v[C-1]-L.y}else O=v[C-2]-v[C-4],I=v[C-1]-v[C-3];const z=(Math.atan2(I,O)+_)%_,F=this.pointerWidth();this.pointerAtEnding()&&(m.save(),m.beginPath(),m.translate(v[C-2],v[C-1]),m.rotate(z),m.moveTo(0,0),m.lineTo(-U,F/2),m.lineTo(-U,-F/2),m.closePath(),m.restore(),this.__fillStroke(m)),this.pointerAtBeginning()&&(m.save(),m.beginPath(),m.translate(v[0],v[1]),R?(O=(b[0]+b[2])/2-v[0],I=(b[1]+b[3])/2-v[1]):(O=v[2]-v[0],I=v[3]-v[1]),m.rotate((Math.atan2(-I,-O)+_)%_),m.moveTo(0,0),m.lineTo(-U,F/2),m.lineTo(-U,-F/2),m.closePath(),m.restore(),this.__fillStroke(m))}__fillStroke(m){const _=this.dashEnabled();_&&(this.attrs.dashEnabled=!1,m.setLineDash([])),m.fillStrokeShape(this),_&&(this.attrs.dashEnabled=!0)}getSelfRect(){const m=super.getSelfRect(),_=this.pointerWidth()/2;return{x:m.x,y:m.y-_,width:m.width,height:m.height+_*2}}};return vd.Arrow=c,c.prototype.className="Arrow",(0,s._registerNode)(c),a.Factory.addGetterSetter(c,"pointerLength",10,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(c,"pointerWidth",10,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(c,"pointerAtBeginning",!1),a.Factory.addGetterSetter(c,"pointerAtEnding",!0),vd}var Td={},X_;function F5(){if(X_)return Td;X_=1,Object.defineProperty(Td,"__esModule",{value:!0}),Td.Circle=void 0;const a=be(),t=Ni(),n=Re(),s=_e();let u=class extends t.Shape{_sceneFunc(d){d.beginPath(),d.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(d){this.radius()!==d/2&&this.radius(d/2)}setHeight(d){this.radius()!==d/2&&this.radius(d/2)}};return Td.Circle=u,u.prototype._centroid=!0,u.prototype.className="Circle",u.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(u),a.Factory.addGetterSetter(u,"radius",0,(0,n.getNumberValidator)()),Td}var bd={},Z_;function K5(){if(Z_)return bd;Z_=1,Object.defineProperty(bd,"__esModule",{value:!0}),bd.Ellipse=void 0;const a=be(),t=Ni(),n=Re(),s=_e();let u=class extends t.Shape{_sceneFunc(d){const m=this.radiusX(),_=this.radiusY();d.beginPath(),d.save(),m!==_&&d.scale(1,_/m),d.arc(0,0,m,0,Math.PI*2,!1),d.restore(),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(d){this.radiusX(d/2)}setHeight(d){this.radiusY(d/2)}};return bd.Ellipse=u,u.prototype.className="Ellipse",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,s._registerNode)(u),a.Factory.addComponentsGetterSetter(u,"radius",["x","y"]),a.Factory.addGetterSetter(u,"radiusX",0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(u,"radiusY",0,(0,n.getNumberValidator)()),bd}var Ad={},W_;function Y5(){if(W_)return Ad;W_=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.Image=void 0;const a=Yn(),t=be(),n=Ni(),s=_e(),u=Re();class c extends n.Shape{constructor(m){super(m),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const m=this.image();m&&m.complete||m&&m.readyState===4||m&&m.addEventListener&&m.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const m=!!this.cornerRadius(),_=this.hasShadow();return m&&_?!0:super._useBufferCanvas(!0)}_sceneFunc(m){const _=this.getWidth(),v=this.getHeight(),b=this.cornerRadius(),R=this.attrs.image;let U;if(R){const C=this.attrs.cropWidth,O=this.attrs.cropHeight;C&&O?U=[R,this.cropX(),this.cropY(),C,O,0,0,_,v]:U=[R,0,0,_,v]}(this.hasFill()||this.hasStroke()||b)&&(m.beginPath(),b?a.Util.drawRoundedRectPath(m,_,v,b):m.rect(0,0,_,v),m.closePath(),m.fillStrokeShape(this)),R&&(b&&m.clip(),m.drawImage.apply(m,U))}_hitFunc(m){const _=this.width(),v=this.height(),b=this.cornerRadius();m.beginPath(),b?a.Util.drawRoundedRectPath(m,_,v,b):m.rect(0,0,_,v),m.closePath(),m.fillStrokeShape(this)}getWidth(){var m,_;return(m=this.attrs.width)!==null&&m!==void 0?m:(_=this.image())===null||_===void 0?void 0:_.width}getHeight(){var m,_;return(m=this.attrs.height)!==null&&m!==void 0?m:(_=this.image())===null||_===void 0?void 0:_.height}static fromURL(m,_,v=null){const b=a.Util.createImageElement();b.onload=function(){const R=new c({image:b});_(R)},b.onerror=v,b.crossOrigin="Anonymous",b.src=m}}return Ad.Image=c,c.prototype.className="Image",(0,s._registerNode)(c),t.Factory.addGetterSetter(c,"cornerRadius",0,(0,u.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(c,"image"),t.Factory.addComponentsGetterSetter(c,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(c,"cropX",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropY",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropWidth",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropHeight",0,(0,u.getNumberValidator)()),Ad}var Mc={},J_;function Q5(){if(J_)return Mc;J_=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.Tag=Mc.Label=void 0;const a=be(),t=Ni(),n=I1(),s=Re(),u=_e(),c=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],d="Change.konva",m="none",_="up",v="right",b="down",R="left",U=c.length;let C=class extends n.Group{constructor(z){super(z),this.on("add.konva",function(F){this._addListeners(F.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(z){let F=this,M;const D=function(){F._sync()};for(M=0;M<U;M++)z.on(c[M]+d,D)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let z=this.getText(),F=this.getTag(),M,D,L,H,j,q,x;if(z&&F){switch(M=z.width(),D=z.height(),L=F.pointerDirection(),H=F.pointerWidth(),x=F.pointerHeight(),j=0,q=0,L){case _:j=M/2,q=-1*x;break;case v:j=M+H,q=D/2;break;case b:j=M/2,q=D+x;break;case R:j=-1*H,q=D/2;break}F.setAttrs({x:-1*j,y:-1*q,width:M,height:D}),z.setAttrs({x:-1*j,y:-1*q})}}};Mc.Label=C,C.prototype.className="Label",(0,u._registerNode)(C);class O extends t.Shape{_sceneFunc(z){const F=this.width(),M=this.height(),D=this.pointerDirection(),L=this.pointerWidth(),H=this.pointerHeight(),j=this.cornerRadius();let q=0,x=0,w=0,V=0;typeof j=="number"?q=x=w=V=Math.min(j,F/2,M/2):(q=Math.min(j[0]||0,F/2,M/2),x=Math.min(j[1]||0,F/2,M/2),V=Math.min(j[2]||0,F/2,M/2),w=Math.min(j[3]||0,F/2,M/2)),z.beginPath(),z.moveTo(q,0),D===_&&(z.lineTo((F-L)/2,0),z.lineTo(F/2,-1*H),z.lineTo((F+L)/2,0)),z.lineTo(F-x,0),z.arc(F-x,x,x,Math.PI*3/2,0,!1),D===v&&(z.lineTo(F,(M-H)/2),z.lineTo(F+L,M/2),z.lineTo(F,(M+H)/2)),z.lineTo(F,M-V),z.arc(F-V,M-V,V,0,Math.PI/2,!1),D===b&&(z.lineTo((F+L)/2,M),z.lineTo(F/2,M+H),z.lineTo((F-L)/2,M)),z.lineTo(w,M),z.arc(w,M-w,w,Math.PI/2,Math.PI,!1),D===R&&(z.lineTo(0,(M+H)/2),z.lineTo(-1*L,M/2),z.lineTo(0,(M-H)/2)),z.lineTo(0,q),z.arc(q,q,q,Math.PI,Math.PI*3/2,!1),z.closePath(),z.fillStrokeShape(this)}getSelfRect(){let z=0,F=0,M=this.pointerWidth(),D=this.pointerHeight(),L=this.pointerDirection(),H=this.width(),j=this.height();return L===_?(F-=D,j+=D):L===b?j+=D:L===R?(z-=M*1.5,H+=M):L===v&&(H+=M*1.5),{x:z,y:F,width:H,height:j}}}return Mc.Tag=O,O.prototype.className="Tag",(0,u._registerNode)(O),a.Factory.addGetterSetter(O,"pointerDirection",m),a.Factory.addGetterSetter(O,"pointerWidth",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(O,"pointerHeight",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(O,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),Mc}var Rd={},$_;function S4(){if($_)return Rd;$_=1,Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.Rect=void 0;const a=be(),t=Ni(),n=_e(),s=Yn(),u=Re();let c=class extends t.Shape{_sceneFunc(m){const _=this.cornerRadius(),v=this.width(),b=this.height();m.beginPath(),_?s.Util.drawRoundedRectPath(m,v,b,_):m.rect(0,0,v,b),m.closePath(),m.fillStrokeShape(this)}};return Rd.Rect=c,c.prototype.className="Rect",(0,n._registerNode)(c),a.Factory.addGetterSetter(c,"cornerRadius",0,(0,u.getNumberOrArrayOfNumbersValidator)(4)),Rd}var Cd={},t2;function X5(){if(t2)return Cd;t2=1,Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.RegularPolygon=void 0;const a=be(),t=Ni(),n=Re(),s=_e();let u=class extends t.Shape{_sceneFunc(d){const m=this._getPoints();d.beginPath(),d.moveTo(m[0].x,m[0].y);for(let _=1;_<m.length;_++)d.lineTo(m[_].x,m[_].y);d.closePath(),d.fillStrokeShape(this)}_getPoints(){const d=this.attrs.sides,m=this.attrs.radius||0,_=[];for(let v=0;v<d;v++)_.push({x:m*Math.sin(v*2*Math.PI/d),y:-1*m*Math.cos(v*2*Math.PI/d)});return _}getSelfRect(){const d=this._getPoints();let m=d[0].x,_=d[0].y,v=d[0].x,b=d[0].y;return d.forEach(R=>{m=Math.min(m,R.x),_=Math.max(_,R.x),v=Math.min(v,R.y),b=Math.max(b,R.y)}),{x:m,y:v,width:_-m,height:b-v}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(d){this.radius(d/2)}setHeight(d){this.radius(d/2)}};return Cd.RegularPolygon=u,u.prototype.className="RegularPolygon",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(u),a.Factory.addGetterSetter(u,"radius",0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(u,"sides",0,(0,n.getNumberValidator)()),Cd}var wd={},e2;function Z5(){if(e2)return wd;e2=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.Ring=void 0;const a=be(),t=Ni(),n=Re(),s=_e(),u=Math.PI*2;let c=class extends t.Shape{_sceneFunc(m){m.beginPath(),m.arc(0,0,this.innerRadius(),0,u,!1),m.moveTo(this.outerRadius(),0),m.arc(0,0,this.outerRadius(),u,0,!0),m.closePath(),m.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(m){this.outerRadius(m/2)}setHeight(m){this.outerRadius(m/2)}};return wd.Ring=c,c.prototype.className="Ring",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(c),a.Factory.addGetterSetter(c,"innerRadius",0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(c,"outerRadius",0,(0,n.getNumberValidator)()),wd}var Dd={},n2;function W5(){if(n2)return Dd;n2=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.Sprite=void 0;const a=be(),t=Ni(),n=L1(),s=Re(),u=_e();let c=class extends t.Shape{constructor(m){super(m),this._updated=!0,this.anim=new n.Animation(()=>{const _=this._updated;return this._updated=!1,_}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(m){const _=this.animation(),v=this.frameIndex(),b=v*4,R=this.animations()[_],U=this.frameOffsets(),C=R[b+0],O=R[b+1],I=R[b+2],z=R[b+3],F=this.image();if((this.hasFill()||this.hasStroke())&&(m.beginPath(),m.rect(0,0,I,z),m.closePath(),m.fillStrokeShape(this)),F)if(U){const M=U[_],D=v*2;m.drawImage(F,C,O,I,z,M[D+0],M[D+1],I,z)}else m.drawImage(F,C,O,I,z,0,0,I,z)}_hitFunc(m){const _=this.animation(),v=this.frameIndex(),b=v*4,R=this.animations()[_],U=this.frameOffsets(),C=R[b+2],O=R[b+3];if(m.beginPath(),U){const I=U[_],z=v*2;m.rect(I[z+0],I[z+1],C,O)}else m.rect(0,0,C,O);m.closePath(),m.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const m=this;this.interval=setInterval(function(){m._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const m=this.getLayer();this.anim.setLayers(m),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const m=this.frameIndex(),_=this.animation(),v=this.animations(),b=v[_],R=b.length/4;m<R-1?this.frameIndex(m+1):this.frameIndex(0)}};return Dd.Sprite=c,c.prototype.className="Sprite",(0,u._registerNode)(c),a.Factory.addGetterSetter(c,"animation"),a.Factory.addGetterSetter(c,"animations"),a.Factory.addGetterSetter(c,"frameOffsets"),a.Factory.addGetterSetter(c,"image"),a.Factory.addGetterSetter(c,"frameIndex",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(c,"frameRate",17,(0,s.getNumberValidator)()),a.Factory.backCompat(c,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Dd}var Nd={},i2;function J5(){if(i2)return Nd;i2=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.Star=void 0;const a=be(),t=Ni(),n=Re(),s=_e();let u=class extends t.Shape{_sceneFunc(d){const m=this.innerRadius(),_=this.outerRadius(),v=this.numPoints();d.beginPath(),d.moveTo(0,0-_);for(let b=1;b<v*2;b++){const R=b%2===0?_:m,U=R*Math.sin(b*Math.PI/v),C=-1*R*Math.cos(b*Math.PI/v);d.lineTo(U,C)}d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(d){this.outerRadius(d/2)}setHeight(d){this.outerRadius(d/2)}};return Nd.Star=u,u.prototype.className="Star",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(u),a.Factory.addGetterSetter(u,"numPoints",5,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(u,"innerRadius",0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(u,"outerRadius",0,(0,n.getNumberValidator)()),Nd}var Lh={},a2;function T4(){if(a2)return Lh;a2=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.Text=void 0,Lh.stringToArray=d;const a=Yn(),t=be(),n=Ni(),s=_e(),u=Re(),c=_e();function d(Et){return[...Et].reduce((rt,gt,Rt,Nt)=>{if(new RegExp("\\p{Emoji}","u").test(gt)){const et=Nt[Rt+1];et&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(et)?(rt.push(gt+et),Nt[Rt+1]=""):rt.push(gt)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(gt+(Nt[Rt+1]||""))?rt.push(gt+Nt[Rt+1]):Rt>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(gt)?rt[rt.length-1]+=gt:gt&&rt.push(gt);return rt},[])}const m="auto",_="center",v="inherit",b="justify",R="Change.konva",U="2d",C="-",O="left",I="text",z="Text",F="top",M="bottom",D="middle",L="normal",H="px ",j=" ",q="right",x="rtl",w="word",V="char",G="none",Y="…",T=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],K=T.length;function k(Et){return Et.split(",").map(rt=>{rt=rt.trim();const gt=rt.indexOf(" ")>=0,Rt=rt.indexOf('"')>=0||rt.indexOf("'")>=0;return gt&&!Rt&&(rt=`"${rt}"`),rt}).join(", ")}let X;function $(){return X||(X=a.Util.createCanvasElement().getContext(U),X)}function at(Et){Et.fillText(this._partialText,this._partialTextX,this._partialTextY)}function dt(Et){Et.setAttr("miterLimit",2),Et.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Q(Et){return Et=Et||{},!Et.fillLinearGradientColorStops&&!Et.fillRadialGradientColorStops&&!Et.fillPatternImage&&(Et.fill=Et.fill||"black"),Et}let it=class extends n.Shape{constructor(rt){super(Q(rt)),this._partialTextX=0,this._partialTextY=0;for(let gt=0;gt<K;gt++)this.on(T[gt]+R,this._setTextData);this._setTextData()}_sceneFunc(rt){const gt=this.textArr,Rt=gt.length;if(!this.text())return;let Nt=this.padding(),et=this.fontSize(),ct=this.lineHeight()*et,At=this.verticalAlign(),Ct=this.direction(),It=0,zt=this.align(),$t=this.getWidth(),oe=this.letterSpacing(),Yt=this.fill(),Fe=this.textDecoration(),le=Fe.indexOf("underline")!==-1,Ke=Fe.indexOf("line-through")!==-1,gi;Ct=Ct===v?rt.direction:Ct;let ke=ct/2,ui=D;if(s.Konva._fixTextRendering){const ji=this.measureSize("M");ui="alphabetic",ke=(ji.fontBoundingBoxAscent-ji.fontBoundingBoxDescent)/2+ct/2}var en=0,Qn=0;for(Ct===x&&rt.setAttr("direction",Ct),rt.setAttr("font",this._getContextFont()),rt.setAttr("textBaseline",ui),rt.setAttr("textAlign",O),At===D?It=(this.getHeight()-Rt*ct-Nt*2)/2:At===M&&(It=this.getHeight()-Rt*ct-Nt*2),rt.translate(Nt,It+Nt),gi=0;gi<Rt;gi++){var en=0,Qn=0,nn=gt[gi],Oi=nn.text,Ce=nn.width,He=nn.lastInParagraph,Xn,ga;if(rt.save(),zt===q?en+=$t-Ce-Nt*2:zt===_&&(en+=($t-Ce-Nt*2)/2),le){rt.save(),rt.beginPath();const Pn=s.Konva._fixTextRendering?Math.round(et/4):Math.round(et/2),an=en,Ae=ke+Qn+Pn;rt.moveTo(an,Ae),Xn=Oi.split(" ").length-1,ga=zt===b&&!He?$t-Nt*2:Ce,rt.lineTo(an+Math.round(ga),Ae),rt.lineWidth=et/15;const pa=this._getLinearGradient();rt.strokeStyle=pa||Yt,rt.stroke(),rt.restore()}if(Ke){rt.save(),rt.beginPath();const Pn=s.Konva._fixTextRendering?-Math.round(et/4):0;rt.moveTo(en,ke+Qn+Pn),Xn=Oi.split(" ").length-1,ga=zt===b&&!He?$t-Nt*2:Ce,rt.lineTo(en+Math.round(ga),ke+Qn+Pn),rt.lineWidth=et/15;const an=this._getLinearGradient();rt.strokeStyle=an||Yt,rt.stroke(),rt.restore()}if(Ct!==x&&(oe!==0||zt===b)){Xn=Oi.split(" ").length-1;const Pn=d(Oi);for(let an=0;an<Pn.length;an++){const Ae=Pn[an];Ae===" "&&!He&&zt===b&&(en+=($t-Nt*2-Ce)/Xn),this._partialTextX=en,this._partialTextY=ke+Qn,this._partialText=Ae,rt.fillStrokeShape(this),en+=this.measureSize(Ae).width+oe}}else oe!==0&&rt.setAttr("letterSpacing",`${oe}px`),this._partialTextX=en,this._partialTextY=ke+Qn,this._partialText=Oi,rt.fillStrokeShape(this);rt.restore(),Rt>1&&(ke+=ct)}}_hitFunc(rt){const gt=this.getWidth(),Rt=this.getHeight();rt.beginPath(),rt.rect(0,0,gt,Rt),rt.closePath(),rt.fillStrokeShape(this)}setText(rt){const gt=a.Util._isString(rt)?rt:rt==null?"":rt+"";return this._setAttr(I,gt),this}getWidth(){return this.attrs.width===m||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===m||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return a.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(rt){var gt,Rt,Nt,et,ct,At,Ct,It,zt,$t,oe;let Yt=$(),Fe=this.fontSize(),le;Yt.save(),Yt.font=this._getContextFont(),le=Yt.measureText(rt),Yt.restore();const Ke=Fe/100;return{actualBoundingBoxAscent:(gt=le.actualBoundingBoxAscent)!==null&&gt!==void 0?gt:71.58203125*Ke,actualBoundingBoxDescent:(Rt=le.actualBoundingBoxDescent)!==null&&Rt!==void 0?Rt:0,actualBoundingBoxLeft:(Nt=le.actualBoundingBoxLeft)!==null&&Nt!==void 0?Nt:-7.421875*Ke,actualBoundingBoxRight:(et=le.actualBoundingBoxRight)!==null&&et!==void 0?et:75.732421875*Ke,alphabeticBaseline:(ct=le.alphabeticBaseline)!==null&&ct!==void 0?ct:0,emHeightAscent:(At=le.emHeightAscent)!==null&&At!==void 0?At:100*Ke,emHeightDescent:(Ct=le.emHeightDescent)!==null&&Ct!==void 0?Ct:-20*Ke,fontBoundingBoxAscent:(It=le.fontBoundingBoxAscent)!==null&&It!==void 0?It:91*Ke,fontBoundingBoxDescent:(zt=le.fontBoundingBoxDescent)!==null&&zt!==void 0?zt:21*Ke,hangingBaseline:($t=le.hangingBaseline)!==null&&$t!==void 0?$t:72.80000305175781*Ke,ideographicBaseline:(oe=le.ideographicBaseline)!==null&&oe!==void 0?oe:-21*Ke,width:le.width,height:Fe}}_getContextFont(){return this.fontStyle()+j+this.fontVariant()+j+(this.fontSize()+H)+k(this.fontFamily())}_addTextLine(rt){this.align()===b&&(rt=rt.trim());const Rt=this._getTextWidth(rt);return this.textArr.push({text:rt,width:Rt,lastInParagraph:!1})}_getTextWidth(rt){const gt=this.letterSpacing(),Rt=rt.length;return $().measureText(rt).width+gt*Rt}_setTextData(){let rt=this.text().split(`
`),gt=+this.fontSize(),Rt=0,Nt=this.lineHeight()*gt,et=this.attrs.width,ct=this.attrs.height,At=et!==m&&et!==void 0,Ct=ct!==m&&ct!==void 0,It=this.padding(),zt=et-It*2,$t=ct-It*2,oe=0,Yt=this.wrap(),Fe=Yt!==G,le=Yt!==V&&Fe,Ke=this.ellipsis();this.textArr=[],$().font=this._getContextFont();const gi=Ke?this._getTextWidth(Y):0;for(let ke=0,ui=rt.length;ke<ui;++ke){let en=rt[ke],Qn=this._getTextWidth(en);if(At&&Qn>zt)for(;en.length>0;){let nn=0,Oi=d(en).length,Ce="",He=0;for(;nn<Oi;){const Xn=nn+Oi>>>1,ga=d(en),ji=ga.slice(0,Xn+1).join(""),ma=this._getTextWidth(ji)+gi;ma<=zt?(nn=Xn+1,Ce=ji,He=ma):Oi=Xn}if(Ce){if(le){const ji=d(en),ma=d(Ce),Pn=ji[ma.length],an=Pn===j||Pn===C;let Ae;if(an&&He<=zt)Ae=ma.length;else{const pa=ma.lastIndexOf(j),Fi=ma.lastIndexOf(C);Ae=Math.max(pa,Fi)+1}Ae>0&&(nn=Ae,Ce=ji.slice(0,nn).join(""),He=this._getTextWidth(Ce))}if(Ce=Ce.trimRight(),this._addTextLine(Ce),Rt=Math.max(Rt,He),oe+=Nt,this._shouldHandleEllipsis(oe)){this._tryToAddEllipsisToLastLine();break}if(en=d(en).slice(nn).join("").trimLeft(),en.length>0&&(Qn=this._getTextWidth(en),Qn<=zt)){this._addTextLine(en),oe+=Nt,Rt=Math.max(Rt,Qn);break}}else break}else this._addTextLine(en),oe+=Nt,Rt=Math.max(Rt,Qn),this._shouldHandleEllipsis(oe)&&ke<ui-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Ct&&oe+Nt>$t)break}this.textHeight=gt,this.textWidth=Rt}_shouldHandleEllipsis(rt){const gt=+this.fontSize(),Rt=this.lineHeight()*gt,Nt=this.attrs.height,et=Nt!==m&&Nt!==void 0,ct=this.padding(),At=Nt-ct*2;return!(this.wrap()!==G)||et&&rt+Rt>At}_tryToAddEllipsisToLastLine(){const rt=this.attrs.width,gt=rt!==m&&rt!==void 0,Rt=this.padding(),Nt=rt-Rt*2,et=this.ellipsis(),ct=this.textArr[this.textArr.length-1];!ct||!et||(gt&&(this._getTextWidth(ct.text+Y)<Nt||(ct.text=ct.text.slice(0,ct.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(ct.text+Y))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const rt=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,gt=this.hasShadow();return rt&&gt?!0:super._useBufferCanvas()}};return Lh.Text=it,it.prototype._fillFunc=at,it.prototype._strokeFunc=dt,it.prototype.className=z,it.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,c._registerNode)(it),t.Factory.overWriteSetter(it,"width",(0,u.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(it,"height",(0,u.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(it,"direction",v),t.Factory.addGetterSetter(it,"fontFamily","Arial"),t.Factory.addGetterSetter(it,"fontSize",12,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(it,"fontStyle",L),t.Factory.addGetterSetter(it,"fontVariant",L),t.Factory.addGetterSetter(it,"padding",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(it,"align",O),t.Factory.addGetterSetter(it,"verticalAlign",F),t.Factory.addGetterSetter(it,"lineHeight",1,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(it,"wrap",w),t.Factory.addGetterSetter(it,"ellipsis",!1,(0,u.getBooleanValidator)()),t.Factory.addGetterSetter(it,"letterSpacing",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(it,"text","",(0,u.getStringValidator)()),t.Factory.addGetterSetter(it,"textDecoration",""),Lh}var Od={},r2;function $5(){if(r2)return Od;r2=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.TextPath=void 0;const a=Yn(),t=be(),n=Ni(),s=P1(),u=T4(),c=Re(),d=_e(),m="",_="normal";function v(U){U.fillText(this.partialText,0,0)}function b(U){U.strokeText(this.partialText,0,0)}let R=class extends n.Shape{constructor(C){super(C),this.dummyCanvas=a.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return s.Path.getPathLength(this.dataArray)}_getPointAtLength(C){if(!this.attrs.data)return null;const O=this.pathLength;return C-1>O?null:s.Path.getPointAtLengthOfDataArray(C,this.dataArray)}_readDataAttribute(){this.dataArray=s.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(C){C.setAttr("font",this._getContextFont()),C.setAttr("textBaseline",this.textBaseline()),C.setAttr("textAlign","left"),C.save();const O=this.textDecoration(),I=this.fill(),z=this.fontSize(),F=this.glyphInfo;O==="underline"&&C.beginPath();for(let M=0;M<F.length;M++){C.save();const D=F[M].p0;C.translate(D.x,D.y),C.rotate(F[M].rotation),this.partialText=F[M].text,C.fillStrokeShape(this),O==="underline"&&(M===0&&C.moveTo(0,z/2+1),C.lineTo(z,z/2+1)),C.restore()}O==="underline"&&(C.strokeStyle=I,C.lineWidth=z/20,C.stroke()),C.restore()}_hitFunc(C){C.beginPath();const O=this.glyphInfo;if(O.length>=1){const I=O[0].p0;C.moveTo(I.x,I.y)}for(let I=0;I<O.length;I++){const z=O[I].p1;C.lineTo(z.x,z.y)}C.setAttr("lineWidth",this.fontSize()),C.setAttr("strokeStyle",this.colorKey),C.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return a.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(C){return u.Text.prototype.setText.call(this,C)}_getContextFont(){return u.Text.prototype._getContextFont.call(this)}_getTextSize(C){const I=this.dummyCanvas.getContext("2d");I.save(),I.font=this._getContextFont();const z=I.measureText(C);return I.restore(),{width:z.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:C,height:O}=this._getTextSize(this.attrs.text);if(this.textWidth=C,this.textHeight=O,this.glyphInfo=[],!this.attrs.data)return null;const I=this.letterSpacing(),z=this.align(),F=this.kerningFunc(),M=Math.max(this.textWidth+((this.attrs.text||"").length-1)*I,0);let D=0;z==="center"&&(D=Math.max(0,this.pathLength/2-M/2)),z==="right"&&(D=Math.max(0,this.pathLength-M));const L=(0,u.stringToArray)(this.text());let H=D;for(let j=0;j<L.length;j++){const q=this._getPointAtLength(H);if(!q)return;let x=this._getTextSize(L[j]).width+I;if(L[j]===" "&&z==="justify"){const K=this.text().split(" ").length-1;x+=(this.pathLength-M)/K}const w=this._getPointAtLength(H+x);if(!w)return;const V=s.Path.getLineLength(q.x,q.y,w.x,w.y);let G=0;if(F)try{G=F(L[j-1],L[j])*this.fontSize()}catch{G=0}q.x+=G,w.x+=G,this.textWidth+=G;const Y=s.Path.getPointOnLine(G+V/2,q.x,q.y,w.x,w.y),T=Math.atan2(w.y-q.y,w.x-q.x);this.glyphInfo.push({transposeX:Y.x,transposeY:Y.y,text:L[j],rotation:T,p0:q,p1:w}),H+=x}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const C=[];this.glyphInfo.forEach(function(H){C.push(H.p0.x),C.push(H.p0.y),C.push(H.p1.x),C.push(H.p1.y)});let O=C[0]||0,I=C[0]||0,z=C[1]||0,F=C[1]||0,M,D;for(let H=0;H<C.length/2;H++)M=C[H*2],D=C[H*2+1],O=Math.min(O,M),I=Math.max(I,M),z=Math.min(z,D),F=Math.max(F,D);const L=this.fontSize();return{x:O-L/2,y:z-L/2,width:I-O+L,height:F-z+L}}destroy(){return a.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Od.TextPath=R,R.prototype._fillFunc=v,R.prototype._strokeFunc=b,R.prototype._fillFuncHit=v,R.prototype._strokeFuncHit=b,R.prototype.className="TextPath",R.prototype._attrsAffectingSize=["text","fontSize","data"],(0,d._registerNode)(R),t.Factory.addGetterSetter(R,"data"),t.Factory.addGetterSetter(R,"fontFamily","Arial"),t.Factory.addGetterSetter(R,"fontSize",12,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(R,"fontStyle",_),t.Factory.addGetterSetter(R,"align","left"),t.Factory.addGetterSetter(R,"letterSpacing",0,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(R,"textBaseline","middle"),t.Factory.addGetterSetter(R,"fontVariant",_),t.Factory.addGetterSetter(R,"text",m),t.Factory.addGetterSetter(R,"textDecoration",""),t.Factory.addGetterSetter(R,"kerningFunc",void 0),Od}var Md={},s2;function tS(){if(s2)return Md;s2=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.Transformer=void 0;const a=Yn(),t=be(),n=ei(),s=Ni(),u=S4(),c=I1(),d=_e(),m=Re(),_=_e(),v="tr-konva",b=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(x=>x+`.${v}`).join(" "),R="nodesRect",U=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],C={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},O="ontouchstart"in d.Konva._global;function I(x,w,V){if(x==="rotater")return V;w+=a.Util.degToRad(C[x]||0);const G=(a.Util.radToDeg(w)%360+360)%360;return a.Util._inRange(G,315+22.5,360)||a.Util._inRange(G,0,22.5)?"ns-resize":a.Util._inRange(G,45-22.5,45+22.5)?"nesw-resize":a.Util._inRange(G,90-22.5,90+22.5)?"ew-resize":a.Util._inRange(G,135-22.5,135+22.5)?"nwse-resize":a.Util._inRange(G,180-22.5,180+22.5)?"ns-resize":a.Util._inRange(G,225-22.5,225+22.5)?"nesw-resize":a.Util._inRange(G,270-22.5,270+22.5)?"ew-resize":a.Util._inRange(G,315-22.5,315+22.5)?"nwse-resize":(a.Util.error("Transformer has unknown angle for cursor detection: "+G),"pointer")}const z=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function F(x){return{x:x.x+x.width/2*Math.cos(x.rotation)+x.height/2*Math.sin(-x.rotation),y:x.y+x.height/2*Math.cos(x.rotation)+x.width/2*Math.sin(x.rotation)}}function M(x,w,V){const G=V.x+(x.x-V.x)*Math.cos(w)-(x.y-V.y)*Math.sin(w),Y=V.y+(x.x-V.x)*Math.sin(w)+(x.y-V.y)*Math.cos(w);return{...x,rotation:x.rotation+w,x:G,y:Y}}function D(x,w){const V=F(x);return M(x,w,V)}function L(x,w,V){let G=w;for(let Y=0;Y<x.length;Y++){const T=d.Konva.getAngle(x[Y]),K=Math.abs(T-w)%(Math.PI*2);Math.min(K,Math.PI*2-K)<V&&(G=T)}return G}let H=0,j=class extends c.Group{constructor(w){super(w),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(b,this.update),this.getNode()&&this.update()}attachTo(w){return this.setNode(w),this}setNode(w){return a.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([w])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return v+this._id}setNodes(w=[]){this._nodes&&this._nodes.length&&this.detach();const V=w.filter(Y=>Y.isAncestorOf(this)?(a.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=w=V,w.length===1&&this.useSingleNodeRotation()?this.rotation(w[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(Y=>{const T=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},K=Y._attrsAffectingSize.map(k=>k+"Change."+this._getEventNamespace()).join(" ");Y.on(K,T),Y.on(U.map(k=>k+`.${this._getEventNamespace()}`).join(" "),T),Y.on(`absoluteTransformChange.${this._getEventNamespace()}`,T),this._proxyDrag(Y)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(w){let V;w.on(`dragstart.${this._getEventNamespace()}`,G=>{V=w.getAbsolutePosition(),!this.isDragging()&&w!==this.findOne(".back")&&this.startDrag(G,!1)}),w.on(`dragmove.${this._getEventNamespace()}`,G=>{if(!V)return;const Y=w.getAbsolutePosition(),T=Y.x-V.x,K=Y.y-V.y;this.nodes().forEach(k=>{if(k===w||k.isDragging())return;const X=k.getAbsolutePosition();k.setAbsolutePosition({x:X.x+T,y:X.y+K}),k.startDrag(G)}),V=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(w=>{w.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(R),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(R,this.__getNodeRect)}__getNodeShape(w,V=this.rotation(),G){const Y=w.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),T=w.getAbsoluteScale(G),K=w.getAbsolutePosition(G),k=Y.x*T.x-w.offsetX()*T.x,X=Y.y*T.y-w.offsetY()*T.y,$=(d.Konva.getAngle(w.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),at={x:K.x+k*Math.cos($)+X*Math.sin(-$),y:K.y+X*Math.cos($)+k*Math.sin($),width:Y.width*T.x,height:Y.height*T.y,rotation:$};return M(at,-d.Konva.getAngle(V),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const V=[];this.nodes().map($=>{const at=$.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),dt=[{x:at.x,y:at.y},{x:at.x+at.width,y:at.y},{x:at.x+at.width,y:at.y+at.height},{x:at.x,y:at.y+at.height}],Q=$.getAbsoluteTransform();dt.forEach(function(it){const Et=Q.point(it);V.push(Et)})});const G=new a.Transform;G.rotate(-d.Konva.getAngle(this.rotation()));let Y=1/0,T=1/0,K=-1/0,k=-1/0;V.forEach(function($){const at=G.point($);Y===void 0&&(Y=K=at.x,T=k=at.y),Y=Math.min(Y,at.x),T=Math.min(T,at.y),K=Math.max(K,at.x),k=Math.max(k,at.y)}),G.invert();const X=G.point({x:Y,y:T});return{x:X.x,y:X.y,width:K-Y,height:k-T,rotation:d.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),z.forEach(w=>{this._createAnchor(w)}),this._createAnchor("rotater")}_createAnchor(w){const V=new u.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:w+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:O?10:"auto"}),G=this;V.on("mousedown touchstart",function(Y){G._handleMouseDown(Y)}),V.on("dragstart",Y=>{V.stopDrag(),Y.cancelBubble=!0}),V.on("dragend",Y=>{Y.cancelBubble=!0}),V.on("mouseenter",()=>{const Y=d.Konva.getAngle(this.rotation()),T=this.rotateAnchorCursor(),K=I(w,Y,T);V.getStage().content&&(V.getStage().content.style.cursor=K),this._cursorChange=!0}),V.on("mouseout",()=>{V.getStage().content&&(V.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(V)}_createBack(){const w=new s.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(V,G){const Y=G.getParent(),T=Y.padding();V.beginPath(),V.rect(-T,-T,G.width()+T*2,G.height()+T*2),V.moveTo(G.width()/2,-T),Y.rotateEnabled()&&Y.rotateLineVisible()&&V.lineTo(G.width()/2,-Y.rotateAnchorOffset()*a.Util._sign(G.height())-T),V.fillStrokeShape(G)},hitFunc:(V,G)=>{if(!this.shouldOverdrawWholeArea())return;const Y=this.padding();V.beginPath(),V.rect(-Y,-Y,G.width()+Y*2,G.height()+Y*2),V.fillStrokeShape(G)}});this.add(w),this._proxyDrag(w),w.on("dragstart",V=>{V.cancelBubble=!0}),w.on("dragmove",V=>{V.cancelBubble=!0}),w.on("dragend",V=>{V.cancelBubble=!0}),this.on("dragmove",V=>{this.update()})}_handleMouseDown(w){if(this._transforming)return;this._movingAnchorName=w.target.name().split(" ")[0];const V=this._getNodeRect(),G=V.width,Y=V.height,T=Math.sqrt(Math.pow(G,2)+Math.pow(Y,2));this.sin=Math.abs(Y/T),this.cos=Math.abs(G/T),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const K=w.target.getAbsolutePosition(),k=w.target.getStage().getPointerPosition();this._anchorDragOffset={x:k.x-K.x,y:k.y-K.y},H++,this._fire("transformstart",{evt:w.evt,target:this.getNode()}),this._nodes.forEach(X=>{X._fire("transformstart",{evt:w.evt,target:X})})}_handleMouseMove(w){let V,G,Y;const T=this.findOne("."+this._movingAnchorName),K=T.getStage();K.setPointersPositions(w);const k=K.getPointerPosition();let X={x:k.x-this._anchorDragOffset.x,y:k.y-this._anchorDragOffset.y};const $=T.getAbsolutePosition();this.anchorDragBoundFunc()&&(X=this.anchorDragBoundFunc()($,X,w)),T.setAbsolutePosition(X);const at=T.getAbsolutePosition();if($.x===at.x&&$.y===at.y)return;if(this._movingAnchorName==="rotater"){const At=this._getNodeRect();V=T.x()-At.width/2,G=-T.y()+At.height/2;let Ct=Math.atan2(-G,V)+Math.PI/2;At.height<0&&(Ct-=Math.PI);const zt=d.Konva.getAngle(this.rotation())+Ct,$t=d.Konva.getAngle(this.rotationSnapTolerance()),Yt=L(this.rotationSnaps(),zt,$t)-At.rotation,Fe=D(At,Yt);this._fitNodesInto(Fe,w);return}const dt=this.shiftBehavior();let Q;dt==="inverted"?Q=this.keepRatio()&&!w.shiftKey:dt==="none"?Q=this.keepRatio():Q=this.keepRatio()||w.shiftKey;var Rt=this.centeredScaling()||w.altKey;if(this._movingAnchorName==="top-left"){if(Q){var it=Rt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};Y=Math.sqrt(Math.pow(it.x-T.x(),2)+Math.pow(it.y-T.y(),2));var Et=this.findOne(".top-left").x()>it.x?-1:1,rt=this.findOne(".top-left").y()>it.y?-1:1;V=Y*this.cos*Et,G=Y*this.sin*rt,this.findOne(".top-left").x(it.x-V),this.findOne(".top-left").y(it.y-G)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(T.y());else if(this._movingAnchorName==="top-right"){if(Q){var it=Rt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};Y=Math.sqrt(Math.pow(T.x()-it.x,2)+Math.pow(it.y-T.y(),2));var Et=this.findOne(".top-right").x()<it.x?-1:1,rt=this.findOne(".top-right").y()>it.y?-1:1;V=Y*this.cos*Et,G=Y*this.sin*rt,this.findOne(".top-right").x(it.x+V),this.findOne(".top-right").y(it.y-G)}var gt=T.position();this.findOne(".top-left").y(gt.y),this.findOne(".bottom-right").x(gt.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(T.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(T.x());else if(this._movingAnchorName==="bottom-left"){if(Q){var it=Rt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};Y=Math.sqrt(Math.pow(it.x-T.x(),2)+Math.pow(T.y()-it.y,2));var Et=it.x<T.x()?-1:1,rt=T.y()<it.y?-1:1;V=Y*this.cos*Et,G=Y*this.sin*rt,T.x(it.x-V),T.y(it.y+G)}gt=T.position(),this.findOne(".top-left").x(gt.x),this.findOne(".bottom-right").y(gt.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(T.y());else if(this._movingAnchorName==="bottom-right"){if(Q){var it=Rt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};Y=Math.sqrt(Math.pow(T.x()-it.x,2)+Math.pow(T.y()-it.y,2));var Et=this.findOne(".bottom-right").x()<it.x?-1:1,rt=this.findOne(".bottom-right").y()<it.y?-1:1;V=Y*this.cos*Et,G=Y*this.sin*rt,this.findOne(".bottom-right").x(it.x+V),this.findOne(".bottom-right").y(it.y+G)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var Rt=this.centeredScaling()||w.altKey;if(Rt){const At=this.findOne(".top-left"),Ct=this.findOne(".bottom-right"),It=At.x(),zt=At.y(),$t=this.getWidth()-Ct.x(),oe=this.getHeight()-Ct.y();Ct.move({x:-It,y:-zt}),At.move({x:$t,y:oe})}const Nt=this.findOne(".top-left").getAbsolutePosition();V=Nt.x,G=Nt.y;const et=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),ct=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:V,y:G,width:et,height:ct,rotation:d.Konva.getAngle(this.rotation())},w)}_handleMouseUp(w){this._removeEvents(w)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(w){var V;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const G=this.getNode();H--,this._fire("transformend",{evt:w,target:G}),(V=this.getLayer())===null||V===void 0||V.batchDraw(),G&&this._nodes.forEach(Y=>{var T;Y._fire("transformend",{evt:w,target:Y}),(T=Y.getLayer())===null||T===void 0||T.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(w,V){const G=this._getNodeRect(),Y=1;if(a.Util._inRange(w.width,-this.padding()*2-Y,Y)){this.update();return}if(a.Util._inRange(w.height,-this.padding()*2-Y,Y)){this.update();return}const T=new a.Transform;if(T.rotate(d.Konva.getAngle(this.rotation())),this._movingAnchorName&&w.width<0&&this._movingAnchorName.indexOf("left")>=0){const Q=T.point({x:-this.padding()*2,y:0});w.x+=Q.x,w.y+=Q.y,w.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=Q.x,this._anchorDragOffset.y-=Q.y}else if(this._movingAnchorName&&w.width<0&&this._movingAnchorName.indexOf("right")>=0){const Q=T.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=Q.x,this._anchorDragOffset.y-=Q.y,w.width+=this.padding()*2}if(this._movingAnchorName&&w.height<0&&this._movingAnchorName.indexOf("top")>=0){const Q=T.point({x:0,y:-this.padding()*2});w.x+=Q.x,w.y+=Q.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=Q.x,this._anchorDragOffset.y-=Q.y,w.height+=this.padding()*2}else if(this._movingAnchorName&&w.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const Q=T.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=Q.x,this._anchorDragOffset.y-=Q.y,w.height+=this.padding()*2}if(this.boundBoxFunc()){const Q=this.boundBoxFunc()(G,w);Q?w=Q:a.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const K=1e7,k=new a.Transform;k.translate(G.x,G.y),k.rotate(G.rotation),k.scale(G.width/K,G.height/K);const X=new a.Transform,$=w.width/K,at=w.height/K;this.flipEnabled()===!1?(X.translate(w.x,w.y),X.rotate(w.rotation),X.translate(w.width<0?w.width:0,w.height<0?w.height:0),X.scale(Math.abs($),Math.abs(at))):(X.translate(w.x,w.y),X.rotate(w.rotation),X.scale($,at));const dt=X.multiply(k.invert());this._nodes.forEach(Q=>{var it;const Et=Q.getParent().getAbsoluteTransform(),rt=Q.getTransform().copy();rt.translate(Q.offsetX(),Q.offsetY());const gt=new a.Transform;gt.multiply(Et.copy().invert()).multiply(dt).multiply(Et).multiply(rt);const Rt=gt.decompose();Q.setAttrs(Rt),(it=Q.getLayer())===null||it===void 0||it.batchDraw()}),this.rotation(a.Util._getRotation(w.rotation)),this._nodes.forEach(Q=>{this._fire("transform",{evt:V,target:Q}),Q._fire("transform",{evt:V,target:Q})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(w,V){this.findOne(w).setAttrs(V)}update(){var w;const V=this._getNodeRect();this.rotation(a.Util._getRotation(V.rotation));const G=V.width,Y=V.height,T=this.enabledAnchors(),K=this.resizeEnabled(),k=this.padding(),X=this.anchorSize(),$=this.find("._anchor");$.forEach(dt=>{dt.setAttrs({width:X,height:X,offsetX:X/2,offsetY:X/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:X/2+k,offsetY:X/2+k,visible:K&&T.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:G/2,y:0,offsetY:X/2+k,visible:K&&T.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:G,y:0,offsetX:X/2-k,offsetY:X/2+k,visible:K&&T.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:Y/2,offsetX:X/2+k,visible:K&&T.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:G,y:Y/2,offsetX:X/2-k,visible:K&&T.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:Y,offsetX:X/2+k,offsetY:X/2-k,visible:K&&T.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:G/2,y:Y,offsetY:X/2-k,visible:K&&T.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:G,y:Y,offsetX:X/2-k,offsetY:X/2-k,visible:K&&T.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:G/2,y:-this.rotateAnchorOffset()*a.Util._sign(Y)-k,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:G,height:Y,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const at=this.anchorStyleFunc();at&&$.forEach(dt=>{at(dt)}),(w=this.getLayer())===null||w===void 0||w.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const w=this.findOne("."+this._movingAnchorName);w&&w.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),c.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(w){return n.Node.prototype.clone.call(this,w)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Md.Transformer=j,j.isTransforming=()=>H>0;function q(x){return x instanceof Array||a.Util.warn("enabledAnchors value should be an array"),x instanceof Array&&x.forEach(function(w){z.indexOf(w)===-1&&a.Util.warn("Unknown anchor name: "+w+". Available names are: "+z.join(", "))}),x||[]}return j.prototype.className="Transformer",(0,_._registerNode)(j),t.Factory.addGetterSetter(j,"enabledAnchors",z,q),t.Factory.addGetterSetter(j,"flipEnabled",!0,(0,m.getBooleanValidator)()),t.Factory.addGetterSetter(j,"resizeEnabled",!0),t.Factory.addGetterSetter(j,"anchorSize",10,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(j,"rotateEnabled",!0),t.Factory.addGetterSetter(j,"rotateLineVisible",!0),t.Factory.addGetterSetter(j,"rotationSnaps",[]),t.Factory.addGetterSetter(j,"rotateAnchorOffset",50,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(j,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(j,"rotationSnapTolerance",5,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(j,"borderEnabled",!0),t.Factory.addGetterSetter(j,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(j,"anchorStrokeWidth",1,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(j,"anchorFill","white"),t.Factory.addGetterSetter(j,"anchorCornerRadius",0,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(j,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(j,"borderStrokeWidth",1,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(j,"borderDash"),t.Factory.addGetterSetter(j,"keepRatio",!0),t.Factory.addGetterSetter(j,"shiftBehavior","default"),t.Factory.addGetterSetter(j,"centeredScaling",!1),t.Factory.addGetterSetter(j,"ignoreStroke",!1),t.Factory.addGetterSetter(j,"padding",0,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(j,"nodes"),t.Factory.addGetterSetter(j,"node"),t.Factory.addGetterSetter(j,"boundBoxFunc"),t.Factory.addGetterSetter(j,"anchorDragBoundFunc"),t.Factory.addGetterSetter(j,"anchorStyleFunc"),t.Factory.addGetterSetter(j,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(j,"useSingleNodeRotation",!0),t.Factory.backCompat(j,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Md}var xd={},l2;function eS(){if(l2)return xd;l2=1,Object.defineProperty(xd,"__esModule",{value:!0}),xd.Wedge=void 0;const a=be(),t=Ni(),n=_e(),s=Re(),u=_e();let c=class extends t.Shape{_sceneFunc(m){m.beginPath(),m.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),m.lineTo(0,0),m.closePath(),m.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(m){this.radius(m/2)}setHeight(m){this.radius(m/2)}};return xd.Wedge=c,c.prototype.className="Wedge",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["radius"],(0,u._registerNode)(c),a.Factory.addGetterSetter(c,"radius",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(c,"angle",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(c,"clockwise",!1),a.Factory.backCompat(c,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),xd}var Vd={},o2;function nS(){if(o2)return Vd;o2=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.Blur=void 0;const a=be(),t=ei(),n=Re();function s(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const u=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],c=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function d(_,v){const b=_.data,R=_.width,U=_.height;let C,O,I,z,F,M,D,L,H,j,q,x,w,V,G,Y,T,K,k,X,$,at,dt,Q;const it=v+v+1,Et=R-1,rt=U-1,gt=v+1,Rt=gt*(gt+1)/2,Nt=new s,et=u[v],ct=c[v];let At=null,Ct=Nt,It=null,zt=null;for(I=1;I<it;I++)Ct=Ct.next=new s,I===gt&&(At=Ct);for(Ct.next=Nt,D=M=0,O=0;O<U;O++){for(Y=T=K=k=L=H=j=q=0,x=gt*(X=b[M]),w=gt*($=b[M+1]),V=gt*(at=b[M+2]),G=gt*(dt=b[M+3]),L+=Rt*X,H+=Rt*$,j+=Rt*at,q+=Rt*dt,Ct=Nt,I=0;I<gt;I++)Ct.r=X,Ct.g=$,Ct.b=at,Ct.a=dt,Ct=Ct.next;for(I=1;I<gt;I++)z=M+((Et<I?Et:I)<<2),L+=(Ct.r=X=b[z])*(Q=gt-I),H+=(Ct.g=$=b[z+1])*Q,j+=(Ct.b=at=b[z+2])*Q,q+=(Ct.a=dt=b[z+3])*Q,Y+=X,T+=$,K+=at,k+=dt,Ct=Ct.next;for(It=Nt,zt=At,C=0;C<R;C++)b[M+3]=dt=q*et>>ct,dt!==0?(dt=255/dt,b[M]=(L*et>>ct)*dt,b[M+1]=(H*et>>ct)*dt,b[M+2]=(j*et>>ct)*dt):b[M]=b[M+1]=b[M+2]=0,L-=x,H-=w,j-=V,q-=G,x-=It.r,w-=It.g,V-=It.b,G-=It.a,z=D+((z=C+v+1)<Et?z:Et)<<2,Y+=It.r=b[z],T+=It.g=b[z+1],K+=It.b=b[z+2],k+=It.a=b[z+3],L+=Y,H+=T,j+=K,q+=k,It=It.next,x+=X=zt.r,w+=$=zt.g,V+=at=zt.b,G+=dt=zt.a,Y-=X,T-=$,K-=at,k-=dt,zt=zt.next,M+=4;D+=R}for(C=0;C<R;C++){for(T=K=k=Y=H=j=q=L=0,M=C<<2,x=gt*(X=b[M]),w=gt*($=b[M+1]),V=gt*(at=b[M+2]),G=gt*(dt=b[M+3]),L+=Rt*X,H+=Rt*$,j+=Rt*at,q+=Rt*dt,Ct=Nt,I=0;I<gt;I++)Ct.r=X,Ct.g=$,Ct.b=at,Ct.a=dt,Ct=Ct.next;for(F=R,I=1;I<=v;I++)M=F+C<<2,L+=(Ct.r=X=b[M])*(Q=gt-I),H+=(Ct.g=$=b[M+1])*Q,j+=(Ct.b=at=b[M+2])*Q,q+=(Ct.a=dt=b[M+3])*Q,Y+=X,T+=$,K+=at,k+=dt,Ct=Ct.next,I<rt&&(F+=R);for(M=C,It=Nt,zt=At,O=0;O<U;O++)z=M<<2,b[z+3]=dt=q*et>>ct,dt>0?(dt=255/dt,b[z]=(L*et>>ct)*dt,b[z+1]=(H*et>>ct)*dt,b[z+2]=(j*et>>ct)*dt):b[z]=b[z+1]=b[z+2]=0,L-=x,H-=w,j-=V,q-=G,x-=It.r,w-=It.g,V-=It.b,G-=It.a,z=C+((z=O+gt)<rt?z:rt)*R<<2,L+=Y+=It.r=b[z],H+=T+=It.g=b[z+1],j+=K+=It.b=b[z+2],q+=k+=It.a=b[z+3],It=It.next,x+=X=zt.r,w+=$=zt.g,V+=at=zt.b,G+=dt=zt.a,Y-=X,T-=$,K-=at,k-=dt,zt=zt.next,M+=R}}const m=function(v){const b=Math.round(this.blurRadius());b>0&&d(v,b)};return Vd.Blur=m,a.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Vd}var Ud={},u2;function iS(){if(u2)return Ud;u2=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.Brighten=void 0;const a=be(),t=ei(),n=Re(),s=function(u){const c=this.brightness()*255,d=u.data,m=d.length;for(let _=0;_<m;_+=4)d[_]+=c,d[_+1]+=c,d[_+2]+=c};return Ud.Brighten=s,a.Factory.addGetterSetter(t.Node,"brightness",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Ud}var Id={},c2;function aS(){if(c2)return Id;c2=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.Contrast=void 0;const a=be(),t=ei(),n=Re(),s=function(u){const c=Math.pow((this.contrast()+100)/100,2),d=u.data,m=d.length;let _=150,v=150,b=150;for(let R=0;R<m;R+=4)_=d[R],v=d[R+1],b=d[R+2],_/=255,_-=.5,_*=c,_+=.5,_*=255,v/=255,v-=.5,v*=c,v+=.5,v*=255,b/=255,b-=.5,b*=c,b+=.5,b*=255,_=_<0?0:_>255?255:_,v=v<0?0:v>255?255:v,b=b<0?0:b>255?255:b,d[R]=_,d[R+1]=v,d[R+2]=b};return Id.Contrast=s,a.Factory.addGetterSetter(t.Node,"contrast",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Id}var Ld={},h2;function rS(){if(h2)return Ld;h2=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.Emboss=void 0;const a=be(),t=ei(),n=Yn(),s=Re(),u=function(c){const d=this.embossStrength()*10,m=this.embossWhiteLevel()*255,_=this.embossDirection(),v=this.embossBlend(),b=c.data,R=c.width,U=c.height,C=R*4;let O=0,I=0,z=U;switch(_){case"top-left":O=-1,I=-1;break;case"top":O=-1,I=0;break;case"top-right":O=-1,I=1;break;case"right":O=0,I=1;break;case"bottom-right":O=1,I=1;break;case"bottom":O=1,I=0;break;case"bottom-left":O=1,I=-1;break;case"left":O=0,I=-1;break;default:n.Util.error("Unknown emboss direction: "+_)}do{const F=(z-1)*C;let M=O;z+M<1&&(M=0),z+M>U&&(M=0);const D=(z-1+M)*R*4;let L=R;do{const H=F+(L-1)*4;let j=I;L+j<1&&(j=0),L+j>R&&(j=0);const q=D+(L-1+j)*4,x=b[H]-b[q],w=b[H+1]-b[q+1],V=b[H+2]-b[q+2];let G=x;const Y=G>0?G:-G,T=w>0?w:-w,K=V>0?V:-V;if(T>Y&&(G=w),K>Y&&(G=V),G*=d,v){const k=b[H]+G,X=b[H+1]+G,$=b[H+2]+G;b[H]=k>255?255:k<0?0:k,b[H+1]=X>255?255:X<0?0:X,b[H+2]=$>255?255:$<0?0:$}else{let k=m-G;k<0?k=0:k>255&&(k=255),b[H]=b[H+1]=b[H+2]=k}}while(--L)}while(--z)};return Ld.Emboss=u,a.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,s.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,s.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,a.Factory.afterSetFilter),Ld}var Pd={},f2;function sS(){if(f2)return Pd;f2=1,Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.Enhance=void 0;const a=be(),t=ei(),n=Re();function s(c,d,m,_,v){const b=m-d,R=v-_;if(b===0)return _+R/2;if(R===0)return _;let U=(c-d)/b;return U=R*U+_,U}const u=function(c){const d=c.data,m=d.length;let _=d[0],v=_,b,R=d[1],U=R,C,O=d[2],I=O,z;const F=this.enhance();if(F===0)return;for(let G=0;G<m;G+=4)b=d[G+0],b<_?_=b:b>v&&(v=b),C=d[G+1],C<R?R=C:C>U&&(U=C),z=d[G+2],z<O?O=z:z>I&&(I=z);v===_&&(v=255,_=0),U===R&&(U=255,R=0),I===O&&(I=255,O=0);let M,D,L,H,j,q,x,w,V;F>0?(D=v+F*(255-v),L=_-F*(_-0),j=U+F*(255-U),q=R-F*(R-0),w=I+F*(255-I),V=O-F*(O-0)):(M=(v+_)*.5,D=v+F*(v-M),L=_+F*(_-M),H=(U+R)*.5,j=U+F*(U-H),q=R+F*(R-H),x=(I+O)*.5,w=I+F*(I-x),V=O+F*(O-x));for(let G=0;G<m;G+=4)d[G+0]=s(d[G+0],_,v,L,D),d[G+1]=s(d[G+1],R,U,q,j),d[G+2]=s(d[G+2],O,I,V,w)};return Pd.Enhance=u,a.Factory.addGetterSetter(t.Node,"enhance",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Pd}var zd={},d2;function lS(){if(d2)return zd;d2=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.Grayscale=void 0;const a=function(t){const n=t.data,s=n.length;for(let u=0;u<s;u+=4){const c=.34*n[u]+.5*n[u+1]+.16*n[u+2];n[u]=c,n[u+1]=c,n[u+2]=c}};return zd.Grayscale=a,zd}var Bd={},g2;function oS(){if(g2)return Bd;g2=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.HSL=void 0;const a=be(),t=ei(),n=Re();a.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"luminance",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter);const s=function(u){const c=u.data,d=c.length,m=1,_=Math.pow(2,this.saturation()),v=Math.abs(this.hue()+360)%360,b=this.luminance()*127,R=m*_*Math.cos(v*Math.PI/180),U=m*_*Math.sin(v*Math.PI/180),C=.299*m+.701*R+.167*U,O=.587*m-.587*R+.33*U,I=.114*m-.114*R-.497*U,z=.299*m-.299*R-.328*U,F=.587*m+.413*R+.035*U,M=.114*m-.114*R+.293*U,D=.299*m-.3*R+1.25*U,L=.587*m-.586*R-1.05*U,H=.114*m+.886*R-.2*U;let j,q,x,w;for(let V=0;V<d;V+=4)j=c[V+0],q=c[V+1],x=c[V+2],w=c[V+3],c[V+0]=C*j+O*q+I*x+b,c[V+1]=z*j+F*q+M*x+b,c[V+2]=D*j+L*q+H*x+b,c[V+3]=w};return Bd.HSL=s,Bd}var Gd={},m2;function uS(){if(m2)return Gd;m2=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.HSV=void 0;const a=be(),t=ei(),n=Re(),s=function(u){const c=u.data,d=c.length,m=Math.pow(2,this.value()),_=Math.pow(2,this.saturation()),v=Math.abs(this.hue()+360)%360,b=m*_*Math.cos(v*Math.PI/180),R=m*_*Math.sin(v*Math.PI/180),U=.299*m+.701*b+.167*R,C=.587*m-.587*b+.33*R,O=.114*m-.114*b-.497*R,I=.299*m-.299*b-.328*R,z=.587*m+.413*b+.035*R,F=.114*m-.114*b+.293*R,M=.299*m-.3*b+1.25*R,D=.587*m-.586*b-1.05*R,L=.114*m+.886*b-.2*R;let H,j,q,x;for(let w=0;w<d;w+=4)H=c[w+0],j=c[w+1],q=c[w+2],x=c[w+3],c[w+0]=U*H+C*j+O*q,c[w+1]=I*H+z*j+F*q,c[w+2]=M*H+D*j+L*q,c[w+3]=x};return Gd.HSV=s,a.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"value",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Gd}var kd={},p2;function cS(){if(p2)return kd;p2=1,Object.defineProperty(kd,"__esModule",{value:!0}),kd.Invert=void 0;const a=function(t){const n=t.data,s=n.length;for(let u=0;u<s;u+=4)n[u]=255-n[u],n[u+1]=255-n[u+1],n[u+2]=255-n[u+2]};return kd.Invert=a,kd}var Hd={},y2;function hS(){if(y2)return Hd;y2=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.Kaleidoscope=void 0;const a=be(),t=ei(),n=Yn(),s=Re(),u=function(m,_,v){const b=m.data,R=_.data,U=m.width,C=m.height,O=v.polarCenterX||U/2,I=v.polarCenterY||C/2;let z=Math.sqrt(O*O+I*I),F=U-O,M=C-I;const D=Math.sqrt(F*F+M*M);z=D>z?D:z;const L=C,H=U,j=360/H*Math.PI/180;for(let q=0;q<H;q+=1){const x=Math.sin(q*j),w=Math.cos(q*j);for(let V=0;V<L;V+=1){F=Math.floor(O+z*V/L*w),M=Math.floor(I+z*V/L*x);let G=(M*U+F)*4;const Y=b[G+0],T=b[G+1],K=b[G+2],k=b[G+3];G=(q+V*U)*4,R[G+0]=Y,R[G+1]=T,R[G+2]=K,R[G+3]=k}}},c=function(m,_,v){const b=m.data,R=_.data,U=m.width,C=m.height,O=v.polarCenterX||U/2,I=v.polarCenterY||C/2;let z=Math.sqrt(O*O+I*I),F=U-O,M=C-I;const D=Math.sqrt(F*F+M*M);z=D>z?D:z;const L=C,H=U,j=0;let q,x;for(F=0;F<U;F+=1)for(M=0;M<C;M+=1){const w=F-O,V=M-I,G=Math.sqrt(w*w+V*V)*L/z;let Y=(Math.atan2(V,w)*180/Math.PI+360+j)%360;Y=Y*H/360,q=Math.floor(Y),x=Math.floor(G);let T=(x*U+q)*4;const K=b[T+0],k=b[T+1],X=b[T+2],$=b[T+3];T=(M*U+F)*4,R[T+0]=K,R[T+1]=k,R[T+2]=X,R[T+3]=$}},d=function(m){const _=m.width,v=m.height;let b,R,U,C,O,I,z,F,M,D,L=Math.round(this.kaleidoscopePower());const H=Math.round(this.kaleidoscopeAngle()),j=Math.floor(_*(H%360)/360);if(L<1)return;const q=n.Util.createCanvasElement();q.width=_,q.height=v;const x=q.getContext("2d").getImageData(0,0,_,v);n.Util.releaseCanvas(q),u(m,x,{polarCenterX:_/2,polarCenterY:v/2});let w=_/Math.pow(2,L);for(;w<=8;)w=w*2,L-=1;w=Math.ceil(w);let V=w,G=0,Y=V,T=1;for(j+w>_&&(G=V,Y=0,T=-1),R=0;R<v;R+=1)for(b=G;b!==Y;b+=T)U=Math.round(b+j)%_,M=(_*R+U)*4,O=x.data[M+0],I=x.data[M+1],z=x.data[M+2],F=x.data[M+3],D=(_*R+b)*4,x.data[D+0]=O,x.data[D+1]=I,x.data[D+2]=z,x.data[D+3]=F;for(R=0;R<v;R+=1)for(V=Math.floor(w),C=0;C<L;C+=1){for(b=0;b<V+1;b+=1)M=(_*R+b)*4,O=x.data[M+0],I=x.data[M+1],z=x.data[M+2],F=x.data[M+3],D=(_*R+V*2-b-1)*4,x.data[D+0]=O,x.data[D+1]=I,x.data[D+2]=z,x.data[D+3]=F;V*=2}c(x,m,{polarRotation:0})};return Hd.Kaleidoscope=d,a.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,s.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,s.getNumberValidator)(),a.Factory.afterSetFilter),Hd}var qd={},_2;function fS(){if(_2)return qd;_2=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.Mask=void 0;const a=be(),t=ei(),n=Re();function s(U,C,O){let I=(O*U.width+C)*4;const z=[];return z.push(U.data[I++],U.data[I++],U.data[I++],U.data[I++]),z}function u(U,C){return Math.sqrt(Math.pow(U[0]-C[0],2)+Math.pow(U[1]-C[1],2)+Math.pow(U[2]-C[2],2))}function c(U){const C=[0,0,0];for(let O=0;O<U.length;O++)C[0]+=U[O][0],C[1]+=U[O][1],C[2]+=U[O][2];return C[0]/=U.length,C[1]/=U.length,C[2]/=U.length,C}function d(U,C){const O=s(U,0,0),I=s(U,U.width-1,0),z=s(U,0,U.height-1),F=s(U,U.width-1,U.height-1),M=C||10;if(u(O,I)<M&&u(I,F)<M&&u(F,z)<M&&u(z,O)<M){const D=c([I,O,F,z]),L=[];for(let H=0;H<U.width*U.height;H++){const j=u(D,[U.data[H*4],U.data[H*4+1],U.data[H*4+2]]);L[H]=j<M?0:255}return L}}function m(U,C){for(let O=0;O<U.width*U.height;O++)U.data[4*O+3]=C[O]}function _(U,C,O){const I=[1,1,1,1,0,1,1,1,1],z=Math.round(Math.sqrt(I.length)),F=Math.floor(z/2),M=[];for(let D=0;D<O;D++)for(let L=0;L<C;L++){const H=D*C+L;let j=0;for(let q=0;q<z;q++)for(let x=0;x<z;x++){const w=D+q-F,V=L+x-F;if(w>=0&&w<O&&V>=0&&V<C){const G=w*C+V,Y=I[q*z+x];j+=U[G]*Y}}M[H]=j===255*8?255:0}return M}function v(U,C,O){const I=[1,1,1,1,1,1,1,1,1],z=Math.round(Math.sqrt(I.length)),F=Math.floor(z/2),M=[];for(let D=0;D<O;D++)for(let L=0;L<C;L++){const H=D*C+L;let j=0;for(let q=0;q<z;q++)for(let x=0;x<z;x++){const w=D+q-F,V=L+x-F;if(w>=0&&w<O&&V>=0&&V<C){const G=w*C+V,Y=I[q*z+x];j+=U[G]*Y}}M[H]=j>=255*4?255:0}return M}function b(U,C,O){const I=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],z=Math.round(Math.sqrt(I.length)),F=Math.floor(z/2),M=[];for(let D=0;D<O;D++)for(let L=0;L<C;L++){const H=D*C+L;let j=0;for(let q=0;q<z;q++)for(let x=0;x<z;x++){const w=D+q-F,V=L+x-F;if(w>=0&&w<O&&V>=0&&V<C){const G=w*C+V,Y=I[q*z+x];j+=U[G]*Y}}M[H]=j}return M}const R=function(U){const C=this.threshold();let O=d(U,C);return O&&(O=_(O,U.width,U.height),O=v(O,U.width,U.height),O=b(O,U.width,U.height),m(U,O)),U};return qd.Mask=R,a.Factory.addGetterSetter(t.Node,"threshold",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),qd}var jd={},v2;function dS(){if(v2)return jd;v2=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.Noise=void 0;const a=be(),t=ei(),n=Re(),s=function(u){const c=this.noise()*255,d=u.data,m=d.length,_=c/2;for(let v=0;v<m;v+=4)d[v+0]+=_-2*_*Math.random(),d[v+1]+=_-2*_*Math.random(),d[v+2]+=_-2*_*Math.random()};return jd.Noise=s,a.Factory.addGetterSetter(t.Node,"noise",.2,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),jd}var Fd={},E2;function gS(){if(E2)return Fd;E2=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.Pixelate=void 0;const a=be(),t=Yn(),n=ei(),s=Re(),u=function(c){let d=Math.ceil(this.pixelSize()),m=c.width,_=c.height,v,b,R,U,C,O,I,z=Math.ceil(m/d),F=Math.ceil(_/d),M,D,L,H,j,q,x,w=c.data;if(d<=0){t.Util.error("pixelSize value can not be <= 0");return}for(j=0;j<z;j+=1)for(q=0;q<F;q+=1){for(U=0,C=0,O=0,I=0,M=j*d,D=M+d,L=q*d,H=L+d,x=0,v=M;v<D;v+=1)if(!(v>=m))for(b=L;b<H;b+=1)b>=_||(R=(m*b+v)*4,U+=w[R+0],C+=w[R+1],O+=w[R+2],I+=w[R+3],x+=1);for(U=U/x,C=C/x,O=O/x,I=I/x,v=M;v<D;v+=1)if(!(v>=m))for(b=L;b<H;b+=1)b>=_||(R=(m*b+v)*4,w[R+0]=U,w[R+1]=C,w[R+2]=O,w[R+3]=I)}};return Fd.Pixelate=u,a.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,s.getNumberValidator)(),a.Factory.afterSetFilter),Fd}var Kd={},S2;function mS(){if(S2)return Kd;S2=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.Posterize=void 0;const a=be(),t=ei(),n=Re(),s=function(u){const c=Math.round(this.levels()*254)+1,d=u.data,m=d.length,_=255/c;for(let v=0;v<m;v+=1)d[v]=Math.floor(d[v]/_)*_};return Kd.Posterize=s,a.Factory.addGetterSetter(t.Node,"levels",.5,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Kd}var Yd={},T2;function pS(){if(T2)return Yd;T2=1,Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.RGB=void 0;const a=be(),t=ei(),n=Re(),s=function(u){const c=u.data,d=c.length,m=this.red(),_=this.green(),v=this.blue();for(let b=0;b<d;b+=4){const R=(.34*c[b]+.5*c[b+1]+.16*c[b+2])/255;c[b]=R*m,c[b+1]=R*_,c[b+2]=R*v,c[b+3]=c[b+3]}};return Yd.RGB=s,a.Factory.addGetterSetter(t.Node,"red",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)}),a.Factory.addGetterSetter(t.Node,"green",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)}),a.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,a.Factory.afterSetFilter),Yd}var Qd={},b2;function yS(){if(b2)return Qd;b2=1,Object.defineProperty(Qd,"__esModule",{value:!0}),Qd.RGBA=void 0;const a=be(),t=ei(),n=Re(),s=function(u){const c=u.data,d=c.length,m=this.red(),_=this.green(),v=this.blue(),b=this.alpha();for(let R=0;R<d;R+=4){const U=1-b;c[R]=m*b+c[R]*U,c[R+1]=_*b+c[R+1]*U,c[R+2]=v*b+c[R+2]*U}};return Qd.RGBA=s,a.Factory.addGetterSetter(t.Node,"red",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)}),a.Factory.addGetterSetter(t.Node,"green",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)}),a.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"alpha",1,function(u){return this._filterUpToDate=!1,u>1?1:u<0?0:u}),Qd}var Xd={},A2;function _S(){if(A2)return Xd;A2=1,Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.Sepia=void 0;const a=function(t){const n=t.data,s=n.length;for(let u=0;u<s;u+=4){const c=n[u+0],d=n[u+1],m=n[u+2];n[u+0]=Math.min(255,c*.393+d*.769+m*.189),n[u+1]=Math.min(255,c*.349+d*.686+m*.168),n[u+2]=Math.min(255,c*.272+d*.534+m*.131)}};return Xd.Sepia=a,Xd}var Zd={},R2;function vS(){if(R2)return Zd;R2=1,Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.Solarize=void 0;const a=function(t){const n=t.data,s=t.width,u=t.height,c=s*4;let d=u;do{const m=(d-1)*c;let _=s;do{const v=m+(_-1)*4;let b=n[v],R=n[v+1],U=n[v+2];b>127&&(b=255-b),R>127&&(R=255-R),U>127&&(U=255-U),n[v]=b,n[v+1]=R,n[v+2]=U}while(--_)}while(--d)};return Zd.Solarize=a,Zd}var Wd={},C2;function ES(){if(C2)return Wd;C2=1,Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.Threshold=void 0;const a=be(),t=ei(),n=Re(),s=function(u){const c=this.threshold()*255,d=u.data,m=d.length;for(let _=0;_<m;_+=1)d[_]=d[_]<c?0:255};return Wd.Threshold=s,a.Factory.addGetterSetter(t.Node,"threshold",.5,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Wd}var w2;function SS(){if(w2)return hd;w2=1,Object.defineProperty(hd,"__esModule",{value:!0}),hd.Konva=void 0;const a=s1(),t=H5(),n=j5(),s=F5(),u=K5(),c=Y5(),d=Q5(),m=E4(),_=P1(),v=S4(),b=X5(),R=Z5(),U=W5(),C=J5(),O=T4(),I=$5(),z=tS(),F=eS(),M=nS(),D=iS(),L=aS(),H=rS(),j=sS(),q=lS(),x=oS(),w=uS(),V=cS(),G=hS(),Y=fS(),T=dS(),K=gS(),k=mS(),X=pS(),$=yS(),at=_S(),dt=vS(),Q=ES();return hd.Konva=a.Konva.Util._assign(a.Konva,{Arc:t.Arc,Arrow:n.Arrow,Circle:s.Circle,Ellipse:u.Ellipse,Image:c.Image,Label:d.Label,Tag:d.Tag,Line:m.Line,Path:_.Path,Rect:v.Rect,RegularPolygon:b.RegularPolygon,Ring:R.Ring,Sprite:U.Sprite,Star:C.Star,Text:O.Text,TextPath:I.TextPath,Transformer:z.Transformer,Wedge:F.Wedge,Filters:{Blur:M.Blur,Brighten:D.Brighten,Contrast:L.Contrast,Emboss:H.Emboss,Enhance:j.Enhance,Grayscale:q.Grayscale,HSL:x.HSL,HSV:w.HSV,Invert:V.Invert,Kaleidoscope:G.Kaleidoscope,Mask:Y.Mask,Noise:T.Noise,Pixelate:K.Pixelate,Posterize:k.Posterize,RGB:X.RGB,RGBA:$.RGBA,Sepia:at.Sepia,Solarize:dt.Solarize,Threshold:Q.Threshold}}),hd}var TS=Jm.exports,D2;function bS(){if(D2)return Jm.exports;D2=1,Object.defineProperty(TS,"__esModule",{value:!0});const a=SS();return Jm.exports=a.Konva,Jm.exports}bS();var jm={exports:{}},N2;function AS(){return N2||(N2=1,function(a,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var n=s1();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return n.Konva}});const s=s1();a.exports=s.Konva}(jm,jm.exports)),jm.exports}var RS=AS();const u0=x1(RS);var jp={exports:{}},Fp={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O2;function CS(){return O2||(O2=1,function(a){a.exports=function(t){function n(r,l,f,y){return new zg(r,l,f,y)}function s(){}function u(r){var l="https://react.dev/errors/"+r;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+r+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(r){return r===null||typeof r!="object"?null:(r=qe&&r[qe]||r["@@iterator"],typeof r=="function"?r:null)}function d(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===kn?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case ll:return"Fragment";case Ur:return"Portal";case ol:return"Profiler";case eo:return"StrictMode";case ys:return"Suspense";case yc:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case ul:return(r.displayName||"Context")+".Provider";case bf:return(r._context.displayName||"Context")+".Consumer";case uh:var l=r.render;return r=r.displayName,r||(r=l.displayName||l.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Zo:return l=r.displayName||null,l!==null?l:d(r.type)||"Memo";case _s:l=r._payload,r=r._init;try{return d(r(l))}catch{}}return null}function m(r){if(cl===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);cl=l&&l[1]||"",hl=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cl+r+hl}function _(r,l){if(!r||Wo)return"";Wo=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(l){var Pt=function(){throw Error()};if(Object.defineProperty(Pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pt,[])}catch(ie){var Vt=ie}Reflect.construct(r,[],Pt)}else{try{Pt.call()}catch(ie){Vt=ie}r.call(Pt.prototype)}}else{try{throw Error()}catch(ie){Vt=ie}(Pt=r())&&typeof Pt.catch=="function"&&Pt.catch(function(){})}}catch(ie){if(ie&&Vt&&typeof ie.stack=="string")return[ie.stack,Vt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=y.DetermineComponentFrameRoot(),W=N[0],nt=N[1];if(W&&nt){var ft=W.split(`
`),Tt=nt.split(`
`);for(S=y=0;y<ft.length&&!ft[y].includes("DetermineComponentFrameRoot");)y++;for(;S<Tt.length&&!Tt[S].includes("DetermineComponentFrameRoot");)S++;if(y===ft.length||S===Tt.length)for(y=ft.length-1,S=Tt.length-1;1<=y&&0<=S&&ft[y]!==Tt[S];)S--;for(;1<=y&&0<=S;y--,S--)if(ft[y]!==Tt[S]){if(y!==1||S!==1)do if(y--,S--,0>S||ft[y]!==Tt[S]){var Ut=`
`+ft[y].replace(" at new "," at ");return r.displayName&&Ut.includes("<anonymous>")&&(Ut=Ut.replace("<anonymous>",r.displayName)),Ut}while(1<=y&&0<=S);break}}}finally{Wo=!1,Error.prepareStackTrace=f}return(f=r?r.displayName||r.name:"")?m(f):""}function v(r){switch(r.tag){case 26:case 27:case 5:return m(r.type);case 16:return m("Lazy");case 13:return m("Suspense");case 19:return m("SuspenseList");case 0:case 15:return r=_(r.type,!1),r;case 11:return r=_(r.type.render,!1),r;case 1:return r=_(r.type,!0),r;default:return""}}function b(r){try{var l="";do l+=v(r),r=r.return;while(r);return l}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function R(r){var l=r,f=r;if(r.alternate)for(;l.return;)l=l.return;else{r=l;do l=r,l.flags&4098&&(f=l.return),r=l.return;while(r)}return l.tag===3?f:null}function U(r){if(R(r)!==r)throw Error(u(188))}function C(r){var l=r.alternate;if(!l){if(l=R(r),l===null)throw Error(u(188));return l!==r?null:r}for(var f=r,y=l;;){var S=f.return;if(S===null)break;var N=S.alternate;if(N===null){if(y=S.return,y!==null){f=y;continue}break}if(S.child===N.child){for(N=S.child;N;){if(N===f)return U(S),r;if(N===y)return U(S),l;N=N.sibling}throw Error(u(188))}if(f.return!==y.return)f=S,y=N;else{for(var W=!1,nt=S.child;nt;){if(nt===f){W=!0,f=S,y=N;break}if(nt===y){W=!0,y=S,f=N;break}nt=nt.sibling}if(!W){for(nt=N.child;nt;){if(nt===f){W=!0,f=N,y=S;break}if(nt===y){W=!0,y=N,f=S;break}nt=nt.sibling}if(!W)throw Error(u(189))}}if(f.alternate!==y)throw Error(u(190))}if(f.tag!==3)throw Error(u(188));return f.stateNode.current===f?r:l}function O(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r;for(r=r.child;r!==null;){if(l=O(r),l!==null)return l;r=r.sibling}return null}function I(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r;for(r=r.child;r!==null;){if(r.tag!==4&&(l=I(r),l!==null))return l;r=r.sibling}return null}function z(r){return{current:r}}function F(r){0>ml||(r.current=Th[ml],Th[ml]=null,ml--)}function M(r,l){ml++,Th[ml]=r.current,r.current=l}function D(r){return r>>>=0,r===0?32:31-(Yf(r)/rp|0)|0}function L(r){var l=r&42;if(l!==0)return l;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function H(r,l){var f=r.pendingLanes;if(f===0)return 0;var y=0,S=r.suspendedLanes,N=r.pingedLanes,W=r.warmLanes;r=r.finishedLanes!==0;var nt=f&134217727;return nt!==0?(f=nt&~S,f!==0?y=L(f):(N&=nt,N!==0?y=L(N):r||(W=nt&~W,W!==0&&(y=L(W))))):(nt=f&~S,nt!==0?y=L(nt):N!==0?y=L(N):r||(W=f&~W,W!==0&&(y=L(W)))),y===0?0:l!==0&&l!==y&&!(l&S)&&(S=y&-y,W=l&-l,S>=W||S===32&&(W&4194176)!==0)?l:y}function j(r,l){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&l)===0}function q(r,l){switch(r){case 1:case 2:case 4:case 8:return l+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x(){var r=Sc;return Sc<<=1,!(Sc&4194176)&&(Sc=128),r}function w(){var r=nu;return nu<<=1,!(nu&62914560)&&(nu=4194304),r}function V(r){for(var l=[],f=0;31>f;f++)l.push(r);return l}function G(r,l){r.pendingLanes|=l,l!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Y(r,l,f,y,S,N){var W=r.pendingLanes;r.pendingLanes=f,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=f,r.entangledLanes&=f,r.errorRecoveryDisabledLanes&=f,r.shellSuspendCounter=0;var nt=r.entanglements,ft=r.expirationTimes,Tt=r.hiddenUpdates;for(f=W&~f;0<f;){var Ut=31-On(f),Pt=1<<Ut;nt[Ut]=0,ft[Ut]=-1;var Vt=Tt[Ut];if(Vt!==null)for(Tt[Ut]=null,Ut=0;Ut<Vt.length;Ut++){var ie=Vt[Ut];ie!==null&&(ie.lane&=-536870913)}f&=~Pt}y!==0&&T(r,y,0),N!==0&&S===0&&r.tag!==0&&(r.suspendedLanes|=N&~(W&~l))}function T(r,l,f){r.pendingLanes|=l,r.suspendedLanes&=~l;var y=31-On(l);r.entangledLanes|=l,r.entanglements[y]=r.entanglements[y]|1073741824|f&4194218}function K(r,l){var f=r.entangledLanes|=l;for(r=r.entanglements;f;){var y=31-On(f),S=1<<y;S&l|r[y]&l&&(r[y]|=l),f&=~S}}function k(r){return r&=-r,2<r?8<r?r&134217727?32:268435456:8:2}function X(r){if(Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(au,r,void 0,(r.current.flags&128)===128)}catch{}}function $(r){if(typeof Si=="function"&&Ah(r),Hn&&typeof Hn.setStrictMode=="function")try{Hn.setStrictMode(au,r)}catch{}}function at(r,l){return r===l&&(r!==0||1/r===1/l)||r!==r&&l!==l}function dt(r,l){if(typeof r=="object"&&r!==null){var f=Rh.get(r);return f!==void 0?f:(l={value:r,source:l,stack:b(l)},Rh.set(r,l),l)}return{value:r,source:l,stack:b(l)}}function Q(r,l){Da[Na++]=ru,Da[Na++]=yl,yl=r,ru=l}function it(r,l,f){ia[Ti++]=zr,ia[Ti++]=Br,ia[Ti++]=gr,gr=r;var y=zr;r=Br;var S=32-On(y)-1;y&=~(1<<S),f+=1;var N=32-On(l)+S;if(30<N){var W=S-S%5;N=(y&(1<<W)-1).toString(32),y>>=W,S-=W,zr=1<<32-On(l)+S|f<<S|y,Br=N+r}else zr=1<<N|f<<S|y,Br=r}function Et(r){r.return!==null&&(Q(r,1),it(r,1,0))}function rt(r){for(;r===yl;)yl=Da[--Na],Da[Na]=null,ru=Da[--Na],Da[Na]=null;for(;r===gr;)gr=ia[--Ti],ia[Ti]=null,Br=ia[--Ti],ia[Ti]=null,zr=ia[--Ti],ia[Ti]=null}function gt(r,l){M(bs,l),M(qa,r),M(Mn,null),r=Af(l),F(Mn),M(Mn,r)}function Rt(){F(Mn),F(qa),F(bs)}function Nt(r){r.memoizedState!==null&&M(bc,r);var l=Mn.current,f=Bg(l,r.type);l!==f&&(M(qa,r),M(Mn,f))}function et(r){qa.current===r&&(F(Mn),F(qa)),bc.current===r&&(F(bc),hr?Es._currentValue=io:Es._currentValue2=io)}function ct(r){var l=Error(u(418,""));throw $t(dt(l,r)),Ac}function At(r,l){if(!na)throw Error(u(175));so(r.stateNode,r.type,r.memoizedProps,l,r)||ct(r)}function Ct(r){for(xn=r.return;xn;)switch(xn.tag){case 3:case 27:mr=!0;return;case 5:case 13:mr=!1;return;default:xn=xn.return}}function It(r){if(!na||r!==xn)return!1;if(!Oe)return Ct(r),Oe=!0,!1;var l=!1;if(ri?r.tag!==3&&r.tag!==27&&(r.tag!==5||Pf(r.type)&&!hi(r.type,r.memoizedProps))&&(l=!0):r.tag!==3&&(r.tag!==5||Pf(r.type)&&!hi(r.type,r.memoizedProps))&&(l=!0),l&&Ye&&ct(r),Ct(r),r.tag===13){if(!na)throw Error(u(316));if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(u(317));Ye=ym(r)}else Ye=xn?gl(r.stateNode):null;return!0}function zt(){na&&(Ye=xn=null,Oe=!1)}function $t(r){ja===null?ja=[r]:ja.push(r)}function oe(){for(var r=As,l=pr=As=0;l<r;){var f=aa[l];aa[l++]=null;var y=aa[l];aa[l++]=null;var S=aa[l];aa[l++]=null;var N=aa[l];if(aa[l++]=null,y!==null&&S!==null){var W=y.pending;W===null?S.next=S:(S.next=W.next,W.next=S),y.pending=S}N!==0&&Ke(f,S,N)}}function Yt(r,l,f,y){aa[As++]=r,aa[As++]=l,aa[As++]=f,aa[As++]=y,pr|=y,r.lanes|=y,r=r.alternate,r!==null&&(r.lanes|=y)}function Fe(r,l,f,y){return Yt(r,l,f,y),gi(r)}function le(r,l){return Yt(r,null,null,l),gi(r)}function Ke(r,l,f){r.lanes|=f;var y=r.alternate;y!==null&&(y.lanes|=f);for(var S=!1,N=r.return;N!==null;)N.childLanes|=f,y=N.alternate,y!==null&&(y.childLanes|=f),N.tag===22&&(r=N.stateNode,r===null||r._visibility&1||(S=!0)),r=N,N=N.return;S&&l!==null&&r.tag===3&&(N=r.stateNode,S=31-On(f),N=N.hiddenUpdates,r=N[S],r===null?N[S]=[l]:r.push(l),l.lane=f|536870912)}function gi(r){if(50<mo)throw mo=0,Jf=null,Error(u(185));for(var l=r.return;l!==null;)r=l,l=r.return;return r.tag===3?r.stateNode:null}function ke(r){r!==_l&&r.next===null&&(_l===null?un=_l=r:_l=_l.next=r),Vn=!0,Ch||(Ch=!0,Ce(en))}function ui(r,l){if(!wh&&Vn){wh=!0;do for(var f=!1,y=un;y!==null;){if(r!==0){var S=y.pendingLanes;if(S===0)var N=0;else{var W=y.suspendedLanes,nt=y.pingedLanes;N=(1<<31-On(42|r)+1)-1,N&=S&~(W&~nt),N=N&201326677?N&201326677|1:N?N|2:0}N!==0&&(f=!0,Oi(y,N))}else N=ye,N=H(y,y===Xe?N:0),!(N&3)||j(y,N)||(f=!0,Oi(y,N));y=y.next}while(f);wh=!1}}function en(){Vn=Ch=!1;var r=0;su!==0&&(qg()&&(r=su),su=0);for(var l=wa(),f=null,y=un;y!==null;){var S=y.next,N=Qn(y,l);N===0?(y.next=null,f===null?un=S:f.next=S,S===null&&(_l=f)):(f=y,(r!==0||N&3)&&(Vn=!0)),y=S}ui(r)}function Qn(r,l){for(var f=r.suspendedLanes,y=r.pingedLanes,S=r.expirationTimes,N=r.pendingLanes&-62914561;0<N;){var W=31-On(N),nt=1<<W,ft=S[W];ft===-1?(!(nt&f)||nt&y)&&(S[W]=q(nt,l)):ft<=l&&(r.expiredLanes|=nt),N&=~nt}if(l=Xe,f=ye,f=H(r,r===l?f:0),y=r.callbackNode,f===0||r===l&&je===2||r.cancelPendingCommit!==null)return y!==null&&y!==null&&dr(y),r.callbackNode=null,r.callbackPriority=0;if(!(f&3)||j(r,f)){if(l=f&-f,l===r.callbackPriority)return l;switch(y!==null&&dr(y),k(f)){case 2:case 8:f=Tc;break;case 32:f=iu;break;case 268435456:f=oo;break;default:f=iu}return y=nn.bind(null,r),f=Pr(f,y),r.callbackPriority=l,r.callbackNode=f,l}return y!==null&&y!==null&&dr(y),r.callbackPriority=2,r.callbackNode=null,2}function nn(r,l){var f=r.callbackNode;if(il()&&r.callbackNode!==f)return null;var y=ye;return y=H(r,r===Xe?y:0),y===0?null:(Aa(r,y,l),Qn(r,wa()),r.callbackNode!=null&&r.callbackNode===f?nn.bind(null,r):null)}function Oi(r,l){if(il())return null;Aa(r,l,!0)}function Ce(r){Yg?Qg(function(){pe&6?Pr(bh,r):r()}):Pr(bh,r)}function He(){return su===0&&(su=x()),su}function Xn(r,l){if(lu===null){var f=lu=[];Dh=0,cn=He(),si={status:"pending",value:void 0,then:function(y){f.push(y)}}}return Dh++,l.then(ga,ga),l}function ga(){if(--Dh===0&&lu!==null){si!==null&&(si.status="fulfilled");var r=lu;lu=null,cn=0,si=null;for(var l=0;l<r.length;l++)(0,r[l])()}}function ji(r,l){var f=[],y={status:"pending",value:null,reason:null,then:function(S){f.push(S)}};return r.then(function(){y.status="fulfilled",y.value=l;for(var S=0;S<f.length;S++)(0,f[S])(l)},function(S){for(y.status="rejected",y.reason=S,S=0;S<f.length;S++)(0,f[S])(void 0)}),y}function ma(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pn(r,l){r=r.updateQueue,l.updateQueue===r&&(l.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function an(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ae(r,l,f){var y=r.updateQueue;if(y===null)return null;if(y=y.shared,pe&2){var S=y.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),y.pending=l,l=gi(r),Ke(r,null,f),l}return Yt(r,y,l,f),gi(r)}function pa(r,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194176)!==0)){var y=l.lanes;y&=r.pendingLanes,f|=y,l.lanes=f,K(r,f)}}function Fi(r,l){var f=r.updateQueue,y=r.alternate;if(y!==null&&(y=y.updateQueue,f===y)){var S=null,N=null;if(f=f.firstBaseUpdate,f!==null){do{var W={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};N===null?S=N=W:N=N.next=W,f=f.next}while(f!==null);N===null?S=N=l:N=N.next=l}else S=N=l;f={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:N,shared:y.shared,callbacks:y.callbacks},r.updateQueue=f;return}r=f.lastBaseUpdate,r===null?f.firstBaseUpdate=l:r.next=l,f.lastBaseUpdate=l}function Zn(){if(Nh){var r=si;if(r!==null)throw r}}function Kr(r,l,f,y){Nh=!1;var S=r.updateQueue;bi=!1;var N=S.firstBaseUpdate,W=S.lastBaseUpdate,nt=S.shared.pending;if(nt!==null){S.shared.pending=null;var ft=nt,Tt=ft.next;ft.next=null,W===null?N=Tt:W.next=Tt,W=ft;var Ut=r.alternate;Ut!==null&&(Ut=Ut.updateQueue,nt=Ut.lastBaseUpdate,nt!==W&&(nt===null?Ut.firstBaseUpdate=Tt:nt.next=Tt,Ut.lastBaseUpdate=ft))}if(N!==null){var Pt=S.baseState;W=0,Ut=Tt=ft=null,nt=N;do{var Vt=nt.lane&-536870913,ie=Vt!==nt.lane;if(ie?(ye&Vt)===Vt:(y&Vt)===Vt){Vt!==0&&Vt===cn&&(Nh=!0),Ut!==null&&(Ut=Ut.next={lane:0,tag:nt.tag,payload:nt.payload,callback:null,next:null});t:{var Ja=r,du=nt;Vt=l;var po=f;switch(du.tag){case 1:if(Ja=du.payload,typeof Ja=="function"){Pt=Ja.call(po,Pt,Vt);break t}Pt=Ja;break t;case 3:Ja.flags=Ja.flags&-65537|128;case 0:if(Ja=du.payload,Vt=typeof Ja=="function"?Ja.call(po,Pt,Vt):Ja,Vt==null)break t;Pt=Dn({},Pt,Vt);break t;case 2:bi=!0}}Vt=nt.callback,Vt!==null&&(r.flags|=64,ie&&(r.flags|=8192),ie=S.callbacks,ie===null?S.callbacks=[Vt]:ie.push(Vt))}else ie={lane:Vt,tag:nt.tag,payload:nt.payload,callback:nt.callback,next:null},Ut===null?(Tt=Ut=ie,ft=Pt):Ut=Ut.next=ie,W|=Vt;if(nt=nt.next,nt===null){if(nt=S.shared.pending,nt===null)break;ie=nt,nt=ie.next,ie.next=null,S.lastBaseUpdate=ie,S.shared.pending=null}}while(!0);Ut===null&&(ft=Pt),S.baseState=ft,S.firstBaseUpdate=Tt,S.lastBaseUpdate=Ut,N===null&&(S.shared.lanes=0),Za|=W,r.lanes=W,r.memoizedState=Pt}}function ku(r,l){if(typeof r!="function")throw Error(u(191,r));r.call(l)}function Hu(r,l){var f=r.callbacks;if(f!==null)for(r.callbacks=null,r=0;r<f.length;r++)ku(f[r],l)}function ya(r,l){if(Ii(r,l))return!0;if(typeof r!="object"||r===null||typeof l!="object"||l===null)return!1;var f=Object.keys(r),y=Object.keys(l);if(f.length!==y.length)return!1;for(y=0;y<f.length;y++){var S=f[y];if(!Rm.call(l,S)||!Ii(r[S],l[S]))return!1}return!0}function Yr(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Ki(){}function _a(r,l,f){switch(f=r[f],f===void 0?r.push(l):f!==l&&(l.then(Ki,Ki),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,r===Rc?Error(u(483)):r;default:if(typeof l.status=="string")l.then(Ki,Ki);else{if(r=Xe,r!==null&&100<r.shellSuspendCounter)throw Error(u(482));r=l,r.status="pending",r.then(function(y){if(l.status==="pending"){var S=l;S.status="fulfilled",S.value=y}},function(y){if(l.status==="pending"){var S=l;S.status="rejected",S.reason=y}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,r===Rc?Error(u(483)):r}throw Ai=l,Rc}}function Qr(){if(Ai===null)throw Error(u(459));var r=Ai;return Ai=null,r}function Xr(r){var l=Ri;return Ri+=1,uo===null&&(uo=[]),_a(uo,r,l)}function Zr(r,l){l=l.props.ref,r.ref=l!==void 0?l:null}function er(r,l){throw l.$$typeof===Tf?Error(u(525)):(r=Object.prototype.toString.call(l),Error(u(31,r==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":r)))}function Ll(r){var l=r._init;return l(r._payload)}function Sn(r){function l(pt,ut){if(r){var _t=pt.deletions;_t===null?(pt.deletions=[ut],pt.flags|=16):_t.push(ut)}}function f(pt,ut){if(!r)return null;for(;ut!==null;)l(pt,ut),ut=ut.sibling;return null}function y(pt){for(var ut=new Map;pt!==null;)pt.key!==null?ut.set(pt.key,pt):ut.set(pt.index,pt),pt=pt.sibling;return ut}function S(pt,ut){return pt=gs(pt,ut),pt.index=0,pt.sibling=null,pt}function N(pt,ut,_t){return pt.index=_t,r?(_t=pt.alternate,_t!==null?(_t=_t.index,_t<ut?(pt.flags|=33554434,ut):_t):(pt.flags|=33554434,ut)):(pt.flags|=1048576,ut)}function W(pt){return r&&pt.alternate===null&&(pt.flags|=33554434),pt}function nt(pt,ut,_t,xt){return ut===null||ut.tag!==6?(ut=pc(_t,pt.mode,xt),ut.return=pt,ut):(ut=S(ut,_t),ut.return=pt,ut)}function ft(pt,ut,_t,xt){var Ht=_t.type;return Ht===ll?Ut(pt,ut,_t.props.children,xt,_t.key):ut!==null&&(ut.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===_s&&Ll(Ht)===ut.type)?(ut=S(ut,_t.props),Zr(ut,_t),ut.return=pt,ut):(ut=to(_t.type,_t.key,_t.props,null,pt.mode,xt),Zr(ut,_t),ut.return=pt,ut)}function Tt(pt,ut,_t,xt){return ut===null||ut.tag!==4||ut.stateNode.containerInfo!==_t.containerInfo||ut.stateNode.implementation!==_t.implementation?(ut=ea(_t,pt.mode,xt),ut.return=pt,ut):(ut=S(ut,_t.children||[]),ut.return=pt,ut)}function Ut(pt,ut,_t,xt,Ht){return ut===null||ut.tag!==7?(ut=rl(_t,pt.mode,xt,Ht),ut.return=pt,ut):(ut=S(ut,_t),ut.return=pt,ut)}function Pt(pt,ut,_t){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return ut=pc(""+ut,pt.mode,_t),ut.return=pt,ut;if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case sl:return _t=to(ut.type,ut.key,ut.props,null,pt.mode,_t),Zr(_t,ut),_t.return=pt,_t;case Ur:return ut=ea(ut,pt.mode,_t),ut.return=pt,ut;case _s:var xt=ut._init;return ut=xt(ut._payload),Pt(pt,ut,_t)}if(fl(ut)||c(ut))return ut=rl(ut,pt.mode,_t,null),ut.return=pt,ut;if(typeof ut.then=="function")return Pt(pt,Xr(ut),_t);if(ut.$$typeof===ul)return Pt(pt,vt(pt,ut),_t);er(pt,ut)}return null}function Vt(pt,ut,_t,xt){var Ht=ut!==null?ut.key:null;if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return Ht!==null?null:nt(pt,ut,""+_t,xt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case sl:return _t.key===Ht?ft(pt,ut,_t,xt):null;case Ur:return _t.key===Ht?Tt(pt,ut,_t,xt):null;case _s:return Ht=_t._init,_t=Ht(_t._payload),Vt(pt,ut,_t,xt)}if(fl(_t)||c(_t))return Ht!==null?null:Ut(pt,ut,_t,xt,null);if(typeof _t.then=="function")return Vt(pt,ut,Xr(_t),xt);if(_t.$$typeof===ul)return Vt(pt,ut,vt(pt,_t),xt);er(pt,_t)}return null}function ie(pt,ut,_t,xt,Ht){if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return pt=pt.get(_t)||null,nt(ut,pt,""+xt,Ht);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case sl:return pt=pt.get(xt.key===null?_t:xt.key)||null,ft(ut,pt,xt,Ht);case Ur:return pt=pt.get(xt.key===null?_t:xt.key)||null,Tt(ut,pt,xt,Ht);case _s:var Ze=xt._init;return xt=Ze(xt._payload),ie(pt,ut,_t,xt,Ht)}if(fl(xt)||c(xt))return pt=pt.get(_t)||null,Ut(ut,pt,xt,Ht,null);if(typeof xt.then=="function")return ie(pt,ut,_t,Xr(xt),Ht);if(xt.$$typeof===ul)return ie(pt,ut,_t,vt(ut,xt),Ht);er(ut,xt)}return null}function Ja(pt,ut,_t,xt){for(var Ht=null,Ze=null,Xt=ut,ge=ut=0,tn=null;Xt!==null&&ge<_t.length;ge++){Xt.index>ge?(tn=Xt,Xt=null):tn=Xt.sibling;var Se=Vt(pt,Xt,_t[ge],xt);if(Se===null){Xt===null&&(Xt=tn);break}r&&Xt&&Se.alternate===null&&l(pt,Xt),ut=N(Se,ut,ge),Ze===null?Ht=Se:Ze.sibling=Se,Ze=Se,Xt=tn}if(ge===_t.length)return f(pt,Xt),Oe&&Q(pt,ge),Ht;if(Xt===null){for(;ge<_t.length;ge++)Xt=Pt(pt,_t[ge],xt),Xt!==null&&(ut=N(Xt,ut,ge),Ze===null?Ht=Xt:Ze.sibling=Xt,Ze=Xt);return Oe&&Q(pt,ge),Ht}for(Xt=y(Xt);ge<_t.length;ge++)tn=ie(Xt,pt,ge,_t[ge],xt),tn!==null&&(r&&tn.alternate!==null&&Xt.delete(tn.key===null?ge:tn.key),ut=N(tn,ut,ge),Ze===null?Ht=tn:Ze.sibling=tn,Ze=tn);return r&&Xt.forEach(function(wl){return l(pt,wl)}),Oe&&Q(pt,ge),Ht}function du(pt,ut,_t,xt){if(_t==null)throw Error(u(151));for(var Ht=null,Ze=null,Xt=ut,ge=ut=0,tn=null,Se=_t.next();Xt!==null&&!Se.done;ge++,Se=_t.next()){Xt.index>ge?(tn=Xt,Xt=null):tn=Xt.sibling;var wl=Vt(pt,Xt,Se.value,xt);if(wl===null){Xt===null&&(Xt=tn);break}r&&Xt&&wl.alternate===null&&l(pt,Xt),ut=N(wl,ut,ge),Ze===null?Ht=wl:Ze.sibling=wl,Ze=wl,Xt=tn}if(Se.done)return f(pt,Xt),Oe&&Q(pt,ge),Ht;if(Xt===null){for(;!Se.done;ge++,Se=_t.next())Se=Pt(pt,Se.value,xt),Se!==null&&(ut=N(Se,ut,ge),Ze===null?Ht=Se:Ze.sibling=Se,Ze=Se);return Oe&&Q(pt,ge),Ht}for(Xt=y(Xt);!Se.done;ge++,Se=_t.next())Se=ie(Xt,pt,ge,Se.value,xt),Se!==null&&(r&&Se.alternate!==null&&Xt.delete(Se.key===null?ge:Se.key),ut=N(Se,ut,ge),Ze===null?Ht=Se:Ze.sibling=Se,Ze=Se);return r&&Xt.forEach(function(wm){return l(pt,wm)}),Oe&&Q(pt,ge),Ht}function po(pt,ut,_t,xt){if(typeof _t=="object"&&_t!==null&&_t.type===ll&&_t.key===null&&(_t=_t.props.children),typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case sl:t:{for(var Ht=_t.key;ut!==null;){if(ut.key===Ht){if(Ht=_t.type,Ht===ll){if(ut.tag===7){f(pt,ut.sibling),xt=S(ut,_t.props.children),xt.return=pt,pt=xt;break t}}else if(ut.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===_s&&Ll(Ht)===ut.type){f(pt,ut.sibling),xt=S(ut,_t.props),Zr(xt,_t),xt.return=pt,pt=xt;break t}f(pt,ut);break}else l(pt,ut);ut=ut.sibling}_t.type===ll?(xt=rl(_t.props.children,pt.mode,xt,_t.key),xt.return=pt,pt=xt):(xt=to(_t.type,_t.key,_t.props,null,pt.mode,xt),Zr(xt,_t),xt.return=pt,pt=xt)}return W(pt);case Ur:t:{for(Ht=_t.key;ut!==null;){if(ut.key===Ht)if(ut.tag===4&&ut.stateNode.containerInfo===_t.containerInfo&&ut.stateNode.implementation===_t.implementation){f(pt,ut.sibling),xt=S(ut,_t.children||[]),xt.return=pt,pt=xt;break t}else{f(pt,ut);break}else l(pt,ut);ut=ut.sibling}xt=ea(_t,pt.mode,xt),xt.return=pt,pt=xt}return W(pt);case _s:return Ht=_t._init,_t=Ht(_t._payload),po(pt,ut,_t,xt)}if(fl(_t))return Ja(pt,ut,_t,xt);if(c(_t)){if(Ht=c(_t),typeof Ht!="function")throw Error(u(150));return _t=Ht.call(_t),du(pt,ut,_t,xt)}if(typeof _t.then=="function")return po(pt,ut,Xr(_t),xt);if(_t.$$typeof===ul)return po(pt,ut,vt(pt,_t),xt);er(pt,_t)}return typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint"?(_t=""+_t,ut!==null&&ut.tag===6?(f(pt,ut.sibling),xt=S(ut,_t),xt.return=pt,pt=xt):(f(pt,ut),xt=pc(_t,pt.mode,xt),xt.return=pt,pt=xt),W(pt)):f(pt,ut)}return function(pt,ut,_t,xt){try{Ri=0;var Ht=po(pt,ut,_t,xt);return uo=null,Ht}catch(Xt){if(Xt===Rc)throw Xt;var Ze=n(29,Xt,null,pt.mode);return Ze.lanes=xt,Ze.return=pt,Ze}finally{}}}function qu(r,l){r=Er,M(_r,r),M(yr,l),Er=r|l.baseLanes}function Tr(){M(_r,Er),M(yr,yr.current)}function br(){Er=_r.current,F(yr),F(_r)}function nr(r){var l=r.alternate;M(ln,ln.current&1),M(ra,r),Fa===null&&(l===null||yr.current!==null||l.memoizedState!==null)&&(Fa=r)}function ju(r){if(r.tag===22){if(M(ln,ln.current),M(ra,r),Fa===null){var l=r.alternate;l!==null&&l.memoizedState!==null&&(Fa=r)}}else Mi()}function Mi(){M(ln,ln.current),M(ra,ra.current)}function ni(r){F(ra),Fa===r&&(Fa=null),F(ln)}function Rn(r){for(var l=r;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||ao(f)||Ec(f)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(l.flags&128)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function ue(){throw Error(u(321))}function ir(r,l){if(l===null)return!1;for(var f=0;f<l.length&&f<r.length;f++)if(!Ii(r[f],l[f]))return!1;return!0}function Wr(r,l,f,y,S,N){return Rs=N,ee=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Zt.H=r===null||r.memoizedState===null?Ds:Pi,El=!1,N=f(y,S),El=!1,co&&(N=ar(l,f,y,S)),Pl(r),N}function Pl(r){Zt.H=Un;var l=Ue!==null&&Ue.next!==null;if(Rs=0,gn=Ue=ee=null,Cs=!1,ou=0,ws=null,l)throw Error(u(300));r===null||qn||(r=r.dependencies,r!==null&&P(r)&&(qn=!0))}function ar(r,l,f,y){ee=r;var S=0;do{if(co&&(ws=null),ou=0,co=!1,25<=S)throw Error(u(301));if(S+=1,gn=Ue=null,r.updateQueue!=null){var N=r.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}Zt.H=Tl,N=l(f,y)}while(co);return N}function Fu(){var r=Zt.H,l=r.useState()[0];return l=typeof l.then=="function"?xa(l):l,r=r.useState()[0],(Ue!==null?Ue.memoizedState:null)!==r&&(ee.flags|=1024),l}function Ar(){var r=Sl!==0;return Sl=0,r}function Jr(r,l,f){l.updateQueue=r.updateQueue,l.flags&=-2053,r.lanes&=~f}function va(r){if(Cs){for(r=r.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}Cs=!1}Rs=0,gn=Ue=ee=null,co=!1,ou=Sl=0,ws=null}function Tn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?ee.memoizedState=gn=r:gn=gn.next=r,gn}function Je(){if(Ue===null){var r=ee.alternate;r=r!==null?r.memoizedState:null}else r=Ue.next;var l=gn===null?ee.memoizedState:gn.next;if(l!==null)gn=l,Ue=r;else{if(r===null)throw ee.alternate===null?Error(u(467)):Error(u(310));Ue=r,r={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},gn===null?ee.memoizedState=gn=r:gn=gn.next=r}return gn}function xa(r){var l=ou;return ou+=1,ws===null&&(ws=[]),r=_a(ws,r,l),l=ee,(gn===null?l.memoizedState:gn.next)===null&&(l=l.alternate,Zt.H=l===null||l.memoizedState===null?Ds:Pi),r}function rn(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return xa(r);if(r.$$typeof===ul)return ot(r)}throw Error(u(438,String(r)))}function zl(r){var l=null,f=ee.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var y=ee.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(l={data:y.data.map(function(S){return S.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Qf(),ee.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(r),y=0;y<r;y++)f[y]=ce;return l.index++,f}function Yi(r,l){return typeof l=="function"?l(r):l}function mi(r){var l=Je();return pi(l,Ue,r)}function pi(r,l,f){var y=r.queue;if(y===null)throw Error(u(311));y.lastRenderedReducer=f;var S=r.baseQueue,N=y.pending;if(N!==null){if(S!==null){var W=S.next;S.next=N.next,N.next=W}l.baseQueue=S=N,y.pending=null}if(N=r.baseState,S===null)r.memoizedState=N;else{l=S.next;var nt=W=null,ft=null,Tt=l,Ut=!1;do{var Pt=Tt.lane&-536870913;if(Pt!==Tt.lane?(ye&Pt)===Pt:(Rs&Pt)===Pt){var Vt=Tt.revertLane;if(Vt===0)ft!==null&&(ft=ft.next={lane:0,revertLane:0,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null}),Pt===cn&&(Ut=!0);else if((Rs&Vt)===Vt){Tt=Tt.next,Vt===cn&&(Ut=!0);continue}else Pt={lane:0,revertLane:Tt.revertLane,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null},ft===null?(nt=ft=Pt,W=N):ft=ft.next=Pt,ee.lanes|=Vt,Za|=Vt;Pt=Tt.action,El&&f(N,Pt),N=Tt.hasEagerState?Tt.eagerState:f(N,Pt)}else Vt={lane:Pt,revertLane:Tt.revertLane,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null},ft===null?(nt=ft=Vt,W=N):ft=ft.next=Vt,ee.lanes|=Pt,Za|=Pt;Tt=Tt.next}while(Tt!==null&&Tt!==l);if(ft===null?W=N:ft.next=nt,!Ii(N,r.memoizedState)&&(qn=!0,Ut&&(f=si,f!==null)))throw f;r.memoizedState=N,r.baseState=W,r.baseQueue=ft,y.lastRenderedState=N}return S===null&&(y.lanes=0),[r.memoizedState,y.dispatch]}function xi(r){var l=Je(),f=l.queue;if(f===null)throw Error(u(311));f.lastRenderedReducer=r;var y=f.dispatch,S=f.pending,N=l.memoizedState;if(S!==null){f.pending=null;var W=S=S.next;do N=r(N,W.action),W=W.next;while(W!==S);Ii(N,l.memoizedState)||(qn=!0),l.memoizedState=N,l.baseQueue===null&&(l.baseState=N),f.lastRenderedState=N}return[N,y]}function Kc(r,l,f){var y=ee,S=Je(),N=Oe;if(N){if(f===void 0)throw Error(u(407));f=f()}else f=l();var W=!Ii((Ue||S).memoizedState,f);if(W&&(S.memoizedState=f,qn=!0),S=S.queue,Gl(Ku.bind(null,y,S,r),[r]),S.getSnapshot!==l||W||gn!==null&&gn.memoizedState.tag&1){if(y.flags|=2048,Ea(9,Mo.bind(null,y,S,f,l),{destroy:void 0},null),Xe===null)throw Error(u(349));N||Rs&60||Oo(y,l,f)}return f}function Oo(r,l,f){r.flags|=16384,r={getSnapshot:l,value:f},l=ee.updateQueue,l===null?(l=Qf(),ee.updateQueue=l,l.stores=[r]):(f=l.stores,f===null?l.stores=[r]:f.push(r))}function Mo(r,l,f,y){l.value=f,l.getSnapshot=y,$r(l)&&ts(r)}function Ku(r,l,f){return f(function(){$r(l)&&ts(r)})}function $r(r){var l=r.getSnapshot;r=r.value;try{var f=l();return!Ii(r,f)}catch{return!0}}function ts(r){var l=le(r,2);l!==null&&sn(l,r,2)}function Qi(r){var l=Tn();if(typeof r=="function"){var f=r;if(r=f(),El){$(!0);try{f()}finally{$(!1)}}}return l.memoizedState=l.baseState=r,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:r},l}function yi(r,l,f,y){return r.baseState=f,pi(r,Ue,typeof y=="function"?y:Yi)}function Yc(r,l,f,y,S){if(Ks(r))throw Error(u(485));if(r=l.action,r!==null){var N={payload:S,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){N.listeners.push(W)}};Zt.T!==null?f(!0):N.isTransition=!1,y(N),f=l.pending,f===null?(N.next=l.pending=N,Qc(l,N)):(N.next=f.next,l.pending=f.next=N)}}function Qc(r,l){var f=l.action,y=l.payload,S=r.state;if(l.isTransition){var N=Zt.T,W={};Zt.T=W;try{var nt=f(S,y),ft=Zt.S;ft!==null&&ft(W,nt),Ps(r,l,nt)}catch(Tt){zs(r,l,Tt)}finally{Zt.T=N}}else try{N=f(S,y),Ps(r,l,N)}catch(Tt){zs(r,l,Tt)}}function Ps(r,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(y){xo(r,l,y)},function(y){return zs(r,l,y)}):xo(r,l,f)}function xo(r,l,f){l.status="fulfilled",l.value=f,Rr(l),r.state=f,l=r.pending,l!==null&&(f=l.next,f===l?r.pending=null:(f=f.next,l.next=f,Qc(r,f)))}function zs(r,l,f){var y=r.pending;if(r.pending=null,y!==null){y=y.next;do l.status="rejected",l.reason=f,Rr(l),l=l.next;while(l!==y)}r.action=null}function Rr(r){r=r.listeners;for(var l=0;l<r.length;l++)(0,r[l])()}function pn(r,l){return l}function es(r,l){if(Oe){var f=Xe.formState;if(f!==null){t:{var y=ee;if(Oe){if(Ye){var S=dm(Ye,mr);if(S){Ye=gl(S),y=Lr(S);break t}}ct(y)}y=!1}y&&(l=f[0])}}f=Tn(),f.memoizedState=f.baseState=l,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pn,lastRenderedState:l},f.queue=y,f=Io.bind(null,ee,y),y.dispatch=f,y=Qi(!1);var N=Va.bind(null,ee,!1,y.queue);return y=Tn(),S={state:l,dispatch:null,action:r,pending:null},y.queue=S,f=Yc.bind(null,ee,S,N,f),S.dispatch=f,y.memoizedState=r,[l,f,!1]}function Bs(r){var l=Je();return Bl(l,Ue,r)}function Bl(r,l,f){l=pi(r,l,pn)[0],r=mi(Yi)[0],l=typeof l=="object"&&l!==null&&typeof l.then=="function"?xa(l):l;var y=Je(),S=y.queue,N=S.dispatch;return f!==y.memoizedState&&(ee.flags|=2048,Ea(9,Ve.bind(null,S,f),{destroy:void 0},null)),[l,N,r]}function Ve(r,l){r.action=l}function Gs(r){var l=Je(),f=Ue;if(f!==null)return Bl(l,f,r);Je(),l=l.memoizedState,f=Je();var y=f.queue.dispatch;return f.memoizedState=r,[l,y,!1]}function Ea(r,l,f,y){return r={tag:r,create:l,inst:f,deps:y,next:null},l=ee.updateQueue,l===null&&(l=Qf(),ee.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=r.next=r:(y=f.next,f.next=r,r.next=y,l.lastEffect=r),r}function Sa(){return Je().memoizedState}function Vo(r,l,f,y){var S=Tn();ee.flags|=r,S.memoizedState=Ea(1|l,f,{destroy:void 0},y===void 0?null:y)}function ks(r,l,f,y){var S=Je();y=y===void 0?null:y;var N=S.memoizedState.inst;Ue!==null&&y!==null&&ir(y,Ue.memoizedState.deps)?S.memoizedState=Ea(l,f,N,y):(ee.flags|=r,S.memoizedState=Ea(1|l,f,N,y))}function Yu(r,l){Vo(8390656,8,r,l)}function Gl(r,l){ks(2048,8,r,l)}function Xc(r,l){return ks(4,2,r,l)}function Zc(r,l){return ks(4,4,r,l)}function rr(r,l){if(typeof l=="function"){r=r();var f=l(r);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return r=r(),l.current=r,function(){l.current=null}}function Ta(r,l,f){f=f!=null?f.concat([r]):null,ks(4,4,rr.bind(null,l,r),f)}function Hs(){}function Cr(r,l){var f=Je();l=l===void 0?null:l;var y=f.memoizedState;return l!==null&&ir(l,y[1])?y[0]:(f.memoizedState=[r,l],r)}function wr(r,l){var f=Je();l=l===void 0?null:l;var y=f.memoizedState;if(l!==null&&ir(l,y[1]))return y[0];if(y=r(),El){$(!0);try{r()}finally{$(!1)}}return f.memoizedState=[y,l],y}function sr(r,l,f){return f===void 0||Rs&1073741824?r.memoizedState=l:(r.memoizedState=f,r=uc(),ee.lanes|=r,Za|=r,f)}function Uo(r,l,f,y){return Ii(f,l)?f:yr.current!==null?(r=sr(r,f,y),Ii(r,l)||(qn=!0),r):Rs&42?(r=uc(),ee.lanes|=r,Za|=r,l):(qn=!0,r.memoizedState=f)}function Qu(r,l,f,y,S){var N=dl();Ui(N!==0&&8>N?N:8);var W=Zt.T,nt={};Zt.T=nt,Va(r,!1,l,f);try{var ft=S(),Tt=Zt.S;if(Tt!==null&&Tt(nt,ft),ft!==null&&typeof ft=="object"&&typeof ft.then=="function"){var Ut=ji(ft,y);Zi(r,l,Ut,vi(r))}else Zi(r,l,y,vi(r))}catch(Pt){Zi(r,l,{then:function(){},status:"rejected",reason:Pt},vi())}finally{Ui(N),Zt.T=W}}function qs(r){var l=r.memoizedState;if(l!==null)return l;l={memoizedState:io,baseState:io,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:io},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:f},next:null},r.memoizedState=l,r=r.alternate,r!==null&&(r.memoizedState=l),l}function Xi(){return ot(Es)}function js(){return Je().memoizedState}function lr(){return Je().memoizedState}function Fs(r){for(var l=r.return;l!==null;){switch(l.tag){case 24:case 3:var f=vi();r=an(f);var y=Ae(l,r,f);y!==null&&(sn(y,l,f),pa(y,l,f)),l={cache:ve()},r.payload=l;return}l=l.return}}function ns(r,l,f){var y=vi();f={lane:y,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Ks(r)?Wn(l,f):(f=Fe(r,l,f,y),f!==null&&(sn(f,r,y),ze(f,l,y)))}function Io(r,l,f){var y=vi();Zi(r,l,f,y)}function Zi(r,l,f,y){var S={lane:y,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Ks(r))Wn(l,S);else{var N=r.alternate;if(r.lanes===0&&(N===null||N.lanes===0)&&(N=l.lastRenderedReducer,N!==null))try{var W=l.lastRenderedState,nt=N(W,f);if(S.hasEagerState=!0,S.eagerState=nt,Ii(nt,W))return Yt(r,l,S,0),Xe===null&&oe(),!1}catch{}finally{}if(f=Fe(r,l,S,y),f!==null)return sn(f,r,y),ze(f,l,y),!0}return!1}function Va(r,l,f,y){if(y={lane:2,revertLane:He(),action:y,hasEagerState:!1,eagerState:null,next:null},Ks(r)){if(l)throw Error(u(479))}else l=Fe(r,f,y,2),l!==null&&sn(l,r,2)}function Ks(r){var l=r.alternate;return r===ee||l!==null&&l===ee}function Wn(r,l){co=Cs=!0;var f=r.pending;f===null?l.next=l:(l.next=f.next,f.next=l),r.pending=l}function ze(r,l,f){if(f&4194176){var y=l.lanes;y&=r.pendingLanes,f|=y,l.lanes=f,K(r,f)}}function Ys(r,l,f,y){l=r.memoizedState,f=f(y,l),f=f==null?l:Dn({},l,f),r.memoizedState=f,r.lanes===0&&(r.updateQueue.baseState=f)}function Qs(r,l,f,y,S,N,W){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(y,N,W):l.prototype&&l.prototype.isPureReactComponent?!ya(f,y)||!ya(S,N):!0}function Xu(r,l,f,y){r=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,y),l.state!==r&&uu.enqueueReplaceState(l,l.state,null)}function Ua(r,l){var f=l;if("ref"in l){f={};for(var y in l)y!=="ref"&&(f[y]=l[y])}if(r=r.defaultProps){f===l&&(f=Dn({},f));for(var S in r)f[S]===void 0&&(f[S]=r[S])}return f}function is(r,l){try{var f=r.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(y){setTimeout(function(){throw y})}}function or(r,l,f){try{var y=r.onCaughtError;y(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function as(r,l,f){return f=an(f),f.tag=3,f.payload={element:null},f.callback=function(){is(r,l)},f}function ba(r){return r=an(r),r.tag=3,r}function Zu(r,l,f,y){var S=f.type.getDerivedStateFromError;if(typeof S=="function"){var N=y.value;r.payload=function(){return S(N)},r.callback=function(){or(l,f,y)}}var W=f.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(r.callback=function(){or(l,f,y),typeof S!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var nt=y.stack;this.componentDidCatch(y.value,{componentStack:nt!==null?nt:""})})}function cf(r,l,f,y,S){if(f.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(l=f.alternate,l!==null&&A(l,f,S,!0),f=ra.current,f!==null){switch(f.tag){case 13:return Fa===null?Ha():f.alternate===null&&mn===0&&(mn=3),f.flags&=-257,f.flags|=65536,f.lanes=S,y===Li?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([y]):l.add(y),al(r,y,S)),!1;case 22:return f.flags|=65536,y===Li?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([y])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([y]):f.add(y)),al(r,y,S)),!1}throw Error(u(435,f.tag))}return al(r,y,S),Ha(),!1}if(Oe)return l=ra.current,l!==null?(!(l.flags&65536)&&(l.flags|=256),l.flags|=65536,l.lanes=S,y!==Ac&&(r=Error(u(422),{cause:y}),$t(dt(r,f)))):(y!==Ac&&(l=Error(u(423),{cause:y}),$t(dt(l,f))),r=r.current.alternate,r.flags|=65536,S&=-S,r.lanes|=S,y=dt(y,f),S=as(r.stateNode,y,S),Fi(r,S),mn!==4&&(mn=2)),!1;var N=Error(u(520),{cause:y});if(N=dt(N,f),hu===null?hu=[N]:hu.push(N),mn!==4&&(mn=2),l===null)return!0;y=dt(y,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,r=S&-S,f.lanes|=r,r=as(f.stateNode,y,r),Fi(f,r),!1;case 1:if(l=f.type,N=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(qr===null||!qr.has(N))))return f.flags|=65536,S&=-S,f.lanes|=S,S=ba(S),Zu(S,r,f,y),Fi(f,S),!1}f=f.return}while(f!==null);return!1}function yn(r,l,f,y){l.child=r===null?Gr(l,null,f,y):vl(l,r.child,f,y)}function kl(r,l,f,y,S){f=f.render;var N=l.ref;if("ref"in y){var W={};for(var nt in y)nt!=="ref"&&(W[nt]=y[nt])}else W=y;return J(l),y=Wr(r,l,f,W,N,S),nt=Ar(),r!==null&&!qn?(Jr(r,l,S),Ia(r,l,S)):(Oe&&nt&&Et(l),l.flags|=1,yn(r,l,y,S),l.child)}function Lo(r,l,f,y,S){if(r===null){var N=f.type;return typeof N=="function"&&!ds(N)&&N.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=N,Hl(r,l,N,y,S)):(r=to(f.type,null,y,l,l.mode,S),r.ref=l.ref,r.return=l,l.child=r)}if(N=r.child,!Bo(r,S)){var W=N.memoizedProps;if(f=f.compare,f=f!==null?f:ya,f(W,y)&&r.ref===l.ref)return Ia(r,l,S)}return l.flags|=1,r=gs(N,y),r.ref=l.ref,r.return=l,l.child=r}function Hl(r,l,f,y,S){if(r!==null){var N=r.memoizedProps;if(ya(N,y)&&r.ref===l.ref)if(qn=!1,l.pendingProps=y=N,Bo(r,S))r.flags&131072&&(qn=!0);else return l.lanes=r.lanes,Ia(r,l,S)}return Fl(r,l,f,y,S)}function Wu(r,l,f){var y=l.pendingProps,S=y.children,N=(l.stateNode._pendingVisibility&2)!==0,W=r!==null?r.memoizedState:null;if(jl(r,l),y.mode==="hidden"||N){if(l.flags&128){if(y=W!==null?W.baseLanes|f:f,r!==null){for(S=l.child=r.child,N=0;S!==null;)N=N|S.lanes|S.childLanes,S=S.sibling;l.childLanes=N&~y}else l.childLanes=0,l.child=null;return ql(r,l,y,f)}if(f&536870912)l.memoizedState={baseLanes:0,cachePool:null},r!==null&&Cn(l,W!==null?W.cachePool:null),W!==null?qu(l,W):Tr(),ju(l);else return l.lanes=l.childLanes=536870912,ql(r,l,W!==null?W.baseLanes|f:f,f)}else W!==null?(Cn(l,W.cachePool),qu(l,W),Mi(),l.memoizedState=null):(r!==null&&Cn(l,null),Tr(),Mi());return yn(r,l,S,f),l.child}function ql(r,l,f,y){var S=Ee();return S=S===null?null:{parent:hr?An._currentValue:An._currentValue2,pool:S},l.memoizedState={baseLanes:f,cachePool:S},r!==null&&Cn(l,null),Tr(),ju(l),r!==null&&A(r,l,y,!0),null}function jl(r,l){var f=l.ref;if(f===null)r!==null&&r.ref!==null&&(l.flags|=2097664);else{if(typeof f!="function"&&typeof f!="object")throw Error(u(284));(r===null||r.ref!==f)&&(l.flags|=2097664)}}function Fl(r,l,f,y,S){return J(l),f=Wr(r,l,f,y,void 0,S),y=Ar(),r!==null&&!qn?(Jr(r,l,S),Ia(r,l,S)):(Oe&&y&&Et(l),l.flags|=1,yn(r,l,f,S),l.child)}function Xs(r,l,f,y,S,N){return J(l),l.updateQueue=null,f=ar(l,y,f,S),Pl(r),y=Ar(),r!==null&&!qn?(Jr(r,l,N),Ia(r,l,N)):(Oe&&y&&Et(l),l.flags|=1,yn(r,l,f,N),l.child)}function Ju(r,l,f,y,S){if(J(l),l.stateNode===null){var N=lo,W=f.contextType;typeof W=="object"&&W!==null&&(N=ot(W)),N=new f(y,N),l.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=uu,l.stateNode=N,N._reactInternals=l,N=l.stateNode,N.props=y,N.state=l.memoizedState,N.refs={},ma(l),W=f.contextType,N.context=typeof W=="object"&&W!==null?ot(W):lo,N.state=l.memoizedState,W=f.getDerivedStateFromProps,typeof W=="function"&&(Ys(l,f,W,y),N.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(W=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),W!==N.state&&uu.enqueueReplaceState(N,N.state,null),Kr(l,y,N,S),Zn(),N.state=l.memoizedState),typeof N.componentDidMount=="function"&&(l.flags|=4194308),y=!0}else if(r===null){N=l.stateNode;var nt=l.memoizedProps,ft=Ua(f,nt);N.props=ft;var Tt=N.context,Ut=f.contextType;W=lo,typeof Ut=="object"&&Ut!==null&&(W=ot(Ut));var Pt=f.getDerivedStateFromProps;Ut=typeof Pt=="function"||typeof N.getSnapshotBeforeUpdate=="function",nt=l.pendingProps!==nt,Ut||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(nt||Tt!==W)&&Xu(l,N,y,W),bi=!1;var Vt=l.memoizedState;N.state=Vt,Kr(l,y,N,S),Zn(),Tt=l.memoizedState,nt||Vt!==Tt||bi?(typeof Pt=="function"&&(Ys(l,f,Pt,y),Tt=l.memoizedState),(ft=bi||Qs(l,f,ft,y,Vt,Tt,W))?(Ut||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(l.flags|=4194308)):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=Tt),N.props=y,N.state=Tt,N.context=W,y=ft):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{N=l.stateNode,Pn(r,l),W=l.memoizedProps,Ut=Ua(f,W),N.props=Ut,Pt=l.pendingProps,Vt=N.context,Tt=f.contextType,ft=lo,typeof Tt=="object"&&Tt!==null&&(ft=ot(Tt)),nt=f.getDerivedStateFromProps,(Tt=typeof nt=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(W!==Pt||Vt!==ft)&&Xu(l,N,y,ft),bi=!1,Vt=l.memoizedState,N.state=Vt,Kr(l,y,N,S),Zn();var ie=l.memoizedState;W!==Pt||Vt!==ie||bi||r!==null&&r.dependencies!==null&&P(r.dependencies)?(typeof nt=="function"&&(Ys(l,f,nt,y),ie=l.memoizedState),(Ut=bi||Qs(l,f,Ut,y,Vt,ie,ft)||r!==null&&r.dependencies!==null&&P(r.dependencies))?(Tt||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(y,ie,ft),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(y,ie,ft)),typeof N.componentDidUpdate=="function"&&(l.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof N.componentDidUpdate!="function"||W===r.memoizedProps&&Vt===r.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||W===r.memoizedProps&&Vt===r.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=ie),N.props=y,N.state=ie,N.context=ft,y=Ut):(typeof N.componentDidUpdate!="function"||W===r.memoizedProps&&Vt===r.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||W===r.memoizedProps&&Vt===r.memoizedState||(l.flags|=1024),y=!1)}return N=y,jl(r,l),y=(l.flags&128)!==0,N||y?(N=l.stateNode,f=y&&typeof f.getDerivedStateFromError!="function"?null:N.render(),l.flags|=1,r!==null&&y?(l.child=vl(l,r.child,null,S),l.child=vl(l,null,f,S)):yn(r,l,f,S),l.memoizedState=N.state,r=l.child):r=Ia(r,l,S),r}function $u(r,l,f,y){return zt(),l.flags|=256,yn(r,l,f,y),l.child}function Kl(r){return{baseLanes:r,cachePool:zn()}}function rs(r,l,f){return r=r!==null?r.childLanes&~f:0,l&&(r|=Oa),r}function tc(r,l,f){var y=l.pendingProps,S=!1,N=(l.flags&128)!==0,W;if((W=N)||(W=r!==null&&r.memoizedState===null?!1:(ln.current&2)!==0),W&&(S=!0,l.flags&=-129),W=(l.flags&32)!==0,l.flags&=-33,r===null){if(Oe){if(S?nr(l):Mi(),Oe){var nt=Ye,ft;(ft=nt)&&(nt=mm(nt,mr),nt!==null?(l.memoizedState={dehydrated:nt,treeContext:gr!==null?{id:zr,overflow:Br}:null,retryLane:536870912},ft=n(18,null,null,0),ft.stateNode=nt,ft.return=l,l.child=ft,xn=l,Ye=null,ft=!0):ft=!1),ft||ct(l)}if(nt=l.memoizedState,nt!==null&&(nt=nt.dehydrated,nt!==null))return Ec(nt)?l.lanes=16:l.lanes=536870912,null;ni(l)}return nt=y.children,y=y.fallback,S?(Mi(),S=l.mode,nt=Po({mode:"hidden",children:nt},S),y=rl(y,S,f,null),nt.return=l,y.return=l,nt.sibling=y,l.child=nt,S=l.child,S.memoizedState=Kl(f),S.childLanes=rs(r,W,f),l.memoizedState=wc,y):(nr(l),Zs(l,nt))}if(ft=r.memoizedState,ft!==null&&(nt=ft.dehydrated,nt!==null)){if(N)l.flags&256?(nr(l),l.flags&=-257,l=Yl(r,l,f)):l.memoizedState!==null?(Mi(),l.child=r.child,l.flags|=128,l=null):(Mi(),S=y.fallback,nt=l.mode,y=Po({mode:"visible",children:y.children},nt),S=rl(S,nt,f,null),S.flags|=2,y.return=l,S.return=l,y.sibling=S,l.child=y,vl(l,r.child,null,f),y=l.child,y.memoizedState=Kl(f),y.childLanes=rs(r,W,f),l.memoizedState=wc,l=S);else if(nr(l),Ec(nt))W=yh(nt).digest,y=Error(u(419)),y.stack="",y.digest=W,$t({value:y,source:null,stack:null}),l=Yl(r,l,f);else if(qn||A(r,l,f,!1),W=(f&r.childLanes)!==0,qn||W){if(W=Xe,W!==null){if(y=f&-f,y&42)y=1;else switch(y){case 2:y=1;break;case 8:y=4;break;case 32:y=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:y=64;break;case 268435456:y=134217728;break;default:y=0}if(y=y&(W.suspendedLanes|f)?0:y,y!==0&&y!==ft.retryLane)throw ft.retryLane=y,le(r,y),sn(W,r,y),Xf}ao(nt)||Ha(),l=Yl(r,l,f)}else ao(nt)?(l.flags|=128,l.child=r.child,l=mc.bind(null,r),fm(nt,l),l=null):(r=ft.treeContext,na&&(Ye=Uf(nt),xn=l,Oe=!0,ja=null,mr=!1,r!==null&&(ia[Ti++]=zr,ia[Ti++]=Br,ia[Ti++]=gr,zr=r.id,Br=r.overflow,gr=l)),l=Zs(l,y.children),l.flags|=4096);return l}return S?(Mi(),S=y.fallback,nt=l.mode,ft=r.child,N=ft.sibling,y=gs(ft,{mode:"hidden",children:y.children}),y.subtreeFlags=ft.subtreeFlags&31457280,N!==null?S=gs(N,S):(S=rl(S,nt,f,null),S.flags|=2),S.return=l,y.return=l,y.sibling=S,l.child=y,y=S,S=l.child,nt=r.child.memoizedState,nt===null?nt=Kl(f):(ft=nt.cachePool,ft!==null?(N=hr?An._currentValue:An._currentValue2,ft=ft.parent!==N?{parent:N,pool:N}:ft):ft=zn(),nt={baseLanes:nt.baseLanes|f,cachePool:ft}),S.memoizedState=nt,S.childLanes=rs(r,W,f),l.memoizedState=wc,y):(nr(l),f=r.child,r=f.sibling,f=gs(f,{mode:"visible",children:y.children}),f.return=l,f.sibling=null,r!==null&&(W=l.deletions,W===null?(l.deletions=[r],l.flags|=16):W.push(r)),l.child=f,l.memoizedState=null,f)}function Zs(r,l){return l=Po({mode:"visible",children:l},r.mode),l.return=r,r.child=l}function Po(r,l){return oh(r,l,0,null)}function Yl(r,l,f){return vl(l,r.child,null,f),r=Zs(l,l.pendingProps.children),r.flags|=2,l.memoizedState=null,r}function Dr(r,l,f){r.lanes|=l;var y=r.alternate;y!==null&&(y.lanes|=l),Pa(r.return,l,f)}function zo(r,l,f,y,S){var N=r.memoizedState;N===null?r.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:f,tailMode:S}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=y,N.tail=f,N.tailMode=S)}function ec(r,l,f){var y=l.pendingProps,S=y.revealOrder,N=y.tail;if(yn(r,l,y.children,f),y=ln.current,y&2)y=y&1|2,l.flags|=128;else{if(r!==null&&r.flags&128)t:for(r=l.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Dr(r,f,l);else if(r.tag===19)Dr(r,f,l);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===l)break t;for(;r.sibling===null;){if(r.return===null||r.return===l)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}y&=1}switch(M(ln,y),S){case"forwards":for(f=l.child,S=null;f!==null;)r=f.alternate,r!==null&&Rn(r)===null&&(S=f),f=f.sibling;f=S,f===null?(S=l.child,l.child=null):(S=f.sibling,f.sibling=null),zo(l,!1,S,f,N);break;case"backwards":for(f=null,S=l.child,l.child=null;S!==null;){if(r=S.alternate,r!==null&&Rn(r)===null){l.child=S;break}r=S.sibling,S.sibling=f,f=S,S=r}zo(l,!0,f,null,N);break;case"together":zo(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Ia(r,l,f){if(r!==null&&(l.dependencies=r.dependencies),Za|=l.lanes,!(f&l.childLanes))if(r!==null){if(A(r,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(r!==null&&l.child!==r.child)throw Error(u(153));if(l.child!==null){for(r=l.child,f=gs(r,r.pendingProps),l.child=f,f.return=l;r.sibling!==null;)r=r.sibling,f=f.sibling=gs(r,r.pendingProps),f.return=l;f.sibling=null}return l.child}function Bo(r,l){return r.lanes&l?!0:(r=r.dependencies,!!(r!==null&&P(r)))}function Go(r,l,f){switch(l.tag){case 3:gt(l,l.stateNode.containerInfo),ur(l,An,r.memoizedState.cache),zt();break;case 27:case 5:Nt(l);break;case 4:gt(l,l.stateNode.containerInfo);break;case 10:ur(l,l.type,l.memoizedProps.value);break;case 13:var y=l.memoizedState;if(y!==null)return y.dehydrated!==null?(nr(l),l.flags|=128,null):f&l.child.childLanes?tc(r,l,f):(nr(l),r=Ia(r,l,f),r!==null?r.sibling:null);nr(l);break;case 19:var S=(r.flags&128)!==0;if(y=(f&l.childLanes)!==0,y||(A(r,l,f,!1),y=(f&l.childLanes)!==0),S){if(y)return ec(r,l,f);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),M(ln,ln.current),y)break;return null;case 22:case 23:return l.lanes=0,Wu(r,l,f);case 24:ur(l,An,r.memoizedState.cache)}return Ia(r,l,f)}function _i(r,l,f){if(r!==null)if(r.memoizedProps!==l.pendingProps)qn=!0;else{if(!Bo(r,f)&&!(l.flags&128))return qn=!1,Go(r,l,f);qn=!!(r.flags&131072)}else qn=!1,Oe&&l.flags&1048576&&it(l,ru,l.index);switch(l.lanes=0,l.tag){case 16:t:{r=l.pendingProps;var y=l.elementType,S=y._init;if(y=S(y._payload),l.type=y,typeof y=="function")ds(y)?(r=Ua(y,r),l.tag=1,l=Ju(null,l,y,r,f)):(l.tag=0,l=Fl(null,l,y,r,f));else{if(y!=null){if(S=y.$$typeof,S===uh){l.tag=11,l=kl(null,l,y,r,f);break t}else if(S===Zo){l.tag=14,l=Lo(null,l,y,r,f);break t}}throw l=d(y)||y,Error(u(306,l,""))}}return l;case 0:return Fl(r,l,l.type,l.pendingProps,f);case 1:return y=l.type,S=Ua(y,l.pendingProps),Ju(r,l,y,S,f);case 3:t:{if(gt(l,l.stateNode.containerInfo),r===null)throw Error(u(387));var N=l.pendingProps;S=l.memoizedState,y=S.element,Pn(r,l),Kr(l,N,null,f);var W=l.memoizedState;if(N=W.cache,ur(l,An,N),N!==S.cache&&g(l,[An],f,!0),Zn(),N=W.element,na&&S.isDehydrated)if(S={element:N,isDehydrated:!1,cache:W.cache},l.updateQueue.baseState=S,l.memoizedState=S,l.flags&256){l=$u(r,l,N,f);break t}else if(N!==y){y=dt(Error(u(424)),l),$t(y),l=$u(r,l,N,f);break t}else for(na&&(Ye=ro(l.stateNode.containerInfo),xn=l,Oe=!0,ja=null,mr=!0),f=Gr(l,null,N,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(zt(),N===y){l=Ia(r,l,f);break t}yn(r,l,N,f)}l=l.child}return l;case 26:if(Ca)return jl(r,l),r===null?(f=zf(l.type,null,l.pendingProps,null))?l.memoizedState=f:Oe||(l.stateNode=Hf(l.type,l.pendingProps,bs.current,l)):l.memoizedState=zf(l.type,r.memoizedProps,l.pendingProps,r.memoizedState),null;case 27:if(ri)return Nt(l),r===null&&ri&&Oe&&(y=l.stateNode=Eh(l.type,l.pendingProps,bs.current,Mn.current,!1),xn=l,mr=!0,Ye=Ss(y)),y=l.pendingProps.children,r!==null||Oe?yn(r,l,y,f):l.child=vl(l,null,y,f),jl(r,l),l.child;case 5:return r===null&&Oe&&(Em(l.type,l.pendingProps,Mn.current),(S=y=Ye)&&(y=If(y,l.type,l.pendingProps,mr),y!==null?(l.stateNode=y,xn=l,Ye=Ss(y),mr=!1,S=!0):S=!1),S||ct(l)),Nt(l),S=l.type,N=l.pendingProps,W=r!==null?r.memoizedProps:null,y=N.children,hi(S,N)?y=null:W!==null&&hi(S,W)&&(l.flags|=32),l.memoizedState!==null&&(S=Wr(r,l,Fu,null,null,f),hr?Es._currentValue=S:Es._currentValue2=S),jl(r,l),yn(r,l,y,f),l.child;case 6:return r===null&&Oe&&(ap(l.pendingProps,Mn.current),(r=f=Ye)&&(f=gm(f,l.pendingProps,mr),f!==null?(l.stateNode=f,xn=l,Ye=null,r=!0):r=!1),r||ct(l)),null;case 13:return tc(r,l,f);case 4:return gt(l,l.stateNode.containerInfo),y=l.pendingProps,r===null?l.child=vl(l,null,y,f):yn(r,l,y,f),l.child;case 11:return kl(r,l,l.type,l.pendingProps,f);case 7:return yn(r,l,l.pendingProps,f),l.child;case 8:return yn(r,l,l.pendingProps.children,f),l.child;case 12:return yn(r,l,l.pendingProps.children,f),l.child;case 10:return y=l.pendingProps,ur(l,l.type,y.value),yn(r,l,y.children,f),l.child;case 9:return S=l.type._context,y=l.pendingProps.children,J(l),S=ot(S),y=y(S),l.flags|=1,yn(r,l,y,f),l.child;case 14:return Lo(r,l,l.type,l.pendingProps,f);case 15:return Hl(r,l,l.type,l.pendingProps,f);case 19:return ec(r,l,f);case 22:return Wu(r,l,f);case 24:return J(l),y=ot(An),r===null?(S=Ee(),S===null&&(S=Xe,N=ve(),S.pooledCache=N,N.refCount++,N!==null&&(S.pooledCacheLanes|=f),S=N),l.memoizedState={parent:y,cache:S},ma(l),ur(l,An,S)):(r.lanes&f&&(Pn(r,l),Kr(l,null,null,f),Zn()),S=r.memoizedState,N=l.memoizedState,S.parent!==y?(S={parent:y,cache:y},l.memoizedState=S,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=S),ur(l,An,y)):(y=N.cache,ur(l,An,y),y!==S.cache&&g(l,[An],f,!0))),yn(r,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(u(156,l.tag))}function ur(r,l,f){hr?(M(Ka,l._currentValue),l._currentValue=f):(M(Ka,l._currentValue2),l._currentValue2=f)}function La(r){var l=Ka.current;hr?r._currentValue=l:r._currentValue2=l,F(Ka)}function Pa(r,l,f){for(;r!==null;){var y=r.alternate;if((r.childLanes&l)!==l?(r.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),r===f)break;r=r.return}}function g(r,l,f,y){var S=r.child;for(S!==null&&(S.return=r);S!==null;){var N=S.dependencies;if(N!==null){var W=S.child;N=N.firstContext;t:for(;N!==null;){var nt=N;N=S;for(var ft=0;ft<l.length;ft++)if(nt.context===l[ft]){N.lanes|=f,nt=N.alternate,nt!==null&&(nt.lanes|=f),Pa(N.return,f,r),y||(W=null);break t}N=nt.next}}else if(S.tag===18){if(W=S.return,W===null)throw Error(u(341));W.lanes|=f,N=W.alternate,N!==null&&(N.lanes|=f),Pa(W,f,r),W=null}else W=S.child;if(W!==null)W.return=S;else for(W=S;W!==null;){if(W===r){W=null;break}if(S=W.sibling,S!==null){S.return=W.return,W=S;break}W=W.return}S=W}}function A(r,l,f,y){r=null;for(var S=l,N=!1;S!==null;){if(!N){if(S.flags&524288)N=!0;else if(S.flags&262144)break}if(S.tag===10){var W=S.alternate;if(W===null)throw Error(u(387));if(W=W.memoizedProps,W!==null){var nt=S.type;Ii(S.pendingProps.value,W.value)||(r!==null?r.push(nt):r=[nt])}}else if(S===bc.current){if(W=S.alternate,W===null)throw Error(u(387));W.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(r!==null?r.push(Es):r=[Es])}S=S.return}r!==null&&g(l,r,f,y),l.flags|=262144}function P(r){for(r=r.firstContext;r!==null;){var l=r.context;if(!Ii(hr?l._currentValue:l._currentValue2,r.memoizedValue))return!0;r=r.next}return!1}function J(r){Al=r,Ya=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function ot(r){return Lt(Al,r)}function vt(r,l){return Al===null&&J(r),Lt(r,l)}function Lt(r,l){var f=hr?l._currentValue:l._currentValue2;if(l={context:l,memoizedValue:f,next:null},Ya===null){if(r===null)throw Error(u(308));Ya=l,r.dependencies={lanes:0,firstContext:l},r.flags|=524288}else Ya=Ya.next=l;return f}function ve(){return{controller:new Dc,data:new Map,refCount:0}}function _n(r){r.refCount--,r.refCount===0&&vn(sp,function(){r.controller.abort()})}function Ee(){var r=ho.current;return r!==null?r:Xe.pooledCache}function Cn(r,l){l===null?M(ho,ho.current):M(ho,l.pool)}function zn(){var r=Ee();return r===null?null:{parent:hr?An._currentValue:An._currentValue2,pool:r}}function wn(r){r.flags|=4}function ii(r,l){if(r!==null&&r.child===l.child)return!1;if(l.flags&16)return!0;for(r=l.child;r!==null;){if(r.flags&13878||r.subtreeFlags&13878)return!0;r=r.sibling}return!1}function za(r,l,f,y){if(dn)for(f=l.child;f!==null;){if(f.tag===5||f.tag===6)_c(r,f.stateNode);else if(!(f.tag===4||ri&&f.tag===27)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return;f=f.return}f.sibling.return=f.return,f=f.sibling}else if(fr)for(var S=l.child;S!==null;){if(S.tag===5){var N=S.stateNode;f&&y&&(N=hm(N,S.type,S.memoizedProps)),_c(r,N)}else if(S.tag===6)N=S.stateNode,f&&y&&(N=Vf(N,S.memoizedProps)),_c(r,N);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)N=S.child,N!==null&&(N.return=S),za(r,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===l)break;for(;S.sibling===null;){if(S.return===null||S.return===l)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function ko(r,l,f,y){if(fr)for(var S=l.child;S!==null;){if(S.tag===5){var N=S.stateNode;f&&y&&(N=hm(N,S.type,S.memoizedProps)),xf(r,N)}else if(S.tag===6)N=S.stateNode,f&&y&&(N=Vf(N,S.memoizedProps)),xf(r,N);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)N=S.child,N!==null&&(N.return=S),ko(r,S,!(S.memoizedProps!==null&&S.memoizedProps.mode==="manual"),!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===l)break;for(;S.sibling===null;){if(S.return===null||S.return===l)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function nc(r,l){if(fr&&ii(r,l)){r=l.stateNode;var f=r.containerInfo,y=ph();ko(y,l,!1,!1),r.pendingChildren=y,wn(l),um(f,y)}}function Wc(r,l,f,y){if(dn)r.memoizedProps!==y&&wn(l);else if(fr){var S=r.stateNode,N=r.memoizedProps;if((r=ii(r,l))||N!==y){var W=Mn.current;N=om(S,f,N,y,!r,null),N===S?l.stateNode=S:(ch(N,f,y,W)&&wn(l),l.stateNode=N,r?za(N,l,!1,!1):wn(l))}else l.stateNode=S}}function Jc(r,l,f){if(Cf(l,f)){if(r.flags|=16777216,!wf(l,f))if(ai())r.flags|=8192;else throw Ai=Li,Cc}else r.flags&=-16777217}function $c(r,l){if(bm(l)){if(r.flags|=16777216,!qf(l))if(ai())r.flags|=8192;else throw Ai=Li,Cc}else r.flags&=-16777217}function Ho(r,l){l!==null&&(r.flags|=4),r.flags&16384&&(l=r.tag!==22?w():536870912,r.lanes|=l,Fn|=l)}function qo(r,l){if(!Oe)switch(r.tailMode){case"hidden":l=r.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?r.tail=null:f.sibling=null;break;case"collapsed":f=r.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?l||r.tail===null?r.tail=null:r.tail.sibling=null:y.sibling=null}}function fn(r){var l=r.alternate!==null&&r.alternate.child===r.child,f=0,y=0;if(l)for(var S=r.child;S!==null;)f|=S.lanes|S.childLanes,y|=S.subtreeFlags&31457280,y|=S.flags&31457280,S.return=r,S=S.sibling;else for(S=r.child;S!==null;)f|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=r,S=S.sibling;return r.subtreeFlags|=y,r.childLanes=f,l}function Mg(r,l,f){var y=l.pendingProps;switch(rt(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(l),null;case 1:return fn(l),null;case 3:return f=l.stateNode,y=null,r!==null&&(y=r.memoizedState.cache),l.memoizedState.cache!==y&&(l.flags|=2048),La(An),Rt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(It(l)?wn(l):r===null||r.memoizedState.isDehydrated&&!(l.flags&256)||(l.flags|=1024,ja!==null&&(hs(ja),ja=null))),nc(r,l),fn(l),null;case 26:if(Ca){f=l.type;var S=l.memoizedState;return r===null?(wn(l),S!==null?(fn(l),$c(l,S)):(fn(l),Jc(l,f,y))):S?S!==r.memoizedState?(wn(l),fn(l),$c(l,S)):(fn(l),l.flags&=-16777217):(dn?r.memoizedProps!==y&&wn(l):Wc(r,l,f,y),fn(l),Jc(l,f,y)),null}case 27:if(ri){if(et(l),f=bs.current,S=l.type,r!==null&&l.stateNode!=null)dn?r.memoizedProps!==y&&wn(l):Wc(r,l,S,y);else{if(!y){if(l.stateNode===null)throw Error(u(166));return fn(l),null}r=Mn.current,It(l)?At(l,r):(r=Eh(S,y,f,r,!0),l.stateNode=r,wn(l))}return fn(l),null}case 5:if(et(l),f=l.type,r!==null&&l.stateNode!=null)Wc(r,l,f,y);else{if(!y){if(l.stateNode===null)throw Error(u(166));return fn(l),null}r=Mn.current,It(l)?At(l,r):(S=Rf(f,y,bs.current,r,l),za(S,l,!1,!1),l.stateNode=S,ch(S,f,y,r)&&wn(l))}return fn(l),Jc(l,l.type,l.pendingProps),null;case 6:if(r&&l.stateNode!=null)f=r.memoizedProps,dn?f!==y&&wn(l):fr&&(f!==y?(l.stateNode=Nn(y,bs.current,Mn.current,l),wn(l)):l.stateNode=r.stateNode);else{if(typeof y!="string"&&l.stateNode===null)throw Error(u(166));if(r=bs.current,f=Mn.current,It(l)){if(!na)throw Error(u(176));if(r=l.stateNode,f=l.memoizedProps,y=null,S=xn,S!==null)switch(S.tag){case 27:case 5:y=S.memoizedProps}_h(r,f,l,y)||ct(l)}else l.stateNode=Nn(y,r,f,l)}return fn(l),null;case 13:if(y=l.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(S=It(l),y!==null&&y.dehydrated!==null){if(r===null){if(!S)throw Error(u(318));if(!na)throw Error(u(344));if(S=l.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(u(317));pm(S,l)}else zt(),!(l.flags&128)&&(l.memoizedState=null),l.flags|=4;fn(l),S=!1}else ja!==null&&(hs(ja),ja=null),S=!0;if(!S)return l.flags&256?(ni(l),l):(ni(l),null)}if(ni(l),l.flags&128)return l.lanes=f,l;if(f=y!==null,r=r!==null&&r.memoizedState!==null,f){y=l.child,S=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(S=y.alternate.memoizedState.cachePool.pool);var N=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(N=y.memoizedState.cachePool.pool),N!==S&&(y.flags|=2048)}return f!==r&&f&&(l.child.flags|=8192),Ho(l,l.updateQueue),fn(l),null;case 4:return Rt(),nc(r,l),r===null&&kg(l.stateNode.containerInfo),fn(l),null;case 10:return La(l.type),fn(l),null;case 19:if(F(ln),S=l.memoizedState,S===null)return fn(l),null;if(y=(l.flags&128)!==0,N=S.rendering,N===null)if(y)qo(S,!1);else{if(mn!==0||r!==null&&r.flags&128)for(r=l.child;r!==null;){if(N=Rn(r),N!==null){for(l.flags|=128,qo(S,!1),r=N.updateQueue,l.updateQueue=r,Ho(l,r),l.subtreeFlags=0,r=f,f=l.child;f!==null;)$l(f,r),f=f.sibling;return M(ln,ln.current&1|2),l.child}r=r.sibling}S.tail!==null&&wa()>Ma&&(l.flags|=128,y=!0,qo(S,!1),l.lanes=4194304)}else{if(!y)if(r=Rn(N),r!==null){if(l.flags|=128,y=!0,r=r.updateQueue,l.updateQueue=r,Ho(l,r),qo(S,!0),S.tail===null&&S.tailMode==="hidden"&&!N.alternate&&!Oe)return fn(l),null}else 2*wa()-S.renderingStartTime>Ma&&f!==536870912&&(l.flags|=128,y=!0,qo(S,!1),l.lanes=4194304);S.isBackwards?(N.sibling=l.child,l.child=N):(r=S.last,r!==null?r.sibling=N:l.child=N,S.last=N)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=wa(),l.sibling=null,r=ln.current,M(ln,y?r&1|2:r&1),l):(fn(l),null);case 22:case 23:return ni(l),br(),y=l.memoizedState!==null,r!==null?r.memoizedState!==null!==y&&(l.flags|=8192):y&&(l.flags|=8192),y?f&536870912&&!(l.flags&128)&&(fn(l),l.subtreeFlags&6&&(l.flags|=8192)):fn(l),f=l.updateQueue,f!==null&&Ho(l,f.retryQueue),f=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),y=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==f&&(l.flags|=2048),r!==null&&F(ho),null;case 24:return f=null,r!==null&&(f=r.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),La(An),fn(l),null;case 25:return null}throw Error(u(156,l.tag))}function Z0(r,l){switch(rt(l),l.tag){case 1:return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 3:return La(An),Rt(),r=l.flags,r&65536&&!(r&128)?(l.flags=r&-65537|128,l):null;case 26:case 27:case 5:return et(l),null;case 13:if(ni(l),r=l.memoizedState,r!==null&&r.dehydrated!==null){if(l.alternate===null)throw Error(u(340));zt()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 19:return F(ln),null;case 4:return Rt(),null;case 10:return La(l.type),null;case 22:case 23:return ni(l),br(),r!==null&&F(ho),r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 24:return La(An),null;case 25:return null;default:return null}}function xg(r,l){switch(rt(l),l.tag){case 3:La(An),Rt();break;case 26:case 27:case 5:et(l);break;case 4:Rt();break;case 13:ni(l);break;case 19:F(ln);break;case 10:La(l.type);break;case 22:case 23:ni(l),br(),r!==null&&F(ho);break;case 24:La(An)}}function ic(r,l){try{var f=l.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var S=y.next;f=S;do{if((f.tag&r)===r){y=void 0;var N=f.create,W=f.inst;y=N(),W.destroy=y}f=f.next}while(f!==S)}}catch(nt){Be(l,l.return,nt)}}function Ws(r,l,f){try{var y=l.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var N=S.next;y=N;do{if((y.tag&r)===r){var W=y.inst,nt=W.destroy;if(nt!==void 0){W.destroy=void 0,S=l;var ft=f;try{nt()}catch(Tt){Be(S,ft,Tt)}}}y=y.next}while(y!==N)}}catch(Tt){Be(l,l.return,Tt)}}function Vg(r){var l=r.updateQueue;if(l!==null){var f=r.stateNode;try{Hu(l,f)}catch(y){Be(r,r.return,y)}}}function Wi(r,l,f){f.props=Ua(r.type,r.memoizedProps),f.state=r.memoizedState;try{f.componentWillUnmount()}catch(y){Be(r,l,y)}}function cr(r,l){try{var f=r.ref;if(f!==null){var y=r.stateNode;switch(r.tag){case 26:case 27:case 5:var S=no(y);break;default:S=y}typeof f=="function"?r.refCleanup=f(S):f.current=S}}catch(N){Be(r,l,N)}}function Ji(r,l){var f=r.ref,y=r.refCleanup;if(f!==null)if(typeof y=="function")try{y()}catch(S){Be(r,l,S)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(S){Be(r,l,S)}else f.current=null}function hf(r){var l=r.type,f=r.memoizedProps,y=r.stateNode;try{tm(y,l,f,r)}catch(S){Be(r,r.return,S)}}function ff(r,l,f){try{em(r.stateNode,r.type,f,l,r)}catch(y){Be(r,r.return,y)}}function df(r){return r.tag===5||r.tag===3||(Ca?r.tag===26:!1)||(ri?r.tag===27:!1)||r.tag===4}function ac(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||df(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&(!ri||r.tag!==27)&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function gf(r,l,f){var y=r.tag;if(y===5||y===6)r=r.stateNode,l?Of(f,r,l):Nf(f,r);else if(!(y===4||ri&&y===27)&&(r=r.child,r!==null))for(gf(r,l,f),r=r.sibling;r!==null;)gf(r,l,f),r=r.sibling}function th(r,l,f){var y=r.tag;if(y===5||y===6)r=r.stateNode,l?nm(f,r,l):Jg(f,r);else if(!(y===4||ri&&y===27)&&(r=r.child,r!==null))for(th(r,l,f),r=r.sibling;r!==null;)th(r,l,f),r=r.sibling}function Ql(r,l,f){r=r.containerInfo;try{cm(r,f)}catch(y){Be(l,l.return,y)}}function mf(r,l){for(Gg(r.containerInfo),Kt=l;Kt!==null;)if(r=Kt,l=r.child,(r.subtreeFlags&1028)!==0&&l!==null)l.return=r,Kt=l;else for(;Kt!==null;){r=Kt;var f=r.alternate;switch(l=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if(l&1024&&f!==null){l=void 0;var y=r,S=f.memoizedProps;f=f.memoizedState;var N=y.stateNode;try{var W=Ua(y.type,S,y.elementType===y.type);l=N.getSnapshotBeforeUpdate(W,f),N.__reactInternalSnapshotBeforeUpdate=l}catch(nt){Be(y,y.return,nt)}}break;case 3:l&1024&&dn&&lm(r.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(l&1024)throw Error(u(163))}if(l=r.sibling,l!==null){l.return=r.return,Kt=l;break}Kt=r.return}return W=$e,$e=!1,W}function jo(r,l,f){var y=f.flags;switch(f.tag){case 0:case 11:case 15:ls(r,f),y&4&&ic(5,f);break;case 1:if(ls(r,f),y&4)if(r=f.stateNode,l===null)try{r.componentDidMount()}catch(nt){Be(f,f.return,nt)}else{var S=Ua(f.type,l.memoizedProps);l=l.memoizedState;try{r.componentDidUpdate(S,l,r.__reactInternalSnapshotBeforeUpdate)}catch(nt){Be(f,f.return,nt)}}y&64&&Vg(f),y&512&&cr(f,f.return);break;case 3:if(ls(r,f),y&64&&(y=f.updateQueue,y!==null)){if(r=null,f.child!==null)switch(f.child.tag){case 27:case 5:r=no(f.child.stateNode);break;case 1:r=f.child.stateNode}try{Hu(y,r)}catch(nt){Be(f,f.return,nt)}}break;case 26:if(Ca){ls(r,f),y&512&&cr(f,f.return);break}case 27:case 5:ls(r,f),l===null&&y&4&&hf(f),y&512&&cr(f,f.return);break;case 12:ls(r,f);break;case 13:ls(r,f),y&4&&Xl(r,f);break;case 22:if(S=f.memoizedState!==null||Ns,!S){l=l!==null&&l.memoizedState!==null||ne;var N=Ns,W=ne;Ns=S,(ne=l)&&!W?Js(r,f,(f.subtreeFlags&8772)!==0):ls(r,f),Ns=N,ne=W}y&512&&(f.memoizedProps.mode==="manual"?cr(f,f.return):Ji(f,f.return));break;default:ls(r,f)}}function eh(r){var l=r.alternate;l!==null&&(r.alternate=null,eh(l)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(l=r.stateNode,l!==null&&jg(l)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Ba(r,l,f){for(f=f.child;f!==null;)ss(r,l,f),f=f.sibling}function ss(r,l,f){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(au,f)}catch{}switch(f.tag){case 26:if(Ca){ne||Ji(f,l),Ba(r,l,f),f.memoizedState?Gf(f.memoizedState):f.stateNode&&eu(f.stateNode);break}case 27:if(ri){ne||Ji(f,l);var y=Ie,S=In;Ie=f.stateNode,Ba(r,l,f),Kf(f.stateNode),Ie=y,In=S;break}case 5:ne||Ji(f,l);case 6:if(dn){if(y=Ie,S=In,Ie=null,Ba(r,l,f),Ie=y,In=S,Ie!==null)if(In)try{am(Ie,f.stateNode)}catch(N){Be(f,l,N)}else try{im(Ie,f.stateNode)}catch(N){Be(f,l,N)}}else Ba(r,l,f);break;case 18:dn&&Ie!==null&&(In?Lf(Ie,f.stateNode):vm(Ie,f.stateNode));break;case 4:dn?(y=Ie,S=In,Ie=f.stateNode.containerInfo,In=!0,Ba(r,l,f),Ie=y,In=S):(fr&&Ql(f.stateNode,f,ph()),Ba(r,l,f));break;case 0:case 11:case 14:case 15:ne||Ws(2,f,l),ne||Ws(4,f,l),Ba(r,l,f);break;case 1:ne||(Ji(f,l),y=f.stateNode,typeof y.componentWillUnmount=="function"&&Wi(f,l,y)),Ba(r,l,f);break;case 21:Ba(r,l,f);break;case 22:ne||Ji(f,l),ne=(y=ne)||f.memoizedState!==null,Ba(r,l,f),ne=y;break;default:Ba(r,l,f)}}function Xl(r,l){if(na&&l.memoizedState===null&&(r=l.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{vh(r)}catch(f){Be(l,l.return,f)}}function pf(r){switch(r.tag){case 13:case 19:var l=r.stateNode;return l===null&&(l=r.stateNode=new de),l;case 22:return r=r.stateNode,l=r._retryCache,l===null&&(l=r._retryCache=new de),l;default:throw Error(u(435,r.tag))}}function nh(r,l){var f=pf(r);l.forEach(function(y){var S=lh.bind(null,r,y);f.has(y)||(f.add(y),y.then(S,S))})}function Bn(r,l){var f=l.deletions;if(f!==null)for(var y=0;y<f.length;y++){var S=f[y],N=r,W=l;if(dn){var nt=W;t:for(;nt!==null;){switch(nt.tag){case 27:case 5:Ie=nt.stateNode,In=!1;break t;case 3:Ie=nt.stateNode.containerInfo,In=!0;break t;case 4:Ie=nt.stateNode.containerInfo,In=!0;break t}nt=nt.return}if(Ie===null)throw Error(u(160));ss(N,W,S),Ie=null,In=!1}else ss(N,W,S);N=S.alternate,N!==null&&(N.return=null),S.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)yf(l,r),l=l.sibling}function yf(r,l){var f=r.alternate,y=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Bn(l,r),$i(r),y&4&&(Ws(3,r,r.return),ic(3,r),Ws(5,r,r.return));break;case 1:Bn(l,r),$i(r),y&512&&(ne||f===null||Ji(f,f.return)),y&64&&Ns&&(r=r.updateQueue,r!==null&&(y=r.callbacks,y!==null&&(f=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=f===null?y:f.concat(y))));break;case 26:if(Ca){var S=Ci;Bn(l,r),$i(r),y&512&&(ne||f===null||Ji(f,f.return)),y&4&&(y=f!==null?f.memoizedState:null,l=r.memoizedState,f===null?l===null?r.stateNode===null?r.stateNode=Sm(S,r.type,r.memoizedProps,r):kf(S,r.type,r.stateNode):r.stateNode=Bf(S,l,r.memoizedProps):y!==l?(y===null?f.stateNode!==null&&eu(f.stateNode):Gf(y),l===null?kf(S,r.type,r.stateNode):Bf(S,l,r.memoizedProps)):l===null&&r.stateNode!==null&&ff(r,r.memoizedProps,f.memoizedProps));break}case 27:if(ri&&y&4&&r.alternate===null){S=r.stateNode;var N=r.memoizedProps;try{Am(S),Ff(r.type,N,S,r)}catch(Ut){Be(r,r.return,Ut)}}case 5:if(Bn(l,r),$i(r),y&512&&(ne||f===null||Ji(f,f.return)),dn){if(r.flags&32){l=r.stateNode;try{mh(l)}catch(Ut){Be(r,r.return,Ut)}}y&4&&r.stateNode!=null&&(l=r.memoizedProps,ff(r,l,f!==null?f.memoizedProps:l)),y&1024&&(Qe=!0)}break;case 6:if(Bn(l,r),$i(r),y&4&&dn){if(r.stateNode===null)throw Error(u(162));y=r.memoizedProps,f=f!==null?f.memoizedProps:y,l=r.stateNode;try{$g(l,f,y)}catch(Ut){Be(r,r.return,Ut)}}break;case 3:if(Ca?(Tm(),S=Ci,Ci=$n(l.containerInfo),Bn(l,r),Ci=S):Bn(l,r),$i(r),y&4){if(dn&&na&&f!==null&&f.memoizedState.isDehydrated)try{_m(l.containerInfo)}catch(Ut){Be(r,r.return,Ut)}if(fr){y=l.containerInfo,f=l.pendingChildren;try{cm(y,f)}catch(Ut){Be(r,r.return,Ut)}}}Qe&&(Qe=!1,_f(r));break;case 4:Ca?(f=Ci,Ci=$n(r.stateNode.containerInfo),Bn(l,r),$i(r),Ci=f):(Bn(l,r),$i(r)),y&4&&fr&&Ql(r.stateNode,r,r.stateNode.pendingChildren);break;case 12:Bn(l,r),$i(r);break;case 13:Bn(l,r),$i(r),r.child.flags&8192&&r.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Wf=wa()),y&4&&(y=r.updateQueue,y!==null&&(r.updateQueue=null,nh(r,y)));break;case 22:y&512&&(ne||f===null||Ji(f,f.return)),S=r.memoizedState!==null;var W=f!==null&&f.memoizedState!==null,nt=Ns,ft=ne;if(Ns=nt||S,ne=ft||W,Bn(l,r),ne=ft,Ns=nt,$i(r),l=r.stateNode,l._current=r,l._visibility&=-3,l._visibility|=l._pendingVisibility&2,y&8192&&(l._visibility=S?l._visibility&-2:l._visibility|1,S&&(l=Ns||ne,f===null||W||l||Fo(r)),dn&&(r.memoizedProps===null||r.memoizedProps.mode!=="manual"))){t:if(f=null,dn)for(l=r;;){if(l.tag===5||Ca&&l.tag===26||ri&&l.tag===27){if(f===null){W=f=l;try{N=W.stateNode,S?rm(N):ip(W.stateNode,W.memoizedProps)}catch(Ut){Be(W,W.return,Ut)}}}else if(l.tag===6){if(f===null){W=l;try{var Tt=W.stateNode;S?sm(Tt):Mf(Tt,W.memoizedProps)}catch(Ut){Be(W,W.return,Ut)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===r)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break t;for(;l.sibling===null;){if(l.return===null||l.return===r)break t;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}}y&4&&(y=r.updateQueue,y!==null&&(f=y.retryQueue,f!==null&&(y.retryQueue=null,nh(r,f))));break;case 19:Bn(l,r),$i(r),y&4&&(y=r.updateQueue,y!==null&&(r.updateQueue=null,nh(r,y)));break;case 21:break;default:Bn(l,r),$i(r)}}function $i(r){var l=r.flags;if(l&2){try{if(dn&&(!ri||r.tag!==27)){t:{for(var f=r.return;f!==null;){if(df(f)){var y=f;break t}f=f.return}throw Error(u(160))}switch(y.tag){case 27:if(ri){var S=y.stateNode,N=ac(r);th(r,N,S);break}case 5:var W=y.stateNode;y.flags&32&&(mh(W),y.flags&=-33);var nt=ac(r);th(r,nt,W);break;case 3:case 4:var ft=y.stateNode.containerInfo,Tt=ac(r);gf(r,Tt,ft);break;default:throw Error(u(161))}}}catch(Ut){Be(r,r.return,Ut)}r.flags&=-3}l&4096&&(r.flags&=-4097)}function _f(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var l=r;_f(l),l.tag===5&&l.flags&1024&&Kg(l.stateNode),r=r.sibling}}function ls(r,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)jo(r,l.alternate,l),l=l.sibling}function Fo(r){for(r=r.child;r!==null;){var l=r;switch(l.tag){case 0:case 11:case 14:case 15:Ws(4,l,l.return),Fo(l);break;case 1:Ji(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&Wi(l,l.return,f),Fo(l);break;case 26:case 27:case 5:Ji(l,l.return),Fo(l);break;case 22:Ji(l,l.return),l.memoizedState===null&&Fo(l);break;default:Fo(l)}r=r.sibling}}function Js(r,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var y=l.alternate,S=r,N=l,W=N.flags;switch(N.tag){case 0:case 11:case 15:Js(S,N,f),ic(4,N);break;case 1:if(Js(S,N,f),y=N,S=y.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(Tt){Be(y,y.return,Tt)}if(y=N,S=y.updateQueue,S!==null){var nt=y.stateNode;try{var ft=S.shared.hiddenCallbacks;if(ft!==null)for(S.shared.hiddenCallbacks=null,S=0;S<ft.length;S++)ku(ft[S],nt)}catch(Tt){Be(y,y.return,Tt)}}f&&W&64&&Vg(N),cr(N,N.return);break;case 26:case 27:case 5:Js(S,N,f),f&&y===null&&W&4&&hf(N),cr(N,N.return);break;case 12:Js(S,N,f);break;case 13:Js(S,N,f),f&&W&4&&Xl(S,N);break;case 22:N.memoizedState===null&&Js(S,N,f),cr(N,N.return);break;default:Js(S,N,f)}l=l.sibling}}function ih(r,l){var f=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==f&&(r!=null&&r.refCount++,f!=null&&_n(f))}function ah(r,l){r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&_n(r))}function os(r,l,f,y){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Ga(r,l,f,y),l=l.sibling}function Ga(r,l,f,y){var S=l.flags;switch(l.tag){case 0:case 11:case 15:os(r,l,f,y),S&2048&&ic(9,l);break;case 3:os(r,l,f,y),S&2048&&(r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&_n(r)));break;case 12:if(S&2048){os(r,l,f,y),r=l.stateNode;try{var N=l.memoizedProps,W=N.id,nt=N.onPostCommit;typeof nt=="function"&&nt(W,l.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(ft){Be(l,l.return,ft)}}else os(r,l,f,y);break;case 23:break;case 22:N=l.stateNode,l.memoizedState!==null?N._visibility&4?os(r,l,f,y):Nr(r,l):N._visibility&4?os(r,l,f,y):(N._visibility|=4,ci(r,l,f,y,(l.subtreeFlags&10256)!==0)),S&2048&&ih(l.alternate,l);break;case 24:os(r,l,f,y),S&2048&&ah(l.alternate,l);break;default:os(r,l,f,y)}}function ci(r,l,f,y,S){for(S=S&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var N=r,W=l,nt=f,ft=y,Tt=W.flags;switch(W.tag){case 0:case 11:case 15:ci(N,W,nt,ft,S),ic(8,W);break;case 23:break;case 22:var Ut=W.stateNode;W.memoizedState!==null?Ut._visibility&4?ci(N,W,nt,ft,S):Nr(N,W):(Ut._visibility|=4,ci(N,W,nt,ft,S)),S&&Tt&2048&&ih(W.alternate,W);break;case 24:ci(N,W,nt,ft,S),S&&Tt&2048&&ah(W.alternate,W);break;default:ci(N,W,nt,ft,S)}l=l.sibling}}function Nr(r,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=r,y=l,S=y.flags;switch(y.tag){case 22:Nr(f,y),S&2048&&ih(y.alternate,y);break;case 24:Nr(f,y),S&2048&&ah(y.alternate,y);break;default:Nr(f,y)}l=l.sibling}}function us(r){if(r.subtreeFlags&Rl)for(r=r.child;r!==null;)rc(r),r=r.sibling}function rc(r){switch(r.tag){case 26:us(r),r.flags&Rl&&(r.memoizedState!==null?jf(Ci,r.memoizedState,r.memoizedProps):Df(r.type,r.memoizedProps));break;case 5:us(r),r.flags&Rl&&Df(r.type,r.memoizedProps);break;case 3:case 4:if(Ca){var l=Ci;Ci=$n(r.stateNode.containerInfo),us(r),Ci=l}else us(r);break;case 22:r.memoizedState===null&&(l=r.alternate,l!==null&&l.memoizedState!==null?(l=Rl,Rl=16777216,us(r),Rl=l):us(r));break;default:us(r)}}function sc(r){var l=r.alternate;if(l!==null&&(r=l.child,r!==null)){l.child=null;do l=r.sibling,r.sibling=null,r=l;while(r!==null)}}function Zl(r){var l=r.deletions;if(r.flags&16){if(l!==null)for(var f=0;f<l.length;f++){var y=l[f];Kt=y,oc(y,r)}sc(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)cs(r),r=r.sibling}function cs(r){switch(r.tag){case 0:case 11:case 15:Zl(r),r.flags&2048&&Ws(9,r,r.return);break;case 3:Zl(r);break;case 12:Zl(r);break;case 22:var l=r.stateNode;r.memoizedState!==null&&l._visibility&4&&(r.return===null||r.return.tag!==13)?(l._visibility&=-5,lc(r)):Zl(r);break;default:Zl(r)}}function lc(r){var l=r.deletions;if(r.flags&16){if(l!==null)for(var f=0;f<l.length;f++){var y=l[f];Kt=y,oc(y,r)}sc(r)}for(r=r.child;r!==null;){switch(l=r,l.tag){case 0:case 11:case 15:Ws(8,l,l.return),lc(l);break;case 22:f=l.stateNode,f._visibility&4&&(f._visibility&=-5,lc(l));break;default:lc(l)}r=r.sibling}}function oc(r,l){for(;Kt!==null;){var f=Kt;switch(f.tag){case 0:case 11:case 15:Ws(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var y=f.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:_n(f.memoizedState.cache)}if(y=f.child,y!==null)y.return=f,Kt=y;else t:for(f=r;Kt!==null;){y=Kt;var S=y.sibling,N=y.return;if(eh(y),y===f){Kt=null;break t}if(S!==null){S.return=N,Kt=S;break t}Kt=N}}}function $s(r){var l=fh(r);if(l!=null){if(typeof l.memoizedProps["data-testname"]!="string")throw Error(u(364));return l}if(r=Xg(r),r===null)throw Error(u(362));return r.stateNode.current}function rh(r,l){var f=r.tag;switch(l.$$typeof){case hn:if(r.type===l.value)return!0;break;case vr:t:{for(l=l.value,r=[r,0],f=0;f<r.length;){var y=r[f++],S=y.tag,N=r[f++],W=l[N];if(S!==5&&S!==26&&S!==27||!Ir(y)){for(;W!=null&&rh(y,W);)N++,W=l[N];if(N===l.length){l=!0;break t}else for(y=y.child;y!==null;)r.push(y,N),y=y.sibling}}l=!1}return l;case kr:if((f===5||f===26||f===27)&&Wg(r.stateNode,l.value))return!0;break;case zi:if((f===5||f===6||f===26||f===27)&&(r=Zg(r),r!==null&&0<=r.indexOf(l.value)))return!0;break;case cu:if((f===5||f===26||f===27)&&(r=r.memoizedProps["data-testname"],typeof r=="string"&&r.toLowerCase()===l.value.toLowerCase()))return!0;break;default:throw Error(u(365))}return!1}function ta(r){switch(r.$$typeof){case hn:return"<"+(d(r.value)||"Unknown")+">";case vr:return":has("+(ta(r)||"")+")";case kr:return'[role="'+r.value+'"]';case zi:return'"'+r.value+'"';case cu:return'[data-testname="'+r.value+'"]';default:throw Error(u(365))}}function Wl(r,l){var f=[];r=[r,0];for(var y=0;y<r.length;){var S=r[y++],N=S.tag,W=r[y++],nt=l[W];if(N!==5&&N!==26&&N!==27||!Ir(S)){for(;nt!=null&&rh(S,nt);)W++,nt=l[W];if(W===l.length)f.push(S);else for(S=S.child;S!==null;)r.push(S,W),S=S.sibling}}return f}function tl(r,l){if(!tu)throw Error(u(363));r=$s(r),r=Wl(r,l),l=[],r=Array.from(r);for(var f=0;f<r.length;){var y=r[f++],S=y.tag;if(S===5||S===26||S===27)Ir(y)||l.push(y.stateNode);else for(y=y.child;y!==null;)r.push(y),y=y.sibling}return l}function vi(){if(pe&2&&ye!==0)return ye&-ye;if(Zt.T!==null){var r=cn;return r!==0?r:He()}return Hg()}function uc(){Oa===0&&(Oa=!(ye&536870912)||Oe?x():536870912);var r=ra.current;return r!==null&&(r.flags|=32),Oa}function sn(r,l,f){(r===Xe&&je===2||r.cancelPendingCommit!==null)&&(el(r,0),Vi(r,ye,Oa,!1)),G(r,f),(!(pe&2)||r!==Xe)&&(r===Xe&&(!(pe&2)&&(Ms|=f),mn===4&&Vi(r,ye,Oa,!1)),ke(r))}function Aa(r,l,f){if(pe&6)throw Error(u(327));var y=!f&&(l&60)===0&&(l&r.expiredLanes)===0||j(r,l),S=y?Ug(r,l):hc(r,l,!0),N=y;do{if(S===0){Xa&&!y&&Vi(r,l,0,!1);break}else if(S===6)Vi(r,l,0,!Qa);else{if(f=r.current.alternate,N&&!fs(f)){S=hc(r,l,!1),N=!1;continue}if(S===2){if(N=l,r.errorRecoveryDisabledLanes&N)var W=0;else W=r.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){l=W;t:{var nt=r;S=hu;var ft=na&&nt.current.memoizedState.isDehydrated;if(ft&&(el(nt,W).flags|=256),W=hc(nt,W,!1),W!==2){if(fo&&!ft){nt.errorRecoveryDisabledLanes|=N,Ms|=N,S=4;break t}N=Wa,Wa=S,N!==null&&hs(N)}S=W}if(N=!1,S!==2)continue}}if(S===1){el(r,0),Vi(r,l,0,!0);break}t:{switch(y=r,S){case 0:case 1:throw Error(u(345));case 4:if((l&4194176)===l){Vi(y,l,Oa,!Qa);break t}break;case 2:Wa=null;break;case 3:case 5:break;default:throw Error(u(329))}if(y.finishedWork=f,y.finishedLanes=l,(l&62914560)===l&&(N=Wf+300-wa(),10<N)){if(Vi(y,l,Oa,!Qa),H(y,0)!==0)break t;y.timeoutHandle=hh(Or.bind(null,y,f,Wa,go,Oh,l,Oa,Ms,Fn,Qa,2,-0,0),N);break t}Or(y,f,Wa,go,Oh,l,Oa,Ms,Fn,Qa,0,-0,0)}}break}while(!0);ke(r)}function hs(r){Wa===null?Wa=r:Wa.push.apply(Wa,r)}function Or(r,l,f,y,S,N,W,nt,ft,Tt,Ut,Pt,Vt){var ie=l.subtreeFlags;if((ie&8192||(ie&16785408)===16785408)&&(ep(),rc(l),l=Fg(),l!==null)){r.cancelPendingCommit=l(sh.bind(null,r,f,y,S,W,nt,ft,1,Pt,Vt)),Vi(r,N,W,!Tt);return}sh(r,f,y,S,W,nt,ft,Ut,Pt,Vt)}function fs(r){for(var l=r;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var y=0;y<f.length;y++){var S=f[y],N=S.getSnapshot;S=S.value;try{if(!Ii(N(),S))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Vi(r,l,f,y){l&=~Bi,l&=~Ms,r.suspendedLanes|=l,r.pingedLanes&=~l,y&&(r.warmLanes|=l),y=r.expirationTimes;for(var S=l;0<S;){var N=31-On(S),W=1<<N;y[N]=-1,S&=~W}f!==0&&T(r,f,l)}function vf(){return pe&6?!0:(ui(0),!1)}function cc(){if(he!==null){if(je===0)var r=he.return;else r=he,Ya=Al=null,va(r),uo=null,Ri=0,r=he;for(;r!==null;)xg(r.alternate,r),r=r.return;he=null}}function el(r,l){r.finishedWork=null,r.finishedLanes=0;var f=r.timeoutHandle;f!==$o&&(r.timeoutHandle=$o,vc(f)),f=r.cancelPendingCommit,f!==null&&(r.cancelPendingCommit=null,f()),cc(),Xe=r,he=f=gs(r.current,null),ye=l,je=0,jn=null,Qa=!1,Xa=j(r,l),fo=!1,Fn=Oa=Bi=Ms=Za=mn=0,Wa=hu=null,Oh=!1,l&8&&(l|=l&32);var y=r.entangledLanes;if(y!==0)for(r=r.entanglements,y&=l;0<y;){var S=31-On(y),N=1<<S;l|=r[S],y&=~N}return Er=l,oe(),f}function Ei(r,l){ee=null,Zt.H=Un,l===Rc?(l=Qr(),je=3):l===Cc?(l=Qr(),je=4):je=l===Xf?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,jn=l,he===null&&(mn=1,is(r,dt(l,r.current)))}function ai(){var r=ra.current;return r===null?!0:(ye&4194176)===ye?Fa===null:(ye&62914560)===ye||ye&536870912?r===Fa:!1}function Ne(){var r=Zt.H;return Zt.H=Un,r===null?Un:r}function ka(){var r=Zt.A;return Zt.A=Os,r}function Ha(){mn=4,Qa||(ye&4194176)!==ye&&ra.current!==null||(Xa=!0),!(Za&134217727)&&!(Ms&134217727)||Xe===null||Vi(Xe,ye,Oa,!1)}function hc(r,l,f){var y=pe;pe|=2;var S=Ne(),N=ka();(Xe!==r||ye!==l)&&(go=null,el(r,l)),l=!1;var W=mn;t:do try{if(je!==0&&he!==null){var nt=he,ft=jn;switch(je){case 8:cc(),W=6;break t;case 3:case 2:case 6:ra.current===null&&(l=!0);var Tt=je;if(je=0,jn=null,Mr(r,nt,ft,Tt),f&&Xa){W=0;break t}break;default:Tt=je,je=0,jn=null,Mr(r,nt,ft,Tt)}}Jl(),W=mn;break}catch(Ut){Ei(r,Ut)}while(!0);return l&&r.shellSuspendCounter++,Ya=Al=null,pe=y,Zt.H=S,Zt.A=N,he===null&&(Xe=null,ye=0,oe()),W}function Jl(){for(;he!==null;)Ko(he)}function Ug(r,l){var f=pe;pe|=2;var y=Ne(),S=ka();Xe!==r||ye!==l?(go=null,Ma=wa()+500,el(r,l)):Xa=j(r,l);t:do try{if(je!==0&&he!==null){l=he;var N=jn;e:switch(je){case 1:je=0,jn=null,Mr(r,l,N,1);break;case 2:if(Yr(N)){je=0,jn=null,Yo(l);break}l=function(){je===2&&Xe===r&&(je=7),ke(r)},N.then(l,l);break t;case 3:je=7;break t;case 4:je=5;break t;case 7:Yr(N)?(je=0,jn=null,Yo(l)):(je=0,jn=null,Mr(r,l,N,7));break;case 5:var W=null;switch(he.tag){case 26:W=he.memoizedState;case 5:case 27:var nt=he,ft=nt.type,Tt=nt.pendingProps;if(W?qf(W):wf(ft,Tt)){je=0,jn=null;var Ut=nt.sibling;if(Ut!==null)he=Ut;else{var Pt=nt.return;Pt!==null?(he=Pt,nl(Pt)):he=null}break e}}je=0,jn=null,Mr(r,l,N,5);break;case 6:je=0,jn=null,Mr(r,l,N,6);break;case 8:cc(),mn=6;break t;default:throw Error(u(462))}}Ig();break}catch(Vt){Ei(r,Vt)}while(!0);return Ya=Al=null,Zt.H=y,Zt.A=S,pe=f,he!==null?0:(Xe=null,ye=0,oe(),mn)}function Ig(){for(;he!==null&&!pl();)Ko(he)}function Ko(r){var l=_i(r.alternate,r,Er);r.memoizedProps=r.pendingProps,l===null?nl(r):he=l}function Yo(r){var l=r,f=l.alternate;switch(l.tag){case 15:case 0:l=Xs(f,l,l.pendingProps,l.type,void 0,ye);break;case 11:l=Xs(f,l,l.pendingProps,l.type.render,l.ref,ye);break;case 5:va(l);default:xg(f,l),l=he=$l(l,Er),l=_i(f,l,Er)}r.memoizedProps=r.pendingProps,l===null?nl(r):he=l}function Mr(r,l,f,y){Ya=Al=null,va(l),uo=null,Ri=0;var S=l.return;try{if(cf(r,S,l,f,ye)){mn=1,is(r,dt(f,r.current)),he=null;return}}catch(N){if(S!==null)throw he=S,N;mn=1,is(r,dt(f,r.current)),he=null;return}l.flags&32768?(Oe||y===1?r=!0:Xa||ye&536870912?r=!1:(Qa=r=!0,(y===2||y===3||y===6)&&(y=ra.current,y!==null&&y.tag===13&&(y.flags|=16384))),Ef(l,r)):nl(l)}function nl(r){var l=r;do{if(l.flags&32768){Ef(l,Qa);return}r=l.return;var f=Mg(l.alternate,l,Er);if(f!==null){he=f;return}if(l=l.sibling,l!==null){he=l;return}he=l=r}while(l!==null);mn===0&&(mn=5)}function Ef(r,l){do{var f=Z0(r.alternate,r);if(f!==null){f.flags&=32767,he=f;return}if(f=r.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(r=r.sibling,r!==null)){he=r;return}he=r=f}while(r!==null);mn=6,he=null}function sh(r,l,f,y,S,N,W,nt,ft,Tt){var Ut=Zt.T,Pt=dl();try{Ui(2),Zt.T=null,Lg(r,l,f,y,Pt,S,N,W,nt,ft,Tt)}finally{Zt.T=Ut,Ui(Pt)}}function Lg(r,l,f,y,S,N,W,nt){do il();while(Cl!==null);if(pe&6)throw Error(u(327));var ft=r.finishedWork;if(y=r.finishedLanes,ft===null)return null;if(r.finishedWork=null,r.finishedLanes=0,ft===r.current)throw Error(u(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var Tt=ft.lanes|ft.childLanes;if(Tt|=pr,Y(r,y,Tt,N,W,nt),r===Xe&&(he=Xe=null,ye=0),!(ft.subtreeFlags&10256)&&!(ft.flags&10256)||xs||(xs=!0,Mh=Tt,Oc=f,Pg(iu,function(){return il(),null})),f=(ft.flags&15990)!==0,ft.subtreeFlags&15990||f?(f=Zt.T,Zt.T=null,N=dl(),Ui(2),W=pe,pe|=4,mf(r,ft),yf(ft,r),tp(r.containerInfo),r.current=ft,jo(r,ft.alternate,ft),Ts(),pe=W,Ui(N),Zt.T=f):r.current=ft,xs?(xs=!1,Cl=r,fu=y):fc(r,Tt),Tt=r.pendingLanes,Tt===0&&(qr=null),X(ft.stateNode),ke(r),l!==null)for(S=r.onRecoverableError,ft=0;ft<l.length;ft++)Tt=l[ft],S(Tt.value,{componentStack:Tt.stack});return fu&3&&il(),Tt=r.pendingLanes,y&4194218&&Tt&42?r===Jf?mo++:(mo=0,Jf=r):mo=0,ui(0),null}function fc(r,l){(r.pooledCacheLanes&=l)===0&&(l=r.pooledCache,l!=null&&(r.pooledCache=null,_n(l)))}function il(){if(Cl!==null){var r=Cl,l=Mh;Mh=0;var f=k(fu),y=32>f?32:f;f=Zt.T;var S=dl();try{if(Ui(y),Zt.T=null,Cl===null)var N=!1;else{y=Oc,Oc=null;var W=Cl,nt=fu;if(Cl=null,fu=0,pe&6)throw Error(u(331));var ft=pe;if(pe|=4,cs(W.current),Ga(W,W.current,nt,y),pe=ft,ui(0,!1),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(au,W)}catch{}N=!0}return N}finally{Ui(S),Zt.T=f,fc(r,l)}}return!1}function Qo(r,l,f){l=dt(f,l),l=as(r.stateNode,l,2),r=Ae(r,l,2),r!==null&&(G(r,2),ke(r))}function Be(r,l,f){if(r.tag===3)Qo(r,r,f);else for(;l!==null;){if(l.tag===3){Qo(l,r,f);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(qr===null||!qr.has(y))){r=dt(f,r),f=ba(2),y=Ae(l,f,2),y!==null&&(Zu(f,y,l,r),G(y,2),ke(y));break}}l=l.return}}function al(r,l,f){var y=r.pingCache;if(y===null){y=r.pingCache=new Nc;var S=new Set;y.set(l,S)}else S=y.get(l),S===void 0&&(S=new Set,y.set(l,S));S.has(f)||(fo=!0,S.add(f),r=dc.bind(null,r,l,f),l.then(r,r))}function dc(r,l,f){var y=r.pingCache;y!==null&&y.delete(l),r.pingedLanes|=r.suspendedLanes&f,r.warmLanes&=~f,Xe===r&&(ye&f)===f&&(mn===4||mn===3&&(ye&62914560)===ye&&300>wa()-Wf?!(pe&2)&&el(r,0):Bi|=f,Fn===ye&&(Fn=0)),ke(r)}function gc(r,l){l===0&&(l=w()),r=le(r,l),r!==null&&(G(r,l),ke(r))}function mc(r){var l=r.memoizedState,f=0;l!==null&&(f=l.retryLane),gc(r,f)}function lh(r,l){var f=0;switch(r.tag){case 13:var y=r.stateNode,S=r.memoizedState;S!==null&&(f=S.retryLane);break;case 19:y=r.stateNode;break;case 22:y=r.stateNode._retryCache;break;default:throw Error(u(314))}y!==null&&y.delete(l),gc(r,f)}function Pg(r,l){return Pr(r,l)}function zg(r,l,f,y){this.tag=r,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(r){return r=r.prototype,!(!r||!r.isReactComponent)}function gs(r,l){var f=r.alternate;return f===null?(f=n(r.tag,l,r.key,r.mode),f.elementType=r.elementType,f.type=r.type,f.stateNode=r.stateNode,f.alternate=r,r.alternate=f):(f.pendingProps=l,f.type=r.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=r.flags&31457280,f.childLanes=r.childLanes,f.lanes=r.lanes,f.child=r.child,f.memoizedProps=r.memoizedProps,f.memoizedState=r.memoizedState,f.updateQueue=r.updateQueue,l=r.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=r.sibling,f.index=r.index,f.ref=r.ref,f.refCleanup=r.refCleanup,f}function $l(r,l){r.flags&=31457282;var f=r.alternate;return f===null?(r.childLanes=0,r.lanes=l,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=f.childLanes,r.lanes=f.lanes,r.child=f.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=f.memoizedProps,r.memoizedState=f.memoizedState,r.updateQueue=f.updateQueue,r.type=f.type,l=f.dependencies,r.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),r}function to(r,l,f,y,S,N){var W=0;if(y=r,typeof r=="function")ds(r)&&(W=1);else if(typeof r=="string")W=Ca&&ri?Jn(r,f,Mn.current)?26:Sh(r)?27:5:Ca?Jn(r,f,Mn.current)?26:5:ri&&Sh(r)?27:5;else t:switch(r){case ll:return rl(f.children,S,N,l);case eo:W=8,S|=24;break;case ol:return r=n(12,f,l,S|2),r.elementType=ol,r.lanes=N,r;case ys:return r=n(13,f,l,S),r.elementType=ys,r.lanes=N,r;case yc:return r=n(19,f,l,S),r.elementType=yc,r.lanes=N,r;case vs:return oh(f,S,N,l);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case J0:case ul:W=10;break t;case bf:W=9;break t;case uh:W=11;break t;case Zo:W=14;break t;case _s:W=16,y=null;break t}W=29,f=Error(u(130,r===null?"null":typeof r,"")),y=null}return l=n(W,f,l,S),l.elementType=r,l.type=y,l.lanes=N,l}function rl(r,l,f,y){return r=n(7,r,y,l),r.lanes=f,r}function oh(r,l,f,y){r=n(22,r,y,l),r.elementType=vs,r.lanes=f;var S={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var N=S._current;if(N===null)throw Error(u(456));if(!(S._pendingVisibility&2)){var W=le(N,2);W!==null&&(S._pendingVisibility|=2,sn(W,N,2))}},attach:function(){var N=S._current;if(N===null)throw Error(u(456));if(S._pendingVisibility&2){var W=le(N,2);W!==null&&(S._pendingVisibility&=-3,sn(W,N,2))}}};return r.stateNode=S,r}function pc(r,l,f){return r=n(6,r,null,l),r.lanes=f,r}function ea(r,l,f){return l=n(4,r.children!==null?r.children:[],r.key,l),l.lanes=f,l.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},l}function xr(r,l,f,y,S,N,W,nt){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=$o,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=V(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=V(0),this.hiddenUpdates=V(null),this.identifierPrefix=y,this.onUncaughtError=S,this.onCaughtError=N,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=nt,this.incompleteTransitions=new Map}function ms(r,l,f,y,S,N,W,nt,ft,Tt,Ut,Pt){return r=new xr(r,l,f,W,nt,ft,Tt,Pt),l=1,N===!0&&(l|=24),N=n(3,null,null,l),r.current=N,N.stateNode=r,l=ve(),l.refCount++,r.pooledCache=l,l.refCount++,N.memoizedState={element:y,isDehydrated:f,cache:l},ma(N),r}function Sf(r){return r?(r=lo,r):lo}function ps(r){var l=r._reactInternals;if(l===void 0)throw typeof r.render=="function"?Error(u(188)):(r=Object.keys(r).join(","),Error(u(268,r)));return r=C(l),r=r!==null?O(r):null,r===null?null:no(r.stateNode)}function Vr(r,l,f,y,S,N){S=Sf(S),y.context===null?y.context=S:y.pendingContext=S,y=an(l),y.payload={element:f},N=N===void 0?null:N,N!==null&&(y.callback=N),f=Ae(r,y,l),f!==null&&(sn(f,r,l),pa(f,r,l))}function Gn(r,l){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var f=r.retryLane;r.retryLane=f!==0&&f<l?f:l}}function Xo(r,l){Gn(r,l),(r=r.alternate)&&Gn(r,l)}var me={},W0=w0(),Ra=V1(),Dn=Object.assign,Tf=Symbol.for("react.element"),sl=Symbol.for("react.transitional.element"),Ur=Symbol.for("react.portal"),ll=Symbol.for("react.fragment"),eo=Symbol.for("react.strict_mode"),ol=Symbol.for("react.profiler"),J0=Symbol.for("react.provider"),bf=Symbol.for("react.consumer"),ul=Symbol.for("react.context"),uh=Symbol.for("react.forward_ref"),ys=Symbol.for("react.suspense"),yc=Symbol.for("react.suspense_list"),Zo=Symbol.for("react.memo"),_s=Symbol.for("react.lazy"),vs=Symbol.for("react.offscreen"),ce=Symbol.for("react.memo_cache_sentinel"),qe=Symbol.iterator,kn=Symbol.for("react.client.reference"),Zt=W0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,cl,hl,Wo=!1,fl=Array.isArray,Jo=t.rendererVersion,$0=t.rendererPackageName,bn=t.extraDevToolsConfig,no=t.getPublicInstance,Af=t.getRootHostContext,Bg=t.getChildHostContext,Gg=t.prepareForCommit,tp=t.resetAfterCommit,Rf=t.createInstance,_c=t.appendInitialChild,ch=t.finalizeInitialChildren,hi=t.shouldSetTextContent,Nn=t.createTextInstance,hh=t.scheduleTimeout,vc=t.cancelTimeout,$o=t.noTimeout,hr=t.isPrimaryRenderer;t.warnsIfNotActing;var dn=t.supportsMutation,fr=t.supportsPersistence,na=t.supportsHydration,fh=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var kg=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Ui=t.setCurrentUpdatePriority,dl=t.getCurrentUpdatePriority,Hg=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var qg=t.shouldAttemptEagerTransition,jg=t.detachDeletedInstance;t.requestPostPaintCallback;var Cf=t.maySuspendCommit,wf=t.preloadInstance,ep=t.startSuspendingCommit,Df=t.suspendInstance,Fg=t.waitForCommitToBeReady,io=t.NotPendingTransition,Es=t.HostTransitionContext,Kg=t.resetFormInstance;t.bindToConsole;var Yg=t.supportsMicrotasks,Qg=t.scheduleMicrotask,tu=t.supportsTestSelectors,Xg=t.findFiberRoot,np=t.getBoundingRect,Zg=t.getTextContent,Ir=t.isHiddenSubtree,Wg=t.matchAccessibilityRole,dh=t.setFocusIfFocusable,gh=t.setupIntersectionObserver,Jg=t.appendChild,Nf=t.appendChildToContainer,$g=t.commitTextUpdate,tm=t.commitMount,em=t.commitUpdate,nm=t.insertBefore,Of=t.insertInContainerBefore,im=t.removeChild,am=t.removeChildFromContainer,mh=t.resetTextContent,rm=t.hideInstance,sm=t.hideTextInstance,ip=t.unhideInstance,Mf=t.unhideTextInstance,lm=t.clearContainer,om=t.cloneInstance,ph=t.createContainerChildSet,xf=t.appendChildToContainerChildSet,um=t.finalizeContainerChildren,cm=t.replaceContainerChildren,hm=t.cloneHiddenInstance,Vf=t.cloneHiddenTextInstance,ao=t.isSuspenseInstancePending,Ec=t.isSuspenseInstanceFallback,yh=t.getSuspenseInstanceFallbackErrorDetails,fm=t.registerSuspenseInstanceRetry,dm=t.canHydrateFormStateMarker,Lr=t.isFormStateMarkerMatching,gl=t.getNextHydratableSibling,Ss=t.getFirstHydratableChild,ro=t.getFirstHydratableChildWithinContainer,Uf=t.getFirstHydratableChildWithinSuspenseInstance,If=t.canHydrateInstance,gm=t.canHydrateTextInstance,mm=t.canHydrateSuspenseInstance,so=t.hydrateInstance,_h=t.hydrateTextInstance,pm=t.hydrateSuspenseInstance,ym=t.getNextHydratableInstanceAfterSuspenseInstance,_m=t.commitHydratedContainer,vh=t.commitHydratedSuspenseInstance,vm=t.clearSuspenseBoundary,Lf=t.clearSuspenseBoundaryFromContainer,Pf=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var Em=t.validateHydratableInstance,ap=t.validateHydratableTextInstance,Ca=t.supportsResources,Jn=t.isHostHoistableType,$n=t.getHoistableRoot,zf=t.getResource,Bf=t.acquireResource,Gf=t.releaseResource,Sm=t.hydrateHoistable,kf=t.mountHoistable,eu=t.unmountHoistable,Hf=t.createHoistableInstance,Tm=t.prepareToCommitHoistables,bm=t.mayResourceSuspendCommit,qf=t.preloadResource,jf=t.suspendResource,ri=t.supportsSingletons,Eh=t.resolveSingletonInstance,Am=t.clearSingleton,Ff=t.acquireSingletonInstance,Kf=t.releaseSingletonInstance,Sh=t.isHostSingletonType,Th=[],ml=-1,lo={},On=Math.clz32?Math.clz32:D,Yf=Math.log,rp=Math.LN2,Sc=128,nu=4194304,Pr=Ra.unstable_scheduleCallback,dr=Ra.unstable_cancelCallback,pl=Ra.unstable_shouldYield,Ts=Ra.unstable_requestPaint,wa=Ra.unstable_now,bh=Ra.unstable_ImmediatePriority,Tc=Ra.unstable_UserBlockingPriority,iu=Ra.unstable_NormalPriority,oo=Ra.unstable_IdlePriority,Si=Ra.log,Ah=Ra.unstable_setDisableYieldValue,au=null,Hn=null,Ii=typeof Object.is=="function"?Object.is:at,Rh=new WeakMap,Da=[],Na=0,yl=null,ru=0,ia=[],Ti=0,gr=null,zr=1,Br="",Mn=z(null),qa=z(null),bs=z(null),bc=z(null),xn=null,Ye=null,Oe=!1,ja=null,mr=!1,Ac=Error(u(519)),aa=[],As=0,pr=0,un=null,_l=null,Ch=!1,Vn=!1,wh=!1,su=0,lu=null,Dh=0,cn=0,si=null,bi=!1,Nh=!1,Rm=Object.prototype.hasOwnProperty,Rc=Error(u(460)),Cc=Error(u(474)),Li={then:function(){}},Ai=null,uo=null,Ri=0,vl=Sn(!0),Gr=Sn(!1),yr=z(null),_r=z(0),ra=z(null),Fa=null,ln=z(0),Rs=0,ee=null,Ue=null,gn=null,Cs=!1,co=!1,El=!1,Sl=0,ou=0,ws=null,Cm=0,Qf=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Un={readContext:ot,use:rn,useCallback:ue,useContext:ue,useEffect:ue,useImperativeHandle:ue,useLayoutEffect:ue,useInsertionEffect:ue,useMemo:ue,useReducer:ue,useRef:ue,useState:ue,useDebugValue:ue,useDeferredValue:ue,useTransition:ue,useSyncExternalStore:ue,useId:ue};Un.useCacheRefresh=ue,Un.useMemoCache=ue,Un.useHostTransitionStatus=ue,Un.useFormState=ue,Un.useActionState=ue,Un.useOptimistic=ue;var Ds={readContext:ot,use:rn,useCallback:function(r,l){return Tn().memoizedState=[r,l===void 0?null:l],r},useContext:ot,useEffect:Yu,useImperativeHandle:function(r,l,f){f=f!=null?f.concat([r]):null,Vo(4194308,4,rr.bind(null,l,r),f)},useLayoutEffect:function(r,l){return Vo(4194308,4,r,l)},useInsertionEffect:function(r,l){Vo(4,2,r,l)},useMemo:function(r,l){var f=Tn();l=l===void 0?null:l;var y=r();if(El){$(!0);try{r()}finally{$(!1)}}return f.memoizedState=[y,l],y},useReducer:function(r,l,f){var y=Tn();if(f!==void 0){var S=f(l);if(El){$(!0);try{f(l)}finally{$(!1)}}}else S=l;return y.memoizedState=y.baseState=S,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:S},y.queue=r,r=r.dispatch=ns.bind(null,ee,r),[y.memoizedState,r]},useRef:function(r){var l=Tn();return r={current:r},l.memoizedState=r},useState:function(r){r=Qi(r);var l=r.queue,f=Io.bind(null,ee,l);return l.dispatch=f,[r.memoizedState,f]},useDebugValue:Hs,useDeferredValue:function(r,l){var f=Tn();return sr(f,r,l)},useTransition:function(){var r=Qi(!1);return r=Qu.bind(null,ee,r.queue,!0,!1),Tn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,l,f){var y=ee,S=Tn();if(Oe){if(f===void 0)throw Error(u(407));f=f()}else{if(f=l(),Xe===null)throw Error(u(349));ye&60||Oo(y,l,f)}S.memoizedState=f;var N={value:f,getSnapshot:l};return S.queue=N,Yu(Ku.bind(null,y,N,r),[r]),y.flags|=2048,Ea(9,Mo.bind(null,y,N,f,l),{destroy:void 0},null),f},useId:function(){var r=Tn(),l=Xe.identifierPrefix;if(Oe){var f=Br,y=zr;f=(y&~(1<<32-On(y)-1)).toString(32)+f,l=":"+l+"R"+f,f=Sl++,0<f&&(l+="H"+f.toString(32)),l+=":"}else f=Cm++,l=":"+l+"r"+f.toString(32)+":";return r.memoizedState=l},useCacheRefresh:function(){return Tn().memoizedState=Fs.bind(null,ee)}};Ds.useMemoCache=zl,Ds.useHostTransitionStatus=Xi,Ds.useFormState=es,Ds.useActionState=es,Ds.useOptimistic=function(r){var l=Tn();l.memoizedState=l.baseState=r;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=Va.bind(null,ee,!0,f),f.dispatch=l,[r,l]};var Pi={readContext:ot,use:rn,useCallback:Cr,useContext:ot,useEffect:Gl,useImperativeHandle:Ta,useInsertionEffect:Xc,useLayoutEffect:Zc,useMemo:wr,useReducer:mi,useRef:Sa,useState:function(){return mi(Yi)},useDebugValue:Hs,useDeferredValue:function(r,l){var f=Je();return Uo(f,Ue.memoizedState,r,l)},useTransition:function(){var r=mi(Yi)[0],l=Je().memoizedState;return[typeof r=="boolean"?r:xa(r),l]},useSyncExternalStore:Kc,useId:js};Pi.useCacheRefresh=lr,Pi.useMemoCache=zl,Pi.useHostTransitionStatus=Xi,Pi.useFormState=Bs,Pi.useActionState=Bs,Pi.useOptimistic=function(r,l){var f=Je();return yi(f,Ue,r,l)};var Tl={readContext:ot,use:rn,useCallback:Cr,useContext:ot,useEffect:Gl,useImperativeHandle:Ta,useInsertionEffect:Xc,useLayoutEffect:Zc,useMemo:wr,useReducer:xi,useRef:Sa,useState:function(){return xi(Yi)},useDebugValue:Hs,useDeferredValue:function(r,l){var f=Je();return Ue===null?sr(f,r,l):Uo(f,Ue.memoizedState,r,l)},useTransition:function(){var r=xi(Yi)[0],l=Je().memoizedState;return[typeof r=="boolean"?r:xa(r),l]},useSyncExternalStore:Kc,useId:js};Tl.useCacheRefresh=lr,Tl.useMemoCache=zl,Tl.useHostTransitionStatus=Xi,Tl.useFormState=Gs,Tl.useActionState=Gs,Tl.useOptimistic=function(r,l){var f=Je();return Ue!==null?yi(f,Ue,r,l):(f.baseState=r,[r,f.queue.dispatch])};var uu={isMounted:function(r){return(r=r._reactInternals)?R(r)===r:!1},enqueueSetState:function(r,l,f){r=r._reactInternals;var y=vi(),S=an(y);S.payload=l,f!=null&&(S.callback=f),l=Ae(r,S,y),l!==null&&(sn(l,r,y),pa(l,r,y))},enqueueReplaceState:function(r,l,f){r=r._reactInternals;var y=vi(),S=an(y);S.tag=1,S.payload=l,f!=null&&(S.callback=f),l=Ae(r,S,y),l!==null&&(sn(l,r,y),pa(l,r,y))},enqueueForceUpdate:function(r,l){r=r._reactInternals;var f=vi(),y=an(f);y.tag=2,l!=null&&(y.callback=l),l=Ae(r,y,f),l!==null&&(sn(l,r,f),pa(l,r,f))}},bl=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Xf=Error(u(461)),qn=!1,wc={dehydrated:null,treeContext:null,retryLane:0},Ka=z(null),Al=null,Ya=null,Dc=typeof AbortController<"u"?AbortController:function(){var r=[],l=this.signal={aborted:!1,addEventListener:function(f,y){r.push(y)}};this.abort=function(){l.aborted=!0,r.forEach(function(f){return f()})}},vn=Ra.unstable_scheduleCallback,sp=Ra.unstable_NormalPriority,An={$$typeof:ul,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Zf=Zt.S;Zt.S=function(r,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&Xn(r,l),Zf!==null&&Zf(r,l)};var ho=z(null),Ns=!1,ne=!1,Qe=!1,de=typeof WeakSet=="function"?WeakSet:Set,Kt=null,$e=!1,Ie=null,In=!1,Ci=null,Rl=8192,Os={getCacheForType:function(r){var l=ot(An),f=l.data.get(r);return f===void 0&&(f=r(),l.data.set(r,f)),f}},hn=0,vr=1,kr=2,cu=3,zi=4;if(typeof Symbol=="function"&&Symbol.for){var Hr=Symbol.for;hn=Hr("selector.component"),vr=Hr("selector.has_pseudo_class"),kr=Hr("selector.role"),cu=Hr("selector.test_id"),zi=Hr("selector.text")}var Nc=typeof WeakMap=="function"?WeakMap:Map,pe=0,Xe=null,he=null,ye=0,je=0,jn=null,Qa=!1,Xa=!1,fo=!1,Er=0,mn=0,Za=0,Ms=0,Bi=0,Oa=0,Fn=0,hu=null,Wa=null,Oh=!1,Wf=0,Ma=1/0,go=null,qr=null,xs=!1,Cl=null,fu=0,Mh=0,Oc=null,mo=0,Jf=null;return me.attemptContinuousHydration=function(r){if(r.tag===13){var l=le(r,67108864);l!==null&&sn(l,r,67108864),Xo(r,67108864)}},me.attemptHydrationAtCurrentPriority=function(r){if(r.tag===13){var l=vi(),f=le(r,l);f!==null&&sn(f,r,l),Xo(r,l)}},me.attemptSynchronousHydration=function(r){switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var l=L(r.pendingLanes);if(l!==0){for(r.pendingLanes|=2,r.entangledLanes|=2;l;){var f=1<<31-On(l);r.entanglements[1]|=f,l&=~f}ke(r),!(pe&6)&&(Ma=wa()+500,ui(0))}}break;case 13:l=le(r,2),l!==null&&sn(l,r,2),vf(),Xo(r,2)}},me.batchedUpdates=function(r,l){return r(l)},me.createComponentSelector=function(r){return{$$typeof:hn,value:r}},me.createContainer=function(r,l,f,y,S,N,W,nt,ft,Tt){return ms(r,l,!1,null,f,y,N,W,nt,ft,Tt,null)},me.createHasPseudoClassSelector=function(r){return{$$typeof:vr,value:r}},me.createHydrationContainer=function(r,l,f,y,S,N,W,nt,ft,Tt,Ut,Pt,Vt){return r=ms(f,y,!0,r,S,N,nt,ft,Tt,Ut,Pt,Vt),r.context=Sf(null),f=r.current,y=vi(),S=an(y),S.callback=l??null,Ae(f,S,y),r.current.lanes=y,G(r,y),ke(r),r},me.createPortal=function(r,l,f){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ur,key:y==null?null:""+y,children:r,containerInfo:l,implementation:f}},me.createRoleSelector=function(r){return{$$typeof:kr,value:r}},me.createTestNameSelector=function(r){return{$$typeof:cu,value:r}},me.createTextSelector=function(r){return{$$typeof:zi,value:r}},me.defaultOnCaughtError=function(r){console.error(r)},me.defaultOnRecoverableError=function(r){bl(r)},me.defaultOnUncaughtError=function(r){bl(r)},me.deferredUpdates=function(r){var l=Zt.T,f=dl();try{return Ui(32),Zt.T=null,r()}finally{Ui(f),Zt.T=l}},me.discreteUpdates=function(r,l,f,y,S){var N=Zt.T,W=dl();try{return Ui(2),Zt.T=null,r(l,f,y,S)}finally{Ui(W),Zt.T=N,pe===0&&(Ma=wa()+500)}},me.findAllNodes=tl,me.findBoundingRects=function(r,l){if(!tu)throw Error(u(363));l=tl(r,l),r=[];for(var f=0;f<l.length;f++)r.push(np(l[f]));for(l=r.length-1;0<l;l--){f=r[l];for(var y=f.x,S=y+f.width,N=f.y,W=N+f.height,nt=l-1;0<=nt;nt--)if(l!==nt){var ft=r[nt],Tt=ft.x,Ut=Tt+ft.width,Pt=ft.y,Vt=Pt+ft.height;if(y>=Tt&&N>=Pt&&S<=Ut&&W<=Vt){r.splice(l,1);break}else if(y!==Tt||f.width!==ft.width||Vt<N||Pt>W){if(!(N!==Pt||f.height!==ft.height||Ut<y||Tt>S)){Tt>y&&(ft.width+=Tt-y,ft.x=y),Ut<S&&(ft.width=S-Tt),r.splice(l,1);break}}else{Pt>N&&(ft.height+=Pt-N,ft.y=N),Vt<W&&(ft.height=W-Pt),r.splice(l,1);break}}}return r},me.findHostInstance=ps,me.findHostInstanceWithNoPortals=function(r){return r=C(r),r=r!==null?I(r):null,r===null?null:no(r.stateNode)},me.findHostInstanceWithWarning=function(r){return ps(r)},me.flushPassiveEffects=il,me.flushSyncFromReconciler=function(r){var l=pe;pe|=1;var f=Zt.T,y=dl();try{if(Ui(2),Zt.T=null,r)return r()}finally{Ui(y),Zt.T=f,pe=l,!(pe&6)&&ui(0)}},me.flushSyncWork=vf,me.focusWithin=function(r,l){if(!tu)throw Error(u(363));for(r=$s(r),l=Wl(r,l),l=Array.from(l),r=0;r<l.length;){var f=l[r++],y=f.tag;if(!Ir(f)){if((y===5||y===26||y===27)&&dh(f.stateNode))return!0;for(f=f.child;f!==null;)l.push(f),f=f.sibling}}return!1},me.getFindAllNodesFailureDescription=function(r,l){if(!tu)throw Error(u(363));var f=0,y=[];r=[$s(r),0];for(var S=0;S<r.length;){var N=r[S++],W=N.tag,nt=r[S++],ft=l[nt];if((W!==5&&W!==26&&W!==27||!Ir(N))&&(rh(N,ft)&&(y.push(ta(ft)),nt++,nt>f&&(f=nt)),nt<l.length))for(N=N.child;N!==null;)r.push(N,nt),N=N.sibling}if(f<l.length){for(r=[];f<l.length;f++)r.push(ta(l[f]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+r.join(" > ")}return null},me.getPublicRootInstance=function(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 27:case 5:return no(r.child.stateNode);default:return r.child.stateNode}},me.injectIntoDevTools=function(){var r={bundleType:0,version:Jo,rendererPackageName:$0,currentDispatcherRef:Zt,findFiberByHostInstance:fh,reconcilerVersion:"19.0.0"};if(bn!==null&&(r.rendererConfig=bn),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")r=!1;else{var l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(l.isDisabled||!l.supportsFiber)r=!0;else{try{au=l.inject(r),Hn=l}catch{}r=!!l.checkDCE}}return r},me.isAlreadyRendering=function(){return!1},me.observeVisibleRects=function(r,l,f,y){if(!tu)throw Error(u(363));r=tl(r,l);var S=gh(r,f,y).disconnect;return{disconnect:function(){S()}}},me.shouldError=function(){return null},me.shouldSuspend=function(){return!1},me.startHostTransition=function(r,l,f,y){if(r.tag!==5)throw Error(u(476));var S=qs(r).queue;Qu(r,S,l,io,f===null?s:function(){var N=qs(r).next.queue;return Zi(r,N,{},vi()),f(y)})},me.updateContainer=function(r,l,f,y){var S=l.current,N=vi();return Vr(S,N,r,l,f,y),N},me.updateContainerSync=function(r,l,f,y){return l.tag===0&&il(),Vr(l.current,2,r,l,f,y),2},me},a.exports.default=a.exports,Object.defineProperty(a.exports,"__esModule",{value:!0})}(Fp)),Fp.exports}var M2;function wS(){return M2||(M2=1,jp.exports=CS()),jp.exports}var DS=wS();const NS=x1(DS);var Kp={exports:{}},Eo={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x2;function OS(){return x2||(x2=1,Eo.ConcurrentRoot=1,Eo.ContinuousEventPriority=8,Eo.DefaultEventPriority=32,Eo.DiscreteEventPriority=2,Eo.IdleEventPriority=268435456,Eo.LegacyRoot=0,Eo.NoEventPriority=0),Eo}var V2;function MS(){return V2||(V2=1,Kp.exports=OS()),Kp.exports}var z1=MS(),xS=_e();const U2={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let I2=!1,L2=!1;const B1=".react-konva-event",VS=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,US=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,IS={};function O0(a,t,n=IS){if(!I2&&"zIndex"in t&&(console.warn(US),I2=!0),!L2&&t.draggable){var s=t.x!==void 0||t.y!==void 0,u=t.onDragEnd||t.onDragMove;s&&!u&&(console.warn(VS),L2=!0)}for(var c in n)if(!U2[c]){var d=c.slice(0,2)==="on",m=n[c]!==t[c];if(d&&m){var _=c.substr(2).toLowerCase();_.substr(0,7)==="content"&&(_="content"+_.substr(7,1).toUpperCase()+_.substr(8)),a.off(_,n[c])}var v=!t.hasOwnProperty(c);v&&a.setAttr(c,void 0)}var b=t._useStrictMode,R={},U=!1;const C={};for(var c in t)if(!U2[c]){var d=c.slice(0,2)==="on",O=n[c]!==t[c];if(d&&O){var _=c.substr(2).toLowerCase();_.substr(0,7)==="content"&&(_="content"+_.substr(7,1).toUpperCase()+_.substr(8)),t[c]&&(C[_]=t[c])}!d&&(t[c]!==n[c]||b&&t[c]!==a.getAttr(c))&&(U=!0,R[c]=t[c])}U&&(a.setAttrs(R),zu(a));for(var _ in C)a.on(_+B1,C[_])}function zu(a){if(!xS.Konva.autoDrawEnabled){var t=a.getLayer()||a.getStage();t&&t.batchDraw()}}var Yp=V1();const b4={},LS={};u0.Node.prototype._applyProps=O0;let M0=z1.DefaultEventPriority;function PS(a,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}a.add(t),zu(a)}function zS(a,t,n){let s=u0[a];s||(console.error(`Konva has no node with the type ${a}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${a}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),s=u0.Group);const u={},c={};for(var d in t){var m=d.slice(0,2)==="on";m?c[d]=t[d]:u[d]=t[d]}const _=new s(u);return O0(_,c),_}function BS(a,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${a}"`)}function GS(a,t,n){return!1}function kS(a){return a}function HS(){return null}function qS(){return null}function jS(a,t,n,s){return LS}function FS(){}function KS(a){}function YS(a,t){return!1}function QS(){return b4}function XS(){return b4}const ZS=setTimeout,WS=clearTimeout,JS=-1;function $S(a,t){return!1}const t6=!1,e6=!0,n6=!0,i6=!1,a6=!1;function r6(a,t){t.parent===a?t.moveToTop():a.add(t),zu(a)}function s6(a,t){t.parent===a?t.moveToTop():a.add(t),zu(a)}function A4(a,t,n){t._remove(),a.add(t),t.setZIndex(n.getZIndex()),zu(a)}function l6(a,t,n){A4(a,t,n)}function o6(a,t){t.destroy(),t.off(B1),zu(a)}function u6(a,t){t.destroy(),t.off(B1),zu(a)}function c6(a,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function h6(a,t,n){}function f6(a,t,n,s){O0(a,s,n)}function d6(a){a.hide(),zu(a)}function g6(a){}function m6(a,t){(t.visible==null||t.visible)&&a.show()}function p6(a,t){}function y6(a){}function _6(){}function v6(){return M0}function E6(){}function S6(){return null}function T6(a){M0=a}function b6(){return M0}function A6(){return M0||z1.DefaultEventPriority}function R6(){return!1}function C6(){}function w6(){return!1}function D6(){return!0}function N6(){}function O6(){}function M6(){return null}const x6=null;function V6(){}const U6=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:x6,appendChild:r6,appendChildToContainer:s6,appendInitialChild:PS,cancelTimeout:WS,clearContainer:y6,commitMount:h6,commitTextUpdate:c6,commitUpdate:f6,createInstance:zS,createTextInstance:BS,detachDeletedInstance:_6,finalizeInitialChildren:GS,getChildHostContext:XS,getCurrentEventPriority:v6,getCurrentUpdatePriority:b6,getInstanceFromScope:S6,getPublicInstance:kS,getRootHostContext:QS,hideInstance:d6,hideTextInstance:g6,idlePriority:Yp.unstable_IdlePriority,insertBefore:A4,insertInContainerBefore:l6,isPrimaryRenderer:t6,maySuspendCommit:w6,noTimeout:JS,now:Yp.unstable_now,preloadInstance:D6,prepareForCommit:HS,preparePortalMount:qS,prepareScopeUpdate:E6,prepareUpdate:jS,removeChild:o6,removeChildFromContainer:u6,requestPostPaintCallback:C6,resetAfterCommit:FS,resetFormInstance:V6,resetTextContent:KS,resolveUpdatePriority:A6,run:Yp.unstable_runWithPriority,scheduleTimeout:ZS,setCurrentUpdatePriority:T6,shouldAttemptEagerTransition:R6,shouldDeprioritizeSubtree:YS,shouldSetTextContent:$S,startSuspendingCommit:N6,supportsHydration:a6,supportsMutation:n6,supportsPersistence:i6,suspendInstance:O6,unhideInstance:m6,unhideTextInstance:p6,waitForCommitToBeReady:M6,warnsIfNotActing:e6},Symbol.toStringTag,{value:"Module"}));var I6=Object.defineProperty,L6=Object.defineProperties,P6=Object.getOwnPropertyDescriptors,P2=Object.getOwnPropertySymbols,z6=Object.prototype.hasOwnProperty,B6=Object.prototype.propertyIsEnumerable,z2=(a,t,n)=>t in a?I6(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,B2=(a,t)=>{for(var n in t||(t={}))z6.call(t,n)&&z2(a,n,t[n]);if(P2)for(var n of P2(t))B6.call(t,n)&&z2(a,n,t[n]);return a},G6=(a,t)=>L6(a,P6(t)),G2,k2;typeof window<"u"&&((G2=window.document)!=null&&G2.createElement||((k2=window.navigator)==null?void 0:k2.product)==="ReactNative")?Pe.useLayoutEffect:Pe.useEffect;function R4(a,t,n){if(!a)return;if(n(a)===!0)return a;let s=a.child;for(;s;){const u=R4(s,t,n);if(u)return u;s=s.sibling}}function C4(a){try{return Object.defineProperties(a,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return a}}const H2=console.error;console.error=function(){const a=[...arguments].join("");if(a!=null&&a.startsWith("Warning:")&&a.includes("useContext")){console.error=H2;return}return H2.apply(this,arguments)};const G1=C4(Pe.createContext(null));class w4 extends Pe.Component{render(){return Pe.createElement(G1.Provider,{value:this._reactInternals},this.props.children)}}function k6(){const a=Pe.useContext(G1);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=Pe.useId();return Pe.useMemo(()=>{for(const s of[a,a==null?void 0:a.alternate]){if(!s)continue;const u=R4(s,!1,c=>{let d=c.memoizedState;for(;d;){if(d.memoizedState===t)return!0;d=d.next}});if(u)return u}},[a,t])}function H6(){const a=k6(),[t]=Pe.useState(()=>new Map);t.clear();let n=a;for(;n;){if(n.type&&typeof n.type=="object"){const u=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;u&&u!==G1&&!t.has(u)&&t.set(u,Pe.useContext(C4(u)))}n=n.return}return t}function q6(){const a=H6();return Pe.useMemo(()=>Array.from(a.keys()).reduce((t,n)=>s=>Pe.createElement(t,null,Pe.createElement(n.Provider,G6(B2({},s),{value:a.get(n)}))),t=>Pe.createElement(w4,B2({},t))),[a])}if(ua.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function j6(a){const t=ua.useRef({});return ua.useLayoutEffect(()=>{t.current=a}),ua.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const F6=a=>{const t=ua.useRef(null),n=ua.useRef(null),s=ua.useRef(null),u=j6(a),c=q6(),d=m=>{const{forwardedRef:_}=a;_&&(typeof _=="function"?_(m):_.current=m)};return ua.useLayoutEffect(()=>(n.current=new u0.Stage({width:a.width,height:a.height,container:t.current}),d(n.current),s.current=Jd.createContainer(n.current,z1.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),Jd.updateContainer(ua.createElement(c,{},a.children),s.current,null,()=>{}),()=>{d(null),Jd.updateContainer(null,s.current,null),n.current.destroy()}),[]),ua.useLayoutEffect(()=>{d(n.current),O0(n.current,a,u),Jd.updateContainer(ua.createElement(c,{},a.children),s.current,null)}),ua.createElement("div",{ref:t,id:a.id,accessKey:a.accessKey,className:a.className,role:a.role,style:a.style,tabIndex:a.tabIndex,title:a.title})},K6="Layer",Y6="Line",Q6="Path",Jd=NS(U6);Jd.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:ua.version,rendererPackageName:"react-konva"});const X6=ua.forwardRef((a,t)=>ua.createElement(w4,{},ua.createElement(F6,{...a,forwardedRef:t}))),k1=a=>{const t=a.filter((v,b)=>b%2===0),n=a.filter((v,b)=>b%2===1),s=Math.min(...t),u=Math.max(...t),c=Math.min(...n),d=Math.max(...n),m=u-s||1,_=d-c||1;return a.map((v,b)=>b%2===0?(v-s)/m:(v-c)/_)},Z6=a=>{const t=a.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g);let n=0,s=0;const u=[];return t==null||t.forEach(c=>{const d=c[0],m=c.slice(1).trim().split(/[\s,]+/).map(Number).filter(_=>!isNaN(_));d==="M"||d==="L"?(n=m[0],s=m[1],u.push(n,s)):d==="H"?(n=m[0],u.push(n,s)):d==="V"&&(s=m[0],u.push(n,s))}),k1(u)},q2=a=>{if([...new Set(a)].length<=2){console.warn("Very simple shape detected. Scaling to default range.");const n=Math.min(...a),s=Math.max(...a)||1;return a.map(u=>(u-n)/(s-n))}return k1(a)},j2=(a,t)=>a.length<t?[...a,...Array(t-a.length).fill(0)]:a,F2=(a,t,n=10)=>{const s=Math.max(a.length,t.length),u=j2(a,s),c=j2(t,s),d=u.reduce((b,R,U)=>b+Math.pow(R-c[U],2),0),_=Math.sqrt(d)/s,v=Math.max(0,1-_*n);return Math.min(v)},K2=(a,t)=>{const n=(a.length-1)/(t-1);return Array.from({length:t},(s,u)=>{const c=u*n,d=Math.floor(c),m=Math.min(d+1,a.length-1),_=c-d;return a[d]*(1-_)+a[m]*_})},W6=(a,t)=>{if(a.length<2||t.length<2)return console.warn("Insufficient points to calculate similarity"),0;const n=q2(a),s=q2(t);if(n.every(b=>b===0)||s.every(b=>b===0))return console.warn("One or both normalized paths are entirely zeros. Using fallback similarity."),F2(n,s);const u=Math.max(n.length,s.length),c=K2(n,u),d=K2(s,u),m=c.reduce((b,R,U)=>b+R*d[U],0),_=Math.sqrt(c.reduce((b,R)=>b+R*R,0)),v=Math.sqrt(d.reduce((b,R)=>b+R*R,0));return _===0||v===0?(console.warn("One or both paths have zero magnitude. Using fallback similarity."),F2(n,s)):m/(_*v)},J6=({svgPath:a,onComplete:t})=>{const[n,s]=Pe.useState([]),[u,c]=Pe.useState(!1),[d,m]=Pe.useState(!1),[_,v]=Pe.useState(null),b=400,R=400,U=D=>D.x>=0&&D.x<=b&&D.y>=0&&D.y<=R,C=D=>{const H=D.target.getStage().getPointerPosition();return H?{x:H.x,y:H.y}:{x:0,y:0}},O=D=>{const L=C(D);U(L)&&(c(!0),d||s([...n,{points:[L.x,L.y]}]))},I=D=>{if(!u)return;const L=C(D);if(U(L))if(d){const H=n.map(j=>{const q=[];for(let x=0;x<j.points.length;x+=2){const w=j.points[x],V=j.points[x+1];Math.hypot(L.x-w,L.y-V)>=10&&q.push(w,V)}return{points:q}}).filter(j=>j.points.length>0);s(H)}else{const H=n[n.length-1],j=n.slice(0,n.length-1);j.push({points:[...H.points,L.x,L.y]}),s(j)}},z=()=>{c(!1)},F=()=>{if(n.length===0){v("Please draw something on the canvas before submitting!"),setTimeout(()=>v(null),3e3);return}const D=n.flatMap(x=>x.points),L=k1(D),H=Z6(a),j=W6(L,H),q=j>.5;v(q?`Great job! Similarity: ${(j*100).toFixed(2)}%`:`Keep practicing! Similarity: ${(j*100).toFixed(2)}%`),setTimeout(()=>{v(null),t(q,j)},2e3)},M=()=>{m(D=>!D)};return Qt.jsxs("div",{style:xc.container,children:[Qt.jsx(X6,{width:b,height:R,onMouseDown:O,onMouseMove:I,onMouseUp:z,onTouchStart:O,onTouchMove:I,onTouchEnd:z,style:{border:"1px solid black",touchAction:"none"},children:Qt.jsxs(K6,{children:[Qt.jsx(Q6,{data:a,stroke:"gray",strokeWidth:4,lineJoin:"round",x:150,y:100}),n.map((D,L)=>Qt.jsx(Y6,{points:D.points,stroke:"black",strokeWidth:6,tension:.5,lineCap:"round"},L))]})}),Qt.jsxs("div",{style:xc.controls,children:[Qt.jsx("button",{style:d?xc.activeButton:xc.button,onClick:M,children:d?"Disable Eraser":"Enable Eraser"}),Qt.jsx("button",{style:xc.button,onClick:F,children:"Done Tracing"})]}),_&&Qt.jsx("div",{style:xc.feedbackPopup,children:Qt.jsx("p",{style:xc.feedbackText,children:_})})]})},xc={container:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},controls:{display:"flex",gap:"10px",marginTop:"10px"},button:{padding:"10px 20px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",transition:"background-color 0.3s ease"},activeButton:{padding:"10px 20px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",transition:"background-color 0.3s ease"},feedbackPopup:{marginTop:"20px",padding:"15px 20px",borderRadius:"8px",backgroundColor:"#ffffff",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",border:"2px solid #ccc",textAlign:"center"},feedbackText:{fontSize:"18px",fontWeight:"bold",color:"#333"}},$6=({path:a,width:t=400,height:n=400,viewBox:s="-100 -100 300 400"})=>Qt.jsx("div",{style:{...Y2.svgWrapper,width:`${t}px`,height:`${n}px`},children:Qt.jsx("svg",{width:"100%",height:"100%",viewBox:s,preserveAspectRatio:"xMidYMid meet",xmlns:"http://www.w3.org/2000/svg",style:Y2.svg,children:Qt.jsx("path",{d:a,stroke:"black",strokeWidth:"8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})}),Y2={svgWrapper:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px",border:"4px dotted #A6C3BB",borderRadius:"16px",background:"#E6F2ED",boxShadow:"4px 4px 0px rgba(0, 0, 0, 0.2)"},svg:{display:"block",maxWidth:"100%",maxHeight:"100%",filter:"drop-shadow(2px 4px 6px rgba(0, 0, 0, 0.2))"}};var Q2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=function(a){const t=[];let n=0;for(let s=0;s<a.length;s++){let u=a.charCodeAt(s);u<128?t[n++]=u:u<2048?(t[n++]=u>>6|192,t[n++]=u&63|128):(u&64512)===55296&&s+1<a.length&&(a.charCodeAt(s+1)&64512)===56320?(u=65536+((u&1023)<<10)+(a.charCodeAt(++s)&1023),t[n++]=u>>18|240,t[n++]=u>>12&63|128,t[n++]=u>>6&63|128,t[n++]=u&63|128):(t[n++]=u>>12|224,t[n++]=u>>6&63|128,t[n++]=u&63|128)}return t},tT=function(a){const t=[];let n=0,s=0;for(;n<a.length;){const u=a[n++];if(u<128)t[s++]=String.fromCharCode(u);else if(u>191&&u<224){const c=a[n++];t[s++]=String.fromCharCode((u&31)<<6|c&63)}else if(u>239&&u<365){const c=a[n++],d=a[n++],m=a[n++],_=((u&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;t[s++]=String.fromCharCode(55296+(_>>10)),t[s++]=String.fromCharCode(56320+(_&1023))}else{const c=a[n++],d=a[n++];t[s++]=String.fromCharCode((u&15)<<12|(c&63)<<6|d&63)}}return t.join("")},N4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,t){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let u=0;u<a.length;u+=3){const c=a[u],d=u+1<a.length,m=d?a[u+1]:0,_=u+2<a.length,v=_?a[u+2]:0,b=c>>2,R=(c&3)<<4|m>>4;let U=(m&15)<<2|v>>6,C=v&63;_||(C=64,d||(U=64)),s.push(n[b],n[R],n[U],n[C])}return s.join("")},encodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(a):this.encodeByteArray(D4(a),t)},decodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(a):tT(this.decodeStringToByteArray(a,t))},decodeStringToByteArray(a,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let u=0;u<a.length;){const c=n[a.charAt(u++)],m=u<a.length?n[a.charAt(u)]:0;++u;const v=u<a.length?n[a.charAt(u)]:64;++u;const R=u<a.length?n[a.charAt(u)]:64;if(++u,c==null||m==null||v==null||R==null)throw new eT;const U=c<<2|m>>4;if(s.push(U),v!==64){const C=m<<4&240|v>>2;if(s.push(C),R!==64){const O=v<<6&192|R;s.push(O)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class eT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nT=function(a){const t=D4(a);return N4.encodeByteArray(t,!0)},c0=function(a){return nT(a).replace(/\./g,"")},O4=function(a){try{return N4.decodeString(a,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=()=>iT().__FIREBASE_DEFAULTS__,rT=()=>{if(typeof process>"u"||typeof Q2>"u")return;const a=Q2.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},sT=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=a&&O4(a[1]);return t&&JSON.parse(t)},x0=()=>{try{return aT()||rT()||sT()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},M4=a=>{var t,n;return(n=(t=x0())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[a]},lT=a=>{const t=M4(a);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},x4=()=>{var a;return(a=x0())===null||a===void 0?void 0:a.config},V4=a=>{var t;return(t=x0())===null||t===void 0?void 0:t[`_${a}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(a,t){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",u=a.iat||0,c=a.sub||a.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:u,exp:u+3600,auth_time:u,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},a);return[c0(JSON.stringify(n)),c0(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fa())}function hT(){var a;const t=(a=x0())===null||a===void 0?void 0:a.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dT(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function gT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mT(){const a=fa();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function pT(){return!hT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yT(){try{return typeof indexedDB=="object"}catch{return!1}}function _T(){return new Promise((a,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(s);u.onsuccess=()=>{u.result.close(),n||self.indexedDB.deleteDatabase(s),a(!0)},u.onupgradeneeded=()=>{n=!1},u.onerror=()=>{var c;t(((c=u.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="FirebaseError";class No extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=vT,Object.setPrototypeOf(this,No.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Eg.prototype.create)}}class Eg{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},u=`${this.service}/${t}`,c=this.errors[t],d=c?ET(c,s):"Error",m=`${this.serviceName}: ${d} (${u}).`;return new No(u,m,s)}}function ET(a,t){return a.replace(ST,(n,s)=>{const u=t[s];return u!=null?String(u):`<${s}?>`})}const ST=/\{\$([^}]+)}/g;function TT(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}function h0(a,t){if(a===t)return!0;const n=Object.keys(a),s=Object.keys(t);for(const u of n){if(!s.includes(u))return!1;const c=a[u],d=t[u];if(X2(c)&&X2(d)){if(!h0(c,d))return!1}else if(c!==d)return!1}for(const u of s)if(!n.includes(u))return!1;return!0}function X2(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(a){const t=[];for(const[n,s]of Object.entries(a))Array.isArray(s)?s.forEach(u=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(u))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function $d(a){const t={};return a.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[u,c]=s.split("=");t[decodeURIComponent(u)]=decodeURIComponent(c)}}),t}function tg(a){const t=a.indexOf("?");if(!t)return"";const n=a.indexOf("#",t);return a.substring(t,n>0?n:void 0)}function bT(a,t){const n=new AT(a,t);return n.subscribe.bind(n)}class AT{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let u;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");RT(t,["next","error","complete"])?u=t:u={next:t,error:n,complete:s},u.next===void 0&&(u.next=Qp),u.error===void 0&&(u.error=Qp),u.complete===void 0&&(u.complete=Qp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?u.error(this.finalError):u.complete()}catch{}}),this.observers.push(u),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RT(a,t){if(typeof a!="object"||a===null)return!1;for(const n of t)if(n in a&&typeof a[n]=="function")return!0;return!1}function Qp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(a){return a&&a._delegate?a._delegate:a}class Lc{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new oT;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:n});u&&s.resolve(u)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),u=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(u)return null;throw c}else{if(u)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(DT(t))try{this.getOrInitializeService({instanceIdentifier:Uc})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch{}}}}clearInstance(t=Uc){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Uc){return this.instances.has(t)}getOptions(t=Uc){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&d.resolve(u)}return u}onInit(t,n){var s;const u=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(u))!==null&&s!==void 0?s:new Set;c.add(t),this.onInitCallbacks.set(u,c);const d=this.instances.get(u);return d&&t(d,u),()=>{c.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const u of s)try{u(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:wT(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Uc){return this.component?this.component.multipleInstances?t:Uc:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wT(a){return a===Uc?void 0:a}function DT(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new CT(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(we||(we={}));const OT={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},MT=we.INFO,xT={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},VT=(a,t,...n)=>{if(t<a.logLevel)return;const s=new Date().toISOString(),u=xT[t];if(u)console[u](`[${s}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class H1{constructor(t){this.name=t,this._logLevel=MT,this._logHandler=VT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in we))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?OT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...t),this._logHandler(this,we.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...t),this._logHandler(this,we.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,we.INFO,...t),this._logHandler(this,we.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,we.WARN,...t),this._logHandler(this,we.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...t),this._logHandler(this,we.ERROR,...t)}}const UT=(a,t)=>t.some(n=>a instanceof n);let Z2,W2;function IT(){return Z2||(Z2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LT(){return W2||(W2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const U4=new WeakMap,l1=new WeakMap,I4=new WeakMap,Xp=new WeakMap,q1=new WeakMap;function PT(a){const t=new Promise((n,s)=>{const u=()=>{a.removeEventListener("success",c),a.removeEventListener("error",d)},c=()=>{n(Cu(a.result)),u()},d=()=>{s(a.error),u()};a.addEventListener("success",c),a.addEventListener("error",d)});return t.then(n=>{n instanceof IDBCursor&&U4.set(n,a)}).catch(()=>{}),q1.set(t,a),t}function zT(a){if(l1.has(a))return;const t=new Promise((n,s)=>{const u=()=>{a.removeEventListener("complete",c),a.removeEventListener("error",d),a.removeEventListener("abort",d)},c=()=>{n(),u()},d=()=>{s(a.error||new DOMException("AbortError","AbortError")),u()};a.addEventListener("complete",c),a.addEventListener("error",d),a.addEventListener("abort",d)});l1.set(a,t)}let o1={get(a,t,n){if(a instanceof IDBTransaction){if(t==="done")return l1.get(a);if(t==="objectStoreNames")return a.objectStoreNames||I4.get(a);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cu(a[t])},set(a,t,n){return a[t]=n,!0},has(a,t){return a instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in a}};function BT(a){o1=a(o1)}function GT(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=a.call(Zp(this),t,...n);return I4.set(s,t.sort?t.sort():[t]),Cu(s)}:LT().includes(a)?function(...t){return a.apply(Zp(this),t),Cu(U4.get(this))}:function(...t){return Cu(a.apply(Zp(this),t))}}function kT(a){return typeof a=="function"?GT(a):(a instanceof IDBTransaction&&zT(a),UT(a,IT())?new Proxy(a,o1):a)}function Cu(a){if(a instanceof IDBRequest)return PT(a);if(Xp.has(a))return Xp.get(a);const t=kT(a);return t!==a&&(Xp.set(a,t),q1.set(t,a)),t}const Zp=a=>q1.get(a);function HT(a,t,{blocked:n,upgrade:s,blocking:u,terminated:c}={}){const d=indexedDB.open(a,t),m=Cu(d);return s&&d.addEventListener("upgradeneeded",_=>{s(Cu(d.result),_.oldVersion,_.newVersion,Cu(d.transaction),_)}),n&&d.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),m.then(_=>{c&&_.addEventListener("close",()=>c()),u&&_.addEventListener("versionchange",v=>u(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const qT=["get","getKey","getAll","getAllKeys","count"],jT=["put","add","delete","clear"],Wp=new Map;function J2(a,t){if(!(a instanceof IDBDatabase&&!(t in a)&&typeof t=="string"))return;if(Wp.get(t))return Wp.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,u=jT.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(u||qT.includes(n)))return;const c=async function(d,...m){const _=this.transaction(d,u?"readwrite":"readonly");let v=_.store;return s&&(v=v.index(m.shift())),(await Promise.all([v[n](...m),u&&_.done]))[0]};return Wp.set(t,c),c}BT(a=>({...a,get:(t,n,s)=>J2(t,n)||a.get(t,n,s),has:(t,n)=>!!J2(t,n)||a.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KT(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function KT(a){const t=a.getComponent();return(t==null?void 0:t.type)==="VERSION"}const u1="@firebase/app",$2="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new H1("@firebase/app"),YT="@firebase/app-compat",QT="@firebase/analytics-compat",XT="@firebase/analytics",ZT="@firebase/app-check-compat",WT="@firebase/app-check",JT="@firebase/auth",$T="@firebase/auth-compat",t9="@firebase/database",e9="@firebase/data-connect",n9="@firebase/database-compat",i9="@firebase/functions",a9="@firebase/functions-compat",r9="@firebase/installations",s9="@firebase/installations-compat",l9="@firebase/messaging",o9="@firebase/messaging-compat",u9="@firebase/performance",c9="@firebase/performance-compat",h9="@firebase/remote-config",f9="@firebase/remote-config-compat",d9="@firebase/storage",g9="@firebase/storage-compat",m9="@firebase/firestore",p9="@firebase/vertexai",y9="@firebase/firestore-compat",_9="firebase",v9="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="[DEFAULT]",E9={[u1]:"fire-core",[YT]:"fire-core-compat",[XT]:"fire-analytics",[QT]:"fire-analytics-compat",[WT]:"fire-app-check",[ZT]:"fire-app-check-compat",[JT]:"fire-auth",[$T]:"fire-auth-compat",[t9]:"fire-rtdb",[e9]:"fire-data-connect",[n9]:"fire-rtdb-compat",[i9]:"fire-fn",[a9]:"fire-fn-compat",[r9]:"fire-iid",[s9]:"fire-iid-compat",[l9]:"fire-fcm",[o9]:"fire-fcm-compat",[u9]:"fire-perf",[c9]:"fire-perf-compat",[h9]:"fire-rc",[f9]:"fire-rc-compat",[d9]:"fire-gcs",[g9]:"fire-gcs-compat",[m9]:"fire-fst",[y9]:"fire-fst-compat",[p9]:"fire-vertex","fire-js":"fire-js",[_9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map,S9=new Map,h1=new Map;function tv(a,t){try{a.container.addComponent(t)}catch(n){Ro.debug(`Component ${t.name} failed to register with FirebaseApp ${a.name}`,n)}}function Qh(a){const t=a.name;if(h1.has(t))return Ro.debug(`There were multiple attempts to register component ${t}.`),!1;h1.set(t,a);for(const n of f0.values())tv(n,a);for(const n of S9.values())tv(n,a);return!0}function j1(a,t){const n=a.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),a.container.getProvider(t)}function Nl(a){return a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wu=new Eg("app","Firebase",T9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Lc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw wu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=v9;function L4(a,t={}){let n=a;typeof t!="object"&&(t={name:t});const s=Object.assign({name:c1,automaticDataCollectionEnabled:!1},t),u=s.name;if(typeof u!="string"||!u)throw wu.create("bad-app-name",{appName:String(u)});if(n||(n=x4()),!n)throw wu.create("no-options");const c=f0.get(u);if(c){if(h0(n,c.options)&&h0(s,c.config))return c;throw wu.create("duplicate-app",{appName:u})}const d=new NT(u);for(const _ of h1.values())d.addComponent(_);const m=new b9(n,s,d);return f0.set(u,m),m}function P4(a=c1){const t=f0.get(a);if(!t&&a===c1&&x4())return L4();if(!t)throw wu.create("no-app",{appName:a});return t}function Du(a,t,n){var s;let u=(s=E9[a])!==null&&s!==void 0?s:a;n&&(u+=`-${n}`);const c=u.match(/\s|\//),d=t.match(/\s|\//);if(c||d){const m=[`Unable to register library "${u}" with version "${t}":`];c&&m.push(`library name "${u}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ro.warn(m.join(" "));return}Qh(new Lc(`${u}-version`,()=>({library:u,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9="firebase-heartbeat-database",R9=1,hg="firebase-heartbeat-store";let Jp=null;function z4(){return Jp||(Jp=HT(A9,R9,{upgrade:(a,t)=>{switch(t){case 0:try{a.createObjectStore(hg)}catch(n){console.warn(n)}}}}).catch(a=>{throw wu.create("idb-open",{originalErrorMessage:a.message})})),Jp}async function C9(a){try{const n=(await z4()).transaction(hg),s=await n.objectStore(hg).get(B4(a));return await n.done,s}catch(t){if(t instanceof No)Ro.warn(t.message);else{const n=wu.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ro.warn(n.message)}}}async function ev(a,t){try{const s=(await z4()).transaction(hg,"readwrite");await s.objectStore(hg).put(t,B4(a)),await s.done}catch(n){if(n instanceof No)Ro.warn(n.message);else{const s=wu.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ro.warn(s.message)}}}function B4(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9=1024,D9=30*24*60*60*1e3;class N9{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M9(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=nv();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:u}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const m=new Date(d.date).valueOf();return Date.now()-m<=D9}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Ro.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nv(),{heartbeatsToSend:s,unsentEntries:u}=O9(this._heartbeatsCache.heartbeats),c=c0(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,u.length>0?(this._heartbeatsCache.heartbeats=u,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Ro.warn(n),""}}}function nv(){return new Date().toISOString().substring(0,10)}function O9(a,t=w9){const n=[];let s=a.slice();for(const u of a){const c=n.find(d=>d.agent===u.agent);if(c){if(c.dates.push(u.date),iv(n)>t){c.dates.pop();break}}else if(n.push({agent:u.agent,dates:[u.date]}),iv(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class M9{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yT()?_T().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await C9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const u=await this.read();return ev(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:u.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const u=await this.read();return ev(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:u.lastSentHeartbeatDate,heartbeats:[...u.heartbeats,...t.heartbeats]})}else return}}function iv(a){return c0(JSON.stringify({version:2,heartbeats:a})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9(a){Qh(new Lc("platform-logger",t=>new FT(t),"PRIVATE")),Qh(new Lc("heartbeat",t=>new N9(t),"PRIVATE")),Du(u1,$2,a),Du(u1,$2,"esm2017"),Du("fire-js","")}x9("");var V9="firebase",U9="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Du(V9,U9,"app");function F1(a,t){var n={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&t.indexOf(s)<0&&(n[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(a);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(a,s[u])&&(n[s[u]]=a[s[u]]);return n}function G4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const I9=G4,k4=new Eg("auth","Firebase",G4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=new H1("@firebase/auth");function L9(a,...t){d0.logLevel<=we.WARN&&d0.warn(`Auth (${af}): ${a}`,...t)}function $m(a,...t){d0.logLevel<=we.ERROR&&d0.error(`Auth (${af}): ${a}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(a,...t){throw K1(a,...t)}function Ol(a,...t){return K1(a,...t)}function H4(a,t,n){const s=Object.assign(Object.assign({},I9()),{[t]:n});return new Eg("auth","Firebase",s).create(t,{appName:a.name})}function Ao(a){return H4(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function K1(a,...t){if(typeof a!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=a.name),a._errorFactory.create(n,...s)}return k4.create(a,...t)}function Jt(a,t,...n){if(!a)throw K1(t,...n)}function So(a){const t="INTERNAL ASSERTION FAILED: "+a;throw $m(t),new Error(t)}function Co(a,t){a||So(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.href)||""}function P9(){return av()==="http:"||av()==="https:"}function av(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(P9()||dT()||"connection"in navigator)?navigator.onLine:!0}function B9(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(t,n){this.shortDelay=t,this.longDelay=n,Co(n>t,"Short delay should be less than long delay!"),this.isMobile=cT()||gT()}get(){return z9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(a,t){Co(a.emulator,"Emulator should always be set here");const{url:n}=a.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;So("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;So("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;So("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9=new Tg(3e4,6e4);function Bu(a,t){return a.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:a.tenantId}):t}async function Gu(a,t,n,s,u={}){return j4(a,u,async()=>{let c={},d={};s&&(t==="GET"?d=s:c={body:JSON.stringify(s)});const m=Sg(Object.assign({key:a.config.apiKey},d)).slice(1),_=await a._getAdditionalHeaders();_["Content-Type"]="application/json",a.languageCode&&(_["X-Firebase-Locale"]=a.languageCode);const v=Object.assign({method:t,headers:_},c);return fT()||(v.referrerPolicy="no-referrer"),q4.fetch()(F4(a,a.config.apiHost,n,m),v)})}async function j4(a,t,n){a._canInitEmulator=!1;const s=Object.assign(Object.assign({},G9),t);try{const u=new q9(a),c=await Promise.race([n(),u.promise]);u.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Fm(a,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[_,v]=m.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fm(a,"credential-already-in-use",d);if(_==="EMAIL_EXISTS")throw Fm(a,"email-already-in-use",d);if(_==="USER_DISABLED")throw Fm(a,"user-disabled",d);const b=s[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw H4(a,b,v);Is(a,b)}}catch(u){if(u instanceof No)throw u;Is(a,"network-request-failed",{message:String(u)})}}async function bg(a,t,n,s,u={}){const c=await Gu(a,t,n,s,u);return"mfaPendingCredential"in c&&Is(a,"multi-factor-auth-required",{_serverResponse:c}),c}function F4(a,t,n,s){const u=`${t}${n}?${s}`;return a.config.emulator?Y1(a.config,u):`${a.config.apiScheme}://${u}`}function H9(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class q9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ol(this.auth,"network-request-failed")),k9.get())})}}function Fm(a,t,n){const s={appName:a.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const u=Ol(a,t,s);return u.customData._tokenResponse=n,u}function rv(a){return a!==void 0&&a.enterprise!==void 0}class j9{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return H9(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function F9(a,t){return Gu(a,"GET","/v2/recaptchaConfig",Bu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K9(a,t){return Gu(a,"POST","/v1/accounts:delete",t)}async function K4(a,t){return Gu(a,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(a){if(a)try{const t=new Date(Number(a));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Y9(a,t=!1){const n=da(a),s=await n.getIdToken(t),u=Q1(s);Jt(u&&u.exp&&u.auth_time&&u.iat,n.auth,"internal-error");const c=typeof u.firebase=="object"?u.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:u,token:s,authTime:rg($p(u.auth_time)),issuedAtTime:rg($p(u.iat)),expirationTime:rg($p(u.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function $p(a){return Number(a)*1e3}function Q1(a){const[t,n,s]=a.split(".");if(t===void 0||n===void 0||s===void 0)return $m("JWT malformed, contained fewer than 3 sections"),null;try{const u=O4(n);return u?JSON.parse(u):($m("Failed to decode base64 JWT payload"),null)}catch(u){return $m("Caught error parsing JWT payload as JSON",u==null?void 0:u.toString()),null}}function sv(a){const t=Q1(a);return Jt(t,"internal-error"),Jt(typeof t.exp<"u","internal-error"),Jt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fg(a,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof No&&Q9(s)&&a.auth.currentUser===a&&await a.auth.signOut(),s}}function Q9({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const u=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,u)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rg(this.lastLoginAt),this.creationTime=rg(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g0(a){var t;const n=a.auth,s=await a.getIdToken(),u=await fg(a,K4(n,{idToken:s}));Jt(u==null?void 0:u.users.length,n,"internal-error");const c=u.users[0];a._notifyReloadListener(c);const d=!((t=c.providerUserInfo)===null||t===void 0)&&t.length?Y4(c.providerUserInfo):[],m=W9(a.providerData,d),_=a.isAnonymous,v=!(a.email&&c.passwordHash)&&!(m!=null&&m.length),b=_?v:!1,R={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:m,metadata:new d1(c.createdAt,c.lastLoginAt),isAnonymous:b};Object.assign(a,R)}async function Z9(a){const t=da(a);await g0(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function W9(a,t){return[...a.filter(s=>!t.some(u=>u.providerId===s.providerId)),...t]}function Y4(a){return a.map(t=>{var{providerId:n}=t,s=F1(t,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J9(a,t){const n=await j4(a,{},async()=>{const s=Sg({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:u,apiKey:c}=a.config,d=F4(a,u,"/v1/token",`key=${c}`),m=await a._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",q4.fetch()(d,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $9(a,t){return Gu(a,"POST","/v2/accounts:revokeToken",Bu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Jt(t.idToken,"internal-error"),Jt(typeof t.idToken<"u","internal-error"),Jt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):sv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Jt(t.length!==0,"internal-error");const n=sv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Jt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:u,expiresIn:c}=await J9(t,n);this.updateTokensAndExpiration(s,u,Number(c))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:u,expirationTime:c}=n,d=new jh;return s&&(Jt(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),u&&(Jt(typeof u=="string","internal-error",{appName:t}),d.accessToken=u),c&&(Jt(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new jh,this.toJSON())}_performRefresh(){return So("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(a,t){Jt(typeof a=="string"||typeof a>"u","internal-error",{appName:t})}class To{constructor(t){var{uid:n,auth:s,stsTokenManager:u}=t,c=F1(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new X9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=u,this.accessToken=u.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new d1(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(t){const n=await fg(this,this.stsTokenManager.getToken(this.auth,t));return Jt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Y9(this,t)}reload(){return Z9(this)}_assign(t){this!==t&&(Jt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new To(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Jt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await g0(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nl(this.auth.app))return Promise.reject(Ao(this.auth));const t=await this.getIdToken();return await fg(this,K9(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var s,u,c,d,m,_,v,b;const R=(s=n.displayName)!==null&&s!==void 0?s:void 0,U=(u=n.email)!==null&&u!==void 0?u:void 0,C=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,O=(d=n.photoURL)!==null&&d!==void 0?d:void 0,I=(m=n.tenantId)!==null&&m!==void 0?m:void 0,z=(_=n._redirectEventId)!==null&&_!==void 0?_:void 0,F=(v=n.createdAt)!==null&&v!==void 0?v:void 0,M=(b=n.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:D,emailVerified:L,isAnonymous:H,providerData:j,stsTokenManager:q}=n;Jt(D&&q,t,"internal-error");const x=jh.fromJSON(this.name,q);Jt(typeof D=="string",t,"internal-error"),Eu(R,t.name),Eu(U,t.name),Jt(typeof L=="boolean",t,"internal-error"),Jt(typeof H=="boolean",t,"internal-error"),Eu(C,t.name),Eu(O,t.name),Eu(I,t.name),Eu(z,t.name),Eu(F,t.name),Eu(M,t.name);const w=new To({uid:D,auth:t,email:U,emailVerified:L,displayName:R,isAnonymous:H,photoURL:O,phoneNumber:C,tenantId:I,stsTokenManager:x,createdAt:F,lastLoginAt:M});return j&&Array.isArray(j)&&(w.providerData=j.map(V=>Object.assign({},V))),z&&(w._redirectEventId=z),w}static async _fromIdTokenResponse(t,n,s=!1){const u=new jh;u.updateFromServerResponse(n);const c=new To({uid:n.localId,auth:t,stsTokenManager:u,isAnonymous:s});return await g0(c),c}static async _fromGetAccountInfoResponse(t,n,s){const u=n.users[0];Jt(u.localId!==void 0,"internal-error");const c=u.providerUserInfo!==void 0?Y4(u.providerUserInfo):[],d=!(u.email&&u.passwordHash)&&!(c!=null&&c.length),m=new jh;m.updateFromIdToken(s);const _=new To({uid:u.localId,auth:t,stsTokenManager:m,isAnonymous:d}),v={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:c,metadata:new d1(u.createdAt,u.lastLoginAt),isAnonymous:!(u.email&&u.passwordHash)&&!(c!=null&&c.length)};return Object.assign(_,v),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=new Map;function bo(a){Co(a instanceof Function,"Expected a class definition");let t=lv.get(a);return t?(Co(t instanceof a,"Instance stored in cache mismatched with class"),t):(t=new a,lv.set(a,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Q4.type="NONE";const ov=Q4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(a,t,n){return`firebase:${a}:${t}:${n}`}class Fh{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:u,name:c}=this.auth;this.fullUserKey=t0(this.userKey,u.apiKey,c),this.fullPersistenceKey=t0("persistence",u.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?To._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Fh(bo(ov),t,s);const u=(await Promise.all(n.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let c=u[0]||bo(ov);const d=t0(s,t.config.apiKey,t.name);let m=null;for(const v of n)try{const b=await v._get(d);if(b){const R=To._fromJSON(t,b);v!==c&&(m=R),c=v;break}}catch{}const _=u.filter(v=>v._shouldAllowMigration);return!c._shouldAllowMigration||!_.length?new Fh(c,t,s):(c=_[0],m&&await c._set(d,m.toJSON()),await Promise.all(n.map(async v=>{if(v!==c)try{await v._remove(d)}catch{}})),new Fh(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(a){const t=a.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(J4(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(X4(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(tE(t))return"Blackberry";if(eE(t))return"Webos";if(Z4(t))return"Safari";if((t.includes("chrome/")||W4(t))&&!t.includes("edge/"))return"Chrome";if($4(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=a.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function X4(a=fa()){return/firefox\//i.test(a)}function Z4(a=fa()){const t=a.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function W4(a=fa()){return/crios\//i.test(a)}function J4(a=fa()){return/iemobile/i.test(a)}function $4(a=fa()){return/android/i.test(a)}function tE(a=fa()){return/blackberry/i.test(a)}function eE(a=fa()){return/webos/i.test(a)}function X1(a=fa()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function t8(a=fa()){var t;return X1(a)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function e8(){return mT()&&document.documentMode===10}function nE(a=fa()){return X1(a)||$4(a)||eE(a)||tE(a)||/windows phone/i.test(a)||J4(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(a,t=[]){let n;switch(a){case"Browser":n=uv(fa());break;case"Worker":n=`${uv(fa())}-${a}`;break;default:n=a}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${af}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=c=>new Promise((d,m)=>{try{const _=t(c);d(_)}catch(_){m(_)}});s.onAbort=n,this.queue.push(s);const u=this.queue.length-1;return()=>{this.queue[u]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const u of n)try{u()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8(a,t={}){return Gu(a,"GET","/v2/passwordPolicy",Bu(a,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8=6;class r8{constructor(t){var n,s,u,c;const d=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:a8,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(u=(s=t.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&u!==void 0?u:"",this.forceUpgradeOnSignin=(c=t.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,s,u,c,d,m;const _={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,_),this.validatePasswordCharacterOptions(t,_),_.isValid&&(_.isValid=(n=_.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),_.isValid&&(_.isValid=(s=_.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),_.isValid&&(_.isValid=(u=_.containsLowercaseLetter)!==null&&u!==void 0?u:!0),_.isValid&&(_.isValid=(c=_.containsUppercaseLetter)!==null&&c!==void 0?c:!0),_.isValid&&(_.isValid=(d=_.containsNumericCharacter)!==null&&d!==void 0?d:!0),_.isValid&&(_.isValid=(m=_.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),_}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,u=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),u&&(n.meetsMaxPasswordLength=t.length<=u)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let u=0;u<t.length;u++)s=t.charAt(u),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,u,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=u)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(t,n,s,u){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=u,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cv(this),this.idTokenSubscription=new cv(this),this.beforeStateQueue=new n8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=u.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=bo(n)),this._initializationPromise=this.queue(async()=>{var s,u;if(!this._deleted&&(this.persistenceManager=await Fh.create(this,t),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await K4(this,{idToken:t}),s=await To._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Nl(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let u=s,c=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=u==null?void 0:u._redirectEventId,_=await this.tryRedirectSignIn(t);(!d||d===m)&&(_!=null&&_.user)&&(u=_.user,c=!0)}if(!u)return this.directlySetCurrentUser(null);if(!u._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(u)}catch(d){u=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return u?this.reloadAndSetCurrentUserOrClear(u):this.directlySetCurrentUser(null)}return Jt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===u._redirectEventId?this.directlySetCurrentUser(u):this.reloadAndSetCurrentUserOrClear(u)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await g0(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=B9()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Nl(this.app))return Promise.reject(Ao(this));const n=t?da(t):null;return n&&Jt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Jt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Nl(this.app)?Promise.reject(Ao(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Nl(this.app)?Promise.reject(Ao(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bo(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await i8(this),n=new r8(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Eg("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await $9(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&bo(t)||this._popupRedirectResolver;Jt(n,this,"argument-error"),this.redirectPersistenceManager=await Fh.create(this,[bo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,u){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Jt(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const _=t.addObserver(n,s,u);return()=>{d=!0,_()}}else{const _=t.addObserver(n);return()=>{d=!0,_()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Jt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=iE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const u=await this._getAppCheckToken();return u&&(n["X-Firebase-AppCheck"]=u),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&L9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Gc(a){return da(a)}class cv{constructor(t){this.auth=t,this.observer=null,this.addObserver=bT(n=>this.observer=n)}get next(){return Jt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function l8(a){V0=a}function aE(a){return V0.loadJS(a)}function o8(){return V0.recaptchaEnterpriseScript}function u8(){return V0.gapiScript}function c8(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class h8{constructor(){this.enterprise=new f8}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class f8{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const d8="recaptcha-enterprise",rE="NO_RECAPTCHA";class g8{constructor(t){this.type=d8,this.auth=Gc(t)}async verify(t="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{F9(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(_=>{if(_.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const v=new j9(_);return c.tenantId==null?c._agentRecaptchaConfig=v:c._tenantRecaptchaConfigs[c.tenantId]=v,d(v.siteKey)}}).catch(_=>{m(_)})})}function u(c,d,m){const _=window.grecaptcha;rv(_)?_.enterprise.ready(()=>{_.enterprise.execute(c,{action:t}).then(v=>{d(v)}).catch(()=>{d(rE)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new h8().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(m=>{if(!n&&rv(window.grecaptcha))u(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let _=o8();_.length!==0&&(_+=m),aE(_).then(()=>{u(m,c,d)}).catch(v=>{d(v)})}}).catch(m=>{d(m)})})}}async function hv(a,t,n,s=!1,u=!1){const c=new g8(a);let d;if(u)d=rE;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const m=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const _=m.phoneEnrollmentInfo.phoneNumber,v=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:_,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const _=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function g1(a,t,n,s,u){var c;if(!((c=a._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await hv(a,t,n,n==="getOobCode");return s(a,d)}else return s(a,t).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await hv(a,t,n,n==="getOobCode");return s(a,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(a,t){const n=j1(a,"auth");if(n.isInitialized()){const u=n.getImmediate(),c=n.getOptions();if(h0(c,t??{}))return u;Is(u,"already-initialized")}return n.initialize({options:t})}function p8(a,t){const n=(t==null?void 0:t.persistence)||[],s=(Array.isArray(n)?n:[n]).map(bo);t!=null&&t.errorMap&&a._updateErrorMap(t.errorMap),a._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}function y8(a,t,n){const s=Gc(a);Jt(s._canInitEmulator,s,"emulator-config-failed"),Jt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const u=!1,c=sE(t),{host:d,port:m}=_8(t),_=m===null?"":`:${m}`;s.config.emulator={url:`${c}//${d}${_}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:u})}),v8()}function sE(a){const t=a.indexOf(":");return t<0?"":a.substr(0,t+1)}function _8(a){const t=sE(a),n=/(\/\/)?([^?#/]+)/.exec(a.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",u=/^(\[[^\]]+\])(:|$)/.exec(s);if(u){const c=u[1];return{host:c,port:fv(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:fv(d)}}}function fv(a){if(!a)return null;const t=Number(a);return isNaN(t)?null:t}function v8(){function a(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return So("not implemented")}_getIdTokenResponse(t){return So("not implemented")}_linkToIdToken(t,n){return So("not implemented")}_getReauthenticationResolver(t){return So("not implemented")}}async function E8(a,t){return Gu(a,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S8(a,t){return bg(a,"POST","/v1/accounts:signInWithPassword",Bu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T8(a,t){return bg(a,"POST","/v1/accounts:signInWithEmailLink",Bu(a,t))}async function b8(a,t){return bg(a,"POST","/v1/accounts:signInWithEmailLink",Bu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg extends Z1{constructor(t,n,s,u=null){super("password",s),this._email=t,this._password=n,this._tenantId=u}static _fromEmailAndPassword(t,n){return new dg(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new dg(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return g1(t,n,"signInWithPassword",S8);case"emailLink":return T8(t,{email:this._email,oobCode:this._password});default:Is(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return g1(t,s,"signUpPassword",E8);case"emailLink":return b8(t,{idToken:n,email:this._email,oobCode:this._password});default:Is(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kh(a,t){return bg(a,"POST","/v1/accounts:signInWithIdp",Bu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8="http://localhost";class Pc extends Z1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Pc(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Is("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:u}=n,c=F1(n,["providerId","signInMethod"]);if(!s||!u)return null;const d=new Pc(s,u);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const n=this.buildRequest();return Kh(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Kh(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Kh(t,n)}buildRequest(){const t={requestUri:A8,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Sg(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R8(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function C8(a){const t=$d(tg(a)).link,n=t?$d(tg(t)).deep_link_id:null,s=$d(tg(a)).deep_link_id;return(s?$d(tg(s)).link:null)||s||n||t||a}class W1{constructor(t){var n,s,u,c,d,m;const _=$d(tg(t)),v=(n=_.apiKey)!==null&&n!==void 0?n:null,b=(s=_.oobCode)!==null&&s!==void 0?s:null,R=R8((u=_.mode)!==null&&u!==void 0?u:null);Jt(v&&b&&R,"argument-error"),this.apiKey=v,this.operation=R,this.code=b,this.continueUrl=(c=_.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(d=_.languageCode)!==null&&d!==void 0?d:null,this.tenantId=(m=_.tenantId)!==null&&m!==void 0?m:null}static parseLink(t){const n=C8(t);try{return new W1(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(){this.providerId=rf.PROVIDER_ID}static credential(t,n){return dg._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=W1.parseLink(n);return Jt(s,"argument-error"),dg._fromEmailAndCode(t,s.code,s.tenantId)}}rf.PROVIDER_ID="password";rf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";rf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag extends lE{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su extends Ag{constructor(){super("facebook.com")}static credential(t){return Pc._fromParams({providerId:Su.PROVIDER_ID,signInMethod:Su.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Su.credentialFromTaggedObject(t)}static credentialFromError(t){return Su.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Su.credential(t.oauthAccessToken)}catch{return null}}}Su.FACEBOOK_SIGN_IN_METHOD="facebook.com";Su.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends Ag{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Pc._fromParams({providerId:Tu.PROVIDER_ID,signInMethod:Tu.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Tu.credentialFromTaggedObject(t)}static credentialFromError(t){return Tu.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Tu.credential(n,s)}catch{return null}}}Tu.GOOGLE_SIGN_IN_METHOD="google.com";Tu.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends Ag{constructor(){super("github.com")}static credential(t){return Pc._fromParams({providerId:bu.PROVIDER_ID,signInMethod:bu.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bu.credentialFromTaggedObject(t)}static credentialFromError(t){return bu.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bu.credential(t.oauthAccessToken)}catch{return null}}}bu.GITHUB_SIGN_IN_METHOD="github.com";bu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends Ag{constructor(){super("twitter.com")}static credential(t,n){return Pc._fromParams({providerId:Au.PROVIDER_ID,signInMethod:Au.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Au.credentialFromTaggedObject(t)}static credentialFromError(t){return Au.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Au.credential(n,s)}catch{return null}}}Au.TWITTER_SIGN_IN_METHOD="twitter.com";Au.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w8(a,t){return bg(a,"POST","/v1/accounts:signUp",Bu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,u=!1){const c=await To._fromIdTokenResponse(t,s,u),d=dv(s);return new zc({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const u=dv(s);return new zc({user:t,providerId:u,_tokenResponse:s,operationType:n})}}function dv(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0 extends No{constructor(t,n,s,u){var c;super(n.code,n.message),this.operationType=s,this.user=u,Object.setPrototypeOf(this,m0.prototype),this.customData={appName:t.name,tenantId:(c=t.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,u){return new m0(t,n,s,u)}}function oE(a,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(a):n._getIdTokenResponse(a)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?m0._fromErrorAndOperation(a,c,t,s):c})}async function D8(a,t,n=!1){const s=await fg(a,t._linkToIdToken(a.auth,await a.getIdToken()),n);return zc._forOperation(a,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N8(a,t,n=!1){const{auth:s}=a;if(Nl(s.app))return Promise.reject(Ao(s));const u="reauthenticate";try{const c=await fg(a,oE(s,u,t,a),n);Jt(c.idToken,s,"internal-error");const d=Q1(c.idToken);Jt(d,s,"internal-error");const{sub:m}=d;return Jt(a.uid===m,s,"user-mismatch"),zc._forOperation(a,u,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Is(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uE(a,t,n=!1){if(Nl(a.app))return Promise.reject(Ao(a));const s="signIn",u=await oE(a,s,t),c=await zc._fromIdTokenResponse(a,s,u);return n||await a._updateCurrentUser(c.user),c}async function O8(a,t){return uE(Gc(a),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cE(a){const t=Gc(a);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function M8(a,t,n){if(Nl(a.app))return Promise.reject(Ao(a));const s=Gc(a),d=await g1(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",w8).catch(_=>{throw _.code==="auth/password-does-not-meet-requirements"&&cE(a),_}),m=await zc._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function x8(a,t,n){return Nl(a.app)?Promise.reject(Ao(a)):O8(da(a),rf.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&cE(a),s})}function V8(a,t,n,s){return da(a).onIdTokenChanged(t,n,s)}function U8(a,t,n){return da(a).beforeAuthStateChanged(t,n)}function hE(a,t,n,s){return da(a).onAuthStateChanged(t,n,s)}function I8(a){return da(a).signOut()}const p0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(p0,"1"),this.storage.removeItem(p0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8=1e3,P8=10;class dE extends fE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),u=this.localCache[n];s!==u&&t(n,u,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((d,m,_)=>{this.notifyListeners(d,_)});return}const s=t.key;n?this.detachListener():this.stopPolling();const u=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);e8()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(u,P8):u()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const u of Array.from(s))u(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},L8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}dE.type="LOCAL";const z8=dE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE extends fE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}gE.type="SESSION";const mE=gE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(a){return Promise.all(a.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(u=>u.isListeningto(t));if(n)return n;const s=new U0(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:u,data:c}=n.data,d=this.handlersMap[u];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:u});const m=Array.from(d).map(async v=>v(n.origin,c)),_=await B8(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:u,response:_})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}U0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(a="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return a+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const u=typeof MessageChannel<"u"?new MessageChannel:null;if(!u)throw new Error("connection_unavailable");let c,d;return new Promise((m,_)=>{const v=J1("",20);u.port1.start();const b=setTimeout(()=>{_(new Error("unsupported_event"))},s);d={messageChannel:u,onMessage(R){const U=R;if(U.data.eventId===v)switch(U.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(U.data.response);break;default:clearTimeout(b),clearTimeout(c),_(new Error("invalid_response"));break}}},this.handlers.add(d),u.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:v,data:n},[u.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(){return window}function k8(a){Ml().location.href=a}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(){return typeof Ml().WorkerGlobalScope<"u"&&typeof Ml().importScripts=="function"}async function H8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function q8(){var a;return((a=navigator==null?void 0:navigator.serviceWorker)===null||a===void 0?void 0:a.controller)||null}function j8(){return pE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="firebaseLocalStorageDb",F8=1,y0="firebaseLocalStorage",_E="fbase_key";class Rg{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function I0(a,t){return a.transaction([y0],t?"readwrite":"readonly").objectStore(y0)}function K8(){const a=indexedDB.deleteDatabase(yE);return new Rg(a).toPromise()}function m1(){const a=indexedDB.open(yE,F8);return new Promise((t,n)=>{a.addEventListener("error",()=>{n(a.error)}),a.addEventListener("upgradeneeded",()=>{const s=a.result;try{s.createObjectStore(y0,{keyPath:_E})}catch(u){n(u)}}),a.addEventListener("success",async()=>{const s=a.result;s.objectStoreNames.contains(y0)?t(s):(s.close(),await K8(),t(await m1()))})})}async function gv(a,t,n){const s=I0(a,!0).put({[_E]:t,value:n});return new Rg(s).toPromise()}async function Y8(a,t){const n=I0(a,!1).get(t),s=await new Rg(n).toPromise();return s===void 0?null:s.value}function mv(a,t){const n=I0(a,!0).delete(t);return new Rg(n).toPromise()}const Q8=800,X8=3;class vE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await m1(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>X8)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=U0._getInstance(j8()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await H8(),!this.activeServiceWorker)return;this.sender=new G8(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||q8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await m1();return await gv(t,p0,"1"),await mv(t,p0),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>gv(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>Y8(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>mv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(u=>{const c=I0(u,!1).getAll();return new Rg(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:u,value:c}of t)s.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(c)&&(this.notifyListeners(u,c),n.push(u));for(const u of Object.keys(this.localCache))this.localCache[u]&&!s.has(u)&&(this.notifyListeners(u,null),n.push(u));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const u of Array.from(s))u(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Q8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vE.type="LOCAL";const Z8=vE;new Tg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W8(a,t){return t?bo(t):(Jt(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1 extends Z1{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Kh(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Kh(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Kh(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function J8(a){return uE(a.auth,new $1(a),a.bypassAuthState)}function $8(a){const{auth:t,user:n}=a;return Jt(n,t,"internal-error"),N8(n,new $1(a),a.bypassAuthState)}async function tb(a){const{auth:t,user:n}=a;return Jt(n,t,"internal-error"),D8(n,new $1(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(t,n,s,u,c=!1){this.auth=t,this.resolver=s,this.user=u,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:u,tenantId:c,error:d,type:m}=t;if(d){this.reject(d);return}const _={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:u||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(_))}catch(v){this.reject(v)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return J8;case"linkViaPopup":case"linkViaRedirect":return tb;case"reauthViaPopup":case"reauthViaRedirect":return $8;default:Is(this.auth,"internal-error")}}resolve(t){Co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=new Tg(2e3,1e4);class qh extends EE{constructor(t,n,s,u,c){super(t,n,u,c),this.provider=s,this.authWindow=null,this.pollId=null,qh.currentPopupAction&&qh.currentPopupAction.cancel(),qh.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Jt(t,this.auth,"internal-error"),t}async onExecution(){Co(this.filter.length===1,"Popup operations only handle one event");const t=J1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ol(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ol(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qh.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ol(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,eb.get())};t()}}qh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="pendingRedirect",e0=new Map;class ib extends EE{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=e0.get(this.auth._key());if(!t){try{const s=await ab(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}e0.set(this.auth._key(),t)}return this.bypassAuthState||e0.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ab(a,t){const n=lb(t),s=sb(a);if(!await s._isAvailable())return!1;const u=await s._get(n)==="true";return await s._remove(n),u}function rb(a,t){e0.set(a._key(),t)}function sb(a){return bo(a._redirectPersistence)}function lb(a){return t0(nb,a.config.apiKey,a.name)}async function ob(a,t,n=!1){if(Nl(a.app))return Promise.reject(Ao(a));const s=Gc(a),u=W8(s,t),d=await new ib(s,u,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=10*60*1e3;class cb{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!hb(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var s;if(t.error&&!SE(t)){const u=((s=t.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Ol(this.auth,u))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=ub&&this.cachedEventUids.clear(),this.cachedEventUids.has(pv(t))}saveEventToCache(t){this.cachedEventUids.add(pv(t)),this.lastProcessedEventTime=Date.now()}}function pv(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(t=>t).join("-")}function SE({type:a,error:t}){return a==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function hb(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SE(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fb(a,t={}){return Gu(a,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gb=/^https?/;async function mb(a){if(a.config.emulator)return;const{authorizedDomains:t}=await fb(a);for(const n of t)try{if(pb(n))return}catch{}Is(a,"unauthorized-domain")}function pb(a){const t=f1(),{protocol:n,hostname:s}=new URL(t);if(a.startsWith("chrome-extension://")){const d=new URL(a);return d.hostname===""&&s===""?n==="chrome-extension:"&&a.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!gb.test(n))return!1;if(db.test(a))return s===a;const u=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+u+"|"+u+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=new Tg(3e4,6e4);function yv(){const a=Ml().___jsl;if(a!=null&&a.H){for(const t of Object.keys(a.H))if(a.H[t].r=a.H[t].r||[],a.H[t].L=a.H[t].L||[],a.H[t].r=[...a.H[t].L],a.CP)for(let n=0;n<a.CP.length;n++)a.CP[n]=null}}function _b(a){return new Promise((t,n)=>{var s,u,c;function d(){yv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{yv(),n(Ol(a,"network-request-failed"))},timeout:yb.get()})}if(!((u=(s=Ml().gapi)===null||s===void 0?void 0:s.iframes)===null||u===void 0)&&u.Iframe)t(gapi.iframes.getContext());else if(!((c=Ml().gapi)===null||c===void 0)&&c.load)d();else{const m=c8("iframefcb");return Ml()[m]=()=>{gapi.load?d():n(Ol(a,"network-request-failed"))},aE(`${u8()}?onload=${m}`).catch(_=>n(_))}}).catch(t=>{throw n0=null,t})}let n0=null;function vb(a){return n0=n0||_b(a),n0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=new Tg(5e3,15e3),Sb="__/auth/iframe",Tb="emulator/auth/iframe",bb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ab=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rb(a){const t=a.config;Jt(t.authDomain,a,"auth-domain-config-required");const n=t.emulator?Y1(t,Tb):`https://${a.config.authDomain}/${Sb}`,s={apiKey:t.apiKey,appName:a.name,v:af},u=Ab.get(a.config.apiHost);u&&(s.eid=u);const c=a._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Sg(s).slice(1)}`}async function Cb(a){const t=await vb(a),n=Ml().gapi;return Jt(n,a,"internal-error"),t.open({where:document.body,url:Rb(a),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bb,dontclear:!0},s=>new Promise(async(u,c)=>{await s.restyle({setHideOnLeave:!1});const d=Ol(a,"network-request-failed"),m=Ml().setTimeout(()=>{c(d)},Eb.get());function _(){Ml().clearTimeout(m),u(s)}s.ping(_).then(_,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Db=500,Nb=600,Ob="_blank",Mb="http://localhost";class _v{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xb(a,t,n,s=Db,u=Nb){const c=Math.max((window.screen.availHeight-u)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const _=Object.assign(Object.assign({},wb),{width:s.toString(),height:u.toString(),top:c,left:d}),v=fa().toLowerCase();n&&(m=W4(v)?Ob:n),X4(v)&&(t=t||Mb,_.scrollbars="yes");const b=Object.entries(_).reduce((U,[C,O])=>`${U}${C}=${O},`,"");if(t8(v)&&m!=="_self")return Vb(t||"",m),new _v(null);const R=window.open(t||"",m,b);Jt(R,a,"popup-blocked");try{R.focus()}catch{}return new _v(R)}function Vb(a,t){const n=document.createElement("a");n.href=a,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="__/auth/handler",Ib="emulator/auth/handler",Lb=encodeURIComponent("fac");async function vv(a,t,n,s,u,c){Jt(a.config.authDomain,a,"auth-domain-config-required"),Jt(a.config.apiKey,a,"invalid-api-key");const d={apiKey:a.config.apiKey,appName:a.name,authType:n,redirectUrl:s,v:af,eventId:u};if(t instanceof lE){t.setDefaultLanguage(a.languageCode),d.providerId=t.providerId||"",TT(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[b,R]of Object.entries({}))d[b]=R}if(t instanceof Ag){const b=t.getScopes().filter(R=>R!=="");b.length>0&&(d.scopes=b.join(","))}a.tenantId&&(d.tid=a.tenantId);const m=d;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const _=await a._getAppCheckToken(),v=_?`#${Lb}=${encodeURIComponent(_)}`:"";return`${Pb(a)}?${Sg(m).slice(1)}${v}`}function Pb({config:a}){return a.emulator?Y1(a,Ib):`https://${a.authDomain}/${Ub}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="webStorageSupport";class zb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mE,this._completeRedirectFn=ob,this._overrideRedirectResult=rb}async _openPopup(t,n,s,u){var c;Co((c=this.eventManagers[t._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await vv(t,n,s,f1(),u);return xb(t,d,J1())}async _openRedirect(t,n,s,u){await this._originValidation(t);const c=await vv(t,n,s,f1(),u);return k8(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:u,promise:c}=this.eventManagers[n];return u?Promise.resolve(u):(Co(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await Cb(t),s=new cb(t);return n.register("authEvent",u=>(Jt(u==null?void 0:u.authEvent,t,"invalid-auth-event"),{status:s.onEvent(u.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(t1,{type:t1},u=>{var c;const d=(c=u==null?void 0:u[0])===null||c===void 0?void 0:c[t1];d!==void 0&&n(!!d),Is(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mb(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return nE()||Z4()||X1()}}const Bb=zb;var Ev="@firebase/auth",Sv="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Jt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Hb(a){Qh(new Lc("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),u=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;Jt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const _={apiKey:d,authDomain:m,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iE(a)},v=new s8(s,u,c,_);return p8(v,n),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Qh(new Lc("auth-internal",t=>{const n=Gc(t.getProvider("auth").getImmediate());return(s=>new Gb(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Du(Ev,Sv,kb(a)),Du(Ev,Sv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=5*60,jb=V4("authIdTokenMaxAge")||qb;let Tv=null;const Fb=a=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>jb)return;const u=n==null?void 0:n.token;Tv!==u&&(Tv=u,await fetch(a,{method:u?"POST":"DELETE",headers:u?{Authorization:`Bearer ${u}`}:{}}))};function Kb(a=P4()){const t=j1(a,"auth");if(t.isInitialized())return t.getImmediate();const n=m8(a,{popupRedirectResolver:Bb,persistence:[Z8,z8,mE]}),s=V4("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=Fb(c.toString());U8(n,d,()=>d(n.currentUser)),V8(n,m=>d(m))}}const u=M4("auth");return u&&y8(n,`http://${u}`),n}function Yb(){var a,t;return(t=(a=document.getElementsByTagName("head"))===null||a===void 0?void 0:a[0])!==null&&t!==void 0?t:document}l8({loadJS(a){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",a),s.onload=t,s.onerror=u=>{const c=Ol("internal-error");c.customData=u,n(c)},s.type="text/javascript",s.charset="UTF-8",Yb().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Hb("Browser");var bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nu,TE;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(q,x){function w(){}w.prototype=x.prototype,q.D=x.prototype,q.prototype=new w,q.prototype.constructor=q,q.C=function(V,G,Y){for(var T=Array(arguments.length-2),K=2;K<arguments.length;K++)T[K-2]=arguments[K];return x.prototype[G].apply(V,T)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(q,x,w){w||(w=0);var V=Array(16);if(typeof x=="string")for(var G=0;16>G;++G)V[G]=x.charCodeAt(w++)|x.charCodeAt(w++)<<8|x.charCodeAt(w++)<<16|x.charCodeAt(w++)<<24;else for(G=0;16>G;++G)V[G]=x[w++]|x[w++]<<8|x[w++]<<16|x[w++]<<24;x=q.g[0],w=q.g[1],G=q.g[2];var Y=q.g[3],T=x+(Y^w&(G^Y))+V[0]+3614090360&4294967295;x=w+(T<<7&4294967295|T>>>25),T=Y+(G^x&(w^G))+V[1]+3905402710&4294967295,Y=x+(T<<12&4294967295|T>>>20),T=G+(w^Y&(x^w))+V[2]+606105819&4294967295,G=Y+(T<<17&4294967295|T>>>15),T=w+(x^G&(Y^x))+V[3]+3250441966&4294967295,w=G+(T<<22&4294967295|T>>>10),T=x+(Y^w&(G^Y))+V[4]+4118548399&4294967295,x=w+(T<<7&4294967295|T>>>25),T=Y+(G^x&(w^G))+V[5]+1200080426&4294967295,Y=x+(T<<12&4294967295|T>>>20),T=G+(w^Y&(x^w))+V[6]+2821735955&4294967295,G=Y+(T<<17&4294967295|T>>>15),T=w+(x^G&(Y^x))+V[7]+4249261313&4294967295,w=G+(T<<22&4294967295|T>>>10),T=x+(Y^w&(G^Y))+V[8]+1770035416&4294967295,x=w+(T<<7&4294967295|T>>>25),T=Y+(G^x&(w^G))+V[9]+2336552879&4294967295,Y=x+(T<<12&4294967295|T>>>20),T=G+(w^Y&(x^w))+V[10]+4294925233&4294967295,G=Y+(T<<17&4294967295|T>>>15),T=w+(x^G&(Y^x))+V[11]+2304563134&4294967295,w=G+(T<<22&4294967295|T>>>10),T=x+(Y^w&(G^Y))+V[12]+1804603682&4294967295,x=w+(T<<7&4294967295|T>>>25),T=Y+(G^x&(w^G))+V[13]+4254626195&4294967295,Y=x+(T<<12&4294967295|T>>>20),T=G+(w^Y&(x^w))+V[14]+2792965006&4294967295,G=Y+(T<<17&4294967295|T>>>15),T=w+(x^G&(Y^x))+V[15]+1236535329&4294967295,w=G+(T<<22&4294967295|T>>>10),T=x+(G^Y&(w^G))+V[1]+4129170786&4294967295,x=w+(T<<5&4294967295|T>>>27),T=Y+(w^G&(x^w))+V[6]+3225465664&4294967295,Y=x+(T<<9&4294967295|T>>>23),T=G+(x^w&(Y^x))+V[11]+643717713&4294967295,G=Y+(T<<14&4294967295|T>>>18),T=w+(Y^x&(G^Y))+V[0]+3921069994&4294967295,w=G+(T<<20&4294967295|T>>>12),T=x+(G^Y&(w^G))+V[5]+3593408605&4294967295,x=w+(T<<5&4294967295|T>>>27),T=Y+(w^G&(x^w))+V[10]+38016083&4294967295,Y=x+(T<<9&4294967295|T>>>23),T=G+(x^w&(Y^x))+V[15]+3634488961&4294967295,G=Y+(T<<14&4294967295|T>>>18),T=w+(Y^x&(G^Y))+V[4]+3889429448&4294967295,w=G+(T<<20&4294967295|T>>>12),T=x+(G^Y&(w^G))+V[9]+568446438&4294967295,x=w+(T<<5&4294967295|T>>>27),T=Y+(w^G&(x^w))+V[14]+3275163606&4294967295,Y=x+(T<<9&4294967295|T>>>23),T=G+(x^w&(Y^x))+V[3]+4107603335&4294967295,G=Y+(T<<14&4294967295|T>>>18),T=w+(Y^x&(G^Y))+V[8]+1163531501&4294967295,w=G+(T<<20&4294967295|T>>>12),T=x+(G^Y&(w^G))+V[13]+2850285829&4294967295,x=w+(T<<5&4294967295|T>>>27),T=Y+(w^G&(x^w))+V[2]+4243563512&4294967295,Y=x+(T<<9&4294967295|T>>>23),T=G+(x^w&(Y^x))+V[7]+1735328473&4294967295,G=Y+(T<<14&4294967295|T>>>18),T=w+(Y^x&(G^Y))+V[12]+2368359562&4294967295,w=G+(T<<20&4294967295|T>>>12),T=x+(w^G^Y)+V[5]+4294588738&4294967295,x=w+(T<<4&4294967295|T>>>28),T=Y+(x^w^G)+V[8]+2272392833&4294967295,Y=x+(T<<11&4294967295|T>>>21),T=G+(Y^x^w)+V[11]+1839030562&4294967295,G=Y+(T<<16&4294967295|T>>>16),T=w+(G^Y^x)+V[14]+4259657740&4294967295,w=G+(T<<23&4294967295|T>>>9),T=x+(w^G^Y)+V[1]+2763975236&4294967295,x=w+(T<<4&4294967295|T>>>28),T=Y+(x^w^G)+V[4]+1272893353&4294967295,Y=x+(T<<11&4294967295|T>>>21),T=G+(Y^x^w)+V[7]+4139469664&4294967295,G=Y+(T<<16&4294967295|T>>>16),T=w+(G^Y^x)+V[10]+3200236656&4294967295,w=G+(T<<23&4294967295|T>>>9),T=x+(w^G^Y)+V[13]+681279174&4294967295,x=w+(T<<4&4294967295|T>>>28),T=Y+(x^w^G)+V[0]+3936430074&4294967295,Y=x+(T<<11&4294967295|T>>>21),T=G+(Y^x^w)+V[3]+3572445317&4294967295,G=Y+(T<<16&4294967295|T>>>16),T=w+(G^Y^x)+V[6]+76029189&4294967295,w=G+(T<<23&4294967295|T>>>9),T=x+(w^G^Y)+V[9]+3654602809&4294967295,x=w+(T<<4&4294967295|T>>>28),T=Y+(x^w^G)+V[12]+3873151461&4294967295,Y=x+(T<<11&4294967295|T>>>21),T=G+(Y^x^w)+V[15]+530742520&4294967295,G=Y+(T<<16&4294967295|T>>>16),T=w+(G^Y^x)+V[2]+3299628645&4294967295,w=G+(T<<23&4294967295|T>>>9),T=x+(G^(w|~Y))+V[0]+4096336452&4294967295,x=w+(T<<6&4294967295|T>>>26),T=Y+(w^(x|~G))+V[7]+1126891415&4294967295,Y=x+(T<<10&4294967295|T>>>22),T=G+(x^(Y|~w))+V[14]+2878612391&4294967295,G=Y+(T<<15&4294967295|T>>>17),T=w+(Y^(G|~x))+V[5]+4237533241&4294967295,w=G+(T<<21&4294967295|T>>>11),T=x+(G^(w|~Y))+V[12]+1700485571&4294967295,x=w+(T<<6&4294967295|T>>>26),T=Y+(w^(x|~G))+V[3]+2399980690&4294967295,Y=x+(T<<10&4294967295|T>>>22),T=G+(x^(Y|~w))+V[10]+4293915773&4294967295,G=Y+(T<<15&4294967295|T>>>17),T=w+(Y^(G|~x))+V[1]+2240044497&4294967295,w=G+(T<<21&4294967295|T>>>11),T=x+(G^(w|~Y))+V[8]+1873313359&4294967295,x=w+(T<<6&4294967295|T>>>26),T=Y+(w^(x|~G))+V[15]+4264355552&4294967295,Y=x+(T<<10&4294967295|T>>>22),T=G+(x^(Y|~w))+V[6]+2734768916&4294967295,G=Y+(T<<15&4294967295|T>>>17),T=w+(Y^(G|~x))+V[13]+1309151649&4294967295,w=G+(T<<21&4294967295|T>>>11),T=x+(G^(w|~Y))+V[4]+4149444226&4294967295,x=w+(T<<6&4294967295|T>>>26),T=Y+(w^(x|~G))+V[11]+3174756917&4294967295,Y=x+(T<<10&4294967295|T>>>22),T=G+(x^(Y|~w))+V[2]+718787259&4294967295,G=Y+(T<<15&4294967295|T>>>17),T=w+(Y^(G|~x))+V[9]+3951481745&4294967295,q.g[0]=q.g[0]+x&4294967295,q.g[1]=q.g[1]+(G+(T<<21&4294967295|T>>>11))&4294967295,q.g[2]=q.g[2]+G&4294967295,q.g[3]=q.g[3]+Y&4294967295}s.prototype.u=function(q,x){x===void 0&&(x=q.length);for(var w=x-this.blockSize,V=this.B,G=this.h,Y=0;Y<x;){if(G==0)for(;Y<=w;)u(this,q,Y),Y+=this.blockSize;if(typeof q=="string"){for(;Y<x;)if(V[G++]=q.charCodeAt(Y++),G==this.blockSize){u(this,V),G=0;break}}else for(;Y<x;)if(V[G++]=q[Y++],G==this.blockSize){u(this,V),G=0;break}}this.h=G,this.o+=x},s.prototype.v=function(){var q=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);q[0]=128;for(var x=1;x<q.length-8;++x)q[x]=0;var w=8*this.o;for(x=q.length-8;x<q.length;++x)q[x]=w&255,w/=256;for(this.u(q),q=Array(16),x=w=0;4>x;++x)for(var V=0;32>V;V+=8)q[w++]=this.g[x]>>>V&255;return q};function c(q,x){var w=m;return Object.prototype.hasOwnProperty.call(w,q)?w[q]:w[q]=x(q)}function d(q,x){this.h=x;for(var w=[],V=!0,G=q.length-1;0<=G;G--){var Y=q[G]|0;V&&Y==x||(w[G]=Y,V=!1)}this.g=w}var m={};function _(q){return-128<=q&&128>q?c(q,function(x){return new d([x|0],0>x?-1:0)}):new d([q|0],0>q?-1:0)}function v(q){if(isNaN(q)||!isFinite(q))return R;if(0>q)return z(v(-q));for(var x=[],w=1,V=0;q>=w;V++)x[V]=q/w|0,w*=4294967296;return new d(x,0)}function b(q,x){if(q.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(q.charAt(0)=="-")return z(b(q.substring(1),x));if(0<=q.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=v(Math.pow(x,8)),V=R,G=0;G<q.length;G+=8){var Y=Math.min(8,q.length-G),T=parseInt(q.substring(G,G+Y),x);8>Y?(Y=v(Math.pow(x,Y)),V=V.j(Y).add(v(T))):(V=V.j(w),V=V.add(v(T)))}return V}var R=_(0),U=_(1),C=_(16777216);a=d.prototype,a.m=function(){if(I(this))return-z(this).m();for(var q=0,x=1,w=0;w<this.g.length;w++){var V=this.i(w);q+=(0<=V?V:4294967296+V)*x,x*=4294967296}return q},a.toString=function(q){if(q=q||10,2>q||36<q)throw Error("radix out of range: "+q);if(O(this))return"0";if(I(this))return"-"+z(this).toString(q);for(var x=v(Math.pow(q,6)),w=this,V="";;){var G=L(w,x).g;w=F(w,G.j(x));var Y=((0<w.g.length?w.g[0]:w.h)>>>0).toString(q);if(w=G,O(w))return Y+V;for(;6>Y.length;)Y="0"+Y;V=Y+V}},a.i=function(q){return 0>q?0:q<this.g.length?this.g[q]:this.h};function O(q){if(q.h!=0)return!1;for(var x=0;x<q.g.length;x++)if(q.g[x]!=0)return!1;return!0}function I(q){return q.h==-1}a.l=function(q){return q=F(this,q),I(q)?-1:O(q)?0:1};function z(q){for(var x=q.g.length,w=[],V=0;V<x;V++)w[V]=~q.g[V];return new d(w,~q.h).add(U)}a.abs=function(){return I(this)?z(this):this},a.add=function(q){for(var x=Math.max(this.g.length,q.g.length),w=[],V=0,G=0;G<=x;G++){var Y=V+(this.i(G)&65535)+(q.i(G)&65535),T=(Y>>>16)+(this.i(G)>>>16)+(q.i(G)>>>16);V=T>>>16,Y&=65535,T&=65535,w[G]=T<<16|Y}return new d(w,w[w.length-1]&-2147483648?-1:0)};function F(q,x){return q.add(z(x))}a.j=function(q){if(O(this)||O(q))return R;if(I(this))return I(q)?z(this).j(z(q)):z(z(this).j(q));if(I(q))return z(this.j(z(q)));if(0>this.l(C)&&0>q.l(C))return v(this.m()*q.m());for(var x=this.g.length+q.g.length,w=[],V=0;V<2*x;V++)w[V]=0;for(V=0;V<this.g.length;V++)for(var G=0;G<q.g.length;G++){var Y=this.i(V)>>>16,T=this.i(V)&65535,K=q.i(G)>>>16,k=q.i(G)&65535;w[2*V+2*G]+=T*k,M(w,2*V+2*G),w[2*V+2*G+1]+=Y*k,M(w,2*V+2*G+1),w[2*V+2*G+1]+=T*K,M(w,2*V+2*G+1),w[2*V+2*G+2]+=Y*K,M(w,2*V+2*G+2)}for(V=0;V<x;V++)w[V]=w[2*V+1]<<16|w[2*V];for(V=x;V<2*x;V++)w[V]=0;return new d(w,0)};function M(q,x){for(;(q[x]&65535)!=q[x];)q[x+1]+=q[x]>>>16,q[x]&=65535,x++}function D(q,x){this.g=q,this.h=x}function L(q,x){if(O(x))throw Error("division by zero");if(O(q))return new D(R,R);if(I(q))return x=L(z(q),x),new D(z(x.g),z(x.h));if(I(x))return x=L(q,z(x)),new D(z(x.g),x.h);if(30<q.g.length){if(I(q)||I(x))throw Error("slowDivide_ only works with positive integers.");for(var w=U,V=x;0>=V.l(q);)w=H(w),V=H(V);var G=j(w,1),Y=j(V,1);for(V=j(V,2),w=j(w,2);!O(V);){var T=Y.add(V);0>=T.l(q)&&(G=G.add(w),Y=T),V=j(V,1),w=j(w,1)}return x=F(q,G.j(x)),new D(G,x)}for(G=R;0<=q.l(x);){for(w=Math.max(1,Math.floor(q.m()/x.m())),V=Math.ceil(Math.log(w)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),Y=v(w),T=Y.j(x);I(T)||0<T.l(q);)w-=V,Y=v(w),T=Y.j(x);O(Y)&&(Y=U),G=G.add(Y),q=F(q,T)}return new D(G,q)}a.A=function(q){return L(this,q).h},a.and=function(q){for(var x=Math.max(this.g.length,q.g.length),w=[],V=0;V<x;V++)w[V]=this.i(V)&q.i(V);return new d(w,this.h&q.h)},a.or=function(q){for(var x=Math.max(this.g.length,q.g.length),w=[],V=0;V<x;V++)w[V]=this.i(V)|q.i(V);return new d(w,this.h|q.h)},a.xor=function(q){for(var x=Math.max(this.g.length,q.g.length),w=[],V=0;V<x;V++)w[V]=this.i(V)^q.i(V);return new d(w,this.h^q.h)};function H(q){for(var x=q.g.length+1,w=[],V=0;V<x;V++)w[V]=q.i(V)<<1|q.i(V-1)>>>31;return new d(w,q.h)}function j(q,x){var w=x>>5;x%=32;for(var V=q.g.length-w,G=[],Y=0;Y<V;Y++)G[Y]=0<x?q.i(Y+w)>>>x|q.i(Y+w+1)<<32-x:q.i(Y+w);return new d(G,q.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,TE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=b,Nu=d}).apply(typeof bv<"u"?bv:typeof self<"u"?self:typeof window<"u"?window:{});var Km=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bE,eg,AE,i0,p1,RE,CE,wE;(function(){var a,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,A,P){return g==Array.prototype||g==Object.prototype||(g[A]=P.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Km=="object"&&Km];for(var A=0;A<g.length;++A){var P=g[A];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var s=n(this);function u(g,A){if(A)t:{var P=s;g=g.split(".");for(var J=0;J<g.length-1;J++){var ot=g[J];if(!(ot in P))break t;P=P[ot]}g=g[g.length-1],J=P[g],A=A(J),A!=J&&A!=null&&t(P,g,{configurable:!0,writable:!0,value:A})}}function c(g,A){g instanceof String&&(g+="");var P=0,J=!1,ot={next:function(){if(!J&&P<g.length){var vt=P++;return{value:A(vt,g[vt]),done:!1}}return J=!0,{done:!0,value:void 0}}};return ot[Symbol.iterator]=function(){return ot},ot}u("Array.prototype.values",function(g){return g||function(){return c(this,function(A,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function _(g){var A=typeof g;return A=A!="object"?A:g?Array.isArray(g)?"array":A:"null",A=="array"||A=="object"&&typeof g.length=="number"}function v(g){var A=typeof g;return A=="object"&&g!=null||A=="function"}function b(g,A,P){return g.call.apply(g.bind,arguments)}function R(g,A,P){if(!g)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var ot=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ot,J),g.apply(A,ot)}}return function(){return g.apply(A,arguments)}}function U(g,A,P){return U=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:R,U.apply(null,arguments)}function C(g,A){var P=Array.prototype.slice.call(arguments,1);return function(){var J=P.slice();return J.push.apply(J,arguments),g.apply(this,J)}}function O(g,A){function P(){}P.prototype=A.prototype,g.aa=A.prototype,g.prototype=new P,g.prototype.constructor=g,g.Qb=function(J,ot,vt){for(var Lt=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)Lt[ve-2]=arguments[ve];return A.prototype[ot].apply(J,Lt)}}function I(g){const A=g.length;if(0<A){const P=Array(A);for(let J=0;J<A;J++)P[J]=g[J];return P}return[]}function z(g,A){for(let P=1;P<arguments.length;P++){const J=arguments[P];if(_(J)){const ot=g.length||0,vt=J.length||0;g.length=ot+vt;for(let Lt=0;Lt<vt;Lt++)g[ot+Lt]=J[Lt]}else g.push(J)}}class F{constructor(A,P){this.i=A,this.j=P,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function M(g){return/^[\s\xa0]*$/.test(g)}function D(){var g=m.navigator;return g&&(g=g.userAgent)?g:""}function L(g){return L[" "](g),g}L[" "]=function(){};var H=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function j(g,A,P){for(const J in g)A.call(P,g[J],J,g)}function q(g,A){for(const P in g)A.call(void 0,g[P],P,g)}function x(g){const A={};for(const P in g)A[P]=g[P];return A}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(g,A){let P,J;for(let ot=1;ot<arguments.length;ot++){J=arguments[ot];for(P in J)g[P]=J[P];for(let vt=0;vt<w.length;vt++)P=w[vt],Object.prototype.hasOwnProperty.call(J,P)&&(g[P]=J[P])}}function G(g){var A=1;g=g.split(":");const P=[];for(;0<A&&g.length;)P.push(g.shift()),A--;return g.length&&P.push(g.join(":")),P}function Y(g){m.setTimeout(()=>{throw g},0)}function T(){var g=dt;let A=null;return g.g&&(A=g.g,g.g=g.g.next,g.g||(g.h=null),A.next=null),A}class K{constructor(){this.h=this.g=null}add(A,P){const J=k.get();J.set(A,P),this.h?this.h.next=J:this.g=J,this.h=J}}var k=new F(()=>new X,g=>g.reset());class X{constructor(){this.next=this.g=this.h=null}set(A,P){this.h=A,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let $,at=!1,dt=new K,Q=()=>{const g=m.Promise.resolve(void 0);$=()=>{g.then(it)}};var it=()=>{for(var g;g=T();){try{g.h.call(g.g)}catch(P){Y(P)}var A=k;A.j(g),100>A.h&&(A.h++,g.next=A.g,A.g=g)}at=!1};function Et(){this.s=this.s,this.C=this.C}Et.prototype.s=!1,Et.prototype.ma=function(){this.s||(this.s=!0,this.N())},Et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(g,A){this.type=g,this.g=this.target=A,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var gt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var g=!1,A=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const P=()=>{};m.addEventListener("test",P,A),m.removeEventListener("test",P,A)}catch{}return g}();function Rt(g,A){if(rt.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var P=this.type=g.type,J=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=A,A=g.relatedTarget){if(H){t:{try{L(A.nodeName);var ot=!0;break t}catch{}ot=!1}ot||(A=null)}}else P=="mouseover"?A=g.fromElement:P=="mouseout"&&(A=g.toElement);this.relatedTarget=A,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Nt[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Rt.aa.h.call(this)}}O(Rt,rt);var Nt={2:"touch",3:"pen",4:"mouse"};Rt.prototype.h=function(){Rt.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),ct=0;function At(g,A,P,J,ot){this.listener=g,this.proxy=null,this.src=A,this.type=P,this.capture=!!J,this.ha=ot,this.key=++ct,this.da=this.fa=!1}function Ct(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function It(g){this.src=g,this.g={},this.h=0}It.prototype.add=function(g,A,P,J,ot){var vt=g.toString();g=this.g[vt],g||(g=this.g[vt]=[],this.h++);var Lt=$t(g,A,J,ot);return-1<Lt?(A=g[Lt],P||(A.fa=!1)):(A=new At(A,this.src,vt,!!J,ot),A.fa=P,g.push(A)),A};function zt(g,A){var P=A.type;if(P in g.g){var J=g.g[P],ot=Array.prototype.indexOf.call(J,A,void 0),vt;(vt=0<=ot)&&Array.prototype.splice.call(J,ot,1),vt&&(Ct(A),g.g[P].length==0&&(delete g.g[P],g.h--))}}function $t(g,A,P,J){for(var ot=0;ot<g.length;++ot){var vt=g[ot];if(!vt.da&&vt.listener==A&&vt.capture==!!P&&vt.ha==J)return ot}return-1}var oe="closure_lm_"+(1e6*Math.random()|0),Yt={};function Fe(g,A,P,J,ot){if(Array.isArray(A)){for(var vt=0;vt<A.length;vt++)Fe(g,A[vt],P,J,ot);return null}return P=Oi(P),g&&g[et]?g.K(A,P,v(J)?!!J.capture:!1,ot):le(g,A,P,!1,J,ot)}function le(g,A,P,J,ot,vt){if(!A)throw Error("Invalid event type");var Lt=v(ot)?!!ot.capture:!!ot,ve=Qn(g);if(ve||(g[oe]=ve=new It(g)),P=ve.add(A,P,J,Lt,vt),P.proxy)return P;if(J=Ke(),P.proxy=J,J.src=g,J.listener=P,g.addEventListener)gt||(ot=Lt),ot===void 0&&(ot=!1),g.addEventListener(A.toString(),J,ot);else if(g.attachEvent)g.attachEvent(ui(A.toString()),J);else if(g.addListener&&g.removeListener)g.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return P}function Ke(){function g(P){return A.call(g.src,g.listener,P)}const A=en;return g}function gi(g,A,P,J,ot){if(Array.isArray(A))for(var vt=0;vt<A.length;vt++)gi(g,A[vt],P,J,ot);else J=v(J)?!!J.capture:!!J,P=Oi(P),g&&g[et]?(g=g.i,A=String(A).toString(),A in g.g&&(vt=g.g[A],P=$t(vt,P,J,ot),-1<P&&(Ct(vt[P]),Array.prototype.splice.call(vt,P,1),vt.length==0&&(delete g.g[A],g.h--)))):g&&(g=Qn(g))&&(A=g.g[A.toString()],g=-1,A&&(g=$t(A,P,J,ot)),(P=-1<g?A[g]:null)&&ke(P))}function ke(g){if(typeof g!="number"&&g&&!g.da){var A=g.src;if(A&&A[et])zt(A.i,g);else{var P=g.type,J=g.proxy;A.removeEventListener?A.removeEventListener(P,J,g.capture):A.detachEvent?A.detachEvent(ui(P),J):A.addListener&&A.removeListener&&A.removeListener(J),(P=Qn(A))?(zt(P,g),P.h==0&&(P.src=null,A[oe]=null)):Ct(g)}}}function ui(g){return g in Yt?Yt[g]:Yt[g]="on"+g}function en(g,A){if(g.da)g=!0;else{A=new Rt(A,this);var P=g.listener,J=g.ha||g.src;g.fa&&ke(g),g=P.call(J,A)}return g}function Qn(g){return g=g[oe],g instanceof It?g:null}var nn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oi(g){return typeof g=="function"?g:(g[nn]||(g[nn]=function(A){return g.handleEvent(A)}),g[nn])}function Ce(){Et.call(this),this.i=new It(this),this.M=this,this.F=null}O(Ce,Et),Ce.prototype[et]=!0,Ce.prototype.removeEventListener=function(g,A,P,J){gi(this,g,A,P,J)};function He(g,A){var P,J=g.F;if(J)for(P=[];J;J=J.F)P.push(J);if(g=g.M,J=A.type||A,typeof A=="string")A=new rt(A,g);else if(A instanceof rt)A.target=A.target||g;else{var ot=A;A=new rt(J,g),V(A,ot)}if(ot=!0,P)for(var vt=P.length-1;0<=vt;vt--){var Lt=A.g=P[vt];ot=Xn(Lt,J,!0,A)&&ot}if(Lt=A.g=g,ot=Xn(Lt,J,!0,A)&&ot,ot=Xn(Lt,J,!1,A)&&ot,P)for(vt=0;vt<P.length;vt++)Lt=A.g=P[vt],ot=Xn(Lt,J,!1,A)&&ot}Ce.prototype.N=function(){if(Ce.aa.N.call(this),this.i){var g=this.i,A;for(A in g.g){for(var P=g.g[A],J=0;J<P.length;J++)Ct(P[J]);delete g.g[A],g.h--}}this.F=null},Ce.prototype.K=function(g,A,P,J){return this.i.add(String(g),A,!1,P,J)},Ce.prototype.L=function(g,A,P,J){return this.i.add(String(g),A,!0,P,J)};function Xn(g,A,P,J){if(A=g.i.g[String(A)],!A)return!0;A=A.concat();for(var ot=!0,vt=0;vt<A.length;++vt){var Lt=A[vt];if(Lt&&!Lt.da&&Lt.capture==P){var ve=Lt.listener,_n=Lt.ha||Lt.src;Lt.fa&&zt(g.i,Lt),ot=ve.call(_n,J)!==!1&&ot}}return ot&&!J.defaultPrevented}function ga(g,A,P){if(typeof g=="function")P&&(g=U(g,P));else if(g&&typeof g.handleEvent=="function")g=U(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:m.setTimeout(g,A||0)}function ji(g){g.g=ga(()=>{g.g=null,g.i&&(g.i=!1,ji(g))},g.l);const A=g.h;g.h=null,g.m.apply(null,A)}class ma extends Et{constructor(A,P){super(),this.m=A,this.l=P,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:ji(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pn(g){Et.call(this),this.h=g,this.g={}}O(Pn,Et);var an=[];function Ae(g){j(g.g,function(A,P){this.g.hasOwnProperty(P)&&ke(A)},g),g.g={}}Pn.prototype.N=function(){Pn.aa.N.call(this),Ae(this)},Pn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pa=m.JSON.stringify,Fi=m.JSON.parse,Zn=class{stringify(g){return m.JSON.stringify(g,void 0)}parse(g){return m.JSON.parse(g,void 0)}};function Kr(){}Kr.prototype.h=null;function ku(g){return g.h||(g.h=g.i())}function Hu(){}var ya={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yr(){rt.call(this,"d")}O(Yr,rt);function Ki(){rt.call(this,"c")}O(Ki,rt);var _a={},Qr=null;function Xr(){return Qr=Qr||new Ce}_a.La="serverreachability";function Zr(g){rt.call(this,_a.La,g)}O(Zr,rt);function er(g){const A=Xr();He(A,new Zr(A))}_a.STAT_EVENT="statevent";function Ll(g,A){rt.call(this,_a.STAT_EVENT,g),this.stat=A}O(Ll,rt);function Sn(g){const A=Xr();He(A,new Ll(A,g))}_a.Ma="timingevent";function qu(g,A){rt.call(this,_a.Ma,g),this.size=A}O(qu,rt);function Tr(g,A){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){g()},A)}function br(){this.g=!0}br.prototype.xa=function(){this.g=!1};function nr(g,A,P,J,ot,vt){g.info(function(){if(g.g)if(vt)for(var Lt="",ve=vt.split("&"),_n=0;_n<ve.length;_n++){var Ee=ve[_n].split("=");if(1<Ee.length){var Cn=Ee[0];Ee=Ee[1];var zn=Cn.split("_");Lt=2<=zn.length&&zn[1]=="type"?Lt+(Cn+"="+Ee+"&"):Lt+(Cn+"=redacted&")}}else Lt=null;else Lt=vt;return"XMLHTTP REQ ("+J+") [attempt "+ot+"]: "+A+`
`+P+`
`+Lt})}function ju(g,A,P,J,ot,vt,Lt){g.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+ot+"]: "+A+`
`+P+`
`+vt+" "+Lt})}function Mi(g,A,P,J){g.info(function(){return"XMLHTTP TEXT ("+A+"): "+Rn(g,P)+(J?" "+J:"")})}function ni(g,A){g.info(function(){return"TIMEOUT: "+A})}br.prototype.info=function(){};function Rn(g,A){if(!g.g)return A;if(!A)return null;try{var P=JSON.parse(A);if(P){for(g=0;g<P.length;g++)if(Array.isArray(P[g])){var J=P[g];if(!(2>J.length)){var ot=J[1];if(Array.isArray(ot)&&!(1>ot.length)){var vt=ot[0];if(vt!="noop"&&vt!="stop"&&vt!="close")for(var Lt=1;Lt<ot.length;Lt++)ot[Lt]=""}}}}return pa(P)}catch{return A}}var ue={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ir={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wr;function Pl(){}O(Pl,Kr),Pl.prototype.g=function(){return new XMLHttpRequest},Pl.prototype.i=function(){return{}},Wr=new Pl;function ar(g,A,P,J){this.j=g,this.i=A,this.l=P,this.R=J||1,this.U=new Pn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fu}function Fu(){this.i=null,this.g="",this.h=!1}var Ar={},Jr={};function va(g,A,P){g.L=1,g.v=Gs(pn(A)),g.m=P,g.P=!0,Tn(g,null)}function Tn(g,A){g.F=Date.now(),rn(g),g.A=pn(g.v);var P=g.A,J=g.R;Array.isArray(J)||(J=[String(J)]),wr(P.i,"t",J),g.C=0,P=g.j.J,g.h=new Fu,g.g=Ia(g.j,P?A:null,!g.m),0<g.O&&(g.M=new ma(U(g.Y,g,g.g),g.O)),A=g.U,P=g.g,J=g.ca;var ot="readystatechange";Array.isArray(ot)||(ot&&(an[0]=ot.toString()),ot=an);for(var vt=0;vt<ot.length;vt++){var Lt=Fe(P,ot[vt],J||A.handleEvent,!1,A.h||A);if(!Lt)break;A.g[Lt.key]=Lt}A=g.H?x(g.H):{},g.m?(g.u||(g.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,A)):(g.u="GET",g.g.ea(g.A,g.u,null,A)),er(),nr(g.i,g.u,g.A,g.l,g.R,g.m)}ar.prototype.ca=function(g){g=g.target;const A=this.M;A&&ba(g)==3?A.j():this.Y(g)},ar.prototype.Y=function(g){try{if(g==this.g)t:{const zn=ba(this.g);var A=this.g.Ba();const wn=this.g.Z();if(!(3>zn)&&(zn!=3||this.g&&(this.h.h||this.g.oa()||Zu(this.g)))){this.J||zn!=4||A==7||(A==8||0>=wn?er(3):er(2)),Yi(this);var P=this.g.Z();this.X=P;e:if(Je(this)){var J=Zu(this.g);g="";var ot=J.length,vt=ba(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pi(this),mi(this);var Lt="";break e}this.h.i=new m.TextDecoder}for(A=0;A<ot;A++)this.h.h=!0,g+=this.h.i.decode(J[A],{stream:!(vt&&A==ot-1)});J.length=0,this.h.g+=g,this.C=0,Lt=this.h.g}else Lt=this.g.oa();if(this.o=P==200,ju(this.i,this.u,this.A,this.l,this.R,zn,P),this.o){if(this.T&&!this.K){e:{if(this.g){var ve,_n=this.g;if((ve=_n.g?_n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(ve)){var Ee=ve;break e}}Ee=null}if(P=Ee)Mi(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xi(this,P);else{this.o=!1,this.s=3,Sn(12),pi(this),mi(this);break t}}if(this.P){P=!0;let ii;for(;!this.J&&this.C<Lt.length;)if(ii=xa(this,Lt),ii==Jr){zn==4&&(this.s=4,Sn(14),P=!1),Mi(this.i,this.l,null,"[Incomplete Response]");break}else if(ii==Ar){this.s=4,Sn(15),Mi(this.i,this.l,Lt,"[Invalid Chunk]"),P=!1;break}else Mi(this.i,this.l,ii,null),xi(this,ii);if(Je(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zn!=4||Lt.length!=0||this.h.h||(this.s=1,Sn(16),P=!1),this.o=this.o&&P,!P)Mi(this.i,this.l,Lt,"[Invalid Chunked Response]"),pi(this),mi(this);else if(0<Lt.length&&!this.W){this.W=!0;var Cn=this.j;Cn.g==this&&Cn.ba&&!Cn.M&&(Cn.j.info("Great, no buffering proxy detected. Bytes received: "+Lt.length),rs(Cn),Cn.M=!0,Sn(11))}}else Mi(this.i,this.l,Lt,null),xi(this,Lt);zn==4&&pi(this),this.o&&!this.J&&(zn==4?Po(this.j,this):(this.o=!1,rn(this)))}else cf(this.g),P==400&&0<Lt.indexOf("Unknown SID")?(this.s=3,Sn(12)):(this.s=0,Sn(13)),pi(this),mi(this)}}}catch{}finally{}};function Je(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function xa(g,A){var P=g.C,J=A.indexOf(`
`,P);return J==-1?Jr:(P=Number(A.substring(P,J)),isNaN(P)?Ar:(J+=1,J+P>A.length?Jr:(A=A.slice(J,J+P),g.C=J+P,A)))}ar.prototype.cancel=function(){this.J=!0,pi(this)};function rn(g){g.S=Date.now()+g.I,zl(g,g.I)}function zl(g,A){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Tr(U(g.ba,g),A)}function Yi(g){g.B&&(m.clearTimeout(g.B),g.B=null)}ar.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(ni(this.i,this.A),this.L!=2&&(er(),Sn(17)),pi(this),this.s=2,mi(this)):zl(this,this.S-g)};function mi(g){g.j.G==0||g.J||Po(g.j,g)}function pi(g){Yi(g);var A=g.M;A&&typeof A.ma=="function"&&A.ma(),g.M=null,Ae(g.U),g.g&&(A=g.g,g.g=null,A.abort(),A.ma())}function xi(g,A){try{var P=g.j;if(P.G!=0&&(P.g==g||$r(P.h,g))){if(!g.K&&$r(P.h,g)&&P.G==3){try{var J=P.Da.g.parse(A)}catch{J=null}if(Array.isArray(J)&&J.length==3){var ot=J;if(ot[0]==0){t:if(!P.u){if(P.g)if(P.g.F+3e3<g.F)Zs(P),Hl(P);else break t;Kl(P),Sn(18)}}else P.za=ot[1],0<P.za-P.T&&37500>ot[2]&&P.F&&P.v==0&&!P.C&&(P.C=Tr(U(P.Za,P),6e3));if(1>=Ku(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else Dr(P,11)}else if((g.K||P.g==g)&&Zs(P),!M(A))for(ot=P.Da.g.parse(A),A=0;A<ot.length;A++){let Ee=ot[A];if(P.T=Ee[0],Ee=Ee[1],P.G==2)if(Ee[0]=="c"){P.K=Ee[1],P.ia=Ee[2];const Cn=Ee[3];Cn!=null&&(P.la=Cn,P.j.info("VER="+P.la));const zn=Ee[4];zn!=null&&(P.Aa=zn,P.j.info("SVER="+P.Aa));const wn=Ee[5];wn!=null&&typeof wn=="number"&&0<wn&&(J=1.5*wn,P.L=J,P.j.info("backChannelRequestTimeoutMs_="+J)),J=P;const ii=g.g;if(ii){const za=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(za){var vt=J.h;vt.g||za.indexOf("spdy")==-1&&za.indexOf("quic")==-1&&za.indexOf("h2")==-1||(vt.j=vt.l,vt.g=new Set,vt.h&&(ts(vt,vt.h),vt.h=null))}if(J.D){const ko=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;ko&&(J.ya=ko,Ve(J.I,J.D,ko))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-g.F,P.j.info("Handshake RTT: "+P.R+"ms")),J=P;var Lt=g;if(J.qa=ec(J,J.J?J.ia:null,J.W),Lt.K){Qi(J.h,Lt);var ve=Lt,_n=J.L;_n&&(ve.I=_n),ve.B&&(Yi(ve),rn(ve)),J.g=Lt}else $u(J);0<P.i.length&&ql(P)}else Ee[0]!="stop"&&Ee[0]!="close"||Dr(P,7);else P.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Dr(P,7):Lo(P):Ee[0]!="noop"&&P.l&&P.l.ta(Ee),P.v=0)}}er(4)}catch{}}var Kc=class{constructor(g,A){this.g=g,this.map=A}};function Oo(g){this.l=g||10,m.PerformanceNavigationTiming?(g=m.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mo(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ku(g){return g.h?1:g.g?g.g.size:0}function $r(g,A){return g.h?g.h==A:g.g?g.g.has(A):!1}function ts(g,A){g.g?g.g.add(A):g.h=A}function Qi(g,A){g.h&&g.h==A?g.h=null:g.g&&g.g.has(A)&&g.g.delete(A)}Oo.prototype.cancel=function(){if(this.i=yi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function yi(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let A=g.i;for(const P of g.g.values())A=A.concat(P.D);return A}return I(g.i)}function Yc(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(_(g)){for(var A=[],P=g.length,J=0;J<P;J++)A.push(g[J]);return A}A=[],P=0;for(J in g)A[P++]=g[J];return A}function Qc(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(_(g)||typeof g=="string"){var A=[];g=g.length;for(var P=0;P<g;P++)A.push(P);return A}A=[],P=0;for(const J in g)A[P++]=J;return A}}}function Ps(g,A){if(g.forEach&&typeof g.forEach=="function")g.forEach(A,void 0);else if(_(g)||typeof g=="string")Array.prototype.forEach.call(g,A,void 0);else for(var P=Qc(g),J=Yc(g),ot=J.length,vt=0;vt<ot;vt++)A.call(void 0,J[vt],P&&P[vt],g)}var xo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zs(g,A){if(g){g=g.split("&");for(var P=0;P<g.length;P++){var J=g[P].indexOf("="),ot=null;if(0<=J){var vt=g[P].substring(0,J);ot=g[P].substring(J+1)}else vt=g[P];A(vt,ot?decodeURIComponent(ot.replace(/\+/g," ")):"")}}}function Rr(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Rr){this.h=g.h,es(this,g.j),this.o=g.o,this.g=g.g,Bs(this,g.s),this.l=g.l;var A=g.i,P=new rr;P.i=A.i,A.g&&(P.g=new Map(A.g),P.h=A.h),Bl(this,P),this.m=g.m}else g&&(A=String(g).match(xo))?(this.h=!1,es(this,A[1]||"",!0),this.o=Ea(A[2]||""),this.g=Ea(A[3]||"",!0),Bs(this,A[4]),this.l=Ea(A[5]||"",!0),Bl(this,A[6]||"",!0),this.m=Ea(A[7]||"")):(this.h=!1,this.i=new rr(null,this.h))}Rr.prototype.toString=function(){var g=[],A=this.j;A&&g.push(Sa(A,ks,!0),":");var P=this.g;return(P||A=="file")&&(g.push("//"),(A=this.o)&&g.push(Sa(A,ks,!0),"@"),g.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&g.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&g.push("/"),g.push(Sa(P,P.charAt(0)=="/"?Gl:Yu,!0))),(P=this.i.toString())&&g.push("?",P),(P=this.m)&&g.push("#",Sa(P,Zc)),g.join("")};function pn(g){return new Rr(g)}function es(g,A,P){g.j=P?Ea(A,!0):A,g.j&&(g.j=g.j.replace(/:$/,""))}function Bs(g,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);g.s=A}else g.s=null}function Bl(g,A,P){A instanceof rr?(g.i=A,Uo(g.i,g.h)):(P||(A=Sa(A,Xc)),g.i=new rr(A,g.h))}function Ve(g,A,P){g.i.set(A,P)}function Gs(g){return Ve(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Ea(g,A){return g?A?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Sa(g,A,P){return typeof g=="string"?(g=encodeURI(g).replace(A,Vo),P&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Vo(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var ks=/[#\/\?@]/g,Yu=/[#\?:]/g,Gl=/[#\?]/g,Xc=/[#\?@]/g,Zc=/#/g;function rr(g,A){this.h=this.g=null,this.i=g||null,this.j=!!A}function Ta(g){g.g||(g.g=new Map,g.h=0,g.i&&zs(g.i,function(A,P){g.add(decodeURIComponent(A.replace(/\+/g," ")),P)}))}a=rr.prototype,a.add=function(g,A){Ta(this),this.i=null,g=sr(this,g);var P=this.g.get(g);return P||this.g.set(g,P=[]),P.push(A),this.h+=1,this};function Hs(g,A){Ta(g),A=sr(g,A),g.g.has(A)&&(g.i=null,g.h-=g.g.get(A).length,g.g.delete(A))}function Cr(g,A){return Ta(g),A=sr(g,A),g.g.has(A)}a.forEach=function(g,A){Ta(this),this.g.forEach(function(P,J){P.forEach(function(ot){g.call(A,ot,J,this)},this)},this)},a.na=function(){Ta(this);const g=Array.from(this.g.values()),A=Array.from(this.g.keys()),P=[];for(let J=0;J<A.length;J++){const ot=g[J];for(let vt=0;vt<ot.length;vt++)P.push(A[J])}return P},a.V=function(g){Ta(this);let A=[];if(typeof g=="string")Cr(this,g)&&(A=A.concat(this.g.get(sr(this,g))));else{g=Array.from(this.g.values());for(let P=0;P<g.length;P++)A=A.concat(g[P])}return A},a.set=function(g,A){return Ta(this),this.i=null,g=sr(this,g),Cr(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[A]),this.h+=1,this},a.get=function(g,A){return g?(g=this.V(g),0<g.length?String(g[0]):A):A};function wr(g,A,P){Hs(g,A),0<P.length&&(g.i=null,g.g.set(sr(g,A),I(P)),g.h+=P.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],A=Array.from(this.g.keys());for(var P=0;P<A.length;P++){var J=A[P];const vt=encodeURIComponent(String(J)),Lt=this.V(J);for(J=0;J<Lt.length;J++){var ot=vt;Lt[J]!==""&&(ot+="="+encodeURIComponent(String(Lt[J]))),g.push(ot)}}return this.i=g.join("&")};function sr(g,A){return A=String(A),g.j&&(A=A.toLowerCase()),A}function Uo(g,A){A&&!g.j&&(Ta(g),g.i=null,g.g.forEach(function(P,J){var ot=J.toLowerCase();J!=ot&&(Hs(this,J),wr(this,ot,P))},g)),g.j=A}function Qu(g,A){const P=new br;if(m.Image){const J=new Image;J.onload=C(Xi,P,"TestLoadImage: loaded",!0,A,J),J.onerror=C(Xi,P,"TestLoadImage: error",!1,A,J),J.onabort=C(Xi,P,"TestLoadImage: abort",!1,A,J),J.ontimeout=C(Xi,P,"TestLoadImage: timeout",!1,A,J),m.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=g}else A(!1)}function qs(g,A){const P=new br,J=new AbortController,ot=setTimeout(()=>{J.abort(),Xi(P,"TestPingServer: timeout",!1,A)},1e4);fetch(g,{signal:J.signal}).then(vt=>{clearTimeout(ot),vt.ok?Xi(P,"TestPingServer: ok",!0,A):Xi(P,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(ot),Xi(P,"TestPingServer: error",!1,A)})}function Xi(g,A,P,J,ot){try{ot&&(ot.onload=null,ot.onerror=null,ot.onabort=null,ot.ontimeout=null),J(P)}catch{}}function js(){this.g=new Zn}function lr(g,A,P){const J=P||"";try{Ps(g,function(ot,vt){let Lt=ot;v(ot)&&(Lt=pa(ot)),A.push(J+vt+"="+encodeURIComponent(Lt))})}catch(ot){throw A.push(J+"type="+encodeURIComponent("_badmap")),ot}}function Fs(g){this.l=g.Ub||null,this.j=g.eb||!1}O(Fs,Kr),Fs.prototype.g=function(){return new ns(this.l,this.j)},Fs.prototype.i=function(g){return function(){return g}}({});function ns(g,A){Ce.call(this),this.D=g,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(ns,Ce),a=ns.prototype,a.open=function(g,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=A,this.readyState=1,Va(this)},a.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(A.body=g),(this.D||m).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zi(this)),this.readyState=0},a.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Va(this)),this.g&&(this.readyState=3,Va(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Io(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Io(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}a.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var A=g.value?g.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!g.done}))&&(this.response=this.responseText+=A)}g.done?Zi(this):Va(this),this.readyState==3&&Io(this)}},a.Ra=function(g){this.g&&(this.response=this.responseText=g,Zi(this))},a.Qa=function(g){this.g&&(this.response=g,Zi(this))},a.ga=function(){this.g&&Zi(this)};function Zi(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Va(g)}a.setRequestHeader=function(g,A){this.u.append(g,A)},a.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],A=this.h.entries();for(var P=A.next();!P.done;)P=P.value,g.push(P[0]+": "+P[1]),P=A.next();return g.join(`\r
`)};function Va(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(ns.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Ks(g){let A="";return j(g,function(P,J){A+=J,A+=":",A+=P,A+=`\r
`}),A}function Wn(g,A,P){t:{for(J in P){var J=!1;break t}J=!0}J||(P=Ks(P),typeof g=="string"?P!=null&&encodeURIComponent(String(P)):Ve(g,A,P))}function ze(g){Ce.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(ze,Ce);var Ys=/^https?$/i,Qs=["POST","PUT"];a=ze.prototype,a.Ha=function(g){this.J=g},a.ea=function(g,A,P,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);A=A?A.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wr.g(),this.v=this.o?ku(this.o):ku(Wr),this.g.onreadystatechange=U(this.Ea,this);try{this.B=!0,this.g.open(A,String(g),!0),this.B=!1}catch(vt){Xu(this,vt);return}if(g=P||"",P=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var ot in J)P.set(ot,J[ot]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const vt of J.keys())P.set(vt,J.get(vt));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(P.keys()).find(vt=>vt.toLowerCase()=="content-type"),ot=m.FormData&&g instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Qs,A,void 0))||J||ot||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[vt,Lt]of P)this.g.setRequestHeader(vt,Lt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{as(this),this.u=!0,this.g.send(g),this.u=!1}catch(vt){Xu(this,vt)}};function Xu(g,A){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=A,g.m=5,Ua(g),or(g)}function Ua(g){g.A||(g.A=!0,He(g,"complete"),He(g,"error"))}a.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,He(this,"complete"),He(this,"abort"),or(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),or(this,!0)),ze.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?is(this):this.bb())},a.bb=function(){is(this)};function is(g){if(g.h&&typeof d<"u"&&(!g.v[1]||ba(g)!=4||g.Z()!=2)){if(g.u&&ba(g)==4)ga(g.Ea,0,g);else if(He(g,"readystatechange"),ba(g)==4){g.h=!1;try{const Lt=g.Z();t:switch(Lt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break t;default:A=!1}var P;if(!(P=A)){var J;if(J=Lt===0){var ot=String(g.D).match(xo)[1]||null;!ot&&m.self&&m.self.location&&(ot=m.self.location.protocol.slice(0,-1)),J=!Ys.test(ot?ot.toLowerCase():"")}P=J}if(P)He(g,"complete"),He(g,"success");else{g.m=6;try{var vt=2<ba(g)?g.g.statusText:""}catch{vt=""}g.l=vt+" ["+g.Z()+"]",Ua(g)}}finally{or(g)}}}}function or(g,A){if(g.g){as(g);const P=g.g,J=g.v[0]?()=>{}:null;g.g=null,g.v=null,A||He(g,"ready");try{P.onreadystatechange=J}catch{}}}function as(g){g.I&&(m.clearTimeout(g.I),g.I=null)}a.isActive=function(){return!!this.g};function ba(g){return g.g?g.g.readyState:0}a.Z=function(){try{return 2<ba(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(g){if(this.g){var A=this.g.responseText;return g&&A.indexOf(g)==0&&(A=A.substring(g.length)),Fi(A)}};function Zu(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function cf(g){const A={};g=(g.g&&2<=ba(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<g.length;J++){if(M(g[J]))continue;var P=G(g[J]);const ot=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const vt=A[ot]||[];A[ot]=vt,vt.push(P)}q(A,function(J){return J.join(", ")})}a.Ba=function(){return this.m},a.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yn(g,A,P){return P&&P.internalChannelParams&&P.internalChannelParams[g]||A}function kl(g){this.Aa=0,this.i=[],this.j=new br,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yn("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yn("baseRetryDelayMs",5e3,g),this.cb=yn("retryDelaySeedMs",1e4,g),this.Wa=yn("forwardChannelMaxRetries",2,g),this.wa=yn("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Oo(g&&g.concurrentRequestLimit),this.Da=new js,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}a=kl.prototype,a.la=8,a.G=1,a.connect=function(g,A,P,J){Sn(0),this.W=g,this.H=A||{},P&&J!==void 0&&(this.H.OSID=P,this.H.OAID=J),this.F=this.X,this.I=ec(this,null,this.W),ql(this)};function Lo(g){if(Wu(g),g.G==3){var A=g.U++,P=pn(g.I);if(Ve(P,"SID",g.K),Ve(P,"RID",A),Ve(P,"TYPE","terminate"),Xs(g,P),A=new ar(g,g.j,A),A.L=2,A.v=Gs(pn(P)),P=!1,m.navigator&&m.navigator.sendBeacon)try{P=m.navigator.sendBeacon(A.v.toString(),"")}catch{}!P&&m.Image&&(new Image().src=A.v,P=!0),P||(A.g=Ia(A.j,null),A.g.ea(A.v)),A.F=Date.now(),rn(A)}zo(g)}function Hl(g){g.g&&(rs(g),g.g.cancel(),g.g=null)}function Wu(g){Hl(g),g.u&&(m.clearTimeout(g.u),g.u=null),Zs(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&m.clearTimeout(g.s),g.s=null)}function ql(g){if(!Mo(g.h)&&!g.s){g.s=!0;var A=g.Ga;$||Q(),at||($(),at=!0),dt.add(A,g),g.B=0}}function jl(g,A){return Ku(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=A.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Tr(U(g.Ga,g,A),Yl(g,g.B)),g.B++,!0)}a.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const ot=new ar(this,this.j,g);let vt=this.o;if(this.S&&(vt?(vt=x(vt),V(vt,this.S)):vt=this.S),this.m!==null||this.O||(ot.H=vt,vt=null),this.P)t:{for(var A=0,P=0;P<this.i.length;P++){e:{var J=this.i[P];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break e}J=void 0}if(J===void 0)break;if(A+=J,4096<A){A=P;break t}if(A===4096||P===this.i.length-1){A=P+1;break t}}A=1e3}else A=1e3;A=Ju(this,ot,A),P=pn(this.I),Ve(P,"RID",g),Ve(P,"CVER",22),this.D&&Ve(P,"X-HTTP-Session-Id",this.D),Xs(this,P),vt&&(this.O?A="headers="+encodeURIComponent(String(Ks(vt)))+"&"+A:this.m&&Wn(P,this.m,vt)),ts(this.h,ot),this.Ua&&Ve(P,"TYPE","init"),this.P?(Ve(P,"$req",A),Ve(P,"SID","null"),ot.T=!0,va(ot,P,null)):va(ot,P,A),this.G=2}}else this.G==3&&(g?Fl(this,g):this.i.length==0||Mo(this.h)||Fl(this))};function Fl(g,A){var P;A?P=A.l:P=g.U++;const J=pn(g.I);Ve(J,"SID",g.K),Ve(J,"RID",P),Ve(J,"AID",g.T),Xs(g,J),g.m&&g.o&&Wn(J,g.m,g.o),P=new ar(g,g.j,P,g.B+1),g.m===null&&(P.H=g.o),A&&(g.i=A.D.concat(g.i)),A=Ju(g,P,1e3),P.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),ts(g.h,P),va(P,J,A)}function Xs(g,A){g.H&&j(g.H,function(P,J){Ve(A,J,P)}),g.l&&Ps({},function(P,J){Ve(A,J,P)})}function Ju(g,A,P){P=Math.min(g.i.length,P);var J=g.l?U(g.l.Na,g.l,g):null;t:{var ot=g.i;let vt=-1;for(;;){const Lt=["count="+P];vt==-1?0<P?(vt=ot[0].g,Lt.push("ofs="+vt)):vt=0:Lt.push("ofs="+vt);let ve=!0;for(let _n=0;_n<P;_n++){let Ee=ot[_n].g;const Cn=ot[_n].map;if(Ee-=vt,0>Ee)vt=Math.max(0,ot[_n].g-100),ve=!1;else try{lr(Cn,Lt,"req"+Ee+"_")}catch{J&&J(Cn)}}if(ve){J=Lt.join("&");break t}}}return g=g.i.splice(0,P),A.D=g,J}function $u(g){if(!g.g&&!g.u){g.Y=1;var A=g.Fa;$||Q(),at||($(),at=!0),dt.add(A,g),g.v=0}}function Kl(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Tr(U(g.Fa,g),Yl(g,g.v)),g.v++,!0)}a.Fa=function(){if(this.u=null,tc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Tr(U(this.ab,this),g)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Sn(10),Hl(this),tc(this))};function rs(g){g.A!=null&&(m.clearTimeout(g.A),g.A=null)}function tc(g){g.g=new ar(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var A=pn(g.qa);Ve(A,"RID","rpc"),Ve(A,"SID",g.K),Ve(A,"AID",g.T),Ve(A,"CI",g.F?"0":"1"),!g.F&&g.ja&&Ve(A,"TO",g.ja),Ve(A,"TYPE","xmlhttp"),Xs(g,A),g.m&&g.o&&Wn(A,g.m,g.o),g.L&&(g.g.I=g.L);var P=g.g;g=g.ia,P.L=1,P.v=Gs(pn(A)),P.m=null,P.P=!0,Tn(P,g)}a.Za=function(){this.C!=null&&(this.C=null,Hl(this),Kl(this),Sn(19))};function Zs(g){g.C!=null&&(m.clearTimeout(g.C),g.C=null)}function Po(g,A){var P=null;if(g.g==A){Zs(g),rs(g),g.g=null;var J=2}else if($r(g.h,A))P=A.D,Qi(g.h,A),J=1;else return;if(g.G!=0){if(A.o)if(J==1){P=A.m?A.m.length:0,A=Date.now()-A.F;var ot=g.B;J=Xr(),He(J,new qu(J,P)),ql(g)}else $u(g);else if(ot=A.s,ot==3||ot==0&&0<A.X||!(J==1&&jl(g,A)||J==2&&Kl(g)))switch(P&&0<P.length&&(A=g.h,A.i=A.i.concat(P)),ot){case 1:Dr(g,5);break;case 4:Dr(g,10);break;case 3:Dr(g,6);break;default:Dr(g,2)}}}function Yl(g,A){let P=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(P*=2),P*A}function Dr(g,A){if(g.j.info("Error code "+A),A==2){var P=U(g.fb,g),J=g.Xa;const ot=!J;J=new Rr(J||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||es(J,"https"),Gs(J),ot?Qu(J.toString(),P):qs(J.toString(),P)}else Sn(2);g.G=0,g.l&&g.l.sa(A),zo(g),Wu(g)}a.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Sn(2)):(this.j.info("Failed to ping google.com"),Sn(1))};function zo(g){if(g.G=0,g.ka=[],g.l){const A=yi(g.h);(A.length!=0||g.i.length!=0)&&(z(g.ka,A),z(g.ka,g.i),g.h.i.length=0,I(g.i),g.i.length=0),g.l.ra()}}function ec(g,A,P){var J=P instanceof Rr?pn(P):new Rr(P);if(J.g!="")A&&(J.g=A+"."+J.g),Bs(J,J.s);else{var ot=m.location;J=ot.protocol,A=A?A+"."+ot.hostname:ot.hostname,ot=+ot.port;var vt=new Rr(null);J&&es(vt,J),A&&(vt.g=A),ot&&Bs(vt,ot),P&&(vt.l=P),J=vt}return P=g.D,A=g.ya,P&&A&&Ve(J,P,A),Ve(J,"VER",g.la),Xs(g,J),J}function Ia(g,A,P){if(A&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=g.Ca&&!g.pa?new ze(new Fs({eb:P})):new ze(g.pa),A.Ha(g.J),A}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bo(){}a=Bo.prototype,a.ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){};function Go(){}Go.prototype.g=function(g,A){return new _i(g,A)};function _i(g,A){Ce.call(this),this.g=new kl(A),this.l=g,this.h=A&&A.messageUrlParams||null,g=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(g?g["X-WebChannel-Content-Type"]=A.messageContentType:g={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(g?g["X-WebChannel-Client-Profile"]=A.va:g={"X-WebChannel-Client-Profile":A.va}),this.g.S=g,(g=A&&A.Sb)&&!M(g)&&(this.g.m=g),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!M(A)&&(this.g.D=A,g=this.h,g!==null&&A in g&&(g=this.h,A in g&&delete g[A])),this.j=new Pa(this)}O(_i,Ce),_i.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_i.prototype.close=function(){Lo(this.g)},_i.prototype.o=function(g){var A=this.g;if(typeof g=="string"){var P={};P.__data__=g,g=P}else this.u&&(P={},P.__data__=pa(g),g=P);A.i.push(new Kc(A.Ya++,g)),A.G==3&&ql(A)},_i.prototype.N=function(){this.g.l=null,delete this.j,Lo(this.g),delete this.g,_i.aa.N.call(this)};function ur(g){Yr.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var A=g.__sm__;if(A){t:{for(const P in A){g=P;break t}g=void 0}(this.i=g)&&(g=this.i,A=A!==null&&g in A?A[g]:void 0),this.data=A}else this.data=g}O(ur,Yr);function La(){Ki.call(this),this.status=1}O(La,Ki);function Pa(g){this.g=g}O(Pa,Bo),Pa.prototype.ua=function(){He(this.g,"a")},Pa.prototype.ta=function(g){He(this.g,new ur(g))},Pa.prototype.sa=function(g){He(this.g,new La)},Pa.prototype.ra=function(){He(this.g,"b")},Go.prototype.createWebChannel=Go.prototype.g,_i.prototype.send=_i.prototype.o,_i.prototype.open=_i.prototype.m,_i.prototype.close=_i.prototype.close,wE=function(){return new Go},CE=function(){return Xr()},RE=_a,p1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,i0=ue,ir.COMPLETE="complete",AE=ir,Hu.EventType=ya,ya.OPEN="a",ya.CLOSE="b",ya.ERROR="c",ya.MESSAGE="d",Ce.prototype.listen=Ce.prototype.K,eg=Hu,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,bE=ze}).apply(typeof Km<"u"?Km:typeof self<"u"?self:typeof window<"u"?window:{});const Av="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ca.UNAUTHENTICATED=new ca(null),ca.GOOGLE_CREDENTIALS=new ca("google-credentials-uid"),ca.FIRST_PARTY=new ca("first-party-uid"),ca.MOCK_USER=new ca("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new H1("@firebase/firestore");function Bh(){return Bc.logLevel}function Bt(a,...t){if(Bc.logLevel<=we.DEBUG){const n=t.map(ty);Bc.debug(`Firestore (${sf}): ${a}`,...n)}}function wo(a,...t){if(Bc.logLevel<=we.ERROR){const n=t.map(ty);Bc.error(`Firestore (${sf}): ${a}`,...n)}}function Xh(a,...t){if(Bc.logLevel<=we.WARN){const n=t.map(ty);Bc.warn(`Firestore (${sf}): ${a}`,...n)}}function ty(a){if(typeof a=="string")return a;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(a="Unexpected state"){const t=`FIRESTORE (${sf}) INTERNAL ASSERTION FAILED: `+a;throw wo(t),new Error(t)}function We(a,t){a||te()}function se(a,t){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class kt extends No{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Qb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(ca.UNAUTHENTICATED))}shutdown(){}}class Xb{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Zb{constructor(t){this.t=t,this.currentUser=ca.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){We(this.o===void 0);let s=this.i;const u=_=>this.i!==s?(s=this.i,n(_)):Promise.resolve();let c=new Ou;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ou,t.enqueueRetryable(()=>u(this.currentUser))};const d=()=>{const _=c;t.enqueueRetryable(async()=>{await _.promise,await u(this.currentUser)})},m=_=>{Bt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(_=>m(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?m(_):(Bt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ou)}},0),d()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(Bt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string"),new DE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return We(t===null||typeof t=="string"),new ca(t)}}class Wb{constructor(t,n,s){this.l=t,this.h=n,this.P=s,this.type="FirstParty",this.user=ca.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Jb{constructor(t,n,s){this.l=t,this.h=n,this.P=s}getToken(){return Promise.resolve(new Wb(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(ca.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $b{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tA{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){We(this.o===void 0);const s=c=>{c.error!=null&&Bt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,Bt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable(()=>s(c))};const u=c=>{Bt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>u(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?u(c):Bt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(We(typeof n.token=="string"),this.R=n.token,new $b(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<a;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let s="";for(;s.length<20;){const u=eA(40);for(let c=0;c<u.length;++c)s.length<20&&u[c]<n&&(s+=t.charAt(u[c]%t.length))}return s}}function xe(a,t){return a<t?-1:a>t?1:0}function Zh(a,t,n){return a.length===t.length&&a.every((s,u)=>n(s,t[u]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{static now(){return fi.fromMillis(Date.now())}static fromDate(t){return fi.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor(1e6*(t-1e3*n));return new fi(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new kt(Ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new kt(Ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new kt(Ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new kt(Ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?xe(this.nanoseconds,t.nanoseconds):xe(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(t){return new ae(t)}static min(){return new ae(new fi(0,0))}static max(){return new ae(new fi(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(t,n,s){n===void 0?n=0:n>t.length&&te(),s===void 0?s=t.length-n:s>t.length-n&&te(),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return Dl.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Dl?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let u=0;u<s;u++){const c=Dl.compareSegments(t.get(u),n.get(u));if(c!==0)return c}return Math.sign(t.length-n.length)}static compareSegments(t,n){const s=Dl.isNumericId(t),u=Dl.isNumericId(n);return s&&!u?-1:!s&&u?1:s&&u?Dl.extractNumericId(t).compare(Dl.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Nu.fromString(t.substring(4,t.length-2))}}class En extends Dl{construct(t,n,s){return new En(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new kt(Ot.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(u=>u.length>0))}return new En(n)}static emptyPath(){return new En([])}}const nA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hi extends Dl{construct(t,n,s){return new Hi(t,n,s)}static isValidIdentifier(t){return nA.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Hi(["__name__"])}static fromServerFormat(t){const n=[];let s="",u=0;const c=()=>{if(s.length===0)throw new kt(Ot.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;u<t.length;){const m=t[u];if(m==="\\"){if(u+1===t.length)throw new kt(Ot.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const _=t[u+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new kt(Ot.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=_,u+=2}else m==="`"?(d=!d,u++):m!=="."||d?(s+=m,u++):(c(),u++)}if(c(),d)throw new kt(Ot.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Hi(n)}static emptyPath(){return new Hi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(t){this.path=t}static fromPath(t){return new Ft(En.fromString(t))}static fromName(t){return new Ft(En.fromString(t).popFirst(5))}static empty(){return new Ft(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&En.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return En.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ft(new En(t.slice()))}}function iA(a,t){const n=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,u=ae.fromTimestamp(s===1e9?new fi(n+1,0):new fi(n,s));return new Vu(u,Ft.empty(),t)}function aA(a){return new Vu(a.readTime,a.key,-1)}class Vu{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Vu(ae.min(),Ft.empty(),-1)}static max(){return new Vu(ae.max(),Ft.empty(),-1)}}function rA(a,t){let n=a.readTime.compareTo(t.readTime);return n!==0?n:(n=Ft.comparator(a.documentKey,t.documentKey),n!==0?n:xe(a.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lf(a){if(a.code!==Ot.FAILED_PRECONDITION||a.message!==sA)throw a;Bt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Dt((s,u)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,u)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,u)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Dt?n:Dt.resolve(n)}catch(n){return Dt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Dt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Dt.reject(n)}static resolve(t){return new Dt((n,s)=>{n(t)})}static reject(t){return new Dt((n,s)=>{s(t)})}static waitFor(t){return new Dt((n,s)=>{let u=0,c=0,d=!1;t.forEach(m=>{++u,m.next(()=>{++c,d&&c===u&&n()},_=>s(_))}),d=!0,c===u&&n()})}static or(t){let n=Dt.resolve(!1);for(const s of t)n=n.next(u=>u?Dt.resolve(u):s());return n}static forEach(t,n){const s=[];return t.forEach((u,c)=>{s.push(n.call(this,u,c))}),this.waitFor(s)}static mapArray(t,n){return new Dt((s,u)=>{const c=t.length,d=new Array(c);let m=0;for(let _=0;_<c;_++){const v=_;n(t[v]).next(b=>{d[v]=b,++m,m===c&&s(d)},b=>u(b))}})}static doWhile(t,n){return new Dt((s,u)=>{const c=()=>{t()===!0?n().next(()=>{c()},u):s()};c()})}}function oA(a){const t=a.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function of(a){return a.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}L0.oe=-1;function P0(a){return a==null}function _0(a){return a===0&&1/a==-1/0}function uA(a){return typeof a=="number"&&Number.isInteger(a)&&!_0(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(a){let t="";for(let n=0;n<a.length;n++)t.length>0&&(t=Rv(t)),t=hA(a.get(n),t);return Rv(t)}function hA(a,t){let n=t;const s=a.length;for(let u=0;u<s;u++){const c=a.charAt(u);switch(c){case"\0":n+="";break;case"":n+="";break;default:n+=c}}return n}function Rv(a){return a+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(a){let t=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&t++;return t}function kc(a,t){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&t(n,a[n])}function OE(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t,n){this.comparator=t,this.root=n||ki.EMPTY}insert(t,n){return new Ln(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ki.BLACK,null,null))}remove(t){return new Ln(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ki.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(t,s.key);if(u===0)return n+s.left.size;u<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ym(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ym(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ym(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ym(this.root,t,this.comparator,!0)}}class Ym{constructor(t,n,s,u){this.isReverse=u,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?s(t.key,n):1,n&&u&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ki{constructor(t,n,s,u,c){this.key=t,this.value=n,this.color=s??ki.RED,this.left=u??ki.EMPTY,this.right=c??ki.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,u,c){return new ki(t??this.key,n??this.value,s??this.color,u??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let u=this;const c=s(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,n,s),null):c===0?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(t,n,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return ki.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,u=this;if(n(t,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(t,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),n(t,u.key)===0){if(u.right.isEmpty())return ki.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(t,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const t=this.left.check();if(t!==this.right.check())throw te();return t+(this.isRed()?0:1)}}ki.EMPTY=null,ki.RED=!0,ki.BLACK=!1;ki.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(t,n,s,u,c){return this}insert(t,n,s){return new ki(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t){this.comparator=t,this.data=new Ln(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,t[1])>=0)return;n(u.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new wv(this.data.getIterator())}getIteratorFrom(t){return new wv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof di)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=s.getNext().key;if(this.comparator(u,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new di(this.comparator);return n.data=t,n}}class wv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(t){this.fields=t,t.sort(Hi.comparator)}static empty(){return new Us([])}unionWith(t){let n=new di(Hi.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Us(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Zh(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(u){try{return atob(u)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new ME("Invalid base64 string: "+c):c}}(t);return new qi(n)}static fromUint8Array(t){const n=function(u){let c="";for(let d=0;d<u.length;++d)c+=String.fromCharCode(u[d]);return c}(t);return new qi(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let u=0;u<n.length;u++)s[u]=n.charCodeAt(u);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return xe(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}qi.EMPTY_BYTE_STRING=new qi("");const fA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Uu(a){if(We(!!a),typeof a=="string"){let t=0;const n=fA.exec(a);if(We(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),t=Number(u)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ti(a.seconds),nanos:ti(a.nanos)}}function ti(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function Iu(a){return typeof a=="string"?qi.fromBase64String(a):qi.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(a){var t,n;return((n=(((t=a==null?void 0:a.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function z0(a){const t=a.mapValue.fields.__previous_value__;return ey(t)?z0(t):t}function gg(a){const t=Uu(a.mapValue.fields.__local_write_time__.timestampValue);return new fi(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(t,n,s,u,c,d,m,_,v){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=u,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=_,this.useFetchStreams=v}}class mg{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new mg("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof mg&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Lu(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?ey(a)?4:mA(a)?9007199254740991:gA(a)?10:11:te()}function Il(a,t){if(a===t)return!0;const n=Lu(a);if(n!==Lu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return gg(a).isEqual(gg(t));case 3:return function(u,c){if(typeof u.timestampValue=="string"&&typeof c.timestampValue=="string"&&u.timestampValue.length===c.timestampValue.length)return u.timestampValue===c.timestampValue;const d=Uu(u.timestampValue),m=Uu(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(a,t);case 5:return a.stringValue===t.stringValue;case 6:return function(u,c){return Iu(u.bytesValue).isEqual(Iu(c.bytesValue))}(a,t);case 7:return a.referenceValue===t.referenceValue;case 8:return function(u,c){return ti(u.geoPointValue.latitude)===ti(c.geoPointValue.latitude)&&ti(u.geoPointValue.longitude)===ti(c.geoPointValue.longitude)}(a,t);case 2:return function(u,c){if("integerValue"in u&&"integerValue"in c)return ti(u.integerValue)===ti(c.integerValue);if("doubleValue"in u&&"doubleValue"in c){const d=ti(u.doubleValue),m=ti(c.doubleValue);return d===m?_0(d)===_0(m):isNaN(d)&&isNaN(m)}return!1}(a,t);case 9:return Zh(a.arrayValue.values||[],t.arrayValue.values||[],Il);case 10:case 11:return function(u,c){const d=u.mapValue.fields||{},m=c.mapValue.fields||{};if(Cv(d)!==Cv(m))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(m[_]===void 0||!Il(d[_],m[_])))return!1;return!0}(a,t);default:return te()}}function pg(a,t){return(a.values||[]).find(n=>Il(n,t))!==void 0}function Wh(a,t){if(a===t)return 0;const n=Lu(a),s=Lu(t);if(n!==s)return xe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(a.booleanValue,t.booleanValue);case 2:return function(c,d){const m=ti(c.integerValue||c.doubleValue),_=ti(d.integerValue||d.doubleValue);return m<_?-1:m>_?1:m===_?0:isNaN(m)?isNaN(_)?0:-1:1}(a,t);case 3:return Dv(a.timestampValue,t.timestampValue);case 4:return Dv(gg(a),gg(t));case 5:return xe(a.stringValue,t.stringValue);case 6:return function(c,d){const m=Iu(c),_=Iu(d);return m.compareTo(_)}(a.bytesValue,t.bytesValue);case 7:return function(c,d){const m=c.split("/"),_=d.split("/");for(let v=0;v<m.length&&v<_.length;v++){const b=xe(m[v],_[v]);if(b!==0)return b}return xe(m.length,_.length)}(a.referenceValue,t.referenceValue);case 8:return function(c,d){const m=xe(ti(c.latitude),ti(d.latitude));return m!==0?m:xe(ti(c.longitude),ti(d.longitude))}(a.geoPointValue,t.geoPointValue);case 9:return Nv(a.arrayValue,t.arrayValue);case 10:return function(c,d){var m,_,v,b;const R=c.fields||{},U=d.fields||{},C=(m=R.value)===null||m===void 0?void 0:m.arrayValue,O=(_=U.value)===null||_===void 0?void 0:_.arrayValue,I=xe(((v=C==null?void 0:C.values)===null||v===void 0?void 0:v.length)||0,((b=O==null?void 0:O.values)===null||b===void 0?void 0:b.length)||0);return I!==0?I:Nv(C,O)}(a.mapValue,t.mapValue);case 11:return function(c,d){if(c===Qm.mapValue&&d===Qm.mapValue)return 0;if(c===Qm.mapValue)return 1;if(d===Qm.mapValue)return-1;const m=c.fields||{},_=Object.keys(m),v=d.fields||{},b=Object.keys(v);_.sort(),b.sort();for(let R=0;R<_.length&&R<b.length;++R){const U=xe(_[R],b[R]);if(U!==0)return U;const C=Wh(m[_[R]],v[b[R]]);if(C!==0)return C}return xe(_.length,b.length)}(a.mapValue,t.mapValue);default:throw te()}}function Dv(a,t){if(typeof a=="string"&&typeof t=="string"&&a.length===t.length)return xe(a,t);const n=Uu(a),s=Uu(t),u=xe(n.seconds,s.seconds);return u!==0?u:xe(n.nanos,s.nanos)}function Nv(a,t){const n=a.values||[],s=t.values||[];for(let u=0;u<n.length&&u<s.length;++u){const c=Wh(n[u],s[u]);if(c)return c}return xe(n.length,s.length)}function Jh(a){return y1(a)}function y1(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(n){const s=Uu(n);return`time(${s.seconds},${s.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?function(n){return Iu(n).toBase64()}(a.bytesValue):"referenceValue"in a?function(n){return Ft.fromName(n).toString()}(a.referenceValue):"geoPointValue"in a?function(n){return`geo(${n.latitude},${n.longitude})`}(a.geoPointValue):"arrayValue"in a?function(n){let s="[",u=!0;for(const c of n.values||[])u?u=!1:s+=",",s+=y1(c);return s+"]"}(a.arrayValue):"mapValue"in a?function(n){const s=Object.keys(n.fields||{}).sort();let u="{",c=!0;for(const d of s)c?c=!1:u+=",",u+=`${d}:${y1(n.fields[d])}`;return u+"}"}(a.mapValue):te()}function a0(a){switch(Lu(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=z0(a);return t?16+a0(t):16;case 5:return 2*a.stringValue.length;case 6:return Iu(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((u,c)=>u+a0(c),0)}(a.arrayValue);case 10:case 11:return function(s){let u=0;return kc(s.fields,(c,d)=>{u+=c.length+a0(d)}),u}(a.mapValue);default:throw te()}}function Ov(a,t){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${t.path.canonicalString()}`}}function _1(a){return!!a&&"integerValue"in a}function ny(a){return!!a&&"arrayValue"in a}function Mv(a){return!!a&&"nullValue"in a}function xv(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function r0(a){return!!a&&"mapValue"in a}function gA(a){var t,n;return((n=(((t=a==null?void 0:a.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function sg(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const t={mapValue:{fields:{}}};return kc(a.mapValue.fields,(n,s)=>t.mapValue.fields[n]=sg(s)),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=sg(a.arrayValue.values[n]);return t}return Object.assign({},a)}function mA(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(t){this.value=t}static empty(){return new Fr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!r0(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=sg(n)}setAll(t){let n=Hi.emptyPath(),s={},u=[];t.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const _=this.getFieldsMap(n);this.applyChanges(_,s,u),s={},u=[],n=m.popLast()}d?s[m.lastSegment()]=sg(d):u.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,u)}delete(t){const n=this.field(t.popLast());r0(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Il(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let u=n.mapValue.fields[t.get(s)];r0(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=u),n=u}return n.mapValue.fields}applyChanges(t,n,s){kc(n,(u,c)=>t[u]=c);for(const u of s)delete t[u]}clone(){return new Fr(sg(this.value))}}function xE(a){const t=[];return kc(a.fields,(n,s)=>{const u=new Hi([n]);if(r0(s)){const c=xE(s.mapValue).fields;if(c.length===0)t.push(u);else for(const d of c)t.push(u.child(d))}else t.push(u)}),new Us(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(t,n,s,u,c,d,m){this.key=t,this.documentType=n,this.version=s,this.readTime=u,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(t){return new ha(t,0,ae.min(),ae.min(),ae.min(),Fr.empty(),0)}static newFoundDocument(t,n,s,u){return new ha(t,1,n,ae.min(),s,u,0)}static newNoDocument(t,n){return new ha(t,2,n,ae.min(),ae.min(),Fr.empty(),0)}static newUnknownDocument(t,n){return new ha(t,3,n,ae.min(),ae.min(),Fr.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Fr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ha&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ha(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t,n){this.position=t,this.inclusive=n}}function Vv(a,t,n){let s=0;for(let u=0;u<a.position.length;u++){const c=t[u],d=a.position[u];if(c.field.isKeyField()?s=Ft.comparator(Ft.fromName(d.referenceValue),n.key):s=Wh(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Uv(a,t){if(a===null)return t===null;if(t===null||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!Il(a.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(t,n="asc"){this.field=t,this.dir=n}}function pA(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{}class oi extends VE{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new _A(t,n,s):n==="array-contains"?new SA(t,s):n==="in"?new TA(t,s):n==="not-in"?new bA(t,s):n==="array-contains-any"?new AA(t,s):new oi(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new vA(t,s):new EA(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Wh(n,this.value)):n!==null&&Lu(this.value)===Lu(n)&&this.matchesComparison(Wh(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ls extends VE{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Ls(t,n)}matches(t){return UE(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function UE(a){return a.op==="and"}function IE(a){return yA(a)&&UE(a)}function yA(a){for(const t of a.filters)if(t instanceof Ls)return!1;return!0}function v1(a){if(a instanceof oi)return a.field.canonicalString()+a.op.toString()+Jh(a.value);if(IE(a))return a.filters.map(t=>v1(t)).join(",");{const t=a.filters.map(n=>v1(n)).join(",");return`${a.op}(${t})`}}function LE(a,t){return a instanceof oi?function(s,u){return u instanceof oi&&s.op===u.op&&s.field.isEqual(u.field)&&Il(s.value,u.value)}(a,t):a instanceof Ls?function(s,u){return u instanceof Ls&&s.op===u.op&&s.filters.length===u.filters.length?s.filters.reduce((c,d,m)=>c&&LE(d,u.filters[m]),!0):!1}(a,t):void te()}function PE(a){return a instanceof oi?function(n){return`${n.field.canonicalString()} ${n.op} ${Jh(n.value)}`}(a):a instanceof Ls?function(n){return n.op.toString()+" {"+n.getFilters().map(PE).join(" ,")+"}"}(a):"Filter"}class _A extends oi{constructor(t,n,s){super(t,n,s),this.key=Ft.fromName(s.referenceValue)}matches(t){const n=Ft.comparator(t.key,this.key);return this.matchesComparison(n)}}class vA extends oi{constructor(t,n){super(t,"in",n),this.keys=zE("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class EA extends oi{constructor(t,n){super(t,"not-in",n),this.keys=zE("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function zE(a,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Ft.fromName(s.referenceValue))}class SA extends oi{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return ny(n)&&pg(n.arrayValue,this.value)}}class TA extends oi{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&pg(this.value.arrayValue,n)}}class bA extends oi{constructor(t,n){super(t,"not-in",n)}matches(t){if(pg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!pg(this.value.arrayValue,n)}}class AA extends oi{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!ny(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>pg(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(t,n=null,s=[],u=[],c=null,d=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=u,this.limit=c,this.startAt=d,this.endAt=m,this.ue=null}}function Iv(a,t=null,n=[],s=[],u=null,c=null,d=null){return new RA(a,t,n,s,u,c,d)}function iy(a){const t=se(a);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>v1(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),P0(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Jh(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Jh(s)).join(",")),t.ue=n}return t.ue}function ay(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!pA(a.orderBy[n],t.orderBy[n]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!LE(a.filters[n],t.filters[n]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!Uv(a.startAt,t.startAt)&&Uv(a.endAt,t.endAt)}function E1(a){return Ft.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(t,n=null,s=[],u=[],c=null,d="F",m=null,_=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=u,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=_,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function CA(a,t,n,s,u,c,d,m){return new Cg(a,t,n,s,u,c,d,m)}function ry(a){return new Cg(a)}function Lv(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function BE(a){return a.collectionGroup!==null}function lg(a){const t=se(a);if(t.ce===null){t.ce=[];const n=new Set;for(const c of t.explicitOrderBy)t.ce.push(c),n.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new di(Hi.comparator);return d.filters.forEach(_=>{_.getFlattenedFilters().forEach(v=>{v.isInequality()&&(m=m.add(v.field))})}),m})(t).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||t.ce.push(new E0(c,s))}),n.has(Hi.keyField().canonicalString())||t.ce.push(new E0(Hi.keyField(),s))}return t.ce}function xl(a){const t=se(a);return t.le||(t.le=wA(t,lg(a))),t.le}function wA(a,t){if(a.limitType==="F")return Iv(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map(u=>{const c=u.dir==="desc"?"asc":"desc";return new E0(u.field,c)});const n=a.endAt?new v0(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new v0(a.startAt.position,a.startAt.inclusive):null;return Iv(a.path,a.collectionGroup,t,a.filters,a.limit,n,s)}}function S1(a,t){const n=a.filters.concat([t]);return new Cg(a.path,a.collectionGroup,a.explicitOrderBy.slice(),n,a.limit,a.limitType,a.startAt,a.endAt)}function T1(a,t,n){return new Cg(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,n,a.startAt,a.endAt)}function B0(a,t){return ay(xl(a),xl(t))&&a.limitType===t.limitType}function GE(a){return`${iy(xl(a))}|lt:${a.limitType}`}function Gh(a){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(u=>PE(u)).join(", ")}]`),P0(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(u=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(u)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(u=>Jh(u)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(u=>Jh(u)).join(",")),`Target(${s})`}(xl(a))}; limitType=${a.limitType})`}function G0(a,t){return t.isFoundDocument()&&function(s,u){const c=u.key.path;return s.collectionGroup!==null?u.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ft.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(a,t)&&function(s,u){for(const c of lg(s))if(!c.field.isKeyField()&&u.data.field(c.field)===null)return!1;return!0}(a,t)&&function(s,u){for(const c of s.filters)if(!c.matches(u))return!1;return!0}(a,t)&&function(s,u){return!(s.startAt&&!function(d,m,_){const v=Vv(d,m,_);return d.inclusive?v<=0:v<0}(s.startAt,lg(s),u)||s.endAt&&!function(d,m,_){const v=Vv(d,m,_);return d.inclusive?v>=0:v>0}(s.endAt,lg(s),u))}(a,t)}function DA(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function kE(a){return(t,n)=>{let s=!1;for(const u of lg(a)){const c=NA(u,t,n);if(c!==0)return c;s=s||u.field.isKeyField()}return 0}}function NA(a,t,n){const s=a.field.isKeyField()?Ft.comparator(t.key,n.key):function(c,d,m){const _=d.data.field(c),v=m.data.field(c);return _!==null&&v!==null?Wh(_,v):te()}(a.field,t,n);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[u,c]of s)if(this.equalsFn(u,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),u=this.inner[s];if(u===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let c=0;c<u.length;c++)if(this.equalsFn(u[c][0],t))return void(u[c]=[t,n]);u.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],t))return s.length===1?delete this.inner[n]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(t){kc(this.inner,(n,s)=>{for(const[u,c]of s)t(u,c)})}isEmpty(){return OE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=new Ln(Ft.comparator);function Do(){return OA}const HE=new Ln(Ft.comparator);function ng(...a){let t=HE;for(const n of a)t=t.insert(n.key,n);return t}function qE(a){let t=HE;return a.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function Ic(){return og()}function jE(){return og()}function og(){return new Hc(a=>a.toString(),(a,t)=>a.isEqual(t))}const MA=new Ln(Ft.comparator),xA=new di(Ft.comparator);function De(...a){let t=xA;for(const n of a)t=t.add(n);return t}const VA=new di(xe);function UA(){return VA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_0(t)?"-0":t}}function FE(a){return{integerValue:""+a}}function IA(a,t){return uA(t)?FE(t):sy(a,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(){this._=void 0}}function LA(a,t,n){return a instanceof yg?function(u,c){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return c&&ey(c)&&(c=z0(c)),c&&(d.fields.__previous_value__=c),{mapValue:d}}(n,t):a instanceof _g?YE(a,t):a instanceof vg?QE(a,t):function(u,c){const d=KE(u,c),m=Pv(d)+Pv(u.Pe);return _1(d)&&_1(u.Pe)?FE(m):sy(u.serializer,m)}(a,t)}function PA(a,t,n){return a instanceof _g?YE(a,t):a instanceof vg?QE(a,t):n}function KE(a,t){return a instanceof S0?function(s){return _1(s)||function(c){return!!c&&"doubleValue"in c}(s)}(t)?t:{integerValue:0}:null}class yg extends k0{}class _g extends k0{constructor(t){super(),this.elements=t}}function YE(a,t){const n=XE(t);for(const s of a.elements)n.some(u=>Il(u,s))||n.push(s);return{arrayValue:{values:n}}}class vg extends k0{constructor(t){super(),this.elements=t}}function QE(a,t){let n=XE(t);for(const s of a.elements)n=n.filter(u=>!Il(u,s));return{arrayValue:{values:n}}}class S0 extends k0{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Pv(a){return ti(a.integerValue||a.doubleValue)}function XE(a){return ny(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(t,n){this.field=t,this.transform=n}}function BA(a,t){return a.field.isEqual(t.field)&&function(s,u){return s instanceof _g&&u instanceof _g||s instanceof vg&&u instanceof vg?Zh(s.elements,u.elements,Il):s instanceof S0&&u instanceof S0?Il(s.Pe,u.Pe):s instanceof yg&&u instanceof yg}(a.transform,t.transform)}class GA{constructor(t,n){this.version=t,this.transformResults=n}}class Vl{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Vl}static exists(t){return new Vl(void 0,t)}static updateTime(t){return new Vl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function s0(a,t){return a.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(a.updateTime):a.exists===void 0||a.exists===t.isFoundDocument()}class H0{}function ZE(a,t){if(!a.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return a.isNoDocument()?new ly(a.key,Vl.none()):new wg(a.key,a.data,Vl.none());{const n=a.data,s=Fr.empty();let u=new di(Hi.comparator);for(let c of t.fields)if(!u.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),u=u.add(c)}return new qc(a.key,s,new Us(u.toArray()),Vl.none())}}function kA(a,t,n){a instanceof wg?function(u,c,d){const m=u.value.clone(),_=Bv(u.fieldTransforms,c,d.transformResults);m.setAll(_),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(a,t,n):a instanceof qc?function(u,c,d){if(!s0(u.precondition,c))return void c.convertToUnknownDocument(d.version);const m=Bv(u.fieldTransforms,c,d.transformResults),_=c.data;_.setAll(WE(u)),_.setAll(m),c.convertToFoundDocument(d.version,_).setHasCommittedMutations()}(a,t,n):function(u,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,t,n)}function ug(a,t,n,s){return a instanceof wg?function(c,d,m,_){if(!s0(c.precondition,d))return m;const v=c.value.clone(),b=Gv(c.fieldTransforms,_,d);return v.setAll(b),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(a,t,n,s):a instanceof qc?function(c,d,m,_){if(!s0(c.precondition,d))return m;const v=Gv(c.fieldTransforms,_,d),b=d.data;return b.setAll(WE(c)),b.setAll(v),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(R=>R.field))}(a,t,n,s):function(c,d,m){return s0(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(a,t,n)}function HA(a,t){let n=null;for(const s of a.fieldTransforms){const u=t.data.field(s.field),c=KE(s.transform,u||null);c!=null&&(n===null&&(n=Fr.empty()),n.set(s.field,c))}return n||null}function zv(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&!!function(s,u){return s===void 0&&u===void 0||!(!s||!u)&&Zh(s,u,(c,d)=>BA(c,d))}(a.fieldTransforms,t.fieldTransforms)&&(a.type===0?a.value.isEqual(t.value):a.type!==1||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask))}class wg extends H0{constructor(t,n,s,u=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class qc extends H0{constructor(t,n,s,u,c=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=u,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function WE(a){const t=new Map;return a.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=a.data.field(n);t.set(n,s)}}),t}function Bv(a,t,n){const s=new Map;We(a.length===n.length);for(let u=0;u<n.length;u++){const c=a[u],d=c.transform,m=t.data.field(c.field);s.set(c.field,PA(d,m,n[u]))}return s}function Gv(a,t,n){const s=new Map;for(const u of a){const c=u.transform,d=n.data.field(u.field);s.set(u.field,LA(c,d,t))}return s}class ly extends H0{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qA extends H0{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(t,n,s,u){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const c=this.mutations[u];c.key.isEqual(t.key)&&kA(c,t,s[u])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=ug(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=ug(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=jE();return this.mutations.forEach(u=>{const c=t.get(u.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(u.key)?null:m;const _=ZE(d,m);_!==null&&s.set(u.key,_),d.isValidDocument()||d.convertToNoDocument(ae.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),De())}isEqual(t){return this.batchId===t.batchId&&Zh(this.mutations,t.mutations,(n,s)=>zv(n,s))&&Zh(this.baseMutations,t.baseMutations,(n,s)=>zv(n,s))}}class oy{constructor(t,n,s,u){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=u}static from(t,n,s){We(t.mutations.length===s.length);let u=function(){return MA}();const c=t.mutations;for(let d=0;d<c.length;d++)u=u.insert(c[d].key,s[d].version);return new oy(t,n,s,u)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li,Le;function YA(a){switch(a){default:return te();case Ot.CANCELLED:case Ot.UNKNOWN:case Ot.DEADLINE_EXCEEDED:case Ot.RESOURCE_EXHAUSTED:case Ot.INTERNAL:case Ot.UNAVAILABLE:case Ot.UNAUTHENTICATED:return!1;case Ot.INVALID_ARGUMENT:case Ot.NOT_FOUND:case Ot.ALREADY_EXISTS:case Ot.PERMISSION_DENIED:case Ot.FAILED_PRECONDITION:case Ot.ABORTED:case Ot.OUT_OF_RANGE:case Ot.UNIMPLEMENTED:case Ot.DATA_LOSS:return!0}}function JE(a){if(a===void 0)return wo("GRPC error has no .code"),Ot.UNKNOWN;switch(a){case li.OK:return Ot.OK;case li.CANCELLED:return Ot.CANCELLED;case li.UNKNOWN:return Ot.UNKNOWN;case li.DEADLINE_EXCEEDED:return Ot.DEADLINE_EXCEEDED;case li.RESOURCE_EXHAUSTED:return Ot.RESOURCE_EXHAUSTED;case li.INTERNAL:return Ot.INTERNAL;case li.UNAVAILABLE:return Ot.UNAVAILABLE;case li.UNAUTHENTICATED:return Ot.UNAUTHENTICATED;case li.INVALID_ARGUMENT:return Ot.INVALID_ARGUMENT;case li.NOT_FOUND:return Ot.NOT_FOUND;case li.ALREADY_EXISTS:return Ot.ALREADY_EXISTS;case li.PERMISSION_DENIED:return Ot.PERMISSION_DENIED;case li.FAILED_PRECONDITION:return Ot.FAILED_PRECONDITION;case li.ABORTED:return Ot.ABORTED;case li.OUT_OF_RANGE:return Ot.OUT_OF_RANGE;case li.UNIMPLEMENTED:return Ot.UNIMPLEMENTED;case li.DATA_LOSS:return Ot.DATA_LOSS;default:return te()}}(Le=li||(li={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=new Nu([4294967295,4294967295],0);function kv(a){const t=QA().encode(a),n=new TE;return n.update(t),new Uint8Array(n.digest())}function Hv(a){const t=new DataView(a.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),u=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Nu([n,s],0),new Nu([u,c],0)]}class uy{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ig(`Invalid padding: ${n}`);if(s<0)throw new ig(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new ig(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new ig(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ie=Nu.fromNumber(this.Te)}de(t,n,s){let u=t.add(n.multiply(Nu.fromNumber(s)));return u.compare(XA)===1&&(u=new Nu([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ie).toNumber()}Ee(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=kv(t),[s,u]=Hv(n);for(let c=0;c<this.hashCount;c++){const d=this.de(s,u,c);if(!this.Ee(d))return!1}return!0}static create(t,n,s){const u=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new uy(c,u,n);return s.forEach(m=>d.insert(m)),d}insert(t){if(this.Te===0)return;const n=kv(t),[s,u]=Hv(n);for(let c=0;c<this.hashCount;c++){const d=this.de(s,u,c);this.Ae(d)}}Ae(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class ig extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(t,n,s,u,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const u=new Map;return u.set(t,Dg.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new q0(ae.min(),u,new Ln(xe),Do(),De())}}class Dg{constructor(t,n,s,u,c){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Dg(s,n,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(t,n,s,u){this.Re=t,this.removedTargetIds=n,this.key=s,this.Ve=u}}class $E{constructor(t,n){this.targetId=t,this.me=n}}class t3{constructor(t,n,s=qi.EMPTY_BYTE_STRING,u=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=u}}class qv{constructor(){this.fe=0,this.ge=jv(),this.pe=qi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=De(),n=De(),s=De();return this.ge.forEach((u,c)=>{switch(c){case 0:t=t.add(u);break;case 2:n=n.add(u);break;case 1:s=s.add(u);break;default:te()}}),new Dg(this.pe,this.ye,t,n,s)}Ce(){this.we=!1,this.ge=jv()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ZA{constructor(t){this.Be=t,this.Le=new Map,this.ke=Do(),this.qe=Xm(),this.Qe=Xm(),this.Ke=new Ln(xe)}$e(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(n,t.Ve):this.We(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.We(n,t.key,t.Ve)}Ge(t){this.forEachTarget(t,n=>{const s=this.ze(n);switch(t.state){case 0:this.je(n)&&s.De(t.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(t.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.je(n)&&(s.Ne(),s.De(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.De(t.resumeToken));break;default:te()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Le.forEach((s,u)=>{this.je(u)&&n(u)})}Je(t){const n=t.targetId,s=t.me.count,u=this.Ye(n);if(u){const c=u.target;if(E1(c))if(s===0){const d=new Ft(c.path);this.We(n,d,ha.newNoDocument(d,ae.min()))}else We(s===1);else{const d=this.Ze(n);if(d!==s){const m=this.Xe(t),_=m?this.et(m,t,d):1;if(_!==0){this.He(n);const v=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,v)}}}}}Xe(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:u=0},hashCount:c=0}=n;let d,m;try{d=Iu(s).toUint8Array()}catch(_){if(_ instanceof ME)return Xh("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{m=new uy(d,u,c)}catch(_){return Xh(_ instanceof ig?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return m.Te===0?null:m}et(t,n,s){return n.me.count===s-this.rt(t,n.targetId)?0:2}rt(t,n){const s=this.Be.getRemoteKeysForTarget(n);let u=0;return s.forEach(c=>{const d=this.Be.nt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(m)||(this.We(n,c,null),u++)}),u}it(t){const n=new Map;this.Le.forEach((c,d)=>{const m=this.Ye(d);if(m){if(c.current&&E1(m.target)){const _=new Ft(m.target.path);this.st(_).has(d)||this.ot(d,_)||this.We(d,_,ha.newNoDocument(_,t))}c.be&&(n.set(d,c.ve()),c.Ce())}});let s=De();this.Qe.forEach((c,d)=>{let m=!0;d.forEachWhile(_=>{const v=this.Ye(_);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(c))}),this.ke.forEach((c,d)=>d.setReadTime(t));const u=new q0(t,n,this.Ke,this.ke,s);return this.ke=Do(),this.qe=Xm(),this.Qe=Xm(),this.Ke=new Ln(xe),u}Ue(t,n){if(!this.je(t))return;const s=this.ot(t,n.key)?2:0;this.ze(t).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(t))}We(t,n,s){if(!this.je(t))return;const u=this.ze(t);this.ot(t,n)?u.Fe(n,1):u.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(t)),this.Qe=this.Qe.insert(n,this._t(n).add(t)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(t){this.Le.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let n=this.Le.get(t);return n||(n=new qv,this.Le.set(t,n)),n}_t(t){let n=this.Qe.get(t);return n||(n=new di(xe),this.Qe=this.Qe.insert(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new di(xe),this.qe=this.qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||Bt("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.Le.get(t);return n&&n.Se?null:this.Be.ut(t)}He(t){this.Le.set(t,new qv),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}ot(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function Xm(){return new Ln(Ft.comparator)}function jv(){return new Ln(Ft.comparator)}const WA={asc:"ASCENDING",desc:"DESCENDING"},JA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$A={and:"AND",or:"OR"};class t7{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function b1(a,t){return a.useProto3Json||P0(t)?t:{value:t}}function T0(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function e3(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function e7(a,t){return T0(a,t.toTimestamp())}function Ul(a){return We(!!a),ae.fromTimestamp(function(n){const s=Uu(n);return new fi(s.seconds,s.nanos)}(a))}function cy(a,t){return A1(a,t).canonicalString()}function A1(a,t){const n=function(u){return new En(["projects",u.projectId,"databases",u.database])}(a).child("documents");return t===void 0?n:n.child(t)}function n3(a){const t=En.fromString(a);return We(l3(t)),t}function R1(a,t){return cy(a.databaseId,t.path)}function e1(a,t){const n=n3(t);if(n.get(1)!==a.databaseId.projectId)throw new kt(Ot.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new kt(Ot.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new Ft(a3(n))}function i3(a,t){return cy(a.databaseId,t)}function n7(a){const t=n3(a);return t.length===4?En.emptyPath():a3(t)}function C1(a){return new En(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function a3(a){return We(a.length>4&&a.get(4)==="documents"),a.popFirst(5)}function Fv(a,t,n){return{name:R1(a,t),fields:n.value.mapValue.fields}}function i7(a,t){let n;if("targetChange"in t){t.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:te()}(t.targetChange.targetChangeType||"NO_CHANGE"),u=t.targetChange.targetIds||[],c=function(v,b){return v.useProto3Json?(We(b===void 0||typeof b=="string"),qi.fromBase64String(b||"")):(We(b===void 0||b instanceof Buffer||b instanceof Uint8Array),qi.fromUint8Array(b||new Uint8Array))}(a,t.targetChange.resumeToken),d=t.targetChange.cause,m=d&&function(v){const b=v.code===void 0?Ot.UNKNOWN:JE(v.code);return new kt(b,v.message||"")}(d);n=new t3(s,u,c,m||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const u=e1(a,s.document.name),c=Ul(s.document.updateTime),d=s.document.createTime?Ul(s.document.createTime):ae.min(),m=new Fr({mapValue:{fields:s.document.fields}}),_=ha.newFoundDocument(u,c,d,m),v=s.targetIds||[],b=s.removedTargetIds||[];n=new l0(v,b,_.key,_)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const u=e1(a,s.document),c=s.readTime?Ul(s.readTime):ae.min(),d=ha.newNoDocument(u,c),m=s.removedTargetIds||[];n=new l0([],m,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const u=e1(a,s.document),c=s.removedTargetIds||[];n=new l0([],c,u,null)}else{if(!("filter"in t))return te();{t.filter;const s=t.filter;s.targetId;const{count:u=0,unchangedNames:c}=s,d=new KA(u,c),m=s.targetId;n=new $E(m,d)}}return n}function a7(a,t){let n;if(t instanceof wg)n={update:Fv(a,t.key,t.value)};else if(t instanceof ly)n={delete:R1(a,t.key)};else if(t instanceof qc)n={update:Fv(a,t.key,t.data),updateMask:d7(t.fieldMask)};else{if(!(t instanceof qA))return te();n={verify:R1(a,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(c,d){const m=d.transform;if(m instanceof yg)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof _g)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof vg)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof S0)return{fieldPath:d.field.canonicalString(),increment:m.Pe};throw te()}(0,s))),t.precondition.isNone||(n.currentDocument=function(u,c){return c.updateTime!==void 0?{updateTime:e7(u,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:te()}(a,t.precondition)),n}function r7(a,t){return a&&a.length>0?(We(t!==void 0),a.map(n=>function(u,c){let d=u.updateTime?Ul(u.updateTime):Ul(c);return d.isEqual(ae.min())&&(d=Ul(c)),new GA(d,u.transformResults||[])}(n,t))):[]}function s7(a,t){return{documents:[i3(a,t.path)]}}function l7(a,t){const n={structuredQuery:{}},s=t.path;let u;t.collectionGroup!==null?(u=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(u=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=i3(a,u);const c=function(v){if(v.length!==0)return s3(Ls.create(v,"and"))}(t.filters);c&&(n.structuredQuery.where=c);const d=function(v){if(v.length!==0)return v.map(b=>function(U){return{field:kh(U.field),direction:c7(U.dir)}}(b))}(t.orderBy);d&&(n.structuredQuery.orderBy=d);const m=b1(a,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(t.endAt)),{ct:n,parent:u}}function o7(a){let t=n7(a.parent);const n=a.structuredQuery,s=n.from?n.from.length:0;let u=null;if(s>0){We(s===1);const b=n.from[0];b.allDescendants?u=b.collectionId:t=t.child(b.collectionId)}let c=[];n.where&&(c=function(R){const U=r3(R);return U instanceof Ls&&IE(U)?U.getFilters():[U]}(n.where));let d=[];n.orderBy&&(d=function(R){return R.map(U=>function(O){return new E0(Hh(O.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(U))}(n.orderBy));let m=null;n.limit&&(m=function(R){let U;return U=typeof R=="object"?R.value:R,P0(U)?null:U}(n.limit));let _=null;n.startAt&&(_=function(R){const U=!!R.before,C=R.values||[];return new v0(C,U)}(n.startAt));let v=null;return n.endAt&&(v=function(R){const U=!R.before,C=R.values||[];return new v0(C,U)}(n.endAt)),CA(t,u,d,c,m,"F",_,v)}function u7(a,t){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function r3(a){return a.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Hh(n.unaryFilter.field);return oi.create(s,"==",{doubleValue:NaN});case"IS_NULL":const u=Hh(n.unaryFilter.field);return oi.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Hh(n.unaryFilter.field);return oi.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Hh(n.unaryFilter.field);return oi.create(d,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(a):a.fieldFilter!==void 0?function(n){return oi.create(Hh(n.fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(a):a.compositeFilter!==void 0?function(n){return Ls.create(n.compositeFilter.filters.map(s=>r3(s)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(a):te()}function c7(a){return WA[a]}function h7(a){return JA[a]}function f7(a){return $A[a]}function kh(a){return{fieldPath:a.canonicalString()}}function Hh(a){return Hi.fromServerFormat(a.fieldPath)}function s3(a){return a instanceof oi?function(n){if(n.op==="=="){if(xv(n.value))return{unaryFilter:{field:kh(n.field),op:"IS_NAN"}};if(Mv(n.value))return{unaryFilter:{field:kh(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xv(n.value))return{unaryFilter:{field:kh(n.field),op:"IS_NOT_NAN"}};if(Mv(n.value))return{unaryFilter:{field:kh(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kh(n.field),op:h7(n.op),value:n.value}}}(a):a instanceof Ls?function(n){const s=n.getFilters().map(u=>s3(u));return s.length===1?s[0]:{compositeFilter:{op:f7(n.op),filters:s}}}(a):te()}function d7(a){const t=[];return a.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function l3(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(t,n,s,u,c=ae.min(),d=ae.min(),m=qi.EMPTY_BYTE_STRING,_=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=_}withSequenceNumber(t){return new Ru(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(t){this.ht=t}}function m7(a){const t=o7({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?T1(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(){this.ln=new y7}addToCollectionParentIndex(t,n){return this.ln.add(n),Dt.resolve()}getCollectionParents(t,n){return Dt.resolve(this.ln.getEntries(n))}addFieldIndex(t,n){return Dt.resolve()}deleteFieldIndex(t,n){return Dt.resolve()}deleteAllFieldIndexes(t){return Dt.resolve()}createTargetIndexes(t,n){return Dt.resolve()}getDocumentsMatchingTarget(t,n){return Dt.resolve(null)}getIndexType(t,n){return Dt.resolve(0)}getFieldIndexes(t,n){return Dt.resolve([])}getNextCollectionGroupToUpdate(t){return Dt.resolve(null)}getMinOffset(t,n){return Dt.resolve(Vu.min())}getMinOffsetFromCollectionGroup(t,n){return Dt.resolve(Vu.min())}updateCollectionGroup(t,n,s){return Dt.resolve()}updateIndexEntries(t,n){return Dt.resolve()}}class y7{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),u=this.index[n]||new di(En.comparator),c=!u.has(s);return this.index[n]=u.add(s),c}has(t){const n=t.lastSegment(),s=t.popLast(),u=this.index[n];return u&&u.has(s)}getEntries(t){return(this.index[t]||new di(En.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class tr{static withCacheSize(t){return new tr(t,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr.DEFAULT_COLLECTION_PERCENTILE=10,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tr.DEFAULT=new tr(41943040,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tr.DISABLED=new tr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new $h(0)}static Qn(){return new $h(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv([a,t],[n,s]){const u=xe(a,n);return u===0?xe(t,s):u}class _7{constructor(t){this.Gn=t,this.buffer=new di(Yv),this.zn=0}jn(){return++this.zn}Hn(t){const n=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Yv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class v7{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){Bt("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){of(n)?Bt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await lf(n)}await this.Yn(3e5)})}}class E7{constructor(t,n){this.Zn=t,this.params=n}calculateTargetCount(t,n){return this.Zn.Xn(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return Dt.resolve(L0.oe);const s=new _7(n);return this.Zn.forEachTarget(t,u=>s.Hn(u.sequenceNumber)).next(()=>this.Zn.er(t,u=>s.Hn(u))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.Zn.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.Zn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Bt("LruGarbageCollector","Garbage collection skipped; disabled"),Dt.resolve(Kv)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(Bt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kv):this.tr(t,n))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,n){let s,u,c,d,m,_,v;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Bt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),u=this.params.maximumSequenceNumbersToCollect):u=R,d=Date.now(),this.nthSequenceNumber(t,u))).next(R=>(s=R,m=Date.now(),this.removeTargets(t,s,n))).next(R=>(c=R,_=Date.now(),this.removeOrphanedDocuments(t,s))).next(R=>(v=Date.now(),Bh()<=we.DEBUG&&Bt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${u} in `+(m-d)+`ms
	Removed ${c} targets in `+(_-m)+`ms
	Removed ${R} documents in `+(v-_)+`ms
Total Duration: ${v-b}ms`),Dt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:c,documentsRemoved:R})))}}function S7(a,t){return new E7(a,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(){this.changes=new Hc(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ha.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Dt.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(t,n,s,u){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=u}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(u=>(s=u,this.remoteDocumentCache.getEntry(t,n))).next(u=>(s!==null&&ug(s.mutation,u,Us.empty(),fi.now()),u))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,De()).next(()=>s))}getLocalViewOfDocuments(t,n,s=De()){const u=Ic();return this.populateOverlays(t,u,n).next(()=>this.computeViews(t,n,u,s).next(c=>{let d=ng();return c.forEach((m,_)=>{d=d.insert(m,_.overlayedDocument)}),d}))}getOverlayedDocuments(t,n){const s=Ic();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,De()))}populateOverlays(t,n,s){const u=[];return s.forEach(c=>{n.has(c)||u.push(c)}),this.documentOverlayCache.getOverlays(t,u).next(c=>{c.forEach((d,m)=>{n.set(d,m)})})}computeViews(t,n,s,u){let c=Do();const d=og(),m=function(){return og()}();return n.forEach((_,v)=>{const b=s.get(v.key);u.has(v.key)&&(b===void 0||b.mutation instanceof qc)?c=c.insert(v.key,v):b!==void 0?(d.set(v.key,b.mutation.getFieldMask()),ug(b.mutation,v,b.mutation.getFieldMask(),fi.now())):d.set(v.key,Us.empty())}),this.recalculateAndSaveOverlays(t,c).next(_=>(_.forEach((v,b)=>d.set(v,b)),n.forEach((v,b)=>{var R;return m.set(v,new b7(b,(R=d.get(v))!==null&&R!==void 0?R:null))}),m))}recalculateAndSaveOverlays(t,n){const s=og();let u=new Ln((d,m)=>d-m),c=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(d=>{for(const m of d)m.keys().forEach(_=>{const v=n.get(_);if(v===null)return;let b=s.get(_)||Us.empty();b=m.applyToLocalView(v,b),s.set(_,b);const R=(u.get(m.batchId)||De()).add(_);u=u.insert(m.batchId,R)})}).next(()=>{const d=[],m=u.getReverseIterator();for(;m.hasNext();){const _=m.getNext(),v=_.key,b=_.value,R=jE();b.forEach(U=>{if(!c.has(U)){const C=ZE(n.get(U),s.get(U));C!==null&&R.set(U,C),c=c.add(U)}}),d.push(this.documentOverlayCache.saveOverlays(t,v,R))}return Dt.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,u){return function(d){return Ft.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):BE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,u):this.getDocumentsMatchingCollectionQuery(t,n,s,u)}getNextDocuments(t,n,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,u).next(c=>{const d=u-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,u-c.size):Dt.resolve(Ic());let m=-1,_=c;return d.next(v=>Dt.forEach(v,(b,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),c.get(b)?Dt.resolve():this.remoteDocumentCache.getEntry(t,b).next(U=>{_=_.insert(b,U)}))).next(()=>this.populateOverlays(t,v,c)).next(()=>this.computeViews(t,_,v,De())).next(b=>({batchId:m,changes:qE(b)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ft(n)).next(s=>{let u=ng();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(t,n,s,u){const c=n.collectionGroup;let d=ng();return this.indexManager.getCollectionParents(t,c).next(m=>Dt.forEach(m,_=>{const v=function(R,U){return new Cg(U,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(n,_.child(c));return this.getDocumentsMatchingCollectionQuery(t,v,s,u).next(b=>{b.forEach((R,U)=>{d=d.insert(R,U)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(t,n,s,u){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,c,u))).next(d=>{c.forEach((_,v)=>{const b=v.getKey();d.get(b)===null&&(d=d.insert(b,ha.newInvalidDocument(b)))});let m=ng();return d.forEach((_,v)=>{const b=c.get(_);b!==void 0&&ug(b.mutation,v,Us.empty(),fi.now()),G0(n,v)&&(m=m.insert(_,v))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,n){return Dt.resolve(this.Tr.get(n))}saveBundleMetadata(t,n){return this.Tr.set(n.id,function(u){return{id:u.id,version:u.version,createTime:Ul(u.createTime)}}(n)),Dt.resolve()}getNamedQuery(t,n){return Dt.resolve(this.Ir.get(n))}saveNamedQuery(t,n){return this.Ir.set(n.name,function(u){return{name:u.name,query:m7(u.bundledQuery),readTime:Ul(u.readTime)}}(n)),Dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(){this.overlays=new Ln(Ft.comparator),this.dr=new Map}getOverlay(t,n){return Dt.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Ic();return Dt.forEach(n,u=>this.getOverlay(t,u).next(c=>{c!==null&&s.set(u,c)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((u,c)=>{this.Tt(t,n,c)}),Dt.resolve()}removeOverlaysForBatchId(t,n,s){const u=this.dr.get(s);return u!==void 0&&(u.forEach(c=>this.overlays=this.overlays.remove(c)),this.dr.delete(s)),Dt.resolve()}getOverlaysForCollection(t,n,s){const u=Ic(),c=n.length+1,d=new Ft(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const _=m.getNext().value,v=_.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&_.largestBatchId>s&&u.set(_.getKey(),_)}return Dt.resolve(u)}getOverlaysForCollectionGroup(t,n,s,u){let c=new Ln((v,b)=>v-b);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let b=c.get(v.largestBatchId);b===null&&(b=Ic(),c=c.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const m=Ic(),_=c.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((v,b)=>m.set(v,b)),!(m.size()>=u)););return Dt.resolve(m)}Tt(t,n,s){const u=this.overlays.get(s.key);if(u!==null){const d=this.dr.get(u.largestBatchId).delete(s.key);this.dr.set(u.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new FA(n,s));let c=this.dr.get(n);c===void 0&&(c=De(),this.dr.set(n,c)),this.dr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(){this.sessionToken=qi.EMPTY_BYTE_STRING}getSessionToken(t){return Dt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,Dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(){this.Er=new di(Di.Ar),this.Rr=new di(Di.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(t,n){const s=new Di(t,n);this.Er=this.Er.add(s),this.Rr=this.Rr.add(s)}mr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.gr(new Di(t,n))}pr(t,n){t.forEach(s=>this.removeReference(s,n))}yr(t){const n=new Ft(new En([])),s=new Di(n,t),u=new Di(n,t+1),c=[];return this.Rr.forEachInRange([s,u],d=>{this.gr(d),c.push(d.key)}),c}wr(){this.Er.forEach(t=>this.gr(t))}gr(t){this.Er=this.Er.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const n=new Ft(new En([])),s=new Di(n,t),u=new Di(n,t+1);let c=De();return this.Rr.forEachInRange([s,u],d=>{c=c.add(d.key)}),c}containsKey(t){const n=new Di(t,0),s=this.Er.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Di{constructor(t,n){this.key=t,this.br=n}static Ar(t,n){return Ft.comparator(t.key,n.key)||xe(t.br,n.br)}static Vr(t,n){return xe(t.br,n.br)||Ft.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new di(Di.Ar)}checkEmpty(t){return Dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,u){const c=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new jA(c,n,s,u);this.mutationQueue.push(d);for(const m of u)this.vr=this.vr.add(new Di(m.key,c)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return Dt.resolve(d)}lookupMutationBatch(t,n){return Dt.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,u=this.Fr(s),c=u<0?0:u;return Dt.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Dt.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return Dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Di(n,0),u=new Di(n,Number.POSITIVE_INFINITY),c=[];return this.vr.forEachInRange([s,u],d=>{const m=this.Cr(d.br);c.push(m)}),Dt.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new di(xe);return n.forEach(u=>{const c=new Di(u,0),d=new Di(u,Number.POSITIVE_INFINITY);this.vr.forEachInRange([c,d],m=>{s=s.add(m.br)})}),Dt.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,u=s.length+1;let c=s;Ft.isDocumentKey(c)||(c=c.child(""));const d=new Di(new Ft(c),0);let m=new di(xe);return this.vr.forEachWhile(_=>{const v=_.key.path;return!!s.isPrefixOf(v)&&(v.length===u&&(m=m.add(_.br)),!0)},d),Dt.resolve(this.Mr(m))}Mr(t){const n=[];return t.forEach(s=>{const u=this.Cr(s);u!==null&&n.push(u)}),n}removeMutationBatch(t,n){We(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return Dt.forEach(n.mutations,u=>{const c=new Di(u.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,u.key)}).next(()=>{this.vr=s})}Bn(t){}containsKey(t,n){const s=new Di(n,0),u=this.vr.firstAfterOrEqual(s);return Dt.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(t){return this.mutationQueue.length,Dt.resolve()}Or(t,n){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){const n=this.Fr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(t){this.Nr=t,this.docs=function(){return new Ln(Ft.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,u=this.docs.get(s),c=u?u.size:0,d=this.Nr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return Dt.resolve(s?s.document.mutableCopy():ha.newInvalidDocument(n))}getEntries(t,n){let s=Do();return n.forEach(u=>{const c=this.docs.get(u);s=s.insert(u,c?c.document.mutableCopy():ha.newInvalidDocument(u))}),Dt.resolve(s)}getDocumentsMatchingQuery(t,n,s,u){let c=Do();const d=n.path,m=new Ft(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(m);for(;_.hasNext();){const{key:v,value:{document:b}}=_.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||rA(aA(b),s)<=0||(u.has(b.key)||G0(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return Dt.resolve(c)}getAllFromCollectionGroup(t,n,s,u){te()}Br(t,n){return Dt.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new O7(this)}getSize(t){return Dt.resolve(this.size)}}class O7 extends T7{constructor(t){super(),this.hr=t}applyChanges(t){const n=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?n.push(this.hr.addEntry(t,u)):this.hr.removeEntry(s)}),Dt.waitFor(n)}getFromCache(t,n){return this.hr.getEntry(t,n)}getAllFromCache(t,n){return this.hr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(t){this.persistence=t,this.Lr=new Hc(n=>iy(n),ay),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.kr=0,this.qr=new hy,this.targetCount=0,this.Qr=$h.qn()}forEachTarget(t,n){return this.Lr.forEach((s,u)=>n(u)),Dt.resolve()}getLastRemoteSnapshotVersion(t){return Dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Dt.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),Dt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.kr&&(this.kr=n),Dt.resolve()}Un(t){this.Lr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Qr=new $h(n),this.highestTargetId=n),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,n){return this.Un(n),this.targetCount+=1,Dt.resolve()}updateTargetData(t,n){return this.Un(n),Dt.resolve()}removeTargetData(t,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,Dt.resolve()}removeTargets(t,n,s){let u=0;const c=[];return this.Lr.forEach((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Lr.delete(d),c.push(this.removeMatchingKeysForTargetId(t,m.targetId)),u++)}),Dt.waitFor(c).next(()=>u)}getTargetCount(t){return Dt.resolve(this.targetCount)}getTargetData(t,n){const s=this.Lr.get(n)||null;return Dt.resolve(s)}addMatchingKeys(t,n,s){return this.qr.mr(n,s),Dt.resolve()}removeMatchingKeys(t,n,s){this.qr.pr(n,s);const u=this.persistence.referenceDelegate,c=[];return u&&n.forEach(d=>{c.push(u.markPotentiallyOrphaned(t,d))}),Dt.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this.qr.yr(n),Dt.resolve()}getMatchingKeysForTargetId(t,n){const s=this.qr.Sr(n);return Dt.resolve(s)}containsKey(t,n){return Dt.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(t,n){this.Kr={},this.overlays={},this.$r=new L0(0),this.Ur=!1,this.Ur=!0,this.Wr=new w7,this.referenceDelegate=t(this),this.Gr=new M7(this),this.indexManager=new p7,this.remoteDocumentCache=function(u){return new N7(u)}(s=>this.referenceDelegate.zr(s)),this.serializer=new g7(n),this.jr=new R7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new C7,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.Kr[t.toKey()];return s||(s=new D7(n,this.referenceDelegate),this.Kr[t.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,n,s){Bt("MemoryPersistence","Starting transaction:",t);const u=new x7(this.$r.next());return this.referenceDelegate.Hr(),s(u).next(c=>this.referenceDelegate.Jr(u).next(()=>c)).toPromise().then(c=>(u.raiseOnCommittedEvent(),c))}Yr(t,n){return Dt.or(Object.values(this.Kr).map(s=>()=>s.containsKey(t,n)))}}class x7 extends lA{constructor(t){super(),this.currentSequenceNumber=t}}class fy{constructor(t){this.persistence=t,this.Zr=new hy,this.Xr=null}static ei(t){return new fy(t)}get ti(){if(this.Xr)return this.Xr;throw te()}addReference(t,n,s){return this.Zr.addReference(s,n),this.ti.delete(s.toString()),Dt.resolve()}removeReference(t,n,s){return this.Zr.removeReference(s,n),this.ti.add(s.toString()),Dt.resolve()}markPotentiallyOrphaned(t,n){return this.ti.add(n.toString()),Dt.resolve()}removeTarget(t,n){this.Zr.yr(n.targetId).forEach(u=>this.ti.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(u=>{u.forEach(c=>this.ti.add(c.toString()))}).next(()=>s.removeTargetData(t,n))}Hr(){this.Xr=new Set}Jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dt.forEach(this.ti,s=>{const u=Ft.fromPath(s);return this.ni(t,u).next(c=>{c||n.removeEntry(u,ae.min())})}).next(()=>(this.Xr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ni(t,n).next(s=>{s?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(t){return 0}ni(t,n){return Dt.or([()=>Dt.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Yr(t,n)])}}class b0{constructor(t,n){this.persistence=t,this.ri=new Hc(s=>cA(s.path),(s,u)=>s.isEqual(u)),this.garbageCollector=S7(this,n)}static ei(t,n){return new b0(t,n)}Hr(){}Jr(t){return Dt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}Xn(t){const n=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(u=>s+u))}nr(t){let n=0;return this.er(t,s=>{n++}).next(()=>n)}er(t,n){return Dt.forEach(this.ri,(s,u)=>this.ir(t,s,u).next(c=>c?Dt.resolve():n(u)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const u=this.persistence.getRemoteDocumentCache(),c=u.newChangeBuffer();return u.Br(t,d=>this.ir(t,d,n).next(m=>{m||(s++,c.removeEntry(d,ae.min()))})).next(()=>c.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.ri.set(n,t.currentSequenceNumber),Dt.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.ri.set(s,t.currentSequenceNumber),Dt.resolve()}removeReference(t,n,s){return this.ri.set(s,t.currentSequenceNumber),Dt.resolve()}updateLimboDocument(t,n){return this.ri.set(n,t.currentSequenceNumber),Dt.resolve()}zr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=a0(t.data.value)),n}ir(t,n,s){return Dt.or([()=>this.persistence.Yr(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const u=this.ri.get(n);return Dt.resolve(u!==void 0&&u>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(t,n,s,u){this.targetId=t,this.fromCache=n,this.Wi=s,this.Gi=u}static zi(t,n){let s=De(),u=De();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:u=u.add(c.doc.key)}return new dy(t,n.fromCache,s,u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return pT()?8:oA(fa())>0?6:4}()}initialize(t,n){this.Zi=t,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(t,n,s,u){const c={result:null};return this.Xi(t,n).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.es(t,n,u,s).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new V7;return this.ts(t,n,d).next(m=>{if(c.result=m,this.Hi)return this.ns(t,n,d,m.size)})}).next(()=>c.result)}ns(t,n,s,u){return s.documentReadCount<this.Ji?(Bh()<=we.DEBUG&&Bt("QueryEngine","SDK will not create cache indexes for query:",Gh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),Dt.resolve()):(Bh()<=we.DEBUG&&Bt("QueryEngine","Query:",Gh(n),"scans",s.documentReadCount,"local documents and returns",u,"documents as results."),s.documentReadCount>this.Yi*u?(Bh()<=we.DEBUG&&Bt("QueryEngine","The SDK decides to create cache indexes for query:",Gh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,xl(n))):Dt.resolve())}Xi(t,n){if(Lv(n))return Dt.resolve(null);let s=xl(n);return this.indexManager.getIndexType(t,s).next(u=>u===0?null:(n.limit!==null&&u===1&&(n=T1(n,null,"F"),s=xl(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(c=>{const d=De(...c);return this.Zi.getDocuments(t,d).next(m=>this.indexManager.getMinOffset(t,s).next(_=>{const v=this.rs(n,m);return this.ss(n,v,d,_.readTime)?this.Xi(t,T1(n,null,"F")):this.os(t,v,n,_)}))})))}es(t,n,s,u){return Lv(n)||u.isEqual(ae.min())?Dt.resolve(null):this.Zi.getDocuments(t,s).next(c=>{const d=this.rs(n,c);return this.ss(n,d,s,u)?Dt.resolve(null):(Bh()<=we.DEBUG&&Bt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Gh(n)),this.os(t,d,n,iA(u,-1)).next(m=>m))})}rs(t,n){let s=new di(kE(t));return n.forEach((u,c)=>{G0(t,c)&&(s=s.add(c))}),s}ss(t,n,s,u){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(u)>0)}ts(t,n,s){return Bh()<=we.DEBUG&&Bt("QueryEngine","Using full collection scan to execute query:",Gh(n)),this.Zi.getDocumentsMatchingQuery(t,n,Vu.min(),s)}os(t,n,s,u){return this.Zi.getDocumentsMatchingQuery(t,s,u).next(c=>(n.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(t,n,s,u){this.persistence=t,this._s=n,this.serializer=u,this.us=new Ln(xe),this.cs=new Hc(c=>iy(c),ay),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(s)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new A7(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.us))}}function L7(a,t,n,s){return new I7(a,t,n,s)}async function u3(a,t){const n=se(a);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let u;return n.mutationQueue.getAllMutationBatches(s).next(c=>(u=c,n.Ps(t),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const d=[],m=[];let _=De();for(const v of u){d.push(v.batchId);for(const b of v.mutations)_=_.add(b.key)}for(const v of c){m.push(v.batchId);for(const b of v.mutations)_=_.add(b.key)}return n.localDocuments.getDocuments(s,_).next(v=>({Ts:v,removedBatchIds:d,addedBatchIds:m}))})})}function P7(a,t){const n=se(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=t.batch.keys(),c=n.hs.newChangeBuffer({trackRemovals:!0});return function(m,_,v,b){const R=v.batch,U=R.keys();let C=Dt.resolve();return U.forEach(O=>{C=C.next(()=>b.getEntry(_,O)).next(I=>{const z=v.docVersions.get(O);We(z!==null),I.version.compareTo(z)<0&&(R.applyToRemoteDocument(I,v),I.isValidDocument()&&(I.setReadTime(v.commitVersion),b.addEntry(I)))})}),C.next(()=>m.mutationQueue.removeMutationBatch(_,R))}(n,s,t,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,u,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let _=De();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(_=_.add(m.batch.mutations[v].key));return _}(t))).next(()=>n.localDocuments.getDocuments(s,u))})}function c3(a){const t=se(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Gr.getLastRemoteSnapshotVersion(n))}function z7(a,t){const n=se(a),s=t.snapshotVersion;let u=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=n.hs.newChangeBuffer({trackRemovals:!0});u=n.us;const m=[];t.targetChanges.forEach((b,R)=>{const U=u.get(R);if(!U)return;m.push(n.Gr.removeMatchingKeys(c,b.removedDocuments,R).next(()=>n.Gr.addMatchingKeys(c,b.addedDocuments,R)));let C=U.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(R)!==null?C=C.withResumeToken(qi.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):b.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(b.resumeToken,s)),u=u.insert(R,C),function(I,z,F){return I.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(U,C,b)&&m.push(n.Gr.updateTargetData(c,C))});let _=Do(),v=De();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))}),m.push(B7(c,d,t.documentUpdates).next(b=>{_=b.Is,v=b.ds})),!s.isEqual(ae.min())){const b=n.Gr.getLastRemoteSnapshotVersion(c).next(R=>n.Gr.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(b)}return Dt.waitFor(m).next(()=>d.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,_,v)).next(()=>_)}).then(c=>(n.us=u,c))}function B7(a,t,n){let s=De(),u=De();return n.forEach(c=>s=s.add(c)),t.getEntries(a,s).next(c=>{let d=Do();return n.forEach((m,_)=>{const v=c.get(m);_.isFoundDocument()!==v.isFoundDocument()&&(u=u.add(m)),_.isNoDocument()&&_.version.isEqual(ae.min())?(t.removeEntry(m,_.readTime),d=d.insert(m,_)):!v.isValidDocument()||_.version.compareTo(v.version)>0||_.version.compareTo(v.version)===0&&v.hasPendingWrites?(t.addEntry(_),d=d.insert(m,_)):Bt("LocalStore","Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",_.version)}),{Is:d,ds:u}})}function G7(a,t){const n=se(a);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function k7(a,t){const n=se(a);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return n.Gr.getTargetData(s,t).next(c=>c?(u=c,Dt.resolve(u)):n.Gr.allocateTargetId(s).next(d=>(u=new Ru(t,d,"TargetPurposeListen",s.currentSequenceNumber),n.Gr.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=n.us.get(s.targetId);return(u===null||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.us=n.us.insert(s.targetId,s),n.cs.set(t,s.targetId)),s})}async function w1(a,t,n){const s=se(a),u=s.us.get(t),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,d=>s.persistence.referenceDelegate.removeTarget(d,u))}catch(d){if(!of(d))throw d;Bt("LocalStore",`Failed to update sequence numbers for target ${t}: ${d}`)}s.us=s.us.remove(t),s.cs.delete(u.target)}function Qv(a,t,n){const s=se(a);let u=ae.min(),c=De();return s.persistence.runTransaction("Execute query","readwrite",d=>function(_,v,b){const R=se(_),U=R.cs.get(b);return U!==void 0?Dt.resolve(R.us.get(U)):R.Gr.getTargetData(v,b)}(s,d,xl(t)).next(m=>{if(m)return u=m.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(d,m.targetId).next(_=>{c=_})}).next(()=>s._s.getDocumentsMatchingQuery(d,t,n?u:ae.min(),n?c:De())).next(m=>(H7(s,DA(t),m),{documents:m,Es:c})))}function H7(a,t,n){let s=a.ls.get(t)||ae.min();n.forEach((u,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),a.ls.set(t,s)}class Xv{constructor(){this.activeTargetIds=UA()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class q7{constructor(){this._o=new Xv,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,n,s){this.ao[t]=n}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new Xv,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{uo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Bt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){Bt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zm=null;function n1(){return Zm===null?Zm=function(){return 268435456+Math.round(2147483648*Math.random())}():Zm++,"0x"+Zm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="WebChannelConnection";class Y7 extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+n.host,this.Mo=`projects/${u}/databases/${c}`,this.xo=this.databaseId.database==="(default)"?`project_id=${u}`:`project_id=${u}&database_id=${c}`}Oo(n,s,u,c,d){const m=n1(),_=this.No(n,s.toUriEncodedString());Bt("RestConnection",`Sending RPC '${n}' ${m}:`,_,u);const v={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(v,c,d),this.Lo(n,_,v,u).then(b=>(Bt("RestConnection",`Received RPC '${n}' ${m}: `,b),b),b=>{throw Xh("RestConnection",`RPC '${n}' ${m} failed with error: `,b,"url: ",_,"request:",u),b})}ko(n,s,u,c,d,m){return this.Oo(n,s,u,c,d)}Bo(n,s,u){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sf}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((c,d)=>n[d]=c),u&&u.headers.forEach((c,d)=>n[d]=c)}No(n,s){const u=F7[n];return`${this.Fo}/v1/${s}:${u}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Lo(t,n,s,u){const c=n1();return new Promise((d,m)=>{const _=new bE;_.setWithCredentials(!0),_.listenOnce(AE.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case i0.NO_ERROR:const b=_.getResponseJson();Bt(la,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(b)),d(b);break;case i0.TIMEOUT:Bt(la,`RPC '${t}' ${c} timed out`),m(new kt(Ot.DEADLINE_EXCEEDED,"Request time out"));break;case i0.HTTP_ERROR:const R=_.getStatus();if(Bt(la,`RPC '${t}' ${c} failed with status:`,R,"response text:",_.getResponseText()),R>0){let U=_.getResponseJson();Array.isArray(U)&&(U=U[0]);const C=U==null?void 0:U.error;if(C&&C.status&&C.message){const O=function(z){const F=z.toLowerCase().replace(/_/g,"-");return Object.values(Ot).indexOf(F)>=0?F:Ot.UNKNOWN}(C.status);m(new kt(O,C.message))}else m(new kt(Ot.UNKNOWN,"Server responded with status "+_.getStatus()))}else m(new kt(Ot.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{Bt(la,`RPC '${t}' ${c} completed.`)}});const v=JSON.stringify(u);Bt(la,`RPC '${t}' ${c} sending request:`,u),_.send(n,"POST",v,s,15)})}qo(t,n,s){const u=n1(),c=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=wE(),m=CE(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(_.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(_.useFetchStreams=!0),this.Bo(_.initMessageHeaders,n,s),_.encodeInitMessageHeaders=!0;const b=c.join("");Bt(la,`Creating RPC '${t}' stream ${u}: ${b}`,_);const R=d.createWebChannel(b,_);let U=!1,C=!1;const O=new K7({Eo:z=>{C?Bt(la,`Not sending because RPC '${t}' stream ${u} is closed:`,z):(U||(Bt(la,`Opening RPC '${t}' stream ${u} transport.`),R.open(),U=!0),Bt(la,`RPC '${t}' stream ${u} sending:`,z),R.send(z))},Ao:()=>R.close()}),I=(z,F,M)=>{z.listen(F,D=>{try{M(D)}catch(L){setTimeout(()=>{throw L},0)}})};return I(R,eg.EventType.OPEN,()=>{C||(Bt(la,`RPC '${t}' stream ${u} transport opened.`),O.So())}),I(R,eg.EventType.CLOSE,()=>{C||(C=!0,Bt(la,`RPC '${t}' stream ${u} transport closed`),O.Do())}),I(R,eg.EventType.ERROR,z=>{C||(C=!0,Xh(la,`RPC '${t}' stream ${u} transport errored:`,z),O.Do(new kt(Ot.UNAVAILABLE,"The operation could not be completed")))}),I(R,eg.EventType.MESSAGE,z=>{var F;if(!C){const M=z.data[0];We(!!M);const D=M,L=(D==null?void 0:D.error)||((F=D[0])===null||F===void 0?void 0:F.error);if(L){Bt(la,`RPC '${t}' stream ${u} received error:`,L);const H=L.status;let j=function(w){const V=li[w];if(V!==void 0)return JE(V)}(H),q=L.message;j===void 0&&(j=Ot.INTERNAL,q="Unknown error status: "+H+" with message "+L.message),C=!0,O.Do(new kt(j,q)),R.close()}else Bt(la,`RPC '${t}' stream ${u} received:`,M),O.vo(M)}}),I(m,RE.STAT_EVENT,z=>{z.stat===p1.PROXY?Bt(la,`RPC '${t}' stream ${u} detected buffering proxy`):z.stat===p1.NOPROXY&&Bt(la,`RPC '${t}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{O.bo()},0),O}}function i1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(a){return new t7(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(t,n,s=1e3,u=1.5,c=6e4){this.li=t,this.timerId=n,this.Qo=s,this.Ko=u,this.$o=c,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const n=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),u=Math.max(0,n-s);u>0&&Bt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,u,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(t,n,s,u,c,d,m,_){this.li=t,this.Yo=s,this.Zo=u,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=_,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new h3(t,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():n&&n.code===Ot.RESOURCE_EXHAUSTED?(wo(n.toString()),wo("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===Ot.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(n)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.Xo===n&&this.I_(s,u)},s=>{t(()=>{const u=new kt(Ot.UNKNOWN,"Fetching auth token failed: "+s.message);return this.d_(u)})})}I_(t,n){const s=this.T_(this.Xo);this.stream=this.E_(t,n),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(u=>{s(()=>this.d_(u))}),this.stream.onMessage(u=>{s(()=>++this.n_==1?this.A_(u):this.onNext(u))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(t){return Bt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return n=>{this.li.enqueueAndForget(()=>this.Xo===t?n():(Bt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Q7 extends f3{constructor(t,n,s,u,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,u,d),this.serializer=c}E_(t,n){return this.connection.qo("Listen",t,n)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();const n=i7(this.serializer,t),s=function(c){if(!("targetChange"in c))return ae.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?ae.min():d.readTime?Ul(d.readTime):ae.min()}(t);return this.listener.R_(n,s)}V_(t){const n={};n.database=C1(this.serializer),n.addTarget=function(c,d){let m;const _=d.target;if(m=E1(_)?{documents:s7(c,_)}:{query:l7(c,_).ct},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=e3(c,d.resumeToken);const v=b1(c,d.expectedCount);v!==null&&(m.expectedCount=v)}else if(d.snapshotVersion.compareTo(ae.min())>0){m.readTime=T0(c,d.snapshotVersion.toTimestamp());const v=b1(c,d.expectedCount);v!==null&&(m.expectedCount=v)}return m}(this.serializer,t);const s=u7(this.serializer,t);s&&(n.labels=s),this.c_(n)}m_(t){const n={};n.database=C1(this.serializer),n.removeTarget=t,this.c_(n)}}class X7 extends f3{constructor(t,n,s,u,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,u,d),this.serializer=c}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(t,n){return this.connection.qo("Write",t,n)}A_(t){return We(!!t.streamToken),this.lastStreamToken=t.streamToken,We(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){We(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const n=r7(t.writeResults,t.commitTime),s=Ul(t.commitTime);return this.listener.y_(s,n)}w_(){const t={};t.database=C1(this.serializer),this.c_(t)}g_(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>a7(this.serializer,s))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7 extends class{}{constructor(t,n,s,u){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=u,this.S_=!1}b_(){if(this.S_)throw new kt(Ot.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,n,s,u){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Oo(t,A1(n,s),u,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new kt(Ot.UNKNOWN,c.toString())})}ko(t,n,s,u,c){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.ko(t,A1(n,s),u,d,m,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new kt(Ot.UNKNOWN,d.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class W7{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(wo(n),this.C_=!1):Bt("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(t,n,s,u,c){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=c,this.Q_.uo(d=>{s.enqueueAndForget(async()=>{jc(this)&&(Bt("RemoteStore","Restarting streams for network reachability change."),await async function(_){const v=se(_);v.k_.add(4),await Ng(v),v.K_.set("Unknown"),v.k_.delete(4),await F0(v)}(this))})}),this.K_=new W7(s,u)}}async function F0(a){if(jc(a))for(const t of a.q_)await t(!0)}async function Ng(a){for(const t of a.q_)await t(!1)}function d3(a,t){const n=se(a);n.L_.has(t.targetId)||(n.L_.set(t.targetId,t),yy(n)?py(n):uf(n).s_()&&my(n,t))}function gy(a,t){const n=se(a),s=uf(n);n.L_.delete(t),s.s_()&&g3(n,t),n.L_.size===0&&(s.s_()?s.a_():jc(n)&&n.K_.set("Unknown"))}function my(a,t){if(a.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ae.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}uf(a).V_(t)}function g3(a,t){a.U_.xe(t),uf(a).m_(t)}function py(a){a.U_=new ZA({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>a.L_.get(t)||null,nt:()=>a.datastore.serializer.databaseId}),uf(a).start(),a.K_.F_()}function yy(a){return jc(a)&&!uf(a).i_()&&a.L_.size>0}function jc(a){return se(a).k_.size===0}function m3(a){a.U_=void 0}async function $7(a){a.K_.set("Online")}async function tR(a){a.L_.forEach((t,n)=>{my(a,t)})}async function eR(a,t){m3(a),yy(a)?(a.K_.O_(t),py(a)):a.K_.set("Unknown")}async function nR(a,t,n){if(a.K_.set("Online"),t instanceof t3&&t.state===2&&t.cause)try{await async function(u,c){const d=c.cause;for(const m of c.targetIds)u.L_.has(m)&&(await u.remoteSyncer.rejectListen(m,d),u.L_.delete(m),u.U_.removeTarget(m))}(a,t)}catch(s){Bt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),s),await A0(a,s)}else if(t instanceof l0?a.U_.$e(t):t instanceof $E?a.U_.Je(t):a.U_.Ge(t),!n.isEqual(ae.min()))try{const s=await c3(a.localStore);n.compareTo(s)>=0&&await function(c,d){const m=c.U_.it(d);return m.targetChanges.forEach((_,v)=>{if(_.resumeToken.approximateByteSize()>0){const b=c.L_.get(v);b&&c.L_.set(v,b.withResumeToken(_.resumeToken,d))}}),m.targetMismatches.forEach((_,v)=>{const b=c.L_.get(_);if(!b)return;c.L_.set(_,b.withResumeToken(qi.EMPTY_BYTE_STRING,b.snapshotVersion)),g3(c,_);const R=new Ru(b.target,_,v,b.sequenceNumber);my(c,R)}),c.remoteSyncer.applyRemoteEvent(m)}(a,n)}catch(s){Bt("RemoteStore","Failed to raise snapshot:",s),await A0(a,s)}}async function A0(a,t,n){if(!of(t))throw t;a.k_.add(1),await Ng(a),a.K_.set("Offline"),n||(n=()=>c3(a.localStore)),a.asyncQueue.enqueueRetryable(async()=>{Bt("RemoteStore","Retrying IndexedDB access"),await n(),a.k_.delete(1),await F0(a)})}function p3(a,t){return t().catch(n=>A0(a,n,t))}async function K0(a){const t=se(a),n=Pu(t);let s=t.B_.length>0?t.B_[t.B_.length-1].batchId:-1;for(;iR(t);)try{const u=await G7(t.localStore,s);if(u===null){t.B_.length===0&&n.a_();break}s=u.batchId,aR(t,u)}catch(u){await A0(t,u)}y3(t)&&_3(t)}function iR(a){return jc(a)&&a.B_.length<10}function aR(a,t){a.B_.push(t);const n=Pu(a);n.s_()&&n.f_&&n.g_(t.mutations)}function y3(a){return jc(a)&&!Pu(a).i_()&&a.B_.length>0}function _3(a){Pu(a).start()}async function rR(a){Pu(a).w_()}async function sR(a){const t=Pu(a);for(const n of a.B_)t.g_(n.mutations)}async function lR(a,t,n){const s=a.B_.shift(),u=oy.from(s,t,n);await p3(a,()=>a.remoteSyncer.applySuccessfulWrite(u)),await K0(a)}async function oR(a,t){t&&Pu(a).f_&&await async function(s,u){if(function(d){return YA(d)&&d!==Ot.ABORTED}(u.code)){const c=s.B_.shift();Pu(s).__(),await p3(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,u)),await K0(s)}}(a,t),y3(a)&&_3(a)}async function Wv(a,t){const n=se(a);n.asyncQueue.verifyOperationInProgress(),Bt("RemoteStore","RemoteStore received new credentials");const s=jc(n);n.k_.add(3),await Ng(n),s&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await F0(n)}async function uR(a,t){const n=se(a);t?(n.k_.delete(2),await F0(n)):t||(n.k_.add(2),await Ng(n),n.K_.set("Unknown"))}function uf(a){return a.W_||(a.W_=function(n,s,u){const c=se(n);return c.b_(),new Q7(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(a.datastore,a.asyncQueue,{Ro:$7.bind(null,a),mo:tR.bind(null,a),po:eR.bind(null,a),R_:nR.bind(null,a)}),a.q_.push(async t=>{t?(a.W_.__(),yy(a)?py(a):a.K_.set("Unknown")):(await a.W_.stop(),m3(a))})),a.W_}function Pu(a){return a.G_||(a.G_=function(n,s,u){const c=se(n);return c.b_(),new X7(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(a.datastore,a.asyncQueue,{Ro:()=>Promise.resolve(),mo:rR.bind(null,a),po:oR.bind(null,a),p_:sR.bind(null,a),y_:lR.bind(null,a)}),a.q_.push(async t=>{t?(a.G_.__(),await K0(a)):(await a.G_.stop(),a.B_.length>0&&(Bt("RemoteStore",`Stopping write stream with ${a.B_.length} pending writes`),a.B_=[]))})),a.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(t,n,s,u,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=u,this.removalCallback=c,this.deferred=new Ou,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,u,c){const d=Date.now()+s,m=new _y(t,n,d,u,c);return m.start(s),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new kt(Ot.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vy(a,t){if(wo("AsyncQueue",`${t}: ${a}`),of(a))return new kt(Ot.UNAVAILABLE,`${t}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{static emptySet(t){return new Yh(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||Ft.comparator(n.key,s.key):(n,s)=>Ft.comparator(n.key,s.key),this.keyedMap=ng(),this.sortedSet=new Ln(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Yh)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=s.getNext().key;if(!u.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Yh;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(){this.z_=new Ln(Ft.comparator)}track(t){const n=t.doc.key,s=this.z_.get(n);s?t.type!==0&&s.type===3?this.z_=this.z_.insert(n,t):t.type===3&&s.type!==1?this.z_=this.z_.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.z_=this.z_.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.z_=this.z_.remove(n):t.type===1&&s.type===2?this.z_=this.z_.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):te():this.z_=this.z_.insert(n,t)}j_(){const t=[];return this.z_.inorderTraversal((n,s)=>{t.push(s)}),t}}class tf{constructor(t,n,s,u,c,d,m,_,v){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=_,this.hasCachedResults=v}static fromInitialDocuments(t,n,s,u,c){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new tf(t,n,Yh.emptySet(n),d,s,u,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&B0(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==s[u].type||!n[u].doc.isEqual(s[u].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}}class hR{constructor(){this.queries=$v(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,s){const u=se(n),c=u.queries;u.queries=$v(),c.forEach((d,m)=>{for(const _ of m.J_)_.onError(s)})})(this,new kt(Ot.ABORTED,"Firestore shutting down"))}}function $v(){return new Hc(a=>GE(a),B0)}async function v3(a,t){const n=se(a);let s=3;const u=t.query;let c=n.queries.get(u);c?!c.Y_()&&t.Z_()&&(s=2):(c=new cR,s=t.Z_()?0:1);try{switch(s){case 0:c.H_=await n.onListen(u,!0);break;case 1:c.H_=await n.onListen(u,!1);break;case 2:await n.onFirstRemoteStoreListen(u)}}catch(d){const m=vy(d,`Initialization of query '${Gh(t.query)}' failed`);return void t.onError(m)}n.queries.set(u,c),c.J_.push(t),t.ea(n.onlineState),c.H_&&t.ta(c.H_)&&Ey(n)}async function E3(a,t){const n=se(a),s=t.query;let u=3;const c=n.queries.get(s);if(c){const d=c.J_.indexOf(t);d>=0&&(c.J_.splice(d,1),c.J_.length===0?u=t.Z_()?0:1:!c.Y_()&&t.Z_()&&(u=2))}switch(u){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function fR(a,t){const n=se(a);let s=!1;for(const u of t){const c=u.query,d=n.queries.get(c);if(d){for(const m of d.J_)m.ta(u)&&(s=!0);d.H_=u}}s&&Ey(n)}function dR(a,t,n){const s=se(a),u=s.queries.get(t);if(u)for(const c of u.J_)c.onError(n);s.queries.delete(t)}function Ey(a){a.X_.forEach(t=>{t.next()})}var D1,t4;(t4=D1||(D1={})).na="default",t4.Cache="cache";class S3{constructor(t,n,s){this.query=t,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(t){if(!this.options.includeMetadataChanges){const s=[];for(const u of t.docChanges)u.type!==3&&s.push(u);t=new tf(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ia?this.oa(t)&&(this.ra.next(t),n=!0):this._a(t,this.onlineState)&&(this.aa(t),n=!0),this.sa=t,n}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),n=!0),n}_a(t,n){if(!t.fromCache||!this.Z_())return!0;const s=n!=="Offline";return(!this.options.ua||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}oa(t){if(t.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(t){t=tf.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==D1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(t){this.key=t}}class b3{constructor(t){this.key=t}}class gR{constructor(t,n){this.query=t,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=De(),this.mutatedKeys=De(),this.Va=kE(t),this.ma=new Yh(this.Va)}get fa(){return this.Ea}ga(t,n){const s=n?n.pa:new Jv,u=n?n.ma:this.ma;let c=n?n.mutatedKeys:this.mutatedKeys,d=u,m=!1;const _=this.query.limitType==="F"&&u.size===this.query.limit?u.last():null,v=this.query.limitType==="L"&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal((b,R)=>{const U=u.get(b),C=G0(this.query,R)?R:null,O=!!U&&this.mutatedKeys.has(U.key),I=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let z=!1;U&&C?U.data.isEqual(C.data)?O!==I&&(s.track({type:3,doc:C}),z=!0):this.ya(U,C)||(s.track({type:2,doc:C}),z=!0,(_&&this.Va(C,_)>0||v&&this.Va(C,v)<0)&&(m=!0)):!U&&C?(s.track({type:0,doc:C}),z=!0):U&&!C&&(s.track({type:1,doc:U}),z=!0,(_||v)&&(m=!0)),z&&(C?(d=d.add(C),c=I?c.add(b):c.delete(b)):(d=d.delete(b),c=c.delete(b)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),c=c.delete(b.key),s.track({type:1,doc:b})}return{ma:d,pa:s,ss:m,mutatedKeys:c}}ya(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,u){const c=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;const d=t.pa.j_();d.sort((b,R)=>function(C,O){const I=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return I(C)-I(O)}(b.type,R.type)||this.Va(b.doc,R.doc)),this.wa(s),u=u!=null&&u;const m=n&&!u?this.Sa():[],_=this.Ra.size===0&&this.current&&!u?1:0,v=_!==this.Aa;return this.Aa=_,d.length!==0||v?{snapshot:new tf(this.query,t.ma,c,d,t.mutatedKeys,_===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:m}:{ba:m}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Jv,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.Ea.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=t.current)}Sa(){if(!this.current)return[];const t=this.Ra;this.Ra=De(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const n=[];return t.forEach(s=>{this.Ra.has(s)||n.push(new b3(s))}),this.Ra.forEach(s=>{t.has(s)||n.push(new T3(s))}),n}va(t){this.Ea=t.Es,this.Ra=De();const n=this.ga(t.documents);return this.applyChanges(n,!0)}Ca(){return tf.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class mR{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class pR{constructor(t){this.key=t,this.Fa=!1}}class yR{constructor(t,n,s,u,c,d){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=u,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Ma={},this.xa=new Hc(m=>GE(m),B0),this.Oa=new Map,this.Na=new Set,this.Ba=new Ln(Ft.comparator),this.La=new Map,this.ka=new hy,this.qa={},this.Qa=new Map,this.Ka=$h.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function _R(a,t,n=!0){const s=N3(a);let u;const c=s.xa.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),u=c.view.Ca()):u=await A3(s,t,n,!0),u}async function vR(a,t){const n=N3(a);await A3(n,t,!0,!1)}async function A3(a,t,n,s){const u=await k7(a.localStore,xl(t)),c=u.targetId,d=a.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await ER(a,t,c,d==="current",u.resumeToken)),a.isPrimaryClient&&n&&d3(a.remoteStore,u),m}async function ER(a,t,n,s,u){a.Ua=(R,U,C)=>async function(I,z,F,M){let D=z.view.ga(F);D.ss&&(D=await Qv(I.localStore,z.query,!1).then(({documents:q})=>z.view.ga(q,D)));const L=M&&M.targetChanges.get(z.targetId),H=M&&M.targetMismatches.get(z.targetId)!=null,j=z.view.applyChanges(D,I.isPrimaryClient,L,H);return n4(I,z.targetId,j.ba),j.snapshot}(a,R,U,C);const c=await Qv(a.localStore,t,!0),d=new gR(t,c.Es),m=d.ga(c.documents),_=Dg.createSynthesizedTargetChangeForCurrentChange(n,s&&a.onlineState!=="Offline",u),v=d.applyChanges(m,a.isPrimaryClient,_);n4(a,n,v.ba);const b=new mR(t,n,d);return a.xa.set(t,b),a.Oa.has(n)?a.Oa.get(n).push(t):a.Oa.set(n,[t]),v.snapshot}async function SR(a,t,n){const s=se(a),u=s.xa.get(t),c=s.Oa.get(u.targetId);if(c.length>1)return s.Oa.set(u.targetId,c.filter(d=>!B0(d,t))),void s.xa.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(u.targetId),s.sharedClientState.isActiveQueryTarget(u.targetId)||await w1(s.localStore,u.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(u.targetId),n&&gy(s.remoteStore,u.targetId),N1(s,u.targetId)}).catch(lf)):(N1(s,u.targetId),await w1(s.localStore,u.targetId,!0))}async function TR(a,t){const n=se(a),s=n.xa.get(t),u=n.Oa.get(s.targetId);n.isPrimaryClient&&u.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),gy(n.remoteStore,s.targetId))}async function bR(a,t,n){const s=OR(a);try{const u=await function(d,m){const _=se(d),v=fi.now(),b=m.reduce((C,O)=>C.add(O.key),De());let R,U;return _.persistence.runTransaction("Locally write mutations","readwrite",C=>{let O=Do(),I=De();return _.hs.getEntries(C,b).next(z=>{O=z,O.forEach((F,M)=>{M.isValidDocument()||(I=I.add(F))})}).next(()=>_.localDocuments.getOverlayedDocuments(C,O)).next(z=>{R=z;const F=[];for(const M of m){const D=HA(M,R.get(M.key).overlayedDocument);D!=null&&F.push(new qc(M.key,D,xE(D.value.mapValue),Vl.exists(!0)))}return _.mutationQueue.addMutationBatch(C,v,F,m)}).next(z=>{U=z;const F=z.applyToLocalDocumentSet(R,I);return _.documentOverlayCache.saveOverlays(C,z.batchId,F)})}).then(()=>({batchId:U.batchId,changes:qE(R)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(u.batchId),function(d,m,_){let v=d.qa[d.currentUser.toKey()];v||(v=new Ln(xe)),v=v.insert(m,_),d.qa[d.currentUser.toKey()]=v}(s,u.batchId,n),await Og(s,u.changes),await K0(s.remoteStore)}catch(u){const c=vy(u,"Failed to persist write");n.reject(c)}}async function R3(a,t){const n=se(a);try{const s=await z7(n.localStore,t);t.targetChanges.forEach((u,c)=>{const d=n.La.get(c);d&&(We(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?d.Fa=!0:u.modifiedDocuments.size>0?We(d.Fa):u.removedDocuments.size>0&&(We(d.Fa),d.Fa=!1))}),await Og(n,s,t)}catch(s){await lf(s)}}function e4(a,t,n){const s=se(a);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const u=[];s.xa.forEach((c,d)=>{const m=d.view.ea(t);m.snapshot&&u.push(m.snapshot)}),function(d,m){const _=se(d);_.onlineState=m;let v=!1;_.queries.forEach((b,R)=>{for(const U of R.J_)U.ea(m)&&(v=!0)}),v&&Ey(_)}(s.eventManager,t),u.length&&s.Ma.R_(u),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function AR(a,t,n){const s=se(a);s.sharedClientState.updateQueryState(t,"rejected",n);const u=s.La.get(t),c=u&&u.key;if(c){let d=new Ln(Ft.comparator);d=d.insert(c,ha.newNoDocument(c,ae.min()));const m=De().add(c),_=new q0(ae.min(),new Map,new Ln(xe),d,m);await R3(s,_),s.Ba=s.Ba.remove(c),s.La.delete(t),Sy(s)}else await w1(s.localStore,t,!1).then(()=>N1(s,t,n)).catch(lf)}async function RR(a,t){const n=se(a),s=t.batch.batchId;try{const u=await P7(n.localStore,t);w3(n,s,null),C3(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Og(n,u)}catch(u){await lf(u)}}async function CR(a,t,n){const s=se(a);try{const u=await function(d,m){const _=se(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let b;return _.mutationQueue.lookupMutationBatch(v,m).next(R=>(We(R!==null),b=R.keys(),_.mutationQueue.removeMutationBatch(v,R))).next(()=>_.mutationQueue.performConsistencyCheck(v)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(v,b,m)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,b)).next(()=>_.localDocuments.getDocuments(v,b))})}(s.localStore,t);w3(s,t,n),C3(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Og(s,u)}catch(u){await lf(u)}}function C3(a,t){(a.Qa.get(t)||[]).forEach(n=>{n.resolve()}),a.Qa.delete(t)}function w3(a,t,n){const s=se(a);let u=s.qa[s.currentUser.toKey()];if(u){const c=u.get(t);c&&(n?c.reject(n):c.resolve(),u=u.remove(t)),s.qa[s.currentUser.toKey()]=u}}function N1(a,t,n=null){a.sharedClientState.removeLocalQueryTarget(t);for(const s of a.Oa.get(t))a.xa.delete(s),n&&a.Ma.Wa(s,n);a.Oa.delete(t),a.isPrimaryClient&&a.ka.yr(t).forEach(s=>{a.ka.containsKey(s)||D3(a,s)})}function D3(a,t){a.Na.delete(t.path.canonicalString());const n=a.Ba.get(t);n!==null&&(gy(a.remoteStore,n),a.Ba=a.Ba.remove(t),a.La.delete(n),Sy(a))}function n4(a,t,n){for(const s of n)s instanceof T3?(a.ka.addReference(s.key,t),wR(a,s)):s instanceof b3?(Bt("SyncEngine","Document no longer in limbo: "+s.key),a.ka.removeReference(s.key,t),a.ka.containsKey(s.key)||D3(a,s.key)):te()}function wR(a,t){const n=t.key,s=n.path.canonicalString();a.Ba.get(n)||a.Na.has(s)||(Bt("SyncEngine","New document in limbo: "+n),a.Na.add(s),Sy(a))}function Sy(a){for(;a.Na.size>0&&a.Ba.size<a.maxConcurrentLimboResolutions;){const t=a.Na.values().next().value;a.Na.delete(t);const n=new Ft(En.fromString(t)),s=a.Ka.next();a.La.set(s,new pR(n)),a.Ba=a.Ba.insert(n,s),d3(a.remoteStore,new Ru(xl(ry(n.path)),s,"TargetPurposeLimboResolution",L0.oe))}}async function Og(a,t,n){const s=se(a),u=[],c=[],d=[];s.xa.isEmpty()||(s.xa.forEach((m,_)=>{d.push(s.Ua(_,t,n).then(v=>{var b;if((v||n)&&s.isPrimaryClient){const R=v?!v.fromCache:(b=n==null?void 0:n.targetChanges.get(_.targetId))===null||b===void 0?void 0:b.current;s.sharedClientState.updateQueryState(_.targetId,R?"current":"not-current")}if(v){u.push(v);const R=dy.zi(_.targetId,v);c.push(R)}}))}),await Promise.all(d),s.Ma.R_(u),await async function(_,v){const b=se(_);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>Dt.forEach(v,U=>Dt.forEach(U.Wi,C=>b.persistence.referenceDelegate.addReference(R,U.targetId,C)).next(()=>Dt.forEach(U.Gi,C=>b.persistence.referenceDelegate.removeReference(R,U.targetId,C)))))}catch(R){if(!of(R))throw R;Bt("LocalStore","Failed to update sequence numbers: "+R)}for(const R of v){const U=R.targetId;if(!R.fromCache){const C=b.us.get(U),O=C.snapshotVersion,I=C.withLastLimboFreeSnapshotVersion(O);b.us=b.us.insert(U,I)}}}(s.localStore,c))}async function DR(a,t){const n=se(a);if(!n.currentUser.isEqual(t)){Bt("SyncEngine","User change. New user:",t.toKey());const s=await u3(n.localStore,t);n.currentUser=t,function(c,d){c.Qa.forEach(m=>{m.forEach(_=>{_.reject(new kt(Ot.CANCELLED,d))})}),c.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Og(n,s.Ts)}}function NR(a,t){const n=se(a),s=n.La.get(t);if(s&&s.Fa)return De().add(s.key);{let u=De();const c=n.Oa.get(t);if(!c)return u;for(const d of c){const m=n.xa.get(d);u=u.unionWith(m.view.fa)}return u}}function N3(a){const t=se(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=R3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=NR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=AR.bind(null,t),t.Ma.R_=fR.bind(null,t.eventManager),t.Ma.Wa=dR.bind(null,t.eventManager),t}function OR(a){const t=se(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=RR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=CR.bind(null,t),t}class R0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=j0(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,n){return null}Ya(t,n){return null}Ha(t){return L7(this.persistence,new U7,t.initialUser,this.serializer)}ja(t){return new o3(fy.ei,this.serializer)}za(t){return new q7}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}R0.provider={build:()=>new R0};class MR extends R0{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,n){We(this.persistence.referenceDelegate instanceof b0);const s=this.persistence.referenceDelegate.garbageCollector;return new v7(s,t.asyncQueue,n)}ja(t){const n=this.cacheSizeBytes!==void 0?tr.withCacheSize(this.cacheSizeBytes):tr.DEFAULT;return new o3(s=>b0.ei(s,n),this.serializer)}}class O1{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>e4(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=DR.bind(null,this.syncEngine),await uR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new hR}()}createDatastore(t){const n=j0(t.databaseInfo.databaseId),s=function(c){return new Y7(c)}(t.databaseInfo);return function(c,d,m,_){return new Z7(c,d,m,_)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,u,c,d,m){return new J7(s,u,c,d,m)}(this.localStore,this.datastore,t.asyncQueue,n=>e4(this.syncEngine,n,0),function(){return Zv.p()?new Zv:new j7}())}createSyncEngine(t,n){return function(u,c,d,m,_,v,b){const R=new yR(u,c,d,m,_,v);return b&&(R.$a=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(u){const c=se(u);Bt("RemoteStore","RemoteStore shutting down."),c.k_.add(5),await Ng(c),c.Q_.shutdown(),c.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}O1.provider={build:()=>new O1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):wo("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(t,n,s,u,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=u,this.user=ca.UNAUTHENTICATED,this.clientId=NE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async d=>{Bt("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(Bt("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ou;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=vy(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function a1(a,t){a.asyncQueue.verifyOperationInProgress(),Bt("FirestoreClient","Initializing OfflineComponentProvider");const n=a.configuration;await t.initialize(n);let s=n.initialUser;a.setCredentialChangeListener(async u=>{s.isEqual(u)||(await u3(t.localStore,u),s=u)}),t.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=t}async function i4(a,t){a.asyncQueue.verifyOperationInProgress();const n=await VR(a);Bt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,a.configuration),a.setCredentialChangeListener(s=>Wv(t.remoteStore,s)),a.setAppCheckTokenChangeListener((s,u)=>Wv(t.remoteStore,u)),a._onlineComponents=t}async function VR(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){Bt("FirestoreClient","Using user provided OfflineComponentProvider");try{await a1(a,a._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(u){return u.name==="FirebaseError"?u.code===Ot.FAILED_PRECONDITION||u.code===Ot.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11}(n))throw n;Xh("Error using user provided cache. Falling back to memory cache: "+n),await a1(a,new R0)}}else Bt("FirestoreClient","Using default OfflineComponentProvider"),await a1(a,new MR(void 0));return a._offlineComponents}async function M3(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(Bt("FirestoreClient","Using user provided OnlineComponentProvider"),await i4(a,a._uninitializedComponentsProvider._online)):(Bt("FirestoreClient","Using default OnlineComponentProvider"),await i4(a,new O1))),a._onlineComponents}function UR(a){return M3(a).then(t=>t.syncEngine)}async function M1(a){const t=await M3(a),n=t.eventManager;return n.onListen=_R.bind(null,t.syncEngine),n.onUnlisten=SR.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=vR.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=TR.bind(null,t.syncEngine),n}function IR(a,t,n={}){const s=new Ou;return a.asyncQueue.enqueueAndForget(async()=>function(c,d,m,_,v){const b=new O3({next:U=>{b.eu(),d.enqueueAndForget(()=>E3(c,R)),U.fromCache&&_.source==="server"?v.reject(new kt(Ot.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(U)},error:U=>v.reject(U)}),R=new S3(m,b,{includeMetadataChanges:!0,ua:!0});return v3(c,R)}(await M1(a),a.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(a){const t={};return a.timeoutSeconds!==void 0&&(t.timeoutSeconds=a.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(a,t,n){if(!n)throw new kt(Ot.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function LR(a,t,n,s){if(t===!0&&s===!0)throw new kt(Ot.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function r4(a){if(!Ft.isDocumentKey(a))throw new kt(Ot.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function s4(a){if(Ft.isDocumentKey(a))throw new kt(Ot.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function Y0(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(a);return t?`a custom ${t} object`:"an object"}}return typeof a=="function"?"a function":te()}function Mu(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new kt(Ot.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Y0(a);throw new kt(Ot.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(t){var n,s;if(t.host===void 0){if(t.ssl!==void 0)throw new kt(Ot.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new kt(Ot.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}LR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x3((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new kt(Ot.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new kt(Ot.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new kt(Ot.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,u){return s.timeoutSeconds===u.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Q0{constructor(t,n,s,u){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l4({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new kt(Ot.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new kt(Ot.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l4(t),t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Qb;switch(s.type){case"firstParty":return new Jb(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new kt(Ot.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=a4.get(n);s&&(Bt("ComponentProvider","Removing Datastore"),a4.delete(n),s.terminate())}(this),Promise.resolve()}}function PR(a,t,n,s={}){var u;const c=(a=Mu(a,Q0))._getSettings(),d=`${t}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==d&&Xh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},c),{host:d,ssl:!1})),s.mockUserToken){let m,_;if(typeof s.mockUserToken=="string")m=s.mockUserToken,_=ca.MOCK_USER;else{m=uT(s.mockUserToken,(u=a._app)===null||u===void 0?void 0:u.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new kt(Ot.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new ca(v)}a._authCredentials=new Xb(new DE(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Fc(this.firestore,t,this._query)}}class Sr{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Sr(this.firestore,t,this._key)}}class xu extends Fc{constructor(t,n,s){super(t,n,ry(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Sr(this.firestore,null,new Ft(t))}withConverter(t){return new xu(this.firestore,t,this._path)}}function o4(a,t,...n){if(a=da(a),V3("collection","path",t),a instanceof Q0){const s=En.fromString(t,...n);return s4(s),new xu(a,null,s)}{if(!(a instanceof Sr||a instanceof xu))throw new kt(Ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(En.fromString(t,...n));return s4(s),new xu(a.firestore,null,s)}}function zR(a,t,...n){if(a=da(a),arguments.length===1&&(t=NE.newId()),V3("doc","path",t),a instanceof Q0){const s=En.fromString(t,...n);return r4(s),new Sr(a,null,new Ft(s))}{if(!(a instanceof Sr||a instanceof xu))throw new kt(Ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(En.fromString(t,...n));return r4(s),new Sr(a.firestore,a instanceof xu?a.converter:null,new Ft(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(t=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new h3(this,"async_queue_retry"),this.fu=()=>{const s=i1();s&&Bt("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=t;const n=i1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.du){this.du=!0,this.Vu=t||!1;const n=i1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.du)return new Promise(()=>{});const n=new Ou;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!of(t))throw t;Bt("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const n=this.gu.then(()=>(this.Ru=!0,t().catch(s=>{this.Au=s,this.Ru=!1;const u=function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),m}(s);throw wo("INTERNAL UNHANDLED ERROR: ",u),s}).then(s=>(this.Ru=!1,s))));return this.gu=n,n}enqueueAfterDelay(t,n,s){this.pu(),this.mu.indexOf(t)>-1&&(n=0);const u=_y.createAndSchedule(this,t,n,s,c=>this.Su(c));return this.Eu.push(u),u}pu(){this.Au&&te()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const n of this.Eu)if(n.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.Eu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const n=this.Eu.indexOf(t);this.Eu.splice(n,1)}}function c4(a){return function(n,s){if(typeof n!="object"||n===null)return!1;const u=n;for(const c of s)if(c in u&&typeof u[c]=="function")return!0;return!1}(a,["next","error","complete"])}class ef extends Q0{constructor(t,n,s,u){super(t,n,s,u),this.type="firestore",this._queue=new u4,this._persistenceKey=(u==null?void 0:u.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new u4(t),this._firestoreClient=void 0,await t}}}function U3(a,t){const n=typeof a=="object"?a:P4(),s=typeof a=="string"?a:"(default)",u=j1(n,"firestore").getImmediate({identifier:s});if(!u._initialized){const c=lT("firestore");c&&PR(u,...c)}return u}function Ty(a){if(a._terminated)throw new kt(Ot.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||BR(a),a._firestoreClient}function BR(a){var t,n,s;const u=a._freezeSettings(),c=function(m,_,v,b){return new dA(m,_,v,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,x3(b.experimentalLongPollingOptions),b.useFetchStreams)}(a._databaseId,((t=a._app)===null||t===void 0?void 0:t.options.appId)||"",a._persistenceKey,u);a._componentsProvider||!((n=u.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=u.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(a._componentsProvider={_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider}),a._firestoreClient=new xR(a._authCredentials,a._appCheckCredentials,a._queue,c,a._componentsProvider&&function(m){const _=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(_),_online:_}}(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(t){this._byteString=t}static fromBase64String(t){try{return new nf(qi.fromBase64String(t))}catch(n){throw new kt(Ot.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new nf(qi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new kt(Ot.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new kt(Ot.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new kt(Ot.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return xe(this._lat,t._lat)||xe(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,u){if(s.length!==u.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==u[c])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=/^__.*__$/;class kR{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new qc(t,this.data,this.fieldMask,n,this.fieldTransforms):new wg(t,this.data,n,this.fieldTransforms)}}function I3(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class wy{constructor(t,n,s,u,c,d){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=u,c===void 0&&this.Fu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new wy(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),u=this.xu({path:s,Nu:!1});return u.Bu(t),u}Lu(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),u=this.xu({path:s,Nu:!1});return u.Fu(),u}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return C0(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Bu(this.path.get(t))}Bu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(I3(this.Mu)&&GR.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class HR{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||j0(t)}$u(t,n,s,u=!1){return new wy({Mu:t,methodName:n,Ku:s,path:Hi.emptyPath(),Nu:!1,Qu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function L3(a){const t=a._freezeSettings(),n=j0(a._databaseId);return new HR(a._databaseId,!!t.ignoreUndefinedProperties,n)}function qR(a,t,n,s,u,c={}){const d=a.$u(c.merge||c.mergeFields?2:0,t,n,u);B3("Data must be an object, but it was:",d,s);const m=P3(s,d);let _,v;if(c.merge)_=new Us(d.fieldMask),v=d.fieldTransforms;else if(c.mergeFields){const b=[];for(const R of c.mergeFields){const U=FR(t,R,n);if(!d.contains(U))throw new kt(Ot.INVALID_ARGUMENT,`Field '${U}' is specified in your field mask but missing from your input data.`);YR(b,U)||b.push(U)}_=new Us(b),v=d.fieldTransforms.filter(R=>_.covers(R.field))}else _=null,v=d.fieldTransforms;return new kR(new Fr(m),_,v)}class Dy extends Ay{_toFieldTransform(t){return new zA(t.path,new yg)}isEqual(t){return t instanceof Dy}}function jR(a,t,n,s=!1){return Ny(n,a.$u(s?4:3,t))}function Ny(a,t){if(z3(a=da(a)))return B3("Unsupported field value:",t,a),P3(a,t);if(a instanceof Ay)return function(s,u){if(!I3(u.Mu))throw u.qu(`${s._methodName}() can only be used with update() and set()`);if(!u.path)throw u.qu(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(u);c&&u.fieldTransforms.push(c)}(a,t),null;if(a===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(s,u){const c=[];let d=0;for(const m of s){let _=Ny(m,u.ku(d));_==null&&(_={nullValue:"NULL_VALUE"}),c.push(_),d++}return{arrayValue:{values:c}}}(a,t)}return function(s,u){if((s=da(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return IA(u.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=fi.fromDate(s);return{timestampValue:T0(u.serializer,c)}}if(s instanceof fi){const c=new fi(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:T0(u.serializer,c)}}if(s instanceof Ry)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof nf)return{bytesValue:e3(u.serializer,s._byteString)};if(s instanceof Sr){const c=u.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw u.qu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:cy(s.firestore._databaseId||u.databaseId,s._key.path)}}if(s instanceof Cy)return function(d,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map(_=>{if(typeof _!="number")throw m.qu("VectorValues must only contain numeric values.");return sy(m.serializer,_)})}}}}}}(s,u);throw u.qu(`Unsupported field value: ${Y0(s)}`)}(a,t)}function P3(a,t){const n={};return OE(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):kc(a,(s,u)=>{const c=Ny(u,t.Ou(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function z3(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof fi||a instanceof Ry||a instanceof nf||a instanceof Sr||a instanceof Ay||a instanceof Cy)}function B3(a,t,n){if(!z3(n)||!function(u){return typeof u=="object"&&u!==null&&(Object.getPrototypeOf(u)===Object.prototype||Object.getPrototypeOf(u)===null)}(n)){const s=Y0(n);throw s==="an object"?t.qu(a+" a custom object"):t.qu(a+" "+s)}}function FR(a,t,n){if((t=da(t))instanceof by)return t._internalPath;if(typeof t=="string")return G3(a,t);throw C0("Field path arguments must be of type string or ",a,!1,void 0,n)}const KR=new RegExp("[~\\*/\\[\\]]");function G3(a,t,n){if(t.search(KR)>=0)throw C0(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new by(...t.split("."))._internalPath}catch{throw C0(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function C0(a,t,n,s,u){const c=s&&!s.isEmpty(),d=u!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let _="";return(c||d)&&(_+=" (found",c&&(_+=` in field ${s}`),d&&(_+=` in document ${u}`),_+=")"),new kt(Ot.INVALID_ARGUMENT,m+a+_)}function YR(a,t){return a.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(t,n,s,u,c){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=u,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Sr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new QR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Oy("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QR extends k3{data(){return super.data()}}function Oy(a,t){return typeof t=="string"?G3(a,t):t instanceof by?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new kt(Ot.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class My{}class XR extends My{}function h4(a,t,...n){let s=[];t instanceof My&&s.push(t),s=s.concat(n),function(c){const d=c.filter(_=>_ instanceof xy).length,m=c.filter(_=>_ instanceof X0).length;if(d>1||d>0&&m>0)throw new kt(Ot.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)a=u._apply(a);return a}class X0 extends XR{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new X0(t,n,s)}_apply(t){const n=this._parse(t);return q3(t._query,n),new Fc(t.firestore,t.converter,S1(t._query,n))}_parse(t){const n=L3(t.firestore);return function(c,d,m,_,v,b,R){let U;if(v.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new kt(Ot.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){d4(R,b);const C=[];for(const O of R)C.push(f4(_,c,O));U={arrayValue:{values:C}}}else U=f4(_,c,R)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||d4(R,b),U=jR(m,d,R,b==="in"||b==="not-in");return oi.create(v,b,U)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Wm(a,t,n){const s=t,u=Oy("where",a);return X0._create(u,s,n)}class xy extends My{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new xy(t,n)}_parse(t){const n=this._queryConstraints.map(s=>s._parse(t)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Ls.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(u,c){let d=u;const m=c.getFlattenedFilters();for(const _ of m)q3(d,_),d=S1(d,_)}(t._query,n),new Fc(t.firestore,t.converter,S1(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function f4(a,t,n){if(typeof(n=da(n))=="string"){if(n==="")throw new kt(Ot.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BE(t)&&n.indexOf("/")!==-1)throw new kt(Ot.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(En.fromString(n));if(!Ft.isDocumentKey(s))throw new kt(Ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ov(a,new Ft(s))}if(n instanceof Sr)return Ov(a,n._key);throw new kt(Ot.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Y0(n)}.`)}function d4(a,t){if(!Array.isArray(a)||a.length===0)throw new kt(Ot.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function q3(a,t){const n=function(u,c){for(const d of u)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(a.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new kt(Ot.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new kt(Ot.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class ZR{convertValue(t,n="none"){switch(Lu(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ti(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Iu(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw te()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return kc(t,(u,c)=>{s[u]=this.convertValue(c,n)}),s}convertVectorValue(t){var n,s,u;const c=(u=(s=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||u===void 0?void 0:u.map(d=>ti(d.doubleValue));return new Cy(c)}convertGeoPoint(t){return new Ry(ti(t.latitude),ti(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=z0(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(gg(t));default:return null}}convertTimestamp(t){const n=Uu(t);return new fi(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=En.fromString(t);We(l3(s));const u=new mg(s.get(1),s.get(3)),c=new Ft(s.popFirst(5));return u.isEqual(n)||wo(`Document ${c} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(a,t,n){let s;return s=a?a.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class j3 extends k3{constructor(t,n,s,u,c,d){super(t,n,s,u,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new o0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(Oy("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class o0 extends j3{data(t={}){return super.data(t)}}class F3{constructor(t,n,s,u){this._firestore=t,this._userDataWriter=n,this._snapshot=u,this.metadata=new ag(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new o0(this._firestore,this._userDataWriter,s.key,s,new ag(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new kt(Ot.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,c){if(u._snapshot.oldDocs.isEmpty()){let d=0;return u._snapshot.docChanges.map(m=>{const _=new o0(u._firestore,u._userDataWriter,m.doc.key,m.doc,new ag(u._snapshot.mutatedKeys.has(m.doc.key),u._snapshot.fromCache),u.query.converter);return m.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}})}{let d=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const _=new o0(u._firestore,u._userDataWriter,m.doc.key,m.doc,new ag(u._snapshot.mutatedKeys.has(m.doc.key),u._snapshot.fromCache),u.query.converter);let v=-1,b=-1;return m.type!==0&&(v=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),b=d.indexOf(m.doc.key)),{type:JR(m.type),doc:_,oldIndex:v,newIndex:b}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function JR(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}class Vy extends ZR{constructor(t){super(),this.firestore=t}convertBytes(t){return new nf(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Sr(this.firestore,null,n)}}function g4(a){a=Mu(a,Fc);const t=Mu(a.firestore,ef),n=Ty(t),s=new Vy(t);return H3(a._query),IR(n,a._query).then(u=>new F3(t,s,a,u))}function $R(a){return K3(Mu(a.firestore,ef),[new ly(a._key,Vl.none())])}function tC(a,t){const n=Mu(a.firestore,ef),s=zR(a),u=WR(a.converter,t);return K3(n,[qR(L3(a.firestore),"addDoc",s._key,u,a.converter!==null,{}).toMutation(s._key,Vl.exists(!1))]).then(()=>s)}function eC(a,...t){var n,s,u;a=da(a);let c={includeMetadataChanges:!1,source:"default"},d=0;typeof t[d]!="object"||c4(t[d])||(c=t[d],d++);const m={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(c4(t[d])){const R=t[d];t[d]=(n=R.next)===null||n===void 0?void 0:n.bind(R),t[d+1]=(s=R.error)===null||s===void 0?void 0:s.bind(R),t[d+2]=(u=R.complete)===null||u===void 0?void 0:u.bind(R)}let _,v,b;if(a instanceof Sr)v=Mu(a.firestore,ef),b=ry(a._key.path),_={next:R=>{t[d]&&t[d](nC(v,a,R))},error:t[d+1],complete:t[d+2]};else{const R=Mu(a,Fc);v=Mu(R.firestore,ef),b=R._query;const U=new Vy(v);_={next:C=>{t[d]&&t[d](new F3(v,U,R,C))},error:t[d+1],complete:t[d+2]},H3(a._query)}return function(U,C,O,I){const z=new O3(I),F=new S3(C,z,O);return U.asyncQueue.enqueueAndForget(async()=>v3(await M1(U),F)),()=>{z.eu(),U.asyncQueue.enqueueAndForget(async()=>E3(await M1(U),F))}}(Ty(v),b,m,_)}function K3(a,t){return function(s,u){const c=new Ou;return s.asyncQueue.enqueueAndForget(async()=>bR(await UR(s),u,c)),c.promise}(Ty(a),t)}function nC(a,t,n){const s=n.docs.get(t._key),u=new Vy(a);return new j3(a,u,t._key,s,new ag(n.hasPendingWrites,n.fromCache),t.converter)}function iC(){return new Dy("serverTimestamp")}(function(t,n=!0){(function(u){sf=u})(af),Qh(new Lc("firestore",(s,{instanceIdentifier:u,options:c})=>{const d=s.getProvider("app").getImmediate(),m=new ef(new Zb(s.getProvider("auth-internal")),new tA(s.getProvider("app-check-internal")),function(v,b){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new kt(Ot.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mg(v.options.projectId,b)}(d,u),d);return c=Object.assign({useFetchStreams:n},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Du(Av,"4.7.6",t),Du(Av,"4.7.6","esm2017")})();const aC={apiKey:"AIzaSyC2TPUyNqYDP-3ebM2bQ-Kx3CJVeb-zlEw",authDomain:"teeline-tracer.firebaseapp.com",projectId:"teeline-tracer",storageBucket:"teeline-tracer.firebasestorage.app",messagingSenderId:"1039627863544",appId:"1:1039627863544:web:79a76cb451f01ce471820d",measurementId:"G-WY00H60KMG"},Uy=L4(aC);U3(Uy);const cg=Kb(Uy),rC=({onAuthChange:a})=>{const[t,n]=Pe.useState(""),[s,u]=Pe.useState(""),[c,d]=Pe.useState(!0);Pe.useEffect(()=>{const _=hE(cg,v=>{a(v)});return()=>_()},[a]);const m=async()=>{try{c?await x8(cg,t,s):await M8(cg,t,s),n(""),u("")}catch(_){console.error("Auth Error:",_)}};return Qt.jsx("div",{style:Vc.fullScreenContainer,children:Qt.jsxs("div",{style:Vc.authBox,children:[Qt.jsx("h2",{style:Vc.title,children:c?"Login":"Sign Up"}),Qt.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:_=>n(_.target.value),style:Vc.input}),Qt.jsx("input",{type:"password",placeholder:"Password",value:s,onChange:_=>u(_.target.value),style:Vc.input}),Qt.jsx("button",{style:Vc.authButton,onClick:m,children:c?"Login":"Sign Up"}),Qt.jsx("button",{style:Vc.toggleButton,onClick:()=>d(!c),children:c?"Need an account? Sign Up":"Already have an account? Login"})]})})},Vc={fullScreenContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",backgroundColor:"#E6F2ED",fontFamily:"'Baloo 2', cursive",borderRadius:"16px"},authBox:{backgroundColor:"#D1E1DB",padding:"30px",borderRadius:"16px",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.1)",textAlign:"center",width:"300px"},title:{fontSize:"24px",fontWeight:"bold",color:"#2F3D38",marginBottom:"20px"},input:{width:"100%",padding:"10px",border:"2px solid #A6C3BB",borderRadius:"12px",fontSize:"16px",marginBottom:"15px",textAlign:"center"},authButton:{width:"100%",padding:"12px",backgroundColor:"#6D8B83",color:"#FFFFFF",border:"none",borderRadius:"16px",cursor:"pointer",fontSize:"16px",marginBottom:"10px",transition:"background 0.3s"},toggleButton:{background:"none",border:"none",color:"#2F3D38",fontSize:"14px",cursor:"pointer",textDecoration:"underline"}},m4=U3(Uy),Ph=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],sC="/teeline-tracing",lC=()=>{const[a,t]=Pe.useState(null),[n,s]=Pe.useState(null),[u,c]=Pe.useState(null),[d,m]=Pe.useState(!1),[_,v]=Pe.useState({}),[b,R]=Pe.useState([]),[U,C]=Pe.useState([]);Pe.useEffect(()=>{const L=hE(cg,H=>{t(H)});return()=>L()},[]),Pe.useEffect(()=>{if(!a)return;const L=o4(m4,`users/${a.uid}/piles`),H=eC(L,j=>{const q=[],x=[];j.forEach(w=>{const V=w.data();V.pileType==="good"?q.push(V.letter):x.push(V.letter)}),R(q),C(x)});return()=>H()},[a]);const O=async(L,H)=>{if(!a)return;const j=o4(m4,`users/${a.uid}/piles`),q=H==="good"?"needsWork":"good";try{const x=h4(j,Wm("letter","==",L),Wm("pileType","==",H));if(!(await g4(x)).empty){console.log(`Letter "${L}" is already in the ${H} pile, skipping update.`);return}const V=h4(j,Wm("letter","==",L),Wm("pileType","==",q));(await g4(V)).forEach(async Y=>{await $R(Y.ref)}),await tC(j,{pileType:H,letter:L,createdAt:iC()})}catch(x){console.error("Error moving letter between piles:",x)}};Pe.useEffect(()=>{(async()=>{try{const H=await Promise.all(Ph.map(q=>fetch(`${sC}/normalized_svgs/${q}.svg`).then(x=>x.text()))),j={};H.forEach((q,x)=>{const w=Ph[x],V=q.match(/<path[^>]*d="([^"]*)"/);V&&(j[w]=V[1])}),v(j)}catch(H){console.error("Error loading SVG paths:",H)}})()},[]);const I=L=>{s(L),m(!1)},z=()=>{m(!0)},F=L=>{n&&O(n,L?"good":"needsWork"),m(!1)},M=()=>{if(n){const H=(Ph.indexOf(n)+1)%Ph.length;s(Ph[H]),m(!1)}},D=async()=>{await I8(cg)};return a?Qt.jsxs("div",{style:oa.container,children:[!n&&Qt.jsxs("div",{style:oa.topBar,children:[Qt.jsxs("h2",{style:oa.title,children:["Welcome, ",a==null?void 0:a.email]}),Qt.jsx("button",{style:oa.logoutButton,onClick:D,children:"Logout"})]}),n?Qt.jsx("div",{style:oa.previewContainer,children:d?Qt.jsx(J6,{svgPath:_[n],onComplete:F}):Qt.jsxs(Qt.Fragment,{children:[Qt.jsxs("h2",{style:oa.title,children:["Teeline Version: ",n.toUpperCase()]}),_[n]?Qt.jsx($6,{path:_[n],width:400,height:400}):Qt.jsx("p",{children:"Loading Teeline version..."}),Qt.jsx("button",{style:oa.traceButton,onClick:z,children:"Start Tracing"}),Qt.jsx("button",{style:oa.nextButton,onClick:M,children:"Move to Next Letter"}),Qt.jsx("button",{style:oa.backButton,onClick:()=>s(null),children:"Back to Grid"})]})}):Qt.jsxs(Qt.Fragment,{children:[Qt.jsx("div",{style:oa.grid,children:Ph.map((L,H)=>Qt.jsx("div",{style:{...oa.card,...u===H?oa.cardHover:{},animationDelay:`${H*.1}s`},onMouseEnter:()=>c(H),onMouseLeave:()=>c(null),onClick:()=>I(L),children:Qt.jsx("span",{style:oa.letter,children:L.toUpperCase()})},L))}),Qt.jsxs("div",{style:oa.pilesContainer,children:[Qt.jsxs("div",{style:oa.pile,children:[Qt.jsx("h3",{children:"Good To Go"}),b.map(L=>Qt.jsx("div",{children:L.toUpperCase()},L))]}),Qt.jsxs("div",{style:oa.pile,children:[Qt.jsx("h3",{children:"Needs Work"}),U.map(L=>Qt.jsx("div",{children:L.toUpperCase()},L))]})]})]})]}):Qt.jsx(rC,{onAuthChange:t})},oa={nextButton:{padding:"12px 24px",backgroundColor:"#4CAF50",color:"#FFFFFF",borderRadius:"16px",cursor:"pointer",marginTop:"10px"},container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"#E6F2ED",padding:"20px",fontFamily:"'Baloo 2', cursive",borderRadius:"16px"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"30px",width:"100%",maxWidth:"800px"},card:{display:"flex",alignItems:"center",justifyContent:"center",border:"3px solid #D1E1DB",borderRadius:"16px",background:"linear-gradient(135deg, #A6C3BB, #D1E1DB)",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.1)",width:"150px",height:"150px",cursor:"pointer",fontSize:"24px",fontWeight:"bold",textAlign:"center",color:"#2F3D38",opacity:0,transform:"translateY(-50px)",animation:"dropIn 0.5s ease-out forwards",transition:"transform 0.2s ease, box-shadow 0.2s ease"},cardHover:{transform:"translateY(-4px)",boxShadow:"8px 8px 0px rgba(0, 0, 0, 0.3)",background:"linear-gradient(135deg, #D1E1DB, #A6C3BB)"},previewContainer:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",padding:"20px",borderRadius:"16px",background:"#E6F2ED",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.2)"},title:{fontSize:"28px",fontWeight:"bold",color:"#2F3D38"},traceButton:{padding:"12px 24px",backgroundColor:"#6D8B83",color:"#FFFFFF",borderRadius:"16px",cursor:"pointer"},backButton:{padding:"12px 24px",backgroundColor:"#A6C3BB",color:"#2F3D38",borderRadius:"16px",cursor:"pointer"},letter:{fontSize:"48px",fontWeight:"bold",color:"#2F3D38"},pilesContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:"20px",marginTop:"20px",width:"100%",maxWidth:"800px"},pile:{flex:1,border:"3px dashed #A6C3BB",borderRadius:"16px",padding:"20px",backgroundColor:"#E6F2ED",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},logoutButton:{width:"100%",padding:"12px",marginBottom:"20px",backgroundColor:"#A6C3BB",color:"#2F3D38",border:"none",borderRadius:"16px",cursor:"pointer",fontSize:"16px",transition:"background 0.3s"}},oC=()=>Qt.jsxs("div",{style:p4.appContainer,children:[Qt.jsx("h1",{style:p4.title,children:"Teeline Alphabet"}),Qt.jsx(lC,{})]}),p4={appContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"radial-gradient(circle at bottom right, #2F3D38, #6D8B83 40%, #A6C3BB 70%)",padding:"20px",boxShadow:"0px 10px 20px rgba(0, 0, 0, 0.2)",borderRadius:"16px",border:"4px dotted #2F3D38"},title:{textAlign:"center",marginBottom:"20px",fontSize:"36px",color:"#2F3D38",fontFamily:"'Baloo 2', cursive",textShadow:"3px 3px 0px #6D8B83, 5px 5px 0px #A6C3BB"}};z5.createRoot(document.getElementById("root")).render(Qt.jsx(Pe.StrictMode,{children:Qt.jsx(oC,{})}));
