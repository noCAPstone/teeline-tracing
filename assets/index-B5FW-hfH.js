(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))r(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(u){if(u.ep)return;u.ep=!0;const c=n(u);fetch(u.href,c)}})();var i_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function C1(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Rp={exports:{}},rd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function l5(){if(a_)return rd;a_=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,u,c){var d=null;if(c!==void 0&&(d=""+c),u.key!==void 0&&(d=""+u.key),"key"in u){c={};for(var m in u)m!=="key"&&(c[m]=u[m])}else c=u;return u=c.ref,{$$typeof:a,type:r,key:d,ref:u!==void 0?u:null,props:c}}return rd.Fragment=t,rd.jsx=n,rd.jsxs=n,rd}var s_;function o5(){return s_||(s_=1,Rp.exports=l5()),Rp.exports}var Yt=o5(),Cp={exports:{}},fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_;function u5(){if(r_)return fe;r_=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),D=Symbol.iterator;function U(X){return X===null||typeof X!="object"?null:(X=D&&X[D]||X["@@iterator"],typeof X=="function"?X:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,I={};function P(X,it,Et){this.props=X,this.context=it,this.refs=I,this.updater=Et||w}P.prototype.isReactComponent={},P.prototype.setState=function(X,it){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,it,"setState")},P.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function K(){}K.prototype=P.prototype;function C(X,it,Et){this.props=X,this.context=it,this.refs=I,this.updater=Et||w}var N=C.prototype=new K;N.constructor=C,M(N,P.prototype),N.isPureReactComponent=!0;var z=Array.isArray,H={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function q(X,it,Et,st,gt,Rt){return Et=Rt.ref,{$$typeof:a,type:X,key:it,ref:Et!==void 0?Et:null,props:Rt}}function V(X,it){return q(X.type,it,void 0,void 0,void 0,X.props)}function R(X){return typeof X=="object"&&X!==null&&X.$$typeof===a}function x(X){var it={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Et){return it[Et]})}var G=/\/+/g;function Y(X,it){return typeof X=="object"&&X!==null&&X.key!=null?x(""+X.key):it.toString(36)}function T(){}function F(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(T,T):(X.status="pending",X.then(function(it){X.status==="pending"&&(X.status="fulfilled",X.value=it)},function(it){X.status==="pending"&&(X.status="rejected",X.reason=it)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function k(X,it,Et,st,gt){var Rt=typeof X;(Rt==="undefined"||Rt==="boolean")&&(X=null);var Nt=!1;if(X===null)Nt=!0;else switch(Rt){case"bigint":case"string":case"number":Nt=!0;break;case"object":switch(X.$$typeof){case a:case t:Nt=!0;break;case b:return Nt=X._init,k(Nt(X._payload),it,Et,st,gt)}}if(Nt)return gt=gt(X),Nt=st===""?"."+Y(X,0):st,z(gt)?(Et="",Nt!=null&&(Et=Nt.replace(G,"$&/")+"/"),k(gt,it,Et,"",function(At){return At})):gt!=null&&(R(gt)&&(gt=V(gt,Et+(gt.key==null||X&&X.key===gt.key?"":(""+gt.key).replace(G,"$&/")+"/")+Nt)),it.push(gt)),1;Nt=0;var et=st===""?".":st+":";if(z(X))for(var ct=0;ct<X.length;ct++)st=X[ct],Rt=et+Y(st,ct),Nt+=k(st,it,Et,Rt,gt);else if(ct=U(X),typeof ct=="function")for(X=ct.call(X),ct=0;!(st=X.next()).done;)st=st.value,Rt=et+Y(st,ct++),Nt+=k(st,it,Et,Rt,gt);else if(Rt==="object"){if(typeof X.then=="function")return k(F(X),it,Et,st,gt);throw it=String(X),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return Nt}function Q(X,it,Et){if(X==null)return X;var st=[],gt=0;return k(X,st,"","",function(Rt){return it.call(Et,Rt,gt++)}),st}function $(X){if(X._status===-1){var it=X._result;it=it(),it.then(function(Et){(X._status===0||X._status===-1)&&(X._status=1,X._result=Et)},function(Et){(X._status===0||X._status===-1)&&(X._status=2,X._result=Et)}),X._status===-1&&(X._status=0,X._result=it)}if(X._status===1)return X._result.default;throw X._result}var at=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function dt(){}return fe.Children={map:Q,forEach:function(X,it,Et){Q(X,function(){it.apply(this,arguments)},Et)},count:function(X){var it=0;return Q(X,function(){it++}),it},toArray:function(X){return Q(X,function(it){return it})||[]},only:function(X){if(!R(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},fe.Component=P,fe.Fragment=n,fe.Profiler=u,fe.PureComponent=C,fe.StrictMode=r,fe.Suspense=_,fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,fe.act=function(){throw Error("act(...) is not supported in production builds of React.")},fe.cache=function(X){return function(){return X.apply(null,arguments)}},fe.cloneElement=function(X,it,Et){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var st=M({},X.props),gt=X.key,Rt=void 0;if(it!=null)for(Nt in it.ref!==void 0&&(Rt=void 0),it.key!==void 0&&(gt=""+it.key),it)!j.call(it,Nt)||Nt==="key"||Nt==="__self"||Nt==="__source"||Nt==="ref"&&it.ref===void 0||(st[Nt]=it[Nt]);var Nt=arguments.length-2;if(Nt===1)st.children=Et;else if(1<Nt){for(var et=Array(Nt),ct=0;ct<Nt;ct++)et[ct]=arguments[ct+2];st.children=et}return q(X.type,gt,void 0,void 0,Rt,st)},fe.createContext=function(X){return X={$$typeof:d,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:c,_context:X},X},fe.createElement=function(X,it,Et){var st,gt={},Rt=null;if(it!=null)for(st in it.key!==void 0&&(Rt=""+it.key),it)j.call(it,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(gt[st]=it[st]);var Nt=arguments.length-2;if(Nt===1)gt.children=Et;else if(1<Nt){for(var et=Array(Nt),ct=0;ct<Nt;ct++)et[ct]=arguments[ct+2];gt.children=et}if(X&&X.defaultProps)for(st in Nt=X.defaultProps,Nt)gt[st]===void 0&&(gt[st]=Nt[st]);return q(X,Rt,void 0,void 0,null,gt)},fe.createRef=function(){return{current:null}},fe.forwardRef=function(X){return{$$typeof:m,render:X}},fe.isValidElement=R,fe.lazy=function(X){return{$$typeof:b,_payload:{_status:-1,_result:X},_init:$}},fe.memo=function(X,it){return{$$typeof:v,type:X,compare:it===void 0?null:it}},fe.startTransition=function(X){var it=H.T,Et={};H.T=Et;try{var st=X(),gt=H.S;gt!==null&&gt(Et,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(dt,at)}catch(Rt){at(Rt)}finally{H.T=it}},fe.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},fe.use=function(X){return H.H.use(X)},fe.useActionState=function(X,it,Et){return H.H.useActionState(X,it,Et)},fe.useCallback=function(X,it){return H.H.useCallback(X,it)},fe.useContext=function(X){return H.H.useContext(X)},fe.useDebugValue=function(){},fe.useDeferredValue=function(X,it){return H.H.useDeferredValue(X,it)},fe.useEffect=function(X,it){return H.H.useEffect(X,it)},fe.useId=function(){return H.H.useId()},fe.useImperativeHandle=function(X,it,Et){return H.H.useImperativeHandle(X,it,Et)},fe.useInsertionEffect=function(X,it){return H.H.useInsertionEffect(X,it)},fe.useLayoutEffect=function(X,it){return H.H.useLayoutEffect(X,it)},fe.useMemo=function(X,it){return H.H.useMemo(X,it)},fe.useOptimistic=function(X,it){return H.H.useOptimistic(X,it)},fe.useReducer=function(X,it,Et){return H.H.useReducer(X,it,Et)},fe.useRef=function(X){return H.H.useRef(X)},fe.useState=function(X){return H.H.useState(X)},fe.useSyncExternalStore=function(X,it,Et){return H.H.useSyncExternalStore(X,it,Et)},fe.useTransition=function(){return H.H.useTransition()},fe.version="19.0.0",fe}var l_;function b0(){return l_||(l_=1,Cp.exports=u5()),Cp.exports}var ze=b0();const ua=C1(ze);var Dp={exports:{}},ld={},wp={exports:{}},Np={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function c5(){return o_||(o_=1,function(a){function t(Q,$){var at=Q.length;Q.push($);t:for(;0<at;){var dt=at-1>>>1,X=Q[dt];if(0<u(X,$))Q[dt]=$,Q[at]=X,at=dt;else break t}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var $=Q[0],at=Q.pop();if(at!==$){Q[0]=at;t:for(var dt=0,X=Q.length,it=X>>>1;dt<it;){var Et=2*(dt+1)-1,st=Q[Et],gt=Et+1,Rt=Q[gt];if(0>u(st,at))gt<X&&0>u(Rt,st)?(Q[dt]=Rt,Q[gt]=at,dt=gt):(Q[dt]=st,Q[Et]=at,dt=Et);else if(gt<X&&0>u(Rt,at))Q[dt]=Rt,Q[gt]=at,dt=gt;else break t}}return $}function u(Q,$){var at=Q.sortIndex-$.sortIndex;return at!==0?at:Q.id-$.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();a.unstable_now=function(){return d.now()-m}}var _=[],v=[],b=1,D=null,U=3,w=!1,M=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function N(Q){for(var $=n(v);$!==null;){if($.callback===null)r(v);else if($.startTime<=Q)r(v),$.sortIndex=$.expirationTime,t(_,$);else break;$=n(v)}}function z(Q){if(I=!1,N(Q),!M)if(n(_)!==null)M=!0,F();else{var $=n(v);$!==null&&k(z,$.startTime-Q)}}var H=!1,j=-1,q=5,V=-1;function R(){return!(a.unstable_now()-V<q)}function x(){if(H){var Q=a.unstable_now();V=Q;var $=!0;try{t:{M=!1,I&&(I=!1,K(j),j=-1),w=!0;var at=U;try{e:{for(N(Q),D=n(_);D!==null&&!(D.expirationTime>Q&&R());){var dt=D.callback;if(typeof dt=="function"){D.callback=null,U=D.priorityLevel;var X=dt(D.expirationTime<=Q);if(Q=a.unstable_now(),typeof X=="function"){D.callback=X,N(Q),$=!0;break e}D===n(_)&&r(_),N(Q)}else r(_);D=n(_)}if(D!==null)$=!0;else{var it=n(v);it!==null&&k(z,it.startTime-Q),$=!1}}break t}finally{D=null,U=at,w=!1}$=void 0}}finally{$?G():H=!1}}}var G;if(typeof C=="function")G=function(){C(x)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,T=Y.port2;Y.port1.onmessage=x,G=function(){T.postMessage(null)}}else G=function(){P(x,0)};function F(){H||(H=!0,G())}function k(Q,$){j=P(function(){Q(a.unstable_now())},$)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Q){Q.callback=null},a.unstable_continueExecution=function(){M||w||(M=!0,F())},a.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<Q?Math.floor(1e3/Q):5},a.unstable_getCurrentPriorityLevel=function(){return U},a.unstable_getFirstCallbackNode=function(){return n(_)},a.unstable_next=function(Q){switch(U){case 1:case 2:case 3:var $=3;break;default:$=U}var at=U;U=$;try{return Q()}finally{U=at}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(Q,$){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var at=U;U=Q;try{return $()}finally{U=at}},a.unstable_scheduleCallback=function(Q,$,at){var dt=a.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?dt+at:dt):at=dt,Q){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=at+X,Q={id:b++,callback:$,priorityLevel:Q,startTime:at,expirationTime:X,sortIndex:-1},at>dt?(Q.sortIndex=at,t(v,Q),n(_)===null&&Q===n(v)&&(I?(K(j),j=-1):I=!0,k(z,at-dt))):(Q.sortIndex=X,t(_,Q),M||w||(M=!0,F())),Q},a.unstable_shouldYield=R,a.unstable_wrapCallback=function(Q){var $=U;return function(){var at=U;U=$;try{return Q.apply(this,arguments)}finally{U=at}}}}(Np)),Np}var u_;function D1(){return u_||(u_=1,wp.exports=c5()),wp.exports}var Op={exports:{}},ra={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function h5(){if(c_)return ra;c_=1;var a=b0();function t(_){var v="https://react.dev/errors/"+_;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)v+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+_+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},u=Symbol.for("react.portal");function c(_,v,b){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:D==null?null:""+D,children:_,containerInfo:v,implementation:b}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(_,v){if(_==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return ra.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ra.createPortal=function(_,v){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(t(299));return c(_,v,null,b)},ra.flushSync=function(_){var v=d.T,b=r.p;try{if(d.T=null,r.p=2,_)return _()}finally{d.T=v,r.p=b,r.d.f()}},ra.preconnect=function(_,v){typeof _=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,r.d.C(_,v))},ra.prefetchDNS=function(_){typeof _=="string"&&r.d.D(_)},ra.preinit=function(_,v){if(typeof _=="string"&&v&&typeof v.as=="string"){var b=v.as,D=m(b,v.crossOrigin),U=typeof v.integrity=="string"?v.integrity:void 0,w=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;b==="style"?r.d.S(_,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:D,integrity:U,fetchPriority:w}):b==="script"&&r.d.X(_,{crossOrigin:D,integrity:U,fetchPriority:w,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},ra.preinitModule=function(_,v){if(typeof _=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var b=m(v.as,v.crossOrigin);r.d.M(_,{crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&r.d.M(_)},ra.preload=function(_,v){if(typeof _=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var b=v.as,D=m(b,v.crossOrigin);r.d.L(_,b,{crossOrigin:D,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},ra.preloadModule=function(_,v){if(typeof _=="string")if(v){var b=m(v.as,v.crossOrigin);r.d.m(_,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else r.d.m(_)},ra.requestFormReset=function(_){r.d.r(_)},ra.unstable_batchedUpdates=function(_,v){return _(v)},ra.useFormState=function(_,v,b){return d.H.useFormState(_,v,b)},ra.useFormStatus=function(){return d.H.useHostTransitionStatus()},ra.version="19.0.0",ra}var h_;function f5(){if(h_)return Op.exports;h_=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Op.exports=h5(),Op.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function d5(){if(f_)return ld;f_=1;var a=D1(),t=b0(),n=f5();function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var c=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),U=Symbol.for("react.consumer"),w=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),N=Symbol.for("react.offscreen"),z=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function j(e){return e===null||typeof e!="object"?null:(e=H&&e[H]||e["@@iterator"],typeof e=="function"?e:null)}var q=Symbol.for("react.client.reference");function V(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===q?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case m:return"Portal";case b:return"Profiler";case v:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case w:return(e.displayName||"Context")+".Provider";case U:return(e._context.displayName||"Context")+".Consumer";case M:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case K:return i=e.displayName||null,i!==null?i:V(e.type)||"Memo";case C:i=e._payload,e=e._init;try{return V(e(i))}catch{}}return null}var R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,x=Object.assign,G,Y;function T(e){if(G===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);G=i&&i[1]||"",Y=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+G+e+Y}var F=!1;function k(e,i){if(!e||F)return"";F=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(i){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(St){var yt=St}Reflect.construct(e,[],Ot)}else{try{Ot.call()}catch(St){yt=St}e.call(Ot.prototype)}}else{try{throw Error()}catch(St){yt=St}(Ot=e())&&typeof Ot.catch=="function"&&Ot.catch(function(){})}}catch(St){if(St&&yt&&typeof St.stack=="string")return[St.stack,yt.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=h.DetermineComponentFrameRoot(),B=E[0],Z=E[1];if(B&&Z){var tt=B.split(`
`),lt=Z.split(`
`);for(p=h=0;h<tt.length&&!tt[h].includes("DetermineComponentFrameRoot");)h++;for(;p<lt.length&&!lt[p].includes("DetermineComponentFrameRoot");)p++;if(h===tt.length||p===lt.length)for(h=tt.length-1,p=lt.length-1;1<=h&&0<=p&&tt[h]!==lt[p];)p--;for(;1<=h&&0<=p;h--,p--)if(tt[h]!==lt[p]){if(h!==1||p!==1)do if(h--,p--,0>p||tt[h]!==lt[p]){var bt=`
`+tt[h].replace(" at new "," at ");return e.displayName&&bt.includes("<anonymous>")&&(bt=bt.replace("<anonymous>",e.displayName)),bt}while(1<=h&&0<=p);break}}}finally{F=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?T(o):""}function Q(e){switch(e.tag){case 26:case 27:case 5:return T(e.type);case 16:return T("Lazy");case 13:return T("Suspense");case 19:return T("SuspenseList");case 0:case 15:return e=k(e.type,!1),e;case 11:return e=k(e.type.render,!1),e;case 1:return e=k(e.type,!0),e;default:return""}}function $(e){try{var i="";do i+=Q(e),e=e.return;while(e);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function at(e){var i=e,o=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,i.flags&4098&&(o=i.return),e=i.return;while(e)}return i.tag===3?o:null}function dt(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function X(e){if(at(e)!==e)throw Error(r(188))}function it(e){var i=e.alternate;if(!i){if(i=at(e),i===null)throw Error(r(188));return i!==e?null:e}for(var o=e,h=i;;){var p=o.return;if(p===null)break;var E=p.alternate;if(E===null){if(h=p.return,h!==null){o=h;continue}break}if(p.child===E.child){for(E=p.child;E;){if(E===o)return X(p),e;if(E===h)return X(p),i;E=E.sibling}throw Error(r(188))}if(o.return!==h.return)o=p,h=E;else{for(var B=!1,Z=p.child;Z;){if(Z===o){B=!0,o=p,h=E;break}if(Z===h){B=!0,h=p,o=E;break}Z=Z.sibling}if(!B){for(Z=E.child;Z;){if(Z===o){B=!0,o=E,h=p;break}if(Z===h){B=!0,h=E,o=p;break}Z=Z.sibling}if(!B)throw Error(r(189))}}if(o.alternate!==h)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?e:i}function Et(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=Et(e),i!==null)return i;e=e.sibling}return null}var st=Array.isArray,gt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Rt={pending:!1,data:null,method:null,action:null},Nt=[],et=-1;function ct(e){return{current:e}}function At(e){0>et||(e.current=Nt[et],Nt[et]=null,et--)}function Ct(e,i){et++,Nt[et]=e.current,e.current=i}var It=ct(null),Pt=ct(null),$t=ct(null),oe=ct(null);function Kt(e,i){switch(Ct($t,i),Ct(Pt,e),Ct(It,null),e=i.nodeType,e){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?xy(i):0;break;default:if(e=e===8?i.parentNode:i,i=e.tagName,e=e.namespaceURI)e=xy(e),i=Vy(e,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}At(It),Ct(It,i)}function Fe(){At(It),At(Pt),At($t)}function le(e){e.memoizedState!==null&&Ct(oe,e);var i=It.current,o=Vy(i,e.type);i!==o&&(Ct(Pt,e),Ct(It,o))}function Ke(e){Pt.current===e&&(At(It),At(Pt)),oe.current===e&&(At(oe),ed._currentValue=Rt)}var gi=Object.prototype.hasOwnProperty,He=a.unstable_scheduleCallback,oi=a.unstable_cancelCallback,en=a.unstable_shouldYield,Xn=a.unstable_requestPaint,nn=a.unstable_now,Oi=a.unstable_getCurrentPriorityLevel,Ce=a.unstable_ImmediatePriority,ke=a.unstable_UserBlockingPriority,Qn=a.unstable_NormalPriority,da=a.unstable_LowPriority,ji=a.unstable_IdlePriority,ga=a.log,zn=a.unstable_setDisableYieldValue,an=null,Ae=null;function ma(e){if(Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(an,e,void 0,(e.current.flags&128)===128)}catch{}}function Fi(e){if(typeof ga=="function"&&zn(e),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(an,e)}catch{}}var Zn=Math.clz32?Math.clz32:Hu,Fs=Math.log,Gu=Math.LN2;function Hu(e){return e>>>=0,e===0?32:31-(Fs(e)/Gu|0)|0}var pa=128,Ks=4194304;function Ki(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ya(e,i){var o=e.pendingLanes;if(o===0)return 0;var h=0,p=e.suspendedLanes,E=e.pingedLanes,B=e.warmLanes;e=e.finishedLanes!==0;var Z=o&134217727;return Z!==0?(o=Z&~p,o!==0?h=Ki(o):(E&=Z,E!==0?h=Ki(E):e||(B=Z&~B,B!==0&&(h=Ki(B))))):(Z=o&~p,Z!==0?h=Ki(Z):E!==0?h=Ki(E):e||(B=o&~B,B!==0&&(h=Ki(B)))),h===0?0:i!==0&&i!==h&&!(i&p)&&(p=h&-h,B=i&-i,p>=B||p===32&&(B&4194176)!==0)?i:h}function Ys(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Xs(e,i){switch(e){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qs(){var e=pa;return pa<<=1,!(pa&4194176)&&(pa=128),e}function es(){var e=Ks;return Ks<<=1,!(Ks&62914560)&&(Ks=4194304),e}function Il(e){for(var i=[],o=0;31>o;o++)i.push(e);return i}function En(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ku(e,i,o,h,p,E){var B=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var Z=e.entanglements,tt=e.expirationTimes,lt=e.hiddenUpdates;for(o=B&~o;0<o;){var bt=31-Zn(o),Ot=1<<bt;Z[bt]=0,tt[bt]=-1;var yt=lt[bt];if(yt!==null)for(lt[bt]=null,bt=0;bt<yt.length;bt++){var St=yt[bt];St!==null&&(St.lane&=-536870913)}o&=~Ot}h!==0&&Ss(e,h,0),E!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=E&~(B&~i))}function Ss(e,i,o){e.pendingLanes|=i,e.suspendedLanes&=~i;var h=31-Zn(i);e.entangledLanes|=i,e.entanglements[h]=e.entanglements[h]|1073741824|o&4194218}function Ts(e,i){var o=e.entangledLanes|=i;for(e=e.entanglements;o;){var h=31-Zn(o),p=1<<h;p&i|e[h]&i&&(e[h]|=i),o&=~p}}function ns(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function qu(){var e=gt.p;return e!==0?e:(e=window.event,e===void 0?32:Wy(e.type))}function Mi(e,i){var o=gt.p;try{return gt.p=e,i()}finally{gt.p=o}}var ni=Math.random().toString(36).slice(2),Rn="__reactFiber$"+ni,ue="__reactProps$"+ni,is="__reactContainer$"+ni,Zs="__reactEvents$"+ni,Ll="__reactListeners$"+ni,as="__reactHandles$"+ni,ju="__reactResources$"+ni,bs="__reactMarker$"+ni;function Ws(e){delete e[Rn],delete e[ue],delete e[Zs],delete e[Ll],delete e[as]}function _a(e){var i=e[Rn];if(i)return i;for(var o=e.parentNode;o;){if(i=o[is]||o[Rn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(e=Ly(e);e!==null;){if(o=e[Rn])return o;e=Ly(e)}return i}e=o,o=e.parentNode}return null}function Sn(e){if(e=e[Rn]||e[is]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Je(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(r(33))}function Ma(e){var i=e[ju];return i||(i=e[ju]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function sn(e){e[bs]=!0}var zl=new Set,Yi={};function mi(e,i){pi(e,i),pi(e+"Capture",i)}function pi(e,i){for(Yi[e]=i,e=0;e<i.length;e++)zl.add(i[e])}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oo={},Mo={};function Fu(e){return gi.call(Mo,e)?!0:gi.call(Oo,e)?!1:jc.test(e)?Mo[e]=!0:(Oo[e]=!0,!1)}function Js(e,i,o){if(Fu(i))if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var h=i.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+o)}}function $s(e,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+o)}}function Xi(e,i,o,h){if(h===null)e.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(i,o,""+h)}}function yi(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Fc(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Kc(e){var i=Fc(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),h=""+e[i];if(!e.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,E=o.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return p.call(this)},set:function(B){h=""+B,E.call(this,B)}}),Object.defineProperty(e,i,{enumerable:o.enumerable}),{getValue:function(){return h},setValue:function(B){h=""+B},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Lr(e){e._valueTracker||(e._valueTracker=Kc(e))}function xo(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var o=i.getValue(),h="";return e&&(h=Fc(e)?e.checked?"true":"false":e.value),e=h,e!==o?(i.setValue(e),!0):!1}function zr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var As=/[\n"\\]/g;function pn(e){return e.replace(As,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function tr(e,i,o,h,p,E,B,Z){e.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?e.type=B:e.removeAttribute("type"),i!=null?B==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+yi(i)):e.value!==""+yi(i)&&(e.value=""+yi(i)):B!=="submit"&&B!=="reset"||e.removeAttribute("value"),i!=null?Pl(e,B,yi(i)):o!=null?Pl(e,B,yi(o)):h!=null&&e.removeAttribute("value"),p==null&&E!=null&&(e.defaultChecked=!!E),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?e.name=""+yi(Z):e.removeAttribute("name")}function Pr(e,i,o,h,p,E,B,Z){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(e.type=E),i!=null||o!=null){if(!(E!=="submit"&&E!=="reset"||i!=null))return;o=o!=null?""+yi(o):"",i=i!=null?""+yi(i):o,Z||i===e.value||(e.value=i),e.defaultValue=i}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,e.checked=Z?e.checked:!!h,e.defaultChecked=!!h,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(e.name=B)}function Pl(e,i,o){i==="number"&&zr(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function Ve(e,i,o,h){if(e=e.options,i){i={};for(var p=0;p<o.length;p++)i["$"+o[p]]=!0;for(o=0;o<e.length;o++)p=i.hasOwnProperty("$"+e[o].value),e[o].selected!==p&&(e[o].selected=p),p&&h&&(e[o].defaultSelected=!0)}else{for(o=""+yi(o),i=null,p=0;p<e.length;p++){if(e[p].value===o){e[p].selected=!0,h&&(e[p].defaultSelected=!0);return}i!==null||e[p].disabled||(i=e[p])}i!==null&&(i.selected=!0)}}function Br(e,i,o){if(i!=null&&(i=""+yi(i),i!==e.value&&(e.value=i),o==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=o!=null?""+yi(o):""}function va(e,i,o,h){if(i==null){if(h!=null){if(o!=null)throw Error(r(92));if(st(h)){if(1<h.length)throw Error(r(93));h=h[0]}o=h}o==null&&(o=""),i=o}o=yi(i),e.defaultValue=o,h=e.textContent,h===o&&h!==""&&h!==null&&(e.value=h)}function Ea(e,i){if(i){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=i;return}}e.textContent=i}var Vo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gr(e,i,o){var h=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?h?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":h?e.setProperty(i,o):typeof o!="number"||o===0||Vo.has(i)?i==="float"?e.cssFloat=o:e[i]=(""+o).trim():e[i]=o+"px"}function Ku(e,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(e=e.style,o!=null){for(var h in o)!o.hasOwnProperty(h)||i!=null&&i.hasOwnProperty(h)||(h.indexOf("--")===0?e.setProperty(h,""):h==="float"?e.cssFloat="":e[h]="");for(var p in i)h=i[p],i.hasOwnProperty(p)&&o[p]!==h&&Gr(e,p,h)}else for(var E in i)i.hasOwnProperty(E)&&Gr(e,E,i[E])}function Bl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ss(e){return Xc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Sa=null;function Hr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rs=null,Cs=null;function rs(e){var i=Sn(e);if(i&&(e=i.stateNode)){var o=e[ue]||null;t:switch(e=i.stateNode,i.type){case"input":if(tr(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+pn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var h=o[i];if(h!==e&&h.form===e.form){var p=h[ue]||null;if(!p)throw Error(r(90));tr(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<o.length;i++)h=o[i],h.form===e.form&&xo(h)}break t;case"textarea":Br(e,o.value,o.defaultValue);break t;case"select":i=o.value,i!=null&&Ve(e,!!o.multiple,i,!1)}}}var Uo=!1;function Yu(e,i,o){if(Uo)return e(i,o);Uo=!0;try{var h=e(i);return h}finally{if(Uo=!1,(Rs!==null||Cs!==null)&&(fo(),Rs&&(i=Rs,e=Cs,Cs=Rs=null,rs(i),e)))for(i=0;i<e.length;i++)rs(e[i])}}function kr(e,i){var o=e.stateNode;if(o===null)return null;var h=o[ue]||null;if(h===null)return null;o=h[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break t;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Qi=!1;if(xi)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){Qi=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{Qi=!1}var ls=null,jr=null,er=null;function Io(){if(er)return er;var e,i=jr,o=i.length,h,p="value"in ls?ls.value:ls.textContent,E=p.length;for(e=0;e<o&&i[e]===p[e];e++);var B=o-e;for(h=1;h<=B&&i[o-h]===p[E-h];h++);return er=p.slice(e,1<h?1-h:void 0)}function Zi(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function xa(){return!0}function Fr(){return!1}function Wn(e){function i(o,h,p,E,B){this._reactName=o,this._targetInst=p,this.type=h,this.nativeEvent=E,this.target=B,this.currentTarget=null;for(var Z in e)e.hasOwnProperty(Z)&&(o=e[Z],this[Z]=o?o(E):E[Z]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?xa:Fr,this.isPropagationStopped=Fr,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=xa)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=xa)},persist:function(){},isPersistent:xa}),i}var Pe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kr=Wn(Pe),Yr=x({},Pe,{view:0,detail:0}),Xu=Wn(Yr),Va,nr,os,ir=x({},Yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ar,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==os&&(os&&e.type==="mousemove"?(Va=e.screenX-os.screenX,nr=e.screenY-os.screenY):nr=Va=0,os=e),Va)},movementY:function(e){return"movementY"in e?e.movementY:nr}}),Ta=Wn(ir),Qu=x({},ir,{dataTransfer:0}),lf=Wn(Qu),yn=x({},Yr,{relatedTarget:0}),Gl=Wn(yn),Lo=x({},Pe,{animationName:0,elapsedTime:0,pseudoElement:0}),Hl=Wn(Lo),Zu=x({},Pe,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kl=Wn(Zu),ql=x({},Pe,{data:0}),jl=Wn(ql),Xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fl(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Ju[e])?!!i[e]:!1}function ar(){return Fl}var $u=x({},Yr,{key:function(e){if(e.key){var i=Xr[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Zi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ar,charCode:function(e){return e.type==="keypress"?Zi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qr=Wn($u),zo=x({},ir,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kl=Wn(zo),Ds=x({},Yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ar}),Po=Wn(Ds),tc=x({},Pe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ua=Wn(tc),Bo=x({},ir,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Go=Wn(Bo),_i=x({},Pe,{newState:0,oldState:0}),us=Wn(_i),Ia=[9,13,27,32],La=xi&&"CompositionEvent"in window,g=null;xi&&"documentMode"in document&&(g=document.documentMode);var A=xi&&"TextEvent"in window&&!g,L=xi&&(!La||g&&8<g&&11>=g),J=" ",ot=!1;function vt(e,i){switch(e){case"keyup":return Ia.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ve=!1;function _n(e,i){switch(e){case"compositionend":return Lt(i);case"keypress":return i.which!==32?null:(ot=!0,J);case"textInput":return e=i.data,e===J&&ot?null:e;default:return null}}function Ee(e,i){if(ve)return e==="compositionend"||!La&&vt(e,i)?(e=Io(),er=jr=ls=null,ve=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return L&&i.locale!=="ko"?null:i.data;default:return null}}var Cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Cn[e.type]:i==="textarea"}function Dn(e,i,o,h){Rs?Cs?Cs.push(h):Cs=[h]:Rs=h,i=Am(i,"onChange"),0<i.length&&(o=new Kr("onChange","change",null,o,h),e.push({event:o,listeners:i}))}var ii=null,za=null;function Ho(e){Dy(e,0)}function ec(e){var i=Je(e);if(xo(i))return e}function Qc(e,i){if(e==="change")return i}var Zc=!1;if(xi){var Wc;if(xi){var ko="oninput"in document;if(!ko){var qo=document.createElement("div");qo.setAttribute("oninput","return;"),ko=typeof qo.oninput=="function"}Wc=ko}else Wc=!1;Zc=Wc&&(!document.documentMode||9<document.documentMode)}function fn(){ii&&(ii.detachEvent("onpropertychange",Cg),za=ii=null)}function Cg(e){if(e.propertyName==="value"&&ec(za)){var i=[];Dn(i,za,e,Hr(e)),Yu(Ho,i)}}function K0(e,i,o){e==="focusin"?(fn(),ii=i,za=o,ii.attachEvent("onpropertychange",Cg)):e==="focusout"&&fn()}function Dg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ec(za)}function nc(e,i){if(e==="click")return ec(i)}function Zr(e,i){if(e==="input"||e==="change")return ec(i)}function wg(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Wi=typeof Object.is=="function"?Object.is:wg;function cs(e,i){if(Wi(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var o=Object.keys(e),h=Object.keys(i);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var p=o[h];if(!gi.call(i,p)||!Wi(e[p],i[p]))return!1}return!0}function Ji(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function of(e,i){var o=Ji(e);e=0;for(var h;o;){if(o.nodeType===3){if(h=e+o.textContent.length,e<=i&&h>=i)return{node:o,offset:i-e};e=h}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Ji(o)}}function uf(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?uf(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function cf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=zr(e.document);i instanceof e.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)e=i.contentWindow;else break;i=zr(e.document)}return i}function ic(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function hf(e,i){var o=cf(i);i=e.focusedElem;var h=e.selectionRange;if(o!==i&&i&&i.ownerDocument&&uf(i.ownerDocument.documentElement,i)){if(h!==null&&ic(i)){if(e=h.start,o=h.end,o===void 0&&(o=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(o,i.value.length);else if(o=(e=i.ownerDocument||document)&&e.defaultView||window,o.getSelection){o=o.getSelection();var p=i.textContent.length,E=Math.min(h.start,p);h=h.end===void 0?E:Math.min(h.end,p),!o.extend&&E>h&&(p=h,h=E,E=p),p=of(i,E);var B=of(i,h);p&&B&&(o.rangeCount!==1||o.anchorNode!==p.node||o.anchorOffset!==p.offset||o.focusNode!==B.node||o.focusOffset!==B.offset)&&(e=e.createRange(),e.setStart(p.node,p.offset),o.removeAllRanges(),E>h?(o.addRange(e),o.extend(B.node,B.offset)):(e.setEnd(B.node,B.offset),o.addRange(e)))}}for(e=[],o=i;o=o.parentNode;)o.nodeType===1&&e.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)o=e[i],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Jc=xi&&"documentMode"in document&&11>=document.documentMode,Yl=null,ff=null,jo=null,$c=!1;function Pa(e,i,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;$c||Yl==null||Yl!==zr(h)||(h=Yl,"selectionStart"in h&&ic(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),jo&&cs(jo,h)||(jo=h,h=Am(ff,"onSelect"),0<h.length&&(i=new Kr("onSelect","select",null,i,o),e.push({event:i,listeners:h}),i.target=Yl)))}function sr(e,i){var o={};return o[e.toLowerCase()]=i.toLowerCase(),o["Webkit"+e]="webkit"+i,o["Moz"+e]="moz"+i,o}var Xl={animationend:sr("Animation","AnimationEnd"),animationiteration:sr("Animation","AnimationIteration"),animationstart:sr("Animation","AnimationStart"),transitionrun:sr("Transition","TransitionRun"),transitionstart:sr("Transition","TransitionStart"),transitioncancel:sr("Transition","TransitionCancel"),transitionend:sr("Transition","TransitionEnd")},df={},th={};xi&&(th=document.createElement("div").style,"AnimationEvent"in window||(delete Xl.animationend.animation,delete Xl.animationiteration.animation,delete Xl.animationstart.animation),"TransitionEvent"in window||delete Xl.transitionend.transition);function Bn(e){if(df[e])return df[e];if(!Xl[e])return e;var i=Xl[e],o;for(o in i)if(i.hasOwnProperty(o)&&o in th)return df[e]=i[o];return e}var gf=Bn("animationend"),$i=Bn("animationiteration"),mf=Bn("animationstart"),rr=Bn("transitionrun"),Fo=Bn("transitionstart"),Wr=Bn("transitioncancel"),eh=Bn("transitionend"),nh=new Map,lr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Ba(e,i){nh.set(e,i),mi(i,[e])}var ui=[],ws=0,or=0;function ac(){for(var e=ws,i=or=ws=0;i<e;){var o=ui[i];ui[i++]=null;var h=ui[i];ui[i++]=null;var p=ui[i];ui[i++]=null;var E=ui[i];if(ui[i++]=null,h!==null&&p!==null){var B=h.pending;B===null?p.next=p:(p.next=B.next,B.next=p),h.pending=p}E!==0&&rc(o,p,E)}}function sc(e,i,o,h){ui[ws++]=e,ui[ws++]=i,ui[ws++]=o,ui[ws++]=h,or|=h,e.lanes|=h,e=e.alternate,e!==null&&(e.lanes|=h)}function Ql(e,i,o,h){return sc(e,i,o,h),lc(e)}function ur(e,i){return sc(e,null,null,i),lc(e)}function rc(e,i,o){e.lanes|=o;var h=e.alternate;h!==null&&(h.lanes|=o);for(var p=!1,E=e.return;E!==null;)E.childLanes|=o,h=E.alternate,h!==null&&(h.childLanes|=o),E.tag===22&&(e=E.stateNode,e===null||e._visibility&1||(p=!0)),e=E,E=E.return;p&&i!==null&&e.tag===3&&(E=e.stateNode,p=31-Zn(o),E=E.hiddenUpdates,e=E[p],e===null?E[p]=[i]:e.push(i),i.lane=o|536870912)}function lc(e){if(50<Qa)throw Qa=0,Or=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Jr={},ih=new WeakMap;function ta(e,i){if(typeof e=="object"&&e!==null){var o=ih.get(e);return o!==void 0?o:(i={value:e,source:i,stack:$(i)},ih.set(e,i),i)}return{value:e,source:i,stack:$(i)}}var Zl=[],$r=0,vi=null,oc=0,rn=[],ba=0,cr=null,Ns=1,hr="";function Vi(e,i){Zl[$r++]=oc,Zl[$r++]=vi,vi=e,oc=i}function pf(e,i,o){rn[ba++]=Ns,rn[ba++]=hr,rn[ba++]=cr,cr=e;var h=Ns;e=hr;var p=32-Zn(h)-1;h&=~(1<<p),o+=1;var E=32-Zn(i)+p;if(30<E){var B=p-p%5;E=(h&(1<<B)-1).toString(32),h>>=B,p-=B,Ns=1<<32-Zn(i)+p|o<<p|h,hr=E+e}else Ns=1<<E|o<<p|h,hr=e}function uc(e){e.return!==null&&(Vi(e,1),pf(e,1,0))}function tl(e){for(;e===vi;)vi=Zl[--$r],Zl[$r]=null,oc=Zl[--$r],Zl[$r]=null;for(;e===cr;)cr=rn[--ba],rn[ba]=null,hr=rn[--ba],rn[ba]=null,Ns=rn[--ba],rn[ba]=null}var Ei=null,ai=null,Ne=!1,Ga=null,Ha=!1,cc=Error(r(519));function Wl(e){var i=Error(r(418,""));throw Os(ta(i,e)),cc}function Ng(e){var i=e.stateNode,o=e.type,h=e.memoizedProps;switch(i[Rn]=e,i[ue]=h,o){case"dialog":Me("cancel",i),Me("close",i);break;case"iframe":case"object":case"embed":Me("load",i);break;case"video":case"audio":for(o=0;o<Zf.length;o++)Me(Zf[o],i);break;case"source":Me("error",i);break;case"img":case"image":case"link":Me("error",i),Me("load",i);break;case"details":Me("toggle",i);break;case"input":Me("invalid",i),Pr(i,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Lr(i);break;case"select":Me("invalid",i);break;case"textarea":Me("invalid",i),va(i,h.value,h.defaultValue,h.children),Lr(i)}o=h.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||h.suppressHydrationWarning===!0||My(i.textContent,o)?(h.popover!=null&&(Me("beforetoggle",i),Me("toggle",i)),h.onScroll!=null&&Me("scroll",i),h.onScrollEnd!=null&&Me("scrollend",i),h.onClick!=null&&(i.onclick=Rm),i=!0):i=!1,i||Wl(e)}function Og(e){for(Ei=e.return;Ei;)switch(Ei.tag){case 3:case 27:Ha=!0;return;case 5:case 13:Ha=!1;return;default:Ei=Ei.return}}function Ko(e){if(e!==Ei)return!1;if(!Ne)return Og(e),Ne=!0,!1;var i=!1,o;if((o=e.tag!==3&&e.tag!==27)&&((o=e.tag===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||fp(e.type,e.memoizedProps)),o=!o),o&&(i=!0),i&&ai&&Wl(e),Og(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(o=e.data,o==="/$"){if(i===0){ai=xr(e.nextSibling);break t}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;e=e.nextSibling}ai=null}}else ai=Ei?xr(e.stateNode.nextSibling):null;return!0}function Yo(){ai=Ei=null,Ne=!1}function Os(e){Ga===null?Ga=[e]:Ga.push(e)}var el=Error(r(460)),yf=Error(r(474)),ah={then:function(){}};function Mg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function hc(){}function nl(e,i,o){switch(o=e[o],o===void 0?e.push(i):o!==i&&(i.then(hc,hc),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,e===el?Error(r(483)):e;default:if(typeof i.status=="string")i.then(hc,hc);else{if(e=Xe,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(h){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=h}},function(h){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=h}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,e===el?Error(r(483)):e}throw Xo=i,el}}var Xo=null;function Be(){if(Xo===null)throw Error(r(459));var e=Xo;return Xo=null,e}var il=null,fc=0;function dc(e){var i=fc;return fc+=1,il===null&&(il=[]),nl(il,e,i)}function gc(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function sh(e,i){throw i.$$typeof===c?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function xg(e){var i=e._init;return i(e._payload)}function Vg(e){function i(ht,rt){if(e){var mt=ht.deletions;mt===null?(ht.deletions=[rt],ht.flags|=16):mt.push(rt)}}function o(ht,rt){if(!e)return null;for(;rt!==null;)i(ht,rt),rt=rt.sibling;return null}function h(ht){for(var rt=new Map;ht!==null;)ht.key!==null?rt.set(ht.key,ht):rt.set(ht.index,ht),ht=ht.sibling;return rt}function p(ht,rt){return ht=zi(ht,rt),ht.index=0,ht.sibling=null,ht}function E(ht,rt,mt){return ht.index=mt,e?(mt=ht.alternate,mt!==null?(mt=mt.index,mt<rt?(ht.flags|=33554434,rt):mt):(ht.flags|=33554434,rt)):(ht.flags|=1048576,rt)}function B(ht){return e&&ht.alternate===null&&(ht.flags|=33554434),ht}function Z(ht,rt,mt,Dt){return rt===null||rt.tag!==6?(rt=qn(mt,ht.mode,Dt),rt.return=ht,rt):(rt=p(rt,mt),rt.return=ht,rt)}function tt(ht,rt,mt,Dt){var Gt=mt.type;return Gt===_?bt(ht,rt,mt.props.children,Dt,mt.key):rt!==null&&(rt.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===C&&xg(Gt)===rt.type)?(rt=p(rt,mt.props),gc(rt,mt),rt.return=ht,rt):(rt=uu(mt.type,mt.key,mt.props,null,ht.mode,Dt),gc(rt,mt),rt.return=ht,rt)}function lt(ht,rt,mt,Dt){return rt===null||rt.tag!==4||rt.stateNode.containerInfo!==mt.containerInfo||rt.stateNode.implementation!==mt.implementation?(rt=Cc(mt,ht.mode,Dt),rt.return=ht,rt):(rt=p(rt,mt.children||[]),rt.return=ht,rt)}function bt(ht,rt,mt,Dt,Gt){return rt===null||rt.tag!==7?(rt=Tl(mt,ht.mode,Dt,Gt),rt.return=ht,rt):(rt=p(rt,mt),rt.return=ht,rt)}function Ot(ht,rt,mt){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return rt=qn(""+rt,ht.mode,mt),rt.return=ht,rt;if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case d:return mt=uu(rt.type,rt.key,rt.props,null,ht.mode,mt),gc(mt,rt),mt.return=ht,mt;case m:return rt=Cc(rt,ht.mode,mt),rt.return=ht,rt;case C:var Dt=rt._init;return rt=Dt(rt._payload),Ot(ht,rt,mt)}if(st(rt)||j(rt))return rt=Tl(rt,ht.mode,mt,null),rt.return=ht,rt;if(typeof rt.then=="function")return Ot(ht,dc(rt),mt);if(rt.$$typeof===w)return Ot(ht,Th(ht,rt),mt);sh(ht,rt)}return null}function yt(ht,rt,mt,Dt){var Gt=rt!==null?rt.key:null;if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return Gt!==null?null:Z(ht,rt,""+mt,Dt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case d:return mt.key===Gt?tt(ht,rt,mt,Dt):null;case m:return mt.key===Gt?lt(ht,rt,mt,Dt):null;case C:return Gt=mt._init,mt=Gt(mt._payload),yt(ht,rt,mt,Dt)}if(st(mt)||j(mt))return Gt!==null?null:bt(ht,rt,mt,Dt,null);if(typeof mt.then=="function")return yt(ht,rt,dc(mt),Dt);if(mt.$$typeof===w)return yt(ht,rt,Th(ht,mt),Dt);sh(ht,mt)}return null}function St(ht,rt,mt,Dt,Gt){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return ht=ht.get(mt)||null,Z(rt,ht,""+Dt,Gt);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case d:return ht=ht.get(Dt.key===null?mt:Dt.key)||null,tt(rt,ht,Dt,Gt);case m:return ht=ht.get(Dt.key===null?mt:Dt.key)||null,lt(rt,ht,Dt,Gt);case C:var Te=Dt._init;return Dt=Te(Dt._payload),St(ht,rt,mt,Dt,Gt)}if(st(Dt)||j(Dt))return ht=ht.get(mt)||null,bt(rt,ht,Dt,Gt,null);if(typeof Dt.then=="function")return St(ht,rt,mt,dc(Dt),Gt);if(Dt.$$typeof===w)return St(ht,rt,mt,Th(rt,Dt),Gt);sh(rt,Dt)}return null}function kt(ht,rt,mt,Dt){for(var Gt=null,Te=null,qt=rt,Wt=rt=0,Di=null;qt!==null&&Wt<mt.length;Wt++){qt.index>Wt?(Di=qt,qt=null):Di=qt.sibling;var Ge=yt(ht,qt,mt[Wt],Dt);if(Ge===null){qt===null&&(qt=Di);break}e&&qt&&Ge.alternate===null&&i(ht,qt),rt=E(Ge,rt,Wt),Te===null?Gt=Ge:Te.sibling=Ge,Te=Ge,qt=Di}if(Wt===mt.length)return o(ht,qt),Ne&&Vi(ht,Wt),Gt;if(qt===null){for(;Wt<mt.length;Wt++)qt=Ot(ht,mt[Wt],Dt),qt!==null&&(rt=E(qt,rt,Wt),Te===null?Gt=qt:Te.sibling=qt,Te=qt);return Ne&&Vi(ht,Wt),Gt}for(qt=h(qt);Wt<mt.length;Wt++)Di=St(qt,ht,Wt,mt[Wt],Dt),Di!==null&&(e&&Di.alternate!==null&&qt.delete(Di.key===null?Wt:Di.key),rt=E(Di,rt,Wt),Te===null?Gt=Di:Te.sibling=Di,Te=Di);return e&&qt.forEach(function(_u){return i(ht,_u)}),Ne&&Vi(ht,Wt),Gt}function se(ht,rt,mt,Dt){if(mt==null)throw Error(r(151));for(var Gt=null,Te=null,qt=rt,Wt=rt=0,Di=null,Ge=mt.next();qt!==null&&!Ge.done;Wt++,Ge=mt.next()){qt.index>Wt?(Di=qt,qt=null):Di=qt.sibling;var _u=yt(ht,qt,Ge.value,Dt);if(_u===null){qt===null&&(qt=Di);break}e&&qt&&_u.alternate===null&&i(ht,qt),rt=E(_u,rt,Wt),Te===null?Gt=_u:Te.sibling=_u,Te=_u,qt=Di}if(Ge.done)return o(ht,qt),Ne&&Vi(ht,Wt),Gt;if(qt===null){for(;!Ge.done;Wt++,Ge=mt.next())Ge=Ot(ht,Ge.value,Dt),Ge!==null&&(rt=E(Ge,rt,Wt),Te===null?Gt=Ge:Te.sibling=Ge,Te=Ge);return Ne&&Vi(ht,Wt),Gt}for(qt=h(qt);!Ge.done;Wt++,Ge=mt.next())Ge=St(qt,ht,Wt,Ge.value,Dt),Ge!==null&&(e&&Ge.alternate!==null&&qt.delete(Ge.key===null?Wt:Ge.key),rt=E(Ge,rt,Wt),Te===null?Gt=Ge:Te.sibling=Ge,Te=Ge);return e&&qt.forEach(function(r5){return i(ht,r5)}),Ne&&Vi(ht,Wt),Gt}function Kn(ht,rt,mt,Dt){if(typeof mt=="object"&&mt!==null&&mt.type===_&&mt.key===null&&(mt=mt.props.children),typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case d:t:{for(var Gt=mt.key;rt!==null;){if(rt.key===Gt){if(Gt=mt.type,Gt===_){if(rt.tag===7){o(ht,rt.sibling),Dt=p(rt,mt.props.children),Dt.return=ht,ht=Dt;break t}}else if(rt.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===C&&xg(Gt)===rt.type){o(ht,rt.sibling),Dt=p(rt,mt.props),gc(Dt,mt),Dt.return=ht,ht=Dt;break t}o(ht,rt);break}else i(ht,rt);rt=rt.sibling}mt.type===_?(Dt=Tl(mt.props.children,ht.mode,Dt,mt.key),Dt.return=ht,ht=Dt):(Dt=uu(mt.type,mt.key,mt.props,null,ht.mode,Dt),gc(Dt,mt),Dt.return=ht,ht=Dt)}return B(ht);case m:t:{for(Gt=mt.key;rt!==null;){if(rt.key===Gt)if(rt.tag===4&&rt.stateNode.containerInfo===mt.containerInfo&&rt.stateNode.implementation===mt.implementation){o(ht,rt.sibling),Dt=p(rt,mt.children||[]),Dt.return=ht,ht=Dt;break t}else{o(ht,rt);break}else i(ht,rt);rt=rt.sibling}Dt=Cc(mt,ht.mode,Dt),Dt.return=ht,ht=Dt}return B(ht);case C:return Gt=mt._init,mt=Gt(mt._payload),Kn(ht,rt,mt,Dt)}if(st(mt))return kt(ht,rt,mt,Dt);if(j(mt)){if(Gt=j(mt),typeof Gt!="function")throw Error(r(150));return mt=Gt.call(mt),se(ht,rt,mt,Dt)}if(typeof mt.then=="function")return Kn(ht,rt,dc(mt),Dt);if(mt.$$typeof===w)return Kn(ht,rt,Th(ht,mt),Dt);sh(ht,mt)}return typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint"?(mt=""+mt,rt!==null&&rt.tag===6?(o(ht,rt.sibling),Dt=p(rt,mt),Dt.return=ht,ht=Dt):(o(ht,rt),Dt=qn(mt,ht.mode,Dt),Dt.return=ht,ht=Dt),B(ht)):o(ht,rt)}return function(ht,rt,mt,Dt){try{fc=0;var Gt=Kn(ht,rt,mt,Dt);return il=null,Gt}catch(qt){if(qt===el)throw qt;var Te=Un(29,qt,null,ht.mode);return Te.lanes=Dt,Te.return=ht,Te}finally{}}}var fr=Vg(!0),dr=Vg(!1),Jl=ct(null),$l=ct(0);function al(e,i){e=Nr,Ct($l,e),Ct(Jl,i),Nr=e|i.baseLanes}function rh(){Ct($l,Nr),Ct(Jl,Jl.current)}function mc(){Nr=$l.current,At(Jl),At($l)}var ea=ct(null),Ms=null;function gr(e){var i=e.alternate;Ct(Gn,Gn.current&1),Ct(ea,e),Ms===null&&(i===null||Jl.current!==null||i.memoizedState!==null)&&(Ms=e)}function _f(e){if(e.tag===22){if(Ct(Gn,Gn.current),Ct(ea,e),Ms===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(Ms=e)}}else mr()}function mr(){Ct(Gn,Gn.current),Ct(ea,ea.current)}function xs(e){At(ea),Ms===e&&(Ms=null),At(Gn)}var Gn=ct(0);function Qo(e){for(var i=e;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var me=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(o,h){e.push(h)}};this.abort=function(){i.aborted=!0,e.forEach(function(o){return o()})}},Y0=a.unstable_scheduleCallback,Aa=a.unstable_NormalPriority,wn={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vf(){return{controller:new me,data:new Map,refCount:0}}function sl(e){e.refCount--,e.refCount===0&&Y0(Aa,function(){e.controller.abort()})}var Vs=null,rl=0,to=0,ll=null;function X0(e,i){if(Vs===null){var o=Vs=[];rl=0,to=ip(),ll={status:"pending",value:void 0,then:function(h){o.push(h)}}}return rl++,i.then(Ef,Ef),i}function Ef(){if(--rl===0&&Vs!==null){ll!==null&&(ll.status="fulfilled");var e=Vs;Vs=null,to=0,ll=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function ol(e,i){var o=[],h={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return e.then(function(){h.status="fulfilled",h.value=i;for(var p=0;p<o.length;p++)(0,o[p])(i)},function(p){for(h.status="rejected",h.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),h}var lh=R.S;R.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&X0(e,i),lh!==null&&lh(e,i)};var pr=ct(null);function pc(){var e=pr.current;return e!==null?e:Xe.pooledCache}function Zo(e,i){i===null?Ct(pr,pr.current):Ct(pr,i.pool)}function yr(){var e=pc();return e===null?null:{parent:wn._currentValue,pool:e}}var _r=0,ce=null,qe=null,Hn=null,Zt=!1,ul=!1,cl=!1,Wo=0,hl=0,Jo=null,Q0=0;function Tn(){throw Error(r(321))}function eo(e,i){if(i===null)return!1;for(var o=0;o<i.length&&o<e.length;o++)if(!Wi(e[o],i[o]))return!1;return!0}function Sf(e,i,o,h,p,E){return _r=E,ce=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,R.H=e===null||e.memoizedState===null?dl:Er,cl=!1,E=o(h,p),cl=!1,ul&&(E=Ig(i,o,h,p)),Ug(e),E}function Ug(e){R.H=Is;var i=qe!==null&&qe.next!==null;if(_r=0,Hn=qe=ce=null,Zt=!1,hl=0,Jo=null,i)throw Error(r(300));e===null||Jn||(e=e.dependencies,e!==null&&iu(e)&&(Jn=!0))}function Ig(e,i,o,h){ce=e;var p=0;do{if(ul&&(Jo=null),hl=0,ul=!1,25<=p)throw Error(r(301));if(p+=1,Hn=qe=null,e.updateQueue!=null){var E=e.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}R.H=ao,E=i(o,h)}while(ul);return E}function Z0(){var e=R.H,i=e.useState()[0];return i=typeof i.then=="function"?_c(i):i,e=e.useState()[0],(qe!==null?qe.memoizedState:null)!==e&&(ce.flags|=1024),i}function Tf(){var e=Wo!==0;return Wo=0,e}function yc(e,i,o){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~o}function oh(e){if(Zt){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Zt=!1}_r=0,Hn=qe=ce=null,ul=!1,hl=Wo=0,Jo=null}function ci(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?ce.memoizedState=Hn=e:Hn=Hn.next=e,Hn}function Nn(){if(qe===null){var e=ce.alternate;e=e!==null?e.memoizedState:null}else e=qe.next;var i=Hn===null?ce.memoizedState:Hn.next;if(i!==null)Hn=i,qe=e;else{if(e===null)throw ce.alternate===null?Error(r(467)):Error(r(310));qe=e,e={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Hn===null?ce.memoizedState=Hn=e:Hn=Hn.next=e}return Hn}var uh;uh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function _c(e){var i=hl;return hl+=1,Jo===null&&(Jo=[]),e=nl(Jo,e,i),i=ce,(Hn===null?i.memoizedState:Hn.next)===null&&(i=i.alternate,R.H=i===null||i.memoizedState===null?dl:Er),e}function $o(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return _c(e);if(e.$$typeof===w)return Si(e)}throw Error(r(438,String(e)))}function hs(e){var i=null,o=ce.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var h=ce.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(i={data:h.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=uh(),ce.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(e),h=0;h<e;h++)o[h]=z;return i.index++,o}function dn(e,i){return typeof i=="function"?i(e):i}function fs(e){var i=Nn();return na(i,qe,e)}function na(e,i,o){var h=e.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var p=e.baseQueue,E=h.pending;if(E!==null){if(p!==null){var B=p.next;p.next=E.next,E.next=B}i.baseQueue=p=E,h.pending=null}if(E=e.baseState,p===null)e.memoizedState=E;else{i=p.next;var Z=B=null,tt=null,lt=i,bt=!1;do{var Ot=lt.lane&-536870913;if(Ot!==lt.lane?(Ft&Ot)===Ot:(_r&Ot)===Ot){var yt=lt.revertLane;if(yt===0)tt!==null&&(tt=tt.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),Ot===to&&(bt=!0);else if((_r&yt)===yt){lt=lt.next,yt===to&&(bt=!0);continue}else Ot={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},tt===null?(Z=tt=Ot,B=E):tt=tt.next=Ot,ce.lanes|=yt,vs|=yt;Ot=lt.action,cl&&o(E,Ot),E=lt.hasEagerState?lt.eagerState:o(E,Ot)}else yt={lane:Ot,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},tt===null?(Z=tt=yt,B=E):tt=tt.next=yt,ce.lanes|=Ot,vs|=Ot;lt=lt.next}while(lt!==null&&lt!==i);if(tt===null?B=E:tt.next=Z,!Wi(E,e.memoizedState)&&(Jn=!0,bt&&(o=ll,o!==null)))throw o;e.memoizedState=E,e.baseState=B,e.baseQueue=tt,h.lastRenderedState=E}return p===null&&(h.lanes=0),[e.memoizedState,h.dispatch]}function ch(e){var i=Nn(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=e;var h=o.dispatch,p=o.pending,E=i.memoizedState;if(p!==null){o.pending=null;var B=p=p.next;do E=e(E,B.action),B=B.next;while(B!==p);Wi(E,i.memoizedState)||(Jn=!0),i.memoizedState=E,i.baseQueue===null&&(i.baseState=E),o.lastRenderedState=E}return[E,h]}function Lg(e,i,o){var h=ce,p=Nn(),E=Ne;if(E){if(o===void 0)throw Error(r(407));o=o()}else o=i();var B=!Wi((qe||p).memoizedState,o);if(B&&(p.memoizedState=o,Jn=!0),p=p.queue,Cf(zg.bind(null,h,p,e),[e]),p.getSnapshot!==i||B||Hn!==null&&Hn.memoizedState.tag&1){if(h.flags|=2048,Us(9,fl.bind(null,h,p,o,i),{destroy:void 0},null),Xe===null)throw Error(r(349));E||_r&60||Ui(h,i,o)}return o}function Ui(e,i,o){e.flags|=16384,e={getSnapshot:i,value:o},i=ce.updateQueue,i===null?(i=uh(),ce.updateQueue=i,i.stores=[e]):(o=i.stores,o===null?i.stores=[e]:o.push(e))}function fl(e,i,o,h){i.value=o,i.getSnapshot=h,Pg(i)&&Bg(e)}function zg(e,i,o){return o(function(){Pg(i)&&Bg(e)})}function Pg(e){var i=e.getSnapshot;e=e.value;try{var o=i();return!Wi(e,o)}catch{return!0}}function Bg(e){var i=ur(e,2);i!==null&&Fn(i,e,2)}function bf(e){var i=ci();if(typeof e=="function"){var o=e;if(e=o(),cl){Fi(!0);try{o()}finally{Fi(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:e},i}function Af(e,i,o,h){return e.baseState=o,na(e,qe,typeof h=="function"?h:dn)}function W0(e,i,o,h,p){if(mh(e))throw Error(r(485));if(e=i.action,e!==null){var E={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){E.listeners.push(B)}};R.T!==null?o(!0):E.isTransition=!1,h(E),o=i.pending,o===null?(E.next=i.pending=E,Rf(i,E)):(E.next=o.next,i.pending=o.next=E)}}function Rf(e,i){var o=i.action,h=i.payload,p=e.state;if(i.isTransition){var E=R.T,B={};R.T=B;try{var Z=o(p,h),tt=R.S;tt!==null&&tt(B,Z),Gg(e,i,Z)}catch(lt){vr(e,i,lt)}finally{R.T=E}}else try{E=o(p,h),Gg(e,i,E)}catch(lt){vr(e,i,lt)}}function Gg(e,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(h){no(e,i,h)},function(h){return vr(e,i,h)}):no(e,i,o)}function no(e,i,o){i.status="fulfilled",i.value=o,Hg(i),e.state=o,i=e.pending,i!==null&&(o=i.next,o===i?e.pending=null:(o=o.next,i.next=o,Rf(e,o)))}function vr(e,i,o){var h=e.pending;if(e.pending=null,h!==null){h=h.next;do i.status="rejected",i.reason=o,Hg(i),i=i.next;while(i!==h)}e.action=null}function Hg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function kg(e,i){return i}function qg(e,i){if(Ne){var o=Xe.formState;if(o!==null){t:{var h=ce;if(Ne){if(ai){e:{for(var p=ai,E=Ha;p.nodeType!==8;){if(!E){p=null;break e}if(p=xr(p.nextSibling),p===null){p=null;break e}}E=p.data,p=E==="F!"||E==="F"?p:null}if(p){ai=xr(p.nextSibling),h=p.data==="F!";break t}}Wl(h)}h=!1}h&&(i=o[0])}}return o=ci(),o.memoizedState=o.baseState=i,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kg,lastRenderedState:i},o.queue=h,o=Of.bind(null,ce,h),h.dispatch=o,h=bf(!1),E=vc.bind(null,ce,!1,h.queue),h=ci(),p={state:i,dispatch:null,action:e,pending:null},h.queue=p,o=W0.bind(null,ce,p,E,o),p.dispatch=o,h.memoizedState=e,[i,o,!1]}function tu(e){var i=Nn();return jg(i,qe,e)}function jg(e,i,o){i=na(e,i,kg)[0],e=fs(dn)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?_c(i):i;var h=Nn(),p=h.queue,E=p.dispatch;return o!==h.memoizedState&&(ce.flags|=2048,Us(9,J0.bind(null,p,o),{destroy:void 0},null)),[i,E,e]}function J0(e,i){e.action=i}function Fg(e){var i=Nn(),o=qe;if(o!==null)return jg(i,o,e);Nn(),i=i.memoizedState,o=Nn();var h=o.queue.dispatch;return o.memoizedState=e,[i,h,!1]}function Us(e,i,o,h){return e={tag:e,create:i,inst:o,deps:h,next:null},i=ce.updateQueue,i===null&&(i=uh(),ce.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=e.next=e:(h=o.next,o.next=e,e.next=h,i.lastEffect=e),e}function Kg(){return Nn().memoizedState}function hh(e,i,o,h){var p=ci();ce.flags|=e,p.memoizedState=Us(1|i,o,{destroy:void 0},h===void 0?null:h)}function fh(e,i,o,h){var p=Nn();h=h===void 0?null:h;var E=p.memoizedState.inst;qe!==null&&h!==null&&eo(h,qe.memoizedState.deps)?p.memoizedState=Us(i,o,E,h):(ce.flags|=e,p.memoizedState=Us(1|i,o,E,h))}function Yg(e,i){hh(8390656,8,e,i)}function Cf(e,i){fh(2048,8,e,i)}function Xg(e,i){return fh(4,2,e,i)}function Qg(e,i){return fh(4,4,e,i)}function Zg(e,i){if(typeof i=="function"){e=e();var o=i(e);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Wg(e,i,o){o=o!=null?o.concat([e]):null,fh(4,4,Zg.bind(null,i,e),o)}function Df(){}function Jg(e,i){var o=Nn();i=i===void 0?null:i;var h=o.memoizedState;return i!==null&&eo(i,h[1])?h[0]:(o.memoizedState=[e,i],e)}function $g(e,i){var o=Nn();i=i===void 0?null:i;var h=o.memoizedState;if(i!==null&&eo(i,h[1]))return h[0];if(h=e(),cl){Fi(!0);try{e()}finally{Fi(!1)}}return o.memoizedState=[h,i],h}function dh(e,i,o){return o===void 0||_r&1073741824?e.memoizedState=i:(e.memoizedState=o,e=Na(),ce.lanes|=e,vs|=e,o)}function tm(e,i,o,h){return Wi(o,i)?o:Jl.current!==null?(e=dh(e,o,h),Wi(e,i)||(Jn=!0),e):_r&42?(e=Na(),ce.lanes|=e,vs|=e,i):(Jn=!0,e.memoizedState=o)}function em(e,i,o,h,p){var E=gt.p;gt.p=E!==0&&8>E?E:8;var B=R.T,Z={};R.T=Z,vc(e,!1,i,o);try{var tt=p(),lt=R.S;if(lt!==null&&lt(Z,tt),tt!==null&&typeof tt=="object"&&typeof tt.then=="function"){var bt=ol(tt,h);io(e,i,bt,Bi(e))}else io(e,i,h,Bi(e))}catch(Ot){io(e,i,{then:function(){},status:"rejected",reason:Ot},Bi())}finally{gt.p=E,R.T=B}}function $0(){}function wf(e,i,o,h){if(e.tag!==5)throw Error(r(476));var p=nm(e).queue;em(e,p,i,Rt,o===null?$0:function(){return im(e),o(h)})}function nm(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:Rt,baseState:Rt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:Rt},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:o},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function im(e){var i=nm(e).next.queue;io(e,i,{},Bi())}function gh(){return Si(ed)}function Nf(){return Nn().memoizedState}function am(){return Nn().memoizedState}function sm(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var o=Bi();e=Da(o);var h=wa(i,e,o);h!==null&&(Fn(h,i,o),pl(h,i,o)),i={cache:vf()},e.payload=i;return}i=i.return}}function rm(e,i,o){var h=Bi();o={lane:h,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},mh(e)?lm(i,o):(o=Ql(e,i,o,h),o!==null&&(Fn(o,e,h),om(o,i,h)))}function Of(e,i,o){var h=Bi();io(e,i,o,h)}function io(e,i,o,h){var p={lane:h,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(mh(e))lm(i,p);else{var E=e.alternate;if(e.lanes===0&&(E===null||E.lanes===0)&&(E=i.lastRenderedReducer,E!==null))try{var B=i.lastRenderedState,Z=E(B,o);if(p.hasEagerState=!0,p.eagerState=Z,Wi(Z,B))return sc(e,i,p,0),Xe===null&&ac(),!1}catch{}finally{}if(o=Ql(e,i,p,h),o!==null)return Fn(o,e,h),om(o,i,h),!0}return!1}function vc(e,i,o,h){if(h={lane:2,revertLane:ip(),action:h,hasEagerState:!1,eagerState:null,next:null},mh(e)){if(i)throw Error(r(479))}else i=Ql(e,o,h,2),i!==null&&Fn(i,e,2)}function mh(e){var i=e.alternate;return e===ce||i!==null&&i===ce}function lm(e,i){ul=Zt=!0;var o=e.pending;o===null?i.next=i:(i.next=o.next,o.next=i),e.pending=i}function om(e,i,o){if(o&4194176){var h=i.lanes;h&=e.pendingLanes,o|=h,i.lanes=o,Ts(e,o)}}var Is={readContext:Si,use:$o,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useLayoutEffect:Tn,useInsertionEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useSyncExternalStore:Tn,useId:Tn};Is.useCacheRefresh=Tn,Is.useMemoCache=Tn,Is.useHostTransitionStatus=Tn,Is.useFormState=Tn,Is.useActionState=Tn,Is.useOptimistic=Tn;var dl={readContext:Si,use:$o,useCallback:function(e,i){return ci().memoizedState=[e,i===void 0?null:i],e},useContext:Si,useEffect:Yg,useImperativeHandle:function(e,i,o){o=o!=null?o.concat([e]):null,hh(4194308,4,Zg.bind(null,i,e),o)},useLayoutEffect:function(e,i){return hh(4194308,4,e,i)},useInsertionEffect:function(e,i){hh(4,2,e,i)},useMemo:function(e,i){var o=ci();i=i===void 0?null:i;var h=e();if(cl){Fi(!0);try{e()}finally{Fi(!1)}}return o.memoizedState=[h,i],h},useReducer:function(e,i,o){var h=ci();if(o!==void 0){var p=o(i);if(cl){Fi(!0);try{o(i)}finally{Fi(!1)}}}else p=i;return h.memoizedState=h.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},h.queue=e,e=e.dispatch=rm.bind(null,ce,e),[h.memoizedState,e]},useRef:function(e){var i=ci();return e={current:e},i.memoizedState=e},useState:function(e){e=bf(e);var i=e.queue,o=Of.bind(null,ce,i);return i.dispatch=o,[e.memoizedState,o]},useDebugValue:Df,useDeferredValue:function(e,i){var o=ci();return dh(o,e,i)},useTransition:function(){var e=bf(!1);return e=em.bind(null,ce,e.queue,!0,!1),ci().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,o){var h=ce,p=ci();if(Ne){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),Xe===null)throw Error(r(349));Ft&60||Ui(h,i,o)}p.memoizedState=o;var E={value:o,getSnapshot:i};return p.queue=E,Yg(zg.bind(null,h,E,e),[e]),h.flags|=2048,Us(9,fl.bind(null,h,E,o,i),{destroy:void 0},null),o},useId:function(){var e=ci(),i=Xe.identifierPrefix;if(Ne){var o=hr,h=Ns;o=(h&~(1<<32-Zn(h)-1)).toString(32)+o,i=":"+i+"R"+o,o=Wo++,0<o&&(i+="H"+o.toString(32)),i+=":"}else o=Q0++,i=":"+i+"r"+o.toString(32)+":";return e.memoizedState=i},useCacheRefresh:function(){return ci().memoizedState=sm.bind(null,ce)}};dl.useMemoCache=hs,dl.useHostTransitionStatus=gh,dl.useFormState=qg,dl.useActionState=qg,dl.useOptimistic=function(e){var i=ci();i.memoizedState=i.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=vc.bind(null,ce,!0,o),o.dispatch=i,[e,i]};var Er={readContext:Si,use:$o,useCallback:Jg,useContext:Si,useEffect:Cf,useImperativeHandle:Wg,useInsertionEffect:Xg,useLayoutEffect:Qg,useMemo:$g,useReducer:fs,useRef:Kg,useState:function(){return fs(dn)},useDebugValue:Df,useDeferredValue:function(e,i){var o=Nn();return tm(o,qe.memoizedState,e,i)},useTransition:function(){var e=fs(dn)[0],i=Nn().memoizedState;return[typeof e=="boolean"?e:_c(e),i]},useSyncExternalStore:Lg,useId:Nf};Er.useCacheRefresh=am,Er.useMemoCache=hs,Er.useHostTransitionStatus=gh,Er.useFormState=tu,Er.useActionState=tu,Er.useOptimistic=function(e,i){var o=Nn();return Af(o,qe,e,i)};var ao={readContext:Si,use:$o,useCallback:Jg,useContext:Si,useEffect:Cf,useImperativeHandle:Wg,useInsertionEffect:Xg,useLayoutEffect:Qg,useMemo:$g,useReducer:ch,useRef:Kg,useState:function(){return ch(dn)},useDebugValue:Df,useDeferredValue:function(e,i){var o=Nn();return qe===null?dh(o,e,i):tm(o,qe.memoizedState,e,i)},useTransition:function(){var e=ch(dn)[0],i=Nn().memoizedState;return[typeof e=="boolean"?e:_c(e),i]},useSyncExternalStore:Lg,useId:Nf};ao.useCacheRefresh=am,ao.useMemoCache=hs,ao.useHostTransitionStatus=gh,ao.useFormState=Fg,ao.useActionState=Fg,ao.useOptimistic=function(e,i){var o=Nn();return qe!==null?Af(o,qe,e,i):(o.baseState=e,[e,o.queue.dispatch])};function Mf(e,i,o,h){i=e.memoizedState,o=o(h,i),o=o==null?i:x({},i,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var xf={isMounted:function(e){return(e=e._reactInternals)?at(e)===e:!1},enqueueSetState:function(e,i,o){e=e._reactInternals;var h=Bi(),p=Da(h);p.payload=i,o!=null&&(p.callback=o),i=wa(e,p,h),i!==null&&(Fn(i,e,h),pl(i,e,h))},enqueueReplaceState:function(e,i,o){e=e._reactInternals;var h=Bi(),p=Da(h);p.tag=1,p.payload=i,o!=null&&(p.callback=o),i=wa(e,p,h),i!==null&&(Fn(i,e,h),pl(i,e,h))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var o=Bi(),h=Da(o);h.tag=2,i!=null&&(h.callback=i),i=wa(e,h,o),i!==null&&(Fn(i,e,o),pl(i,e,o))}};function um(e,i,o,h,p,E,B){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,E,B):i.prototype&&i.prototype.isPureReactComponent?!cs(o,h)||!cs(p,E):!0}function cm(e,i,o,h){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,h),i.state!==e&&xf.enqueueReplaceState(i,i.state,null)}function so(e,i){var o=i;if("ref"in i){o={};for(var h in i)h!=="ref"&&(o[h]=i[h])}if(e=e.defaultProps){o===i&&(o=x({},o));for(var p in e)o[p]===void 0&&(o[p]=e[p])}return o}var ph=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function hm(e){ph(e)}function fm(e){console.error(e)}function dm(e){ph(e)}function yh(e,i){try{var o=e.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(h){setTimeout(function(){throw h})}}function gm(e,i,o){try{var h=e.onCaughtError;h(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Vf(e,i,o){return o=Da(o),o.tag=3,o.payload={element:null},o.callback=function(){yh(e,i)},o}function Uf(e){return e=Da(e),e.tag=3,e}function mm(e,i,o,h){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var E=h.value;e.payload=function(){return p(E)},e.callback=function(){gm(i,o,h)}}var B=o.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(e.callback=function(){gm(i,o,h),typeof p!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var Z=h.stack;this.componentDidCatch(h.value,{componentStack:Z!==null?Z:""})})}function tp(e,i,o,h,p){if(o.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(i=o.alternate,i!==null&&Sc(i,o,p,!0),o=ea.current,o!==null){switch(o.tag){case 13:return Ms===null?Nc():o.alternate===null&&hn===0&&(hn=3),o.flags&=-257,o.flags|=65536,o.lanes=p,h===ah?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([h]):i.add(h),ie(e,h,p)),!1;case 22:return o.flags|=65536,h===ah?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([h])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([h]):o.add(h)),ie(e,h,p)),!1}throw Error(r(435,o.tag))}return ie(e,h,p),Nc(),!1}if(Ne)return i=ea.current,i!==null?(!(i.flags&65536)&&(i.flags|=256),i.flags|=65536,i.lanes=p,h!==cc&&(e=Error(r(422),{cause:h}),Os(ta(e,o)))):(h!==cc&&(i=Error(r(423),{cause:h}),Os(ta(i,o))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,h=ta(h,o),p=Vf(e.stateNode,h,p),su(e,p),hn!==4&&(hn=2)),!1;var E=Error(r(520),{cause:h});if(E=ta(E,o),wc===null?wc=[E]:wc.push(E),hn!==4&&(hn=2),i===null)return!0;h=ta(h,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,e=p&-p,o.lanes|=e,e=Vf(o.stateNode,h,e),su(o,e),!1;case 1:if(i=o.type,E=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(jn===null||!jn.has(E))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Uf(p),mm(p,e,o,h),su(o,p),!1}o=o.return}while(o!==null);return!1}var Ra=Error(r(461)),Jn=!1;function $n(e,i,o,h){i.child=e===null?dr(i,null,o,h):fr(i,e.child,o,h)}function If(e,i,o,h,p){o=o.render;var E=i.ref;if("ref"in h){var B={};for(var Z in h)Z!=="ref"&&(B[Z]=h[Z])}else B=h;return lo(i),h=Sf(e,i,o,B,E,p),Z=Tf(),e!==null&&!Jn?(yc(e,i,p),On(e,i,p)):(Ne&&Z&&uc(i),i.flags|=1,$n(e,i,h,p),i.child)}function Lf(e,i,o,h,p){if(e===null){var E=o.type;return typeof E=="function"&&!Dr(E)&&E.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=E,zf(e,i,E,h,p)):(e=uu(o.type,null,h,i,i.mode,p),e.ref=i.ref,e.return=i,i.child=e)}if(E=e.child,!jf(e,p)){var B=E.memoizedProps;if(o=o.compare,o=o!==null?o:cs,o(B,h)&&e.ref===i.ref)return On(e,i,p)}return i.flags|=1,e=zi(E,h),e.ref=i.ref,e.return=i,i.child=e}function zf(e,i,o,h,p){if(e!==null){var E=e.memoizedProps;if(cs(E,h)&&e.ref===i.ref)if(Jn=!1,i.pendingProps=h=E,jf(e,p))e.flags&131072&&(Jn=!0);else return i.lanes=e.lanes,On(e,i,p)}return Bf(e,i,o,h,p)}function pm(e,i,o){var h=i.pendingProps,p=h.children,E=(i.stateNode._pendingVisibility&2)!==0,B=e!==null?e.memoizedState:null;if(eu(e,i),h.mode==="hidden"||E){if(i.flags&128){if(h=B!==null?B.baseLanes|o:o,e!==null){for(p=i.child=e.child,E=0;p!==null;)E=E|p.lanes|p.childLanes,p=p.sibling;i.childLanes=E&~h}else i.childLanes=0,i.child=null;return Pf(e,i,h,o)}if(o&536870912)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Zo(i,B!==null?B.cachePool:null),B!==null?al(i,B):rh(),_f(i);else return i.lanes=i.childLanes=536870912,Pf(e,i,B!==null?B.baseLanes|o:o,o)}else B!==null?(Zo(i,B.cachePool),al(i,B),mr(),i.memoizedState=null):(e!==null&&Zo(i,null),rh(),mr());return $n(e,i,p,o),i.child}function Pf(e,i,o,h){var p=pc();return p=p===null?null:{parent:wn._currentValue,pool:p},i.memoizedState={baseLanes:o,cachePool:p},e!==null&&Zo(i,null),rh(),_f(i),e!==null&&Sc(e,i,h,!0),null}function eu(e,i){var o=i.ref;if(o===null)e!==null&&e.ref!==null&&(i.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(e===null||e.ref!==o)&&(i.flags|=2097664)}}function Bf(e,i,o,h,p){return lo(i),o=Sf(e,i,o,h,void 0,p),h=Tf(),e!==null&&!Jn?(yc(e,i,p),On(e,i,p)):(Ne&&h&&uc(i),i.flags|=1,$n(e,i,o,p),i.child)}function ym(e,i,o,h,p,E){return lo(i),i.updateQueue=null,o=Ig(i,h,o,p),Ug(e),h=Tf(),e!==null&&!Jn?(yc(e,i,E),On(e,i,E)):(Ne&&h&&uc(i),i.flags|=1,$n(e,i,o,E),i.child)}function _m(e,i,o,h,p){if(lo(i),i.stateNode===null){var E=Jr,B=o.contextType;typeof B=="object"&&B!==null&&(E=Si(B)),E=new o(h,E),i.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=xf,i.stateNode=E,E._reactInternals=i,E=i.stateNode,E.props=h,E.state=i.memoizedState,E.refs={},Ii(i),B=o.contextType,E.context=typeof B=="object"&&B!==null?Si(B):Jr,E.state=i.memoizedState,B=o.getDerivedStateFromProps,typeof B=="function"&&(Mf(i,o,B,h),E.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(B=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),B!==E.state&&xf.enqueueReplaceState(E,E.state,null),gs(i,h,E,p),Ti(),E.state=i.memoizedState),typeof E.componentDidMount=="function"&&(i.flags|=4194308),h=!0}else if(e===null){E=i.stateNode;var Z=i.memoizedProps,tt=so(o,Z);E.props=tt;var lt=E.context,bt=o.contextType;B=Jr,typeof bt=="object"&&bt!==null&&(B=Si(bt));var Ot=o.getDerivedStateFromProps;bt=typeof Ot=="function"||typeof E.getSnapshotBeforeUpdate=="function",Z=i.pendingProps!==Z,bt||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(Z||lt!==B)&&cm(i,E,h,B),kn=!1;var yt=i.memoizedState;E.state=yt,gs(i,h,E,p),Ti(),lt=i.memoizedState,Z||yt!==lt||kn?(typeof Ot=="function"&&(Mf(i,o,Ot,h),lt=i.memoizedState),(tt=kn||um(i,o,tt,h,yt,lt,B))?(bt||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(i.flags|=4194308)):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=lt),E.props=h,E.state=lt,E.context=B,h=tt):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{E=i.stateNode,bh(e,i),B=i.memoizedProps,bt=so(o,B),E.props=bt,Ot=i.pendingProps,yt=E.context,lt=o.contextType,tt=Jr,typeof lt=="object"&&lt!==null&&(tt=Si(lt)),Z=o.getDerivedStateFromProps,(lt=typeof Z=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(B!==Ot||yt!==tt)&&cm(i,E,h,tt),kn=!1,yt=i.memoizedState,E.state=yt,gs(i,h,E,p),Ti();var St=i.memoizedState;B!==Ot||yt!==St||kn||e!==null&&e.dependencies!==null&&iu(e.dependencies)?(typeof Z=="function"&&(Mf(i,o,Z,h),St=i.memoizedState),(bt=kn||um(i,o,bt,h,yt,St,tt)||e!==null&&e.dependencies!==null&&iu(e.dependencies))?(lt||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,St,tt),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,St,tt)),typeof E.componentDidUpdate=="function"&&(i.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof E.componentDidUpdate!="function"||B===e.memoizedProps&&yt===e.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||B===e.memoizedProps&&yt===e.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=St),E.props=h,E.state=St,E.context=tt,h=bt):(typeof E.componentDidUpdate!="function"||B===e.memoizedProps&&yt===e.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||B===e.memoizedProps&&yt===e.memoizedState||(i.flags|=1024),h=!1)}return E=h,eu(e,i),h=(i.flags&128)!==0,E||h?(E=i.stateNode,o=h&&typeof o.getDerivedStateFromError!="function"?null:E.render(),i.flags|=1,e!==null&&h?(i.child=fr(i,e.child,null,p),i.child=fr(i,null,o,p)):$n(e,i,o,p),i.memoizedState=E.state,e=i.child):e=On(e,i,p),e}function Gf(e,i,o,h){return Yo(),i.flags|=256,$n(e,i,o,h),i.child}var Hf={dehydrated:null,treeContext:null,retryLane:0};function si(e){return{baseLanes:e,cachePool:yr()}}function _h(e,i,o){return e=e!==null?e.childLanes&~o:0,i&&(e|=Pi),e}function vm(e,i,o){var h=i.pendingProps,p=!1,E=(i.flags&128)!==0,B;if((B=E)||(B=e!==null&&e.memoizedState===null?!1:(Gn.current&2)!==0),B&&(p=!0,i.flags&=-129),B=(i.flags&32)!==0,i.flags&=-33,e===null){if(Ne){if(p?gr(i):mr(),Ne){var Z=ai,tt;if(tt=Z){t:{for(tt=Z,Z=Ha;tt.nodeType!==8;){if(!Z){Z=null;break t}if(tt=xr(tt.nextSibling),tt===null){Z=null;break t}}Z=tt}Z!==null?(i.memoizedState={dehydrated:Z,treeContext:cr!==null?{id:Ns,overflow:hr}:null,retryLane:536870912},tt=Un(18,null,null,0),tt.stateNode=Z,tt.return=i,i.child=tt,Ei=i,ai=null,tt=!0):tt=!1}tt||Wl(i)}if(Z=i.memoizedState,Z!==null&&(Z=Z.dehydrated,Z!==null))return Z.data==="$!"?i.lanes=16:i.lanes=536870912,null;xs(i)}return Z=h.children,h=h.fallback,p?(mr(),p=i.mode,Z=qf({mode:"hidden",children:Z},p),h=Tl(h,p,o,null),Z.return=i,h.return=i,Z.sibling=h,i.child=Z,p=i.child,p.memoizedState=si(o),p.childLanes=_h(e,B,o),i.memoizedState=Hf,h):(gr(i),kf(i,Z))}if(tt=e.memoizedState,tt!==null&&(Z=tt.dehydrated,Z!==null)){if(E)i.flags&256?(gr(i),i.flags&=-257,i=vh(e,i,o)):i.memoizedState!==null?(mr(),i.child=e.child,i.flags|=128,i=null):(mr(),p=h.fallback,Z=i.mode,h=qf({mode:"visible",children:h.children},Z),p=Tl(p,Z,o,null),p.flags|=2,h.return=i,p.return=i,h.sibling=p,i.child=h,fr(i,e.child,null,o),h=i.child,h.memoizedState=si(o),h.childLanes=_h(e,B,o),i.memoizedState=Hf,i=p);else if(gr(i),Z.data==="$!"){if(B=Z.nextSibling&&Z.nextSibling.dataset,B)var lt=B.dgst;B=lt,h=Error(r(419)),h.stack="",h.digest=B,Os({value:h,source:null,stack:null}),i=vh(e,i,o)}else if(Jn||Sc(e,i,o,!1),B=(o&e.childLanes)!==0,Jn||B){if(B=Xe,B!==null){if(h=o&-o,h&42)h=1;else switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=64;break;case 268435456:h=134217728;break;default:h=0}if(h=h&(B.suspendedLanes|o)?0:h,h!==0&&h!==tt.retryLane)throw tt.retryLane=h,ur(e,h),Fn(B,e,h),Ra}Z.data==="$?"||Nc(),i=vh(e,i,o)}else Z.data==="$?"?(i.flags|=128,i.child=e.child,i=mo.bind(null,e),Z._reactRetry=i,i=null):(e=tt.treeContext,ai=xr(Z.nextSibling),Ei=i,Ne=!0,Ga=null,Ha=!1,e!==null&&(rn[ba++]=Ns,rn[ba++]=hr,rn[ba++]=cr,Ns=e.id,hr=e.overflow,cr=i),i=kf(i,h.children),i.flags|=4096);return i}return p?(mr(),p=h.fallback,Z=i.mode,tt=e.child,lt=tt.sibling,h=zi(tt,{mode:"hidden",children:h.children}),h.subtreeFlags=tt.subtreeFlags&31457280,lt!==null?p=zi(lt,p):(p=Tl(p,Z,o,null),p.flags|=2),p.return=i,h.return=i,h.sibling=p,i.child=h,h=p,p=i.child,Z=e.child.memoizedState,Z===null?Z=si(o):(tt=Z.cachePool,tt!==null?(lt=wn._currentValue,tt=tt.parent!==lt?{parent:lt,pool:lt}:tt):tt=yr(),Z={baseLanes:Z.baseLanes|o,cachePool:tt}),p.memoizedState=Z,p.childLanes=_h(e,B,o),i.memoizedState=Hf,h):(gr(i),o=e.child,e=o.sibling,o=zi(o,{mode:"visible",children:h.children}),o.return=i,o.sibling=null,e!==null&&(B=i.deletions,B===null?(i.deletions=[e],i.flags|=16):B.push(e)),i.child=o,i.memoizedState=null,o)}function kf(e,i){return i=qf({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function qf(e,i){return Kf(e,i,0,null)}function vh(e,i,o){return fr(i,e.child,null,o),e=kf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Eh(e,i,o){e.lanes|=i;var h=e.alternate;h!==null&&(h.lanes|=i),Ca(e.return,i,o)}function gl(e,i,o,h,p){var E=e.memoizedState;E===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:p}:(E.isBackwards=i,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=o,E.tailMode=p)}function ro(e,i,o){var h=i.pendingProps,p=h.revealOrder,E=h.tail;if($n(e,i,h.children,o),h=Gn.current,h&2)h=h&1|2,i.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Eh(e,o,i);else if(e.tag===19)Eh(e,o,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}h&=1}switch(Ct(Gn,h),p){case"forwards":for(o=i.child,p=null;o!==null;)e=o.alternate,e!==null&&Qo(e)===null&&(p=o),o=o.sibling;o=p,o===null?(p=i.child,i.child=null):(p=o.sibling,o.sibling=null),gl(i,!1,p,o,E);break;case"backwards":for(o=null,p=i.child,i.child=null;p!==null;){if(e=p.alternate,e!==null&&Qo(e)===null){i.child=p;break}e=p.sibling,p.sibling=o,o=p,p=e}gl(i,!0,o,null,E);break;case"together":gl(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function On(e,i,o){if(e!==null&&(i.dependencies=e.dependencies),vs|=i.lanes,!(o&i.childLanes))if(e!==null){if(Sc(e,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,o=zi(e,e.pendingProps),i.child=o,o.return=i;e.sibling!==null;)e=e.sibling,o=o.sibling=zi(e,e.pendingProps),o.return=i;o.sibling=null}return i.child}function jf(e,i){return e.lanes&i?!0:(e=e.dependencies,!!(e!==null&&iu(e)))}function ep(e,i,o){switch(i.tag){case 3:Kt(i,i.stateNode.containerInfo),ml(i,wn,e.memoizedState.cache),Yo();break;case 27:case 5:le(i);break;case 4:Kt(i,i.stateNode.containerInfo);break;case 10:ml(i,i.type,i.memoizedProps.value);break;case 13:var h=i.memoizedState;if(h!==null)return h.dehydrated!==null?(gr(i),i.flags|=128,null):o&i.child.childLanes?vm(e,i,o):(gr(i),e=On(e,i,o),e!==null?e.sibling:null);gr(i);break;case 19:var p=(e.flags&128)!==0;if(h=(o&i.childLanes)!==0,h||(Sc(e,i,o,!1),h=(o&i.childLanes)!==0),p){if(h)return ro(e,i,o);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ct(Gn,Gn.current),h)break;return null;case 22:case 23:return i.lanes=0,pm(e,i,o);case 24:ml(i,wn,e.memoizedState.cache)}return On(e,i,o)}function Ec(e,i,o){if(e!==null)if(e.memoizedProps!==i.pendingProps)Jn=!0;else{if(!jf(e,o)&&!(i.flags&128))return Jn=!1,ep(e,i,o);Jn=!!(e.flags&131072)}else Jn=!1,Ne&&i.flags&1048576&&pf(i,oc,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var h=i.elementType,p=h._init;if(h=p(h._payload),i.type=h,typeof h=="function")Dr(h)?(e=so(h,e),i.tag=1,i=_m(null,i,h,e,o)):(i.tag=0,i=Bf(null,i,h,e,o));else{if(h!=null){if(p=h.$$typeof,p===M){i.tag=11,i=If(null,i,h,e,o);break t}else if(p===K){i.tag=14,i=Lf(null,i,h,e,o);break t}}throw i=V(h)||h,Error(r(306,i,""))}}return i;case 0:return Bf(e,i,i.type,i.pendingProps,o);case 1:return h=i.type,p=so(h,i.pendingProps),_m(e,i,h,p,o);case 3:t:{if(Kt(i,i.stateNode.containerInfo),e===null)throw Error(r(387));var E=i.pendingProps;p=i.memoizedState,h=p.element,bh(e,i),gs(i,E,null,o);var B=i.memoizedState;if(E=B.cache,ml(i,wn,E),E!==p.cache&&Sh(i,[wn],o,!0),Ti(),E=B.element,p.isDehydrated)if(p={element:E,isDehydrated:!1,cache:B.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=Gf(e,i,E,o);break t}else if(E!==h){h=ta(Error(r(424)),i),Os(h),i=Gf(e,i,E,o);break t}else for(ai=xr(i.stateNode.containerInfo.firstChild),Ei=i,Ne=!0,Ga=null,Ha=!0,o=dr(i,null,E,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Yo(),E===h){i=On(e,i,o);break t}$n(e,i,E,o)}i=i.child}return i;case 26:return eu(e,i),e===null?(o=Gy(i.type,null,i.pendingProps,null))?i.memoizedState=o:Ne||(o=i.type,e=i.pendingProps,h=Cm($t.current).createElement(o),h[Rn]=i,h[ue]=e,Gi(h,o,e),sn(h),i.stateNode=h):i.memoizedState=Gy(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return le(i),e===null&&Ne&&(h=i.stateNode=zy(i.type,i.pendingProps,$t.current),Ei=i,Ha=!0,ai=xr(h.firstChild)),h=i.pendingProps.children,e!==null||Ne?$n(e,i,h,o):i.child=fr(i,null,h,o),eu(e,i),i.child;case 5:return e===null&&Ne&&((p=h=ai)&&(h=L3(h,i.type,i.pendingProps,Ha),h!==null?(i.stateNode=h,Ei=i,ai=xr(h.firstChild),Ha=!1,p=!0):p=!1),p||Wl(i)),le(i),p=i.type,E=i.pendingProps,B=e!==null?e.memoizedProps:null,h=E.children,fp(p,E)?h=null:B!==null&&fp(p,B)&&(i.flags|=32),i.memoizedState!==null&&(p=Sf(e,i,Z0,null,null,o),ed._currentValue=p),eu(e,i),$n(e,i,h,o),i.child;case 6:return e===null&&Ne&&((e=o=ai)&&(o=z3(o,i.pendingProps,Ha),o!==null?(i.stateNode=o,Ei=i,ai=null,e=!0):e=!1),e||Wl(i)),null;case 13:return vm(e,i,o);case 4:return Kt(i,i.stateNode.containerInfo),h=i.pendingProps,e===null?i.child=fr(i,null,h,o):$n(e,i,h,o),i.child;case 11:return If(e,i,i.type,i.pendingProps,o);case 7:return $n(e,i,i.pendingProps,o),i.child;case 8:return $n(e,i,i.pendingProps.children,o),i.child;case 12:return $n(e,i,i.pendingProps.children,o),i.child;case 10:return h=i.pendingProps,ml(i,i.type,h.value),$n(e,i,h.children,o),i.child;case 9:return p=i.type._context,h=i.pendingProps.children,lo(i),p=Si(p),h=h(p),i.flags|=1,$n(e,i,h,o),i.child;case 14:return Lf(e,i,i.type,i.pendingProps,o);case 15:return zf(e,i,i.type,i.pendingProps,o);case 19:return ro(e,i,o);case 22:return pm(e,i,o);case 24:return lo(i),h=Si(wn),e===null?(p=pc(),p===null&&(p=Xe,E=vf(),p.pooledCache=E,E.refCount++,E!==null&&(p.pooledCacheLanes|=o),p=E),i.memoizedState={parent:h,cache:p},Ii(i),ml(i,wn,p)):(e.lanes&o&&(bh(e,i),gs(i,null,null,o),Ti()),p=e.memoizedState,E=i.memoizedState,p.parent!==h?(p={parent:h,cache:h},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),ml(i,wn,h)):(h=E.cache,ml(i,wn,h),h!==p.cache&&Sh(i,[wn],o,!0))),$n(e,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}var nu=ct(null),Ls=null,ds=null;function ml(e,i,o){Ct(nu,i._currentValue),i._currentValue=o}function Sr(e){e._currentValue=nu.current,At(nu)}function Ca(e,i,o){for(;e!==null;){var h=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),e===o)break;e=e.return}}function Sh(e,i,o,h){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var E=p.dependencies;if(E!==null){var B=p.child;E=E.firstContext;t:for(;E!==null;){var Z=E;E=p;for(var tt=0;tt<i.length;tt++)if(Z.context===i[tt]){E.lanes|=o,Z=E.alternate,Z!==null&&(Z.lanes|=o),Ca(E.return,o,e),h||(B=null);break t}E=Z.next}}else if(p.tag===18){if(B=p.return,B===null)throw Error(r(341));B.lanes|=o,E=B.alternate,E!==null&&(E.lanes|=o),Ca(B,o,e),B=null}else B=p.child;if(B!==null)B.return=p;else for(B=p;B!==null;){if(B===e){B=null;break}if(p=B.sibling,p!==null){p.return=B.return,B=p;break}B=B.return}p=B}}function Sc(e,i,o,h){e=null;for(var p=i,E=!1;p!==null;){if(!E){if(p.flags&524288)E=!0;else if(p.flags&262144)break}if(p.tag===10){var B=p.alternate;if(B===null)throw Error(r(387));if(B=B.memoizedProps,B!==null){var Z=p.type;Wi(p.pendingProps.value,B.value)||(e!==null?e.push(Z):e=[Z])}}else if(p===oe.current){if(B=p.alternate,B===null)throw Error(r(387));B.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(ed):e=[ed])}p=p.return}e!==null&&Sh(i,e,o,h),i.flags|=262144}function iu(e){for(e=e.firstContext;e!==null;){if(!Wi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function lo(e){Ls=e,ds=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Si(e){return au(Ls,e)}function Th(e,i){return Ls===null&&lo(e),au(e,i)}function au(e,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ds===null){if(e===null)throw Error(r(308));ds=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else ds=ds.next=i;return o}var kn=!1;function Ii(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bh(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Da(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wa(e,i,o){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,ne&2){var p=h.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),h.pending=i,i=lc(e),rc(e,null,o),i}return sc(e,h,i,o),lc(e)}function pl(e,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194176)!==0)){var h=i.lanes;h&=e.pendingLanes,o|=h,i.lanes=o,Ts(e,o)}}function su(e,i){var o=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var p=null,E=null;if(o=o.firstBaseUpdate,o!==null){do{var B={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};E===null?p=E=B:E=E.next=B,o=o.next}while(o!==null);E===null?p=E=i:E=E.next=i}else p=E=i;o={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:E,shared:h.shared,callbacks:h.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=i:e.next=i,o.lastBaseUpdate=i}var ia=!1;function Ti(){if(ia){var e=ll;if(e!==null)throw e}}function gs(e,i,o,h){ia=!1;var p=e.updateQueue;kn=!1;var E=p.firstBaseUpdate,B=p.lastBaseUpdate,Z=p.shared.pending;if(Z!==null){p.shared.pending=null;var tt=Z,lt=tt.next;tt.next=null,B===null?E=lt:B.next=lt,B=tt;var bt=e.alternate;bt!==null&&(bt=bt.updateQueue,Z=bt.lastBaseUpdate,Z!==B&&(Z===null?bt.firstBaseUpdate=lt:Z.next=lt,bt.lastBaseUpdate=tt))}if(E!==null){var Ot=p.baseState;B=0,bt=lt=tt=null,Z=E;do{var yt=Z.lane&-536870913,St=yt!==Z.lane;if(St?(Ft&yt)===yt:(h&yt)===yt){yt!==0&&yt===to&&(ia=!0),bt!==null&&(bt=bt.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});t:{var kt=e,se=Z;yt=i;var Kn=o;switch(se.tag){case 1:if(kt=se.payload,typeof kt=="function"){Ot=kt.call(Kn,Ot,yt);break t}Ot=kt;break t;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=se.payload,yt=typeof kt=="function"?kt.call(Kn,Ot,yt):kt,yt==null)break t;Ot=x({},Ot,yt);break t;case 2:kn=!0}}yt=Z.callback,yt!==null&&(e.flags|=64,St&&(e.flags|=8192),St=p.callbacks,St===null?p.callbacks=[yt]:St.push(yt))}else St={lane:yt,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},bt===null?(lt=bt=St,tt=Ot):bt=bt.next=St,B|=yt;if(Z=Z.next,Z===null){if(Z=p.shared.pending,Z===null)break;St=Z,Z=St.next,St.next=null,p.lastBaseUpdate=St,p.shared.pending=null}}while(!0);bt===null&&(tt=Ot),p.baseState=tt,p.firstBaseUpdate=lt,p.lastBaseUpdate=bt,E===null&&(p.shared.lanes=0),vs|=B,e.lanes=B,e.memoizedState=Ot}}function zs(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function Ps(e,i){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)zs(o[e],i)}function Mn(e,i){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var p=h.next;o=p;do{if((o.tag&e)===e){h=void 0;var E=o.create,B=o.inst;h=E(),B.destroy=h}o=o.next}while(o!==p)}}catch(Z){xt(i,i.return,Z)}}function ka(e,i,o){try{var h=i.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var E=p.next;h=E;do{if((h.tag&e)===e){var B=h.inst,Z=B.destroy;if(Z!==void 0){B.destroy=void 0,p=i;var tt=o;try{Z()}catch(lt){xt(p,tt,lt)}}}h=h.next}while(h!==E)}}catch(lt){xt(i,i.return,lt)}}function Tr(e){var i=e.updateQueue;if(i!==null){var o=e.stateNode;try{Ps(i,o)}catch(h){xt(e,e.return,h)}}}function Tc(e,i,o){o.props=so(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(h){xt(e,i,h)}}function xn(e,i){try{var o=e.ref;if(o!==null){var h=e.stateNode;switch(e.tag){case 26:case 27:case 5:var p=h;break;default:p=h}typeof o=="function"?e.refCleanup=o(p):o.current=p}}catch(E){xt(e,i,E)}}function Ye(e,i){var o=e.ref,h=e.refCleanup;if(o!==null)if(typeof h=="function")try{h()}catch(p){xt(e,i,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){xt(e,i,p)}else o.current=null}function Oe(e){var i=e.type,o=e.memoizedProps,h=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&h.focus();break t;case"img":o.src?h.src=o.src:o.srcSet&&(h.srcset=o.srcSet)}}catch(p){xt(e,e.return,p)}}function qa(e,i,o){try{var h=e.stateNode;M3(h,e.type,o,i),h[ue]=i}catch(p){xt(e,e.return,p)}}function ms(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function bc(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||ms(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function aa(e,i,o){var h=e.tag;if(h===5||h===6)e=e.stateNode,i?o.nodeType===8?o.parentNode.insertBefore(e,i):o.insertBefore(e,i):(o.nodeType===8?(i=o.parentNode,i.insertBefore(e,o)):(i=o,i.appendChild(e)),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Rm));else if(h!==4&&h!==27&&(e=e.child,e!==null))for(aa(e,i,o),e=e.sibling;e!==null;)aa(e,i,o),e=e.sibling}function br(e,i,o){var h=e.tag;if(h===5||h===6)e=e.stateNode,i?o.insertBefore(e,i):o.appendChild(e);else if(h!==4&&h!==27&&(e=e.child,e!==null))for(br(e,i,o),e=e.sibling;e!==null;)br(e,i,o),e=e.sibling}var ps=!1,un=!1,yl=!1,Ah=typeof WeakSet=="function"?WeakSet:Set,Vn=null,Rh=!1;function ru(e,i){if(e=e.containerInfo,cp=xm,e=cf(e),ic(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else t:{o=(o=e.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var p=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{o.nodeType,E.nodeType}catch{o=null;break t}var B=0,Z=-1,tt=-1,lt=0,bt=0,Ot=e,yt=null;e:for(;;){for(var St;Ot!==o||p!==0&&Ot.nodeType!==3||(Z=B+p),Ot!==E||h!==0&&Ot.nodeType!==3||(tt=B+h),Ot.nodeType===3&&(B+=Ot.nodeValue.length),(St=Ot.firstChild)!==null;)yt=Ot,Ot=St;for(;;){if(Ot===e)break e;if(yt===o&&++lt===p&&(Z=B),yt===E&&++bt===h&&(tt=B),(St=Ot.nextSibling)!==null)break;Ot=yt,yt=Ot.parentNode}Ot=St}o=Z===-1||tt===-1?null:{start:Z,end:tt}}else o=null}o=o||{start:0,end:0}}else o=null;for(hp={focusedElem:e,selectionRange:o},xm=!1,Vn=i;Vn!==null;)if(i=Vn,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Vn=e;else for(;Vn!==null;){switch(i=Vn,E=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&E!==null){e=void 0,o=i,p=E.memoizedProps,E=E.memoizedState,h=o.stateNode;try{var kt=so(o.type,p,o.elementType===o.type);e=h.getSnapshotBeforeUpdate(kt,E),h.__reactInternalSnapshotBeforeUpdate=e}catch(se){xt(o,o.return,se)}}break;case 3:if(e&1024){if(e=i.stateNode.containerInfo,o=e.nodeType,o===9)mp(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":mp(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(r(163))}if(e=i.sibling,e!==null){e.return=i.return,Vn=e;break}Vn=i.return}return kt=Rh,Rh=!1,kt}function lu(e,i,o){var h=o.flags;switch(o.tag){case 0:case 11:case 15:Bs(e,o),h&4&&Mn(5,o);break;case 1:if(Bs(e,o),h&4)if(e=o.stateNode,i===null)try{e.componentDidMount()}catch(Z){xt(o,o.return,Z)}else{var p=so(o.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(p,i,e.__reactInternalSnapshotBeforeUpdate)}catch(Z){xt(o,o.return,Z)}}h&64&&Tr(o),h&512&&xn(o,o.return);break;case 3:if(Bs(e,o),h&64&&(h=o.updateQueue,h!==null)){if(e=null,o.child!==null)switch(o.child.tag){case 27:case 5:e=o.child.stateNode;break;case 1:e=o.child.stateNode}try{Ps(h,e)}catch(Z){xt(o,o.return,Z)}}break;case 26:Bs(e,o),h&512&&xn(o,o.return);break;case 27:case 5:Bs(e,o),i===null&&h&4&&Oe(o),h&512&&xn(o,o.return);break;case 12:Bs(e,o);break;case 13:Bs(e,o),h&4&&Em(e,o);break;case 22:if(p=o.memoizedState!==null||ps,!p){i=i!==null&&i.memoizedState!==null||un;var E=ps,B=un;ps=p,(un=i)&&!B?_s(e,o,(o.subtreeFlags&8772)!==0):Bs(e,o),ps=E,un=B}h&512&&(o.memoizedProps.mode==="manual"?xn(o,o.return):Ye(o,o.return));break;default:Bs(e,o)}}function Ch(e){var i=e.alternate;i!==null&&(e.alternate=null,Ch(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Ws(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var cn=null,ri=!1;function bi(e,i,o){for(o=o.child;o!==null;)Dh(e,i,o),o=o.sibling}function Dh(e,i,o){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(an,o)}catch{}switch(o.tag){case 26:un||Ye(o,i),bi(e,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:un||Ye(o,i);var h=cn,p=ri;for(cn=o.stateNode,bi(e,i,o),o=o.stateNode,i=o.attributes;i.length;)o.removeAttributeNode(i[0]);Ws(o),cn=h,ri=p;break;case 5:un||Ye(o,i);case 6:p=cn;var E=ri;if(cn=null,bi(e,i,o),cn=p,ri=E,cn!==null)if(ri)try{e=cn,h=o.stateNode,e.nodeType===8?e.parentNode.removeChild(h):e.removeChild(h)}catch(B){xt(o,i,B)}else try{cn.removeChild(o.stateNode)}catch(B){xt(o,i,B)}break;case 18:cn!==null&&(ri?(i=cn,o=o.stateNode,i.nodeType===8?gp(i.parentNode,o):i.nodeType===1&&gp(i,o),sd(i)):gp(cn,o.stateNode));break;case 4:h=cn,p=ri,cn=o.stateNode.containerInfo,ri=!0,bi(e,i,o),cn=h,ri=p;break;case 0:case 11:case 14:case 15:un||ka(2,o,i),un||ka(4,o,i),bi(e,i,o);break;case 1:un||(Ye(o,i),h=o.stateNode,typeof h.componentWillUnmount=="function"&&Tc(o,i,h)),bi(e,i,o);break;case 21:bi(e,i,o);break;case 22:un||Ye(o,i),un=(h=un)||o.memoizedState!==null,bi(e,i,o),un=h;break;default:bi(e,i,o)}}function Em(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{sd(e)}catch(o){xt(i,i.return,o)}}function Ac(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Ah),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Ah),i;default:throw Error(r(435,e.tag))}}function Rc(e,i){var o=Ac(e);i.forEach(function(h){var p=pt.bind(null,e,h);o.has(h)||(o.add(h),h.then(p,p))})}function Li(e,i){var o=i.deletions;if(o!==null)for(var h=0;h<o.length;h++){var p=o[h],E=e,B=i,Z=B;t:for(;Z!==null;){switch(Z.tag){case 27:case 5:cn=Z.stateNode,ri=!1;break t;case 3:cn=Z.stateNode.containerInfo,ri=!0;break t;case 4:cn=Z.stateNode.containerInfo,ri=!0;break t}Z=Z.return}if(cn===null)throw Error(r(160));Dh(E,B,p),cn=null,ri=!1,E=p.alternate,E!==null&&(E.return=null),p.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)oo(i,e),i=i.sibling}var Ai=null;function oo(e,i){var o=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Li(i,e),Ri(e),h&4&&(ka(3,e,e.return),Mn(3,e),ka(5,e,e.return));break;case 1:Li(i,e),Ri(e),h&512&&(un||o===null||Ye(o,o.return)),h&64&&ps&&(e=e.updateQueue,e!==null&&(h=e.callbacks,h!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?h:o.concat(h))));break;case 26:var p=Ai;if(Li(i,e),Ri(e),h&512&&(un||o===null||Ye(o,o.return)),h&4){var E=o!==null?o.memoizedState:null;if(h=e.memoizedState,o===null)if(h===null)if(e.stateNode===null){t:{h=e.type,o=e.memoizedProps,p=p.ownerDocument||p;e:switch(h){case"title":E=p.getElementsByTagName("title")[0],(!E||E[bs]||E[Rn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=p.createElement(h),p.head.insertBefore(E,p.querySelector("head > title"))),Gi(E,h,o),E[Rn]=e,sn(E),h=E;break t;case"link":var B=qy("link","href",p).get(h+(o.href||""));if(B){for(var Z=0;Z<B.length;Z++)if(E=B[Z],E.getAttribute("href")===(o.href==null?null:o.href)&&E.getAttribute("rel")===(o.rel==null?null:o.rel)&&E.getAttribute("title")===(o.title==null?null:o.title)&&E.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){B.splice(Z,1);break e}}E=p.createElement(h),Gi(E,h,o),p.head.appendChild(E);break;case"meta":if(B=qy("meta","content",p).get(h+(o.content||""))){for(Z=0;Z<B.length;Z++)if(E=B[Z],E.getAttribute("content")===(o.content==null?null:""+o.content)&&E.getAttribute("name")===(o.name==null?null:o.name)&&E.getAttribute("property")===(o.property==null?null:o.property)&&E.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&E.getAttribute("charset")===(o.charSet==null?null:o.charSet)){B.splice(Z,1);break e}}E=p.createElement(h),Gi(E,h,o),p.head.appendChild(E);break;default:throw Error(r(468,h))}E[Rn]=e,sn(E),h=E}e.stateNode=h}else jy(p,e.type,e.stateNode);else e.stateNode=ky(p,h,e.memoizedProps);else E!==h?(E===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):E.count--,h===null?jy(p,e.type,e.stateNode):ky(p,h,e.memoizedProps)):h===null&&e.stateNode!==null&&qa(e,e.memoizedProps,o.memoizedProps)}break;case 27:if(h&4&&e.alternate===null){p=e.stateNode,E=e.memoizedProps;try{for(var tt=p.firstChild;tt;){var lt=tt.nextSibling,bt=tt.nodeName;tt[bs]||bt==="HEAD"||bt==="BODY"||bt==="SCRIPT"||bt==="STYLE"||bt==="LINK"&&tt.rel.toLowerCase()==="stylesheet"||p.removeChild(tt),tt=lt}for(var Ot=e.type,yt=p.attributes;yt.length;)p.removeAttributeNode(yt[0]);Gi(p,Ot,E),p[Rn]=e,p[ue]=E}catch(kt){xt(e,e.return,kt)}}case 5:if(Li(i,e),Ri(e),h&512&&(un||o===null||Ye(o,o.return)),e.flags&32){p=e.stateNode;try{Ea(p,"")}catch(kt){xt(e,e.return,kt)}}h&4&&e.stateNode!=null&&(p=e.memoizedProps,qa(e,p,o!==null?o.memoizedProps:p)),h&1024&&(yl=!0);break;case 6:if(Li(i,e),Ri(e),h&4){if(e.stateNode===null)throw Error(r(162));h=e.memoizedProps,o=e.stateNode;try{o.nodeValue=h}catch(kt){xt(e,e.return,kt)}}break;case 3:if(Nm=null,p=Ai,Ai=Dm(i.containerInfo),Li(i,e),Ai=p,Ri(e),h&4&&o!==null&&o.memoizedState.isDehydrated)try{sd(i.containerInfo)}catch(kt){xt(e,e.return,kt)}yl&&(yl=!1,_l(e));break;case 4:h=Ai,Ai=Dm(e.stateNode.containerInfo),Li(i,e),Ri(e),Ai=h;break;case 12:Li(i,e),Ri(e);break;case 13:Li(i,e),Ri(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(he=nn()),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Rc(e,h)));break;case 22:if(h&512&&(un||o===null||Ye(o,o.return)),tt=e.memoizedState!==null,lt=o!==null&&o.memoizedState!==null,bt=ps,Ot=un,ps=bt||tt,un=Ot||lt,Li(i,e),un=Ot,ps=bt,Ri(e),i=e.stateNode,i._current=e,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,h&8192&&(i._visibility=tt?i._visibility&-2:i._visibility|1,tt&&(i=ps||un,o===null||lt||i||ys(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))t:for(o=null,i=e;;){if(i.tag===5||i.tag===26||i.tag===27){if(o===null){lt=o=i;try{if(p=lt.stateNode,tt)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{B=lt.stateNode,Z=lt.memoizedProps.style;var St=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;B.style.display=St==null||typeof St=="boolean"?"":(""+St).trim()}}catch(kt){xt(lt,lt.return,kt)}}}else if(i.tag===6){if(o===null){lt=i;try{lt.stateNode.nodeValue=tt?"":lt.memoizedProps}catch(kt){xt(lt,lt.return,kt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}h&4&&(h=e.updateQueue,h!==null&&(o=h.retryQueue,o!==null&&(h.retryQueue=null,Rc(e,o))));break;case 19:Li(i,e),Ri(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Rc(e,h)));break;case 21:break;default:Li(i,e),Ri(e)}}function Ri(e){var i=e.flags;if(i&2){try{if(e.tag!==27){t:{for(var o=e.return;o!==null;){if(ms(o)){var h=o;break t}o=o.return}throw Error(r(160))}switch(h.tag){case 27:var p=h.stateNode,E=bc(e);br(e,E,p);break;case 5:var B=h.stateNode;h.flags&32&&(Ea(B,""),h.flags&=-33);var Z=bc(e);br(e,Z,B);break;case 3:case 4:var tt=h.stateNode.containerInfo,lt=bc(e);aa(e,lt,tt);break;default:throw Error(r(161))}}}catch(bt){xt(e,e.return,bt)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function _l(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;_l(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Bs(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)lu(e,i.alternate,i),i=i.sibling}function ys(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:ka(4,i,i.return),ys(i);break;case 1:Ye(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Tc(i,i.return,o),ys(i);break;case 26:case 27:case 5:Ye(i,i.return),ys(i);break;case 22:Ye(i,i.return),i.memoizedState===null&&ys(i);break;default:ys(i)}e=e.sibling}}function _s(e,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var h=i.alternate,p=e,E=i,B=E.flags;switch(E.tag){case 0:case 11:case 15:_s(p,E,o),Mn(4,E);break;case 1:if(_s(p,E,o),h=E,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(lt){xt(h,h.return,lt)}if(h=E,p=h.updateQueue,p!==null){var Z=h.stateNode;try{var tt=p.shared.hiddenCallbacks;if(tt!==null)for(p.shared.hiddenCallbacks=null,p=0;p<tt.length;p++)zs(tt[p],Z)}catch(lt){xt(h,h.return,lt)}}o&&B&64&&Tr(E),xn(E,E.return);break;case 26:case 27:case 5:_s(p,E,o),o&&h===null&&B&4&&Oe(E),xn(E,E.return);break;case 12:_s(p,E,o);break;case 13:_s(p,E,o),o&&B&4&&Em(p,E);break;case 22:E.memoizedState===null&&_s(p,E,o),xn(E,E.return);break;default:_s(p,E,o)}i=i.sibling}}function sa(e,i){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&sl(o))}function ja(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&sl(e))}function ln(e,i,o,h){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ar(e,i,o,h),i=i.sibling}function Ar(e,i,o,h){var p=i.flags;switch(i.tag){case 0:case 11:case 15:ln(e,i,o,h),p&2048&&Mn(9,i);break;case 3:ln(e,i,o,h),p&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&sl(e)));break;case 12:if(p&2048){ln(e,i,o,h),e=i.stateNode;try{var E=i.memoizedProps,B=E.id,Z=E.onPostCommit;typeof Z=="function"&&Z(B,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(tt){xt(i,i.return,tt)}}else ln(e,i,o,h);break;case 23:break;case 22:E=i.stateNode,i.memoizedState!==null?E._visibility&4?ln(e,i,o,h):Ue(e,i):E._visibility&4?ln(e,i,o,h):(E._visibility|=4,ee(e,i,o,h,(i.subtreeFlags&10256)!==0)),p&2048&&sa(i.alternate,i);break;case 24:ln(e,i,o,h),p&2048&&ja(i.alternate,i);break;default:ln(e,i,o,h)}}function ee(e,i,o,h,p){for(p=p&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var E=e,B=i,Z=o,tt=h,lt=B.flags;switch(B.tag){case 0:case 11:case 15:ee(E,B,Z,tt,p),Mn(8,B);break;case 23:break;case 22:var bt=B.stateNode;B.memoizedState!==null?bt._visibility&4?ee(E,B,Z,tt,p):Ue(E,B):(bt._visibility|=4,ee(E,B,Z,tt,p)),p&&lt&2048&&sa(B.alternate,B);break;case 24:ee(E,B,Z,tt,p),p&&lt&2048&&ja(B.alternate,B);break;default:ee(E,B,Z,tt,p)}i=i.sibling}}function Ue(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=e,h=i,p=h.flags;switch(h.tag){case 22:Ue(o,h),p&2048&&sa(h.alternate,h);break;case 24:Ue(o,h),p&2048&&ja(h.alternate,h);break;default:Ue(o,h)}i=i.sibling}}var gn=8192;function Rr(e){if(e.subtreeFlags&gn)for(e=e.child;e!==null;)uo(e),e=e.sibling}function uo(e){switch(e.tag){case 26:Rr(e),e.flags&gn&&e.memoizedState!==null&&Z3(Ai,e.memoizedState,e.memoizedProps);break;case 5:Rr(e);break;case 3:case 4:var i=Ai;Ai=Dm(e.stateNode.containerInfo),Rr(e),Ai=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=gn,gn=16777216,Rr(e),gn=i):Rr(e));break;default:Rr(e)}}function vl(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function El(e){var i=e.deletions;if(e.flags&16){if(i!==null)for(var o=0;o<i.length;o++){var h=i[o];Vn=h,Sm(h,e)}vl(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ou(e),e=e.sibling}function ou(e){switch(e.tag){case 0:case 11:case 15:El(e),e.flags&2048&&ka(9,e,e.return);break;case 3:El(e);break;case 12:El(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&4&&(e.return===null||e.return.tag!==13)?(i._visibility&=-5,Cr(e)):El(e);break;default:El(e)}}function Cr(e){var i=e.deletions;if(e.flags&16){if(i!==null)for(var o=0;o<i.length;o++){var h=i[o];Vn=h,Sm(h,e)}vl(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:ka(8,i,i.return),Cr(i);break;case 22:o=i.stateNode,o._visibility&4&&(o._visibility&=-5,Cr(i));break;default:Cr(i)}e=e.sibling}}function Sm(e,i){for(;Vn!==null;){var o=Vn;switch(o.tag){case 0:case 11:case 15:ka(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var h=o.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:sl(o.memoizedState.cache)}if(h=o.child,h!==null)h.return=o,Vn=h;else t:for(o=e;Vn!==null;){h=Vn;var p=h.sibling,E=h.return;if(Ch(h),h===o){Vn=null;break t}if(p!==null){p.return=E,Vn=p;break t}Vn=E}}}function Ff(e,i,o,h){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(e,i,o,h){return new Ff(e,i,o,h)}function Dr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zi(e,i){var o=e.alternate;return o===null?(o=Un(e.tag,i,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=i,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&31457280,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,i=e.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function Sl(e,i){e.flags&=31457282;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,i=o.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function uu(e,i,o,h,p,E){var B=0;if(h=e,typeof e=="function")Dr(e)&&(B=1);else if(typeof e=="string")B=X3(e,o,It.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case _:return Tl(o.children,p,E,i);case v:B=8,p|=24;break;case b:return e=Un(12,o,i,p|2),e.elementType=b,e.lanes=E,e;case I:return e=Un(13,o,i,p),e.elementType=I,e.lanes=E,e;case P:return e=Un(19,o,i,p),e.elementType=P,e.lanes=E,e;case N:return Kf(o,p,E,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D:case w:B=10;break t;case U:B=9;break t;case M:B=11;break t;case K:B=14;break t;case C:B=16,h=null;break t}B=29,o=Error(r(130,e===null?"null":typeof e,"")),h=null}return i=Un(B,o,i,p),i.elementType=e,i.type=h,i.lanes=E,i}function Tl(e,i,o,h){return e=Un(7,e,h,i),e.lanes=o,e}function Kf(e,i,o,h){e=Un(22,e,h,i),e.elementType=N,e.lanes=o;var p={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var E=p._current;if(E===null)throw Error(r(456));if(!(p._pendingVisibility&2)){var B=ur(E,2);B!==null&&(p._pendingVisibility|=2,Fn(B,E,2))}},attach:function(){var E=p._current;if(E===null)throw Error(r(456));if(p._pendingVisibility&2){var B=ur(E,2);B!==null&&(p._pendingVisibility&=-3,Fn(B,E,2))}}};return e.stateNode=p,e}function qn(e,i,o){return e=Un(6,e,null,i),e.lanes=o,e}function Cc(e,i,o){return i=Un(4,e.children!==null?e.children:[],e.key,i),i.lanes=o,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function Fa(e){e.flags|=4}function bl(e,i){if(i.type!=="stylesheet"||i.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Fy(i)){if(i=ea.current,i!==null&&((Ft&4194176)===Ft?Ms!==null:(Ft&62914560)!==Ft&&!(Ft&536870912)||i!==Ms))throw Xo=ah,yf;e.flags|=8192}}function Ka(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?es():536870912,e.lanes|=i,Hs|=i)}function Dc(e,i){if(!Ne)switch(e.tailMode){case"hidden":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function vn(e){var i=e.alternate!==null&&e.alternate.child===e.child,o=0,h=0;if(i)for(var p=e.child;p!==null;)o|=p.lanes|p.childLanes,h|=p.subtreeFlags&31457280,h|=p.flags&31457280,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)o|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=h,e.childLanes=o,i}function np(e,i,o){var h=i.pendingProps;switch(tl(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(i),null;case 1:return vn(i),null;case 3:return o=i.stateNode,h=null,e!==null&&(h=e.memoizedState.cache),i.memoizedState.cache!==h&&(i.flags|=2048),Sr(wn),Fe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Ko(i)?Fa(i):e===null||e.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Ga!==null&&(Za(Ga),Ga=null))),vn(i),null;case 26:return o=i.memoizedState,e===null?(Fa(i),o!==null?(vn(i),bl(i,o)):(vn(i),i.flags&=-16777217)):o?o!==e.memoizedState?(Fa(i),vn(i),bl(i,o)):(vn(i),i.flags&=-16777217):(e.memoizedProps!==h&&Fa(i),vn(i),i.flags&=-16777217),null;case 27:Ke(i),o=$t.current;var p=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==h&&Fa(i);else{if(!h){if(i.stateNode===null)throw Error(r(166));return vn(i),null}e=It.current,Ko(i)?Ng(i):(e=zy(p,h,o),i.stateNode=e,Fa(i))}return vn(i),null;case 5:if(Ke(i),o=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==h&&Fa(i);else{if(!h){if(i.stateNode===null)throw Error(r(166));return vn(i),null}if(e=It.current,Ko(i))Ng(i);else{switch(p=Cm($t.current),e){case 1:e=p.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:e=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":e=p.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":e=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof h.is=="string"?p.createElement("select",{is:h.is}):p.createElement("select"),h.multiple?e.multiple=!0:h.size&&(e.size=h.size);break;default:e=typeof h.is=="string"?p.createElement(o,{is:h.is}):p.createElement(o)}}e[Rn]=i,e[ue]=h;t:for(p=i.child;p!==null;){if(p.tag===5||p.tag===6)e.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===i)break t;for(;p.sibling===null;){if(p.return===null||p.return===i)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}i.stateNode=e;t:switch(Gi(e,o,h),o){case"button":case"input":case"select":case"textarea":e=!!h.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Fa(i)}}return vn(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==h&&Fa(i);else{if(typeof h!="string"&&i.stateNode===null)throw Error(r(166));if(e=$t.current,Ko(i)){if(e=i.stateNode,o=i.memoizedProps,h=null,p=Ei,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}e[Rn]=i,e=!!(e.nodeValue===o||h!==null&&h.suppressHydrationWarning===!0||My(e.nodeValue,o)),e||Wl(i)}else e=Cm(e).createTextNode(h),e[Rn]=i,i.stateNode=e}return vn(i),null;case 13:if(h=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Ko(i),h!==null&&h.dehydrated!==null){if(e===null){if(!p)throw Error(r(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[Rn]=i}else Yo(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;vn(i),p=!1}else Ga!==null&&(Za(Ga),Ga=null),p=!0;if(!p)return i.flags&256?(xs(i),i):(xs(i),null)}if(xs(i),i.flags&128)return i.lanes=o,i;if(o=h!==null,e=e!==null&&e.memoizedState!==null,o){h=i.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool);var E=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==p&&(h.flags|=2048)}return o!==e&&o&&(i.child.flags|=8192),Ka(i,i.updateQueue),vn(i),null;case 4:return Fe(),e===null&&lp(i.stateNode.containerInfo),vn(i),null;case 10:return Sr(i.type),vn(i),null;case 19:if(At(Gn),p=i.memoizedState,p===null)return vn(i),null;if(h=(i.flags&128)!==0,E=p.rendering,E===null)if(h)Dc(p,!1);else{if(hn!==0||e!==null&&e.flags&128)for(e=i.child;e!==null;){if(E=Qo(e),E!==null){for(i.flags|=128,Dc(p,!1),e=E.updateQueue,i.updateQueue=e,Ka(i,e),i.subtreeFlags=0,e=o,o=i.child;o!==null;)Sl(o,e),o=o.sibling;return Ct(Gn,Gn.current&1|2),i.child}e=e.sibling}p.tail!==null&&nn()>ye&&(i.flags|=128,h=!0,Dc(p,!1),i.lanes=4194304)}else{if(!h)if(e=Qo(E),e!==null){if(i.flags|=128,h=!0,e=e.updateQueue,i.updateQueue=e,Ka(i,e),Dc(p,!0),p.tail===null&&p.tailMode==="hidden"&&!E.alternate&&!Ne)return vn(i),null}else 2*nn()-p.renderingStartTime>ye&&o!==536870912&&(i.flags|=128,h=!0,Dc(p,!1),i.lanes=4194304);p.isBackwards?(E.sibling=i.child,i.child=E):(e=p.last,e!==null?e.sibling=E:i.child=E,p.last=E)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=nn(),i.sibling=null,e=Gn.current,Ct(Gn,h?e&1|2:e&1),i):(vn(i),null);case 22:case 23:return xs(i),mc(),h=i.memoizedState!==null,e!==null?e.memoizedState!==null!==h&&(i.flags|=8192):h&&(i.flags|=8192),h?o&536870912&&!(i.flags&128)&&(vn(i),i.subtreeFlags&6&&(i.flags|=8192)):vn(i),o=i.updateQueue,o!==null&&Ka(i,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),h=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),h!==o&&(i.flags|=2048),e!==null&&At(pr),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Sr(wn),vn(i),null;case 25:return null}throw Error(r(156,i.tag))}function bn(e,i){switch(tl(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Sr(wn),Fe(),e=i.flags,e&65536&&!(e&128)?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Ke(i),null;case 13:if(xs(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Yo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return At(Gn),null;case 4:return Fe(),null;case 10:return Sr(i.type),null;case 22:case 23:return xs(i),mc(),e!==null&&At(pr),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Sr(wn),null;case 25:return null;default:return null}}function Yf(e,i){switch(tl(i),i.tag){case 3:Sr(wn),Fe();break;case 26:case 27:case 5:Ke(i);break;case 4:Fe();break;case 13:xs(i);break;case 19:At(Gn);break;case 10:Sr(i.type);break;case 22:case 23:xs(i),mc(),e!==null&&At(pr);break;case 24:Sr(wn)}}var co={getCacheForType:function(e){var i=Si(wn),o=i.data.get(e);return o===void 0&&(o=e(),i.data.set(e,o)),o}},wr=typeof WeakMap=="function"?WeakMap:Map,ne=0,Xe=null,de=null,Ft=0,$e=0,Ie=null,In=!1,Ci=!1,Al=!1,Nr=0,hn=0,vs=0,Gs=0,cu=0,Pi=0,Hs=0,wc=null,pe=null,Qe=!1,he=0,ye=1/0,je=null,jn=null,Ya=!1,Xa=null,ho=0,Es=0,mn=null,Qa=0,Or=null;function Bi(){if(ne&2&&Ft!==0)return Ft&-Ft;if(R.T!==null){var e=to;return e!==0?e:ip()}return qu()}function Na(){Pi===0&&(Pi=!(Ft&536870912)||Ne?Qs():536870912);var e=ea.current;return e!==null&&(e.flags|=32),Pi}function Fn(e,i,o){(e===Xe&&$e===2||e.cancelPendingCommit!==null)&&(Mr(e,0),Oa(e,Ft,Pi,!1)),En(e,o),(!(ne&2)||e!==Xe)&&(e===Xe&&(!(ne&2)&&(Gs|=o),hn===4&&Oa(e,Ft,Pi,!1)),tn(e))}function hu(e,i,o){if(ne&6)throw Error(r(327));var h=!o&&(i&60)===0&&(i&e.expiredLanes)===0||Ys(e,i),p=h?s(e,i):go(e,i,!0),E=h;do{if(p===0){Ci&&!h&&Oa(e,i,0,!1);break}else if(p===6)Oa(e,i,0,!In);else{if(o=e.current.alternate,E&&!Xf(o)){p=go(e,i,!1),E=!1;continue}if(p===2){if(E=i,e.errorRecoveryDisabledLanes&E)var B=0;else B=e.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){i=B;t:{var Z=e;p=wc;var tt=Z.current.memoizedState.isDehydrated;if(tt&&(Mr(Z,B).flags|=256),B=go(Z,B,!1),B!==2){if(Al&&!tt){Z.errorRecoveryDisabledLanes|=E,Gs|=E,p=4;break t}E=pe,pe=p,E!==null&&Za(E)}p=B}if(E=!1,p!==2)continue}}if(p===1){Mr(e,0),Oa(e,i,0,!0);break}t:{switch(h=e,p){case 0:case 1:throw Error(r(345));case 4:if((i&4194176)===i){Oa(h,i,Pi,!In);break t}break;case 2:pe=null;break;case 3:case 5:break;default:throw Error(r(329))}if(h.finishedWork=o,h.finishedLanes=i,(i&62914560)===i&&(E=he+300-nn(),10<E)){if(Oa(h,i,Pi,!In),ya(h,0)!==0)break t;h.timeoutHandle=Uy(wh.bind(null,h,o,pe,je,Qe,i,Pi,Gs,Hs,In,2,-0,0),E);break t}wh(h,o,pe,je,Qe,i,Pi,Gs,Hs,In,0,-0,0)}}break}while(!0);tn(e)}function Za(e){pe===null?pe=e:pe.push.apply(pe,e)}function wh(e,i,o,h,p,E,B,Z,tt,lt,bt,Ot,yt){var St=i.subtreeFlags;if((St&8192||(St&16785408)===16785408)&&(td={stylesheets:null,count:0,unsuspend:Q3},uo(i),i=W3(),i!==null)){e.cancelPendingCommit=i(nt.bind(null,e,o,h,p,B,Z,tt,1,Ot,yt)),Oa(e,E,B,!lt);return}nt(e,o,h,p,B,Z,tt,bt,Ot,yt)}function Xf(e){for(var i=e;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var h=0;h<o.length;h++){var p=o[h],E=p.getSnapshot;p=p.value;try{if(!Wi(E(),p))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Oa(e,i,o,h){i&=~cu,i&=~Gs,e.suspendedLanes|=i,e.pingedLanes&=~i,h&&(e.warmLanes|=i),h=e.expirationTimes;for(var p=i;0<p;){var E=31-Zn(p),B=1<<E;h[E]=-1,p&=~B}o!==0&&Ss(e,o,i)}function fo(){return ne&6?!0:(Se(0),!1)}function ks(){if(de!==null){if($e===0)var e=de.return;else e=de,ds=Ls=null,oh(e),il=null,fc=0,e=de;for(;e!==null;)Yf(e.alternate,e),e=e.return;de=null}}function Mr(e,i){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,V3(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),ks(),Xe=e,de=o=zi(e.current,null),Ft=i,$e=0,Ie=null,In=!1,Ci=Ys(e,i),Al=!1,Hs=Pi=cu=Gs=vs=hn=0,pe=wc=null,Qe=!1,i&8&&(i|=i&32);var h=e.entangledLanes;if(h!==0)for(e=e.entanglements,h&=i;0<h;){var p=31-Zn(h),E=1<<p;i|=e[p],h&=~E}return Nr=i,ac(),o}function Rl(e,i){ce=null,R.H=Is,i===el?(i=Be(),$e=3):i===yf?(i=Be(),$e=4):$e=i===Ra?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ie=i,de===null&&(hn=1,yh(e,ta(i,e.current)))}function fu(){var e=R.H;return R.H=Is,e===null?Is:e}function Nh(){var e=R.A;return R.A=co,e}function Nc(){hn=4,In||(Ft&4194176)!==Ft&&ea.current!==null||(Ci=!0),!(vs&134217727)&&!(Gs&134217727)||Xe===null||Oa(Xe,Ft,Pi,!1)}function go(e,i,o){var h=ne;ne|=2;var p=fu(),E=Nh();(Xe!==e||Ft!==i)&&(je=null,Mr(e,i)),i=!1;var B=hn;t:do try{if($e!==0&&de!==null){var Z=de,tt=Ie;switch($e){case 8:ks(),B=6;break t;case 3:case 2:case 6:ea.current===null&&(i=!0);var lt=$e;if($e=0,Ie=null,S(e,Z,tt,lt),o&&Ci){B=0;break t}break;default:lt=$e,$e=0,Ie=null,S(e,Z,tt,lt)}}Qf(),B=hn;break}catch(bt){Rl(e,bt)}while(!0);return i&&e.shellSuspendCounter++,ds=Ls=null,ne=h,R.H=p,R.A=E,de===null&&(Xe=null,Ft=0,ac()),B}function Qf(){for(;de!==null;)f(de)}function s(e,i){var o=ne;ne|=2;var h=fu(),p=Nh();Xe!==e||Ft!==i?(je=null,ye=nn()+500,Mr(e,i)):Ci=Ys(e,i);t:do try{if($e!==0&&de!==null){i=de;var E=Ie;e:switch($e){case 1:$e=0,Ie=null,S(e,i,E,1);break;case 2:if(Mg(E)){$e=0,Ie=null,y(i);break}i=function(){$e===2&&Xe===e&&($e=7),tn(e)},E.then(i,i);break t;case 3:$e=7;break t;case 4:$e=5;break t;case 7:Mg(E)?($e=0,Ie=null,y(i)):($e=0,Ie=null,S(e,i,E,7));break;case 5:var B=null;switch(de.tag){case 26:B=de.memoizedState;case 5:case 27:var Z=de;if(!B||Fy(B)){$e=0,Ie=null;var tt=Z.sibling;if(tt!==null)de=tt;else{var lt=Z.return;lt!==null?(de=lt,O(lt)):de=null}break e}}$e=0,Ie=null,S(e,i,E,5);break;case 6:$e=0,Ie=null,S(e,i,E,6);break;case 8:ks(),hn=6;break t;default:throw Error(r(462))}}l();break}catch(bt){Rl(e,bt)}while(!0);return ds=Ls=null,R.H=h,R.A=p,ne=o,de!==null?0:(Xe=null,Ft=0,ac(),hn)}function l(){for(;de!==null&&!en();)f(de)}function f(e){var i=Ec(e.alternate,e,Nr);e.memoizedProps=e.pendingProps,i===null?O(e):de=i}function y(e){var i=e,o=i.alternate;switch(i.tag){case 15:case 0:i=ym(o,i,i.pendingProps,i.type,void 0,Ft);break;case 11:i=ym(o,i,i.pendingProps,i.type.render,i.ref,Ft);break;case 5:oh(i);default:Yf(o,i),i=de=Sl(i,Nr),i=Ec(o,i,Nr)}e.memoizedProps=e.pendingProps,i===null?O(e):de=i}function S(e,i,o,h){ds=Ls=null,oh(i),il=null,fc=0;var p=i.return;try{if(tp(e,p,i,o,Ft)){hn=1,yh(e,ta(o,e.current)),de=null;return}}catch(E){if(p!==null)throw de=p,E;hn=1,yh(e,ta(o,e.current)),de=null;return}i.flags&32768?(Ne||h===1?e=!0:Ci||Ft&536870912?e=!1:(In=e=!0,(h===2||h===3||h===6)&&(h=ea.current,h!==null&&h.tag===13&&(h.flags|=16384))),W(i,e)):O(i)}function O(e){var i=e;do{if(i.flags&32768){W(i,In);return}e=i.return;var o=np(i.alternate,i,Nr);if(o!==null){de=o;return}if(i=i.sibling,i!==null){de=i;return}de=i=e}while(i!==null);hn===0&&(hn=5)}function W(e,i){do{var o=bn(e.alternate,e);if(o!==null){o.flags&=32767,de=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(e=e.sibling,e!==null)){de=e;return}de=e=o}while(e!==null);hn=6,de=null}function nt(e,i,o,h,p,E,B,Z,tt,lt){var bt=R.T,Ot=gt.p;try{gt.p=2,R.T=null,ft(e,i,o,h,Ot,p,E,B,Z,tt,lt)}finally{R.T=bt,gt.p=Ot}}function ft(e,i,o,h,p,E,B,Z){do Ut();while(Xa!==null);if(ne&6)throw Error(r(327));var tt=e.finishedWork;if(h=e.finishedLanes,tt===null)return null;if(e.finishedWork=null,e.finishedLanes=0,tt===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var lt=tt.lanes|tt.childLanes;if(lt|=or,ku(e,h,lt,E,B,Z),e===Xe&&(de=Xe=null,Ft=0),!(tt.subtreeFlags&10256)&&!(tt.flags&10256)||Ya||(Ya=!0,Es=lt,mn=o,ut(Qn,function(){return Ut(),null})),o=(tt.flags&15990)!==0,tt.subtreeFlags&15990||o?(o=R.T,R.T=null,E=gt.p,gt.p=2,B=ne,ne|=4,ru(e,tt),oo(tt,e),hf(hp,e.containerInfo),xm=!!cp,hp=cp=null,e.current=tt,lu(e,tt.alternate,tt),Xn(),ne=B,gt.p=E,R.T=o):e.current=tt,Ya?(Ya=!1,Xa=e,ho=h):Tt(e,lt),lt=e.pendingLanes,lt===0&&(jn=null),ma(tt.stateNode),tn(e),i!==null)for(p=e.onRecoverableError,tt=0;tt<i.length;tt++)lt=i[tt],p(lt.value,{componentStack:lt.stack});return ho&3&&Ut(),lt=e.pendingLanes,h&4194218&&lt&42?e===Or?Qa++:(Qa=0,Or=e):Qa=0,Se(0),null}function Tt(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,sl(i)))}function Ut(){if(Xa!==null){var e=Xa,i=Es;Es=0;var o=ns(ho),h=R.T,p=gt.p;try{if(gt.p=32>o?32:o,R.T=null,Xa===null)var E=!1;else{o=mn,mn=null;var B=Xa,Z=ho;if(Xa=null,ho=0,ne&6)throw Error(r(331));var tt=ne;if(ne|=4,ou(B.current),Ar(B,B.current,Z,o),ne=tt,Se(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(an,B)}catch{}E=!0}return E}finally{gt.p=p,R.T=h,Tt(e,i)}}return!1}function zt(e,i,o){i=ta(o,i),i=Vf(e.stateNode,i,2),e=wa(e,i,2),e!==null&&(En(e,2),tn(e))}function xt(e,i,o){if(e.tag===3)zt(e,e,o);else for(;i!==null;){if(i.tag===3){zt(i,e,o);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(jn===null||!jn.has(h))){e=ta(o,e),o=Uf(2),h=wa(i,o,2),h!==null&&(mm(o,h,i,e),En(h,2),tn(h));break}}i=i.return}}function ie(e,i,o){var h=e.pingCache;if(h===null){h=e.pingCache=new wr;var p=new Set;h.set(i,p)}else p=h.get(i),p===void 0&&(p=new Set,h.set(i,p));p.has(o)||(Al=!0,p.add(o),e=Wa.bind(null,e,i,o),i.then(e,e))}function Wa(e,i,o){var h=e.pingCache;h!==null&&h.delete(i),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,Xe===e&&(Ft&o)===o&&(hn===4||hn===3&&(Ft&62914560)===Ft&&300>nn()-he?!(ne&2)&&Mr(e,0):cu|=o,Hs===Ft&&(Hs=0)),tn(e)}function du(e,i){i===0&&(i=es()),e=ur(e,i),e!==null&&(En(e,i),tn(e))}function mo(e){var i=e.memoizedState,o=0;i!==null&&(o=i.retryLane),du(e,o)}function pt(e,i){var o=0;switch(e.tag){case 13:var h=e.stateNode,p=e.memoizedState;p!==null&&(o=p.retryLane);break;case 19:h=e.stateNode;break;case 22:h=e.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(i),du(e,o)}function ut(e,i){return He(e,i)}var _t=null,Mt=null,Ht=!1,Ze=!1,Qt=!1,ge=0;function tn(e){e!==Mt&&e.next===null&&(Mt===null?_t=Mt=e:Mt=Mt.next=e),Ze=!0,Ht||(Ht=!0,A3(Cl))}function Se(e,i){if(!Qt&&Ze){Qt=!0;do for(var o=!1,h=_t;h!==null;){if(e!==0){var p=h.pendingLanes;if(p===0)var E=0;else{var B=h.suspendedLanes,Z=h.pingedLanes;E=(1<<31-Zn(42|e)+1)-1,E&=p&~(B&~Z),E=E&201326677?E&201326677|1:E?E|2:0}E!==0&&(o=!0,Ay(h,E))}else E=Ft,E=ya(h,h===Xe?E:0),!(E&3)||Ys(h,E)||(o=!0,Ay(h,E));h=h.next}while(o);Qt=!1}}function Cl(){Ze=Ht=!1;var e=0;ge!==0&&(x3()&&(e=ge),ge=0);for(var i=nn(),o=null,h=_t;h!==null;){var p=h.next,E=Tm(h,i);E===0?(h.next=null,o===null?_t=p:o.next=p,p===null&&(Mt=o)):(o=h,(e!==0||E&3)&&(Ze=!0)),h=p}Se(e)}function Tm(e,i){for(var o=e.suspendedLanes,h=e.pingedLanes,p=e.expirationTimes,E=e.pendingLanes&-62914561;0<E;){var B=31-Zn(E),Z=1<<B,tt=p[B];tt===-1?(!(Z&o)||Z&h)&&(p[B]=Xs(Z,i)):tt<=i&&(e.expiredLanes|=Z),E&=~Z}if(i=Xe,o=Ft,o=ya(e,e===i?o:0),h=e.callbackNode,o===0||e===i&&$e===2||e.cancelPendingCommit!==null)return h!==null&&h!==null&&oi(h),e.callbackNode=null,e.callbackPriority=0;if(!(o&3)||Ys(e,o)){if(i=o&-o,i===e.callbackPriority)return i;switch(h!==null&&oi(h),ns(o)){case 2:case 8:o=ke;break;case 32:o=Qn;break;case 268435456:o=ji;break;default:o=Qn}return h=by.bind(null,e),o=He(o,h),e.callbackPriority=i,e.callbackNode=o,i}return h!==null&&h!==null&&oi(h),e.callbackPriority=2,e.callbackNode=null,2}function by(e,i){var o=e.callbackNode;if(Ut()&&e.callbackNode!==o)return null;var h=Ft;return h=ya(e,e===Xe?h:0),h===0?null:(hu(e,h,i),Tm(e,nn()),e.callbackNode!=null&&e.callbackNode===o?by.bind(null,e):null)}function Ay(e,i){if(Ut())return null;hu(e,i,!0)}function A3(e){U3(function(){ne&6?He(Ce,e):e()})}function ip(){return ge===0&&(ge=Qs()),ge}function Ry(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ss(""+e)}function Cy(e,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,e.id&&o.setAttribute("form",e.id),i.parentNode.insertBefore(o,i),e=new FormData(e),o.parentNode.removeChild(o),e}function R3(e,i,o,h,p){if(i==="submit"&&o&&o.stateNode===p){var E=Ry((p[ue]||null).action),B=h.submitter;B&&(i=(i=B[ue]||null)?Ry(i.formAction):B.getAttribute("formAction"),i!==null&&(E=i,B=null));var Z=new Kr("action","action",null,h,p);e.push({event:Z,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ge!==0){var tt=B?Cy(p,B):new FormData(p);wf(o,{pending:!0,data:tt,method:p.method,action:E},null,tt)}}else typeof E=="function"&&(Z.preventDefault(),tt=B?Cy(p,B):new FormData(p),wf(o,{pending:!0,data:tt,method:p.method,action:E},E,tt))},currentTarget:p}]})}}for(var ap=0;ap<lr.length;ap++){var sp=lr[ap],C3=sp.toLowerCase(),D3=sp[0].toUpperCase()+sp.slice(1);Ba(C3,"on"+D3)}Ba(gf,"onAnimationEnd"),Ba($i,"onAnimationIteration"),Ba(mf,"onAnimationStart"),Ba("dblclick","onDoubleClick"),Ba("focusin","onFocus"),Ba("focusout","onBlur"),Ba(rr,"onTransitionRun"),Ba(Fo,"onTransitionStart"),Ba(Wr,"onTransitionCancel"),Ba(eh,"onTransitionEnd"),pi("onMouseEnter",["mouseout","mouseover"]),pi("onMouseLeave",["mouseout","mouseover"]),pi("onPointerEnter",["pointerout","pointerover"]),pi("onPointerLeave",["pointerout","pointerover"]),mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zf));function Dy(e,i){i=(i&4)!==0;for(var o=0;o<e.length;o++){var h=e[o],p=h.event;h=h.listeners;t:{var E=void 0;if(i)for(var B=h.length-1;0<=B;B--){var Z=h[B],tt=Z.instance,lt=Z.currentTarget;if(Z=Z.listener,tt!==E&&p.isPropagationStopped())break t;E=Z,p.currentTarget=lt;try{E(p)}catch(bt){ph(bt)}p.currentTarget=null,E=tt}else for(B=0;B<h.length;B++){if(Z=h[B],tt=Z.instance,lt=Z.currentTarget,Z=Z.listener,tt!==E&&p.isPropagationStopped())break t;E=Z,p.currentTarget=lt;try{E(p)}catch(bt){ph(bt)}p.currentTarget=null,E=tt}}}}function Me(e,i){var o=i[Zs];o===void 0&&(o=i[Zs]=new Set);var h=e+"__bubble";o.has(h)||(wy(i,e,2,!1),o.add(h))}function rp(e,i,o){var h=0;i&&(h|=4),wy(o,e,h,i)}var bm="_reactListening"+Math.random().toString(36).slice(2);function lp(e){if(!e[bm]){e[bm]=!0,zl.forEach(function(o){o!=="selectionchange"&&(w3.has(o)||rp(o,!1,e),rp(o,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[bm]||(i[bm]=!0,rp("selectionchange",!1,i))}}function wy(e,i,o,h){switch(Wy(i)){case 2:var p=t5;break;case 8:p=e5;break;default:p=Ep}o=p.bind(null,i,o,e),p=void 0,!Qi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),h?p!==void 0?e.addEventListener(i,o,{capture:!0,passive:p}):e.addEventListener(i,o,!0):p!==void 0?e.addEventListener(i,o,{passive:p}):e.addEventListener(i,o,!1)}function op(e,i,o,h,p){var E=h;if(!(i&1)&&!(i&2)&&h!==null)t:for(;;){if(h===null)return;var B=h.tag;if(B===3||B===4){var Z=h.stateNode.containerInfo;if(Z===p||Z.nodeType===8&&Z.parentNode===p)break;if(B===4)for(B=h.return;B!==null;){var tt=B.tag;if((tt===3||tt===4)&&(tt=B.stateNode.containerInfo,tt===p||tt.nodeType===8&&tt.parentNode===p))return;B=B.return}for(;Z!==null;){if(B=_a(Z),B===null)return;if(tt=B.tag,tt===5||tt===6||tt===26||tt===27){h=E=B;continue t}Z=Z.parentNode}}h=h.return}Yu(function(){var lt=E,bt=Hr(o),Ot=[];t:{var yt=nh.get(e);if(yt!==void 0){var St=Kr,kt=e;switch(e){case"keypress":if(Zi(o)===0)break t;case"keydown":case"keyup":St=Qr;break;case"focusin":kt="focus",St=Gl;break;case"focusout":kt="blur",St=Gl;break;case"beforeblur":case"afterblur":St=Gl;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":St=Ta;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":St=lf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":St=Po;break;case gf:case $i:case mf:St=Hl;break;case eh:St=Ua;break;case"scroll":case"scrollend":St=Xu;break;case"wheel":St=Go;break;case"copy":case"cut":case"paste":St=kl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":St=Kl;break;case"toggle":case"beforetoggle":St=us}var se=(i&4)!==0,Kn=!se&&(e==="scroll"||e==="scrollend"),ht=se?yt!==null?yt+"Capture":null:yt;se=[];for(var rt=lt,mt;rt!==null;){var Dt=rt;if(mt=Dt.stateNode,Dt=Dt.tag,Dt!==5&&Dt!==26&&Dt!==27||mt===null||ht===null||(Dt=kr(rt,ht),Dt!=null&&se.push(Wf(rt,Dt,mt))),Kn)break;rt=rt.return}0<se.length&&(yt=new St(yt,kt,null,o,bt),Ot.push({event:yt,listeners:se}))}}if(!(i&7)){t:{if(yt=e==="mouseover"||e==="pointerover",St=e==="mouseout"||e==="pointerout",yt&&o!==Sa&&(kt=o.relatedTarget||o.fromElement)&&(_a(kt)||kt[is]))break t;if((St||yt)&&(yt=bt.window===bt?bt:(yt=bt.ownerDocument)?yt.defaultView||yt.parentWindow:window,St?(kt=o.relatedTarget||o.toElement,St=lt,kt=kt?_a(kt):null,kt!==null&&(Kn=at(kt),se=kt.tag,kt!==Kn||se!==5&&se!==27&&se!==6)&&(kt=null)):(St=null,kt=lt),St!==kt)){if(se=Ta,Dt="onMouseLeave",ht="onMouseEnter",rt="mouse",(e==="pointerout"||e==="pointerover")&&(se=Kl,Dt="onPointerLeave",ht="onPointerEnter",rt="pointer"),Kn=St==null?yt:Je(St),mt=kt==null?yt:Je(kt),yt=new se(Dt,rt+"leave",St,o,bt),yt.target=Kn,yt.relatedTarget=mt,Dt=null,_a(bt)===lt&&(se=new se(ht,rt+"enter",kt,o,bt),se.target=mt,se.relatedTarget=Kn,Dt=se),Kn=Dt,St&&kt)e:{for(se=St,ht=kt,rt=0,mt=se;mt;mt=Oh(mt))rt++;for(mt=0,Dt=ht;Dt;Dt=Oh(Dt))mt++;for(;0<rt-mt;)se=Oh(se),rt--;for(;0<mt-rt;)ht=Oh(ht),mt--;for(;rt--;){if(se===ht||ht!==null&&se===ht.alternate)break e;se=Oh(se),ht=Oh(ht)}se=null}else se=null;St!==null&&Ny(Ot,yt,St,se,!1),kt!==null&&Kn!==null&&Ny(Ot,Kn,kt,se,!0)}}t:{if(yt=lt?Je(lt):window,St=yt.nodeName&&yt.nodeName.toLowerCase(),St==="select"||St==="input"&&yt.type==="file")var Gt=Qc;else if(Pn(yt))if(Zc)Gt=Zr;else{Gt=Dg;var Te=K0}else St=yt.nodeName,!St||St.toLowerCase()!=="input"||yt.type!=="checkbox"&&yt.type!=="radio"?lt&&Bl(lt.elementType)&&(Gt=Qc):Gt=nc;if(Gt&&(Gt=Gt(e,lt))){Dn(Ot,Gt,o,bt);break t}Te&&Te(e,yt,lt),e==="focusout"&&lt&&yt.type==="number"&&lt.memoizedProps.value!=null&&Pl(yt,"number",yt.value)}switch(Te=lt?Je(lt):window,e){case"focusin":(Pn(Te)||Te.contentEditable==="true")&&(Yl=Te,ff=lt,jo=null);break;case"focusout":jo=ff=Yl=null;break;case"mousedown":$c=!0;break;case"contextmenu":case"mouseup":case"dragend":$c=!1,Pa(Ot,o,bt);break;case"selectionchange":if(Jc)break;case"keydown":case"keyup":Pa(Ot,o,bt)}var qt;if(La)t:{switch(e){case"compositionstart":var Wt="onCompositionStart";break t;case"compositionend":Wt="onCompositionEnd";break t;case"compositionupdate":Wt="onCompositionUpdate";break t}Wt=void 0}else ve?vt(e,o)&&(Wt="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Wt="onCompositionStart");Wt&&(L&&o.locale!=="ko"&&(ve||Wt!=="onCompositionStart"?Wt==="onCompositionEnd"&&ve&&(qt=Io()):(ls=bt,jr="value"in ls?ls.value:ls.textContent,ve=!0)),Te=Am(lt,Wt),0<Te.length&&(Wt=new jl(Wt,e,null,o,bt),Ot.push({event:Wt,listeners:Te}),qt?Wt.data=qt:(qt=Lt(o),qt!==null&&(Wt.data=qt)))),(qt=A?_n(e,o):Ee(e,o))&&(Wt=Am(lt,"onBeforeInput"),0<Wt.length&&(Te=new jl("onBeforeInput","beforeinput",null,o,bt),Ot.push({event:Te,listeners:Wt}),Te.data=qt)),R3(Ot,e,lt,o,bt)}Dy(Ot,i)})}function Wf(e,i,o){return{instance:e,listener:i,currentTarget:o}}function Am(e,i){for(var o=i+"Capture",h=[];e!==null;){var p=e,E=p.stateNode;p=p.tag,p!==5&&p!==26&&p!==27||E===null||(p=kr(e,o),p!=null&&h.unshift(Wf(e,p,E)),p=kr(e,i),p!=null&&h.push(Wf(e,p,E))),e=e.return}return h}function Oh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ny(e,i,o,h,p){for(var E=i._reactName,B=[];o!==null&&o!==h;){var Z=o,tt=Z.alternate,lt=Z.stateNode;if(Z=Z.tag,tt!==null&&tt===h)break;Z!==5&&Z!==26&&Z!==27||lt===null||(tt=lt,p?(lt=kr(o,E),lt!=null&&B.unshift(Wf(o,lt,tt))):p||(lt=kr(o,E),lt!=null&&B.push(Wf(o,lt,tt)))),o=o.return}B.length!==0&&e.push({event:i,listeners:B})}var N3=/\r\n?/g,O3=/\u0000|\uFFFD/g;function Oy(e){return(typeof e=="string"?e:""+e).replace(N3,`
`).replace(O3,"")}function My(e,i){return i=Oy(i),Oy(e)===i}function Rm(){}function on(e,i,o,h,p,E){switch(o){case"children":typeof h=="string"?i==="body"||i==="textarea"&&h===""||Ea(e,h):(typeof h=="number"||typeof h=="bigint")&&i!=="body"&&Ea(e,""+h);break;case"className":$s(e,"class",h);break;case"tabIndex":$s(e,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":$s(e,o,h);break;case"style":Ku(e,h,E);break;case"data":if(i!=="object"){$s(e,"data",h);break}case"src":case"href":if(h===""&&(i!=="a"||o!=="href")){e.removeAttribute(o);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(o);break}h=ss(""+h),e.setAttribute(o,h);break;case"action":case"formAction":if(typeof h=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(o==="formAction"?(i!=="input"&&on(e,i,"name",p.name,p,null),on(e,i,"formEncType",p.formEncType,p,null),on(e,i,"formMethod",p.formMethod,p,null),on(e,i,"formTarget",p.formTarget,p,null)):(on(e,i,"encType",p.encType,p,null),on(e,i,"method",p.method,p,null),on(e,i,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(o);break}h=ss(""+h),e.setAttribute(o,h);break;case"onClick":h!=null&&(e.onclick=Rm);break;case"onScroll":h!=null&&Me("scroll",e);break;case"onScrollEnd":h!=null&&Me("scrollend",e);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(o=h.__html,o!=null){if(p.children!=null)throw Error(r(60));e.innerHTML=o}}break;case"multiple":e.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":e.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){e.removeAttribute("xlink:href");break}o=ss(""+h),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,""+h):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":h===!0?e.setAttribute(o,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,h):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?e.setAttribute(o,h):e.removeAttribute(o);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?e.removeAttribute(o):e.setAttribute(o,h);break;case"popover":Me("beforetoggle",e),Me("toggle",e),Js(e,"popover",h);break;case"xlinkActuate":Xi(e,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Xi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Xi(e,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Xi(e,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Xi(e,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Xi(e,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Xi(e,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Xi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Xi(e,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Js(e,"is",h);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Yc.get(o)||o,Js(e,o,h))}}function up(e,i,o,h,p,E){switch(o){case"style":Ku(e,h,E);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(o=h.__html,o!=null){if(p.children!=null)throw Error(r(60));e.innerHTML=o}}break;case"children":typeof h=="string"?Ea(e,h):(typeof h=="number"||typeof h=="bigint")&&Ea(e,""+h);break;case"onScroll":h!=null&&Me("scroll",e);break;case"onScrollEnd":h!=null&&Me("scrollend",e);break;case"onClick":h!=null&&(e.onclick=Rm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yi.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),i=o.slice(2,p?o.length-7:void 0),E=e[ue]||null,E=E!=null?E[o]:null,typeof E=="function"&&e.removeEventListener(i,E,p),typeof h=="function")){typeof E!="function"&&E!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(i,h,p);break t}o in e?e[o]=h:h===!0?e.setAttribute(o,""):Js(e,o,h)}}}function Gi(e,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",e),Me("load",e);var h=!1,p=!1,E;for(E in o)if(o.hasOwnProperty(E)){var B=o[E];if(B!=null)switch(E){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:on(e,i,E,B,o,null)}}p&&on(e,i,"srcSet",o.srcSet,o,null),h&&on(e,i,"src",o.src,o,null);return;case"input":Me("invalid",e);var Z=E=B=p=null,tt=null,lt=null;for(h in o)if(o.hasOwnProperty(h)){var bt=o[h];if(bt!=null)switch(h){case"name":p=bt;break;case"type":B=bt;break;case"checked":tt=bt;break;case"defaultChecked":lt=bt;break;case"value":E=bt;break;case"defaultValue":Z=bt;break;case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(r(137,i));break;default:on(e,i,h,bt,o,null)}}Pr(e,E,Z,tt,lt,B,p,!1),Lr(e);return;case"select":Me("invalid",e),h=B=E=null;for(p in o)if(o.hasOwnProperty(p)&&(Z=o[p],Z!=null))switch(p){case"value":E=Z;break;case"defaultValue":B=Z;break;case"multiple":h=Z;default:on(e,i,p,Z,o,null)}i=E,o=B,e.multiple=!!h,i!=null?Ve(e,!!h,i,!1):o!=null&&Ve(e,!!h,o,!0);return;case"textarea":Me("invalid",e),E=p=h=null;for(B in o)if(o.hasOwnProperty(B)&&(Z=o[B],Z!=null))switch(B){case"value":h=Z;break;case"defaultValue":p=Z;break;case"children":E=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(91));break;default:on(e,i,B,Z,o,null)}va(e,h,p,E),Lr(e);return;case"option":for(tt in o)if(o.hasOwnProperty(tt)&&(h=o[tt],h!=null))switch(tt){case"selected":e.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:on(e,i,tt,h,o,null)}return;case"dialog":Me("cancel",e),Me("close",e);break;case"iframe":case"object":Me("load",e);break;case"video":case"audio":for(h=0;h<Zf.length;h++)Me(Zf[h],e);break;case"image":Me("error",e),Me("load",e);break;case"details":Me("toggle",e);break;case"embed":case"source":case"link":Me("error",e),Me("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in o)if(o.hasOwnProperty(lt)&&(h=o[lt],h!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:on(e,i,lt,h,o,null)}return;default:if(Bl(i)){for(bt in o)o.hasOwnProperty(bt)&&(h=o[bt],h!==void 0&&up(e,i,bt,h,o,void 0));return}}for(Z in o)o.hasOwnProperty(Z)&&(h=o[Z],h!=null&&on(e,i,Z,h,o,null))}function M3(e,i,o,h){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,E=null,B=null,Z=null,tt=null,lt=null,bt=null;for(St in o){var Ot=o[St];if(o.hasOwnProperty(St)&&Ot!=null)switch(St){case"checked":break;case"value":break;case"defaultValue":tt=Ot;default:h.hasOwnProperty(St)||on(e,i,St,null,h,Ot)}}for(var yt in h){var St=h[yt];if(Ot=o[yt],h.hasOwnProperty(yt)&&(St!=null||Ot!=null))switch(yt){case"type":E=St;break;case"name":p=St;break;case"checked":lt=St;break;case"defaultChecked":bt=St;break;case"value":B=St;break;case"defaultValue":Z=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(r(137,i));break;default:St!==Ot&&on(e,i,yt,St,h,Ot)}}tr(e,B,Z,tt,lt,bt,E,p);return;case"select":St=B=Z=yt=null;for(E in o)if(tt=o[E],o.hasOwnProperty(E)&&tt!=null)switch(E){case"value":break;case"multiple":St=tt;default:h.hasOwnProperty(E)||on(e,i,E,null,h,tt)}for(p in h)if(E=h[p],tt=o[p],h.hasOwnProperty(p)&&(E!=null||tt!=null))switch(p){case"value":yt=E;break;case"defaultValue":Z=E;break;case"multiple":B=E;default:E!==tt&&on(e,i,p,E,h,tt)}i=Z,o=B,h=St,yt!=null?Ve(e,!!o,yt,!1):!!h!=!!o&&(i!=null?Ve(e,!!o,i,!0):Ve(e,!!o,o?[]:"",!1));return;case"textarea":St=yt=null;for(Z in o)if(p=o[Z],o.hasOwnProperty(Z)&&p!=null&&!h.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:on(e,i,Z,null,h,p)}for(B in h)if(p=h[B],E=o[B],h.hasOwnProperty(B)&&(p!=null||E!=null))switch(B){case"value":yt=p;break;case"defaultValue":St=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==E&&on(e,i,B,p,h,E)}Br(e,yt,St);return;case"option":for(var kt in o)if(yt=o[kt],o.hasOwnProperty(kt)&&yt!=null&&!h.hasOwnProperty(kt))switch(kt){case"selected":e.selected=!1;break;default:on(e,i,kt,null,h,yt)}for(tt in h)if(yt=h[tt],St=o[tt],h.hasOwnProperty(tt)&&yt!==St&&(yt!=null||St!=null))switch(tt){case"selected":e.selected=yt&&typeof yt!="function"&&typeof yt!="symbol";break;default:on(e,i,tt,yt,h,St)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var se in o)yt=o[se],o.hasOwnProperty(se)&&yt!=null&&!h.hasOwnProperty(se)&&on(e,i,se,null,h,yt);for(lt in h)if(yt=h[lt],St=o[lt],h.hasOwnProperty(lt)&&yt!==St&&(yt!=null||St!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(r(137,i));break;default:on(e,i,lt,yt,h,St)}return;default:if(Bl(i)){for(var Kn in o)yt=o[Kn],o.hasOwnProperty(Kn)&&yt!==void 0&&!h.hasOwnProperty(Kn)&&up(e,i,Kn,void 0,h,yt);for(bt in h)yt=h[bt],St=o[bt],!h.hasOwnProperty(bt)||yt===St||yt===void 0&&St===void 0||up(e,i,bt,yt,h,St);return}}for(var ht in o)yt=o[ht],o.hasOwnProperty(ht)&&yt!=null&&!h.hasOwnProperty(ht)&&on(e,i,ht,null,h,yt);for(Ot in h)yt=h[Ot],St=o[Ot],!h.hasOwnProperty(Ot)||yt===St||yt==null&&St==null||on(e,i,Ot,yt,h,St)}var cp=null,hp=null;function Cm(e){return e.nodeType===9?e:e.ownerDocument}function xy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vy(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function fp(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var dp=null;function x3(){var e=window.event;return e&&e.type==="popstate"?e===dp?!1:(dp=e,!0):(dp=null,!1)}var Uy=typeof setTimeout=="function"?setTimeout:void 0,V3=typeof clearTimeout=="function"?clearTimeout:void 0,Iy=typeof Promise=="function"?Promise:void 0,U3=typeof queueMicrotask=="function"?queueMicrotask:typeof Iy<"u"?function(e){return Iy.resolve(null).then(e).catch(I3)}:Uy;function I3(e){setTimeout(function(){throw e})}function gp(e,i){var o=i,h=0;do{var p=o.nextSibling;if(e.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(h===0){e.removeChild(p),sd(i);return}h--}else o!=="$"&&o!=="$?"&&o!=="$!"||h++;o=p}while(o);sd(i)}function mp(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":mp(o),Ws(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function L3(e,i,o,h){for(;e.nodeType===1;){var p=o;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!h&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(h){if(!e[bs])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(E=e.getAttribute("rel"),E==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(E!==p.rel||e.getAttribute("href")!==(p.href==null?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(E=e.getAttribute("src"),(E!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&E&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var E=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===E)return e}else return e;if(e=xr(e.nextSibling),e===null)break}return null}function z3(e,i,o){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=xr(e.nextSibling),e===null))return null;return e}function xr(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}function Ly(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return e;i--}else o==="/$"&&i++}e=e.previousSibling}return null}function zy(e,i,o){switch(i=Cm(o),e){case"html":if(e=i.documentElement,!e)throw Error(r(452));return e;case"head":if(e=i.head,!e)throw Error(r(453));return e;case"body":if(e=i.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}var qs=new Map,Py=new Set;function Dm(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var po=gt.d;gt.d={f:P3,r:B3,D:G3,C:H3,L:k3,m:q3,X:F3,S:j3,M:K3};function P3(){var e=po.f(),i=fo();return e||i}function B3(e){var i=Sn(e);i!==null&&i.tag===5&&i.type==="form"?im(i):po.r(e)}var Mh=typeof document>"u"?null:document;function By(e,i,o){var h=Mh;if(h&&typeof i=="string"&&i){var p=pn(i);p='link[rel="'+e+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),Py.has(p)||(Py.add(p),e={rel:e,crossOrigin:o,href:i},h.querySelector(p)===null&&(i=h.createElement("link"),Gi(i,"link",e),sn(i),h.head.appendChild(i)))}}function G3(e){po.D(e),By("dns-prefetch",e,null)}function H3(e,i){po.C(e,i),By("preconnect",e,i)}function k3(e,i,o){po.L(e,i,o);var h=Mh;if(h&&e&&i){var p='link[rel="preload"][as="'+pn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+pn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+pn(o.imageSizes)+'"]')):p+='[href="'+pn(e)+'"]';var E=p;switch(i){case"style":E=xh(e);break;case"script":E=Vh(e)}qs.has(E)||(e=x({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:e,as:i},o),qs.set(E,e),h.querySelector(p)!==null||i==="style"&&h.querySelector(Jf(E))||i==="script"&&h.querySelector($f(E))||(i=h.createElement("link"),Gi(i,"link",e),sn(i),h.head.appendChild(i)))}}function q3(e,i){po.m(e,i);var o=Mh;if(o&&e){var h=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+pn(h)+'"][href="'+pn(e)+'"]',E=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Vh(e)}if(!qs.has(E)&&(e=x({rel:"modulepreload",href:e},i),qs.set(E,e),o.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector($f(E)))return}h=o.createElement("link"),Gi(h,"link",e),sn(h),o.head.appendChild(h)}}}function j3(e,i,o){po.S(e,i,o);var h=Mh;if(h&&e){var p=Ma(h).hoistableStyles,E=xh(e);i=i||"default";var B=p.get(E);if(!B){var Z={loading:0,preload:null};if(B=h.querySelector(Jf(E)))Z.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":i},o),(o=qs.get(E))&&pp(e,o);var tt=B=h.createElement("link");sn(tt),Gi(tt,"link",e),tt._p=new Promise(function(lt,bt){tt.onload=lt,tt.onerror=bt}),tt.addEventListener("load",function(){Z.loading|=1}),tt.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,wm(B,i,h)}B={type:"stylesheet",instance:B,count:1,state:Z},p.set(E,B)}}}function F3(e,i){po.X(e,i);var o=Mh;if(o&&e){var h=Ma(o).hoistableScripts,p=Vh(e),E=h.get(p);E||(E=o.querySelector($f(p)),E||(e=x({src:e,async:!0},i),(i=qs.get(p))&&yp(e,i),E=o.createElement("script"),sn(E),Gi(E,"link",e),o.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(p,E))}}function K3(e,i){po.M(e,i);var o=Mh;if(o&&e){var h=Ma(o).hoistableScripts,p=Vh(e),E=h.get(p);E||(E=o.querySelector($f(p)),E||(e=x({src:e,async:!0,type:"module"},i),(i=qs.get(p))&&yp(e,i),E=o.createElement("script"),sn(E),Gi(E,"link",e),o.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(p,E))}}function Gy(e,i,o,h){var p=(p=$t.current)?Dm(p):null;if(!p)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=xh(o.href),o=Ma(p).hoistableStyles,h=o.get(i),h||(h={type:"style",instance:null,count:0,state:null},o.set(i,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=xh(o.href);var E=Ma(p).hoistableStyles,B=E.get(e);if(B||(p=p.ownerDocument||p,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(e,B),(E=p.querySelector(Jf(e)))&&!E._p&&(B.instance=E,B.state.loading=5),qs.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},qs.set(e,o),E||Y3(p,e,o,B.state))),i&&h===null)throw Error(r(528,""));return B}if(i&&h!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Vh(o),o=Ma(p).hoistableScripts,h=o.get(i),h||(h={type:"script",instance:null,count:0,state:null},o.set(i,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function xh(e){return'href="'+pn(e)+'"'}function Jf(e){return'link[rel="stylesheet"]['+e+"]"}function Hy(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function Y3(e,i,o,h){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?h.loading=1:(i=e.createElement("link"),h.preload=i,i.addEventListener("load",function(){return h.loading|=1}),i.addEventListener("error",function(){return h.loading|=2}),Gi(i,"link",o),sn(i),e.head.appendChild(i))}function Vh(e){return'[src="'+pn(e)+'"]'}function $f(e){return"script[async]"+e}function ky(e,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var h=e.querySelector('style[data-href~="'+pn(o.href)+'"]');if(h)return i.instance=h,sn(h),h;var p=x({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return h=(e.ownerDocument||e).createElement("style"),sn(h),Gi(h,"style",p),wm(h,o.precedence,e),i.instance=h;case"stylesheet":p=xh(o.href);var E=e.querySelector(Jf(p));if(E)return i.state.loading|=4,i.instance=E,sn(E),E;h=Hy(o),(p=qs.get(p))&&pp(h,p),E=(e.ownerDocument||e).createElement("link"),sn(E);var B=E;return B._p=new Promise(function(Z,tt){B.onload=Z,B.onerror=tt}),Gi(E,"link",h),i.state.loading|=4,wm(E,o.precedence,e),i.instance=E;case"script":return E=Vh(o.src),(p=e.querySelector($f(E)))?(i.instance=p,sn(p),p):(h=o,(p=qs.get(E))&&(h=x({},o),yp(h,p)),e=e.ownerDocument||e,p=e.createElement("script"),sn(p),Gi(p,"link",h),e.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&!(i.state.loading&4)&&(h=i.instance,i.state.loading|=4,wm(h,o.precedence,e));return i.instance}function wm(e,i,o){for(var h=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,E=p,B=0;B<h.length;B++){var Z=h[B];if(Z.dataset.precedence===i)E=Z;else if(E!==p)break}E?E.parentNode.insertBefore(e,E.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(e,i.firstChild))}function pp(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function yp(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Nm=null;function qy(e,i,o){if(Nm===null){var h=new Map,p=Nm=new Map;p.set(o,h)}else p=Nm,h=p.get(o),h||(h=new Map,p.set(o,h));if(h.has(e))return h;for(h.set(e,null),o=o.getElementsByTagName(e),p=0;p<o.length;p++){var E=o[p];if(!(E[bs]||E[Rn]||e==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var B=E.getAttribute(i)||"";B=e+B;var Z=h.get(B);Z?Z.push(E):h.set(B,[E])}}return h}function jy(e,i,o){e=e.ownerDocument||e,e.head.insertBefore(o,i==="title"?e.querySelector("head > title"):null)}function X3(e,i,o){if(o===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Fy(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var td=null;function Q3(){}function Z3(e,i,o){if(td===null)throw Error(r(475));var h=td;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&!(i.state.loading&4)){if(i.instance===null){var p=xh(o.href),E=e.querySelector(Jf(p));if(E){e=E._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(h.count++,h=Om.bind(h),e.then(h,h)),i.state.loading|=4,i.instance=E,sn(E);return}E=e.ownerDocument||e,o=Hy(o),(p=qs.get(p))&&pp(o,p),E=E.createElement("link"),sn(E);var B=E;B._p=new Promise(function(Z,tt){B.onload=Z,B.onerror=tt}),Gi(E,"link",o),i.instance=E}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(i,e),(e=i.state.preload)&&!(i.state.loading&3)&&(h.count++,i=Om.bind(h),e.addEventListener("load",i),e.addEventListener("error",i))}}function W3(){if(td===null)throw Error(r(475));var e=td;return e.stylesheets&&e.count===0&&_p(e,e.stylesheets),0<e.count?function(i){var o=setTimeout(function(){if(e.stylesheets&&_p(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o)}}:null}function Om(){if(this.count--,this.count===0){if(this.stylesheets)_p(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Mm=null;function _p(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Mm=new Map,i.forEach(J3,e),Mm=null,Om.call(e))}function J3(e,i){if(!(i.state.loading&4)){var o=Mm.get(e);if(o)var h=o.get(null);else{o=new Map,Mm.set(e,o);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<p.length;E++){var B=p[E];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(o.set(B.dataset.precedence,B),h=B)}h&&o.set(null,h)}p=i.instance,B=p.getAttribute("data-precedence"),E=o.get(B)||h,E===h&&o.set(null,p),o.set(B,p),this.count++,h=Om.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),E?E.parentNode.insertBefore(p,E.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),i.state.loading|=4}}var ed={$$typeof:w,Provider:null,Consumer:null,_currentValue:Rt,_currentValue2:Rt,_threadCount:0};function $3(e,i,o,h,p,E,B,Z){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Il(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Il(0),this.hiddenUpdates=Il(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=E,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function Ky(e,i,o,h,p,E,B,Z,tt,lt,bt,Ot){return e=new $3(e,i,o,B,Z,tt,lt,Ot),i=1,E===!0&&(i|=24),E=Un(3,null,null,i),e.current=E,E.stateNode=e,i=vf(),i.refCount++,e.pooledCache=i,i.refCount++,E.memoizedState={element:h,isDehydrated:o,cache:i},Ii(E),e}function Yy(e){return e?(e=Jr,e):Jr}function Xy(e,i,o,h,p,E){p=Yy(p),h.context===null?h.context=p:h.pendingContext=p,h=Da(i),h.payload={element:o},E=E===void 0?null:E,E!==null&&(h.callback=E),o=wa(e,h,i),o!==null&&(Fn(o,e,i),pl(o,e,i))}function Qy(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<i?o:i}}function vp(e,i){Qy(e,i),(e=e.alternate)&&Qy(e,i)}function Zy(e){if(e.tag===13){var i=ur(e,67108864);i!==null&&Fn(i,e,67108864),vp(e,67108864)}}var xm=!0;function t5(e,i,o,h){var p=R.T;R.T=null;var E=gt.p;try{gt.p=2,Ep(e,i,o,h)}finally{gt.p=E,R.T=p}}function e5(e,i,o,h){var p=R.T;R.T=null;var E=gt.p;try{gt.p=8,Ep(e,i,o,h)}finally{gt.p=E,R.T=p}}function Ep(e,i,o,h){if(xm){var p=Sp(h);if(p===null)op(e,i,h,Vm,o),Jy(e,h);else if(i5(p,e,i,o,h))h.stopPropagation();else if(Jy(e,h),i&4&&-1<n5.indexOf(e)){for(;p!==null;){var E=Sn(p);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var B=Ki(E.pendingLanes);if(B!==0){var Z=E;for(Z.pendingLanes|=2,Z.entangledLanes|=2;B;){var tt=1<<31-Zn(B);Z.entanglements[1]|=tt,B&=~tt}tn(E),!(ne&6)&&(ye=nn()+500,Se(0))}}break;case 13:Z=ur(E,2),Z!==null&&Fn(Z,E,2),fo(),vp(E,2)}if(E=Sp(h),E===null&&op(e,i,h,Vm,o),E===p)break;p=E}p!==null&&h.stopPropagation()}else op(e,i,h,null,o)}}function Sp(e){return e=Hr(e),Tp(e)}var Vm=null;function Tp(e){if(Vm=null,e=_a(e),e!==null){var i=at(e);if(i===null)e=null;else{var o=i.tag;if(o===13){if(e=dt(i),e!==null)return e;e=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Vm=e,null}function Wy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oi()){case Ce:return 2;case ke:return 8;case Qn:case da:return 32;case ji:return 268435456;default:return 32}default:return 32}}var bp=!1,gu=null,mu=null,pu=null,nd=new Map,id=new Map,yu=[],n5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jy(e,i){switch(e){case"focusin":case"focusout":gu=null;break;case"dragenter":case"dragleave":mu=null;break;case"mouseover":case"mouseout":pu=null;break;case"pointerover":case"pointerout":nd.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":id.delete(i.pointerId)}}function ad(e,i,o,h,p,E){return e===null||e.nativeEvent!==E?(e={blockedOn:i,domEventName:o,eventSystemFlags:h,nativeEvent:E,targetContainers:[p]},i!==null&&(i=Sn(i),i!==null&&Zy(i)),e):(e.eventSystemFlags|=h,i=e.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),e)}function i5(e,i,o,h,p){switch(i){case"focusin":return gu=ad(gu,e,i,o,h,p),!0;case"dragenter":return mu=ad(mu,e,i,o,h,p),!0;case"mouseover":return pu=ad(pu,e,i,o,h,p),!0;case"pointerover":var E=p.pointerId;return nd.set(E,ad(nd.get(E)||null,e,i,o,h,p)),!0;case"gotpointercapture":return E=p.pointerId,id.set(E,ad(id.get(E)||null,e,i,o,h,p)),!0}return!1}function $y(e){var i=_a(e.target);if(i!==null){var o=at(i);if(o!==null){if(i=o.tag,i===13){if(i=dt(o),i!==null){e.blockedOn=i,Mi(e.priority,function(){if(o.tag===13){var h=Bi(),p=ur(o,h);p!==null&&Fn(p,o,h),vp(o,h)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Um(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var o=Sp(e.nativeEvent);if(o===null){o=e.nativeEvent;var h=new o.constructor(o.type,o);Sa=h,o.target.dispatchEvent(h),Sa=null}else return i=Sn(o),i!==null&&Zy(i),e.blockedOn=o,!1;i.shift()}return!0}function t_(e,i,o){Um(e)&&o.delete(i)}function a5(){bp=!1,gu!==null&&Um(gu)&&(gu=null),mu!==null&&Um(mu)&&(mu=null),pu!==null&&Um(pu)&&(pu=null),nd.forEach(t_),id.forEach(t_)}function Im(e,i){e.blockedOn===i&&(e.blockedOn=null,bp||(bp=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,a5)))}var Lm=null;function e_(e){Lm!==e&&(Lm=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Lm===e&&(Lm=null);for(var i=0;i<e.length;i+=3){var o=e[i],h=e[i+1],p=e[i+2];if(typeof h!="function"){if(Tp(h||o)===null)continue;break}var E=Sn(o);E!==null&&(e.splice(i,3),i-=3,wf(E,{pending:!0,data:p,method:o.method,action:h},h,p))}}))}function sd(e){function i(tt){return Im(tt,e)}gu!==null&&Im(gu,e),mu!==null&&Im(mu,e),pu!==null&&Im(pu,e),nd.forEach(i),id.forEach(i);for(var o=0;o<yu.length;o++){var h=yu[o];h.blockedOn===e&&(h.blockedOn=null)}for(;0<yu.length&&(o=yu[0],o.blockedOn===null);)$y(o),o.blockedOn===null&&yu.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(h=0;h<o.length;h+=3){var p=o[h],E=o[h+1],B=p[ue]||null;if(typeof E=="function")B||e_(o);else if(B){var Z=null;if(E&&E.hasAttribute("formAction")){if(p=E,B=E[ue]||null)Z=B.formAction;else if(Tp(p)!==null)continue}else Z=B.action;typeof Z=="function"?o[h+1]=Z:(o.splice(h,3),h-=3),e_(o)}}}function Ap(e){this._internalRoot=e}zm.prototype.render=Ap.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,h=Bi();Xy(o,h,e,i,null,null)},zm.prototype.unmount=Ap.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;e.tag===0&&Ut(),Xy(e.current,2,null,e,null,null),fo(),i[is]=null}};function zm(e){this._internalRoot=e}zm.prototype.unstable_scheduleHydration=function(e){if(e){var i=qu();e={blockedOn:null,target:e,priority:i};for(var o=0;o<yu.length&&i!==0&&i<yu[o].priority;o++);yu.splice(o,0,e),o===0&&$y(e)}};var n_=t.version;if(n_!=="19.0.0")throw Error(r(527,n_,"19.0.0"));gt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=it(i),e=e!==null?Et(e):null,e=e===null?null:e.stateNode,e};var s5={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:R,findFiberByHostInstance:_a,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pm.isDisabled&&Pm.supportsFiber)try{an=Pm.inject(s5),Ae=Pm}catch{}}return ld.createRoot=function(e,i){if(!u(e))throw Error(r(299));var o=!1,h="",p=hm,E=fm,B=dm,Z=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(E=i.onCaughtError),i.onRecoverableError!==void 0&&(B=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(Z=i.unstable_transitionCallbacks)),i=Ky(e,1,!1,null,null,o,h,p,E,B,Z,null),e[is]=i.current,lp(e.nodeType===8?e.parentNode:e),new Ap(i)},ld.hydrateRoot=function(e,i,o){if(!u(e))throw Error(r(299));var h=!1,p="",E=hm,B=fm,Z=dm,tt=null,lt=null;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(E=o.onUncaughtError),o.onCaughtError!==void 0&&(B=o.onCaughtError),o.onRecoverableError!==void 0&&(Z=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(tt=o.unstable_transitionCallbacks),o.formState!==void 0&&(lt=o.formState)),i=Ky(e,1,!0,i,o??null,h,p,E,B,Z,tt,lt),i.context=Yy(null),o=i.current,h=Bi(),p=Da(h),p.callback=null,wa(o,p,h),i.current.lanes=h,En(i,h),tn(i),e[is]=i.current,lp(e),new zm(i)},ld.version="19.0.0",ld}var d_;function g5(){if(d_)return Dp.exports;d_=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Dp.exports=d5(),Dp.exports}var m5=g5(),Ym={exports:{}},od={},Mp={},xp={},g_;function _e(){return g_||(g_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a._registerNode=a.Konva=a.glob=void 0;const t=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}a.glob=typeof i_<"u"?i_:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},a.Konva={_global:a.glob,version:"9.3.18",isBrowser:n(),isUnminified:/param/.test((function(u){}).toString()),dblClickWindow:400,getAngle(u){return a.Konva.angleDeg?u*t:u},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return a.Konva.DD.isDragging},isTransforming(){var u;return(u=a.Konva.Transformer)===null||u===void 0?void 0:u.isTransforming()},isDragReady(){return!!a.Konva.DD.node},releaseCanvasOnDestroy:!0,document:a.glob.document,_injectGlobal(u){a.glob.Konva=u}};const r=u=>{a.Konva[u.prototype.getClassName()]=u};a._registerNode=r,a.Konva._injectGlobal(a.Konva)}(xp)),xp}var Vp={},m_;function Yn(){return m_||(m_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.Transform=void 0;const t=_e();class n{constructor(z=[1,0,0,1,0,0]){this.dirty=!1,this.m=z&&z.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(z){z.m[0]=this.m[0],z.m[1]=this.m[1],z.m[2]=this.m[2],z.m[3]=this.m[3],z.m[4]=this.m[4],z.m[5]=this.m[5]}point(z){const H=this.m;return{x:H[0]*z.x+H[2]*z.y+H[4],y:H[1]*z.x+H[3]*z.y+H[5]}}translate(z,H){return this.m[4]+=this.m[0]*z+this.m[2]*H,this.m[5]+=this.m[1]*z+this.m[3]*H,this}scale(z,H){return this.m[0]*=z,this.m[1]*=z,this.m[2]*=H,this.m[3]*=H,this}rotate(z){const H=Math.cos(z),j=Math.sin(z),q=this.m[0]*H+this.m[2]*j,V=this.m[1]*H+this.m[3]*j,R=this.m[0]*-j+this.m[2]*H,x=this.m[1]*-j+this.m[3]*H;return this.m[0]=q,this.m[1]=V,this.m[2]=R,this.m[3]=x,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(z,H){const j=this.m[0]+this.m[2]*H,q=this.m[1]+this.m[3]*H,V=this.m[2]+this.m[0]*z,R=this.m[3]+this.m[1]*z;return this.m[0]=j,this.m[1]=q,this.m[2]=V,this.m[3]=R,this}multiply(z){const H=this.m[0]*z.m[0]+this.m[2]*z.m[1],j=this.m[1]*z.m[0]+this.m[3]*z.m[1],q=this.m[0]*z.m[2]+this.m[2]*z.m[3],V=this.m[1]*z.m[2]+this.m[3]*z.m[3],R=this.m[0]*z.m[4]+this.m[2]*z.m[5]+this.m[4],x=this.m[1]*z.m[4]+this.m[3]*z.m[5]+this.m[5];return this.m[0]=H,this.m[1]=j,this.m[2]=q,this.m[3]=V,this.m[4]=R,this.m[5]=x,this}invert(){const z=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),H=this.m[3]*z,j=-this.m[1]*z,q=-this.m[2]*z,V=this.m[0]*z,R=z*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),x=z*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=H,this.m[1]=j,this.m[2]=q,this.m[3]=V,this.m[4]=R,this.m[5]=x,this}getMatrix(){return this.m}decompose(){const z=this.m[0],H=this.m[1],j=this.m[2],q=this.m[3],V=this.m[4],R=this.m[5],x=z*q-H*j,G={x:V,y:R,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(z!=0||H!=0){const Y=Math.sqrt(z*z+H*H);G.rotation=H>0?Math.acos(z/Y):-Math.acos(z/Y),G.scaleX=Y,G.scaleY=x/Y,G.skewX=(z*j+H*q)/x,G.skewY=0}else if(j!=0||q!=0){const Y=Math.sqrt(j*j+q*q);G.rotation=Math.PI/2-(q>0?Math.acos(-j/Y):-Math.acos(j/Y)),G.scaleX=x/Y,G.scaleY=Y,G.skewX=0,G.skewY=(z*j+H*q)/x}return G.rotation=a.Util._getRotation(G.rotation),G}}a.Transform=n;const r="[object Array]",u="[object Number]",c="[object String]",d="[object Boolean]",m=Math.PI/180,_=180/Math.PI,v="#",b="",D="0",U="Konva warning: ",w="Konva error: ",M="rgb(",I={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},P=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let K=[];const C=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(N){setTimeout(N,60)};a.Util={_isElement(N){return!!(N&&N.nodeType==1)},_isFunction(N){return!!(N&&N.constructor&&N.call&&N.apply)},_isPlainObject(N){return!!N&&N.constructor===Object},_isArray(N){return Object.prototype.toString.call(N)===r},_isNumber(N){return Object.prototype.toString.call(N)===u&&!isNaN(N)&&isFinite(N)},_isString(N){return Object.prototype.toString.call(N)===c},_isBoolean(N){return Object.prototype.toString.call(N)===d},isObject(N){return N instanceof Object},isValidSelector(N){if(typeof N!="string")return!1;const z=N[0];return z==="#"||z==="."||z===z.toUpperCase()},_sign(N){return N===0||N>0?1:-1},requestAnimFrame(N){K.push(N),K.length===1&&C(function(){const z=K;K=[],z.forEach(function(H){H()})})},createCanvasElement(){const N=document.createElement("canvas");try{N.style=N.style||{}}catch{}return N},createImageElement(){return document.createElement("img")},_isInDocument(N){for(;N=N.parentNode;)if(N==document)return!0;return!1},_urlToImage(N,z){const H=a.Util.createImageElement();H.onload=function(){z(H)},H.src=N},_rgbToHex(N,z,H){return((1<<24)+(N<<16)+(z<<8)+H).toString(16).slice(1)},_hexToRgb(N){N=N.replace(v,b);const z=parseInt(N,16);return{r:z>>16&255,g:z>>8&255,b:z&255}},getRandomColor(){let N=(Math.random()*16777215<<0).toString(16);for(;N.length<6;)N=D+N;return v+N},getRGB(N){let z;return N in I?(z=I[N],{r:z[0],g:z[1],b:z[2]}):N[0]===v?this._hexToRgb(N.substring(1)):N.substr(0,4)===M?(z=P.exec(N.replace(/ /g,"")),{r:parseInt(z[1],10),g:parseInt(z[2],10),b:parseInt(z[3],10)}):{r:0,g:0,b:0}},colorToRGBA(N){return N=N||"black",a.Util._namedColorToRBA(N)||a.Util._hex3ColorToRGBA(N)||a.Util._hex4ColorToRGBA(N)||a.Util._hex6ColorToRGBA(N)||a.Util._hex8ColorToRGBA(N)||a.Util._rgbColorToRGBA(N)||a.Util._rgbaColorToRGBA(N)||a.Util._hslColorToRGBA(N)},_namedColorToRBA(N){const z=I[N.toLowerCase()];return z?{r:z[0],g:z[1],b:z[2],a:1}:null},_rgbColorToRGBA(N){if(N.indexOf("rgb(")===0){N=N.match(/rgb\(([^)]+)\)/)[1];const z=N.split(/ *, */).map(Number);return{r:z[0],g:z[1],b:z[2],a:1}}},_rgbaColorToRGBA(N){if(N.indexOf("rgba(")===0){N=N.match(/rgba\(([^)]+)\)/)[1];const z=N.split(/ *, */).map((H,j)=>H.slice(-1)==="%"?j===3?parseInt(H)/100:parseInt(H)/100*255:Number(H));return{r:z[0],g:z[1],b:z[2],a:z[3]}}},_hex8ColorToRGBA(N){if(N[0]==="#"&&N.length===9)return{r:parseInt(N.slice(1,3),16),g:parseInt(N.slice(3,5),16),b:parseInt(N.slice(5,7),16),a:parseInt(N.slice(7,9),16)/255}},_hex6ColorToRGBA(N){if(N[0]==="#"&&N.length===7)return{r:parseInt(N.slice(1,3),16),g:parseInt(N.slice(3,5),16),b:parseInt(N.slice(5,7),16),a:1}},_hex4ColorToRGBA(N){if(N[0]==="#"&&N.length===5)return{r:parseInt(N[1]+N[1],16),g:parseInt(N[2]+N[2],16),b:parseInt(N[3]+N[3],16),a:parseInt(N[4]+N[4],16)/255}},_hex3ColorToRGBA(N){if(N[0]==="#"&&N.length===4)return{r:parseInt(N[1]+N[1],16),g:parseInt(N[2]+N[2],16),b:parseInt(N[3]+N[3],16),a:1}},_hslColorToRGBA(N){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(N)){const[z,...H]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(N),j=Number(H[0])/360,q=Number(H[1])/100,V=Number(H[2])/100;let R,x,G;if(q===0)return G=V*255,{r:Math.round(G),g:Math.round(G),b:Math.round(G),a:1};V<.5?R=V*(1+q):R=V+q-V*q;const Y=2*V-R,T=[0,0,0];for(let F=0;F<3;F++)x=j+1/3*-(F-1),x<0&&x++,x>1&&x--,6*x<1?G=Y+(R-Y)*6*x:2*x<1?G=R:3*x<2?G=Y+(R-Y)*(2/3-x)*6:G=Y,T[F]=G*255;return{r:Math.round(T[0]),g:Math.round(T[1]),b:Math.round(T[2]),a:1}}},haveIntersection(N,z){return!(z.x>N.x+N.width||z.x+z.width<N.x||z.y>N.y+N.height||z.y+z.height<N.y)},cloneObject(N){const z={};for(const H in N)this._isPlainObject(N[H])?z[H]=this.cloneObject(N[H]):this._isArray(N[H])?z[H]=this.cloneArray(N[H]):z[H]=N[H];return z},cloneArray(N){return N.slice(0)},degToRad(N){return N*m},radToDeg(N){return N*_},_degToRad(N){return a.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),a.Util.degToRad(N)},_radToDeg(N){return a.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),a.Util.radToDeg(N)},_getRotation(N){return t.Konva.angleDeg?a.Util.radToDeg(N):N},_capitalize(N){return N.charAt(0).toUpperCase()+N.slice(1)},throw(N){throw new Error(w+N)},error(N){console.error(w+N)},warn(N){t.Konva.showWarnings&&console.warn(U+N)},each(N,z){for(const H in N)z(H,N[H])},_inRange(N,z,H){return z<=N&&N<H},_getProjectionToSegment(N,z,H,j,q,V){let R,x,G;const Y=(N-H)*(N-H)+(z-j)*(z-j);if(Y==0)R=N,x=z,G=(q-H)*(q-H)+(V-j)*(V-j);else{const T=((q-N)*(H-N)+(V-z)*(j-z))/Y;T<0?(R=N,x=z,G=(N-q)*(N-q)+(z-V)*(z-V)):T>1?(R=H,x=j,G=(H-q)*(H-q)+(j-V)*(j-V)):(R=N+T*(H-N),x=z+T*(j-z),G=(R-q)*(R-q)+(x-V)*(x-V))}return[R,x,G]},_getProjectionToLine(N,z,H){const j=a.Util.cloneObject(N);let q=Number.MAX_VALUE;return z.forEach(function(V,R){if(!H&&R===z.length-1)return;const x=z[(R+1)%z.length],G=a.Util._getProjectionToSegment(V.x,V.y,x.x,x.y,N.x,N.y),Y=G[0],T=G[1],F=G[2];F<q&&(j.x=Y,j.y=T,q=F)}),j},_prepareArrayForTween(N,z,H){const j=[],q=[];if(N.length>z.length){const R=z;z=N,N=R}for(let R=0;R<N.length;R+=2)j.push({x:N[R],y:N[R+1]});for(let R=0;R<z.length;R+=2)q.push({x:z[R],y:z[R+1]});const V=[];return q.forEach(function(R){const x=a.Util._getProjectionToLine(R,j,H);V.push(x.x),V.push(x.y)}),V},_prepareToStringify(N){let z;N.visitedByCircularReferenceRemoval=!0;for(const H in N)if(N.hasOwnProperty(H)&&N[H]&&typeof N[H]=="object"){if(z=Object.getOwnPropertyDescriptor(N,H),N[H].visitedByCircularReferenceRemoval||a.Util._isElement(N[H]))if(z.configurable)delete N[H];else return null;else if(a.Util._prepareToStringify(N[H])===null)if(z.configurable)delete N[H];else return null}return delete N.visitedByCircularReferenceRemoval,N},_assign(N,z){for(const H in z)N[H]=z[H];return N},_getFirstPointerId(N){return N.touches?N.changedTouches[0].identifier:N.pointerId||999},releaseCanvas(...N){t.Konva.releaseCanvasOnDestroy&&N.forEach(z=>{z.width=0,z.height=0})},drawRoundedRectPath(N,z,H,j){let q=0,V=0,R=0,x=0;typeof j=="number"?q=V=R=x=Math.min(j,z/2,H/2):(q=Math.min(j[0]||0,z/2,H/2),V=Math.min(j[1]||0,z/2,H/2),x=Math.min(j[2]||0,z/2,H/2),R=Math.min(j[3]||0,z/2,H/2)),N.moveTo(q,0),N.lineTo(z-V,0),N.arc(z-V,V,V,Math.PI*3/2,0,!1),N.lineTo(z,H-x),N.arc(z-x,H-x,x,0,Math.PI/2,!1),N.lineTo(R,H),N.arc(R,H-R,R,Math.PI/2,Math.PI,!1),N.lineTo(0,q),N.arc(q,q,q,Math.PI,Math.PI*3/2,!1)}}}(Vp)),Vp}var ud={},Up={},Ja={},p_;function Re(){if(p_)return Ja;p_=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.RGBComponent=r,Ja.alphaComponent=u,Ja.getNumberValidator=c,Ja.getNumberOrArrayOfNumbersValidator=d,Ja.getNumberOrAutoValidator=m,Ja.getStringValidator=_,Ja.getStringOrGradientValidator=v,Ja.getFunctionValidator=b,Ja.getNumberArrayValidator=D,Ja.getBooleanValidator=U,Ja.getComponentValidator=w;const a=_e(),t=Yn();function n(M){return t.Util._isString(M)?'"'+M+'"':Object.prototype.toString.call(M)==="[object Number]"||t.Util._isBoolean(M)?M:Object.prototype.toString.call(M)}function r(M){return M>255?255:M<0?0:Math.round(M)}function u(M){return M>1?1:M<1e-4?1e-4:M}function c(){if(a.Konva.isUnminified)return function(M,I){return t.Util._isNumber(M)||t.Util.warn(n(M)+' is a not valid value for "'+I+'" attribute. The value should be a number.'),M}}function d(M){if(a.Konva.isUnminified)return function(I,P){let K=t.Util._isNumber(I),C=t.Util._isArray(I)&&I.length==M;return!K&&!C&&t.Util.warn(n(I)+' is a not valid value for "'+P+'" attribute. The value should be a number or Array<number>('+M+")"),I}}function m(){if(a.Konva.isUnminified)return function(M,I){var P=t.Util._isNumber(M),K=M==="auto";return P||K||t.Util.warn(n(M)+' is a not valid value for "'+I+'" attribute. The value should be a number or "auto".'),M}}function _(){if(a.Konva.isUnminified)return function(M,I){return t.Util._isString(M)||t.Util.warn(n(M)+' is a not valid value for "'+I+'" attribute. The value should be a string.'),M}}function v(){if(a.Konva.isUnminified)return function(M,I){const P=t.Util._isString(M),K=Object.prototype.toString.call(M)==="[object CanvasGradient]"||M&&M.addColorStop;return P||K||t.Util.warn(n(M)+' is a not valid value for "'+I+'" attribute. The value should be a string or a native gradient.'),M}}function b(){if(a.Konva.isUnminified)return function(M,I){return t.Util._isFunction(M)||t.Util.warn(n(M)+' is a not valid value for "'+I+'" attribute. The value should be a function.'),M}}function D(){if(a.Konva.isUnminified)return function(M,I){const P=Int8Array?Object.getPrototypeOf(Int8Array):null;return P&&M instanceof P||(t.Util._isArray(M)?M.forEach(function(K){t.Util._isNumber(K)||t.Util.warn('"'+I+'" attribute has non numeric element '+K+". Make sure that all elements are numbers.")}):t.Util.warn(n(M)+' is a not valid value for "'+I+'" attribute. The value should be a array of numbers.')),M}}function U(){if(a.Konva.isUnminified)return function(M,I){var P=M===!0||M===!1;return P||t.Util.warn(n(M)+' is a not valid value for "'+I+'" attribute. The value should be a boolean.'),M}}function w(M){if(a.Konva.isUnminified)return function(I,P){return I==null||t.Util.isObject(I)||t.Util.warn(n(I)+' is a not valid value for "'+P+'" attribute. The value should be an object with properties '+M),I}}return Ja}var y_;function be(){return y_||(y_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Factory=void 0;const t=Yn(),n=Re(),r="get",u="set";a.Factory={addGetterSetter(c,d,m,_,v){a.Factory.addGetter(c,d,m),a.Factory.addSetter(c,d,_,v),a.Factory.addOverloadedGetterSetter(c,d)},addGetter(c,d,m){var _=r+t.Util._capitalize(d);c.prototype[_]=c.prototype[_]||function(){const v=this.attrs[d];return v===void 0?m:v}},addSetter(c,d,m,_){var v=u+t.Util._capitalize(d);c.prototype[v]||a.Factory.overWriteSetter(c,d,m,_)},overWriteSetter(c,d,m,_){var v=u+t.Util._capitalize(d);c.prototype[v]=function(b){return m&&b!==void 0&&b!==null&&(b=m.call(this,b,d)),this._setAttr(d,b),_&&_.call(this),this}},addComponentsGetterSetter(c,d,m,_,v){const b=m.length,D=t.Util._capitalize,U=r+D(d),w=u+D(d);c.prototype[U]=function(){const I={};for(let P=0;P<b;P++){const K=m[P];I[K]=this.getAttr(d+D(K))}return I};const M=(0,n.getComponentValidator)(m);c.prototype[w]=function(I){const P=this.attrs[d];_&&(I=_.call(this,I,d)),M&&M.call(this,I,d);for(const K in I)I.hasOwnProperty(K)&&this._setAttr(d+D(K),I[K]);return I||m.forEach(K=>{this._setAttr(d+D(K),void 0)}),this._fireChangeEvent(d,P,I),v&&v.call(this),this},a.Factory.addOverloadedGetterSetter(c,d)},addOverloadedGetterSetter(c,d){var m=t.Util._capitalize(d),_=u+m,v=r+m;c.prototype[d]=function(){return arguments.length?(this[_](arguments[0]),this):this[v]()}},addDeprecatedGetterSetter(c,d,m,_){t.Util.error("Adding deprecated "+d);const v=r+t.Util._capitalize(d),b=d+" property is deprecated and will be removed soon. Look at Konva change log for more information.";c.prototype[v]=function(){t.Util.error(b);const D=this.attrs[d];return D===void 0?m:D},a.Factory.addSetter(c,d,_,function(){t.Util.error(b)}),a.Factory.addOverloadedGetterSetter(c,d)},backCompat(c,d){t.Util.each(d,function(m,_){const v=c.prototype[_],b=r+t.Util._capitalize(m),D=u+t.Util._capitalize(m);function U(){v.apply(this,arguments),t.Util.error('"'+m+'" method is deprecated and will be removed soon. Use ""'+_+'" instead.')}c.prototype[m]=U,c.prototype[b]=U,c.prototype[D]=U})},afterSetFilter(){this._filterUpToDate=!1}}}(Up)),Up}var yo={},_o={},__;function t4(){if(__)return _o;__=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.HitContext=_o.SceneContext=_o.Context=void 0;const a=Yn(),t=_e();function n(K){const C=[],N=K.length,z=a.Util;for(let H=0;H<N;H++){let j=K[H];z._isNumber(j)?j=Math.round(j*1e3)/1e3:z._isString(j)||(j=j+""),C.push(j)}return C}const r=",",u="(",c=")",d="([",m="])",_=";",v="()",b="=",D=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],U=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],w=100;let M=class{constructor(C){this.canvas=C,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(C){C.fillEnabled()&&this._fill(C)}_fill(C){}strokeShape(C){C.hasStroke()&&this._stroke(C)}_stroke(C){}fillStrokeShape(C){C.attrs.fillAfterStrokeEnabled?(this.strokeShape(C),this.fillShape(C)):(this.fillShape(C),this.strokeShape(C))}getTrace(C,N){let z=this.traceArr,H=z.length,j="",q,V,R,x;for(q=0;q<H;q++)V=z[q],R=V.method,R?(x=V.args,j+=R,C?j+=v:a.Util._isArray(x[0])?j+=d+x.join(r)+m:(N&&(x=x.map(G=>typeof G=="number"?Math.floor(G):G)),j+=u+x.join(r)+c)):(j+=V.property,C||(j+=b+V.val)),j+=_;return j}clearTrace(){this.traceArr=[]}_trace(C){let N=this.traceArr,z;N.push(C),z=N.length,z>=w&&N.shift()}reset(){const C=this.getCanvas().getPixelRatio();this.setTransform(1*C,0,0,1*C,0,0)}getCanvas(){return this.canvas}clear(C){const N=this.getCanvas();C?this.clearRect(C.x||0,C.y||0,C.width||0,C.height||0):this.clearRect(0,0,N.getWidth()/N.pixelRatio,N.getHeight()/N.pixelRatio)}_applyLineCap(C){const N=C.attrs.lineCap;N&&this.setAttr("lineCap",N)}_applyOpacity(C){const N=C.getAbsoluteOpacity();N!==1&&this.setAttr("globalAlpha",N)}_applyLineJoin(C){const N=C.attrs.lineJoin;N&&this.setAttr("lineJoin",N)}setAttr(C,N){this._context[C]=N}arc(C,N,z,H,j,q){this._context.arc(C,N,z,H,j,q)}arcTo(C,N,z,H,j){this._context.arcTo(C,N,z,H,j)}beginPath(){this._context.beginPath()}bezierCurveTo(C,N,z,H,j,q){this._context.bezierCurveTo(C,N,z,H,j,q)}clearRect(C,N,z,H){this._context.clearRect(C,N,z,H)}clip(...C){this._context.clip.apply(this._context,C)}closePath(){this._context.closePath()}createImageData(C,N){const z=arguments;if(z.length===2)return this._context.createImageData(C,N);if(z.length===1)return this._context.createImageData(C)}createLinearGradient(C,N,z,H){return this._context.createLinearGradient(C,N,z,H)}createPattern(C,N){return this._context.createPattern(C,N)}createRadialGradient(C,N,z,H,j,q){return this._context.createRadialGradient(C,N,z,H,j,q)}drawImage(C,N,z,H,j,q,V,R,x){const G=arguments,Y=this._context;G.length===3?Y.drawImage(C,N,z):G.length===5?Y.drawImage(C,N,z,H,j):G.length===9&&Y.drawImage(C,N,z,H,j,q,V,R,x)}ellipse(C,N,z,H,j,q,V,R){this._context.ellipse(C,N,z,H,j,q,V,R)}isPointInPath(C,N,z,H){return z?this._context.isPointInPath(z,C,N,H):this._context.isPointInPath(C,N,H)}fill(...C){this._context.fill.apply(this._context,C)}fillRect(C,N,z,H){this._context.fillRect(C,N,z,H)}strokeRect(C,N,z,H){this._context.strokeRect(C,N,z,H)}fillText(C,N,z,H){H?this._context.fillText(C,N,z,H):this._context.fillText(C,N,z)}measureText(C){return this._context.measureText(C)}getImageData(C,N,z,H){return this._context.getImageData(C,N,z,H)}lineTo(C,N){this._context.lineTo(C,N)}moveTo(C,N){this._context.moveTo(C,N)}rect(C,N,z,H){this._context.rect(C,N,z,H)}roundRect(C,N,z,H,j){this._context.roundRect(C,N,z,H,j)}putImageData(C,N,z){this._context.putImageData(C,N,z)}quadraticCurveTo(C,N,z,H){this._context.quadraticCurveTo(C,N,z,H)}restore(){this._context.restore()}rotate(C){this._context.rotate(C)}save(){this._context.save()}scale(C,N){this._context.scale(C,N)}setLineDash(C){this._context.setLineDash?this._context.setLineDash(C):"mozDash"in this._context?this._context.mozDash=C:"webkitLineDash"in this._context&&(this._context.webkitLineDash=C)}getLineDash(){return this._context.getLineDash()}setTransform(C,N,z,H,j,q){this._context.setTransform(C,N,z,H,j,q)}stroke(C){C?this._context.stroke(C):this._context.stroke()}strokeText(C,N,z,H){this._context.strokeText(C,N,z,H)}transform(C,N,z,H,j,q){this._context.transform(C,N,z,H,j,q)}translate(C,N){this._context.translate(C,N)}_enableTrace(){let C=this,N=D.length,z=this.setAttr,H,j;const q=function(V){let R=C[V],x;C[V]=function(){return j=n(Array.prototype.slice.call(arguments,0)),x=R.apply(C,arguments),C._trace({method:V,args:j}),x}};for(H=0;H<N;H++)q(D[H]);C.setAttr=function(){z.apply(C,arguments);const V=arguments[0];let R=arguments[1];(V==="shadowOffsetX"||V==="shadowOffsetY"||V==="shadowBlur")&&(R=R/this.canvas.getPixelRatio()),C._trace({property:V,val:R})}}_applyGlobalCompositeOperation(C){const N=C.attrs.globalCompositeOperation;!N||N==="source-over"||this.setAttr("globalCompositeOperation",N)}};_o.Context=M,U.forEach(function(K){Object.defineProperty(M.prototype,K,{get(){return this._context[K]},set(C){this._context[K]=C}})});class I extends M{constructor(C,{willReadFrequently:N=!1}={}){super(C),this._context=C._canvas.getContext("2d",{willReadFrequently:N})}_fillColor(C){const N=C.fill();this.setAttr("fillStyle",N),C._fillFunc(this)}_fillPattern(C){this.setAttr("fillStyle",C._getFillPattern()),C._fillFunc(this)}_fillLinearGradient(C){const N=C._getLinearGradient();N&&(this.setAttr("fillStyle",N),C._fillFunc(this))}_fillRadialGradient(C){const N=C._getRadialGradient();N&&(this.setAttr("fillStyle",N),C._fillFunc(this))}_fill(C){const N=C.fill(),z=C.getFillPriority();if(N&&z==="color"){this._fillColor(C);return}const H=C.getFillPatternImage();if(H&&z==="pattern"){this._fillPattern(C);return}const j=C.getFillLinearGradientColorStops();if(j&&z==="linear-gradient"){this._fillLinearGradient(C);return}const q=C.getFillRadialGradientColorStops();if(q&&z==="radial-gradient"){this._fillRadialGradient(C);return}N?this._fillColor(C):H?this._fillPattern(C):j?this._fillLinearGradient(C):q&&this._fillRadialGradient(C)}_strokeLinearGradient(C){const N=C.getStrokeLinearGradientStartPoint(),z=C.getStrokeLinearGradientEndPoint(),H=C.getStrokeLinearGradientColorStops(),j=this.createLinearGradient(N.x,N.y,z.x,z.y);if(H){for(let q=0;q<H.length;q+=2)j.addColorStop(H[q],H[q+1]);this.setAttr("strokeStyle",j)}}_stroke(C){const N=C.dash(),z=C.getStrokeScaleEnabled();if(C.hasStroke()){if(!z){this.save();const j=this.getCanvas().getPixelRatio();this.setTransform(j,0,0,j,0,0)}this._applyLineCap(C),N&&C.dashEnabled()&&(this.setLineDash(N),this.setAttr("lineDashOffset",C.dashOffset())),this.setAttr("lineWidth",C.strokeWidth()),C.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),C.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(C):this.setAttr("strokeStyle",C.stroke()),C._strokeFunc(this),z||this.restore()}}_applyShadow(C){var N,z,H;const j=(N=C.getShadowRGBA())!==null&&N!==void 0?N:"black",q=(z=C.getShadowBlur())!==null&&z!==void 0?z:5,V=(H=C.getShadowOffset())!==null&&H!==void 0?H:{x:0,y:0},R=C.getAbsoluteScale(),x=this.canvas.getPixelRatio(),G=R.x*x,Y=R.y*x;this.setAttr("shadowColor",j),this.setAttr("shadowBlur",q*Math.min(Math.abs(G),Math.abs(Y))),this.setAttr("shadowOffsetX",V.x*G),this.setAttr("shadowOffsetY",V.y*Y)}}_o.SceneContext=I;class P extends M{constructor(C){super(C),this._context=C._canvas.getContext("2d",{willReadFrequently:!0})}_fill(C){this.save(),this.setAttr("fillStyle",C.colorKey),C._fillFuncHit(this),this.restore()}strokeShape(C){C.hasHitStroke()&&this._stroke(C)}_stroke(C){if(C.hasHitStroke()){const N=C.getStrokeScaleEnabled();if(!N){this.save();const j=this.getCanvas().getPixelRatio();this.setTransform(j,0,0,j,0,0)}this._applyLineCap(C);const z=C.hitStrokeWidth(),H=z==="auto"?C.strokeWidth():z;this.setAttr("lineWidth",H),this.setAttr("strokeStyle",C.colorKey),C._strokeFuncHit(this),N||this.restore()}}}return _o.HitContext=P,_o}var v_;function A0(){if(v_)return yo;v_=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.HitCanvas=yo.SceneCanvas=yo.Canvas=void 0;const a=Yn(),t=t4(),n=_e(),r=be(),u=Re();let c;function d(){if(c)return c;const b=a.Util.createCanvasElement(),D=b.getContext("2d");return c=function(){const U=n.Konva._global.devicePixelRatio||1,w=D.webkitBackingStorePixelRatio||D.mozBackingStorePixelRatio||D.msBackingStorePixelRatio||D.oBackingStorePixelRatio||D.backingStorePixelRatio||1;return U/w}(),a.Util.releaseCanvas(b),c}let m=class{constructor(D){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const w=(D||{}).pixelRatio||n.Konva.pixelRatio||d();this.pixelRatio=w,this._canvas=a.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(D){const U=this.pixelRatio;this.pixelRatio=D,this.setSize(this.getWidth()/U,this.getHeight()/U)}setWidth(D){this.width=this._canvas.width=D*this.pixelRatio,this._canvas.style.width=D+"px";const U=this.pixelRatio;this.getContext()._context.scale(U,U)}setHeight(D){this.height=this._canvas.height=D*this.pixelRatio,this._canvas.style.height=D+"px";const U=this.pixelRatio;this.getContext()._context.scale(U,U)}getWidth(){return this.width}getHeight(){return this.height}setSize(D,U){this.setWidth(D||0),this.setHeight(U||0)}toDataURL(D,U){try{return this._canvas.toDataURL(D,U)}catch{try{return this._canvas.toDataURL()}catch(M){return a.Util.error("Unable to get data URL. "+M.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};yo.Canvas=m,r.Factory.addGetterSetter(m,"pixelRatio",void 0,(0,u.getNumberValidator)());class _ extends m{constructor(D={width:0,height:0,willReadFrequently:!1}){super(D),this.context=new t.SceneContext(this,{willReadFrequently:D.willReadFrequently}),this.setSize(D.width,D.height)}}yo.SceneCanvas=_;class v extends m{constructor(D={width:0,height:0}){super(D),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(D.width,D.height)}}return yo.HitCanvas=v,yo}var Ip={},E_;function w1(){return E_||(E_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.DD=void 0;const t=_e(),n=Yn();a.DD={get isDragging(){let r=!1;return a.DD._dragElements.forEach(u=>{u.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return a.DD._dragElements.forEach(u=>{r=u.node}),r},_dragElements:new Map,_drag(r){const u=[];a.DD._dragElements.forEach((c,d)=>{const{node:m}=c,_=m.getStage();_.setPointersPositions(r),c.pointerId===void 0&&(c.pointerId=n.Util._getFirstPointerId(r));const v=_._changedPointerPositions.find(b=>b.id===c.pointerId);if(v){if(c.dragStatus!=="dragging"){const b=m.dragDistance();if(Math.max(Math.abs(v.x-c.startPointerPos.x),Math.abs(v.y-c.startPointerPos.y))<b||(m.startDrag({evt:r}),!m.isDragging()))return}m._setDragPosition(r,c),u.push(m)}}),u.forEach(c=>{c.fire("dragmove",{type:"dragmove",target:c,evt:r},!0)})},_endDragBefore(r){const u=[];a.DD._dragElements.forEach(c=>{const{node:d}=c,m=d.getStage();if(r&&m.setPointersPositions(r),!m._changedPointerPositions.find(b=>b.id===c.pointerId))return;(c.dragStatus==="dragging"||c.dragStatus==="stopped")&&(a.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,c.dragStatus="stopped");const v=c.node.getLayer()||c.node instanceof t.Konva.Stage&&c.node;v&&u.indexOf(v)===-1&&u.push(v)}),u.forEach(c=>{c.draw()})},_endDragAfter(r){a.DD._dragElements.forEach((u,c)=>{u.dragStatus==="stopped"&&u.node.fire("dragend",{type:"dragend",target:u.node,evt:r},!0),u.dragStatus!=="dragging"&&a.DD._dragElements.delete(c)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",a.DD._endDragBefore,!0),window.addEventListener("touchend",a.DD._endDragBefore,!0),window.addEventListener("touchcancel",a.DD._endDragBefore,!0),window.addEventListener("mousemove",a.DD._drag),window.addEventListener("touchmove",a.DD._drag),window.addEventListener("mouseup",a.DD._endDragAfter,!1),window.addEventListener("touchend",a.DD._endDragAfter,!1),window.addEventListener("touchcancel",a.DD._endDragAfter,!1))}(Ip)),Ip}var S_;function ei(){if(S_)return ud;S_=1,Object.defineProperty(ud,"__esModule",{value:!0}),ud.Node=void 0;const a=Yn(),t=be(),n=A0(),r=_e(),u=w1(),c=Re(),d="absoluteOpacity",m="allEventListeners",_="absoluteTransform",v="absoluteScale",b="canvas",D="Change",U="children",w="konva",M="listening",I="mouseenter",P="mouseleave",K="set",C="Shape",N=" ",z="stage",H="transform",j="Stage",q="visible",V=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(N);let R=1,x=class e1{constructor(T){this._id=R++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(T),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(T){(T===H||T===_)&&this._cache.get(T)?this._cache.get(T).dirty=!0:T?this._cache.delete(T):this._cache.clear()}_getCache(T,F){let k=this._cache.get(T);return(k===void 0||(T===H||T===_)&&k.dirty===!0)&&(k=F.call(this),this._cache.set(T,k)),k}_calculate(T,F,k){if(!this._attachedDepsListeners.get(T)){const Q=F.map($=>$+"Change.konva").join(N);this.on(Q,()=>{this._clearCache(T)}),this._attachedDepsListeners.set(T,!0)}return this._getCache(T,k)}_getCanvasCache(){return this._cache.get(b)}_clearSelfAndDescendantCache(T){this._clearCache(T),T===_&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(b)){const{scene:T,filter:F,hit:k}=this._cache.get(b);a.Util.releaseCanvas(T,F,k),this._cache.delete(b)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(T){const F=T||{};let k={};(F.x===void 0||F.y===void 0||F.width===void 0||F.height===void 0)&&(k=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let Q=Math.ceil(F.width||k.width),$=Math.ceil(F.height||k.height),at=F.pixelRatio,dt=F.x===void 0?Math.floor(k.x):F.x,X=F.y===void 0?Math.floor(k.y):F.y,it=F.offset||0,Et=F.drawBorder||!1,st=F.hitCanvasPixelRatio||1;if(!Q||!$){a.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const gt=Math.abs(Math.round(k.x)-dt)>.5?1:0,Rt=Math.abs(Math.round(k.y)-X)>.5?1:0;Q+=it*2+gt,$+=it*2+Rt,dt-=it,X-=it;const Nt=new n.SceneCanvas({pixelRatio:at,width:Q,height:$}),et=new n.SceneCanvas({pixelRatio:at,width:0,height:0,willReadFrequently:!0}),ct=new n.HitCanvas({pixelRatio:st,width:Q,height:$}),At=Nt.getContext(),Ct=ct.getContext();return ct.isCache=!0,Nt.isCache=!0,this._cache.delete(b),this._filterUpToDate=!1,F.imageSmoothingEnabled===!1&&(Nt.getContext()._context.imageSmoothingEnabled=!1,et.getContext()._context.imageSmoothingEnabled=!1),At.save(),Ct.save(),At.translate(-dt,-X),Ct.translate(-dt,-X),this._isUnderCache=!0,this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(v),this.drawScene(Nt,this),this.drawHit(ct,this),this._isUnderCache=!1,At.restore(),Ct.restore(),Et&&(At.save(),At.beginPath(),At.rect(0,0,Q,$),At.closePath(),At.setAttr("strokeStyle","red"),At.setAttr("lineWidth",5),At.stroke(),At.restore()),this._cache.set(b,{scene:Nt,filter:et,hit:ct,x:dt,y:X}),this._requestDraw(),this}isCached(){return this._cache.has(b)}getClientRect(T){throw new Error('abstract "getClientRect" method call')}_transformedRect(T,F){const k=[{x:T.x,y:T.y},{x:T.x+T.width,y:T.y},{x:T.x+T.width,y:T.y+T.height},{x:T.x,y:T.y+T.height}];let Q=1/0,$=1/0,at=-1/0,dt=-1/0;const X=this.getAbsoluteTransform(F);return k.forEach(function(it){const Et=X.point(it);Q===void 0&&(Q=at=Et.x,$=dt=Et.y),Q=Math.min(Q,Et.x),$=Math.min($,Et.y),at=Math.max(at,Et.x),dt=Math.max(dt,Et.y)}),{x:Q,y:$,width:at-Q,height:dt-$}}_drawCachedSceneCanvas(T){T.save(),T._applyOpacity(this),T._applyGlobalCompositeOperation(this);const F=this._getCanvasCache();T.translate(F.x,F.y);const k=this._getCachedSceneCanvas(),Q=k.pixelRatio;T.drawImage(k._canvas,0,0,k.width/Q,k.height/Q),T.restore()}_drawCachedHitCanvas(T){const F=this._getCanvasCache(),k=F.hit;T.save(),T.translate(F.x,F.y),T.drawImage(k._canvas,0,0,k.width/k.pixelRatio,k.height/k.pixelRatio),T.restore()}_getCachedSceneCanvas(){let T=this.filters(),F=this._getCanvasCache(),k=F.scene,Q=F.filter,$=Q.getContext(),at,dt,X,it;if(T){if(!this._filterUpToDate){const Et=k.pixelRatio;Q.setSize(k.width/k.pixelRatio,k.height/k.pixelRatio);try{for(at=T.length,$.clear(),$.drawImage(k._canvas,0,0,k.getWidth()/Et,k.getHeight()/Et),dt=$.getImageData(0,0,Q.getWidth(),Q.getHeight()),X=0;X<at;X++){if(it=T[X],typeof it!="function"){a.Util.error("Filter should be type of function, but got "+typeof it+" instead. Please check correct filters");continue}it.call(this,dt),$.putImageData(dt,0,0)}}catch(st){a.Util.error("Unable to apply filter. "+st.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return Q}return k}on(T,F){if(this._cache&&this._cache.delete(m),arguments.length===3)return this._delegate.apply(this,arguments);let k=T.split(N),Q=k.length,$,at,dt,X,it;for($=0;$<Q;$++)at=k[$],dt=at.split("."),X=dt[0],it=dt[1]||"",this.eventListeners[X]||(this.eventListeners[X]=[]),this.eventListeners[X].push({name:it,handler:F});return this}off(T,F){let k=(T||"").split(N),Q=k.length,$,at,dt,X,it,Et;if(this._cache&&this._cache.delete(m),!T)for(at in this.eventListeners)this._off(at);for($=0;$<Q;$++)if(dt=k[$],X=dt.split("."),it=X[0],Et=X[1],it)this.eventListeners[it]&&this._off(it,Et,F);else for(at in this.eventListeners)this._off(at,Et,F);return this}dispatchEvent(T){const F={target:this,type:T.type,evt:T};return this.fire(T.type,F),this}addEventListener(T,F){return this.on(T,function(k){F.call(this,k.evt)}),this}removeEventListener(T){return this.off(T),this}_delegate(T,F,k){const Q=this;this.on(T,function($){const at=$.target.findAncestors(F,!0,Q);for(let dt=0;dt<at.length;dt++)$=a.Util.cloneObject($),$.currentTarget=at[dt],k.call(at[dt],$)})}remove(){return this.isDragging()&&this.stopDrag(),u.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(_),this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(z),this._clearSelfAndDescendantCache(q),this._clearSelfAndDescendantCache(M)}_remove(){this._clearCaches();const T=this.getParent();T&&T.children&&(T.children.splice(this.index,1),T._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(T){const F="get"+a.Util._capitalize(T);return a.Util._isFunction(this[F])?this[F]():this.attrs[T]}getAncestors(){let T=this.getParent(),F=[];for(;T;)F.push(T),T=T.getParent();return F}getAttrs(){return this.attrs||{}}setAttrs(T){return this._batchTransformChanges(()=>{let F,k;if(!T)return this;for(F in T)F!==U&&(k=K+a.Util._capitalize(F),a.Util._isFunction(this[k])?this[k](T[F]):this._setAttr(F,T[F]))}),this}isListening(){return this._getCache(M,this._isListening)}_isListening(T){if(!this.listening())return!1;const k=this.getParent();return k&&k!==T&&this!==T?k._isListening(T):!0}isVisible(){return this._getCache(q,this._isVisible)}_isVisible(T){if(!this.visible())return!1;const k=this.getParent();return k&&k!==T&&this!==T?k._isVisible(T):!0}shouldDrawHit(T,F=!1){if(T)return this._isVisible(T)&&this._isListening(T);const k=this.getLayer();let Q=!1;u.DD._dragElements.forEach(at=>{at.dragStatus==="dragging"&&(at.node.nodeType==="Stage"||at.node.getLayer()===k)&&(Q=!0)});const $=!F&&!r.Konva.hitOnDragEnabled&&(Q||r.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!$}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let T=this.getDepth(),F=this,k=0,Q,$,at,dt;function X(Et){for(Q=[],$=Et.length,at=0;at<$;at++)dt=Et[at],k++,dt.nodeType!==C&&(Q=Q.concat(dt.getChildren().slice())),dt._id===F._id&&(at=$);Q.length>0&&Q[0].getDepth()<=T&&X(Q)}const it=this.getStage();return F.nodeType!==j&&it&&X(it.getChildren()),k}getDepth(){let T=0,F=this.parent;for(;F;)T++,F=F.parent;return T}_batchTransformChanges(T){this._batchingTransformChange=!0,T(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(H),this._clearSelfAndDescendantCache(_)),this._needClearTransformCache=!1}setPosition(T){return this._batchTransformChanges(()=>{this.x(T.x),this.y(T.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const T=this.getStage();if(!T)return null;const F=T.getPointerPosition();if(!F)return null;const k=this.getAbsoluteTransform().copy();return k.invert(),k.point(F)}getAbsolutePosition(T){let F=!1,k=this.parent;for(;k;){if(k.isCached()){F=!0;break}k=k.parent}F&&!T&&(T=!0);const Q=this.getAbsoluteTransform(T).getMatrix(),$=new a.Transform,at=this.offset();return $.m=Q.slice(),$.translate(at.x,at.y),$.getTranslation()}setAbsolutePosition(T){const{x:F,y:k,...Q}=this._clearTransform();this.attrs.x=F,this.attrs.y=k,this._clearCache(H);const $=this._getAbsoluteTransform().copy();return $.invert(),$.translate(T.x,T.y),T={x:this.attrs.x+$.getTranslation().x,y:this.attrs.y+$.getTranslation().y},this._setTransform(Q),this.setPosition({x:T.x,y:T.y}),this._clearCache(H),this._clearSelfAndDescendantCache(_),this}_setTransform(T){let F;for(F in T)this.attrs[F]=T[F]}_clearTransform(){const T={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,T}move(T){let F=T.x,k=T.y,Q=this.x(),$=this.y();return F!==void 0&&(Q+=F),k!==void 0&&($+=k),this.setPosition({x:Q,y:$}),this}_eachAncestorReverse(T,F){let k=[],Q=this.getParent(),$,at;if(!(F&&F._id===this._id)){for(k.unshift(this);Q&&(!F||Q._id!==F._id);)k.unshift(Q),Q=Q.parent;for($=k.length,at=0;at<$;at++)T(k[at])}}rotate(T){return this.rotation(this.rotation()+T),this}moveToTop(){if(!this.parent)return a.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const T=this.index,F=this.parent.getChildren().length;return T<F-1?(this.parent.children.splice(T,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return a.Util.warn("Node has no parent. moveUp function is ignored."),!1;const T=this.index,F=this.parent.getChildren().length;return T<F-1?(this.parent.children.splice(T,1),this.parent.children.splice(T+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return a.Util.warn("Node has no parent. moveDown function is ignored."),!1;const T=this.index;return T>0?(this.parent.children.splice(T,1),this.parent.children.splice(T-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return a.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const T=this.index;return T>0?(this.parent.children.splice(T,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(T){if(!this.parent)return a.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(T<0||T>=this.parent.children.length)&&a.Util.warn("Unexpected value "+T+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const F=this.index;return this.parent.children.splice(F,1),this.parent.children.splice(T,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(d,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let T=this.opacity();const F=this.getParent();return F&&!F._isUnderCache&&(T*=F.getAbsoluteOpacity()),T}moveTo(T){return this.getParent()!==T&&(this._remove(),T.add(this)),this}toObject(){let T=this.getAttrs(),F,k,Q,$,at;const dt={attrs:{},className:this.getClassName()};for(F in T)k=T[F],at=a.Util.isObject(k)&&!a.Util._isPlainObject(k)&&!a.Util._isArray(k),!at&&(Q=typeof this[F]=="function"&&this[F],delete T[F],$=Q?Q.call(this):null,T[F]=k,$!==k&&(dt.attrs[F]=k));return a.Util._prepareToStringify(dt)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(T,F,k){const Q=[];F&&this._isMatch(T)&&Q.push(this);let $=this.parent;for(;$;){if($===k)return Q;$._isMatch(T)&&Q.push($),$=$.parent}return Q}isAncestorOf(T){return!1}findAncestor(T,F,k){return this.findAncestors(T,F,k)[0]}_isMatch(T){if(!T)return!1;if(typeof T=="function")return T(this);let F=T.replace(/ /g,"").split(","),k=F.length,Q,$;for(Q=0;Q<k;Q++)if($=F[Q],a.Util.isValidSelector($)||(a.Util.warn('Selector "'+$+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),a.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),a.Util.warn("Konva is awesome, right?")),$.charAt(0)==="#"){if(this.id()===$.slice(1))return!0}else if($.charAt(0)==="."){if(this.hasName($.slice(1)))return!0}else if(this.className===$||this.nodeType===$)return!0;return!1}getLayer(){const T=this.getParent();return T?T.getLayer():null}getStage(){return this._getCache(z,this._getStage)}_getStage(){const T=this.getParent();return T?T.getStage():null}fire(T,F={},k){return F.target=F.target||this,k?this._fireAndBubble(T,F):this._fire(T,F),this}getAbsoluteTransform(T){return T?this._getAbsoluteTransform(T):this._getCache(_,this._getAbsoluteTransform)}_getAbsoluteTransform(T){let F;if(T)return F=new a.Transform,this._eachAncestorReverse(function(k){const Q=k.transformsEnabled();Q==="all"?F.multiply(k.getTransform()):Q==="position"&&F.translate(k.x()-k.offsetX(),k.y()-k.offsetY())},T),F;{F=this._cache.get(_)||new a.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(F):F.reset();const k=this.transformsEnabled();if(k==="all")F.multiply(this.getTransform());else if(k==="position"){const Q=this.attrs.x||0,$=this.attrs.y||0,at=this.attrs.offsetX||0,dt=this.attrs.offsetY||0;F.translate(Q-at,$-dt)}return F.dirty=!1,F}}getAbsoluteScale(T){let F=this;for(;F;)F._isUnderCache&&(T=F),F=F.getParent();const Q=this.getAbsoluteTransform(T).decompose();return{x:Q.scaleX,y:Q.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(H,this._getTransform)}_getTransform(){var T,F;const k=this._cache.get(H)||new a.Transform;k.reset();const Q=this.x(),$=this.y(),at=r.Konva.getAngle(this.rotation()),dt=(T=this.attrs.scaleX)!==null&&T!==void 0?T:1,X=(F=this.attrs.scaleY)!==null&&F!==void 0?F:1,it=this.attrs.skewX||0,Et=this.attrs.skewY||0,st=this.attrs.offsetX||0,gt=this.attrs.offsetY||0;return(Q!==0||$!==0)&&k.translate(Q,$),at!==0&&k.rotate(at),(it!==0||Et!==0)&&k.skew(it,Et),(dt!==1||X!==1)&&k.scale(dt,X),(st!==0||gt!==0)&&k.translate(-1*st,-1*gt),k.dirty=!1,k}clone(T){let F=a.Util.cloneObject(this.attrs),k,Q,$,at,dt;for(k in T)F[k]=T[k];const X=new this.constructor(F);for(k in this.eventListeners)for(Q=this.eventListeners[k],$=Q.length,at=0;at<$;at++)dt=Q[at],dt.name.indexOf(w)<0&&(X.eventListeners[k]||(X.eventListeners[k]=[]),X.eventListeners[k].push(dt));return X}_toKonvaCanvas(T){T=T||{};const F=this.getClientRect(),k=this.getStage(),Q=T.x!==void 0?T.x:Math.floor(F.x),$=T.y!==void 0?T.y:Math.floor(F.y),at=T.pixelRatio||1,dt=new n.SceneCanvas({width:T.width||Math.ceil(F.width)||(k?k.width():0),height:T.height||Math.ceil(F.height)||(k?k.height():0),pixelRatio:at}),X=dt.getContext(),it=new n.SceneCanvas({width:dt.width/dt.pixelRatio+Math.abs(Q),height:dt.height/dt.pixelRatio+Math.abs($),pixelRatio:dt.pixelRatio});return T.imageSmoothingEnabled===!1&&(X._context.imageSmoothingEnabled=!1),X.save(),(Q||$)&&X.translate(-1*Q,-1*$),this.drawScene(dt,void 0,it),X.restore(),dt}toCanvas(T){return this._toKonvaCanvas(T)._canvas}toDataURL(T){T=T||{};const F=T.mimeType||null,k=T.quality||null,Q=this._toKonvaCanvas(T).toDataURL(F,k);return T.callback&&T.callback(Q),Q}toImage(T){return new Promise((F,k)=>{try{const Q=T==null?void 0:T.callback;Q&&delete T.callback,a.Util._urlToImage(this.toDataURL(T),function($){F($),Q==null||Q($)})}catch(Q){k(Q)}})}toBlob(T){return new Promise((F,k)=>{try{const Q=T==null?void 0:T.callback;Q&&delete T.callback,this.toCanvas(T).toBlob($=>{F($),Q==null||Q($)},T==null?void 0:T.mimeType,T==null?void 0:T.quality)}catch(Q){k(Q)}})}setSize(T){return this.width(T.width),this.height(T.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():r.Konva.dragDistance}_off(T,F,k){let Q=this.eventListeners[T],$,at,dt;for($=0;$<Q.length;$++)if(at=Q[$].name,dt=Q[$].handler,(at!=="konva"||F==="konva")&&(!F||at===F)&&(!k||k===dt)){if(Q.splice($,1),Q.length===0){delete this.eventListeners[T];break}$--}}_fireChangeEvent(T,F,k){this._fire(T+D,{oldVal:F,newVal:k})}addName(T){if(!this.hasName(T)){const F=this.name(),k=F?F+" "+T:T;this.name(k)}return this}hasName(T){if(!T)return!1;const F=this.name();return F?(F||"").split(/\s/g).indexOf(T)!==-1:!1}removeName(T){const F=(this.name()||"").split(/\s/g),k=F.indexOf(T);return k!==-1&&(F.splice(k,1),this.name(F.join(" "))),this}setAttr(T,F){const k=this[K+a.Util._capitalize(T)];return a.Util._isFunction(k)?k.call(this,F):this._setAttr(T,F),this}_requestDraw(){if(r.Konva.autoDrawEnabled){const T=this.getLayer()||this.getStage();T==null||T.batchDraw()}}_setAttr(T,F){const k=this.attrs[T];k===F&&!a.Util.isObject(F)||(F==null?delete this.attrs[T]:this.attrs[T]=F,this._shouldFireChangeEvents&&this._fireChangeEvent(T,k,F),this._requestDraw())}_setComponentAttr(T,F,k){let Q;k!==void 0&&(Q=this.attrs[T],Q||(this.attrs[T]=this.getAttr(T)),this.attrs[T][F]=k,this._fireChangeEvent(T,Q,k))}_fireAndBubble(T,F,k){if(F&&this.nodeType===C&&(F.target=this),!((T===I||T===P)&&(k&&(this===k||this.isAncestorOf&&this.isAncestorOf(k))||this.nodeType==="Stage"&&!k))){this._fire(T,F);const $=(T===I||T===P)&&k&&k.isAncestorOf&&k.isAncestorOf(this)&&!k.isAncestorOf(this.parent);(F&&!F.cancelBubble||!F)&&this.parent&&this.parent.isListening()&&!$&&(k&&k.parent?this._fireAndBubble.call(this.parent,T,F,k):this._fireAndBubble.call(this.parent,T,F))}}_getProtoListeners(T){var F,k,Q;const $=(F=this._cache.get(m))!==null&&F!==void 0?F:{};let at=$==null?void 0:$[T];if(at===void 0){at=[];let dt=Object.getPrototypeOf(this);for(;dt;){const X=(Q=(k=dt.eventListeners)===null||k===void 0?void 0:k[T])!==null&&Q!==void 0?Q:[];at.push(...X),dt=Object.getPrototypeOf(dt)}$[T]=at,this._cache.set(m,$)}return at}_fire(T,F){F=F||{},F.currentTarget=this,F.type=T;const k=this._getProtoListeners(T);if(k)for(var Q=0;Q<k.length;Q++)k[Q].handler.call(this,F);const $=this.eventListeners[T];if($)for(var Q=0;Q<$.length;Q++)$[Q].handler.call(this,F)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(T){const F=T?T.pointerId:void 0,k=this.getStage(),Q=this.getAbsolutePosition();if(!k)return;const $=k._getPointerById(F)||k._changedPointerPositions[0]||Q;u.DD._dragElements.set(this._id,{node:this,startPointerPos:$,offset:{x:$.x-Q.x,y:$.y-Q.y},dragStatus:"ready",pointerId:F})}startDrag(T,F=!0){u.DD._dragElements.has(this._id)||this._createDragElement(T);const k=u.DD._dragElements.get(this._id);k.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:T&&T.evt},F)}_setDragPosition(T,F){const k=this.getStage()._getPointerById(F.pointerId);if(!k)return;let Q={x:k.x-F.offset.x,y:k.y-F.offset.y};const $=this.dragBoundFunc();if($!==void 0){const at=$.call(this,Q,T);at?Q=at:a.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==Q.x||this._lastPos.y!==Q.y)&&(this.setAbsolutePosition(Q),this._requestDraw()),this._lastPos=Q}stopDrag(T){const F=u.DD._dragElements.get(this._id);F&&(F.dragStatus="stopped"),u.DD._endDragBefore(T),u.DD._endDragAfter(T)}setDraggable(T){this._setAttr("draggable",T),this._dragChange()}isDragging(){const T=u.DD._dragElements.get(this._id);return T?T.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(T){if(!(!(T.evt.button!==void 0)||r.Konva.dragButtons.indexOf(T.evt.button)>=0)||this.isDragging())return;let Q=!1;u.DD._dragElements.forEach($=>{this.isAncestorOf($.node)&&(Q=!0)}),Q||this._createDragElement(T)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const F=u.DD._dragElements.get(this._id),k=F&&F.dragStatus==="dragging",Q=F&&F.dragStatus==="ready";k?this.stopDrag():Q&&u.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(T={x:0,y:0}){const F=this.getStage();if(!F)return!1;const k={x:-T.x,y:-T.y,width:F.width()+2*T.x,height:F.height()+2*T.y};return a.Util.haveIntersection(k,this.getClientRect())}static create(T,F){return a.Util._isString(T)&&(T=JSON.parse(T)),this._createNode(T,F)}static _createNode(T,F){let k=e1.prototype.getClassName.call(T),Q=T.children,$,at,dt;F&&(T.attrs.container=F),r.Konva[k]||(a.Util.warn('Can not find a node with class name "'+k+'". Fallback to "Shape".'),k="Shape");const X=r.Konva[k];if($=new X(T.attrs),Q)for(at=Q.length,dt=0;dt<at;dt++)$.add(e1._createNode(Q[dt]));return $}};ud.Node=x,x.prototype.nodeType="Node",x.prototype._attrsAffectingSize=[],x.prototype.eventListeners={},x.prototype.on.call(x.prototype,V,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(H),this._clearSelfAndDescendantCache(_)}),x.prototype.on.call(x.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(q)}),x.prototype.on.call(x.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(M)}),x.prototype.on.call(x.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(d)});const G=t.Factory.addGetterSetter;return G(x,"zIndex"),G(x,"absolutePosition"),G(x,"position"),G(x,"x",0,(0,c.getNumberValidator)()),G(x,"y",0,(0,c.getNumberValidator)()),G(x,"globalCompositeOperation","source-over",(0,c.getStringValidator)()),G(x,"opacity",1,(0,c.getNumberValidator)()),G(x,"name","",(0,c.getStringValidator)()),G(x,"id","",(0,c.getStringValidator)()),G(x,"rotation",0,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(x,"scale",["x","y"]),G(x,"scaleX",1,(0,c.getNumberValidator)()),G(x,"scaleY",1,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(x,"skew",["x","y"]),G(x,"skewX",0,(0,c.getNumberValidator)()),G(x,"skewY",0,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(x,"offset",["x","y"]),G(x,"offsetX",0,(0,c.getNumberValidator)()),G(x,"offsetY",0,(0,c.getNumberValidator)()),G(x,"dragDistance",void 0,(0,c.getNumberValidator)()),G(x,"width",0,(0,c.getNumberValidator)()),G(x,"height",0,(0,c.getNumberValidator)()),G(x,"listening",!0,(0,c.getBooleanValidator)()),G(x,"preventDefault",!0,(0,c.getBooleanValidator)()),G(x,"filters",void 0,function(Y){return this._filterUpToDate=!1,Y}),G(x,"visible",!0,(0,c.getBooleanValidator)()),G(x,"transformsEnabled","all",(0,c.getStringValidator)()),G(x,"size"),G(x,"dragBoundFunc"),G(x,"draggable",!1,(0,c.getBooleanValidator)()),t.Factory.backCompat(x,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),ud}var cd={},T_;function R0(){if(T_)return cd;T_=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.Container=void 0;const a=be(),t=ei(),n=Re();let r=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(c){if(!c)return this.children||[];const d=this.children||[],m=[];return d.forEach(function(_){c(_)&&m.push(_)}),m}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(c=>{c.parent=null,c.index=0,c.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(c=>{c.parent=null,c.index=0,c.destroy()}),this.children=[],this._requestDraw(),this}add(...c){if(c.length===0)return this;if(c.length>1){for(let m=0;m<c.length;m++)this.add(c[m]);return this}const d=c[0];return d.getParent()?(d.moveTo(this),this):(this._validateAdd(d),d.index=this.getChildren().length,d.parent=this,d._clearCaches(),this.getChildren().push(d),this._fire("add",{child:d}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(c){return this._generalFind(c,!1)}findOne(c){const d=this._generalFind(c,!0);return d.length>0?d[0]:void 0}_generalFind(c,d){const m=[];return this._descendants(_=>{const v=_._isMatch(c);return v&&m.push(_),!!(v&&d)}),m}_descendants(c){let d=!1;const m=this.getChildren();for(const _ of m){if(d=c(_),d)return!0;if(_.hasChildren()&&(d=_._descendants(c),d))return!0}return!1}toObject(){const c=t.Node.prototype.toObject.call(this);return c.children=[],this.getChildren().forEach(d=>{c.children.push(d.toObject())}),c}isAncestorOf(c){let d=c.getParent();for(;d;){if(d._id===this._id)return!0;d=d.getParent()}return!1}clone(c){const d=t.Node.prototype.clone.call(this,c);return this.getChildren().forEach(function(m){d.add(m.clone())}),d}getAllIntersections(c){const d=[];return this.find("Shape").forEach(m=>{m.isVisible()&&m.intersects(c)&&d.push(m)}),d}_clearSelfAndDescendantCache(c){var d;super._clearSelfAndDescendantCache(c),!this.isCached()&&((d=this.children)===null||d===void 0||d.forEach(function(m){m._clearSelfAndDescendantCache(c)}))}_setChildrenIndices(){var c;(c=this.children)===null||c===void 0||c.forEach(function(d,m){d.index=m}),this._requestDraw()}drawScene(c,d,m){const _=this.getLayer(),v=c||_&&_.getCanvas(),b=v&&v.getContext(),D=this._getCanvasCache(),U=D&&D.scene,w=v&&v.isCache;if(!this.isVisible()&&!w)return this;if(U){b.save();const M=this.getAbsoluteTransform(d).getMatrix();b.transform(M[0],M[1],M[2],M[3],M[4],M[5]),this._drawCachedSceneCanvas(b),b.restore()}else this._drawChildren("drawScene",v,d,m);return this}drawHit(c,d){if(!this.shouldDrawHit(d))return this;const m=this.getLayer(),_=c||m&&m.hitCanvas,v=_&&_.getContext(),b=this._getCanvasCache();if(b&&b.hit){v.save();const U=this.getAbsoluteTransform(d).getMatrix();v.transform(U[0],U[1],U[2],U[3],U[4],U[5]),this._drawCachedHitCanvas(v),v.restore()}else this._drawChildren("drawHit",_,d);return this}_drawChildren(c,d,m,_){var v;const b=d&&d.getContext(),D=this.clipWidth(),U=this.clipHeight(),w=this.clipFunc(),M=typeof D=="number"&&typeof U=="number"||w,I=m===this;if(M){b.save();const K=this.getAbsoluteTransform(m);let C=K.getMatrix();b.transform(C[0],C[1],C[2],C[3],C[4],C[5]),b.beginPath();let N;if(w)N=w.call(this,b,this);else{const z=this.clipX(),H=this.clipY();b.rect(z||0,H||0,D,U)}b.clip.apply(b,N),C=K.copy().invert().getMatrix(),b.transform(C[0],C[1],C[2],C[3],C[4],C[5])}const P=!I&&this.globalCompositeOperation()!=="source-over"&&c==="drawScene";P&&(b.save(),b._applyGlobalCompositeOperation(this)),(v=this.children)===null||v===void 0||v.forEach(function(K){K[c](d,m,_)}),P&&b.restore(),M&&b.restore()}getClientRect(c={}){var d;const m=c.skipTransform,_=c.relativeTo;let v,b,D,U,w={x:1/0,y:1/0,width:0,height:0};const M=this;(d=this.children)===null||d===void 0||d.forEach(function(K){if(!K.visible())return;const C=K.getClientRect({relativeTo:M,skipShadow:c.skipShadow,skipStroke:c.skipStroke});C.width===0&&C.height===0||(v===void 0?(v=C.x,b=C.y,D=C.x+C.width,U=C.y+C.height):(v=Math.min(v,C.x),b=Math.min(b,C.y),D=Math.max(D,C.x+C.width),U=Math.max(U,C.y+C.height)))});const I=this.find("Shape");let P=!1;for(let K=0;K<I.length;K++)if(I[K]._isVisible(this)){P=!0;break}return P&&v!==void 0?w={x:v,y:b,width:D-v,height:U-b}:w={x:0,y:0,width:0,height:0},m?w:this._transformedRect(w,_)}};return cd.Container=r,a.Factory.addComponentsGetterSetter(r,"clip",["x","y","width","height"]),a.Factory.addGetterSetter(r,"clipX",void 0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(r,"clipY",void 0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(r,"clipWidth",void 0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(r,"clipHeight",void 0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(r,"clipFunc"),cd}var Lp={},vu={},b_;function e4(){if(b_)return vu;b_=1,Object.defineProperty(vu,"__esModule",{value:!0}),vu.getCapturedShape=r,vu.createEvent=u,vu.hasPointerCapture=c,vu.setPointerCapture=d,vu.releaseCapture=m;const a=_e(),t=new Map,n=a.Konva._global.PointerEvent!==void 0;function r(_){return t.get(_)}function u(_){return{evt:_,pointerId:_.pointerId}}function c(_,v){return t.get(_)===v}function d(_,v){m(_),v.getStage()&&(t.set(_,v),n&&v._fire("gotpointercapture",u(new PointerEvent("gotpointercapture"))))}function m(_,v){const b=t.get(_);if(!b)return;const D=b.getStage();D&&D.content,t.delete(_),n&&b._fire("lostpointercapture",u(new PointerEvent("lostpointercapture")))}return vu}var A_;function p5(){return A_||(A_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Stage=a.stages=void 0;const t=Yn(),n=be(),r=R0(),u=_e(),c=A0(),d=w1(),m=_e(),_=e4(),v="Stage",b="string",D="px",U="mouseout",w="mouseleave",M="mouseover",I="mouseenter",P="mousemove",K="mousedown",C="mouseup",N="pointermove",z="pointerdown",H="pointerup",j="pointercancel",q="lostpointercapture",V="pointerout",R="pointerleave",x="pointerover",G="pointerenter",Y="contextmenu",T="touchstart",F="touchend",k="touchmove",Q="touchcancel",$="wheel",at=5,dt=[[I,"_pointerenter"],[K,"_pointerdown"],[P,"_pointermove"],[C,"_pointerup"],[w,"_pointerleave"],[T,"_pointerdown"],[k,"_pointermove"],[F,"_pointerup"],[Q,"_pointercancel"],[M,"_pointerover"],[$,"_wheel"],[Y,"_contextmenu"],[z,"_pointerdown"],[N,"_pointermove"],[H,"_pointerup"],[j,"_pointercancel"],[q,"_lostpointercapture"]],X={mouse:{[V]:U,[R]:w,[x]:M,[G]:I,[N]:P,[z]:K,[H]:C,[j]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[V]:"touchout",[R]:"touchleave",[x]:"touchover",[G]:"touchenter",[N]:k,[z]:T,[H]:F,[j]:Q,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[V]:V,[R]:R,[x]:x,[G]:G,[N]:N,[z]:z,[H]:H,[j]:j,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},it=Nt=>Nt.indexOf("pointer")>=0?"pointer":Nt.indexOf("touch")>=0?"touch":"mouse",Et=Nt=>{const et=it(Nt);if(et==="pointer")return u.Konva.pointerEventsEnabled&&X.pointer;if(et==="touch")return X.touch;if(et==="mouse")return X.mouse};function st(Nt={}){return(Nt.clipFunc||Nt.clipWidth||Nt.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Nt}const gt="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";a.stages=[];class Rt extends r.Container{constructor(et){super(st(et)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),a.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{st(this.attrs)}),this._checkVisibility()}_validateAdd(et){const ct=et.getType()==="Layer",At=et.getType()==="FastLayer";ct||At||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const et=this.visible()?"":"none";this.content.style.display=et}setContainer(et){if(typeof et===b){if(et.charAt(0)==="."){const At=et.slice(1);et=document.getElementsByClassName(At)[0]}else{var ct;et.charAt(0)!=="#"?ct=et:ct=et.slice(1),et=document.getElementById(ct)}if(!et)throw"Can not find container in document with id "+ct}return this._setAttr("container",et),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),et.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const et=this.children,ct=et.length;for(let At=0;At<ct;At++)et[At].clear();return this}clone(et){return et||(et={}),et.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,et)}destroy(){super.destroy();const et=this.content;et&&t.Util._isInDocument(et)&&this.container().removeChild(et);const ct=a.stages.indexOf(this);return ct>-1&&a.stages.splice(ct,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const et=this._pointerPositions[0]||this._changedPointerPositions[0];return et?{x:et.x,y:et.y}:(t.Util.warn(gt),null)}_getPointerById(et){return this._pointerPositions.find(ct=>ct.id===et)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(et){et=et||{},et.x=et.x||0,et.y=et.y||0,et.width=et.width||this.width(),et.height=et.height||this.height();const ct=new c.SceneCanvas({width:et.width,height:et.height,pixelRatio:et.pixelRatio||1}),At=ct.getContext()._context,Ct=this.children;return(et.x||et.y)&&At.translate(-1*et.x,-1*et.y),Ct.forEach(function(It){if(!It.isVisible())return;const Pt=It._toKonvaCanvas(et);At.drawImage(Pt._canvas,et.x,et.y,Pt.getWidth()/Pt.getPixelRatio(),Pt.getHeight()/Pt.getPixelRatio())}),ct}getIntersection(et){if(!et)return null;const ct=this.children,At=ct.length,Ct=At-1;for(let It=Ct;It>=0;It--){const Pt=ct[It].getIntersection(et);if(Pt)return Pt}return null}_resizeDOM(){const et=this.width(),ct=this.height();this.content&&(this.content.style.width=et+D,this.content.style.height=ct+D),this.bufferCanvas.setSize(et,ct),this.bufferHitCanvas.setSize(et,ct),this.children.forEach(At=>{At.setSize({width:et,height:ct}),At.draw()})}add(et,...ct){if(arguments.length>1){for(let Ct=0;Ct<arguments.length;Ct++)this.add(arguments[Ct]);return this}super.add(et);const At=this.children.length;return At>at&&t.Util.warn("The stage has "+At+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),et.setSize({width:this.width(),height:this.height()}),et.draw(),u.Konva.isBrowser&&this.content.appendChild(et.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(et){return _.hasPointerCapture(et,this)}setPointerCapture(et){_.setPointerCapture(et,this)}releaseCapture(et){_.releaseCapture(et,this)}getLayers(){return this.children}_bindContentEvents(){u.Konva.isBrowser&&dt.forEach(([et,ct])=>{this.content.addEventListener(et,At=>{this[ct](At)},{passive:!1})})}_pointerenter(et){this.setPointersPositions(et);const ct=Et(et.type);ct&&this._fire(ct.pointerenter,{evt:et,target:this,currentTarget:this})}_pointerover(et){this.setPointersPositions(et);const ct=Et(et.type);ct&&this._fire(ct.pointerover,{evt:et,target:this,currentTarget:this})}_getTargetShape(et){let ct=this[et+"targetShape"];return ct&&!ct.getStage()&&(ct=null),ct}_pointerleave(et){const ct=Et(et.type),At=it(et.type);if(!ct)return;this.setPointersPositions(et);const Ct=this._getTargetShape(At),It=!(u.Konva.isDragging()||u.Konva.isTransforming())||u.Konva.hitOnDragEnabled;Ct&&It?(Ct._fireAndBubble(ct.pointerout,{evt:et}),Ct._fireAndBubble(ct.pointerleave,{evt:et}),this._fire(ct.pointerleave,{evt:et,target:this,currentTarget:this}),this[At+"targetShape"]=null):It&&(this._fire(ct.pointerleave,{evt:et,target:this,currentTarget:this}),this._fire(ct.pointerout,{evt:et,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(et){const ct=Et(et.type),At=it(et.type);if(!ct)return;this.setPointersPositions(et);let Ct=!1;this._changedPointerPositions.forEach(It=>{const Pt=this.getIntersection(It);if(d.DD.justDragged=!1,u.Konva["_"+At+"ListenClick"]=!0,!Pt||!Pt.isListening()){this[At+"ClickStartShape"]=void 0;return}u.Konva.capturePointerEventsEnabled&&Pt.setPointerCapture(It.id),this[At+"ClickStartShape"]=Pt,Pt._fireAndBubble(ct.pointerdown,{evt:et,pointerId:It.id}),Ct=!0;const $t=et.type.indexOf("touch")>=0;Pt.preventDefault()&&et.cancelable&&$t&&et.preventDefault()}),Ct||this._fire(ct.pointerdown,{evt:et,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(et){const ct=Et(et.type),At=it(et.type);if(!ct||(u.Konva.isDragging()&&d.DD.node.preventDefault()&&et.cancelable&&et.preventDefault(),this.setPointersPositions(et),!(!(u.Konva.isDragging()||u.Konva.isTransforming())||u.Konva.hitOnDragEnabled)))return;const It={};let Pt=!1;const $t=this._getTargetShape(At);this._changedPointerPositions.forEach(oe=>{const Kt=_.getCapturedShape(oe.id)||this.getIntersection(oe),Fe=oe.id,le={evt:et,pointerId:Fe},Ke=$t!==Kt;if(Ke&&$t&&($t._fireAndBubble(ct.pointerout,{...le},Kt),$t._fireAndBubble(ct.pointerleave,{...le},Kt)),Kt){if(It[Kt._id])return;It[Kt._id]=!0}Kt&&Kt.isListening()?(Pt=!0,Ke&&(Kt._fireAndBubble(ct.pointerover,{...le},$t),Kt._fireAndBubble(ct.pointerenter,{...le},$t),this[At+"targetShape"]=Kt),Kt._fireAndBubble(ct.pointermove,{...le})):$t&&(this._fire(ct.pointerover,{evt:et,target:this,currentTarget:this,pointerId:Fe}),this[At+"targetShape"]=null)}),Pt||this._fire(ct.pointermove,{evt:et,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(et){const ct=Et(et.type),At=it(et.type);if(!ct)return;this.setPointersPositions(et);const Ct=this[At+"ClickStartShape"],It=this[At+"ClickEndShape"],Pt={};let $t=!1;this._changedPointerPositions.forEach(oe=>{const Kt=_.getCapturedShape(oe.id)||this.getIntersection(oe);if(Kt){if(Kt.releaseCapture(oe.id),Pt[Kt._id])return;Pt[Kt._id]=!0}const Fe=oe.id,le={evt:et,pointerId:Fe};let Ke=!1;u.Konva["_"+At+"InDblClickWindow"]?(Ke=!0,clearTimeout(this[At+"DblTimeout"])):d.DD.justDragged||(u.Konva["_"+At+"InDblClickWindow"]=!0,clearTimeout(this[At+"DblTimeout"])),this[At+"DblTimeout"]=setTimeout(function(){u.Konva["_"+At+"InDblClickWindow"]=!1},u.Konva.dblClickWindow),Kt&&Kt.isListening()?($t=!0,this[At+"ClickEndShape"]=Kt,Kt._fireAndBubble(ct.pointerup,{...le}),u.Konva["_"+At+"ListenClick"]&&Ct&&Ct===Kt&&(Kt._fireAndBubble(ct.pointerclick,{...le}),Ke&&It&&It===Kt&&Kt._fireAndBubble(ct.pointerdblclick,{...le}))):(this[At+"ClickEndShape"]=null,u.Konva["_"+At+"ListenClick"]&&this._fire(ct.pointerclick,{evt:et,target:this,currentTarget:this,pointerId:Fe}),Ke&&this._fire(ct.pointerdblclick,{evt:et,target:this,currentTarget:this,pointerId:Fe}))}),$t||this._fire(ct.pointerup,{evt:et,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),u.Konva["_"+At+"ListenClick"]=!1,et.cancelable&&At!=="touch"&&At!=="pointer"&&et.preventDefault()}_contextmenu(et){this.setPointersPositions(et);const ct=this.getIntersection(this.getPointerPosition());ct&&ct.isListening()?ct._fireAndBubble(Y,{evt:et}):this._fire(Y,{evt:et,target:this,currentTarget:this})}_wheel(et){this.setPointersPositions(et);const ct=this.getIntersection(this.getPointerPosition());ct&&ct.isListening()?ct._fireAndBubble($,{evt:et}):this._fire($,{evt:et,target:this,currentTarget:this})}_pointercancel(et){this.setPointersPositions(et);const ct=_.getCapturedShape(et.pointerId)||this.getIntersection(this.getPointerPosition());ct&&ct._fireAndBubble(H,_.createEvent(et)),_.releaseCapture(et.pointerId)}_lostpointercapture(et){_.releaseCapture(et.pointerId)}setPointersPositions(et){const ct=this._getContentPosition();let At=null,Ct=null;et=et||window.event,et.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(et.touches,It=>{this._pointerPositions.push({id:It.identifier,x:(It.clientX-ct.left)/ct.scaleX,y:(It.clientY-ct.top)/ct.scaleY})}),Array.prototype.forEach.call(et.changedTouches||et.touches,It=>{this._changedPointerPositions.push({id:It.identifier,x:(It.clientX-ct.left)/ct.scaleX,y:(It.clientY-ct.top)/ct.scaleY})})):(At=(et.clientX-ct.left)/ct.scaleX,Ct=(et.clientY-ct.top)/ct.scaleY,this.pointerPos={x:At,y:Ct},this._pointerPositions=[{x:At,y:Ct,id:t.Util._getFirstPointerId(et)}],this._changedPointerPositions=[{x:At,y:Ct,id:t.Util._getFirstPointerId(et)}])}_setPointerPosition(et){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(et)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const et=this.content.getBoundingClientRect();return{top:et.top,left:et.left,scaleX:et.width/this.content.clientWidth||1,scaleY:et.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new c.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new c.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!u.Konva.isBrowser)return;const et=this.container();if(!et)throw"Stage has no container. A container is required.";et.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),et.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(et){et.batchDraw()}),this}}a.Stage=Rt,Rt.prototype.nodeType=v,(0,m._registerNode)(Rt),n.Factory.addGetterSetter(Rt,"container"),u.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{a.stages.forEach(Nt=>{Nt.batchDraw()})})}(Lp)),Lp}var hd={},zp={},R_;function Ni(){return R_||(R_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Shape=a.shapes=void 0;const t=_e(),n=Yn(),r=be(),u=ei(),c=Re(),d=_e(),m=e4(),_="hasShadow",v="shadowRGBA",b="patternImage",D="linearGradient",U="radialGradient";let w;function M(){return w||(w=n.Util.createCanvasElement().getContext("2d"),w)}a.shapes={};function I(R){const x=this.attrs.fillRule;x?R.fill(x):R.fill()}function P(R){R.stroke()}function K(R){const x=this.attrs.fillRule;x?R.fill(x):R.fill()}function C(R){R.stroke()}function N(){this._clearCache(_)}function z(){this._clearCache(v)}function H(){this._clearCache(b)}function j(){this._clearCache(D)}function q(){this._clearCache(U)}class V extends u.Node{constructor(x){super(x);let G;for(;G=n.Util.getRandomColor(),!(G&&!(G in a.shapes)););this.colorKey=G,a.shapes[G]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(_,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(b,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const G=M().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(G&&G.setTransform){const Y=new n.Transform;Y.translate(this.fillPatternX(),this.fillPatternY()),Y.rotate(t.Konva.getAngle(this.fillPatternRotation())),Y.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),Y.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const T=Y.getMatrix(),F=typeof DOMMatrix>"u"?{a:T[0],b:T[1],c:T[2],d:T[3],e:T[4],f:T[5]}:new DOMMatrix(T);G.setTransform(F)}return G}}_getLinearGradient(){return this._getCache(D,this.__getLinearGradient)}__getLinearGradient(){const x=this.fillLinearGradientColorStops();if(x){const G=M(),Y=this.fillLinearGradientStartPoint(),T=this.fillLinearGradientEndPoint(),F=G.createLinearGradient(Y.x,Y.y,T.x,T.y);for(let k=0;k<x.length;k+=2)F.addColorStop(x[k],x[k+1]);return F}}_getRadialGradient(){return this._getCache(U,this.__getRadialGradient)}__getRadialGradient(){const x=this.fillRadialGradientColorStops();if(x){const G=M(),Y=this.fillRadialGradientStartPoint(),T=this.fillRadialGradientEndPoint(),F=G.createRadialGradient(Y.x,Y.y,this.fillRadialGradientStartRadius(),T.x,T.y,this.fillRadialGradientEndRadius());for(let k=0;k<x.length;k+=2)F.addColorStop(x[k],x[k+1]);return F}}getShadowRGBA(){return this._getCache(v,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const x=n.Util.colorToRGBA(this.shadowColor());if(x)return"rgba("+x.r+","+x.g+","+x.b+","+x.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const x=this.hitStrokeWidth();return x==="auto"?this.hasStroke():this.strokeEnabled()&&!!x}intersects(x){const G=this.getStage();if(!G)return!1;const Y=G.bufferHitCanvas;return Y.getContext().clear(),this.drawHit(Y,void 0,!0),Y.context.getImageData(Math.round(x.x),Math.round(x.y),1,1).data[3]>0}destroy(){return u.Node.prototype.destroy.call(this),delete a.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(x){var G;if(!((G=this.attrs.perfectDrawEnabled)!==null&&G!==void 0?G:!0))return!1;const T=x||this.hasFill(),F=this.hasStroke(),k=this.getAbsoluteOpacity()!==1;if(T&&F&&k)return!0;const Q=this.hasShadow(),$=this.shadowForStrokeEnabled();return!!(T&&F&&Q&&$)}setStrokeHitEnabled(x){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),x?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const x=this.size();return{x:this._centroid?-x.width/2:0,y:this._centroid?-x.height/2:0,width:x.width,height:x.height}}getClientRect(x={}){let G=!1,Y=this.getParent();for(;Y;){if(Y.isCached()){G=!0;break}Y=Y.getParent()}const T=x.skipTransform,F=x.relativeTo||G&&this.getStage()||void 0,k=this.getSelfRect(),$=!x.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,at=k.width+$,dt=k.height+$,X=!x.skipShadow&&this.hasShadow(),it=X?this.shadowOffsetX():0,Et=X?this.shadowOffsetY():0,st=at+Math.abs(it),gt=dt+Math.abs(Et),Rt=X&&this.shadowBlur()||0,Nt=st+Rt*2,et=gt+Rt*2,ct={width:Nt,height:et,x:-($/2+Rt)+Math.min(it,0)+k.x,y:-($/2+Rt)+Math.min(Et,0)+k.y};return T?ct:this._transformedRect(ct,F)}drawScene(x,G,Y){const T=this.getLayer();let F=x||T.getCanvas(),k=F.getContext(),Q=this._getCanvasCache(),$=this.getSceneFunc(),at=this.hasShadow(),dt,X;const it=F.isCache,Et=G===this;if(!this.isVisible()&&!Et)return this;if(Q){k.save();const gt=this.getAbsoluteTransform(G).getMatrix();return k.transform(gt[0],gt[1],gt[2],gt[3],gt[4],gt[5]),this._drawCachedSceneCanvas(k),k.restore(),this}if(!$)return this;if(k.save(),this._useBufferCanvas()&&!it){dt=this.getStage();const gt=Y||dt.bufferCanvas;X=gt.getContext(),X.clear(),X.save(),X._applyLineJoin(this);var st=this.getAbsoluteTransform(G).getMatrix();X.transform(st[0],st[1],st[2],st[3],st[4],st[5]),$.call(this,X,this),X.restore();const Rt=gt.pixelRatio;at&&k._applyShadow(this),k._applyOpacity(this),k._applyGlobalCompositeOperation(this),k.drawImage(gt._canvas,0,0,gt.width/Rt,gt.height/Rt)}else{if(k._applyLineJoin(this),!Et){var st=this.getAbsoluteTransform(G).getMatrix();k.transform(st[0],st[1],st[2],st[3],st[4],st[5]),k._applyOpacity(this),k._applyGlobalCompositeOperation(this)}at&&k._applyShadow(this),$.call(this,k,this)}return k.restore(),this}drawHit(x,G,Y=!1){if(!this.shouldDrawHit(G,Y))return this;const T=this.getLayer(),F=x||T.hitCanvas,k=F&&F.getContext(),Q=this.hitFunc()||this.sceneFunc(),$=this._getCanvasCache(),at=$&&$.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),at){k.save();const X=this.getAbsoluteTransform(G).getMatrix();return k.transform(X[0],X[1],X[2],X[3],X[4],X[5]),this._drawCachedHitCanvas(k),k.restore(),this}if(!Q)return this;if(k.save(),k._applyLineJoin(this),!(this===G)){const X=this.getAbsoluteTransform(G).getMatrix();k.transform(X[0],X[1],X[2],X[3],X[4],X[5])}return Q.call(this,k,this),k.restore(),this}drawHitFromCache(x=0){const G=this._getCanvasCache(),Y=this._getCachedSceneCanvas(),T=G.hit,F=T.getContext(),k=T.getWidth(),Q=T.getHeight();F.clear(),F.drawImage(Y._canvas,0,0,k,Q);try{const $=F.getImageData(0,0,k,Q),at=$.data,dt=at.length,X=n.Util._hexToRgb(this.colorKey);for(let it=0;it<dt;it+=4)at[it+3]>x?(at[it]=X.r,at[it+1]=X.g,at[it+2]=X.b,at[it+3]=255):at[it+3]=0;F.putImageData($,0,0)}catch($){n.Util.error("Unable to draw hit graph from cached scene canvas. "+$.message)}return this}hasPointerCapture(x){return m.hasPointerCapture(x,this)}setPointerCapture(x){m.setPointerCapture(x,this)}releaseCapture(x){m.releaseCapture(x,this)}}a.Shape=V,V.prototype._fillFunc=I,V.prototype._strokeFunc=P,V.prototype._fillFuncHit=K,V.prototype._strokeFuncHit=C,V.prototype._centroid=!1,V.prototype.nodeType="Shape",(0,d._registerNode)(V),V.prototype.eventListeners={},V.prototype.on.call(V.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",N),V.prototype.on.call(V.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",z),V.prototype.on.call(V.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",H),V.prototype.on.call(V.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",j),V.prototype.on.call(V.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",q),r.Factory.addGetterSetter(V,"stroke",void 0,(0,c.getStringOrGradientValidator)()),r.Factory.addGetterSetter(V,"strokeWidth",2,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(V,"hitStrokeWidth","auto",(0,c.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(V,"strokeHitEnabled",!0,(0,c.getBooleanValidator)()),r.Factory.addGetterSetter(V,"perfectDrawEnabled",!0,(0,c.getBooleanValidator)()),r.Factory.addGetterSetter(V,"shadowForStrokeEnabled",!0,(0,c.getBooleanValidator)()),r.Factory.addGetterSetter(V,"lineJoin"),r.Factory.addGetterSetter(V,"lineCap"),r.Factory.addGetterSetter(V,"sceneFunc"),r.Factory.addGetterSetter(V,"hitFunc"),r.Factory.addGetterSetter(V,"dash"),r.Factory.addGetterSetter(V,"dashOffset",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"shadowColor",void 0,(0,c.getStringValidator)()),r.Factory.addGetterSetter(V,"shadowBlur",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"shadowOpacity",1,(0,c.getNumberValidator)()),r.Factory.addComponentsGetterSetter(V,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(V,"shadowOffsetX",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"shadowOffsetY",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillPatternImage"),r.Factory.addGetterSetter(V,"fill",void 0,(0,c.getStringOrGradientValidator)()),r.Factory.addGetterSetter(V,"fillPatternX",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillPatternY",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(V,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(V,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(V,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(V,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(V,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(V,"fillEnabled",!0),r.Factory.addGetterSetter(V,"strokeEnabled",!0),r.Factory.addGetterSetter(V,"shadowEnabled",!0),r.Factory.addGetterSetter(V,"dashEnabled",!0),r.Factory.addGetterSetter(V,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(V,"fillPriority","color"),r.Factory.addComponentsGetterSetter(V,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(V,"fillPatternOffsetX",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillPatternOffsetY",0,(0,c.getNumberValidator)()),r.Factory.addComponentsGetterSetter(V,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(V,"fillPatternScaleX",1,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillPatternScaleY",1,(0,c.getNumberValidator)()),r.Factory.addComponentsGetterSetter(V,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(V,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(V,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(V,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(V,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(V,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(V,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(V,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(V,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(V,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(V,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(V,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(V,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(V,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(V,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(V,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(V,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(V,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(V,"fillPatternRotation",0),r.Factory.addGetterSetter(V,"fillRule",void 0,(0,c.getStringValidator)()),r.Factory.backCompat(V,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(zp)),zp}var C_;function n4(){if(C_)return hd;C_=1,Object.defineProperty(hd,"__esModule",{value:!0}),hd.Layer=void 0;const a=Yn(),t=R0(),n=ei(),r=be(),u=A0(),c=Re(),d=Ni(),m=_e(),_="#",v="beforeDraw",b="draw",D=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],U=D.length;class w extends t.Container{constructor(I){super(I),this.canvas=new u.SceneCanvas,this.hitCanvas=new u.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(I){return this.getContext().clear(I),this.getHitCanvas().getContext().clear(I),this}setZIndex(I){super.setZIndex(I);const P=this.getStage();return P&&P.content&&(P.content.removeChild(this.getNativeCanvasElement()),I<P.children.length-1?P.content.insertBefore(this.getNativeCanvasElement(),P.children[I+1].getCanvas()._canvas):P.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);const I=this.getStage();return I&&I.content&&(I.content.removeChild(this.getNativeCanvasElement()),I.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!n.Node.prototype.moveUp.call(this))return!1;const P=this.getStage();return!P||!P.content?!1:(P.content.removeChild(this.getNativeCanvasElement()),this.index<P.children.length-1?P.content.insertBefore(this.getNativeCanvasElement(),P.children[this.index+1].getCanvas()._canvas):P.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){const I=this.getStage();if(I){const P=I.children;I.content&&(I.content.removeChild(this.getNativeCanvasElement()),I.content.insertBefore(this.getNativeCanvasElement(),P[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){const I=this.getStage();if(I){const P=I.children;I.content&&(I.content.removeChild(this.getNativeCanvasElement()),I.content.insertBefore(this.getNativeCanvasElement(),P[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const I=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),I&&I.parentNode&&a.Util._isInDocument(I)&&I.parentNode.removeChild(I),this}getStage(){return this.parent}setSize({width:I,height:P}){return this.canvas.setSize(I,P),this.hitCanvas.setSize(I,P),this._setSmoothEnabled(),this}_validateAdd(I){const P=I.getType();P!=="Group"&&P!=="Shape"&&a.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(I){return I=I||{},I.width=I.width||this.getWidth(),I.height=I.height||this.getHeight(),I.x=I.x!==void 0?I.x:this.x(),I.y=I.y!==void 0?I.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,I)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){a.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){a.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,a.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(I){if(!this.isListening()||!this.isVisible())return null;let P=1,K=!1;for(;;){for(let C=0;C<U;C++){const N=D[C],z=this._getIntersection({x:I.x+N.x*P,y:I.y+N.y*P}),H=z.shape;if(H)return H;if(K=!!z.antialiased,!z.antialiased)break}if(K)P+=1;else return null}}_getIntersection(I){const P=this.hitCanvas.pixelRatio,K=this.hitCanvas.context.getImageData(Math.round(I.x*P),Math.round(I.y*P),1,1).data,C=K[3];if(C===255){const N=a.Util._rgbToHex(K[0],K[1],K[2]),z=d.shapes[_+N];return z?{shape:z}:{antialiased:!0}}else if(C>0)return{antialiased:!0};return{}}drawScene(I,P){const K=this.getLayer(),C=I||K&&K.getCanvas();return this._fire(v,{node:this}),this.clearBeforeDraw()&&C.getContext().clear(),t.Container.prototype.drawScene.call(this,C,P),this._fire(b,{node:this}),this}drawHit(I,P){const K=this.getLayer(),C=I||K&&K.hitCanvas;return K&&K.clearBeforeDraw()&&K.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,C,P),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(I){a.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(I)}getHitGraphEnabled(I){return a.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const I=this.parent;!!this.hitCanvas._canvas.parentNode?I.content.removeChild(this.hitCanvas._canvas):I.content.appendChild(this.hitCanvas._canvas)}destroy(){return a.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return hd.Layer=w,w.prototype.nodeType="Layer",(0,m._registerNode)(w),r.Factory.addGetterSetter(w,"imageSmoothingEnabled",!0),r.Factory.addGetterSetter(w,"clearBeforeDraw",!0),r.Factory.addGetterSetter(w,"hitGraphEnabled",!0,(0,c.getBooleanValidator)()),hd}var fd={},D_;function y5(){if(D_)return fd;D_=1,Object.defineProperty(fd,"__esModule",{value:!0}),fd.FastLayer=void 0;const a=Yn(),t=n4(),n=_e();let r=class extends t.Layer{constructor(c){super(c),this.listening(!1),a.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return fd.FastLayer=r,r.prototype.nodeType="FastLayer",(0,n._registerNode)(r),fd}var dd={},w_;function N1(){if(w_)return dd;w_=1,Object.defineProperty(dd,"__esModule",{value:!0}),dd.Group=void 0;const a=Yn(),t=R0(),n=_e();let r=class extends t.Container{_validateAdd(c){const d=c.getType();d!=="Group"&&d!=="Shape"&&a.Util.throw("You may only add groups and shapes to groups.")}};return dd.Group=r,r.prototype.nodeType="Group",(0,n._registerNode)(r),dd}var gd={},N_;function O1(){if(N_)return gd;N_=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.Animation=void 0;const a=_e(),t=Yn(),n=function(){return a.glob.performance&&a.glob.performance.now?function(){return a.glob.performance.now()}:function(){return new Date().getTime()}}();let r=class Lh{constructor(c,d){this.id=Lh.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=c,this.setLayers(d)}setLayers(c){let d=[];return c&&(d=Array.isArray(c)?c:[c]),this.layers=d,this}getLayers(){return this.layers}addLayer(c){const d=this.layers,m=d.length;for(let _=0;_<m;_++)if(d[_]._id===c._id)return!1;return this.layers.push(c),!0}isRunning(){const d=Lh.animations,m=d.length;for(let _=0;_<m;_++)if(d[_].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),Lh._addAnimation(this),this}stop(){return Lh._removeAnimation(this),this}_updateFrameObject(c){this.frame.timeDiff=c-this.frame.lastTime,this.frame.lastTime=c,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(c){this.animations.push(c),this._handleAnimation()}static _removeAnimation(c){const d=c.id,m=this.animations,_=m.length;for(let v=0;v<_;v++)if(m[v].id===d){this.animations.splice(v,1);break}}static _runFrames(){const c={},d=this.animations;for(let m=0;m<d.length;m++){const _=d[m],v=_.layers,b=_.func;_._updateFrameObject(n());const D=v.length;let U;if(b?U=b.call(_,_.frame)!==!1:U=!0,!!U)for(let w=0;w<D;w++){const M=v[w];M._id!==void 0&&(c[M._id]=M)}}for(const m in c)c.hasOwnProperty(m)&&c[m].batchDraw()}static _animationLoop(){const c=Lh;c.animations.length?(c._runFrames(),t.Util.requestAnimFrame(c._animationLoop)):c.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return gd.Animation=r,r.animations=[],r.animIdCounter=0,r.animRunning=!1,gd}var Pp={},O_;function _5(){return O_||(O_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Easings=a.Tween=void 0;const t=Yn(),n=O1(),r=ei(),u=_e(),c={node:1,duration:1,easing:1,onFinish:1,yoyo:1},d=1,m=2,_=3,v=["fill","stroke","shadowColor"];let b=0;class D{constructor(M,I,P,K,C,N,z){this.prop=M,this.propFunc=I,this.begin=K,this._pos=K,this.duration=N,this._change=0,this.prevPos=0,this.yoyo=z,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=P,this._change=C-this.begin,this.pause()}fire(M){const I=this[M];I&&I()}setTime(M){M>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():M<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=M,this.update())}getTime(){return this._time}setPosition(M){this.prevPos=this._pos,this.propFunc(M),this._pos=M}getPosition(M){return M===void 0&&(M=this._time),this.func(M,this.begin,this._change,this.duration)}play(){this.state=m,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=_,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(M){this.pause(),this._time=M,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const M=this.getTimer()-this._startTime;this.state===m?this.setTime(M):this.state===_&&this.setTime(this.duration-M)}pause(){this.state=d,this.fire("onPause")}getTimer(){return new Date().getTime()}}class U{constructor(M){const I=this,P=M.node,K=P._id,C=M.easing||a.Easings.Linear,N=!!M.yoyo;let z,H;typeof M.duration>"u"?z=.3:M.duration===0?z=.001:z=M.duration,this.node=P,this._id=b++;const j=P.getLayer()||(P instanceof u.Konva.Stage?P.getLayers():null);j||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){I.tween.onEnterFrame()},j),this.tween=new D(H,function(q){I._tweenFunc(q)},C,0,1,z*1e3,N),this._addListeners(),U.attrs[K]||(U.attrs[K]={}),U.attrs[K][this._id]||(U.attrs[K][this._id]={}),U.tweens[K]||(U.tweens[K]={});for(H in M)c[H]===void 0&&this._addAttr(H,M[H]);this.reset(),this.onFinish=M.onFinish,this.onReset=M.onReset,this.onUpdate=M.onUpdate}_addAttr(M,I){const P=this.node,K=P._id;let C,N,z,H,j;const q=U.tweens[K][M];q&&delete U.attrs[K][q][M];let V=P.getAttr(M);if(t.Util._isArray(I))if(C=[],N=Math.max(I.length,V.length),M==="points"&&I.length!==V.length&&(I.length>V.length?(H=V,V=t.Util._prepareArrayForTween(V,I,P.closed())):(z=I,I=t.Util._prepareArrayForTween(I,V,P.closed()))),M.indexOf("fill")===0)for(let R=0;R<N;R++)if(R%2===0)C.push(I[R]-V[R]);else{const x=t.Util.colorToRGBA(V[R]);j=t.Util.colorToRGBA(I[R]),V[R]=x,C.push({r:j.r-x.r,g:j.g-x.g,b:j.b-x.b,a:j.a-x.a})}else for(let R=0;R<N;R++)C.push(I[R]-V[R]);else v.indexOf(M)!==-1?(V=t.Util.colorToRGBA(V),j=t.Util.colorToRGBA(I),C={r:j.r-V.r,g:j.g-V.g,b:j.b-V.b,a:j.a-V.a}):C=I-V;U.attrs[K][this._id][M]={start:V,diff:C,end:I,trueEnd:z,trueStart:H},U.tweens[K][M]=this._id}_tweenFunc(M){const I=this.node,P=U.attrs[I._id][this._id];let K,C,N,z,H,j,q,V;for(K in P){if(C=P[K],N=C.start,z=C.diff,V=C.end,t.Util._isArray(N))if(H=[],q=Math.max(N.length,V.length),K.indexOf("fill")===0)for(j=0;j<q;j++)j%2===0?H.push((N[j]||0)+z[j]*M):H.push("rgba("+Math.round(N[j].r+z[j].r*M)+","+Math.round(N[j].g+z[j].g*M)+","+Math.round(N[j].b+z[j].b*M)+","+(N[j].a+z[j].a*M)+")");else for(j=0;j<q;j++)H.push((N[j]||0)+z[j]*M);else v.indexOf(K)!==-1?H="rgba("+Math.round(N.r+z.r*M)+","+Math.round(N.g+z.g*M)+","+Math.round(N.b+z.b*M)+","+(N.a+z.a*M)+")":H=N+z*M;I.setAttr(K,H)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const M=this.node,I=U.attrs[M._id][this._id];I.points&&I.points.trueEnd&&M.setAttr("points",I.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const M=this.node,I=U.attrs[M._id][this._id];I.points&&I.points.trueStart&&M.points(I.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(M){return this.tween.seek(M*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const M=this.node._id,I=this._id,P=U.tweens[M];this.pause();for(const K in P)delete U.tweens[M][K];delete U.attrs[M][I]}}a.Tween=U,U.attrs={},U.tweens={},r.Node.prototype.to=function(w){const M=w.onFinish;w.node=this,w.onFinish=function(){this.destroy(),M&&M()},new U(w).play()},a.Easings={BackEaseIn(w,M,I,P){return I*(w/=P)*w*((1.70158+1)*w-1.70158)+M},BackEaseOut(w,M,I,P){return I*((w=w/P-1)*w*((1.70158+1)*w+1.70158)+1)+M},BackEaseInOut(w,M,I,P){let K=1.70158;return(w/=P/2)<1?I/2*(w*w*(((K*=1.525)+1)*w-K))+M:I/2*((w-=2)*w*(((K*=1.525)+1)*w+K)+2)+M},ElasticEaseIn(w,M,I,P,K,C){let N=0;return w===0?M:(w/=P)===1?M+I:(C||(C=P*.3),!K||K<Math.abs(I)?(K=I,N=C/4):N=C/(2*Math.PI)*Math.asin(I/K),-(K*Math.pow(2,10*(w-=1))*Math.sin((w*P-N)*(2*Math.PI)/C))+M)},ElasticEaseOut(w,M,I,P,K,C){let N=0;return w===0?M:(w/=P)===1?M+I:(C||(C=P*.3),!K||K<Math.abs(I)?(K=I,N=C/4):N=C/(2*Math.PI)*Math.asin(I/K),K*Math.pow(2,-10*w)*Math.sin((w*P-N)*(2*Math.PI)/C)+I+M)},ElasticEaseInOut(w,M,I,P,K,C){let N=0;return w===0?M:(w/=P/2)===2?M+I:(C||(C=P*(.3*1.5)),!K||K<Math.abs(I)?(K=I,N=C/4):N=C/(2*Math.PI)*Math.asin(I/K),w<1?-.5*(K*Math.pow(2,10*(w-=1))*Math.sin((w*P-N)*(2*Math.PI)/C))+M:K*Math.pow(2,-10*(w-=1))*Math.sin((w*P-N)*(2*Math.PI)/C)*.5+I+M)},BounceEaseOut(w,M,I,P){return(w/=P)<1/2.75?I*(7.5625*w*w)+M:w<2/2.75?I*(7.5625*(w-=1.5/2.75)*w+.75)+M:w<2.5/2.75?I*(7.5625*(w-=2.25/2.75)*w+.9375)+M:I*(7.5625*(w-=2.625/2.75)*w+.984375)+M},BounceEaseIn(w,M,I,P){return I-a.Easings.BounceEaseOut(P-w,0,I,P)+M},BounceEaseInOut(w,M,I,P){return w<P/2?a.Easings.BounceEaseIn(w*2,0,I,P)*.5+M:a.Easings.BounceEaseOut(w*2-P,0,I,P)*.5+I*.5+M},EaseIn(w,M,I,P){return I*(w/=P)*w+M},EaseOut(w,M,I,P){return-I*(w/=P)*(w-2)+M},EaseInOut(w,M,I,P){return(w/=P/2)<1?I/2*w*w+M:-I/2*(--w*(w-2)-1)+M},StrongEaseIn(w,M,I,P){return I*(w/=P)*w*w*w*w+M},StrongEaseOut(w,M,I,P){return I*((w=w/P-1)*w*w*w*w+1)+M},StrongEaseInOut(w,M,I,P){return(w/=P/2)<1?I/2*w*w*w*w*w+M:I/2*((w-=2)*w*w*w*w+2)+M},Linear(w,M,I,P){return I*w/P+M}}}(Pp)),Pp}var M_;function n1(){return M_||(M_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Konva=void 0;const t=_e(),n=Yn(),r=ei(),u=R0(),c=p5(),d=n4(),m=y5(),_=N1(),v=w1(),b=Ni(),D=O1(),U=_5(),w=t4(),M=A0();a.Konva=n.Util._assign(t.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:u.Container,Stage:c.Stage,stages:c.stages,Layer:d.Layer,FastLayer:m.FastLayer,Group:_.Group,DD:v.DD,Shape:b.Shape,shapes:b.shapes,Animation:D.Animation,Tween:U.Tween,Easings:U.Easings,Context:w.Context,Canvas:M.Canvas}),a.default=a.Konva}(Mp)),Mp}var md={},x_;function v5(){if(x_)return md;x_=1,Object.defineProperty(md,"__esModule",{value:!0}),md.Arc=void 0;const a=be(),t=Ni(),n=_e(),r=Re(),u=_e();let c=class extends t.Shape{_sceneFunc(m){const _=n.Konva.getAngle(this.angle()),v=this.clockwise();m.beginPath(),m.arc(0,0,this.outerRadius(),0,_,v),m.arc(0,0,this.innerRadius(),_,0,!v),m.closePath(),m.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(m){this.outerRadius(m/2)}setHeight(m){this.outerRadius(m/2)}getSelfRect(){const m=this.innerRadius(),_=this.outerRadius(),v=this.clockwise(),b=n.Konva.getAngle(v?360-this.angle():this.angle()),D=Math.cos(Math.min(b,Math.PI)),U=1,w=Math.sin(Math.min(Math.max(Math.PI,b),3*Math.PI/2)),M=Math.sin(Math.min(b,Math.PI/2)),I=D*(D>0?m:_),P=U*_,K=w*(w>0?m:_),C=M*(M>0?_:m);return{x:I,y:v?-1*C:K,width:P-I,height:C-K}}};return md.Arc=c,c.prototype._centroid=!0,c.prototype.className="Arc",c.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,u._registerNode)(c),a.Factory.addGetterSetter(c,"innerRadius",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"outerRadius",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"angle",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"clockwise",!1,(0,r.getBooleanValidator)()),md}var pd={},yd={},V_;function i4(){if(V_)return yd;V_=1,Object.defineProperty(yd,"__esModule",{value:!0}),yd.Line=void 0;const a=be(),t=_e(),n=Ni(),r=Re();function u(m,_,v,b,D,U,w){const M=Math.sqrt(Math.pow(v-m,2)+Math.pow(b-_,2)),I=Math.sqrt(Math.pow(D-v,2)+Math.pow(U-b,2)),P=w*M/(M+I),K=w*I/(M+I),C=v-P*(D-m),N=b-P*(U-_),z=v+K*(D-m),H=b+K*(U-_);return[C,N,z,H]}function c(m,_){const v=m.length,b=[];for(let D=2;D<v-2;D+=2){const U=u(m[D-2],m[D-1],m[D],m[D+1],m[D+2],m[D+3],_);isNaN(U[0])||(b.push(U[0]),b.push(U[1]),b.push(m[D]),b.push(m[D+1]),b.push(U[2]),b.push(U[3]))}return b}class d extends n.Shape{constructor(_){super(_),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(_){let v=this.points(),b=v.length,D=this.tension(),U=this.closed(),w=this.bezier(),M,I,P;if(b){if(_.beginPath(),_.moveTo(v[0],v[1]),D!==0&&b>4){for(M=this.getTensionPoints(),I=M.length,P=U?0:4,U||_.quadraticCurveTo(M[0],M[1],M[2],M[3]);P<I-2;)_.bezierCurveTo(M[P++],M[P++],M[P++],M[P++],M[P++],M[P++]);U||_.quadraticCurveTo(M[I-2],M[I-1],v[b-2],v[b-1])}else if(w)for(P=2;P<b;)_.bezierCurveTo(v[P++],v[P++],v[P++],v[P++],v[P++],v[P++]);else for(P=2;P<b;P+=2)_.lineTo(v[P],v[P+1]);U?(_.closePath(),_.fillStrokeShape(this)):_.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():c(this.points(),this.tension())}_getTensionPointsClosed(){const _=this.points(),v=_.length,b=this.tension(),D=u(_[v-2],_[v-1],_[0],_[1],_[2],_[3],b),U=u(_[v-4],_[v-3],_[v-2],_[v-1],_[0],_[1],b),w=c(_,b);return[D[2],D[3]].concat(w).concat([U[0],U[1],_[v-2],_[v-1],U[2],U[3],D[0],D[1],_[0],_[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let _=this.points();if(_.length<4)return{x:_[0]||0,y:_[1]||0,width:0,height:0};this.tension()!==0?_=[_[0],_[1],...this._getTensionPoints(),_[_.length-2],_[_.length-1]]:_=this.points();let v=_[0],b=_[0],D=_[1],U=_[1],w,M;for(let I=0;I<_.length/2;I++)w=_[I*2],M=_[I*2+1],v=Math.min(v,w),b=Math.max(b,w),D=Math.min(D,M),U=Math.max(U,M);return{x:v,y:D,width:b-v,height:U-D}}}return yd.Line=d,d.prototype.className="Line",d.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(d),a.Factory.addGetterSetter(d,"closed",!1),a.Factory.addGetterSetter(d,"bezier",!1),a.Factory.addGetterSetter(d,"tension",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(d,"points",[],(0,r.getNumberArrayValidator)()),yd}var _d={},Bp={},U_;function E5(){return U_||(U_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.t2length=a.getQuadraticArcLength=a.getCubicArcLength=a.binomialCoefficients=a.cValues=a.tValues=void 0,a.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],a.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],a.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(d,m,_)=>{let v,b;const U=_/2;v=0;for(let w=0;w<20;w++)b=U*a.tValues[20][w]+U,v+=a.cValues[20][w]*r(d,m,b);return U*v};a.getCubicArcLength=t;const n=(d,m,_)=>{_===void 0&&(_=1);const v=d[0]-2*d[1]+d[2],b=m[0]-2*m[1]+m[2],D=2*d[1]-2*d[0],U=2*m[1]-2*m[0],w=4*(v*v+b*b),M=4*(v*D+b*U),I=D*D+U*U;if(w===0)return _*Math.sqrt(Math.pow(d[2]-d[0],2)+Math.pow(m[2]-m[0],2));const P=M/(2*w),K=I/w,C=_+P,N=K-P*P,z=C*C+N>0?Math.sqrt(C*C+N):0,H=P*P+N>0?Math.sqrt(P*P+N):0,j=P+Math.sqrt(P*P+N)!==0?N*Math.log(Math.abs((C+z)/(P+H))):0;return Math.sqrt(w)/2*(C*z-P*H+j)};a.getQuadraticArcLength=n;function r(d,m,_){const v=u(1,_,d),b=u(1,_,m),D=v*v+b*b;return Math.sqrt(D)}const u=(d,m,_)=>{const v=_.length-1;let b,D;if(v===0)return 0;if(d===0){D=0;for(let U=0;U<=v;U++)D+=a.binomialCoefficients[v][U]*Math.pow(1-m,v-U)*Math.pow(m,U)*_[U];return D}else{b=new Array(v);for(let U=0;U<v;U++)b[U]=v*(_[U+1]-_[U]);return u(d-1,m,b)}},c=(d,m,_)=>{let v=1,b=d/m,D=(d-_(b))/m,U=0;for(;v>.001;){const w=_(b+D),M=Math.abs(d-w)/m;if(M<v)v=M,b+=D;else{const I=_(b-D),P=Math.abs(d-I)/m;P<v?(v=P,b-=D):D/=2}if(U++,U>500)break}return b};a.t2length=c}(Bp)),Bp}var I_;function M1(){if(I_)return _d;I_=1,Object.defineProperty(_d,"__esModule",{value:!0}),_d.Path=void 0;const a=be(),t=Ni(),n=_e(),r=E5();class u extends t.Shape{constructor(d){super(d),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=u.parsePathData(this.data()),this.pathLength=u.getPathLength(this.dataArray)}_sceneFunc(d){const m=this.dataArray;d.beginPath();let _=!1;for(let z=0;z<m.length;z++){const H=m[z].command,j=m[z].points;switch(H){case"L":d.lineTo(j[0],j[1]);break;case"M":d.moveTo(j[0],j[1]);break;case"C":d.bezierCurveTo(j[0],j[1],j[2],j[3],j[4],j[5]);break;case"Q":d.quadraticCurveTo(j[0],j[1],j[2],j[3]);break;case"A":var v=j[0],b=j[1],D=j[2],U=j[3],w=j[4],M=j[5],I=j[6],P=j[7],K=D>U?D:U,C=D>U?1:D/U,N=D>U?U/D:1;d.translate(v,b),d.rotate(I),d.scale(C,N),d.arc(0,0,K,w,w+M,1-P),d.scale(1/C,1/N),d.rotate(-I),d.translate(-v,-b);break;case"z":_=!0,d.closePath();break}}!_&&!this.hasFill()?d.strokeShape(this):d.fillStrokeShape(this)}getSelfRect(){let d=[];this.dataArray.forEach(function(w){if(w.command==="A"){const M=w.points[4],I=w.points[5],P=w.points[4]+I;let K=Math.PI/180;if(Math.abs(M-P)<K&&(K=Math.abs(M-P)),I<0)for(let C=M-K;C>P;C-=K){const N=u.getPointOnEllipticalArc(w.points[0],w.points[1],w.points[2],w.points[3],C,0);d.push(N.x,N.y)}else for(let C=M+K;C<P;C+=K){const N=u.getPointOnEllipticalArc(w.points[0],w.points[1],w.points[2],w.points[3],C,0);d.push(N.x,N.y)}}else if(w.command==="C")for(let M=0;M<=1;M+=.01){const I=u.getPointOnCubicBezier(M,w.start.x,w.start.y,w.points[0],w.points[1],w.points[2],w.points[3],w.points[4],w.points[5]);d.push(I.x,I.y)}else d=d.concat(w.points)});let m=d[0],_=d[0],v=d[1],b=d[1],D,U;for(let w=0;w<d.length/2;w++)D=d[w*2],U=d[w*2+1],isNaN(D)||(m=Math.min(m,D),_=Math.max(_,D)),isNaN(U)||(v=Math.min(v,U),b=Math.max(b,U));return{x:m,y:v,width:_-m,height:b-v}}getLength(){return this.pathLength}getPointAtLength(d){return u.getPointAtLengthOfDataArray(d,this.dataArray)}static getLineLength(d,m,_,v){return Math.sqrt((_-d)*(_-d)+(v-m)*(v-m))}static getPathLength(d){let m=0;for(let _=0;_<d.length;++_)m+=d[_].pathLength;return m}static getPointAtLengthOfDataArray(d,m){let _,v=0,b=m.length;if(!b)return null;for(;v<b&&d>m[v].pathLength;)d-=m[v].pathLength,++v;if(v===b)return _=m[v-1].points.slice(-2),{x:_[0],y:_[1]};if(d<.01)return _=m[v].points.slice(0,2),{x:_[0],y:_[1]};const D=m[v],U=D.points;switch(D.command){case"L":return u.getPointOnLine(d,D.start.x,D.start.y,U[0],U[1]);case"C":return u.getPointOnCubicBezier((0,r.t2length)(d,u.getPathLength(m),z=>(0,r.getCubicArcLength)([D.start.x,U[0],U[2],U[4]],[D.start.y,U[1],U[3],U[5]],z)),D.start.x,D.start.y,U[0],U[1],U[2],U[3],U[4],U[5]);case"Q":return u.getPointOnQuadraticBezier((0,r.t2length)(d,u.getPathLength(m),z=>(0,r.getQuadraticArcLength)([D.start.x,U[0],U[2]],[D.start.y,U[1],U[3]],z)),D.start.x,D.start.y,U[0],U[1],U[2],U[3]);case"A":var w=U[0],M=U[1],I=U[2],P=U[3],K=U[4],C=U[5],N=U[6];return K+=C*d/D.pathLength,u.getPointOnEllipticalArc(w,M,I,P,K,N)}return null}static getPointOnLine(d,m,_,v,b,D,U){D=D??m,U=U??_;const w=this.getLineLength(m,_,v,b);if(w<1e-10)return{x:m,y:_};if(v===m)return{x:D,y:U+(b>_?d:-d)};const M=(b-_)/(v-m),I=Math.sqrt(d*d/(1+M*M))*(v<m?-1:1),P=M*I;if(Math.abs(U-_-M*(D-m))<1e-10)return{x:D+I,y:U+P};const K=((D-m)*(v-m)+(U-_)*(b-_))/(w*w),C=m+K*(v-m),N=_+K*(b-_),z=this.getLineLength(D,U,C,N),H=Math.sqrt(d*d-z*z),j=Math.sqrt(H*H/(1+M*M))*(v<m?-1:1),q=M*j;return{x:C+j,y:N+q}}static getPointOnCubicBezier(d,m,_,v,b,D,U,w,M){function I(H){return H*H*H}function P(H){return 3*H*H*(1-H)}function K(H){return 3*H*(1-H)*(1-H)}function C(H){return(1-H)*(1-H)*(1-H)}const N=w*I(d)+D*P(d)+v*K(d)+m*C(d),z=M*I(d)+U*P(d)+b*K(d)+_*C(d);return{x:N,y:z}}static getPointOnQuadraticBezier(d,m,_,v,b,D,U){function w(C){return C*C}function M(C){return 2*C*(1-C)}function I(C){return(1-C)*(1-C)}const P=D*w(d)+v*M(d)+m*I(d),K=U*w(d)+b*M(d)+_*I(d);return{x:P,y:K}}static getPointOnEllipticalArc(d,m,_,v,b,D){const U=Math.cos(D),w=Math.sin(D),M={x:_*Math.cos(b),y:v*Math.sin(b)};return{x:d+(M.x*U-M.y*w),y:m+(M.x*w+M.y*U)}}static parsePathData(d){if(!d)return[];let m=d;const _=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];m=m.replace(new RegExp(" ","g"),",");for(var v=0;v<_.length;v++)m=m.replace(new RegExp(_[v],"g"),"|"+_[v]);const b=m.split("|"),D=[],U=[];let w=0,M=0;const I=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let P;for(v=1;v<b.length;v++){let T=b[v],F=T.charAt(0);for(T=T.slice(1),U.length=0;P=I.exec(T);)U.push(P[0]);const k=[];for(let Q=0,$=U.length;Q<$;Q++){if(U[Q]==="00"){k.push(0,0);continue}const at=parseFloat(U[Q]);isNaN(at)?k.push(0):k.push(at)}for(;k.length>0&&!isNaN(k[0]);){let Q="",$=[];const at=w,dt=M;var K,C,N,z,H,j,q,V,R,x;switch(F){case"l":w+=k.shift(),M+=k.shift(),Q="L",$.push(w,M);break;case"L":w=k.shift(),M=k.shift(),$.push(w,M);break;case"m":var G=k.shift(),Y=k.shift();if(w+=G,M+=Y,Q="M",D.length>2&&D[D.length-1].command==="z"){for(let X=D.length-2;X>=0;X--)if(D[X].command==="M"){w=D[X].points[0]+G,M=D[X].points[1]+Y;break}}$.push(w,M),F="l";break;case"M":w=k.shift(),M=k.shift(),Q="M",$.push(w,M),F="L";break;case"h":w+=k.shift(),Q="L",$.push(w,M);break;case"H":w=k.shift(),Q="L",$.push(w,M);break;case"v":M+=k.shift(),Q="L",$.push(w,M);break;case"V":M=k.shift(),Q="L",$.push(w,M);break;case"C":$.push(k.shift(),k.shift(),k.shift(),k.shift()),w=k.shift(),M=k.shift(),$.push(w,M);break;case"c":$.push(w+k.shift(),M+k.shift(),w+k.shift(),M+k.shift()),w+=k.shift(),M+=k.shift(),Q="C",$.push(w,M);break;case"S":C=w,N=M,K=D[D.length-1],K.command==="C"&&(C=w+(w-K.points[2]),N=M+(M-K.points[3])),$.push(C,N,k.shift(),k.shift()),w=k.shift(),M=k.shift(),Q="C",$.push(w,M);break;case"s":C=w,N=M,K=D[D.length-1],K.command==="C"&&(C=w+(w-K.points[2]),N=M+(M-K.points[3])),$.push(C,N,w+k.shift(),M+k.shift()),w+=k.shift(),M+=k.shift(),Q="C",$.push(w,M);break;case"Q":$.push(k.shift(),k.shift()),w=k.shift(),M=k.shift(),$.push(w,M);break;case"q":$.push(w+k.shift(),M+k.shift()),w+=k.shift(),M+=k.shift(),Q="Q",$.push(w,M);break;case"T":C=w,N=M,K=D[D.length-1],K.command==="Q"&&(C=w+(w-K.points[0]),N=M+(M-K.points[1])),w=k.shift(),M=k.shift(),Q="Q",$.push(C,N,w,M);break;case"t":C=w,N=M,K=D[D.length-1],K.command==="Q"&&(C=w+(w-K.points[0]),N=M+(M-K.points[1])),w+=k.shift(),M+=k.shift(),Q="Q",$.push(C,N,w,M);break;case"A":z=k.shift(),H=k.shift(),j=k.shift(),q=k.shift(),V=k.shift(),R=w,x=M,w=k.shift(),M=k.shift(),Q="A",$=this.convertEndpointToCenterParameterization(R,x,w,M,q,V,z,H,j);break;case"a":z=k.shift(),H=k.shift(),j=k.shift(),q=k.shift(),V=k.shift(),R=w,x=M,w+=k.shift(),M+=k.shift(),Q="A",$=this.convertEndpointToCenterParameterization(R,x,w,M,q,V,z,H,j);break}D.push({command:Q||F,points:$,start:{x:at,y:dt},pathLength:this.calcLength(at,dt,Q||F,$)})}(F==="z"||F==="Z")&&D.push({command:"z",points:[],start:void 0,pathLength:0})}return D}static calcLength(d,m,_,v){let b,D,U,w;const M=u;switch(_){case"L":return M.getLineLength(d,m,v[0],v[1]);case"C":return(0,r.getCubicArcLength)([d,v[0],v[2],v[4]],[m,v[1],v[3],v[5]],1);case"Q":return(0,r.getQuadraticArcLength)([d,v[0],v[2]],[m,v[1],v[3]],1);case"A":b=0;var I=v[4],P=v[5],K=v[4]+P,C=Math.PI/180;if(Math.abs(I-K)<C&&(C=Math.abs(I-K)),D=M.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],I,0),P<0)for(w=I-C;w>K;w-=C)U=M.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],w,0),b+=M.getLineLength(D.x,D.y,U.x,U.y),D=U;else for(w=I+C;w<K;w+=C)U=M.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],w,0),b+=M.getLineLength(D.x,D.y,U.x,U.y),D=U;return U=M.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],K,0),b+=M.getLineLength(D.x,D.y,U.x,U.y),b}return 0}static convertEndpointToCenterParameterization(d,m,_,v,b,D,U,w,M){const I=M*(Math.PI/180),P=Math.cos(I)*(d-_)/2+Math.sin(I)*(m-v)/2,K=-1*Math.sin(I)*(d-_)/2+Math.cos(I)*(m-v)/2,C=P*P/(U*U)+K*K/(w*w);C>1&&(U*=Math.sqrt(C),w*=Math.sqrt(C));let N=Math.sqrt((U*U*(w*w)-U*U*(K*K)-w*w*(P*P))/(U*U*(K*K)+w*w*(P*P)));b===D&&(N*=-1),isNaN(N)&&(N=0);const z=N*U*K/w,H=N*-w*P/U,j=(d+_)/2+Math.cos(I)*z-Math.sin(I)*H,q=(m+v)/2+Math.sin(I)*z+Math.cos(I)*H,V=function(k){return Math.sqrt(k[0]*k[0]+k[1]*k[1])},R=function(k,Q){return(k[0]*Q[0]+k[1]*Q[1])/(V(k)*V(Q))},x=function(k,Q){return(k[0]*Q[1]<k[1]*Q[0]?-1:1)*Math.acos(R(k,Q))},G=x([1,0],[(P-z)/U,(K-H)/w]),Y=[(P-z)/U,(K-H)/w],T=[(-1*P-z)/U,(-1*K-H)/w];let F=x(Y,T);return R(Y,T)<=-1&&(F=Math.PI),R(Y,T)>=1&&(F=0),D===0&&F>0&&(F=F-2*Math.PI),D===1&&F<0&&(F=F+2*Math.PI),[j,q,U,w,G,F,I,D]}}return _d.Path=u,u.prototype.className="Path",u.prototype._attrsAffectingSize=["data"],(0,n._registerNode)(u),a.Factory.addGetterSetter(u,"data"),_d}var L_;function S5(){if(L_)return pd;L_=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.Arrow=void 0;const a=be(),t=i4(),n=Re(),r=_e(),u=M1();let c=class extends t.Line{_sceneFunc(m){super._sceneFunc(m);const _=Math.PI*2,v=this.points();let b=v;const D=this.tension()!==0&&v.length>4;D&&(b=this.getTensionPoints());const U=this.pointerLength(),w=v.length;let M,I;if(D){const C=[b[b.length-4],b[b.length-3],b[b.length-2],b[b.length-1],v[w-2],v[w-1]],N=u.Path.calcLength(b[b.length-4],b[b.length-3],"C",C),z=u.Path.getPointOnQuadraticBezier(Math.min(1,1-U/N),C[0],C[1],C[2],C[3],C[4],C[5]);M=v[w-2]-z.x,I=v[w-1]-z.y}else M=v[w-2]-v[w-4],I=v[w-1]-v[w-3];const P=(Math.atan2(I,M)+_)%_,K=this.pointerWidth();this.pointerAtEnding()&&(m.save(),m.beginPath(),m.translate(v[w-2],v[w-1]),m.rotate(P),m.moveTo(0,0),m.lineTo(-U,K/2),m.lineTo(-U,-K/2),m.closePath(),m.restore(),this.__fillStroke(m)),this.pointerAtBeginning()&&(m.save(),m.beginPath(),m.translate(v[0],v[1]),D?(M=(b[0]+b[2])/2-v[0],I=(b[1]+b[3])/2-v[1]):(M=v[2]-v[0],I=v[3]-v[1]),m.rotate((Math.atan2(-I,-M)+_)%_),m.moveTo(0,0),m.lineTo(-U,K/2),m.lineTo(-U,-K/2),m.closePath(),m.restore(),this.__fillStroke(m))}__fillStroke(m){const _=this.dashEnabled();_&&(this.attrs.dashEnabled=!1,m.setLineDash([])),m.fillStrokeShape(this),_&&(this.attrs.dashEnabled=!0)}getSelfRect(){const m=super.getSelfRect(),_=this.pointerWidth()/2;return{x:m.x,y:m.y-_,width:m.width,height:m.height+_*2}}};return pd.Arrow=c,c.prototype.className="Arrow",(0,r._registerNode)(c),a.Factory.addGetterSetter(c,"pointerLength",10,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(c,"pointerWidth",10,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(c,"pointerAtBeginning",!1),a.Factory.addGetterSetter(c,"pointerAtEnding",!0),pd}var vd={},z_;function T5(){if(z_)return vd;z_=1,Object.defineProperty(vd,"__esModule",{value:!0}),vd.Circle=void 0;const a=be(),t=Ni(),n=Re(),r=_e();let u=class extends t.Shape{_sceneFunc(d){d.beginPath(),d.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(d){this.radius()!==d/2&&this.radius(d/2)}setHeight(d){this.radius()!==d/2&&this.radius(d/2)}};return vd.Circle=u,u.prototype._centroid=!0,u.prototype.className="Circle",u.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(u),a.Factory.addGetterSetter(u,"radius",0,(0,n.getNumberValidator)()),vd}var Ed={},P_;function b5(){if(P_)return Ed;P_=1,Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.Ellipse=void 0;const a=be(),t=Ni(),n=Re(),r=_e();let u=class extends t.Shape{_sceneFunc(d){const m=this.radiusX(),_=this.radiusY();d.beginPath(),d.save(),m!==_&&d.scale(1,_/m),d.arc(0,0,m,0,Math.PI*2,!1),d.restore(),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(d){this.radiusX(d/2)}setHeight(d){this.radiusY(d/2)}};return Ed.Ellipse=u,u.prototype.className="Ellipse",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,r._registerNode)(u),a.Factory.addComponentsGetterSetter(u,"radius",["x","y"]),a.Factory.addGetterSetter(u,"radiusX",0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(u,"radiusY",0,(0,n.getNumberValidator)()),Ed}var Sd={},B_;function A5(){if(B_)return Sd;B_=1,Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.Image=void 0;const a=Yn(),t=be(),n=Ni(),r=_e(),u=Re();class c extends n.Shape{constructor(m){super(m),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const m=this.image();m&&m.complete||m&&m.readyState===4||m&&m.addEventListener&&m.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const m=!!this.cornerRadius(),_=this.hasShadow();return m&&_?!0:super._useBufferCanvas(!0)}_sceneFunc(m){const _=this.getWidth(),v=this.getHeight(),b=this.cornerRadius(),D=this.attrs.image;let U;if(D){const w=this.attrs.cropWidth,M=this.attrs.cropHeight;w&&M?U=[D,this.cropX(),this.cropY(),w,M,0,0,_,v]:U=[D,0,0,_,v]}(this.hasFill()||this.hasStroke()||b)&&(m.beginPath(),b?a.Util.drawRoundedRectPath(m,_,v,b):m.rect(0,0,_,v),m.closePath(),m.fillStrokeShape(this)),D&&(b&&m.clip(),m.drawImage.apply(m,U))}_hitFunc(m){const _=this.width(),v=this.height(),b=this.cornerRadius();m.beginPath(),b?a.Util.drawRoundedRectPath(m,_,v,b):m.rect(0,0,_,v),m.closePath(),m.fillStrokeShape(this)}getWidth(){var m,_;return(m=this.attrs.width)!==null&&m!==void 0?m:(_=this.image())===null||_===void 0?void 0:_.width}getHeight(){var m,_;return(m=this.attrs.height)!==null&&m!==void 0?m:(_=this.image())===null||_===void 0?void 0:_.height}static fromURL(m,_,v=null){const b=a.Util.createImageElement();b.onload=function(){const D=new c({image:b});_(D)},b.onerror=v,b.crossOrigin="Anonymous",b.src=m}}return Sd.Image=c,c.prototype.className="Image",(0,r._registerNode)(c),t.Factory.addGetterSetter(c,"cornerRadius",0,(0,u.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(c,"image"),t.Factory.addComponentsGetterSetter(c,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(c,"cropX",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropY",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropWidth",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropHeight",0,(0,u.getNumberValidator)()),Sd}var Oc={},G_;function R5(){if(G_)return Oc;G_=1,Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.Tag=Oc.Label=void 0;const a=be(),t=Ni(),n=N1(),r=Re(),u=_e(),c=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],d="Change.konva",m="none",_="up",v="right",b="down",D="left",U=c.length;let w=class extends n.Group{constructor(P){super(P),this.on("add.konva",function(K){this._addListeners(K.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(P){let K=this,C;const N=function(){K._sync()};for(C=0;C<U;C++)P.on(c[C]+d,N)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let P=this.getText(),K=this.getTag(),C,N,z,H,j,q,V;if(P&&K){switch(C=P.width(),N=P.height(),z=K.pointerDirection(),H=K.pointerWidth(),V=K.pointerHeight(),j=0,q=0,z){case _:j=C/2,q=-1*V;break;case v:j=C+H,q=N/2;break;case b:j=C/2,q=N+V;break;case D:j=-1*H,q=N/2;break}K.setAttrs({x:-1*j,y:-1*q,width:C,height:N}),P.setAttrs({x:-1*j,y:-1*q})}}};Oc.Label=w,w.prototype.className="Label",(0,u._registerNode)(w);class M extends t.Shape{_sceneFunc(P){const K=this.width(),C=this.height(),N=this.pointerDirection(),z=this.pointerWidth(),H=this.pointerHeight(),j=this.cornerRadius();let q=0,V=0,R=0,x=0;typeof j=="number"?q=V=R=x=Math.min(j,K/2,C/2):(q=Math.min(j[0]||0,K/2,C/2),V=Math.min(j[1]||0,K/2,C/2),x=Math.min(j[2]||0,K/2,C/2),R=Math.min(j[3]||0,K/2,C/2)),P.beginPath(),P.moveTo(q,0),N===_&&(P.lineTo((K-z)/2,0),P.lineTo(K/2,-1*H),P.lineTo((K+z)/2,0)),P.lineTo(K-V,0),P.arc(K-V,V,V,Math.PI*3/2,0,!1),N===v&&(P.lineTo(K,(C-H)/2),P.lineTo(K+z,C/2),P.lineTo(K,(C+H)/2)),P.lineTo(K,C-x),P.arc(K-x,C-x,x,0,Math.PI/2,!1),N===b&&(P.lineTo((K+z)/2,C),P.lineTo(K/2,C+H),P.lineTo((K-z)/2,C)),P.lineTo(R,C),P.arc(R,C-R,R,Math.PI/2,Math.PI,!1),N===D&&(P.lineTo(0,(C+H)/2),P.lineTo(-1*z,C/2),P.lineTo(0,(C-H)/2)),P.lineTo(0,q),P.arc(q,q,q,Math.PI,Math.PI*3/2,!1),P.closePath(),P.fillStrokeShape(this)}getSelfRect(){let P=0,K=0,C=this.pointerWidth(),N=this.pointerHeight(),z=this.pointerDirection(),H=this.width(),j=this.height();return z===_?(K-=N,j+=N):z===b?j+=N:z===D?(P-=C*1.5,H+=C):z===v&&(H+=C*1.5),{x:P,y:K,width:H,height:j}}}return Oc.Tag=M,M.prototype.className="Tag",(0,u._registerNode)(M),a.Factory.addGetterSetter(M,"pointerDirection",m),a.Factory.addGetterSetter(M,"pointerWidth",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(M,"pointerHeight",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(M,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),Oc}var Td={},H_;function a4(){if(H_)return Td;H_=1,Object.defineProperty(Td,"__esModule",{value:!0}),Td.Rect=void 0;const a=be(),t=Ni(),n=_e(),r=Yn(),u=Re();let c=class extends t.Shape{_sceneFunc(m){const _=this.cornerRadius(),v=this.width(),b=this.height();m.beginPath(),_?r.Util.drawRoundedRectPath(m,v,b,_):m.rect(0,0,v,b),m.closePath(),m.fillStrokeShape(this)}};return Td.Rect=c,c.prototype.className="Rect",(0,n._registerNode)(c),a.Factory.addGetterSetter(c,"cornerRadius",0,(0,u.getNumberOrArrayOfNumbersValidator)(4)),Td}var bd={},k_;function C5(){if(k_)return bd;k_=1,Object.defineProperty(bd,"__esModule",{value:!0}),bd.RegularPolygon=void 0;const a=be(),t=Ni(),n=Re(),r=_e();let u=class extends t.Shape{_sceneFunc(d){const m=this._getPoints();d.beginPath(),d.moveTo(m[0].x,m[0].y);for(let _=1;_<m.length;_++)d.lineTo(m[_].x,m[_].y);d.closePath(),d.fillStrokeShape(this)}_getPoints(){const d=this.attrs.sides,m=this.attrs.radius||0,_=[];for(let v=0;v<d;v++)_.push({x:m*Math.sin(v*2*Math.PI/d),y:-1*m*Math.cos(v*2*Math.PI/d)});return _}getSelfRect(){const d=this._getPoints();let m=d[0].x,_=d[0].y,v=d[0].x,b=d[0].y;return d.forEach(D=>{m=Math.min(m,D.x),_=Math.max(_,D.x),v=Math.min(v,D.y),b=Math.max(b,D.y)}),{x:m,y:v,width:_-m,height:b-v}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(d){this.radius(d/2)}setHeight(d){this.radius(d/2)}};return bd.RegularPolygon=u,u.prototype.className="RegularPolygon",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(u),a.Factory.addGetterSetter(u,"radius",0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(u,"sides",0,(0,n.getNumberValidator)()),bd}var Ad={},q_;function D5(){if(q_)return Ad;q_=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.Ring=void 0;const a=be(),t=Ni(),n=Re(),r=_e(),u=Math.PI*2;let c=class extends t.Shape{_sceneFunc(m){m.beginPath(),m.arc(0,0,this.innerRadius(),0,u,!1),m.moveTo(this.outerRadius(),0),m.arc(0,0,this.outerRadius(),u,0,!0),m.closePath(),m.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(m){this.outerRadius(m/2)}setHeight(m){this.outerRadius(m/2)}};return Ad.Ring=c,c.prototype.className="Ring",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(c),a.Factory.addGetterSetter(c,"innerRadius",0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(c,"outerRadius",0,(0,n.getNumberValidator)()),Ad}var Rd={},j_;function w5(){if(j_)return Rd;j_=1,Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.Sprite=void 0;const a=be(),t=Ni(),n=O1(),r=Re(),u=_e();let c=class extends t.Shape{constructor(m){super(m),this._updated=!0,this.anim=new n.Animation(()=>{const _=this._updated;return this._updated=!1,_}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(m){const _=this.animation(),v=this.frameIndex(),b=v*4,D=this.animations()[_],U=this.frameOffsets(),w=D[b+0],M=D[b+1],I=D[b+2],P=D[b+3],K=this.image();if((this.hasFill()||this.hasStroke())&&(m.beginPath(),m.rect(0,0,I,P),m.closePath(),m.fillStrokeShape(this)),K)if(U){const C=U[_],N=v*2;m.drawImage(K,w,M,I,P,C[N+0],C[N+1],I,P)}else m.drawImage(K,w,M,I,P,0,0,I,P)}_hitFunc(m){const _=this.animation(),v=this.frameIndex(),b=v*4,D=this.animations()[_],U=this.frameOffsets(),w=D[b+2],M=D[b+3];if(m.beginPath(),U){const I=U[_],P=v*2;m.rect(I[P+0],I[P+1],w,M)}else m.rect(0,0,w,M);m.closePath(),m.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const m=this;this.interval=setInterval(function(){m._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const m=this.getLayer();this.anim.setLayers(m),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const m=this.frameIndex(),_=this.animation(),v=this.animations(),b=v[_],D=b.length/4;m<D-1?this.frameIndex(m+1):this.frameIndex(0)}};return Rd.Sprite=c,c.prototype.className="Sprite",(0,u._registerNode)(c),a.Factory.addGetterSetter(c,"animation"),a.Factory.addGetterSetter(c,"animations"),a.Factory.addGetterSetter(c,"frameOffsets"),a.Factory.addGetterSetter(c,"image"),a.Factory.addGetterSetter(c,"frameIndex",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"frameRate",17,(0,r.getNumberValidator)()),a.Factory.backCompat(c,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Rd}var Cd={},F_;function N5(){if(F_)return Cd;F_=1,Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.Star=void 0;const a=be(),t=Ni(),n=Re(),r=_e();let u=class extends t.Shape{_sceneFunc(d){const m=this.innerRadius(),_=this.outerRadius(),v=this.numPoints();d.beginPath(),d.moveTo(0,0-_);for(let b=1;b<v*2;b++){const D=b%2===0?_:m,U=D*Math.sin(b*Math.PI/v),w=-1*D*Math.cos(b*Math.PI/v);d.lineTo(U,w)}d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(d){this.outerRadius(d/2)}setHeight(d){this.outerRadius(d/2)}};return Cd.Star=u,u.prototype.className="Star",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(u),a.Factory.addGetterSetter(u,"numPoints",5,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(u,"innerRadius",0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(u,"outerRadius",0,(0,n.getNumberValidator)()),Cd}var Uh={},K_;function s4(){if(K_)return Uh;K_=1,Object.defineProperty(Uh,"__esModule",{value:!0}),Uh.Text=void 0,Uh.stringToArray=d;const a=Yn(),t=be(),n=Ni(),r=_e(),u=Re(),c=_e();function d(Et){return[...Et].reduce((st,gt,Rt,Nt)=>{if(new RegExp("\\p{Emoji}","u").test(gt)){const et=Nt[Rt+1];et&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(et)?(st.push(gt+et),Nt[Rt+1]=""):st.push(gt)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(gt+(Nt[Rt+1]||""))?st.push(gt+Nt[Rt+1]):Rt>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(gt)?st[st.length-1]+=gt:gt&&st.push(gt);return st},[])}const m="auto",_="center",v="inherit",b="justify",D="Change.konva",U="2d",w="-",M="left",I="text",P="Text",K="top",C="bottom",N="middle",z="normal",H="px ",j=" ",q="right",V="rtl",R="word",x="char",G="none",Y="…",T=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],F=T.length;function k(Et){return Et.split(",").map(st=>{st=st.trim();const gt=st.indexOf(" ")>=0,Rt=st.indexOf('"')>=0||st.indexOf("'")>=0;return gt&&!Rt&&(st=`"${st}"`),st}).join(", ")}let Q;function $(){return Q||(Q=a.Util.createCanvasElement().getContext(U),Q)}function at(Et){Et.fillText(this._partialText,this._partialTextX,this._partialTextY)}function dt(Et){Et.setAttr("miterLimit",2),Et.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function X(Et){return Et=Et||{},!Et.fillLinearGradientColorStops&&!Et.fillRadialGradientColorStops&&!Et.fillPatternImage&&(Et.fill=Et.fill||"black"),Et}let it=class extends n.Shape{constructor(st){super(X(st)),this._partialTextX=0,this._partialTextY=0;for(let gt=0;gt<F;gt++)this.on(T[gt]+D,this._setTextData);this._setTextData()}_sceneFunc(st){const gt=this.textArr,Rt=gt.length;if(!this.text())return;let Nt=this.padding(),et=this.fontSize(),ct=this.lineHeight()*et,At=this.verticalAlign(),Ct=this.direction(),It=0,Pt=this.align(),$t=this.getWidth(),oe=this.letterSpacing(),Kt=this.fill(),Fe=this.textDecoration(),le=Fe.indexOf("underline")!==-1,Ke=Fe.indexOf("line-through")!==-1,gi;Ct=Ct===v?st.direction:Ct;let He=ct/2,oi=N;if(r.Konva._fixTextRendering){const ji=this.measureSize("M");oi="alphabetic",He=(ji.fontBoundingBoxAscent-ji.fontBoundingBoxDescent)/2+ct/2}var en=0,Xn=0;for(Ct===V&&st.setAttr("direction",Ct),st.setAttr("font",this._getContextFont()),st.setAttr("textBaseline",oi),st.setAttr("textAlign",M),At===N?It=(this.getHeight()-Rt*ct-Nt*2)/2:At===C&&(It=this.getHeight()-Rt*ct-Nt*2),st.translate(Nt,It+Nt),gi=0;gi<Rt;gi++){var en=0,Xn=0,nn=gt[gi],Oi=nn.text,Ce=nn.width,ke=nn.lastInParagraph,Qn,da;if(st.save(),Pt===q?en+=$t-Ce-Nt*2:Pt===_&&(en+=($t-Ce-Nt*2)/2),le){st.save(),st.beginPath();const zn=r.Konva._fixTextRendering?Math.round(et/4):Math.round(et/2),an=en,Ae=He+Xn+zn;st.moveTo(an,Ae),Qn=Oi.split(" ").length-1,da=Pt===b&&!ke?$t-Nt*2:Ce,st.lineTo(an+Math.round(da),Ae),st.lineWidth=et/15;const ma=this._getLinearGradient();st.strokeStyle=ma||Kt,st.stroke(),st.restore()}if(Ke){st.save(),st.beginPath();const zn=r.Konva._fixTextRendering?-Math.round(et/4):0;st.moveTo(en,He+Xn+zn),Qn=Oi.split(" ").length-1,da=Pt===b&&!ke?$t-Nt*2:Ce,st.lineTo(en+Math.round(da),He+Xn+zn),st.lineWidth=et/15;const an=this._getLinearGradient();st.strokeStyle=an||Kt,st.stroke(),st.restore()}if(Ct!==V&&(oe!==0||Pt===b)){Qn=Oi.split(" ").length-1;const zn=d(Oi);for(let an=0;an<zn.length;an++){const Ae=zn[an];Ae===" "&&!ke&&Pt===b&&(en+=($t-Nt*2-Ce)/Qn),this._partialTextX=en,this._partialTextY=He+Xn,this._partialText=Ae,st.fillStrokeShape(this),en+=this.measureSize(Ae).width+oe}}else oe!==0&&st.setAttr("letterSpacing",`${oe}px`),this._partialTextX=en,this._partialTextY=He+Xn,this._partialText=Oi,st.fillStrokeShape(this);st.restore(),Rt>1&&(He+=ct)}}_hitFunc(st){const gt=this.getWidth(),Rt=this.getHeight();st.beginPath(),st.rect(0,0,gt,Rt),st.closePath(),st.fillStrokeShape(this)}setText(st){const gt=a.Util._isString(st)?st:st==null?"":st+"";return this._setAttr(I,gt),this}getWidth(){return this.attrs.width===m||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===m||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return a.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(st){var gt,Rt,Nt,et,ct,At,Ct,It,Pt,$t,oe;let Kt=$(),Fe=this.fontSize(),le;Kt.save(),Kt.font=this._getContextFont(),le=Kt.measureText(st),Kt.restore();const Ke=Fe/100;return{actualBoundingBoxAscent:(gt=le.actualBoundingBoxAscent)!==null&&gt!==void 0?gt:71.58203125*Ke,actualBoundingBoxDescent:(Rt=le.actualBoundingBoxDescent)!==null&&Rt!==void 0?Rt:0,actualBoundingBoxLeft:(Nt=le.actualBoundingBoxLeft)!==null&&Nt!==void 0?Nt:-7.421875*Ke,actualBoundingBoxRight:(et=le.actualBoundingBoxRight)!==null&&et!==void 0?et:75.732421875*Ke,alphabeticBaseline:(ct=le.alphabeticBaseline)!==null&&ct!==void 0?ct:0,emHeightAscent:(At=le.emHeightAscent)!==null&&At!==void 0?At:100*Ke,emHeightDescent:(Ct=le.emHeightDescent)!==null&&Ct!==void 0?Ct:-20*Ke,fontBoundingBoxAscent:(It=le.fontBoundingBoxAscent)!==null&&It!==void 0?It:91*Ke,fontBoundingBoxDescent:(Pt=le.fontBoundingBoxDescent)!==null&&Pt!==void 0?Pt:21*Ke,hangingBaseline:($t=le.hangingBaseline)!==null&&$t!==void 0?$t:72.80000305175781*Ke,ideographicBaseline:(oe=le.ideographicBaseline)!==null&&oe!==void 0?oe:-21*Ke,width:le.width,height:Fe}}_getContextFont(){return this.fontStyle()+j+this.fontVariant()+j+(this.fontSize()+H)+k(this.fontFamily())}_addTextLine(st){this.align()===b&&(st=st.trim());const Rt=this._getTextWidth(st);return this.textArr.push({text:st,width:Rt,lastInParagraph:!1})}_getTextWidth(st){const gt=this.letterSpacing(),Rt=st.length;return $().measureText(st).width+gt*Rt}_setTextData(){let st=this.text().split(`
`),gt=+this.fontSize(),Rt=0,Nt=this.lineHeight()*gt,et=this.attrs.width,ct=this.attrs.height,At=et!==m&&et!==void 0,Ct=ct!==m&&ct!==void 0,It=this.padding(),Pt=et-It*2,$t=ct-It*2,oe=0,Kt=this.wrap(),Fe=Kt!==G,le=Kt!==x&&Fe,Ke=this.ellipsis();this.textArr=[],$().font=this._getContextFont();const gi=Ke?this._getTextWidth(Y):0;for(let He=0,oi=st.length;He<oi;++He){let en=st[He],Xn=this._getTextWidth(en);if(At&&Xn>Pt)for(;en.length>0;){let nn=0,Oi=d(en).length,Ce="",ke=0;for(;nn<Oi;){const Qn=nn+Oi>>>1,da=d(en),ji=da.slice(0,Qn+1).join(""),ga=this._getTextWidth(ji)+gi;ga<=Pt?(nn=Qn+1,Ce=ji,ke=ga):Oi=Qn}if(Ce){if(le){const ji=d(en),ga=d(Ce),zn=ji[ga.length],an=zn===j||zn===w;let Ae;if(an&&ke<=Pt)Ae=ga.length;else{const ma=ga.lastIndexOf(j),Fi=ga.lastIndexOf(w);Ae=Math.max(ma,Fi)+1}Ae>0&&(nn=Ae,Ce=ji.slice(0,nn).join(""),ke=this._getTextWidth(Ce))}if(Ce=Ce.trimRight(),this._addTextLine(Ce),Rt=Math.max(Rt,ke),oe+=Nt,this._shouldHandleEllipsis(oe)){this._tryToAddEllipsisToLastLine();break}if(en=d(en).slice(nn).join("").trimLeft(),en.length>0&&(Xn=this._getTextWidth(en),Xn<=Pt)){this._addTextLine(en),oe+=Nt,Rt=Math.max(Rt,Xn);break}}else break}else this._addTextLine(en),oe+=Nt,Rt=Math.max(Rt,Xn),this._shouldHandleEllipsis(oe)&&He<oi-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Ct&&oe+Nt>$t)break}this.textHeight=gt,this.textWidth=Rt}_shouldHandleEllipsis(st){const gt=+this.fontSize(),Rt=this.lineHeight()*gt,Nt=this.attrs.height,et=Nt!==m&&Nt!==void 0,ct=this.padding(),At=Nt-ct*2;return!(this.wrap()!==G)||et&&st+Rt>At}_tryToAddEllipsisToLastLine(){const st=this.attrs.width,gt=st!==m&&st!==void 0,Rt=this.padding(),Nt=st-Rt*2,et=this.ellipsis(),ct=this.textArr[this.textArr.length-1];!ct||!et||(gt&&(this._getTextWidth(ct.text+Y)<Nt||(ct.text=ct.text.slice(0,ct.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(ct.text+Y))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const st=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,gt=this.hasShadow();return st&&gt?!0:super._useBufferCanvas()}};return Uh.Text=it,it.prototype._fillFunc=at,it.prototype._strokeFunc=dt,it.prototype.className=P,it.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,c._registerNode)(it),t.Factory.overWriteSetter(it,"width",(0,u.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(it,"height",(0,u.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(it,"direction",v),t.Factory.addGetterSetter(it,"fontFamily","Arial"),t.Factory.addGetterSetter(it,"fontSize",12,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(it,"fontStyle",z),t.Factory.addGetterSetter(it,"fontVariant",z),t.Factory.addGetterSetter(it,"padding",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(it,"align",M),t.Factory.addGetterSetter(it,"verticalAlign",K),t.Factory.addGetterSetter(it,"lineHeight",1,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(it,"wrap",R),t.Factory.addGetterSetter(it,"ellipsis",!1,(0,u.getBooleanValidator)()),t.Factory.addGetterSetter(it,"letterSpacing",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(it,"text","",(0,u.getStringValidator)()),t.Factory.addGetterSetter(it,"textDecoration",""),Uh}var Dd={},Y_;function O5(){if(Y_)return Dd;Y_=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.TextPath=void 0;const a=Yn(),t=be(),n=Ni(),r=M1(),u=s4(),c=Re(),d=_e(),m="",_="normal";function v(U){U.fillText(this.partialText,0,0)}function b(U){U.strokeText(this.partialText,0,0)}let D=class extends n.Shape{constructor(w){super(w),this.dummyCanvas=a.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return r.Path.getPathLength(this.dataArray)}_getPointAtLength(w){if(!this.attrs.data)return null;const M=this.pathLength;return w-1>M?null:r.Path.getPointAtLengthOfDataArray(w,this.dataArray)}_readDataAttribute(){this.dataArray=r.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(w){w.setAttr("font",this._getContextFont()),w.setAttr("textBaseline",this.textBaseline()),w.setAttr("textAlign","left"),w.save();const M=this.textDecoration(),I=this.fill(),P=this.fontSize(),K=this.glyphInfo;M==="underline"&&w.beginPath();for(let C=0;C<K.length;C++){w.save();const N=K[C].p0;w.translate(N.x,N.y),w.rotate(K[C].rotation),this.partialText=K[C].text,w.fillStrokeShape(this),M==="underline"&&(C===0&&w.moveTo(0,P/2+1),w.lineTo(P,P/2+1)),w.restore()}M==="underline"&&(w.strokeStyle=I,w.lineWidth=P/20,w.stroke()),w.restore()}_hitFunc(w){w.beginPath();const M=this.glyphInfo;if(M.length>=1){const I=M[0].p0;w.moveTo(I.x,I.y)}for(let I=0;I<M.length;I++){const P=M[I].p1;w.lineTo(P.x,P.y)}w.setAttr("lineWidth",this.fontSize()),w.setAttr("strokeStyle",this.colorKey),w.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return a.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(w){return u.Text.prototype.setText.call(this,w)}_getContextFont(){return u.Text.prototype._getContextFont.call(this)}_getTextSize(w){const I=this.dummyCanvas.getContext("2d");I.save(),I.font=this._getContextFont();const P=I.measureText(w);return I.restore(),{width:P.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:w,height:M}=this._getTextSize(this.attrs.text);if(this.textWidth=w,this.textHeight=M,this.glyphInfo=[],!this.attrs.data)return null;const I=this.letterSpacing(),P=this.align(),K=this.kerningFunc(),C=Math.max(this.textWidth+((this.attrs.text||"").length-1)*I,0);let N=0;P==="center"&&(N=Math.max(0,this.pathLength/2-C/2)),P==="right"&&(N=Math.max(0,this.pathLength-C));const z=(0,u.stringToArray)(this.text());let H=N;for(let j=0;j<z.length;j++){const q=this._getPointAtLength(H);if(!q)return;let V=this._getTextSize(z[j]).width+I;if(z[j]===" "&&P==="justify"){const F=this.text().split(" ").length-1;V+=(this.pathLength-C)/F}const R=this._getPointAtLength(H+V);if(!R)return;const x=r.Path.getLineLength(q.x,q.y,R.x,R.y);let G=0;if(K)try{G=K(z[j-1],z[j])*this.fontSize()}catch{G=0}q.x+=G,R.x+=G,this.textWidth+=G;const Y=r.Path.getPointOnLine(G+x/2,q.x,q.y,R.x,R.y),T=Math.atan2(R.y-q.y,R.x-q.x);this.glyphInfo.push({transposeX:Y.x,transposeY:Y.y,text:z[j],rotation:T,p0:q,p1:R}),H+=V}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const w=[];this.glyphInfo.forEach(function(H){w.push(H.p0.x),w.push(H.p0.y),w.push(H.p1.x),w.push(H.p1.y)});let M=w[0]||0,I=w[0]||0,P=w[1]||0,K=w[1]||0,C,N;for(let H=0;H<w.length/2;H++)C=w[H*2],N=w[H*2+1],M=Math.min(M,C),I=Math.max(I,C),P=Math.min(P,N),K=Math.max(K,N);const z=this.fontSize();return{x:M-z/2,y:P-z/2,width:I-M+z,height:K-P+z}}destroy(){return a.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Dd.TextPath=D,D.prototype._fillFunc=v,D.prototype._strokeFunc=b,D.prototype._fillFuncHit=v,D.prototype._strokeFuncHit=b,D.prototype.className="TextPath",D.prototype._attrsAffectingSize=["text","fontSize","data"],(0,d._registerNode)(D),t.Factory.addGetterSetter(D,"data"),t.Factory.addGetterSetter(D,"fontFamily","Arial"),t.Factory.addGetterSetter(D,"fontSize",12,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(D,"fontStyle",_),t.Factory.addGetterSetter(D,"align","left"),t.Factory.addGetterSetter(D,"letterSpacing",0,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(D,"textBaseline","middle"),t.Factory.addGetterSetter(D,"fontVariant",_),t.Factory.addGetterSetter(D,"text",m),t.Factory.addGetterSetter(D,"textDecoration",""),t.Factory.addGetterSetter(D,"kerningFunc",void 0),Dd}var wd={},X_;function M5(){if(X_)return wd;X_=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.Transformer=void 0;const a=Yn(),t=be(),n=ei(),r=Ni(),u=a4(),c=N1(),d=_e(),m=Re(),_=_e(),v="tr-konva",b=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(V=>V+`.${v}`).join(" "),D="nodesRect",U=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],w={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},M="ontouchstart"in d.Konva._global;function I(V,R,x){if(V==="rotater")return x;R+=a.Util.degToRad(w[V]||0);const G=(a.Util.radToDeg(R)%360+360)%360;return a.Util._inRange(G,315+22.5,360)||a.Util._inRange(G,0,22.5)?"ns-resize":a.Util._inRange(G,45-22.5,45+22.5)?"nesw-resize":a.Util._inRange(G,90-22.5,90+22.5)?"ew-resize":a.Util._inRange(G,135-22.5,135+22.5)?"nwse-resize":a.Util._inRange(G,180-22.5,180+22.5)?"ns-resize":a.Util._inRange(G,225-22.5,225+22.5)?"nesw-resize":a.Util._inRange(G,270-22.5,270+22.5)?"ew-resize":a.Util._inRange(G,315-22.5,315+22.5)?"nwse-resize":(a.Util.error("Transformer has unknown angle for cursor detection: "+G),"pointer")}const P=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function K(V){return{x:V.x+V.width/2*Math.cos(V.rotation)+V.height/2*Math.sin(-V.rotation),y:V.y+V.height/2*Math.cos(V.rotation)+V.width/2*Math.sin(V.rotation)}}function C(V,R,x){const G=x.x+(V.x-x.x)*Math.cos(R)-(V.y-x.y)*Math.sin(R),Y=x.y+(V.x-x.x)*Math.sin(R)+(V.y-x.y)*Math.cos(R);return{...V,rotation:V.rotation+R,x:G,y:Y}}function N(V,R){const x=K(V);return C(V,R,x)}function z(V,R,x){let G=R;for(let Y=0;Y<V.length;Y++){const T=d.Konva.getAngle(V[Y]),F=Math.abs(T-R)%(Math.PI*2);Math.min(F,Math.PI*2-F)<x&&(G=T)}return G}let H=0,j=class extends c.Group{constructor(R){super(R),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(b,this.update),this.getNode()&&this.update()}attachTo(R){return this.setNode(R),this}setNode(R){return a.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([R])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return v+this._id}setNodes(R=[]){this._nodes&&this._nodes.length&&this.detach();const x=R.filter(Y=>Y.isAncestorOf(this)?(a.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=R=x,R.length===1&&this.useSingleNodeRotation()?this.rotation(R[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(Y=>{const T=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},F=Y._attrsAffectingSize.map(k=>k+"Change."+this._getEventNamespace()).join(" ");Y.on(F,T),Y.on(U.map(k=>k+`.${this._getEventNamespace()}`).join(" "),T),Y.on(`absoluteTransformChange.${this._getEventNamespace()}`,T),this._proxyDrag(Y)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(R){let x;R.on(`dragstart.${this._getEventNamespace()}`,G=>{x=R.getAbsolutePosition(),!this.isDragging()&&R!==this.findOne(".back")&&this.startDrag(G,!1)}),R.on(`dragmove.${this._getEventNamespace()}`,G=>{if(!x)return;const Y=R.getAbsolutePosition(),T=Y.x-x.x,F=Y.y-x.y;this.nodes().forEach(k=>{if(k===R||k.isDragging())return;const Q=k.getAbsolutePosition();k.setAbsolutePosition({x:Q.x+T,y:Q.y+F}),k.startDrag(G)}),x=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(R=>{R.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(D),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(D,this.__getNodeRect)}__getNodeShape(R,x=this.rotation(),G){const Y=R.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),T=R.getAbsoluteScale(G),F=R.getAbsolutePosition(G),k=Y.x*T.x-R.offsetX()*T.x,Q=Y.y*T.y-R.offsetY()*T.y,$=(d.Konva.getAngle(R.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),at={x:F.x+k*Math.cos($)+Q*Math.sin(-$),y:F.y+Q*Math.cos($)+k*Math.sin($),width:Y.width*T.x,height:Y.height*T.y,rotation:$};return C(at,-d.Konva.getAngle(x),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const x=[];this.nodes().map($=>{const at=$.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),dt=[{x:at.x,y:at.y},{x:at.x+at.width,y:at.y},{x:at.x+at.width,y:at.y+at.height},{x:at.x,y:at.y+at.height}],X=$.getAbsoluteTransform();dt.forEach(function(it){const Et=X.point(it);x.push(Et)})});const G=new a.Transform;G.rotate(-d.Konva.getAngle(this.rotation()));let Y=1/0,T=1/0,F=-1/0,k=-1/0;x.forEach(function($){const at=G.point($);Y===void 0&&(Y=F=at.x,T=k=at.y),Y=Math.min(Y,at.x),T=Math.min(T,at.y),F=Math.max(F,at.x),k=Math.max(k,at.y)}),G.invert();const Q=G.point({x:Y,y:T});return{x:Q.x,y:Q.y,width:F-Y,height:k-T,rotation:d.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),P.forEach(R=>{this._createAnchor(R)}),this._createAnchor("rotater")}_createAnchor(R){const x=new u.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:R+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:M?10:"auto"}),G=this;x.on("mousedown touchstart",function(Y){G._handleMouseDown(Y)}),x.on("dragstart",Y=>{x.stopDrag(),Y.cancelBubble=!0}),x.on("dragend",Y=>{Y.cancelBubble=!0}),x.on("mouseenter",()=>{const Y=d.Konva.getAngle(this.rotation()),T=this.rotateAnchorCursor(),F=I(R,Y,T);x.getStage().content&&(x.getStage().content.style.cursor=F),this._cursorChange=!0}),x.on("mouseout",()=>{x.getStage().content&&(x.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(x)}_createBack(){const R=new r.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(x,G){const Y=G.getParent(),T=Y.padding();x.beginPath(),x.rect(-T,-T,G.width()+T*2,G.height()+T*2),x.moveTo(G.width()/2,-T),Y.rotateEnabled()&&Y.rotateLineVisible()&&x.lineTo(G.width()/2,-Y.rotateAnchorOffset()*a.Util._sign(G.height())-T),x.fillStrokeShape(G)},hitFunc:(x,G)=>{if(!this.shouldOverdrawWholeArea())return;const Y=this.padding();x.beginPath(),x.rect(-Y,-Y,G.width()+Y*2,G.height()+Y*2),x.fillStrokeShape(G)}});this.add(R),this._proxyDrag(R),R.on("dragstart",x=>{x.cancelBubble=!0}),R.on("dragmove",x=>{x.cancelBubble=!0}),R.on("dragend",x=>{x.cancelBubble=!0}),this.on("dragmove",x=>{this.update()})}_handleMouseDown(R){if(this._transforming)return;this._movingAnchorName=R.target.name().split(" ")[0];const x=this._getNodeRect(),G=x.width,Y=x.height,T=Math.sqrt(Math.pow(G,2)+Math.pow(Y,2));this.sin=Math.abs(Y/T),this.cos=Math.abs(G/T),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const F=R.target.getAbsolutePosition(),k=R.target.getStage().getPointerPosition();this._anchorDragOffset={x:k.x-F.x,y:k.y-F.y},H++,this._fire("transformstart",{evt:R.evt,target:this.getNode()}),this._nodes.forEach(Q=>{Q._fire("transformstart",{evt:R.evt,target:Q})})}_handleMouseMove(R){let x,G,Y;const T=this.findOne("."+this._movingAnchorName),F=T.getStage();F.setPointersPositions(R);const k=F.getPointerPosition();let Q={x:k.x-this._anchorDragOffset.x,y:k.y-this._anchorDragOffset.y};const $=T.getAbsolutePosition();this.anchorDragBoundFunc()&&(Q=this.anchorDragBoundFunc()($,Q,R)),T.setAbsolutePosition(Q);const at=T.getAbsolutePosition();if($.x===at.x&&$.y===at.y)return;if(this._movingAnchorName==="rotater"){const At=this._getNodeRect();x=T.x()-At.width/2,G=-T.y()+At.height/2;let Ct=Math.atan2(-G,x)+Math.PI/2;At.height<0&&(Ct-=Math.PI);const Pt=d.Konva.getAngle(this.rotation())+Ct,$t=d.Konva.getAngle(this.rotationSnapTolerance()),Kt=z(this.rotationSnaps(),Pt,$t)-At.rotation,Fe=N(At,Kt);this._fitNodesInto(Fe,R);return}const dt=this.shiftBehavior();let X;dt==="inverted"?X=this.keepRatio()&&!R.shiftKey:dt==="none"?X=this.keepRatio():X=this.keepRatio()||R.shiftKey;var Rt=this.centeredScaling()||R.altKey;if(this._movingAnchorName==="top-left"){if(X){var it=Rt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};Y=Math.sqrt(Math.pow(it.x-T.x(),2)+Math.pow(it.y-T.y(),2));var Et=this.findOne(".top-left").x()>it.x?-1:1,st=this.findOne(".top-left").y()>it.y?-1:1;x=Y*this.cos*Et,G=Y*this.sin*st,this.findOne(".top-left").x(it.x-x),this.findOne(".top-left").y(it.y-G)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(T.y());else if(this._movingAnchorName==="top-right"){if(X){var it=Rt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};Y=Math.sqrt(Math.pow(T.x()-it.x,2)+Math.pow(it.y-T.y(),2));var Et=this.findOne(".top-right").x()<it.x?-1:1,st=this.findOne(".top-right").y()>it.y?-1:1;x=Y*this.cos*Et,G=Y*this.sin*st,this.findOne(".top-right").x(it.x+x),this.findOne(".top-right").y(it.y-G)}var gt=T.position();this.findOne(".top-left").y(gt.y),this.findOne(".bottom-right").x(gt.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(T.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(T.x());else if(this._movingAnchorName==="bottom-left"){if(X){var it=Rt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};Y=Math.sqrt(Math.pow(it.x-T.x(),2)+Math.pow(T.y()-it.y,2));var Et=it.x<T.x()?-1:1,st=T.y()<it.y?-1:1;x=Y*this.cos*Et,G=Y*this.sin*st,T.x(it.x-x),T.y(it.y+G)}gt=T.position(),this.findOne(".top-left").x(gt.x),this.findOne(".bottom-right").y(gt.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(T.y());else if(this._movingAnchorName==="bottom-right"){if(X){var it=Rt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};Y=Math.sqrt(Math.pow(T.x()-it.x,2)+Math.pow(T.y()-it.y,2));var Et=this.findOne(".bottom-right").x()<it.x?-1:1,st=this.findOne(".bottom-right").y()<it.y?-1:1;x=Y*this.cos*Et,G=Y*this.sin*st,this.findOne(".bottom-right").x(it.x+x),this.findOne(".bottom-right").y(it.y+G)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var Rt=this.centeredScaling()||R.altKey;if(Rt){const At=this.findOne(".top-left"),Ct=this.findOne(".bottom-right"),It=At.x(),Pt=At.y(),$t=this.getWidth()-Ct.x(),oe=this.getHeight()-Ct.y();Ct.move({x:-It,y:-Pt}),At.move({x:$t,y:oe})}const Nt=this.findOne(".top-left").getAbsolutePosition();x=Nt.x,G=Nt.y;const et=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),ct=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x,y:G,width:et,height:ct,rotation:d.Konva.getAngle(this.rotation())},R)}_handleMouseUp(R){this._removeEvents(R)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(R){var x;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const G=this.getNode();H--,this._fire("transformend",{evt:R,target:G}),(x=this.getLayer())===null||x===void 0||x.batchDraw(),G&&this._nodes.forEach(Y=>{var T;Y._fire("transformend",{evt:R,target:Y}),(T=Y.getLayer())===null||T===void 0||T.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(R,x){const G=this._getNodeRect(),Y=1;if(a.Util._inRange(R.width,-this.padding()*2-Y,Y)){this.update();return}if(a.Util._inRange(R.height,-this.padding()*2-Y,Y)){this.update();return}const T=new a.Transform;if(T.rotate(d.Konva.getAngle(this.rotation())),this._movingAnchorName&&R.width<0&&this._movingAnchorName.indexOf("left")>=0){const X=T.point({x:-this.padding()*2,y:0});R.x+=X.x,R.y+=X.y,R.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y}else if(this._movingAnchorName&&R.width<0&&this._movingAnchorName.indexOf("right")>=0){const X=T.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y,R.width+=this.padding()*2}if(this._movingAnchorName&&R.height<0&&this._movingAnchorName.indexOf("top")>=0){const X=T.point({x:0,y:-this.padding()*2});R.x+=X.x,R.y+=X.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y,R.height+=this.padding()*2}else if(this._movingAnchorName&&R.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const X=T.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=X.x,this._anchorDragOffset.y-=X.y,R.height+=this.padding()*2}if(this.boundBoxFunc()){const X=this.boundBoxFunc()(G,R);X?R=X:a.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const F=1e7,k=new a.Transform;k.translate(G.x,G.y),k.rotate(G.rotation),k.scale(G.width/F,G.height/F);const Q=new a.Transform,$=R.width/F,at=R.height/F;this.flipEnabled()===!1?(Q.translate(R.x,R.y),Q.rotate(R.rotation),Q.translate(R.width<0?R.width:0,R.height<0?R.height:0),Q.scale(Math.abs($),Math.abs(at))):(Q.translate(R.x,R.y),Q.rotate(R.rotation),Q.scale($,at));const dt=Q.multiply(k.invert());this._nodes.forEach(X=>{var it;const Et=X.getParent().getAbsoluteTransform(),st=X.getTransform().copy();st.translate(X.offsetX(),X.offsetY());const gt=new a.Transform;gt.multiply(Et.copy().invert()).multiply(dt).multiply(Et).multiply(st);const Rt=gt.decompose();X.setAttrs(Rt),(it=X.getLayer())===null||it===void 0||it.batchDraw()}),this.rotation(a.Util._getRotation(R.rotation)),this._nodes.forEach(X=>{this._fire("transform",{evt:x,target:X}),X._fire("transform",{evt:x,target:X})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(R,x){this.findOne(R).setAttrs(x)}update(){var R;const x=this._getNodeRect();this.rotation(a.Util._getRotation(x.rotation));const G=x.width,Y=x.height,T=this.enabledAnchors(),F=this.resizeEnabled(),k=this.padding(),Q=this.anchorSize(),$=this.find("._anchor");$.forEach(dt=>{dt.setAttrs({width:Q,height:Q,offsetX:Q/2,offsetY:Q/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:Q/2+k,offsetY:Q/2+k,visible:F&&T.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:G/2,y:0,offsetY:Q/2+k,visible:F&&T.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:G,y:0,offsetX:Q/2-k,offsetY:Q/2+k,visible:F&&T.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:Y/2,offsetX:Q/2+k,visible:F&&T.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:G,y:Y/2,offsetX:Q/2-k,visible:F&&T.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:Y,offsetX:Q/2+k,offsetY:Q/2-k,visible:F&&T.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:G/2,y:Y,offsetY:Q/2-k,visible:F&&T.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:G,y:Y,offsetX:Q/2-k,offsetY:Q/2-k,visible:F&&T.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:G/2,y:-this.rotateAnchorOffset()*a.Util._sign(Y)-k,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:G,height:Y,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const at=this.anchorStyleFunc();at&&$.forEach(dt=>{at(dt)}),(R=this.getLayer())===null||R===void 0||R.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const R=this.findOne("."+this._movingAnchorName);R&&R.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),c.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(R){return n.Node.prototype.clone.call(this,R)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};wd.Transformer=j,j.isTransforming=()=>H>0;function q(V){return V instanceof Array||a.Util.warn("enabledAnchors value should be an array"),V instanceof Array&&V.forEach(function(R){P.indexOf(R)===-1&&a.Util.warn("Unknown anchor name: "+R+". Available names are: "+P.join(", "))}),V||[]}return j.prototype.className="Transformer",(0,_._registerNode)(j),t.Factory.addGetterSetter(j,"enabledAnchors",P,q),t.Factory.addGetterSetter(j,"flipEnabled",!0,(0,m.getBooleanValidator)()),t.Factory.addGetterSetter(j,"resizeEnabled",!0),t.Factory.addGetterSetter(j,"anchorSize",10,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(j,"rotateEnabled",!0),t.Factory.addGetterSetter(j,"rotateLineVisible",!0),t.Factory.addGetterSetter(j,"rotationSnaps",[]),t.Factory.addGetterSetter(j,"rotateAnchorOffset",50,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(j,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(j,"rotationSnapTolerance",5,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(j,"borderEnabled",!0),t.Factory.addGetterSetter(j,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(j,"anchorStrokeWidth",1,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(j,"anchorFill","white"),t.Factory.addGetterSetter(j,"anchorCornerRadius",0,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(j,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(j,"borderStrokeWidth",1,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(j,"borderDash"),t.Factory.addGetterSetter(j,"keepRatio",!0),t.Factory.addGetterSetter(j,"shiftBehavior","default"),t.Factory.addGetterSetter(j,"centeredScaling",!1),t.Factory.addGetterSetter(j,"ignoreStroke",!1),t.Factory.addGetterSetter(j,"padding",0,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(j,"nodes"),t.Factory.addGetterSetter(j,"node"),t.Factory.addGetterSetter(j,"boundBoxFunc"),t.Factory.addGetterSetter(j,"anchorDragBoundFunc"),t.Factory.addGetterSetter(j,"anchorStyleFunc"),t.Factory.addGetterSetter(j,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(j,"useSingleNodeRotation",!0),t.Factory.backCompat(j,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),wd}var Nd={},Q_;function x5(){if(Q_)return Nd;Q_=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.Wedge=void 0;const a=be(),t=Ni(),n=_e(),r=Re(),u=_e();let c=class extends t.Shape{_sceneFunc(m){m.beginPath(),m.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),m.lineTo(0,0),m.closePath(),m.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(m){this.radius(m/2)}setHeight(m){this.radius(m/2)}};return Nd.Wedge=c,c.prototype.className="Wedge",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["radius"],(0,u._registerNode)(c),a.Factory.addGetterSetter(c,"radius",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"angle",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"clockwise",!1),a.Factory.backCompat(c,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Nd}var Od={},Z_;function V5(){if(Z_)return Od;Z_=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.Blur=void 0;const a=be(),t=ei(),n=Re();function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const u=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],c=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function d(_,v){const b=_.data,D=_.width,U=_.height;let w,M,I,P,K,C,N,z,H,j,q,V,R,x,G,Y,T,F,k,Q,$,at,dt,X;const it=v+v+1,Et=D-1,st=U-1,gt=v+1,Rt=gt*(gt+1)/2,Nt=new r,et=u[v],ct=c[v];let At=null,Ct=Nt,It=null,Pt=null;for(I=1;I<it;I++)Ct=Ct.next=new r,I===gt&&(At=Ct);for(Ct.next=Nt,N=C=0,M=0;M<U;M++){for(Y=T=F=k=z=H=j=q=0,V=gt*(Q=b[C]),R=gt*($=b[C+1]),x=gt*(at=b[C+2]),G=gt*(dt=b[C+3]),z+=Rt*Q,H+=Rt*$,j+=Rt*at,q+=Rt*dt,Ct=Nt,I=0;I<gt;I++)Ct.r=Q,Ct.g=$,Ct.b=at,Ct.a=dt,Ct=Ct.next;for(I=1;I<gt;I++)P=C+((Et<I?Et:I)<<2),z+=(Ct.r=Q=b[P])*(X=gt-I),H+=(Ct.g=$=b[P+1])*X,j+=(Ct.b=at=b[P+2])*X,q+=(Ct.a=dt=b[P+3])*X,Y+=Q,T+=$,F+=at,k+=dt,Ct=Ct.next;for(It=Nt,Pt=At,w=0;w<D;w++)b[C+3]=dt=q*et>>ct,dt!==0?(dt=255/dt,b[C]=(z*et>>ct)*dt,b[C+1]=(H*et>>ct)*dt,b[C+2]=(j*et>>ct)*dt):b[C]=b[C+1]=b[C+2]=0,z-=V,H-=R,j-=x,q-=G,V-=It.r,R-=It.g,x-=It.b,G-=It.a,P=N+((P=w+v+1)<Et?P:Et)<<2,Y+=It.r=b[P],T+=It.g=b[P+1],F+=It.b=b[P+2],k+=It.a=b[P+3],z+=Y,H+=T,j+=F,q+=k,It=It.next,V+=Q=Pt.r,R+=$=Pt.g,x+=at=Pt.b,G+=dt=Pt.a,Y-=Q,T-=$,F-=at,k-=dt,Pt=Pt.next,C+=4;N+=D}for(w=0;w<D;w++){for(T=F=k=Y=H=j=q=z=0,C=w<<2,V=gt*(Q=b[C]),R=gt*($=b[C+1]),x=gt*(at=b[C+2]),G=gt*(dt=b[C+3]),z+=Rt*Q,H+=Rt*$,j+=Rt*at,q+=Rt*dt,Ct=Nt,I=0;I<gt;I++)Ct.r=Q,Ct.g=$,Ct.b=at,Ct.a=dt,Ct=Ct.next;for(K=D,I=1;I<=v;I++)C=K+w<<2,z+=(Ct.r=Q=b[C])*(X=gt-I),H+=(Ct.g=$=b[C+1])*X,j+=(Ct.b=at=b[C+2])*X,q+=(Ct.a=dt=b[C+3])*X,Y+=Q,T+=$,F+=at,k+=dt,Ct=Ct.next,I<st&&(K+=D);for(C=w,It=Nt,Pt=At,M=0;M<U;M++)P=C<<2,b[P+3]=dt=q*et>>ct,dt>0?(dt=255/dt,b[P]=(z*et>>ct)*dt,b[P+1]=(H*et>>ct)*dt,b[P+2]=(j*et>>ct)*dt):b[P]=b[P+1]=b[P+2]=0,z-=V,H-=R,j-=x,q-=G,V-=It.r,R-=It.g,x-=It.b,G-=It.a,P=w+((P=M+gt)<st?P:st)*D<<2,z+=Y+=It.r=b[P],H+=T+=It.g=b[P+1],j+=F+=It.b=b[P+2],q+=k+=It.a=b[P+3],It=It.next,V+=Q=Pt.r,R+=$=Pt.g,x+=at=Pt.b,G+=dt=Pt.a,Y-=Q,T-=$,F-=at,k-=dt,Pt=Pt.next,C+=D}}const m=function(v){const b=Math.round(this.blurRadius());b>0&&d(v,b)};return Od.Blur=m,a.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Od}var Md={},W_;function U5(){if(W_)return Md;W_=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.Brighten=void 0;const a=be(),t=ei(),n=Re(),r=function(u){const c=this.brightness()*255,d=u.data,m=d.length;for(let _=0;_<m;_+=4)d[_]+=c,d[_+1]+=c,d[_+2]+=c};return Md.Brighten=r,a.Factory.addGetterSetter(t.Node,"brightness",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Md}var xd={},J_;function I5(){if(J_)return xd;J_=1,Object.defineProperty(xd,"__esModule",{value:!0}),xd.Contrast=void 0;const a=be(),t=ei(),n=Re(),r=function(u){const c=Math.pow((this.contrast()+100)/100,2),d=u.data,m=d.length;let _=150,v=150,b=150;for(let D=0;D<m;D+=4)_=d[D],v=d[D+1],b=d[D+2],_/=255,_-=.5,_*=c,_+=.5,_*=255,v/=255,v-=.5,v*=c,v+=.5,v*=255,b/=255,b-=.5,b*=c,b+=.5,b*=255,_=_<0?0:_>255?255:_,v=v<0?0:v>255?255:v,b=b<0?0:b>255?255:b,d[D]=_,d[D+1]=v,d[D+2]=b};return xd.Contrast=r,a.Factory.addGetterSetter(t.Node,"contrast",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),xd}var Vd={},$_;function L5(){if($_)return Vd;$_=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.Emboss=void 0;const a=be(),t=ei(),n=Yn(),r=Re(),u=function(c){const d=this.embossStrength()*10,m=this.embossWhiteLevel()*255,_=this.embossDirection(),v=this.embossBlend(),b=c.data,D=c.width,U=c.height,w=D*4;let M=0,I=0,P=U;switch(_){case"top-left":M=-1,I=-1;break;case"top":M=-1,I=0;break;case"top-right":M=-1,I=1;break;case"right":M=0,I=1;break;case"bottom-right":M=1,I=1;break;case"bottom":M=1,I=0;break;case"bottom-left":M=1,I=-1;break;case"left":M=0,I=-1;break;default:n.Util.error("Unknown emboss direction: "+_)}do{const K=(P-1)*w;let C=M;P+C<1&&(C=0),P+C>U&&(C=0);const N=(P-1+C)*D*4;let z=D;do{const H=K+(z-1)*4;let j=I;z+j<1&&(j=0),z+j>D&&(j=0);const q=N+(z-1+j)*4,V=b[H]-b[q],R=b[H+1]-b[q+1],x=b[H+2]-b[q+2];let G=V;const Y=G>0?G:-G,T=R>0?R:-R,F=x>0?x:-x;if(T>Y&&(G=R),F>Y&&(G=x),G*=d,v){const k=b[H]+G,Q=b[H+1]+G,$=b[H+2]+G;b[H]=k>255?255:k<0?0:k,b[H+1]=Q>255?255:Q<0?0:Q,b[H+2]=$>255?255:$<0?0:$}else{let k=m-G;k<0?k=0:k>255&&(k=255),b[H]=b[H+1]=b[H+2]=k}}while(--z)}while(--P)};return Vd.Emboss=u,a.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,r.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,r.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,a.Factory.afterSetFilter),Vd}var Ud={},t2;function z5(){if(t2)return Ud;t2=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.Enhance=void 0;const a=be(),t=ei(),n=Re();function r(c,d,m,_,v){const b=m-d,D=v-_;if(b===0)return _+D/2;if(D===0)return _;let U=(c-d)/b;return U=D*U+_,U}const u=function(c){const d=c.data,m=d.length;let _=d[0],v=_,b,D=d[1],U=D,w,M=d[2],I=M,P;const K=this.enhance();if(K===0)return;for(let G=0;G<m;G+=4)b=d[G+0],b<_?_=b:b>v&&(v=b),w=d[G+1],w<D?D=w:w>U&&(U=w),P=d[G+2],P<M?M=P:P>I&&(I=P);v===_&&(v=255,_=0),U===D&&(U=255,D=0),I===M&&(I=255,M=0);let C,N,z,H,j,q,V,R,x;K>0?(N=v+K*(255-v),z=_-K*(_-0),j=U+K*(255-U),q=D-K*(D-0),R=I+K*(255-I),x=M-K*(M-0)):(C=(v+_)*.5,N=v+K*(v-C),z=_+K*(_-C),H=(U+D)*.5,j=U+K*(U-H),q=D+K*(D-H),V=(I+M)*.5,R=I+K*(I-V),x=M+K*(M-V));for(let G=0;G<m;G+=4)d[G+0]=r(d[G+0],_,v,z,N),d[G+1]=r(d[G+1],D,U,q,j),d[G+2]=r(d[G+2],M,I,x,R)};return Ud.Enhance=u,a.Factory.addGetterSetter(t.Node,"enhance",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Ud}var Id={},e2;function P5(){if(e2)return Id;e2=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.Grayscale=void 0;const a=function(t){const n=t.data,r=n.length;for(let u=0;u<r;u+=4){const c=.34*n[u]+.5*n[u+1]+.16*n[u+2];n[u]=c,n[u+1]=c,n[u+2]=c}};return Id.Grayscale=a,Id}var Ld={},n2;function B5(){if(n2)return Ld;n2=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.HSL=void 0;const a=be(),t=ei(),n=Re();a.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"luminance",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter);const r=function(u){const c=u.data,d=c.length,m=1,_=Math.pow(2,this.saturation()),v=Math.abs(this.hue()+360)%360,b=this.luminance()*127,D=m*_*Math.cos(v*Math.PI/180),U=m*_*Math.sin(v*Math.PI/180),w=.299*m+.701*D+.167*U,M=.587*m-.587*D+.33*U,I=.114*m-.114*D-.497*U,P=.299*m-.299*D-.328*U,K=.587*m+.413*D+.035*U,C=.114*m-.114*D+.293*U,N=.299*m-.3*D+1.25*U,z=.587*m-.586*D-1.05*U,H=.114*m+.886*D-.2*U;let j,q,V,R;for(let x=0;x<d;x+=4)j=c[x+0],q=c[x+1],V=c[x+2],R=c[x+3],c[x+0]=w*j+M*q+I*V+b,c[x+1]=P*j+K*q+C*V+b,c[x+2]=N*j+z*q+H*V+b,c[x+3]=R};return Ld.HSL=r,Ld}var zd={},i2;function G5(){if(i2)return zd;i2=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.HSV=void 0;const a=be(),t=ei(),n=Re(),r=function(u){const c=u.data,d=c.length,m=Math.pow(2,this.value()),_=Math.pow(2,this.saturation()),v=Math.abs(this.hue()+360)%360,b=m*_*Math.cos(v*Math.PI/180),D=m*_*Math.sin(v*Math.PI/180),U=.299*m+.701*b+.167*D,w=.587*m-.587*b+.33*D,M=.114*m-.114*b-.497*D,I=.299*m-.299*b-.328*D,P=.587*m+.413*b+.035*D,K=.114*m-.114*b+.293*D,C=.299*m-.3*b+1.25*D,N=.587*m-.586*b-1.05*D,z=.114*m+.886*b-.2*D;let H,j,q,V;for(let R=0;R<d;R+=4)H=c[R+0],j=c[R+1],q=c[R+2],V=c[R+3],c[R+0]=U*H+w*j+M*q,c[R+1]=I*H+P*j+K*q,c[R+2]=C*H+N*j+z*q,c[R+3]=V};return zd.HSV=r,a.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"value",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),zd}var Pd={},a2;function H5(){if(a2)return Pd;a2=1,Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.Invert=void 0;const a=function(t){const n=t.data,r=n.length;for(let u=0;u<r;u+=4)n[u]=255-n[u],n[u+1]=255-n[u+1],n[u+2]=255-n[u+2]};return Pd.Invert=a,Pd}var Bd={},s2;function k5(){if(s2)return Bd;s2=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.Kaleidoscope=void 0;const a=be(),t=ei(),n=Yn(),r=Re(),u=function(m,_,v){const b=m.data,D=_.data,U=m.width,w=m.height,M=v.polarCenterX||U/2,I=v.polarCenterY||w/2;let P=Math.sqrt(M*M+I*I),K=U-M,C=w-I;const N=Math.sqrt(K*K+C*C);P=N>P?N:P;const z=w,H=U,j=360/H*Math.PI/180;for(let q=0;q<H;q+=1){const V=Math.sin(q*j),R=Math.cos(q*j);for(let x=0;x<z;x+=1){K=Math.floor(M+P*x/z*R),C=Math.floor(I+P*x/z*V);let G=(C*U+K)*4;const Y=b[G+0],T=b[G+1],F=b[G+2],k=b[G+3];G=(q+x*U)*4,D[G+0]=Y,D[G+1]=T,D[G+2]=F,D[G+3]=k}}},c=function(m,_,v){const b=m.data,D=_.data,U=m.width,w=m.height,M=v.polarCenterX||U/2,I=v.polarCenterY||w/2;let P=Math.sqrt(M*M+I*I),K=U-M,C=w-I;const N=Math.sqrt(K*K+C*C);P=N>P?N:P;const z=w,H=U,j=0;let q,V;for(K=0;K<U;K+=1)for(C=0;C<w;C+=1){const R=K-M,x=C-I,G=Math.sqrt(R*R+x*x)*z/P;let Y=(Math.atan2(x,R)*180/Math.PI+360+j)%360;Y=Y*H/360,q=Math.floor(Y),V=Math.floor(G);let T=(V*U+q)*4;const F=b[T+0],k=b[T+1],Q=b[T+2],$=b[T+3];T=(C*U+K)*4,D[T+0]=F,D[T+1]=k,D[T+2]=Q,D[T+3]=$}},d=function(m){const _=m.width,v=m.height;let b,D,U,w,M,I,P,K,C,N,z=Math.round(this.kaleidoscopePower());const H=Math.round(this.kaleidoscopeAngle()),j=Math.floor(_*(H%360)/360);if(z<1)return;const q=n.Util.createCanvasElement();q.width=_,q.height=v;const V=q.getContext("2d").getImageData(0,0,_,v);n.Util.releaseCanvas(q),u(m,V,{polarCenterX:_/2,polarCenterY:v/2});let R=_/Math.pow(2,z);for(;R<=8;)R=R*2,z-=1;R=Math.ceil(R);let x=R,G=0,Y=x,T=1;for(j+R>_&&(G=x,Y=0,T=-1),D=0;D<v;D+=1)for(b=G;b!==Y;b+=T)U=Math.round(b+j)%_,C=(_*D+U)*4,M=V.data[C+0],I=V.data[C+1],P=V.data[C+2],K=V.data[C+3],N=(_*D+b)*4,V.data[N+0]=M,V.data[N+1]=I,V.data[N+2]=P,V.data[N+3]=K;for(D=0;D<v;D+=1)for(x=Math.floor(R),w=0;w<z;w+=1){for(b=0;b<x+1;b+=1)C=(_*D+b)*4,M=V.data[C+0],I=V.data[C+1],P=V.data[C+2],K=V.data[C+3],N=(_*D+x*2-b-1)*4,V.data[N+0]=M,V.data[N+1]=I,V.data[N+2]=P,V.data[N+3]=K;x*=2}c(V,m,{polarRotation:0})};return Bd.Kaleidoscope=d,a.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,r.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,r.getNumberValidator)(),a.Factory.afterSetFilter),Bd}var Gd={},r2;function q5(){if(r2)return Gd;r2=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.Mask=void 0;const a=be(),t=ei(),n=Re();function r(U,w,M){let I=(M*U.width+w)*4;const P=[];return P.push(U.data[I++],U.data[I++],U.data[I++],U.data[I++]),P}function u(U,w){return Math.sqrt(Math.pow(U[0]-w[0],2)+Math.pow(U[1]-w[1],2)+Math.pow(U[2]-w[2],2))}function c(U){const w=[0,0,0];for(let M=0;M<U.length;M++)w[0]+=U[M][0],w[1]+=U[M][1],w[2]+=U[M][2];return w[0]/=U.length,w[1]/=U.length,w[2]/=U.length,w}function d(U,w){const M=r(U,0,0),I=r(U,U.width-1,0),P=r(U,0,U.height-1),K=r(U,U.width-1,U.height-1),C=w||10;if(u(M,I)<C&&u(I,K)<C&&u(K,P)<C&&u(P,M)<C){const N=c([I,M,K,P]),z=[];for(let H=0;H<U.width*U.height;H++){const j=u(N,[U.data[H*4],U.data[H*4+1],U.data[H*4+2]]);z[H]=j<C?0:255}return z}}function m(U,w){for(let M=0;M<U.width*U.height;M++)U.data[4*M+3]=w[M]}function _(U,w,M){const I=[1,1,1,1,0,1,1,1,1],P=Math.round(Math.sqrt(I.length)),K=Math.floor(P/2),C=[];for(let N=0;N<M;N++)for(let z=0;z<w;z++){const H=N*w+z;let j=0;for(let q=0;q<P;q++)for(let V=0;V<P;V++){const R=N+q-K,x=z+V-K;if(R>=0&&R<M&&x>=0&&x<w){const G=R*w+x,Y=I[q*P+V];j+=U[G]*Y}}C[H]=j===255*8?255:0}return C}function v(U,w,M){const I=[1,1,1,1,1,1,1,1,1],P=Math.round(Math.sqrt(I.length)),K=Math.floor(P/2),C=[];for(let N=0;N<M;N++)for(let z=0;z<w;z++){const H=N*w+z;let j=0;for(let q=0;q<P;q++)for(let V=0;V<P;V++){const R=N+q-K,x=z+V-K;if(R>=0&&R<M&&x>=0&&x<w){const G=R*w+x,Y=I[q*P+V];j+=U[G]*Y}}C[H]=j>=255*4?255:0}return C}function b(U,w,M){const I=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],P=Math.round(Math.sqrt(I.length)),K=Math.floor(P/2),C=[];for(let N=0;N<M;N++)for(let z=0;z<w;z++){const H=N*w+z;let j=0;for(let q=0;q<P;q++)for(let V=0;V<P;V++){const R=N+q-K,x=z+V-K;if(R>=0&&R<M&&x>=0&&x<w){const G=R*w+x,Y=I[q*P+V];j+=U[G]*Y}}C[H]=j}return C}const D=function(U){const w=this.threshold();let M=d(U,w);return M&&(M=_(M,U.width,U.height),M=v(M,U.width,U.height),M=b(M,U.width,U.height),m(U,M)),U};return Gd.Mask=D,a.Factory.addGetterSetter(t.Node,"threshold",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Gd}var Hd={},l2;function j5(){if(l2)return Hd;l2=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.Noise=void 0;const a=be(),t=ei(),n=Re(),r=function(u){const c=this.noise()*255,d=u.data,m=d.length,_=c/2;for(let v=0;v<m;v+=4)d[v+0]+=_-2*_*Math.random(),d[v+1]+=_-2*_*Math.random(),d[v+2]+=_-2*_*Math.random()};return Hd.Noise=r,a.Factory.addGetterSetter(t.Node,"noise",.2,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Hd}var kd={},o2;function F5(){if(o2)return kd;o2=1,Object.defineProperty(kd,"__esModule",{value:!0}),kd.Pixelate=void 0;const a=be(),t=Yn(),n=ei(),r=Re(),u=function(c){let d=Math.ceil(this.pixelSize()),m=c.width,_=c.height,v,b,D,U,w,M,I,P=Math.ceil(m/d),K=Math.ceil(_/d),C,N,z,H,j,q,V,R=c.data;if(d<=0){t.Util.error("pixelSize value can not be <= 0");return}for(j=0;j<P;j+=1)for(q=0;q<K;q+=1){for(U=0,w=0,M=0,I=0,C=j*d,N=C+d,z=q*d,H=z+d,V=0,v=C;v<N;v+=1)if(!(v>=m))for(b=z;b<H;b+=1)b>=_||(D=(m*b+v)*4,U+=R[D+0],w+=R[D+1],M+=R[D+2],I+=R[D+3],V+=1);for(U=U/V,w=w/V,M=M/V,I=I/V,v=C;v<N;v+=1)if(!(v>=m))for(b=z;b<H;b+=1)b>=_||(D=(m*b+v)*4,R[D+0]=U,R[D+1]=w,R[D+2]=M,R[D+3]=I)}};return kd.Pixelate=u,a.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,r.getNumberValidator)(),a.Factory.afterSetFilter),kd}var qd={},u2;function K5(){if(u2)return qd;u2=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.Posterize=void 0;const a=be(),t=ei(),n=Re(),r=function(u){const c=Math.round(this.levels()*254)+1,d=u.data,m=d.length,_=255/c;for(let v=0;v<m;v+=1)d[v]=Math.floor(d[v]/_)*_};return qd.Posterize=r,a.Factory.addGetterSetter(t.Node,"levels",.5,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),qd}var jd={},c2;function Y5(){if(c2)return jd;c2=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.RGB=void 0;const a=be(),t=ei(),n=Re(),r=function(u){const c=u.data,d=c.length,m=this.red(),_=this.green(),v=this.blue();for(let b=0;b<d;b+=4){const D=(.34*c[b]+.5*c[b+1]+.16*c[b+2])/255;c[b]=D*m,c[b+1]=D*_,c[b+2]=D*v,c[b+3]=c[b+3]}};return jd.RGB=r,a.Factory.addGetterSetter(t.Node,"red",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)}),a.Factory.addGetterSetter(t.Node,"green",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)}),a.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,a.Factory.afterSetFilter),jd}var Fd={},h2;function X5(){if(h2)return Fd;h2=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.RGBA=void 0;const a=be(),t=ei(),n=Re(),r=function(u){const c=u.data,d=c.length,m=this.red(),_=this.green(),v=this.blue(),b=this.alpha();for(let D=0;D<d;D+=4){const U=1-b;c[D]=m*b+c[D]*U,c[D+1]=_*b+c[D+1]*U,c[D+2]=v*b+c[D+2]*U}};return Fd.RGBA=r,a.Factory.addGetterSetter(t.Node,"red",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)}),a.Factory.addGetterSetter(t.Node,"green",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)}),a.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"alpha",1,function(u){return this._filterUpToDate=!1,u>1?1:u<0?0:u}),Fd}var Kd={},f2;function Q5(){if(f2)return Kd;f2=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.Sepia=void 0;const a=function(t){const n=t.data,r=n.length;for(let u=0;u<r;u+=4){const c=n[u+0],d=n[u+1],m=n[u+2];n[u+0]=Math.min(255,c*.393+d*.769+m*.189),n[u+1]=Math.min(255,c*.349+d*.686+m*.168),n[u+2]=Math.min(255,c*.272+d*.534+m*.131)}};return Kd.Sepia=a,Kd}var Yd={},d2;function Z5(){if(d2)return Yd;d2=1,Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.Solarize=void 0;const a=function(t){const n=t.data,r=t.width,u=t.height,c=r*4;let d=u;do{const m=(d-1)*c;let _=r;do{const v=m+(_-1)*4;let b=n[v],D=n[v+1],U=n[v+2];b>127&&(b=255-b),D>127&&(D=255-D),U>127&&(U=255-U),n[v]=b,n[v+1]=D,n[v+2]=U}while(--_)}while(--d)};return Yd.Solarize=a,Yd}var Xd={},g2;function W5(){if(g2)return Xd;g2=1,Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.Threshold=void 0;const a=be(),t=ei(),n=Re(),r=function(u){const c=this.threshold()*255,d=u.data,m=d.length;for(let _=0;_<m;_+=1)d[_]=d[_]<c?0:255};return Xd.Threshold=r,a.Factory.addGetterSetter(t.Node,"threshold",.5,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Xd}var m2;function J5(){if(m2)return od;m2=1,Object.defineProperty(od,"__esModule",{value:!0}),od.Konva=void 0;const a=n1(),t=v5(),n=S5(),r=T5(),u=b5(),c=A5(),d=R5(),m=i4(),_=M1(),v=a4(),b=C5(),D=D5(),U=w5(),w=N5(),M=s4(),I=O5(),P=M5(),K=x5(),C=V5(),N=U5(),z=I5(),H=L5(),j=z5(),q=P5(),V=B5(),R=G5(),x=H5(),G=k5(),Y=q5(),T=j5(),F=F5(),k=K5(),Q=Y5(),$=X5(),at=Q5(),dt=Z5(),X=W5();return od.Konva=a.Konva.Util._assign(a.Konva,{Arc:t.Arc,Arrow:n.Arrow,Circle:r.Circle,Ellipse:u.Ellipse,Image:c.Image,Label:d.Label,Tag:d.Tag,Line:m.Line,Path:_.Path,Rect:v.Rect,RegularPolygon:b.RegularPolygon,Ring:D.Ring,Sprite:U.Sprite,Star:w.Star,Text:M.Text,TextPath:I.TextPath,Transformer:P.Transformer,Wedge:K.Wedge,Filters:{Blur:C.Blur,Brighten:N.Brighten,Contrast:z.Contrast,Emboss:H.Emboss,Enhance:j.Enhance,Grayscale:q.Grayscale,HSL:V.HSL,HSV:R.HSV,Invert:x.Invert,Kaleidoscope:G.Kaleidoscope,Mask:Y.Mask,Noise:T.Noise,Pixelate:F.Pixelate,Posterize:k.Posterize,RGB:Q.RGB,RGBA:$.RGBA,Sepia:at.Sepia,Solarize:dt.Solarize,Threshold:X.Threshold}}),od}var $5=Ym.exports,p2;function tS(){if(p2)return Ym.exports;p2=1,Object.defineProperty($5,"__esModule",{value:!0});const a=J5();return Ym.exports=a.Konva,Ym.exports}tS();var Bm={exports:{}},y2;function eS(){return y2||(y2=1,function(a,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var n=n1();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=n1();a.exports=r.Konva}(Bm,Bm.exports)),Bm.exports}var nS=eS();const a0=C1(nS);var Gp={exports:{}},Hp={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _2;function iS(){return _2||(_2=1,function(a){a.exports=function(t){function n(s,l,f,y){return new Vg(s,l,f,y)}function r(){}function u(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(s){return s===null||typeof s!="object"?null:(s=qe&&s[qe]||s["@@iterator"],typeof s=="function"?s:null)}function d(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Hn?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case rl:return"Fragment";case Vs:return"Portal";case ll:return"Profiler";case to:return"StrictMode";case pr:return"Suspense";case pc:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case ol:return(s.displayName||"Context")+".Provider";case Ef:return(s._context.displayName||"Context")+".Consumer";case lh:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Zo:return l=s.displayName||null,l!==null?l:d(s.type)||"Memo";case yr:l=s._payload,s=s._init;try{return d(s(l))}catch{}}return null}function m(s){if(ul===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);ul=l&&l[1]||"",cl=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ul+s+cl}function _(s,l){if(!s||Wo)return"";Wo=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(l){var zt=function(){throw Error()};if(Object.defineProperty(zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(zt,[])}catch(ie){var xt=ie}Reflect.construct(s,[],zt)}else{try{zt.call()}catch(ie){xt=ie}s.call(zt.prototype)}}else{try{throw Error()}catch(ie){xt=ie}(zt=s())&&typeof zt.catch=="function"&&zt.catch(function(){})}}catch(ie){if(ie&&xt&&typeof ie.stack=="string")return[ie.stack,xt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=y.DetermineComponentFrameRoot(),W=O[0],nt=O[1];if(W&&nt){var ft=W.split(`
`),Tt=nt.split(`
`);for(S=y=0;y<ft.length&&!ft[y].includes("DetermineComponentFrameRoot");)y++;for(;S<Tt.length&&!Tt[S].includes("DetermineComponentFrameRoot");)S++;if(y===ft.length||S===Tt.length)for(y=ft.length-1,S=Tt.length-1;1<=y&&0<=S&&ft[y]!==Tt[S];)S--;for(;1<=y&&0<=S;y--,S--)if(ft[y]!==Tt[S]){if(y!==1||S!==1)do if(y--,S--,0>S||ft[y]!==Tt[S]){var Ut=`
`+ft[y].replace(" at new "," at ");return s.displayName&&Ut.includes("<anonymous>")&&(Ut=Ut.replace("<anonymous>",s.displayName)),Ut}while(1<=y&&0<=S);break}}}finally{Wo=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?m(f):""}function v(s){switch(s.tag){case 26:case 27:case 5:return m(s.type);case 16:return m("Lazy");case 13:return m("Suspense");case 19:return m("SuspenseList");case 0:case 15:return s=_(s.type,!1),s;case 11:return s=_(s.type.render,!1),s;case 1:return s=_(s.type,!0),s;default:return""}}function b(s){try{var l="";do l+=v(s),s=s.return;while(s);return l}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function D(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,l.flags&4098&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function U(s){if(D(s)!==s)throw Error(u(188))}function w(s){var l=s.alternate;if(!l){if(l=D(s),l===null)throw Error(u(188));return l!==s?null:s}for(var f=s,y=l;;){var S=f.return;if(S===null)break;var O=S.alternate;if(O===null){if(y=S.return,y!==null){f=y;continue}break}if(S.child===O.child){for(O=S.child;O;){if(O===f)return U(S),s;if(O===y)return U(S),l;O=O.sibling}throw Error(u(188))}if(f.return!==y.return)f=S,y=O;else{for(var W=!1,nt=S.child;nt;){if(nt===f){W=!0,f=S,y=O;break}if(nt===y){W=!0,y=S,f=O;break}nt=nt.sibling}if(!W){for(nt=O.child;nt;){if(nt===f){W=!0,f=O,y=S;break}if(nt===y){W=!0,y=O,f=S;break}nt=nt.sibling}if(!W)throw Error(u(189))}}if(f.alternate!==y)throw Error(u(190))}if(f.tag!==3)throw Error(u(188));return f.stateNode.current===f?s:l}function M(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=M(s),l!==null)return l;s=s.sibling}return null}function I(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(s.tag!==4&&(l=I(s),l!==null))return l;s=s.sibling}return null}function P(s){return{current:s}}function K(s){0>gl||(s.current=Eh[gl],Eh[gl]=null,gl--)}function C(s,l){gl++,Eh[gl]=s.current,s.current=l}function N(s){return s>>>=0,s===0?32:31-(jf(s)/ep|0)|0}function z(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function H(s,l){var f=s.pendingLanes;if(f===0)return 0;var y=0,S=s.suspendedLanes,O=s.pingedLanes,W=s.warmLanes;s=s.finishedLanes!==0;var nt=f&134217727;return nt!==0?(f=nt&~S,f!==0?y=z(f):(O&=nt,O!==0?y=z(O):s||(W=nt&~W,W!==0&&(y=z(W))))):(nt=f&~S,nt!==0?y=z(nt):O!==0?y=z(O):s||(W=f&~W,W!==0&&(y=z(W)))),y===0?0:l!==0&&l!==y&&!(l&S)&&(S=y&-y,W=l&-l,S>=W||S===32&&(W&4194176)!==0)?l:y}function j(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function q(s,l){switch(s){case 1:case 2:case 4:case 8:return l+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V(){var s=Ec;return Ec<<=1,!(Ec&4194176)&&(Ec=128),s}function R(){var s=nu;return nu<<=1,!(nu&62914560)&&(nu=4194304),s}function x(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function G(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Y(s,l,f,y,S,O){var W=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var nt=s.entanglements,ft=s.expirationTimes,Tt=s.hiddenUpdates;for(f=W&~f;0<f;){var Ut=31-On(f),zt=1<<Ut;nt[Ut]=0,ft[Ut]=-1;var xt=Tt[Ut];if(xt!==null)for(Tt[Ut]=null,Ut=0;Ut<xt.length;Ut++){var ie=xt[Ut];ie!==null&&(ie.lane&=-536870913)}f&=~zt}y!==0&&T(s,y,0),O!==0&&S===0&&s.tag!==0&&(s.suspendedLanes|=O&~(W&~l))}function T(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var y=31-On(l);s.entangledLanes|=l,s.entanglements[y]=s.entanglements[y]|1073741824|f&4194218}function F(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var y=31-On(f),S=1<<y;S&l|s[y]&l&&(s[y]|=l),f&=~S}}function k(s){return s&=-s,2<s?8<s?s&134217727?32:268435456:8:2}function Q(s){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(au,s,void 0,(s.current.flags&128)===128)}catch{}}function $(s){if(typeof Si=="function"&&Th(s),kn&&typeof kn.setStrictMode=="function")try{kn.setStrictMode(au,s)}catch{}}function at(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}function dt(s,l){if(typeof s=="object"&&s!==null){var f=bh.get(s);return f!==void 0?f:(l={value:s,source:l,stack:b(l)},bh.set(s,l),l)}return{value:s,source:l,stack:b(l)}}function X(s,l){Da[wa++]=su,Da[wa++]=pl,pl=s,su=l}function it(s,l,f){ia[Ti++]=zs,ia[Ti++]=Ps,ia[Ti++]=gs,gs=s;var y=zs;s=Ps;var S=32-On(y)-1;y&=~(1<<S),f+=1;var O=32-On(l)+S;if(30<O){var W=S-S%5;O=(y&(1<<W)-1).toString(32),y>>=W,S-=W,zs=1<<32-On(l)+S|f<<S|y,Ps=O+s}else zs=1<<O|f<<S|y,Ps=s}function Et(s){s.return!==null&&(X(s,1),it(s,1,0))}function st(s){for(;s===pl;)pl=Da[--wa],Da[wa]=null,su=Da[--wa],Da[wa]=null;for(;s===gs;)gs=ia[--Ti],ia[Ti]=null,Ps=ia[--Ti],ia[Ti]=null,zs=ia[--Ti],ia[Ti]=null}function gt(s,l){C(Tr,l),C(ka,s),C(Mn,null),s=Sf(l),K(Mn),C(Mn,s)}function Rt(){K(Mn),K(ka),K(Tr)}function Nt(s){s.memoizedState!==null&&C(Tc,s);var l=Mn.current,f=Ug(l,s.type);l!==f&&(C(ka,s),C(Mn,f))}function et(s){ka.current===s&&(K(Mn),K(ka)),Tc.current===s&&(K(Tc),hs?vr._currentValue=no:vr._currentValue2=no)}function ct(s){var l=Error(u(418,""));throw $t(dt(l,s)),bc}function At(s,l){if(!na)throw Error(u(175));so(s.stateNode,s.type,s.memoizedProps,l,s)||ct(s)}function Ct(s){for(xn=s.return;xn;)switch(xn.tag){case 3:case 27:ms=!0;return;case 5:case 13:ms=!1;return;default:xn=xn.return}}function It(s){if(!na||s!==xn)return!1;if(!Oe)return Ct(s),Oe=!0,!1;var l=!1;if(si?s.tag!==3&&s.tag!==27&&(s.tag!==5||Uf(s.type)&&!ci(s.type,s.memoizedProps))&&(l=!0):s.tag!==3&&(s.tag!==5||Uf(s.type)&&!ci(s.type,s.memoizedProps))&&(l=!0),l&&Ye&&ct(s),Ct(s),s.tag===13){if(!na)throw Error(u(316));if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(u(317));Ye=fm(s)}else Ye=xn?dl(s.stateNode):null;return!0}function Pt(){na&&(Ye=xn=null,Oe=!1)}function $t(s){qa===null?qa=[s]:qa.push(s)}function oe(){for(var s=br,l=ps=br=0;l<s;){var f=aa[l];aa[l++]=null;var y=aa[l];aa[l++]=null;var S=aa[l];aa[l++]=null;var O=aa[l];if(aa[l++]=null,y!==null&&S!==null){var W=y.pending;W===null?S.next=S:(S.next=W.next,W.next=S),y.pending=S}O!==0&&Ke(f,S,O)}}function Kt(s,l,f,y){aa[br++]=s,aa[br++]=l,aa[br++]=f,aa[br++]=y,ps|=y,s.lanes|=y,s=s.alternate,s!==null&&(s.lanes|=y)}function Fe(s,l,f,y){return Kt(s,l,f,y),gi(s)}function le(s,l){return Kt(s,null,null,l),gi(s)}function Ke(s,l,f){s.lanes|=f;var y=s.alternate;y!==null&&(y.lanes|=f);for(var S=!1,O=s.return;O!==null;)O.childLanes|=f,y=O.alternate,y!==null&&(y.childLanes|=f),O.tag===22&&(s=O.stateNode,s===null||s._visibility&1||(S=!0)),s=O,O=O.return;S&&l!==null&&s.tag===3&&(O=s.stateNode,S=31-On(f),O=O.hiddenUpdates,s=O[S],s===null?O[S]=[l]:s.push(l),l.lane=f|536870912)}function gi(s){if(50<go)throw go=0,Qf=null,Error(u(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}function He(s){s!==yl&&s.next===null&&(yl===null?un=yl=s:yl=yl.next=s),Vn=!0,Ah||(Ah=!0,Ce(en))}function oi(s,l){if(!Rh&&Vn){Rh=!0;do for(var f=!1,y=un;y!==null;){if(s!==0){var S=y.pendingLanes;if(S===0)var O=0;else{var W=y.suspendedLanes,nt=y.pingedLanes;O=(1<<31-On(42|s)+1)-1,O&=S&~(W&~nt),O=O&201326677?O&201326677|1:O?O|2:0}O!==0&&(f=!0,Oi(y,O))}else O=ye,O=H(y,y===Qe?O:0),!(O&3)||j(y,O)||(f=!0,Oi(y,O));y=y.next}while(f);Rh=!1}}function en(){Vn=Ah=!1;var s=0;ru!==0&&(Pg()&&(s=ru),ru=0);for(var l=Ca(),f=null,y=un;y!==null;){var S=y.next,O=Xn(y,l);O===0?(y.next=null,f===null?un=S:f.next=S,S===null&&(yl=f)):(f=y,(s!==0||O&3)&&(Vn=!0)),y=S}oi(s)}function Xn(s,l){for(var f=s.suspendedLanes,y=s.pingedLanes,S=s.expirationTimes,O=s.pendingLanes&-62914561;0<O;){var W=31-On(O),nt=1<<W,ft=S[W];ft===-1?(!(nt&f)||nt&y)&&(S[W]=q(nt,l)):ft<=l&&(s.expiredLanes|=nt),O&=~nt}if(l=Qe,f=ye,f=H(s,s===l?f:0),y=s.callbackNode,f===0||s===l&&je===2||s.cancelPendingCommit!==null)return y!==null&&y!==null&&ds(y),s.callbackNode=null,s.callbackPriority=0;if(!(f&3)||j(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(y!==null&&ds(y),k(f)){case 2:case 8:f=Sc;break;case 32:f=iu;break;case 268435456:f=lo;break;default:f=iu}return y=nn.bind(null,s),f=Ls(f,y),s.callbackPriority=l,s.callbackNode=f,l}return y!==null&&y!==null&&ds(y),s.callbackPriority=2,s.callbackNode=null,2}function nn(s,l){var f=s.callbackNode;if(nl()&&s.callbackNode!==f)return null;var y=ye;return y=H(s,s===Qe?y:0),y===0?null:(ba(s,y,l),Xn(s,Ca()),s.callbackNode!=null&&s.callbackNode===f?nn.bind(null,s):null)}function Oi(s,l){if(nl())return null;ba(s,l,!0)}function Ce(s){kg?qg(function(){pe&6?Ls(Sh,s):s()}):Ls(Sh,s)}function ke(){return ru===0&&(ru=V()),ru}function Qn(s,l){if(lu===null){var f=lu=[];Ch=0,cn=ke(),ri={status:"pending",value:void 0,then:function(y){f.push(y)}}}return Ch++,l.then(da,da),l}function da(){if(--Ch===0&&lu!==null){ri!==null&&(ri.status="fulfilled");var s=lu;lu=null,cn=0,ri=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function ji(s,l){var f=[],y={status:"pending",value:null,reason:null,then:function(S){f.push(S)}};return s.then(function(){y.status="fulfilled",y.value=l;for(var S=0;S<f.length;S++)(0,f[S])(l)},function(S){for(y.status="rejected",y.reason=S,S=0;S<f.length;S++)(0,f[S])(void 0)}),y}function ga(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zn(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function an(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ae(s,l,f){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,pe&2){var S=y.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),y.pending=l,l=gi(s),Ke(s,null,f),l}return Kt(s,y,l,f),gi(s)}function ma(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194176)!==0)){var y=l.lanes;y&=s.pendingLanes,f|=y,l.lanes=f,F(s,f)}}function Fi(s,l){var f=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,f===y)){var S=null,O=null;if(f=f.firstBaseUpdate,f!==null){do{var W={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};O===null?S=O=W:O=O.next=W,f=f.next}while(f!==null);O===null?S=O=l:O=O.next=l}else S=O=l;f={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:O,shared:y.shared,callbacks:y.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}function Zn(){if(Dh){var s=ri;if(s!==null)throw s}}function Fs(s,l,f,y){Dh=!1;var S=s.updateQueue;bi=!1;var O=S.firstBaseUpdate,W=S.lastBaseUpdate,nt=S.shared.pending;if(nt!==null){S.shared.pending=null;var ft=nt,Tt=ft.next;ft.next=null,W===null?O=Tt:W.next=Tt,W=ft;var Ut=s.alternate;Ut!==null&&(Ut=Ut.updateQueue,nt=Ut.lastBaseUpdate,nt!==W&&(nt===null?Ut.firstBaseUpdate=Tt:nt.next=Tt,Ut.lastBaseUpdate=ft))}if(O!==null){var zt=S.baseState;W=0,Ut=Tt=ft=null,nt=O;do{var xt=nt.lane&-536870913,ie=xt!==nt.lane;if(ie?(ye&xt)===xt:(y&xt)===xt){xt!==0&&xt===cn&&(Dh=!0),Ut!==null&&(Ut=Ut.next={lane:0,tag:nt.tag,payload:nt.payload,callback:null,next:null});t:{var Wa=s,du=nt;xt=l;var mo=f;switch(du.tag){case 1:if(Wa=du.payload,typeof Wa=="function"){zt=Wa.call(mo,zt,xt);break t}zt=Wa;break t;case 3:Wa.flags=Wa.flags&-65537|128;case 0:if(Wa=du.payload,xt=typeof Wa=="function"?Wa.call(mo,zt,xt):Wa,xt==null)break t;zt=wn({},zt,xt);break t;case 2:bi=!0}}xt=nt.callback,xt!==null&&(s.flags|=64,ie&&(s.flags|=8192),ie=S.callbacks,ie===null?S.callbacks=[xt]:ie.push(xt))}else ie={lane:xt,tag:nt.tag,payload:nt.payload,callback:nt.callback,next:null},Ut===null?(Tt=Ut=ie,ft=zt):Ut=Ut.next=ie,W|=xt;if(nt=nt.next,nt===null){if(nt=S.shared.pending,nt===null)break;ie=nt,nt=ie.next,ie.next=null,S.lastBaseUpdate=ie,S.shared.pending=null}}while(!0);Ut===null&&(ft=zt),S.baseState=ft,S.firstBaseUpdate=Tt,S.lastBaseUpdate=Ut,O===null&&(S.shared.lanes=0),Qa|=W,s.lanes=W,s.memoizedState=zt}}function Gu(s,l){if(typeof s!="function")throw Error(u(191,s));s.call(l)}function Hu(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)Gu(f[s],l)}function pa(s,l){if(Ii(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),y=Object.keys(l);if(f.length!==y.length)return!1;for(y=0;y<f.length;y++){var S=f[y];if(!Em.call(l,S)||!Ii(s[S],l[S]))return!1}return!0}function Ks(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Ki(){}function ya(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(Ki,Ki),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,s===Ac?Error(u(483)):s;default:if(typeof l.status=="string")l.then(Ki,Ki);else{if(s=Qe,s!==null&&100<s.shellSuspendCounter)throw Error(u(482));s=l,s.status="pending",s.then(function(y){if(l.status==="pending"){var S=l;S.status="fulfilled",S.value=y}},function(y){if(l.status==="pending"){var S=l;S.status="rejected",S.reason=y}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,s===Ac?Error(u(483)):s}throw Ai=l,Ac}}function Ys(){if(Ai===null)throw Error(u(459));var s=Ai;return Ai=null,s}function Xs(s){var l=Ri;return Ri+=1,oo===null&&(oo=[]),ya(oo,s,l)}function Qs(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function es(s,l){throw l.$$typeof===vf?Error(u(525)):(s=Object.prototype.toString.call(l),Error(u(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function Il(s){var l=s._init;return l(s._payload)}function En(s){function l(pt,ut){if(s){var _t=pt.deletions;_t===null?(pt.deletions=[ut],pt.flags|=16):_t.push(ut)}}function f(pt,ut){if(!s)return null;for(;ut!==null;)l(pt,ut),ut=ut.sibling;return null}function y(pt){for(var ut=new Map;pt!==null;)pt.key!==null?ut.set(pt.key,pt):ut.set(pt.index,pt),pt=pt.sibling;return ut}function S(pt,ut){return pt=dr(pt,ut),pt.index=0,pt.sibling=null,pt}function O(pt,ut,_t){return pt.index=_t,s?(_t=pt.alternate,_t!==null?(_t=_t.index,_t<ut?(pt.flags|=33554434,ut):_t):(pt.flags|=33554434,ut)):(pt.flags|=1048576,ut)}function W(pt){return s&&pt.alternate===null&&(pt.flags|=33554434),pt}function nt(pt,ut,_t,Mt){return ut===null||ut.tag!==6?(ut=mc(_t,pt.mode,Mt),ut.return=pt,ut):(ut=S(ut,_t),ut.return=pt,ut)}function ft(pt,ut,_t,Mt){var Ht=_t.type;return Ht===rl?Ut(pt,ut,_t.props.children,Mt,_t.key):ut!==null&&(ut.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===yr&&Il(Ht)===ut.type)?(ut=S(ut,_t.props),Qs(ut,_t),ut.return=pt,ut):(ut=$l(_t.type,_t.key,_t.props,null,pt.mode,Mt),Qs(ut,_t),ut.return=pt,ut)}function Tt(pt,ut,_t,Mt){return ut===null||ut.tag!==4||ut.stateNode.containerInfo!==_t.containerInfo||ut.stateNode.implementation!==_t.implementation?(ut=ea(_t,pt.mode,Mt),ut.return=pt,ut):(ut=S(ut,_t.children||[]),ut.return=pt,ut)}function Ut(pt,ut,_t,Mt,Ht){return ut===null||ut.tag!==7?(ut=al(_t,pt.mode,Mt,Ht),ut.return=pt,ut):(ut=S(ut,_t),ut.return=pt,ut)}function zt(pt,ut,_t){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return ut=mc(""+ut,pt.mode,_t),ut.return=pt,ut;if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case sl:return _t=$l(ut.type,ut.key,ut.props,null,pt.mode,_t),Qs(_t,ut),_t.return=pt,_t;case Vs:return ut=ea(ut,pt.mode,_t),ut.return=pt,ut;case yr:var Mt=ut._init;return ut=Mt(ut._payload),zt(pt,ut,_t)}if(hl(ut)||c(ut))return ut=al(ut,pt.mode,_t,null),ut.return=pt,ut;if(typeof ut.then=="function")return zt(pt,Xs(ut),_t);if(ut.$$typeof===ol)return zt(pt,vt(pt,ut),_t);es(pt,ut)}return null}function xt(pt,ut,_t,Mt){var Ht=ut!==null?ut.key:null;if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return Ht!==null?null:nt(pt,ut,""+_t,Mt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case sl:return _t.key===Ht?ft(pt,ut,_t,Mt):null;case Vs:return _t.key===Ht?Tt(pt,ut,_t,Mt):null;case yr:return Ht=_t._init,_t=Ht(_t._payload),xt(pt,ut,_t,Mt)}if(hl(_t)||c(_t))return Ht!==null?null:Ut(pt,ut,_t,Mt,null);if(typeof _t.then=="function")return xt(pt,ut,Xs(_t),Mt);if(_t.$$typeof===ol)return xt(pt,ut,vt(pt,_t),Mt);es(pt,_t)}return null}function ie(pt,ut,_t,Mt,Ht){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint")return pt=pt.get(_t)||null,nt(ut,pt,""+Mt,Ht);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case sl:return pt=pt.get(Mt.key===null?_t:Mt.key)||null,ft(ut,pt,Mt,Ht);case Vs:return pt=pt.get(Mt.key===null?_t:Mt.key)||null,Tt(ut,pt,Mt,Ht);case yr:var Ze=Mt._init;return Mt=Ze(Mt._payload),ie(pt,ut,_t,Mt,Ht)}if(hl(Mt)||c(Mt))return pt=pt.get(_t)||null,Ut(ut,pt,Mt,Ht,null);if(typeof Mt.then=="function")return ie(pt,ut,_t,Xs(Mt),Ht);if(Mt.$$typeof===ol)return ie(pt,ut,_t,vt(ut,Mt),Ht);es(ut,Mt)}return null}function Wa(pt,ut,_t,Mt){for(var Ht=null,Ze=null,Qt=ut,ge=ut=0,tn=null;Qt!==null&&ge<_t.length;ge++){Qt.index>ge?(tn=Qt,Qt=null):tn=Qt.sibling;var Se=xt(pt,Qt,_t[ge],Mt);if(Se===null){Qt===null&&(Qt=tn);break}s&&Qt&&Se.alternate===null&&l(pt,Qt),ut=O(Se,ut,ge),Ze===null?Ht=Se:Ze.sibling=Se,Ze=Se,Qt=tn}if(ge===_t.length)return f(pt,Qt),Oe&&X(pt,ge),Ht;if(Qt===null){for(;ge<_t.length;ge++)Qt=zt(pt,_t[ge],Mt),Qt!==null&&(ut=O(Qt,ut,ge),Ze===null?Ht=Qt:Ze.sibling=Qt,Ze=Qt);return Oe&&X(pt,ge),Ht}for(Qt=y(Qt);ge<_t.length;ge++)tn=ie(Qt,pt,ge,_t[ge],Mt),tn!==null&&(s&&tn.alternate!==null&&Qt.delete(tn.key===null?ge:tn.key),ut=O(tn,ut,ge),Ze===null?Ht=tn:Ze.sibling=tn,Ze=tn);return s&&Qt.forEach(function(Cl){return l(pt,Cl)}),Oe&&X(pt,ge),Ht}function du(pt,ut,_t,Mt){if(_t==null)throw Error(u(151));for(var Ht=null,Ze=null,Qt=ut,ge=ut=0,tn=null,Se=_t.next();Qt!==null&&!Se.done;ge++,Se=_t.next()){Qt.index>ge?(tn=Qt,Qt=null):tn=Qt.sibling;var Cl=xt(pt,Qt,Se.value,Mt);if(Cl===null){Qt===null&&(Qt=tn);break}s&&Qt&&Cl.alternate===null&&l(pt,Qt),ut=O(Cl,ut,ge),Ze===null?Ht=Cl:Ze.sibling=Cl,Ze=Cl,Qt=tn}if(Se.done)return f(pt,Qt),Oe&&X(pt,ge),Ht;if(Qt===null){for(;!Se.done;ge++,Se=_t.next())Se=zt(pt,Se.value,Mt),Se!==null&&(ut=O(Se,ut,ge),Ze===null?Ht=Se:Ze.sibling=Se,Ze=Se);return Oe&&X(pt,ge),Ht}for(Qt=y(Qt);!Se.done;ge++,Se=_t.next())Se=ie(Qt,pt,ge,Se.value,Mt),Se!==null&&(s&&Se.alternate!==null&&Qt.delete(Se.key===null?ge:Se.key),ut=O(Se,ut,ge),Ze===null?Ht=Se:Ze.sibling=Se,Ze=Se);return s&&Qt.forEach(function(Tm){return l(pt,Tm)}),Oe&&X(pt,ge),Ht}function mo(pt,ut,_t,Mt){if(typeof _t=="object"&&_t!==null&&_t.type===rl&&_t.key===null&&(_t=_t.props.children),typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case sl:t:{for(var Ht=_t.key;ut!==null;){if(ut.key===Ht){if(Ht=_t.type,Ht===rl){if(ut.tag===7){f(pt,ut.sibling),Mt=S(ut,_t.props.children),Mt.return=pt,pt=Mt;break t}}else if(ut.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===yr&&Il(Ht)===ut.type){f(pt,ut.sibling),Mt=S(ut,_t.props),Qs(Mt,_t),Mt.return=pt,pt=Mt;break t}f(pt,ut);break}else l(pt,ut);ut=ut.sibling}_t.type===rl?(Mt=al(_t.props.children,pt.mode,Mt,_t.key),Mt.return=pt,pt=Mt):(Mt=$l(_t.type,_t.key,_t.props,null,pt.mode,Mt),Qs(Mt,_t),Mt.return=pt,pt=Mt)}return W(pt);case Vs:t:{for(Ht=_t.key;ut!==null;){if(ut.key===Ht)if(ut.tag===4&&ut.stateNode.containerInfo===_t.containerInfo&&ut.stateNode.implementation===_t.implementation){f(pt,ut.sibling),Mt=S(ut,_t.children||[]),Mt.return=pt,pt=Mt;break t}else{f(pt,ut);break}else l(pt,ut);ut=ut.sibling}Mt=ea(_t,pt.mode,Mt),Mt.return=pt,pt=Mt}return W(pt);case yr:return Ht=_t._init,_t=Ht(_t._payload),mo(pt,ut,_t,Mt)}if(hl(_t))return Wa(pt,ut,_t,Mt);if(c(_t)){if(Ht=c(_t),typeof Ht!="function")throw Error(u(150));return _t=Ht.call(_t),du(pt,ut,_t,Mt)}if(typeof _t.then=="function")return mo(pt,ut,Xs(_t),Mt);if(_t.$$typeof===ol)return mo(pt,ut,vt(pt,_t),Mt);es(pt,_t)}return typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint"?(_t=""+_t,ut!==null&&ut.tag===6?(f(pt,ut.sibling),Mt=S(ut,_t),Mt.return=pt,pt=Mt):(f(pt,ut),Mt=mc(_t,pt.mode,Mt),Mt.return=pt,pt=Mt),W(pt)):f(pt,ut)}return function(pt,ut,_t,Mt){try{Ri=0;var Ht=mo(pt,ut,_t,Mt);return oo=null,Ht}catch(Qt){if(Qt===Ac)throw Qt;var Ze=n(29,Qt,null,pt.mode);return Ze.lanes=Mt,Ze.return=pt,Ze}finally{}}}function ku(s,l){s=Es,C(_s,s),C(ys,l),Es=s|l.baseLanes}function Ss(){C(_s,Es),C(ys,ys.current)}function Ts(){Es=_s.current,K(ys),K(_s)}function ns(s){var l=s.alternate;C(ln,ln.current&1),C(sa,s),ja===null&&(l===null||ys.current!==null||l.memoizedState!==null)&&(ja=s)}function qu(s){if(s.tag===22){if(C(ln,ln.current),C(sa,s),ja===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(ja=s)}}else Mi()}function Mi(){C(ln,ln.current),C(sa,sa.current)}function ni(s){K(sa),ja===s&&(ja=null),K(ln)}function Rn(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||io(f)||vc(f)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(l.flags&128)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function ue(){throw Error(u(321))}function is(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!Ii(s[f],l[f]))return!1;return!0}function Zs(s,l,f,y,S,O){return Ar=O,ee=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Zt.H=s===null||s.memoizedState===null?Dr:zi,vl=!1,O=f(y,S),vl=!1,uo&&(O=as(l,f,y,S)),Ll(s),O}function Ll(s){Zt.H=Un;var l=Ue!==null&&Ue.next!==null;if(Ar=0,gn=Ue=ee=null,Rr=!1,ou=0,Cr=null,l)throw Error(u(300));s===null||qn||(s=s.dependencies,s!==null&&L(s)&&(qn=!0))}function as(s,l,f,y){ee=s;var S=0;do{if(uo&&(Cr=null),ou=0,uo=!1,25<=S)throw Error(u(301));if(S+=1,gn=Ue=null,s.updateQueue!=null){var O=s.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}Zt.H=Sl,O=l(f,y)}while(uo);return O}function ju(){var s=Zt.H,l=s.useState()[0];return l=typeof l.then=="function"?Ma(l):l,s=s.useState()[0],(Ue!==null?Ue.memoizedState:null)!==s&&(ee.flags|=1024),l}function bs(){var s=El!==0;return El=0,s}function Ws(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function _a(s){if(Rr){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Rr=!1}Ar=0,gn=Ue=ee=null,uo=!1,ou=El=0,Cr=null}function Sn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?ee.memoizedState=gn=s:gn=gn.next=s,gn}function Je(){if(Ue===null){var s=ee.alternate;s=s!==null?s.memoizedState:null}else s=Ue.next;var l=gn===null?ee.memoizedState:gn.next;if(l!==null)gn=l,Ue=s;else{if(s===null)throw ee.alternate===null?Error(u(467)):Error(u(310));Ue=s,s={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},gn===null?ee.memoizedState=gn=s:gn=gn.next=s}return gn}function Ma(s){var l=ou;return ou+=1,Cr===null&&(Cr=[]),s=ya(Cr,s,l),l=ee,(gn===null?l.memoizedState:gn.next)===null&&(l=l.alternate,Zt.H=l===null||l.memoizedState===null?Dr:zi),s}function sn(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ma(s);if(s.$$typeof===ol)return ot(s)}throw Error(u(438,String(s)))}function zl(s){var l=null,f=ee.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var y=ee.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(l={data:y.data.map(function(S){return S.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Ff(),ee.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),y=0;y<s;y++)f[y]=ce;return l.index++,f}function Yi(s,l){return typeof l=="function"?l(s):l}function mi(s){var l=Je();return pi(l,Ue,s)}function pi(s,l,f){var y=s.queue;if(y===null)throw Error(u(311));y.lastRenderedReducer=f;var S=s.baseQueue,O=y.pending;if(O!==null){if(S!==null){var W=S.next;S.next=O.next,O.next=W}l.baseQueue=S=O,y.pending=null}if(O=s.baseState,S===null)s.memoizedState=O;else{l=S.next;var nt=W=null,ft=null,Tt=l,Ut=!1;do{var zt=Tt.lane&-536870913;if(zt!==Tt.lane?(ye&zt)===zt:(Ar&zt)===zt){var xt=Tt.revertLane;if(xt===0)ft!==null&&(ft=ft.next={lane:0,revertLane:0,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null}),zt===cn&&(Ut=!0);else if((Ar&xt)===xt){Tt=Tt.next,xt===cn&&(Ut=!0);continue}else zt={lane:0,revertLane:Tt.revertLane,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null},ft===null?(nt=ft=zt,W=O):ft=ft.next=zt,ee.lanes|=xt,Qa|=xt;zt=Tt.action,vl&&f(O,zt),O=Tt.hasEagerState?Tt.eagerState:f(O,zt)}else xt={lane:zt,revertLane:Tt.revertLane,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null},ft===null?(nt=ft=xt,W=O):ft=ft.next=xt,ee.lanes|=zt,Qa|=zt;Tt=Tt.next}while(Tt!==null&&Tt!==l);if(ft===null?W=O:ft.next=nt,!Ii(O,s.memoizedState)&&(qn=!0,Ut&&(f=ri,f!==null)))throw f;s.memoizedState=O,s.baseState=W,s.baseQueue=ft,y.lastRenderedState=O}return S===null&&(y.lanes=0),[s.memoizedState,y.dispatch]}function xi(s){var l=Je(),f=l.queue;if(f===null)throw Error(u(311));f.lastRenderedReducer=s;var y=f.dispatch,S=f.pending,O=l.memoizedState;if(S!==null){f.pending=null;var W=S=S.next;do O=s(O,W.action),W=W.next;while(W!==S);Ii(O,l.memoizedState)||(qn=!0),l.memoizedState=O,l.baseQueue===null&&(l.baseState=O),f.lastRenderedState=O}return[O,y]}function jc(s,l,f){var y=ee,S=Je(),O=Oe;if(O){if(f===void 0)throw Error(u(407));f=f()}else f=l();var W=!Ii((Ue||S).memoizedState,f);if(W&&(S.memoizedState=f,qn=!0),S=S.queue,Bl(Fu.bind(null,y,S,s),[s]),S.getSnapshot!==l||W||gn!==null&&gn.memoizedState.tag&1){if(y.flags|=2048,va(9,Mo.bind(null,y,S,f,l),{destroy:void 0},null),Qe===null)throw Error(u(349));O||Ar&60||Oo(y,l,f)}return f}function Oo(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=ee.updateQueue,l===null?(l=Ff(),ee.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function Mo(s,l,f,y){l.value=f,l.getSnapshot=y,Js(l)&&$s(s)}function Fu(s,l,f){return f(function(){Js(l)&&$s(s)})}function Js(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!Ii(s,f)}catch{return!0}}function $s(s){var l=le(s,2);l!==null&&rn(l,s,2)}function Xi(s){var l=Sn();if(typeof s=="function"){var f=s;if(s=f(),vl){$(!0);try{f()}finally{$(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:s},l}function yi(s,l,f,y){return s.baseState=f,pi(s,Ue,typeof y=="function"?y:Yi)}function Fc(s,l,f,y,S){if(Fr(s))throw Error(u(485));if(s=l.action,s!==null){var O={payload:S,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){O.listeners.push(W)}};Zt.T!==null?f(!0):O.isTransition=!1,y(O),f=l.pending,f===null?(O.next=l.pending=O,Kc(l,O)):(O.next=f.next,l.pending=f.next=O)}}function Kc(s,l){var f=l.action,y=l.payload,S=s.state;if(l.isTransition){var O=Zt.T,W={};Zt.T=W;try{var nt=f(S,y),ft=Zt.S;ft!==null&&ft(W,nt),Lr(s,l,nt)}catch(Tt){zr(s,l,Tt)}finally{Zt.T=O}}else try{O=f(S,y),Lr(s,l,O)}catch(Tt){zr(s,l,Tt)}}function Lr(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(y){xo(s,l,y)},function(y){return zr(s,l,y)}):xo(s,l,f)}function xo(s,l,f){l.status="fulfilled",l.value=f,As(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,Kc(s,f)))}function zr(s,l,f){var y=s.pending;if(s.pending=null,y!==null){y=y.next;do l.status="rejected",l.reason=f,As(l),l=l.next;while(l!==y)}s.action=null}function As(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function pn(s,l){return l}function tr(s,l){if(Oe){var f=Qe.formState;if(f!==null){t:{var y=ee;if(Oe){if(Ye){var S=om(Ye,ms);if(S){Ye=dl(S),y=Is(S);break t}}ct(y)}y=!1}y&&(l=f[0])}}f=Sn(),f.memoizedState=f.baseState=l,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pn,lastRenderedState:l},f.queue=y,f=Io.bind(null,ee,y),y.dispatch=f,y=Xi(!1);var O=xa.bind(null,ee,!1,y.queue);return y=Sn(),S={state:l,dispatch:null,action:s,pending:null},y.queue=S,f=Fc.bind(null,ee,S,O,f),S.dispatch=f,y.memoizedState=s,[l,f,!1]}function Pr(s){var l=Je();return Pl(l,Ue,s)}function Pl(s,l,f){l=pi(s,l,pn)[0],s=mi(Yi)[0],l=typeof l=="object"&&l!==null&&typeof l.then=="function"?Ma(l):l;var y=Je(),S=y.queue,O=S.dispatch;return f!==y.memoizedState&&(ee.flags|=2048,va(9,Ve.bind(null,S,f),{destroy:void 0},null)),[l,O,s]}function Ve(s,l){s.action=l}function Br(s){var l=Je(),f=Ue;if(f!==null)return Pl(l,f,s);Je(),l=l.memoizedState,f=Je();var y=f.queue.dispatch;return f.memoizedState=s,[l,y,!1]}function va(s,l,f,y){return s={tag:s,create:l,inst:f,deps:y,next:null},l=ee.updateQueue,l===null&&(l=Ff(),ee.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(y=f.next,f.next=s,s.next=y,l.lastEffect=s),s}function Ea(){return Je().memoizedState}function Vo(s,l,f,y){var S=Sn();ee.flags|=s,S.memoizedState=va(1|l,f,{destroy:void 0},y===void 0?null:y)}function Gr(s,l,f,y){var S=Je();y=y===void 0?null:y;var O=S.memoizedState.inst;Ue!==null&&y!==null&&is(y,Ue.memoizedState.deps)?S.memoizedState=va(l,f,O,y):(ee.flags|=s,S.memoizedState=va(1|l,f,O,y))}function Ku(s,l){Vo(8390656,8,s,l)}function Bl(s,l){Gr(2048,8,s,l)}function Yc(s,l){return Gr(4,2,s,l)}function Xc(s,l){return Gr(4,4,s,l)}function ss(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Sa(s,l,f){f=f!=null?f.concat([s]):null,Gr(4,4,ss.bind(null,l,s),f)}function Hr(){}function Rs(s,l){var f=Je();l=l===void 0?null:l;var y=f.memoizedState;return l!==null&&is(l,y[1])?y[0]:(f.memoizedState=[s,l],s)}function Cs(s,l){var f=Je();l=l===void 0?null:l;var y=f.memoizedState;if(l!==null&&is(l,y[1]))return y[0];if(y=s(),vl){$(!0);try{s()}finally{$(!1)}}return f.memoizedState=[y,l],y}function rs(s,l,f){return f===void 0||Ar&1073741824?s.memoizedState=l:(s.memoizedState=f,s=oc(),ee.lanes|=s,Qa|=s,f)}function Uo(s,l,f,y){return Ii(f,l)?f:ys.current!==null?(s=rs(s,f,y),Ii(s,l)||(qn=!0),s):Ar&42?(s=oc(),ee.lanes|=s,Qa|=s,l):(qn=!0,s.memoizedState=f)}function Yu(s,l,f,y,S){var O=fl();Ui(O!==0&&8>O?O:8);var W=Zt.T,nt={};Zt.T=nt,xa(s,!1,l,f);try{var ft=S(),Tt=Zt.S;if(Tt!==null&&Tt(nt,ft),ft!==null&&typeof ft=="object"&&typeof ft.then=="function"){var Ut=ji(ft,y);Zi(s,l,Ut,vi(s))}else Zi(s,l,y,vi(s))}catch(zt){Zi(s,l,{then:function(){},status:"rejected",reason:zt},vi())}finally{Ui(O),Zt.T=W}}function kr(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:no,baseState:no,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:no},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function Qi(){return ot(vr)}function qr(){return Je().memoizedState}function ls(){return Je().memoizedState}function jr(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=vi();s=an(f);var y=Ae(l,s,f);y!==null&&(rn(y,l,f),ma(y,l,f)),l={cache:ve()},s.payload=l;return}l=l.return}}function er(s,l,f){var y=vi();f={lane:y,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Fr(s)?Wn(l,f):(f=Fe(s,l,f,y),f!==null&&(rn(f,s,y),Pe(f,l,y)))}function Io(s,l,f){var y=vi();Zi(s,l,f,y)}function Zi(s,l,f,y){var S={lane:y,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Fr(s))Wn(l,S);else{var O=s.alternate;if(s.lanes===0&&(O===null||O.lanes===0)&&(O=l.lastRenderedReducer,O!==null))try{var W=l.lastRenderedState,nt=O(W,f);if(S.hasEagerState=!0,S.eagerState=nt,Ii(nt,W))return Kt(s,l,S,0),Qe===null&&oe(),!1}catch{}finally{}if(f=Fe(s,l,S,y),f!==null)return rn(f,s,y),Pe(f,l,y),!0}return!1}function xa(s,l,f,y){if(y={lane:2,revertLane:ke(),action:y,hasEagerState:!1,eagerState:null,next:null},Fr(s)){if(l)throw Error(u(479))}else l=Fe(s,f,y,2),l!==null&&rn(l,s,2)}function Fr(s){var l=s.alternate;return s===ee||l!==null&&l===ee}function Wn(s,l){uo=Rr=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function Pe(s,l,f){if(f&4194176){var y=l.lanes;y&=s.pendingLanes,f|=y,l.lanes=f,F(s,f)}}function Kr(s,l,f,y){l=s.memoizedState,f=f(y,l),f=f==null?l:wn({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}function Yr(s,l,f,y,S,O,W){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,O,W):l.prototype&&l.prototype.isPureReactComponent?!pa(f,y)||!pa(S,O):!0}function Xu(s,l,f,y){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,y),l.state!==s&&uu.enqueueReplaceState(l,l.state,null)}function Va(s,l){var f=l;if("ref"in l){f={};for(var y in l)y!=="ref"&&(f[y]=l[y])}if(s=s.defaultProps){f===l&&(f=wn({},f));for(var S in s)f[S]===void 0&&(f[S]=s[S])}return f}function nr(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(y){setTimeout(function(){throw y})}}function os(s,l,f){try{var y=s.onCaughtError;y(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function ir(s,l,f){return f=an(f),f.tag=3,f.payload={element:null},f.callback=function(){nr(s,l)},f}function Ta(s){return s=an(s),s.tag=3,s}function Qu(s,l,f,y){var S=f.type.getDerivedStateFromError;if(typeof S=="function"){var O=y.value;s.payload=function(){return S(O)},s.callback=function(){os(l,f,y)}}var W=f.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(s.callback=function(){os(l,f,y),typeof S!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var nt=y.stack;this.componentDidCatch(y.value,{componentStack:nt!==null?nt:""})})}function lf(s,l,f,y,S){if(f.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(l=f.alternate,l!==null&&A(l,f,S,!0),f=sa.current,f!==null){switch(f.tag){case 13:return ja===null?Ha():f.alternate===null&&mn===0&&(mn=3),f.flags&=-257,f.flags|=65536,f.lanes=S,y===Li?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([y]):l.add(y),il(s,y,S)),!1;case 22:return f.flags|=65536,y===Li?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([y])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([y]):f.add(y)),il(s,y,S)),!1}throw Error(u(435,f.tag))}return il(s,y,S),Ha(),!1}if(Oe)return l=sa.current,l!==null?(!(l.flags&65536)&&(l.flags|=256),l.flags|=65536,l.lanes=S,y!==bc&&(s=Error(u(422),{cause:y}),$t(dt(s,f)))):(y!==bc&&(l=Error(u(423),{cause:y}),$t(dt(l,f))),s=s.current.alternate,s.flags|=65536,S&=-S,s.lanes|=S,y=dt(y,f),S=ir(s.stateNode,y,S),Fi(s,S),mn!==4&&(mn=2)),!1;var O=Error(u(520),{cause:y});if(O=dt(O,f),hu===null?hu=[O]:hu.push(O),mn!==4&&(mn=2),l===null)return!0;y=dt(y,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=S&-S,f.lanes|=s,s=ir(f.stateNode,y,s),Fi(f,s),!1;case 1:if(l=f.type,O=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(ks===null||!ks.has(O))))return f.flags|=65536,S&=-S,f.lanes|=S,S=Ta(S),Qu(S,s,f,y),Fi(f,S),!1}f=f.return}while(f!==null);return!1}function yn(s,l,f,y){l.child=s===null?Bs(l,null,f,y):_l(l,s.child,f,y)}function Gl(s,l,f,y,S){f=f.render;var O=l.ref;if("ref"in y){var W={};for(var nt in y)nt!=="ref"&&(W[nt]=y[nt])}else W=y;return J(l),y=Zs(s,l,f,W,O,S),nt=bs(),s!==null&&!qn?(Ws(s,l,S),Ua(s,l,S)):(Oe&&nt&&Et(l),l.flags|=1,yn(s,l,y,S),l.child)}function Lo(s,l,f,y,S){if(s===null){var O=f.type;return typeof O=="function"&&!fr(O)&&O.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=O,Hl(s,l,O,y,S)):(s=$l(f.type,null,y,l,l.mode,S),s.ref=l.ref,s.return=l,l.child=s)}if(O=s.child,!Bo(s,S)){var W=O.memoizedProps;if(f=f.compare,f=f!==null?f:pa,f(W,y)&&s.ref===l.ref)return Ua(s,l,S)}return l.flags|=1,s=dr(O,y),s.ref=l.ref,s.return=l,l.child=s}function Hl(s,l,f,y,S){if(s!==null){var O=s.memoizedProps;if(pa(O,y)&&s.ref===l.ref)if(qn=!1,l.pendingProps=y=O,Bo(s,S))s.flags&131072&&(qn=!0);else return l.lanes=s.lanes,Ua(s,l,S)}return jl(s,l,f,y,S)}function Zu(s,l,f){var y=l.pendingProps,S=y.children,O=(l.stateNode._pendingVisibility&2)!==0,W=s!==null?s.memoizedState:null;if(ql(s,l),y.mode==="hidden"||O){if(l.flags&128){if(y=W!==null?W.baseLanes|f:f,s!==null){for(S=l.child=s.child,O=0;S!==null;)O=O|S.lanes|S.childLanes,S=S.sibling;l.childLanes=O&~y}else l.childLanes=0,l.child=null;return kl(s,l,y,f)}if(f&536870912)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Cn(l,W!==null?W.cachePool:null),W!==null?ku(l,W):Ss(),qu(l);else return l.lanes=l.childLanes=536870912,kl(s,l,W!==null?W.baseLanes|f:f,f)}else W!==null?(Cn(l,W.cachePool),ku(l,W),Mi(),l.memoizedState=null):(s!==null&&Cn(l,null),Ss(),Mi());return yn(s,l,S,f),l.child}function kl(s,l,f,y){var S=Ee();return S=S===null?null:{parent:hs?bn._currentValue:bn._currentValue2,pool:S},l.memoizedState={baseLanes:f,cachePool:S},s!==null&&Cn(l,null),Ss(),qu(l),s!==null&&A(s,l,y,!0),null}function ql(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=2097664);else{if(typeof f!="function"&&typeof f!="object")throw Error(u(284));(s===null||s.ref!==f)&&(l.flags|=2097664)}}function jl(s,l,f,y,S){return J(l),f=Zs(s,l,f,y,void 0,S),y=bs(),s!==null&&!qn?(Ws(s,l,S),Ua(s,l,S)):(Oe&&y&&Et(l),l.flags|=1,yn(s,l,f,S),l.child)}function Xr(s,l,f,y,S,O){return J(l),l.updateQueue=null,f=as(l,y,f,S),Ll(s),y=bs(),s!==null&&!qn?(Ws(s,l,O),Ua(s,l,O)):(Oe&&y&&Et(l),l.flags|=1,yn(s,l,f,O),l.child)}function Wu(s,l,f,y,S){if(J(l),l.stateNode===null){var O=ro,W=f.contextType;typeof W=="object"&&W!==null&&(O=ot(W)),O=new f(y,O),l.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=uu,l.stateNode=O,O._reactInternals=l,O=l.stateNode,O.props=y,O.state=l.memoizedState,O.refs={},ga(l),W=f.contextType,O.context=typeof W=="object"&&W!==null?ot(W):ro,O.state=l.memoizedState,W=f.getDerivedStateFromProps,typeof W=="function"&&(Kr(l,f,W,y),O.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(W=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),W!==O.state&&uu.enqueueReplaceState(O,O.state,null),Fs(l,y,O,S),Zn(),O.state=l.memoizedState),typeof O.componentDidMount=="function"&&(l.flags|=4194308),y=!0}else if(s===null){O=l.stateNode;var nt=l.memoizedProps,ft=Va(f,nt);O.props=ft;var Tt=O.context,Ut=f.contextType;W=ro,typeof Ut=="object"&&Ut!==null&&(W=ot(Ut));var zt=f.getDerivedStateFromProps;Ut=typeof zt=="function"||typeof O.getSnapshotBeforeUpdate=="function",nt=l.pendingProps!==nt,Ut||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(nt||Tt!==W)&&Xu(l,O,y,W),bi=!1;var xt=l.memoizedState;O.state=xt,Fs(l,y,O,S),Zn(),Tt=l.memoizedState,nt||xt!==Tt||bi?(typeof zt=="function"&&(Kr(l,f,zt,y),Tt=l.memoizedState),(ft=bi||Yr(l,f,ft,y,xt,Tt,W))?(Ut||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(l.flags|=4194308)):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=Tt),O.props=y,O.state=Tt,O.context=W,y=ft):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{O=l.stateNode,zn(s,l),W=l.memoizedProps,Ut=Va(f,W),O.props=Ut,zt=l.pendingProps,xt=O.context,Tt=f.contextType,ft=ro,typeof Tt=="object"&&Tt!==null&&(ft=ot(Tt)),nt=f.getDerivedStateFromProps,(Tt=typeof nt=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(W!==zt||xt!==ft)&&Xu(l,O,y,ft),bi=!1,xt=l.memoizedState,O.state=xt,Fs(l,y,O,S),Zn();var ie=l.memoizedState;W!==zt||xt!==ie||bi||s!==null&&s.dependencies!==null&&L(s.dependencies)?(typeof nt=="function"&&(Kr(l,f,nt,y),ie=l.memoizedState),(Ut=bi||Yr(l,f,Ut,y,xt,ie,ft)||s!==null&&s.dependencies!==null&&L(s.dependencies))?(Tt||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(y,ie,ft),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(y,ie,ft)),typeof O.componentDidUpdate=="function"&&(l.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof O.componentDidUpdate!="function"||W===s.memoizedProps&&xt===s.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&xt===s.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=ie),O.props=y,O.state=ie,O.context=ft,y=Ut):(typeof O.componentDidUpdate!="function"||W===s.memoizedProps&&xt===s.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&xt===s.memoizedState||(l.flags|=1024),y=!1)}return O=y,ql(s,l),y=(l.flags&128)!==0,O||y?(O=l.stateNode,f=y&&typeof f.getDerivedStateFromError!="function"?null:O.render(),l.flags|=1,s!==null&&y?(l.child=_l(l,s.child,null,S),l.child=_l(l,null,f,S)):yn(s,l,f,S),l.memoizedState=O.state,s=l.child):s=Ua(s,l,S),s}function Ju(s,l,f,y){return Pt(),l.flags|=256,yn(s,l,f,y),l.child}function Fl(s){return{baseLanes:s,cachePool:Pn()}}function ar(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=Na),s}function $u(s,l,f){var y=l.pendingProps,S=!1,O=(l.flags&128)!==0,W;if((W=O)||(W=s!==null&&s.memoizedState===null?!1:(ln.current&2)!==0),W&&(S=!0,l.flags&=-129),W=(l.flags&32)!==0,l.flags&=-33,s===null){if(Oe){if(S?ns(l):Mi(),Oe){var nt=Ye,ft;(ft=nt)&&(nt=cm(nt,ms),nt!==null?(l.memoizedState={dehydrated:nt,treeContext:gs!==null?{id:zs,overflow:Ps}:null,retryLane:536870912},ft=n(18,null,null,0),ft.stateNode=nt,ft.return=l,l.child=ft,xn=l,Ye=null,ft=!0):ft=!1),ft||ct(l)}if(nt=l.memoizedState,nt!==null&&(nt=nt.dehydrated,nt!==null))return vc(nt)?l.lanes=16:l.lanes=536870912,null;ni(l)}return nt=y.children,y=y.fallback,S?(Mi(),S=l.mode,nt=zo({mode:"hidden",children:nt},S),y=al(y,S,f,null),nt.return=l,y.return=l,nt.sibling=y,l.child=nt,S=l.child,S.memoizedState=Fl(f),S.childLanes=ar(s,W,f),l.memoizedState=Cc,y):(ns(l),Qr(l,nt))}if(ft=s.memoizedState,ft!==null&&(nt=ft.dehydrated,nt!==null)){if(O)l.flags&256?(ns(l),l.flags&=-257,l=Kl(s,l,f)):l.memoizedState!==null?(Mi(),l.child=s.child,l.flags|=128,l=null):(Mi(),S=y.fallback,nt=l.mode,y=zo({mode:"visible",children:y.children},nt),S=al(S,nt,f,null),S.flags|=2,y.return=l,S.return=l,y.sibling=S,l.child=y,_l(l,s.child,null,f),y=l.child,y.memoizedState=Fl(f),y.childLanes=ar(s,W,f),l.memoizedState=Cc,l=S);else if(ns(l),vc(nt))W=mh(nt).digest,y=Error(u(419)),y.stack="",y.digest=W,$t({value:y,source:null,stack:null}),l=Kl(s,l,f);else if(qn||A(s,l,f,!1),W=(f&s.childLanes)!==0,qn||W){if(W=Qe,W!==null){if(y=f&-f,y&42)y=1;else switch(y){case 2:y=1;break;case 8:y=4;break;case 32:y=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:y=64;break;case 268435456:y=134217728;break;default:y=0}if(y=y&(W.suspendedLanes|f)?0:y,y!==0&&y!==ft.retryLane)throw ft.retryLane=y,le(s,y),rn(W,s,y),Kf}io(nt)||Ha(),l=Kl(s,l,f)}else io(nt)?(l.flags|=128,l.child=s.child,l=gc.bind(null,s),lm(nt,l),l=null):(s=ft.treeContext,na&&(Ye=Mf(nt),xn=l,Oe=!0,qa=null,ms=!1,s!==null&&(ia[Ti++]=zs,ia[Ti++]=Ps,ia[Ti++]=gs,zs=s.id,Ps=s.overflow,gs=l)),l=Qr(l,y.children),l.flags|=4096);return l}return S?(Mi(),S=y.fallback,nt=l.mode,ft=s.child,O=ft.sibling,y=dr(ft,{mode:"hidden",children:y.children}),y.subtreeFlags=ft.subtreeFlags&31457280,O!==null?S=dr(O,S):(S=al(S,nt,f,null),S.flags|=2),S.return=l,y.return=l,y.sibling=S,l.child=y,y=S,S=l.child,nt=s.child.memoizedState,nt===null?nt=Fl(f):(ft=nt.cachePool,ft!==null?(O=hs?bn._currentValue:bn._currentValue2,ft=ft.parent!==O?{parent:O,pool:O}:ft):ft=Pn(),nt={baseLanes:nt.baseLanes|f,cachePool:ft}),S.memoizedState=nt,S.childLanes=ar(s,W,f),l.memoizedState=Cc,y):(ns(l),f=s.child,s=f.sibling,f=dr(f,{mode:"visible",children:y.children}),f.return=l,f.sibling=null,s!==null&&(W=l.deletions,W===null?(l.deletions=[s],l.flags|=16):W.push(s)),l.child=f,l.memoizedState=null,f)}function Qr(s,l){return l=zo({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function zo(s,l){return rh(s,l,0,null)}function Kl(s,l,f){return _l(l,s.child,null,f),s=Qr(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function Ds(s,l,f){s.lanes|=l;var y=s.alternate;y!==null&&(y.lanes|=l),La(s.return,l,f)}function Po(s,l,f,y,S){var O=s.memoizedState;O===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:f,tailMode:S}:(O.isBackwards=l,O.rendering=null,O.renderingStartTime=0,O.last=y,O.tail=f,O.tailMode=S)}function tc(s,l,f){var y=l.pendingProps,S=y.revealOrder,O=y.tail;if(yn(s,l,y.children,f),y=ln.current,y&2)y=y&1|2,l.flags|=128;else{if(s!==null&&s.flags&128)t:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ds(s,f,l);else if(s.tag===19)Ds(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break t;for(;s.sibling===null;){if(s.return===null||s.return===l)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}switch(C(ln,y),S){case"forwards":for(f=l.child,S=null;f!==null;)s=f.alternate,s!==null&&Rn(s)===null&&(S=f),f=f.sibling;f=S,f===null?(S=l.child,l.child=null):(S=f.sibling,f.sibling=null),Po(l,!1,S,f,O);break;case"backwards":for(f=null,S=l.child,l.child=null;S!==null;){if(s=S.alternate,s!==null&&Rn(s)===null){l.child=S;break}s=S.sibling,S.sibling=f,f=S,S=s}Po(l,!0,f,null,O);break;case"together":Po(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Ua(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),Qa|=l.lanes,!(f&l.childLanes))if(s!==null){if(A(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(u(153));if(l.child!==null){for(s=l.child,f=dr(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=dr(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function Bo(s,l){return s.lanes&l?!0:(s=s.dependencies,!!(s!==null&&L(s)))}function Go(s,l,f){switch(l.tag){case 3:gt(l,l.stateNode.containerInfo),us(l,bn,s.memoizedState.cache),Pt();break;case 27:case 5:Nt(l);break;case 4:gt(l,l.stateNode.containerInfo);break;case 10:us(l,l.type,l.memoizedProps.value);break;case 13:var y=l.memoizedState;if(y!==null)return y.dehydrated!==null?(ns(l),l.flags|=128,null):f&l.child.childLanes?$u(s,l,f):(ns(l),s=Ua(s,l,f),s!==null?s.sibling:null);ns(l);break;case 19:var S=(s.flags&128)!==0;if(y=(f&l.childLanes)!==0,y||(A(s,l,f,!1),y=(f&l.childLanes)!==0),S){if(y)return tc(s,l,f);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),C(ln,ln.current),y)break;return null;case 22:case 23:return l.lanes=0,Zu(s,l,f);case 24:us(l,bn,s.memoizedState.cache)}return Ua(s,l,f)}function _i(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)qn=!0;else{if(!Bo(s,f)&&!(l.flags&128))return qn=!1,Go(s,l,f);qn=!!(s.flags&131072)}else qn=!1,Oe&&l.flags&1048576&&it(l,su,l.index);switch(l.lanes=0,l.tag){case 16:t:{s=l.pendingProps;var y=l.elementType,S=y._init;if(y=S(y._payload),l.type=y,typeof y=="function")fr(y)?(s=Va(y,s),l.tag=1,l=Wu(null,l,y,s,f)):(l.tag=0,l=jl(null,l,y,s,f));else{if(y!=null){if(S=y.$$typeof,S===lh){l.tag=11,l=Gl(null,l,y,s,f);break t}else if(S===Zo){l.tag=14,l=Lo(null,l,y,s,f);break t}}throw l=d(y)||y,Error(u(306,l,""))}}return l;case 0:return jl(s,l,l.type,l.pendingProps,f);case 1:return y=l.type,S=Va(y,l.pendingProps),Wu(s,l,y,S,f);case 3:t:{if(gt(l,l.stateNode.containerInfo),s===null)throw Error(u(387));var O=l.pendingProps;S=l.memoizedState,y=S.element,zn(s,l),Fs(l,O,null,f);var W=l.memoizedState;if(O=W.cache,us(l,bn,O),O!==S.cache&&g(l,[bn],f,!0),Zn(),O=W.element,na&&S.isDehydrated)if(S={element:O,isDehydrated:!1,cache:W.cache},l.updateQueue.baseState=S,l.memoizedState=S,l.flags&256){l=Ju(s,l,O,f);break t}else if(O!==y){y=dt(Error(u(424)),l),$t(y),l=Ju(s,l,O,f);break t}else for(na&&(Ye=ao(l.stateNode.containerInfo),xn=l,Oe=!0,qa=null,ms=!0),f=Bs(l,null,O,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Pt(),O===y){l=Ua(s,l,f);break t}yn(s,l,O,f)}l=l.child}return l;case 26:if(Ra)return ql(s,l),s===null?(f=If(l.type,null,l.pendingProps,null))?l.memoizedState=f:Oe||(l.stateNode=Bf(l.type,l.pendingProps,Tr.current,l)):l.memoizedState=If(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:if(si)return Nt(l),s===null&&si&&Oe&&(y=l.stateNode=_h(l.type,l.pendingProps,Tr.current,Mn.current,!1),xn=l,ms=!0,Ye=Er(y)),y=l.pendingProps.children,s!==null||Oe?yn(s,l,y,f):l.child=_l(l,null,y,f),ql(s,l),l.child;case 5:return s===null&&Oe&&(mm(l.type,l.pendingProps,Mn.current),(S=y=Ye)&&(y=xf(y,l.type,l.pendingProps,ms),y!==null?(l.stateNode=y,xn=l,Ye=Er(y),ms=!1,S=!0):S=!1),S||ct(l)),Nt(l),S=l.type,O=l.pendingProps,W=s!==null?s.memoizedProps:null,y=O.children,ci(S,O)?y=null:W!==null&&ci(S,W)&&(l.flags|=32),l.memoizedState!==null&&(S=Zs(s,l,ju,null,null,f),hs?vr._currentValue=S:vr._currentValue2=S),ql(s,l),yn(s,l,y,f),l.child;case 6:return s===null&&Oe&&(tp(l.pendingProps,Mn.current),(s=f=Ye)&&(f=um(f,l.pendingProps,ms),f!==null?(l.stateNode=f,xn=l,Ye=null,s=!0):s=!1),s||ct(l)),null;case 13:return $u(s,l,f);case 4:return gt(l,l.stateNode.containerInfo),y=l.pendingProps,s===null?l.child=_l(l,null,y,f):yn(s,l,y,f),l.child;case 11:return Gl(s,l,l.type,l.pendingProps,f);case 7:return yn(s,l,l.pendingProps,f),l.child;case 8:return yn(s,l,l.pendingProps.children,f),l.child;case 12:return yn(s,l,l.pendingProps.children,f),l.child;case 10:return y=l.pendingProps,us(l,l.type,y.value),yn(s,l,y.children,f),l.child;case 9:return S=l.type._context,y=l.pendingProps.children,J(l),S=ot(S),y=y(S),l.flags|=1,yn(s,l,y,f),l.child;case 14:return Lo(s,l,l.type,l.pendingProps,f);case 15:return Hl(s,l,l.type,l.pendingProps,f);case 19:return tc(s,l,f);case 22:return Zu(s,l,f);case 24:return J(l),y=ot(bn),s===null?(S=Ee(),S===null&&(S=Qe,O=ve(),S.pooledCache=O,O.refCount++,O!==null&&(S.pooledCacheLanes|=f),S=O),l.memoizedState={parent:y,cache:S},ga(l),us(l,bn,S)):(s.lanes&f&&(zn(s,l),Fs(l,null,null,f),Zn()),S=s.memoizedState,O=l.memoizedState,S.parent!==y?(S={parent:y,cache:y},l.memoizedState=S,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=S),us(l,bn,y)):(y=O.cache,us(l,bn,y),y!==S.cache&&g(l,[bn],f,!0))),yn(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(u(156,l.tag))}function us(s,l,f){hs?(C(Fa,l._currentValue),l._currentValue=f):(C(Fa,l._currentValue2),l._currentValue2=f)}function Ia(s){var l=Fa.current;hs?s._currentValue=l:s._currentValue2=l,K(Fa)}function La(s,l,f){for(;s!==null;){var y=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),s===f)break;s=s.return}}function g(s,l,f,y){var S=s.child;for(S!==null&&(S.return=s);S!==null;){var O=S.dependencies;if(O!==null){var W=S.child;O=O.firstContext;t:for(;O!==null;){var nt=O;O=S;for(var ft=0;ft<l.length;ft++)if(nt.context===l[ft]){O.lanes|=f,nt=O.alternate,nt!==null&&(nt.lanes|=f),La(O.return,f,s),y||(W=null);break t}O=nt.next}}else if(S.tag===18){if(W=S.return,W===null)throw Error(u(341));W.lanes|=f,O=W.alternate,O!==null&&(O.lanes|=f),La(W,f,s),W=null}else W=S.child;if(W!==null)W.return=S;else for(W=S;W!==null;){if(W===s){W=null;break}if(S=W.sibling,S!==null){S.return=W.return,W=S;break}W=W.return}S=W}}function A(s,l,f,y){s=null;for(var S=l,O=!1;S!==null;){if(!O){if(S.flags&524288)O=!0;else if(S.flags&262144)break}if(S.tag===10){var W=S.alternate;if(W===null)throw Error(u(387));if(W=W.memoizedProps,W!==null){var nt=S.type;Ii(S.pendingProps.value,W.value)||(s!==null?s.push(nt):s=[nt])}}else if(S===Tc.current){if(W=S.alternate,W===null)throw Error(u(387));W.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(s!==null?s.push(vr):s=[vr])}S=S.return}s!==null&&g(l,s,f,y),l.flags|=262144}function L(s){for(s=s.firstContext;s!==null;){var l=s.context;if(!Ii(hs?l._currentValue:l._currentValue2,s.memoizedValue))return!0;s=s.next}return!1}function J(s){bl=s,Ka=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ot(s){return Lt(bl,s)}function vt(s,l){return bl===null&&J(s),Lt(s,l)}function Lt(s,l){var f=hs?l._currentValue:l._currentValue2;if(l={context:l,memoizedValue:f,next:null},Ka===null){if(s===null)throw Error(u(308));Ka=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Ka=Ka.next=l;return f}function ve(){return{controller:new Dc,data:new Map,refCount:0}}function _n(s){s.refCount--,s.refCount===0&&vn(np,function(){s.controller.abort()})}function Ee(){var s=co.current;return s!==null?s:Qe.pooledCache}function Cn(s,l){l===null?C(co,co.current):C(co,l.pool)}function Pn(){var s=Ee();return s===null?null:{parent:hs?bn._currentValue:bn._currentValue2,pool:s}}function Dn(s){s.flags|=4}function ii(s,l){if(s!==null&&s.child===l.child)return!1;if(l.flags&16)return!0;for(s=l.child;s!==null;){if(s.flags&13878||s.subtreeFlags&13878)return!0;s=s.sibling}return!1}function za(s,l,f,y){if(dn)for(f=l.child;f!==null;){if(f.tag===5||f.tag===6)yc(s,f.stateNode);else if(!(f.tag===4||si&&f.tag===27)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return;f=f.return}f.sibling.return=f.return,f=f.sibling}else if(fs)for(var S=l.child;S!==null;){if(S.tag===5){var O=S.stateNode;f&&y&&(O=rm(O,S.type,S.memoizedProps)),yc(s,O)}else if(S.tag===6)O=S.stateNode,f&&y&&(O=Of(O,S.memoizedProps)),yc(s,O);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)O=S.child,O!==null&&(O.return=S),za(s,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===l)break;for(;S.sibling===null;){if(S.return===null||S.return===l)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function Ho(s,l,f,y){if(fs)for(var S=l.child;S!==null;){if(S.tag===5){var O=S.stateNode;f&&y&&(O=rm(O,S.type,S.memoizedProps)),Nf(s,O)}else if(S.tag===6)O=S.stateNode,f&&y&&(O=Of(O,S.memoizedProps)),Nf(s,O);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)O=S.child,O!==null&&(O.return=S),Ho(s,S,!(S.memoizedProps!==null&&S.memoizedProps.mode==="manual"),!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===l)break;for(;S.sibling===null;){if(S.return===null||S.return===l)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function ec(s,l){if(fs&&ii(s,l)){s=l.stateNode;var f=s.containerInfo,y=gh();Ho(y,l,!1,!1),s.pendingChildren=y,Dn(l),am(f,y)}}function Qc(s,l,f,y){if(dn)s.memoizedProps!==y&&Dn(l);else if(fs){var S=s.stateNode,O=s.memoizedProps;if((s=ii(s,l))||O!==y){var W=Mn.current;O=im(S,f,O,y,!s,null),O===S?l.stateNode=S:(oh(O,f,y,W)&&Dn(l),l.stateNode=O,s?za(O,l,!1,!1):Dn(l))}else l.stateNode=S}}function Zc(s,l,f){if(bf(l,f)){if(s.flags|=16777216,!Af(l,f))if(ai())s.flags|=8192;else throw Ai=Li,Rc}else s.flags&=-16777217}function Wc(s,l){if(_m(l)){if(s.flags|=16777216,!Gf(l))if(ai())s.flags|=8192;else throw Ai=Li,Rc}else s.flags&=-16777217}function ko(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?R():536870912,s.lanes|=l,Fn|=l)}function qo(s,l){if(!Oe)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function fn(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,y=0;if(l)for(var S=s.child;S!==null;)f|=S.lanes|S.childLanes,y|=S.subtreeFlags&31457280,y|=S.flags&31457280,S.return=s,S=S.sibling;else for(S=s.child;S!==null;)f|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=s,S=S.sibling;return s.subtreeFlags|=y,s.childLanes=f,l}function Cg(s,l,f){var y=l.pendingProps;switch(st(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(l),null;case 1:return fn(l),null;case 3:return f=l.stateNode,y=null,s!==null&&(y=s.memoizedState.cache),l.memoizedState.cache!==y&&(l.flags|=2048),Ia(bn),Rt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(It(l)?Dn(l):s===null||s.memoizedState.isDehydrated&&!(l.flags&256)||(l.flags|=1024,qa!==null&&(cr(qa),qa=null))),ec(s,l),fn(l),null;case 26:if(Ra){f=l.type;var S=l.memoizedState;return s===null?(Dn(l),S!==null?(fn(l),Wc(l,S)):(fn(l),Zc(l,f,y))):S?S!==s.memoizedState?(Dn(l),fn(l),Wc(l,S)):(fn(l),l.flags&=-16777217):(dn?s.memoizedProps!==y&&Dn(l):Qc(s,l,f,y),fn(l),Zc(l,f,y)),null}case 27:if(si){if(et(l),f=Tr.current,S=l.type,s!==null&&l.stateNode!=null)dn?s.memoizedProps!==y&&Dn(l):Qc(s,l,S,y);else{if(!y){if(l.stateNode===null)throw Error(u(166));return fn(l),null}s=Mn.current,It(l)?At(l,s):(s=_h(S,y,f,s,!0),l.stateNode=s,Dn(l))}return fn(l),null}case 5:if(et(l),f=l.type,s!==null&&l.stateNode!=null)Qc(s,l,f,y);else{if(!y){if(l.stateNode===null)throw Error(u(166));return fn(l),null}s=Mn.current,It(l)?At(l,s):(S=Tf(f,y,Tr.current,s,l),za(S,l,!1,!1),l.stateNode=S,oh(S,f,y,s)&&Dn(l))}return fn(l),Zc(l,l.type,l.pendingProps),null;case 6:if(s&&l.stateNode!=null)f=s.memoizedProps,dn?f!==y&&Dn(l):fs&&(f!==y?(l.stateNode=Nn(y,Tr.current,Mn.current,l),Dn(l)):l.stateNode=s.stateNode);else{if(typeof y!="string"&&l.stateNode===null)throw Error(u(166));if(s=Tr.current,f=Mn.current,It(l)){if(!na)throw Error(u(176));if(s=l.stateNode,f=l.memoizedProps,y=null,S=xn,S!==null)switch(S.tag){case 27:case 5:y=S.memoizedProps}ph(s,f,l,y)||ct(l)}else l.stateNode=Nn(y,s,f,l)}return fn(l),null;case 13:if(y=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(S=It(l),y!==null&&y.dehydrated!==null){if(s===null){if(!S)throw Error(u(318));if(!na)throw Error(u(344));if(S=l.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(u(317));hm(S,l)}else Pt(),!(l.flags&128)&&(l.memoizedState=null),l.flags|=4;fn(l),S=!1}else qa!==null&&(cr(qa),qa=null),S=!0;if(!S)return l.flags&256?(ni(l),l):(ni(l),null)}if(ni(l),l.flags&128)return l.lanes=f,l;if(f=y!==null,s=s!==null&&s.memoizedState!==null,f){y=l.child,S=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(S=y.alternate.memoizedState.cachePool.pool);var O=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(O=y.memoizedState.cachePool.pool),O!==S&&(y.flags|=2048)}return f!==s&&f&&(l.child.flags|=8192),ko(l,l.updateQueue),fn(l),null;case 4:return Rt(),ec(s,l),s===null&&Lg(l.stateNode.containerInfo),fn(l),null;case 10:return Ia(l.type),fn(l),null;case 19:if(K(ln),S=l.memoizedState,S===null)return fn(l),null;if(y=(l.flags&128)!==0,O=S.rendering,O===null)if(y)qo(S,!1);else{if(mn!==0||s!==null&&s.flags&128)for(s=l.child;s!==null;){if(O=Rn(s),O!==null){for(l.flags|=128,qo(S,!1),s=O.updateQueue,l.updateQueue=s,ko(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)Jl(f,s),f=f.sibling;return C(ln,ln.current&1|2),l.child}s=s.sibling}S.tail!==null&&Ca()>Oa&&(l.flags|=128,y=!0,qo(S,!1),l.lanes=4194304)}else{if(!y)if(s=Rn(O),s!==null){if(l.flags|=128,y=!0,s=s.updateQueue,l.updateQueue=s,ko(l,s),qo(S,!0),S.tail===null&&S.tailMode==="hidden"&&!O.alternate&&!Oe)return fn(l),null}else 2*Ca()-S.renderingStartTime>Oa&&f!==536870912&&(l.flags|=128,y=!0,qo(S,!1),l.lanes=4194304);S.isBackwards?(O.sibling=l.child,l.child=O):(s=S.last,s!==null?s.sibling=O:l.child=O,S.last=O)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=Ca(),l.sibling=null,s=ln.current,C(ln,y?s&1|2:s&1),l):(fn(l),null);case 22:case 23:return ni(l),Ts(),y=l.memoizedState!==null,s!==null?s.memoizedState!==null!==y&&(l.flags|=8192):y&&(l.flags|=8192),y?f&536870912&&!(l.flags&128)&&(fn(l),l.subtreeFlags&6&&(l.flags|=8192)):fn(l),f=l.updateQueue,f!==null&&ko(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),y=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==f&&(l.flags|=2048),s!==null&&K(co),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Ia(bn),fn(l),null;case 25:return null}throw Error(u(156,l.tag))}function K0(s,l){switch(st(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ia(bn),Rt(),s=l.flags,s&65536&&!(s&128)?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return et(l),null;case 13:if(ni(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(u(340));Pt()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return K(ln),null;case 4:return Rt(),null;case 10:return Ia(l.type),null;case 22:case 23:return ni(l),Ts(),s!==null&&K(co),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Ia(bn),null;case 25:return null;default:return null}}function Dg(s,l){switch(st(l),l.tag){case 3:Ia(bn),Rt();break;case 26:case 27:case 5:et(l);break;case 4:Rt();break;case 13:ni(l);break;case 19:K(ln);break;case 10:Ia(l.type);break;case 22:case 23:ni(l),Ts(),s!==null&&K(co);break;case 24:Ia(bn)}}function nc(s,l){try{var f=l.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var S=y.next;f=S;do{if((f.tag&s)===s){y=void 0;var O=f.create,W=f.inst;y=O(),W.destroy=y}f=f.next}while(f!==S)}}catch(nt){Be(l,l.return,nt)}}function Zr(s,l,f){try{var y=l.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var O=S.next;y=O;do{if((y.tag&s)===s){var W=y.inst,nt=W.destroy;if(nt!==void 0){W.destroy=void 0,S=l;var ft=f;try{nt()}catch(Tt){Be(S,ft,Tt)}}}y=y.next}while(y!==O)}}catch(Tt){Be(l,l.return,Tt)}}function wg(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{Hu(l,f)}catch(y){Be(s,s.return,y)}}}function Wi(s,l,f){f.props=Va(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(y){Be(s,l,y)}}function cs(s,l){try{var f=s.ref;if(f!==null){var y=s.stateNode;switch(s.tag){case 26:case 27:case 5:var S=eo(y);break;default:S=y}typeof f=="function"?s.refCleanup=f(S):f.current=S}}catch(O){Be(s,l,O)}}function Ji(s,l){var f=s.ref,y=s.refCleanup;if(f!==null)if(typeof y=="function")try{y()}catch(S){Be(s,l,S)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(S){Be(s,l,S)}else f.current=null}function of(s){var l=s.type,f=s.memoizedProps,y=s.stateNode;try{Qg(y,l,f,s)}catch(S){Be(s,s.return,S)}}function uf(s,l,f){try{Zg(s.stateNode,s.type,f,l,s)}catch(y){Be(s,s.return,y)}}function cf(s){return s.tag===5||s.tag===3||(Ra?s.tag===26:!1)||(si?s.tag===27:!1)||s.tag===4}function ic(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||cf(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&(!si||s.tag!==27)&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function hf(s,l,f){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?Df(f,s,l):Cf(f,s);else if(!(y===4||si&&y===27)&&(s=s.child,s!==null))for(hf(s,l,f),s=s.sibling;s!==null;)hf(s,l,f),s=s.sibling}function Jc(s,l,f){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?Wg(f,s,l):Yg(f,s);else if(!(y===4||si&&y===27)&&(s=s.child,s!==null))for(Jc(s,l,f),s=s.sibling;s!==null;)Jc(s,l,f),s=s.sibling}function Yl(s,l,f){s=s.containerInfo;try{sm(s,f)}catch(y){Be(l,l.return,y)}}function ff(s,l){for(Ig(s.containerInfo),Ft=l;Ft!==null;)if(s=Ft,l=s.child,(s.subtreeFlags&1028)!==0&&l!==null)l.return=s,Ft=l;else for(;Ft!==null;){s=Ft;var f=s.alternate;switch(l=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if(l&1024&&f!==null){l=void 0;var y=s,S=f.memoizedProps;f=f.memoizedState;var O=y.stateNode;try{var W=Va(y.type,S,y.elementType===y.type);l=O.getSnapshotBeforeUpdate(W,f),O.__reactInternalSnapshotBeforeUpdate=l}catch(nt){Be(y,y.return,nt)}}break;case 3:l&1024&&dn&&nm(s.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(l&1024)throw Error(u(163))}if(l=s.sibling,l!==null){l.return=s.return,Ft=l;break}Ft=s.return}return W=$e,$e=!1,W}function jo(s,l,f){var y=f.flags;switch(f.tag){case 0:case 11:case 15:rr(s,f),y&4&&nc(5,f);break;case 1:if(rr(s,f),y&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(nt){Be(f,f.return,nt)}else{var S=Va(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(S,l,s.__reactInternalSnapshotBeforeUpdate)}catch(nt){Be(f,f.return,nt)}}y&64&&wg(f),y&512&&cs(f,f.return);break;case 3:if(rr(s,f),y&64&&(y=f.updateQueue,y!==null)){if(s=null,f.child!==null)switch(f.child.tag){case 27:case 5:s=eo(f.child.stateNode);break;case 1:s=f.child.stateNode}try{Hu(y,s)}catch(nt){Be(f,f.return,nt)}}break;case 26:if(Ra){rr(s,f),y&512&&cs(f,f.return);break}case 27:case 5:rr(s,f),l===null&&y&4&&of(f),y&512&&cs(f,f.return);break;case 12:rr(s,f);break;case 13:rr(s,f),y&4&&Xl(s,f);break;case 22:if(S=f.memoizedState!==null||wr,!S){l=l!==null&&l.memoizedState!==null||ne;var O=wr,W=ne;wr=S,(ne=l)&&!W?Wr(s,f,(f.subtreeFlags&8772)!==0):rr(s,f),wr=O,ne=W}y&512&&(f.memoizedProps.mode==="manual"?cs(f,f.return):Ji(f,f.return));break;default:rr(s,f)}}function $c(s){var l=s.alternate;l!==null&&(s.alternate=null,$c(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&Bg(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Pa(s,l,f){for(f=f.child;f!==null;)sr(s,l,f),f=f.sibling}function sr(s,l,f){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(au,f)}catch{}switch(f.tag){case 26:if(Ra){ne||Ji(f,l),Pa(s,l,f),f.memoizedState?zf(f.memoizedState):f.stateNode&&eu(f.stateNode);break}case 27:if(si){ne||Ji(f,l);var y=Ie,S=In;Ie=f.stateNode,Pa(s,l,f),qf(f.stateNode),Ie=y,In=S;break}case 5:ne||Ji(f,l);case 6:if(dn){if(y=Ie,S=In,Ie=null,Pa(s,l,f),Ie=y,In=S,Ie!==null)if(In)try{$g(Ie,f.stateNode)}catch(O){Be(f,l,O)}else try{Jg(Ie,f.stateNode)}catch(O){Be(f,l,O)}}else Pa(s,l,f);break;case 18:dn&&Ie!==null&&(In?Vf(Ie,f.stateNode):gm(Ie,f.stateNode));break;case 4:dn?(y=Ie,S=In,Ie=f.stateNode.containerInfo,In=!0,Pa(s,l,f),Ie=y,In=S):(fs&&Yl(f.stateNode,f,gh()),Pa(s,l,f));break;case 0:case 11:case 14:case 15:ne||Zr(2,f,l),ne||Zr(4,f,l),Pa(s,l,f);break;case 1:ne||(Ji(f,l),y=f.stateNode,typeof y.componentWillUnmount=="function"&&Wi(f,l,y)),Pa(s,l,f);break;case 21:Pa(s,l,f);break;case 22:ne||Ji(f,l),ne=(y=ne)||f.memoizedState!==null,Pa(s,l,f),ne=y;break;default:Pa(s,l,f)}}function Xl(s,l){if(na&&l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{yh(s)}catch(f){Be(l,l.return,f)}}function df(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new de),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new de),l;default:throw Error(u(435,s.tag))}}function th(s,l){var f=df(s);l.forEach(function(y){var S=sh.bind(null,s,y);f.has(y)||(f.add(y),y.then(S,S))})}function Bn(s,l){var f=l.deletions;if(f!==null)for(var y=0;y<f.length;y++){var S=f[y],O=s,W=l;if(dn){var nt=W;t:for(;nt!==null;){switch(nt.tag){case 27:case 5:Ie=nt.stateNode,In=!1;break t;case 3:Ie=nt.stateNode.containerInfo,In=!0;break t;case 4:Ie=nt.stateNode.containerInfo,In=!0;break t}nt=nt.return}if(Ie===null)throw Error(u(160));sr(O,W,S),Ie=null,In=!1}else sr(O,W,S);O=S.alternate,O!==null&&(O.return=null),S.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)gf(l,s),l=l.sibling}function gf(s,l){var f=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Bn(l,s),$i(s),y&4&&(Zr(3,s,s.return),nc(3,s),Zr(5,s,s.return));break;case 1:Bn(l,s),$i(s),y&512&&(ne||f===null||Ji(f,f.return)),y&64&&wr&&(s=s.updateQueue,s!==null&&(y=s.callbacks,y!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?y:f.concat(y))));break;case 26:if(Ra){var S=Ci;Bn(l,s),$i(s),y&512&&(ne||f===null||Ji(f,f.return)),y&4&&(y=f!==null?f.memoizedState:null,l=s.memoizedState,f===null?l===null?s.stateNode===null?s.stateNode=pm(S,s.type,s.memoizedProps,s):Pf(S,s.type,s.stateNode):s.stateNode=Lf(S,l,s.memoizedProps):y!==l?(y===null?f.stateNode!==null&&eu(f.stateNode):zf(y),l===null?Pf(S,s.type,s.stateNode):Lf(S,l,s.memoizedProps)):l===null&&s.stateNode!==null&&uf(s,s.memoizedProps,f.memoizedProps));break}case 27:if(si&&y&4&&s.alternate===null){S=s.stateNode;var O=s.memoizedProps;try{vm(S),kf(s.type,O,S,s)}catch(Ut){Be(s,s.return,Ut)}}case 5:if(Bn(l,s),$i(s),y&512&&(ne||f===null||Ji(f,f.return)),dn){if(s.flags&32){l=s.stateNode;try{dh(l)}catch(Ut){Be(s,s.return,Ut)}}y&4&&s.stateNode!=null&&(l=s.memoizedProps,uf(s,l,f!==null?f.memoizedProps:l)),y&1024&&(Xe=!0)}break;case 6:if(Bn(l,s),$i(s),y&4&&dn){if(s.stateNode===null)throw Error(u(162));y=s.memoizedProps,f=f!==null?f.memoizedProps:y,l=s.stateNode;try{Xg(l,f,y)}catch(Ut){Be(s,s.return,Ut)}}break;case 3:if(Ra?(ym(),S=Ci,Ci=$n(l.containerInfo),Bn(l,s),Ci=S):Bn(l,s),$i(s),y&4){if(dn&&na&&f!==null&&f.memoizedState.isDehydrated)try{dm(l.containerInfo)}catch(Ut){Be(s,s.return,Ut)}if(fs){y=l.containerInfo,f=l.pendingChildren;try{sm(y,f)}catch(Ut){Be(s,s.return,Ut)}}}Xe&&(Xe=!1,mf(s));break;case 4:Ra?(f=Ci,Ci=$n(s.stateNode.containerInfo),Bn(l,s),$i(s),Ci=f):(Bn(l,s),$i(s)),y&4&&fs&&Yl(s.stateNode,s,s.stateNode.pendingChildren);break;case 12:Bn(l,s),$i(s);break;case 13:Bn(l,s),$i(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Xf=Ca()),y&4&&(y=s.updateQueue,y!==null&&(s.updateQueue=null,th(s,y)));break;case 22:y&512&&(ne||f===null||Ji(f,f.return)),S=s.memoizedState!==null;var W=f!==null&&f.memoizedState!==null,nt=wr,ft=ne;if(wr=nt||S,ne=ft||W,Bn(l,s),ne=ft,wr=nt,$i(s),l=s.stateNode,l._current=s,l._visibility&=-3,l._visibility|=l._pendingVisibility&2,y&8192&&(l._visibility=S?l._visibility&-2:l._visibility|1,S&&(l=wr||ne,f===null||W||l||Fo(s)),dn&&(s.memoizedProps===null||s.memoizedProps.mode!=="manual"))){t:if(f=null,dn)for(l=s;;){if(l.tag===5||Ra&&l.tag===26||si&&l.tag===27){if(f===null){W=f=l;try{O=W.stateNode,S?tm(O):$0(W.stateNode,W.memoizedProps)}catch(Ut){Be(W,W.return,Ut)}}}else if(l.tag===6){if(f===null){W=l;try{var Tt=W.stateNode;S?em(Tt):wf(Tt,W.memoizedProps)}catch(Ut){Be(W,W.return,Ut)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break t;for(;l.sibling===null;){if(l.return===null||l.return===s)break t;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}}y&4&&(y=s.updateQueue,y!==null&&(f=y.retryQueue,f!==null&&(y.retryQueue=null,th(s,f))));break;case 19:Bn(l,s),$i(s),y&4&&(y=s.updateQueue,y!==null&&(s.updateQueue=null,th(s,y)));break;case 21:break;default:Bn(l,s),$i(s)}}function $i(s){var l=s.flags;if(l&2){try{if(dn&&(!si||s.tag!==27)){t:{for(var f=s.return;f!==null;){if(cf(f)){var y=f;break t}f=f.return}throw Error(u(160))}switch(y.tag){case 27:if(si){var S=y.stateNode,O=ic(s);Jc(s,O,S);break}case 5:var W=y.stateNode;y.flags&32&&(dh(W),y.flags&=-33);var nt=ic(s);Jc(s,nt,W);break;case 3:case 4:var ft=y.stateNode.containerInfo,Tt=ic(s);hf(s,Tt,ft);break;default:throw Error(u(161))}}}catch(Ut){Be(s,s.return,Ut)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function mf(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;mf(l),l.tag===5&&l.flags&1024&&Hg(l.stateNode),s=s.sibling}}function rr(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)jo(s,l.alternate,l),l=l.sibling}function Fo(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:Zr(4,l,l.return),Fo(l);break;case 1:Ji(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&Wi(l,l.return,f),Fo(l);break;case 26:case 27:case 5:Ji(l,l.return),Fo(l);break;case 22:Ji(l,l.return),l.memoizedState===null&&Fo(l);break;default:Fo(l)}s=s.sibling}}function Wr(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var y=l.alternate,S=s,O=l,W=O.flags;switch(O.tag){case 0:case 11:case 15:Wr(S,O,f),nc(4,O);break;case 1:if(Wr(S,O,f),y=O,S=y.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(Tt){Be(y,y.return,Tt)}if(y=O,S=y.updateQueue,S!==null){var nt=y.stateNode;try{var ft=S.shared.hiddenCallbacks;if(ft!==null)for(S.shared.hiddenCallbacks=null,S=0;S<ft.length;S++)Gu(ft[S],nt)}catch(Tt){Be(y,y.return,Tt)}}f&&W&64&&wg(O),cs(O,O.return);break;case 26:case 27:case 5:Wr(S,O,f),f&&y===null&&W&4&&of(O),cs(O,O.return);break;case 12:Wr(S,O,f);break;case 13:Wr(S,O,f),f&&W&4&&Xl(S,O);break;case 22:O.memoizedState===null&&Wr(S,O,f),cs(O,O.return);break;default:Wr(S,O,f)}l=l.sibling}}function eh(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&_n(f))}function nh(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&_n(s))}function lr(s,l,f,y){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Ba(s,l,f,y),l=l.sibling}function Ba(s,l,f,y){var S=l.flags;switch(l.tag){case 0:case 11:case 15:lr(s,l,f,y),S&2048&&nc(9,l);break;case 3:lr(s,l,f,y),S&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&_n(s)));break;case 12:if(S&2048){lr(s,l,f,y),s=l.stateNode;try{var O=l.memoizedProps,W=O.id,nt=O.onPostCommit;typeof nt=="function"&&nt(W,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ft){Be(l,l.return,ft)}}else lr(s,l,f,y);break;case 23:break;case 22:O=l.stateNode,l.memoizedState!==null?O._visibility&4?lr(s,l,f,y):ws(s,l):O._visibility&4?lr(s,l,f,y):(O._visibility|=4,ui(s,l,f,y,(l.subtreeFlags&10256)!==0)),S&2048&&eh(l.alternate,l);break;case 24:lr(s,l,f,y),S&2048&&nh(l.alternate,l);break;default:lr(s,l,f,y)}}function ui(s,l,f,y,S){for(S=S&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var O=s,W=l,nt=f,ft=y,Tt=W.flags;switch(W.tag){case 0:case 11:case 15:ui(O,W,nt,ft,S),nc(8,W);break;case 23:break;case 22:var Ut=W.stateNode;W.memoizedState!==null?Ut._visibility&4?ui(O,W,nt,ft,S):ws(O,W):(Ut._visibility|=4,ui(O,W,nt,ft,S)),S&&Tt&2048&&eh(W.alternate,W);break;case 24:ui(O,W,nt,ft,S),S&&Tt&2048&&nh(W.alternate,W);break;default:ui(O,W,nt,ft,S)}l=l.sibling}}function ws(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,y=l,S=y.flags;switch(y.tag){case 22:ws(f,y),S&2048&&eh(y.alternate,y);break;case 24:ws(f,y),S&2048&&nh(y.alternate,y);break;default:ws(f,y)}l=l.sibling}}function or(s){if(s.subtreeFlags&Al)for(s=s.child;s!==null;)ac(s),s=s.sibling}function ac(s){switch(s.tag){case 26:or(s),s.flags&Al&&(s.memoizedState!==null?Hf(Ci,s.memoizedState,s.memoizedProps):Rf(s.type,s.memoizedProps));break;case 5:or(s),s.flags&Al&&Rf(s.type,s.memoizedProps);break;case 3:case 4:if(Ra){var l=Ci;Ci=$n(s.stateNode.containerInfo),or(s),Ci=l}else or(s);break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=Al,Al=16777216,or(s),Al=l):or(s));break;default:or(s)}}function sc(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Ql(s){var l=s.deletions;if(s.flags&16){if(l!==null)for(var f=0;f<l.length;f++){var y=l[f];Ft=y,lc(y,s)}sc(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ur(s),s=s.sibling}function ur(s){switch(s.tag){case 0:case 11:case 15:Ql(s),s.flags&2048&&Zr(9,s,s.return);break;case 3:Ql(s);break;case 12:Ql(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&4&&(s.return===null||s.return.tag!==13)?(l._visibility&=-5,rc(s)):Ql(s);break;default:Ql(s)}}function rc(s){var l=s.deletions;if(s.flags&16){if(l!==null)for(var f=0;f<l.length;f++){var y=l[f];Ft=y,lc(y,s)}sc(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:Zr(8,l,l.return),rc(l);break;case 22:f=l.stateNode,f._visibility&4&&(f._visibility&=-5,rc(l));break;default:rc(l)}s=s.sibling}}function lc(s,l){for(;Ft!==null;){var f=Ft;switch(f.tag){case 0:case 11:case 15:Zr(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var y=f.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:_n(f.memoizedState.cache)}if(y=f.child,y!==null)y.return=f,Ft=y;else t:for(f=s;Ft!==null;){y=Ft;var S=y.sibling,O=y.return;if($c(y),y===f){Ft=null;break t}if(S!==null){S.return=O,Ft=S;break t}Ft=O}}}function Jr(s){var l=ch(s);if(l!=null){if(typeof l.memoizedProps["data-testname"]!="string")throw Error(u(364));return l}if(s=jg(s),s===null)throw Error(u(362));return s.stateNode.current}function ih(s,l){var f=s.tag;switch(l.$$typeof){case hn:if(s.type===l.value)return!0;break;case vs:t:{for(l=l.value,s=[s,0],f=0;f<s.length;){var y=s[f++],S=y.tag,O=s[f++],W=l[O];if(S!==5&&S!==26&&S!==27||!Us(y)){for(;W!=null&&ih(y,W);)O++,W=l[O];if(O===l.length){l=!0;break t}else for(y=y.child;y!==null;)s.push(y,O),y=y.sibling}}l=!1}return l;case Gs:if((f===5||f===26||f===27)&&Kg(s.stateNode,l.value))return!0;break;case Pi:if((f===5||f===6||f===26||f===27)&&(s=Fg(s),s!==null&&0<=s.indexOf(l.value)))return!0;break;case cu:if((f===5||f===26||f===27)&&(s=s.memoizedProps["data-testname"],typeof s=="string"&&s.toLowerCase()===l.value.toLowerCase()))return!0;break;default:throw Error(u(365))}return!1}function ta(s){switch(s.$$typeof){case hn:return"<"+(d(s.value)||"Unknown")+">";case vs:return":has("+(ta(s)||"")+")";case Gs:return'[role="'+s.value+'"]';case Pi:return'"'+s.value+'"';case cu:return'[data-testname="'+s.value+'"]';default:throw Error(u(365))}}function Zl(s,l){var f=[];s=[s,0];for(var y=0;y<s.length;){var S=s[y++],O=S.tag,W=s[y++],nt=l[W];if(O!==5&&O!==26&&O!==27||!Us(S)){for(;nt!=null&&ih(S,nt);)W++,nt=l[W];if(W===l.length)f.push(S);else for(S=S.child;S!==null;)s.push(S,W),S=S.sibling}}return f}function $r(s,l){if(!tu)throw Error(u(363));s=Jr(s),s=Zl(s,l),l=[],s=Array.from(s);for(var f=0;f<s.length;){var y=s[f++],S=y.tag;if(S===5||S===26||S===27)Us(y)||l.push(y.stateNode);else for(y=y.child;y!==null;)s.push(y),y=y.sibling}return l}function vi(){if(pe&2&&ye!==0)return ye&-ye;if(Zt.T!==null){var s=cn;return s!==0?s:ke()}return zg()}function oc(){Na===0&&(Na=!(ye&536870912)||Oe?V():536870912);var s=sa.current;return s!==null&&(s.flags|=32),Na}function rn(s,l,f){(s===Qe&&je===2||s.cancelPendingCommit!==null)&&(tl(s,0),Vi(s,ye,Na,!1)),G(s,f),(!(pe&2)||s!==Qe)&&(s===Qe&&(!(pe&2)&&(Or|=f),mn===4&&Vi(s,ye,Na,!1)),He(s))}function ba(s,l,f){if(pe&6)throw Error(u(327));var y=!f&&(l&60)===0&&(l&s.expiredLanes)===0||j(s,l),S=y?Ng(s,l):cc(s,l,!0),O=y;do{if(S===0){Xa&&!y&&Vi(s,l,0,!1);break}else if(S===6)Vi(s,l,0,!Ya);else{if(f=s.current.alternate,O&&!hr(f)){S=cc(s,l,!1),O=!1;continue}if(S===2){if(O=l,s.errorRecoveryDisabledLanes&O)var W=0;else W=s.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){l=W;t:{var nt=s;S=hu;var ft=na&&nt.current.memoizedState.isDehydrated;if(ft&&(tl(nt,W).flags|=256),W=cc(nt,W,!1),W!==2){if(ho&&!ft){nt.errorRecoveryDisabledLanes|=O,Or|=O,S=4;break t}O=Za,Za=S,O!==null&&cr(O)}S=W}if(O=!1,S!==2)continue}}if(S===1){tl(s,0),Vi(s,l,0,!0);break}t:{switch(y=s,S){case 0:case 1:throw Error(u(345));case 4:if((l&4194176)===l){Vi(y,l,Na,!Ya);break t}break;case 2:Za=null;break;case 3:case 5:break;default:throw Error(u(329))}if(y.finishedWork=f,y.finishedLanes=l,(l&62914560)===l&&(O=Xf+300-Ca(),10<O)){if(Vi(y,l,Na,!Ya),H(y,0)!==0)break t;y.timeoutHandle=uh(Ns.bind(null,y,f,Za,fo,wh,l,Na,Or,Fn,Ya,2,-0,0),O);break t}Ns(y,f,Za,fo,wh,l,Na,Or,Fn,Ya,0,-0,0)}}break}while(!0);He(s)}function cr(s){Za===null?Za=s:Za.push.apply(Za,s)}function Ns(s,l,f,y,S,O,W,nt,ft,Tt,Ut,zt,xt){var ie=l.subtreeFlags;if((ie&8192||(ie&16785408)===16785408)&&(W0(),ac(l),l=Gg(),l!==null)){s.cancelPendingCommit=l(ah.bind(null,s,f,y,S,W,nt,ft,1,zt,xt)),Vi(s,O,W,!Tt);return}ah(s,f,y,S,W,nt,ft,Ut,zt,xt)}function hr(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var y=0;y<f.length;y++){var S=f[y],O=S.getSnapshot;S=S.value;try{if(!Ii(O(),S))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Vi(s,l,f,y){l&=~Bi,l&=~Or,s.suspendedLanes|=l,s.pingedLanes&=~l,y&&(s.warmLanes|=l),y=s.expirationTimes;for(var S=l;0<S;){var O=31-On(S),W=1<<O;y[O]=-1,S&=~W}f!==0&&T(s,f,l)}function pf(){return pe&6?!0:(oi(0),!1)}function uc(){if(he!==null){if(je===0)var s=he.return;else s=he,Ka=bl=null,_a(s),oo=null,Ri=0,s=he;for(;s!==null;)Dg(s.alternate,s),s=s.return;he=null}}function tl(s,l){s.finishedWork=null,s.finishedLanes=0;var f=s.timeoutHandle;f!==$o&&(s.timeoutHandle=$o,_c(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),uc(),Qe=s,he=f=dr(s.current,null),ye=l,je=0,jn=null,Ya=!1,Xa=j(s,l),ho=!1,Fn=Na=Bi=Or=Qa=mn=0,Za=hu=null,wh=!1,l&8&&(l|=l&32);var y=s.entangledLanes;if(y!==0)for(s=s.entanglements,y&=l;0<y;){var S=31-On(y),O=1<<S;l|=s[S],y&=~O}return Es=l,oe(),f}function Ei(s,l){ee=null,Zt.H=Un,l===Ac?(l=Ys(),je=3):l===Rc?(l=Ys(),je=4):je=l===Kf?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,jn=l,he===null&&(mn=1,nr(s,dt(l,s.current)))}function ai(){var s=sa.current;return s===null?!0:(ye&4194176)===ye?ja===null:(ye&62914560)===ye||ye&536870912?s===ja:!1}function Ne(){var s=Zt.H;return Zt.H=Un,s===null?Un:s}function Ga(){var s=Zt.A;return Zt.A=Nr,s}function Ha(){mn=4,Ya||(ye&4194176)!==ye&&sa.current!==null||(Xa=!0),!(Qa&134217727)&&!(Or&134217727)||Qe===null||Vi(Qe,ye,Na,!1)}function cc(s,l,f){var y=pe;pe|=2;var S=Ne(),O=Ga();(Qe!==s||ye!==l)&&(fo=null,tl(s,l)),l=!1;var W=mn;t:do try{if(je!==0&&he!==null){var nt=he,ft=jn;switch(je){case 8:uc(),W=6;break t;case 3:case 2:case 6:sa.current===null&&(l=!0);var Tt=je;if(je=0,jn=null,Os(s,nt,ft,Tt),f&&Xa){W=0;break t}break;default:Tt=je,je=0,jn=null,Os(s,nt,ft,Tt)}}Wl(),W=mn;break}catch(Ut){Ei(s,Ut)}while(!0);return l&&s.shellSuspendCounter++,Ka=bl=null,pe=y,Zt.H=S,Zt.A=O,he===null&&(Qe=null,ye=0,oe()),W}function Wl(){for(;he!==null;)Ko(he)}function Ng(s,l){var f=pe;pe|=2;var y=Ne(),S=Ga();Qe!==s||ye!==l?(fo=null,Oa=Ca()+500,tl(s,l)):Xa=j(s,l);t:do try{if(je!==0&&he!==null){l=he;var O=jn;e:switch(je){case 1:je=0,jn=null,Os(s,l,O,1);break;case 2:if(Ks(O)){je=0,jn=null,Yo(l);break}l=function(){je===2&&Qe===s&&(je=7),He(s)},O.then(l,l);break t;case 3:je=7;break t;case 4:je=5;break t;case 7:Ks(O)?(je=0,jn=null,Yo(l)):(je=0,jn=null,Os(s,l,O,7));break;case 5:var W=null;switch(he.tag){case 26:W=he.memoizedState;case 5:case 27:var nt=he,ft=nt.type,Tt=nt.pendingProps;if(W?Gf(W):Af(ft,Tt)){je=0,jn=null;var Ut=nt.sibling;if(Ut!==null)he=Ut;else{var zt=nt.return;zt!==null?(he=zt,el(zt)):he=null}break e}}je=0,jn=null,Os(s,l,O,5);break;case 6:je=0,jn=null,Os(s,l,O,6);break;case 8:uc(),mn=6;break t;default:throw Error(u(462))}}Og();break}catch(xt){Ei(s,xt)}while(!0);return Ka=bl=null,Zt.H=y,Zt.A=S,pe=f,he!==null?0:(Qe=null,ye=0,oe(),mn)}function Og(){for(;he!==null&&!ml();)Ko(he)}function Ko(s){var l=_i(s.alternate,s,Es);s.memoizedProps=s.pendingProps,l===null?el(s):he=l}function Yo(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=Xr(f,l,l.pendingProps,l.type,void 0,ye);break;case 11:l=Xr(f,l,l.pendingProps,l.type.render,l.ref,ye);break;case 5:_a(l);default:Dg(f,l),l=he=Jl(l,Es),l=_i(f,l,Es)}s.memoizedProps=s.pendingProps,l===null?el(s):he=l}function Os(s,l,f,y){Ka=bl=null,_a(l),oo=null,Ri=0;var S=l.return;try{if(lf(s,S,l,f,ye)){mn=1,nr(s,dt(f,s.current)),he=null;return}}catch(O){if(S!==null)throw he=S,O;mn=1,nr(s,dt(f,s.current)),he=null;return}l.flags&32768?(Oe||y===1?s=!0:Xa||ye&536870912?s=!1:(Ya=s=!0,(y===2||y===3||y===6)&&(y=sa.current,y!==null&&y.tag===13&&(y.flags|=16384))),yf(l,s)):el(l)}function el(s){var l=s;do{if(l.flags&32768){yf(l,Ya);return}s=l.return;var f=Cg(l.alternate,l,Es);if(f!==null){he=f;return}if(l=l.sibling,l!==null){he=l;return}he=l=s}while(l!==null);mn===0&&(mn=5)}function yf(s,l){do{var f=K0(s.alternate,s);if(f!==null){f.flags&=32767,he=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){he=s;return}he=s=f}while(s!==null);mn=6,he=null}function ah(s,l,f,y,S,O,W,nt,ft,Tt){var Ut=Zt.T,zt=fl();try{Ui(2),Zt.T=null,Mg(s,l,f,y,zt,S,O,W,nt,ft,Tt)}finally{Zt.T=Ut,Ui(zt)}}function Mg(s,l,f,y,S,O,W,nt){do nl();while(Rl!==null);if(pe&6)throw Error(u(327));var ft=s.finishedWork;if(y=s.finishedLanes,ft===null)return null;if(s.finishedWork=null,s.finishedLanes=0,ft===s.current)throw Error(u(177));s.callbackNode=null,s.callbackPriority=0,s.cancelPendingCommit=null;var Tt=ft.lanes|ft.childLanes;if(Tt|=ps,Y(s,y,Tt,O,W,nt),s===Qe&&(he=Qe=null,ye=0),!(ft.subtreeFlags&10256)&&!(ft.flags&10256)||Mr||(Mr=!0,Nh=Tt,Nc=f,xg(iu,function(){return nl(),null})),f=(ft.flags&15990)!==0,ft.subtreeFlags&15990||f?(f=Zt.T,Zt.T=null,O=fl(),Ui(2),W=pe,pe|=4,ff(s,ft),gf(ft,s),Z0(s.containerInfo),s.current=ft,jo(s,ft.alternate,ft),Sr(),pe=W,Ui(O),Zt.T=f):s.current=ft,Mr?(Mr=!1,Rl=s,fu=y):hc(s,Tt),Tt=s.pendingLanes,Tt===0&&(ks=null),Q(ft.stateNode),He(s),l!==null)for(S=s.onRecoverableError,ft=0;ft<l.length;ft++)Tt=l[ft],S(Tt.value,{componentStack:Tt.stack});return fu&3&&nl(),Tt=s.pendingLanes,y&4194218&&Tt&42?s===Qf?go++:(go=0,Qf=s):go=0,oi(0),null}function hc(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,_n(l)))}function nl(){if(Rl!==null){var s=Rl,l=Nh;Nh=0;var f=k(fu),y=32>f?32:f;f=Zt.T;var S=fl();try{if(Ui(y),Zt.T=null,Rl===null)var O=!1;else{y=Nc,Nc=null;var W=Rl,nt=fu;if(Rl=null,fu=0,pe&6)throw Error(u(331));var ft=pe;if(pe|=4,ur(W.current),Ba(W,W.current,nt,y),pe=ft,oi(0,!1),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(au,W)}catch{}O=!0}return O}finally{Ui(S),Zt.T=f,hc(s,l)}}return!1}function Xo(s,l,f){l=dt(f,l),l=ir(s.stateNode,l,2),s=Ae(s,l,2),s!==null&&(G(s,2),He(s))}function Be(s,l,f){if(s.tag===3)Xo(s,s,f);else for(;l!==null;){if(l.tag===3){Xo(l,s,f);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(ks===null||!ks.has(y))){s=dt(f,s),f=Ta(2),y=Ae(l,f,2),y!==null&&(Qu(f,y,l,s),G(y,2),He(y));break}}l=l.return}}function il(s,l,f){var y=s.pingCache;if(y===null){y=s.pingCache=new wc;var S=new Set;y.set(l,S)}else S=y.get(l),S===void 0&&(S=new Set,y.set(l,S));S.has(f)||(ho=!0,S.add(f),s=fc.bind(null,s,l,f),l.then(s,s))}function fc(s,l,f){var y=s.pingCache;y!==null&&y.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Qe===s&&(ye&f)===f&&(mn===4||mn===3&&(ye&62914560)===ye&&300>Ca()-Xf?!(pe&2)&&tl(s,0):Bi|=f,Fn===ye&&(Fn=0)),He(s)}function dc(s,l){l===0&&(l=R()),s=le(s,l),s!==null&&(G(s,l),He(s))}function gc(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),dc(s,f)}function sh(s,l){var f=0;switch(s.tag){case 13:var y=s.stateNode,S=s.memoizedState;S!==null&&(f=S.retryLane);break;case 19:y=s.stateNode;break;case 22:y=s.stateNode._retryCache;break;default:throw Error(u(314))}y!==null&&y.delete(l),dc(s,f)}function xg(s,l){return Ls(s,l)}function Vg(s,l,f,y){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(s){return s=s.prototype,!(!s||!s.isReactComponent)}function dr(s,l){var f=s.alternate;return f===null?(f=n(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&31457280,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function Jl(s,l){s.flags&=31457282;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function $l(s,l,f,y,S,O){var W=0;if(y=s,typeof s=="function")fr(s)&&(W=1);else if(typeof s=="string")W=Ra&&si?Jn(s,f,Mn.current)?26:vh(s)?27:5:Ra?Jn(s,f,Mn.current)?26:5:si&&vh(s)?27:5;else t:switch(s){case rl:return al(f.children,S,O,l);case to:W=8,S|=24;break;case ll:return s=n(12,f,l,S|2),s.elementType=ll,s.lanes=O,s;case pr:return s=n(13,f,l,S),s.elementType=pr,s.lanes=O,s;case pc:return s=n(19,f,l,S),s.elementType=pc,s.lanes=O,s;case _r:return rh(f,S,O,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case X0:case ol:W=10;break t;case Ef:W=9;break t;case lh:W=11;break t;case Zo:W=14;break t;case yr:W=16,y=null;break t}W=29,f=Error(u(130,s===null?"null":typeof s,"")),y=null}return l=n(W,f,l,S),l.elementType=s,l.type=y,l.lanes=O,l}function al(s,l,f,y){return s=n(7,s,y,l),s.lanes=f,s}function rh(s,l,f,y){s=n(22,s,y,l),s.elementType=_r,s.lanes=f;var S={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var O=S._current;if(O===null)throw Error(u(456));if(!(S._pendingVisibility&2)){var W=le(O,2);W!==null&&(S._pendingVisibility|=2,rn(W,O,2))}},attach:function(){var O=S._current;if(O===null)throw Error(u(456));if(S._pendingVisibility&2){var W=le(O,2);W!==null&&(S._pendingVisibility&=-3,rn(W,O,2))}}};return s.stateNode=S,s}function mc(s,l,f){return s=n(6,s,null,l),s.lanes=f,s}function ea(s,l,f){return l=n(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function Ms(s,l,f,y,S,O,W,nt){this.tag=1,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=$o,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=x(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=x(0),this.hiddenUpdates=x(null),this.identifierPrefix=y,this.onUncaughtError=S,this.onCaughtError=O,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=nt,this.incompleteTransitions=new Map}function gr(s,l,f,y,S,O,W,nt,ft,Tt,Ut,zt){return s=new Ms(s,l,f,W,nt,ft,Tt,zt),l=1,O===!0&&(l|=24),O=n(3,null,null,l),s.current=O,O.stateNode=s,l=ve(),l.refCount++,s.pooledCache=l,l.refCount++,O.memoizedState={element:y,isDehydrated:f,cache:l},ga(O),s}function _f(s){return s?(s=ro,s):ro}function mr(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(u(188)):(s=Object.keys(s).join(","),Error(u(268,s)));return s=w(l),s=s!==null?M(s):null,s===null?null:eo(s.stateNode)}function xs(s,l,f,y,S,O){S=_f(S),y.context===null?y.context=S:y.pendingContext=S,y=an(l),y.payload={element:f},O=O===void 0?null:O,O!==null&&(y.callback=O),f=Ae(s,y,l),f!==null&&(rn(f,s,l),ma(f,s,l))}function Gn(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function Qo(s,l){Gn(s,l),(s=s.alternate)&&Gn(s,l)}var me={},Y0=b0(),Aa=D1(),wn=Object.assign,vf=Symbol.for("react.element"),sl=Symbol.for("react.transitional.element"),Vs=Symbol.for("react.portal"),rl=Symbol.for("react.fragment"),to=Symbol.for("react.strict_mode"),ll=Symbol.for("react.profiler"),X0=Symbol.for("react.provider"),Ef=Symbol.for("react.consumer"),ol=Symbol.for("react.context"),lh=Symbol.for("react.forward_ref"),pr=Symbol.for("react.suspense"),pc=Symbol.for("react.suspense_list"),Zo=Symbol.for("react.memo"),yr=Symbol.for("react.lazy"),_r=Symbol.for("react.offscreen"),ce=Symbol.for("react.memo_cache_sentinel"),qe=Symbol.iterator,Hn=Symbol.for("react.client.reference"),Zt=Y0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ul,cl,Wo=!1,hl=Array.isArray,Jo=t.rendererVersion,Q0=t.rendererPackageName,Tn=t.extraDevToolsConfig,eo=t.getPublicInstance,Sf=t.getRootHostContext,Ug=t.getChildHostContext,Ig=t.prepareForCommit,Z0=t.resetAfterCommit,Tf=t.createInstance,yc=t.appendInitialChild,oh=t.finalizeInitialChildren,ci=t.shouldSetTextContent,Nn=t.createTextInstance,uh=t.scheduleTimeout,_c=t.cancelTimeout,$o=t.noTimeout,hs=t.isPrimaryRenderer;t.warnsIfNotActing;var dn=t.supportsMutation,fs=t.supportsPersistence,na=t.supportsHydration,ch=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var Lg=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Ui=t.setCurrentUpdatePriority,fl=t.getCurrentUpdatePriority,zg=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var Pg=t.shouldAttemptEagerTransition,Bg=t.detachDeletedInstance;t.requestPostPaintCallback;var bf=t.maySuspendCommit,Af=t.preloadInstance,W0=t.startSuspendingCommit,Rf=t.suspendInstance,Gg=t.waitForCommitToBeReady,no=t.NotPendingTransition,vr=t.HostTransitionContext,Hg=t.resetFormInstance;t.bindToConsole;var kg=t.supportsMicrotasks,qg=t.scheduleMicrotask,tu=t.supportsTestSelectors,jg=t.findFiberRoot,J0=t.getBoundingRect,Fg=t.getTextContent,Us=t.isHiddenSubtree,Kg=t.matchAccessibilityRole,hh=t.setFocusIfFocusable,fh=t.setupIntersectionObserver,Yg=t.appendChild,Cf=t.appendChildToContainer,Xg=t.commitTextUpdate,Qg=t.commitMount,Zg=t.commitUpdate,Wg=t.insertBefore,Df=t.insertInContainerBefore,Jg=t.removeChild,$g=t.removeChildFromContainer,dh=t.resetTextContent,tm=t.hideInstance,em=t.hideTextInstance,$0=t.unhideInstance,wf=t.unhideTextInstance,nm=t.clearContainer,im=t.cloneInstance,gh=t.createContainerChildSet,Nf=t.appendChildToContainerChildSet,am=t.finalizeContainerChildren,sm=t.replaceContainerChildren,rm=t.cloneHiddenInstance,Of=t.cloneHiddenTextInstance,io=t.isSuspenseInstancePending,vc=t.isSuspenseInstanceFallback,mh=t.getSuspenseInstanceFallbackErrorDetails,lm=t.registerSuspenseInstanceRetry,om=t.canHydrateFormStateMarker,Is=t.isFormStateMarkerMatching,dl=t.getNextHydratableSibling,Er=t.getFirstHydratableChild,ao=t.getFirstHydratableChildWithinContainer,Mf=t.getFirstHydratableChildWithinSuspenseInstance,xf=t.canHydrateInstance,um=t.canHydrateTextInstance,cm=t.canHydrateSuspenseInstance,so=t.hydrateInstance,ph=t.hydrateTextInstance,hm=t.hydrateSuspenseInstance,fm=t.getNextHydratableInstanceAfterSuspenseInstance,dm=t.commitHydratedContainer,yh=t.commitHydratedSuspenseInstance,gm=t.clearSuspenseBoundary,Vf=t.clearSuspenseBoundaryFromContainer,Uf=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var mm=t.validateHydratableInstance,tp=t.validateHydratableTextInstance,Ra=t.supportsResources,Jn=t.isHostHoistableType,$n=t.getHoistableRoot,If=t.getResource,Lf=t.acquireResource,zf=t.releaseResource,pm=t.hydrateHoistable,Pf=t.mountHoistable,eu=t.unmountHoistable,Bf=t.createHoistableInstance,ym=t.prepareToCommitHoistables,_m=t.mayResourceSuspendCommit,Gf=t.preloadResource,Hf=t.suspendResource,si=t.supportsSingletons,_h=t.resolveSingletonInstance,vm=t.clearSingleton,kf=t.acquireSingletonInstance,qf=t.releaseSingletonInstance,vh=t.isHostSingletonType,Eh=[],gl=-1,ro={},On=Math.clz32?Math.clz32:N,jf=Math.log,ep=Math.LN2,Ec=128,nu=4194304,Ls=Aa.unstable_scheduleCallback,ds=Aa.unstable_cancelCallback,ml=Aa.unstable_shouldYield,Sr=Aa.unstable_requestPaint,Ca=Aa.unstable_now,Sh=Aa.unstable_ImmediatePriority,Sc=Aa.unstable_UserBlockingPriority,iu=Aa.unstable_NormalPriority,lo=Aa.unstable_IdlePriority,Si=Aa.log,Th=Aa.unstable_setDisableYieldValue,au=null,kn=null,Ii=typeof Object.is=="function"?Object.is:at,bh=new WeakMap,Da=[],wa=0,pl=null,su=0,ia=[],Ti=0,gs=null,zs=1,Ps="",Mn=P(null),ka=P(null),Tr=P(null),Tc=P(null),xn=null,Ye=null,Oe=!1,qa=null,ms=!1,bc=Error(u(519)),aa=[],br=0,ps=0,un=null,yl=null,Ah=!1,Vn=!1,Rh=!1,ru=0,lu=null,Ch=0,cn=0,ri=null,bi=!1,Dh=!1,Em=Object.prototype.hasOwnProperty,Ac=Error(u(460)),Rc=Error(u(474)),Li={then:function(){}},Ai=null,oo=null,Ri=0,_l=En(!0),Bs=En(!1),ys=P(null),_s=P(0),sa=P(null),ja=null,ln=P(0),Ar=0,ee=null,Ue=null,gn=null,Rr=!1,uo=!1,vl=!1,El=0,ou=0,Cr=null,Sm=0,Ff=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Un={readContext:ot,use:sn,useCallback:ue,useContext:ue,useEffect:ue,useImperativeHandle:ue,useLayoutEffect:ue,useInsertionEffect:ue,useMemo:ue,useReducer:ue,useRef:ue,useState:ue,useDebugValue:ue,useDeferredValue:ue,useTransition:ue,useSyncExternalStore:ue,useId:ue};Un.useCacheRefresh=ue,Un.useMemoCache=ue,Un.useHostTransitionStatus=ue,Un.useFormState=ue,Un.useActionState=ue,Un.useOptimistic=ue;var Dr={readContext:ot,use:sn,useCallback:function(s,l){return Sn().memoizedState=[s,l===void 0?null:l],s},useContext:ot,useEffect:Ku,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,Vo(4194308,4,ss.bind(null,l,s),f)},useLayoutEffect:function(s,l){return Vo(4194308,4,s,l)},useInsertionEffect:function(s,l){Vo(4,2,s,l)},useMemo:function(s,l){var f=Sn();l=l===void 0?null:l;var y=s();if(vl){$(!0);try{s()}finally{$(!1)}}return f.memoizedState=[y,l],y},useReducer:function(s,l,f){var y=Sn();if(f!==void 0){var S=f(l);if(vl){$(!0);try{f(l)}finally{$(!1)}}}else S=l;return y.memoizedState=y.baseState=S,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:S},y.queue=s,s=s.dispatch=er.bind(null,ee,s),[y.memoizedState,s]},useRef:function(s){var l=Sn();return s={current:s},l.memoizedState=s},useState:function(s){s=Xi(s);var l=s.queue,f=Io.bind(null,ee,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:Hr,useDeferredValue:function(s,l){var f=Sn();return rs(f,s,l)},useTransition:function(){var s=Xi(!1);return s=Yu.bind(null,ee,s.queue,!0,!1),Sn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var y=ee,S=Sn();if(Oe){if(f===void 0)throw Error(u(407));f=f()}else{if(f=l(),Qe===null)throw Error(u(349));ye&60||Oo(y,l,f)}S.memoizedState=f;var O={value:f,getSnapshot:l};return S.queue=O,Ku(Fu.bind(null,y,O,s),[s]),y.flags|=2048,va(9,Mo.bind(null,y,O,f,l),{destroy:void 0},null),f},useId:function(){var s=Sn(),l=Qe.identifierPrefix;if(Oe){var f=Ps,y=zs;f=(y&~(1<<32-On(y)-1)).toString(32)+f,l=":"+l+"R"+f,f=El++,0<f&&(l+="H"+f.toString(32)),l+=":"}else f=Sm++,l=":"+l+"r"+f.toString(32)+":";return s.memoizedState=l},useCacheRefresh:function(){return Sn().memoizedState=jr.bind(null,ee)}};Dr.useMemoCache=zl,Dr.useHostTransitionStatus=Qi,Dr.useFormState=tr,Dr.useActionState=tr,Dr.useOptimistic=function(s){var l=Sn();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=xa.bind(null,ee,!0,f),f.dispatch=l,[s,l]};var zi={readContext:ot,use:sn,useCallback:Rs,useContext:ot,useEffect:Bl,useImperativeHandle:Sa,useInsertionEffect:Yc,useLayoutEffect:Xc,useMemo:Cs,useReducer:mi,useRef:Ea,useState:function(){return mi(Yi)},useDebugValue:Hr,useDeferredValue:function(s,l){var f=Je();return Uo(f,Ue.memoizedState,s,l)},useTransition:function(){var s=mi(Yi)[0],l=Je().memoizedState;return[typeof s=="boolean"?s:Ma(s),l]},useSyncExternalStore:jc,useId:qr};zi.useCacheRefresh=ls,zi.useMemoCache=zl,zi.useHostTransitionStatus=Qi,zi.useFormState=Pr,zi.useActionState=Pr,zi.useOptimistic=function(s,l){var f=Je();return yi(f,Ue,s,l)};var Sl={readContext:ot,use:sn,useCallback:Rs,useContext:ot,useEffect:Bl,useImperativeHandle:Sa,useInsertionEffect:Yc,useLayoutEffect:Xc,useMemo:Cs,useReducer:xi,useRef:Ea,useState:function(){return xi(Yi)},useDebugValue:Hr,useDeferredValue:function(s,l){var f=Je();return Ue===null?rs(f,s,l):Uo(f,Ue.memoizedState,s,l)},useTransition:function(){var s=xi(Yi)[0],l=Je().memoizedState;return[typeof s=="boolean"?s:Ma(s),l]},useSyncExternalStore:jc,useId:qr};Sl.useCacheRefresh=ls,Sl.useMemoCache=zl,Sl.useHostTransitionStatus=Qi,Sl.useFormState=Br,Sl.useActionState=Br,Sl.useOptimistic=function(s,l){var f=Je();return Ue!==null?yi(f,Ue,s,l):(f.baseState=s,[s,f.queue.dispatch])};var uu={isMounted:function(s){return(s=s._reactInternals)?D(s)===s:!1},enqueueSetState:function(s,l,f){s=s._reactInternals;var y=vi(),S=an(y);S.payload=l,f!=null&&(S.callback=f),l=Ae(s,S,y),l!==null&&(rn(l,s,y),ma(l,s,y))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var y=vi(),S=an(y);S.tag=1,S.payload=l,f!=null&&(S.callback=f),l=Ae(s,S,y),l!==null&&(rn(l,s,y),ma(l,s,y))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=vi(),y=an(f);y.tag=2,l!=null&&(y.callback=l),l=Ae(s,y,f),l!==null&&(rn(l,s,f),ma(l,s,f))}},Tl=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Kf=Error(u(461)),qn=!1,Cc={dehydrated:null,treeContext:null,retryLane:0},Fa=P(null),bl=null,Ka=null,Dc=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,y){s.push(y)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},vn=Aa.unstable_scheduleCallback,np=Aa.unstable_NormalPriority,bn={$$typeof:ol,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Yf=Zt.S;Zt.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&Qn(s,l),Yf!==null&&Yf(s,l)};var co=P(null),wr=!1,ne=!1,Xe=!1,de=typeof WeakSet=="function"?WeakSet:Set,Ft=null,$e=!1,Ie=null,In=!1,Ci=null,Al=8192,Nr={getCacheForType:function(s){var l=ot(bn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f}},hn=0,vs=1,Gs=2,cu=3,Pi=4;if(typeof Symbol=="function"&&Symbol.for){var Hs=Symbol.for;hn=Hs("selector.component"),vs=Hs("selector.has_pseudo_class"),Gs=Hs("selector.role"),cu=Hs("selector.test_id"),Pi=Hs("selector.text")}var wc=typeof WeakMap=="function"?WeakMap:Map,pe=0,Qe=null,he=null,ye=0,je=0,jn=null,Ya=!1,Xa=!1,ho=!1,Es=0,mn=0,Qa=0,Or=0,Bi=0,Na=0,Fn=0,hu=null,Za=null,wh=!1,Xf=0,Oa=1/0,fo=null,ks=null,Mr=!1,Rl=null,fu=0,Nh=0,Nc=null,go=0,Qf=null;return me.attemptContinuousHydration=function(s){if(s.tag===13){var l=le(s,67108864);l!==null&&rn(l,s,67108864),Qo(s,67108864)}},me.attemptHydrationAtCurrentPriority=function(s){if(s.tag===13){var l=vi(),f=le(s,l);f!==null&&rn(f,s,l),Qo(s,l)}},me.attemptSynchronousHydration=function(s){switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var l=z(s.pendingLanes);if(l!==0){for(s.pendingLanes|=2,s.entangledLanes|=2;l;){var f=1<<31-On(l);s.entanglements[1]|=f,l&=~f}He(s),!(pe&6)&&(Oa=Ca()+500,oi(0))}}break;case 13:l=le(s,2),l!==null&&rn(l,s,2),pf(),Qo(s,2)}},me.batchedUpdates=function(s,l){return s(l)},me.createComponentSelector=function(s){return{$$typeof:hn,value:s}},me.createContainer=function(s,l,f,y,S,O,W,nt,ft,Tt){return gr(s,l,!1,null,f,y,O,W,nt,ft,Tt,null)},me.createHasPseudoClassSelector=function(s){return{$$typeof:vs,value:s}},me.createHydrationContainer=function(s,l,f,y,S,O,W,nt,ft,Tt,Ut,zt,xt){return s=gr(f,y,!0,s,S,O,nt,ft,Tt,Ut,zt,xt),s.context=_f(null),f=s.current,y=vi(),S=an(y),S.callback=l??null,Ae(f,S,y),s.current.lanes=y,G(s,y),He(s),s},me.createPortal=function(s,l,f){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vs,key:y==null?null:""+y,children:s,containerInfo:l,implementation:f}},me.createRoleSelector=function(s){return{$$typeof:Gs,value:s}},me.createTestNameSelector=function(s){return{$$typeof:cu,value:s}},me.createTextSelector=function(s){return{$$typeof:Pi,value:s}},me.defaultOnCaughtError=function(s){console.error(s)},me.defaultOnRecoverableError=function(s){Tl(s)},me.defaultOnUncaughtError=function(s){Tl(s)},me.deferredUpdates=function(s){var l=Zt.T,f=fl();try{return Ui(32),Zt.T=null,s()}finally{Ui(f),Zt.T=l}},me.discreteUpdates=function(s,l,f,y,S){var O=Zt.T,W=fl();try{return Ui(2),Zt.T=null,s(l,f,y,S)}finally{Ui(W),Zt.T=O,pe===0&&(Oa=Ca()+500)}},me.findAllNodes=$r,me.findBoundingRects=function(s,l){if(!tu)throw Error(u(363));l=$r(s,l),s=[];for(var f=0;f<l.length;f++)s.push(J0(l[f]));for(l=s.length-1;0<l;l--){f=s[l];for(var y=f.x,S=y+f.width,O=f.y,W=O+f.height,nt=l-1;0<=nt;nt--)if(l!==nt){var ft=s[nt],Tt=ft.x,Ut=Tt+ft.width,zt=ft.y,xt=zt+ft.height;if(y>=Tt&&O>=zt&&S<=Ut&&W<=xt){s.splice(l,1);break}else if(y!==Tt||f.width!==ft.width||xt<O||zt>W){if(!(O!==zt||f.height!==ft.height||Ut<y||Tt>S)){Tt>y&&(ft.width+=Tt-y,ft.x=y),Ut<S&&(ft.width=S-Tt),s.splice(l,1);break}}else{zt>O&&(ft.height+=zt-O,ft.y=O),xt<W&&(ft.height=W-zt),s.splice(l,1);break}}}return s},me.findHostInstance=mr,me.findHostInstanceWithNoPortals=function(s){return s=w(s),s=s!==null?I(s):null,s===null?null:eo(s.stateNode)},me.findHostInstanceWithWarning=function(s){return mr(s)},me.flushPassiveEffects=nl,me.flushSyncFromReconciler=function(s){var l=pe;pe|=1;var f=Zt.T,y=fl();try{if(Ui(2),Zt.T=null,s)return s()}finally{Ui(y),Zt.T=f,pe=l,!(pe&6)&&oi(0)}},me.flushSyncWork=pf,me.focusWithin=function(s,l){if(!tu)throw Error(u(363));for(s=Jr(s),l=Zl(s,l),l=Array.from(l),s=0;s<l.length;){var f=l[s++],y=f.tag;if(!Us(f)){if((y===5||y===26||y===27)&&hh(f.stateNode))return!0;for(f=f.child;f!==null;)l.push(f),f=f.sibling}}return!1},me.getFindAllNodesFailureDescription=function(s,l){if(!tu)throw Error(u(363));var f=0,y=[];s=[Jr(s),0];for(var S=0;S<s.length;){var O=s[S++],W=O.tag,nt=s[S++],ft=l[nt];if((W!==5&&W!==26&&W!==27||!Us(O))&&(ih(O,ft)&&(y.push(ta(ft)),nt++,nt>f&&(f=nt)),nt<l.length))for(O=O.child;O!==null;)s.push(O,nt),O=O.sibling}if(f<l.length){for(s=[];f<l.length;f++)s.push(ta(l[f]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+s.join(" > ")}return null},me.getPublicRootInstance=function(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 27:case 5:return eo(s.child.stateNode);default:return s.child.stateNode}},me.injectIntoDevTools=function(){var s={bundleType:0,version:Jo,rendererPackageName:Q0,currentDispatcherRef:Zt,findFiberByHostInstance:ch,reconcilerVersion:"19.0.0"};if(Tn!==null&&(s.rendererConfig=Tn),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")s=!1;else{var l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(l.isDisabled||!l.supportsFiber)s=!0;else{try{au=l.inject(s),kn=l}catch{}s=!!l.checkDCE}}return s},me.isAlreadyRendering=function(){return!1},me.observeVisibleRects=function(s,l,f,y){if(!tu)throw Error(u(363));s=$r(s,l);var S=fh(s,f,y).disconnect;return{disconnect:function(){S()}}},me.shouldError=function(){return null},me.shouldSuspend=function(){return!1},me.startHostTransition=function(s,l,f,y){if(s.tag!==5)throw Error(u(476));var S=kr(s).queue;Yu(s,S,l,no,f===null?r:function(){var O=kr(s).next.queue;return Zi(s,O,{},vi()),f(y)})},me.updateContainer=function(s,l,f,y){var S=l.current,O=vi();return xs(S,O,s,l,f,y),O},me.updateContainerSync=function(s,l,f,y){return l.tag===0&&nl(),xs(l.current,2,s,l,f,y),2},me},a.exports.default=a.exports,Object.defineProperty(a.exports,"__esModule",{value:!0})}(Hp)),Hp.exports}var v2;function aS(){return v2||(v2=1,Gp.exports=iS()),Gp.exports}var sS=aS();const rS=C1(sS);var kp={exports:{}},vo={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E2;function lS(){return E2||(E2=1,vo.ConcurrentRoot=1,vo.ContinuousEventPriority=8,vo.DefaultEventPriority=32,vo.DiscreteEventPriority=2,vo.IdleEventPriority=268435456,vo.LegacyRoot=0,vo.NoEventPriority=0),vo}var S2;function oS(){return S2||(S2=1,kp.exports=lS()),kp.exports}var x1=oS(),uS=_e();const T2={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let b2=!1,A2=!1;const V1=".react-konva-event",cS=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,hS=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,fS={};function C0(a,t,n=fS){if(!b2&&"zIndex"in t&&(console.warn(hS),b2=!0),!A2&&t.draggable){var r=t.x!==void 0||t.y!==void 0,u=t.onDragEnd||t.onDragMove;r&&!u&&(console.warn(cS),A2=!0)}for(var c in n)if(!T2[c]){var d=c.slice(0,2)==="on",m=n[c]!==t[c];if(d&&m){var _=c.substr(2).toLowerCase();_.substr(0,7)==="content"&&(_="content"+_.substr(7,1).toUpperCase()+_.substr(8)),a.off(_,n[c])}var v=!t.hasOwnProperty(c);v&&a.setAttr(c,void 0)}var b=t._useStrictMode,D={},U=!1;const w={};for(var c in t)if(!T2[c]){var d=c.slice(0,2)==="on",M=n[c]!==t[c];if(d&&M){var _=c.substr(2).toLowerCase();_.substr(0,7)==="content"&&(_="content"+_.substr(7,1).toUpperCase()+_.substr(8)),t[c]&&(w[_]=t[c])}!d&&(t[c]!==n[c]||b&&t[c]!==a.getAttr(c))&&(U=!0,D[c]=t[c])}U&&(a.setAttrs(D),zu(a));for(var _ in w)a.on(_+V1,w[_])}function zu(a){if(!uS.Konva.autoDrawEnabled){var t=a.getLayer()||a.getStage();t&&t.batchDraw()}}var qp=D1();const r4={},dS={};a0.Node.prototype._applyProps=C0;let D0=x1.DefaultEventPriority;function gS(a,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}a.add(t),zu(a)}function mS(a,t,n){let r=a0[a];r||(console.error(`Konva has no node with the type ${a}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${a}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=a0.Group);const u={},c={};for(var d in t){var m=d.slice(0,2)==="on";m?c[d]=t[d]:u[d]=t[d]}const _=new r(u);return C0(_,c),_}function pS(a,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${a}"`)}function yS(a,t,n){return!1}function _S(a){return a}function vS(){return null}function ES(){return null}function SS(a,t,n,r){return dS}function TS(){}function bS(a){}function AS(a,t){return!1}function RS(){return r4}function CS(){return r4}const DS=setTimeout,wS=clearTimeout,NS=-1;function OS(a,t){return!1}const MS=!1,xS=!0,VS=!0,US=!1,IS=!1;function LS(a,t){t.parent===a?t.moveToTop():a.add(t),zu(a)}function zS(a,t){t.parent===a?t.moveToTop():a.add(t),zu(a)}function l4(a,t,n){t._remove(),a.add(t),t.setZIndex(n.getZIndex()),zu(a)}function PS(a,t,n){l4(a,t,n)}function BS(a,t){t.destroy(),t.off(V1),zu(a)}function GS(a,t){t.destroy(),t.off(V1),zu(a)}function HS(a,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function kS(a,t,n){}function qS(a,t,n,r){C0(a,r,n)}function jS(a){a.hide(),zu(a)}function FS(a){}function KS(a,t){(t.visible==null||t.visible)&&a.show()}function YS(a,t){}function XS(a){}function QS(){}function ZS(){return D0}function WS(){}function JS(){return null}function $S(a){D0=a}function t6(){return D0}function e6(){return D0||x1.DefaultEventPriority}function n6(){return!1}function i6(){}function a6(){return!1}function s6(){return!0}function r6(){}function l6(){}function o6(){return null}const u6=null;function c6(){}const h6=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:u6,appendChild:LS,appendChildToContainer:zS,appendInitialChild:gS,cancelTimeout:wS,clearContainer:XS,commitMount:kS,commitTextUpdate:HS,commitUpdate:qS,createInstance:mS,createTextInstance:pS,detachDeletedInstance:QS,finalizeInitialChildren:yS,getChildHostContext:CS,getCurrentEventPriority:ZS,getCurrentUpdatePriority:t6,getInstanceFromScope:JS,getPublicInstance:_S,getRootHostContext:RS,hideInstance:jS,hideTextInstance:FS,idlePriority:qp.unstable_IdlePriority,insertBefore:l4,insertInContainerBefore:PS,isPrimaryRenderer:MS,maySuspendCommit:a6,noTimeout:NS,now:qp.unstable_now,preloadInstance:s6,prepareForCommit:vS,preparePortalMount:ES,prepareScopeUpdate:WS,prepareUpdate:SS,removeChild:BS,removeChildFromContainer:GS,requestPostPaintCallback:i6,resetAfterCommit:TS,resetFormInstance:c6,resetTextContent:bS,resolveUpdatePriority:e6,run:qp.unstable_runWithPriority,scheduleTimeout:DS,setCurrentUpdatePriority:$S,shouldAttemptEagerTransition:n6,shouldDeprioritizeSubtree:AS,shouldSetTextContent:OS,startSuspendingCommit:r6,supportsHydration:IS,supportsMutation:VS,supportsPersistence:US,suspendInstance:l6,unhideInstance:KS,unhideTextInstance:YS,waitForCommitToBeReady:o6,warnsIfNotActing:xS},Symbol.toStringTag,{value:"Module"}));var f6=Object.defineProperty,d6=Object.defineProperties,g6=Object.getOwnPropertyDescriptors,R2=Object.getOwnPropertySymbols,m6=Object.prototype.hasOwnProperty,p6=Object.prototype.propertyIsEnumerable,C2=(a,t,n)=>t in a?f6(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,D2=(a,t)=>{for(var n in t||(t={}))m6.call(t,n)&&C2(a,n,t[n]);if(R2)for(var n of R2(t))p6.call(t,n)&&C2(a,n,t[n]);return a},y6=(a,t)=>d6(a,g6(t)),w2,N2;typeof window<"u"&&((w2=window.document)!=null&&w2.createElement||((N2=window.navigator)==null?void 0:N2.product)==="ReactNative")?ze.useLayoutEffect:ze.useEffect;function o4(a,t,n){if(!a)return;if(n(a)===!0)return a;let r=a.child;for(;r;){const u=o4(r,t,n);if(u)return u;r=r.sibling}}function u4(a){try{return Object.defineProperties(a,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return a}}const O2=console.error;console.error=function(){const a=[...arguments].join("");if(a!=null&&a.startsWith("Warning:")&&a.includes("useContext")){console.error=O2;return}return O2.apply(this,arguments)};const U1=u4(ze.createContext(null));class c4 extends ze.Component{render(){return ze.createElement(U1.Provider,{value:this._reactInternals},this.props.children)}}function _6(){const a=ze.useContext(U1);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=ze.useId();return ze.useMemo(()=>{for(const r of[a,a==null?void 0:a.alternate]){if(!r)continue;const u=o4(r,!1,c=>{let d=c.memoizedState;for(;d;){if(d.memoizedState===t)return!0;d=d.next}});if(u)return u}},[a,t])}function v6(){const a=_6(),[t]=ze.useState(()=>new Map);t.clear();let n=a;for(;n;){if(n.type&&typeof n.type=="object"){const u=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;u&&u!==U1&&!t.has(u)&&t.set(u,ze.useContext(u4(u)))}n=n.return}return t}function E6(){const a=v6();return ze.useMemo(()=>Array.from(a.keys()).reduce((t,n)=>r=>ze.createElement(t,null,ze.createElement(n.Provider,y6(D2({},r),{value:a.get(n)}))),t=>ze.createElement(c4,D2({},t))),[a])}if(ua.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function S6(a){const t=ua.useRef({});return ua.useLayoutEffect(()=>{t.current=a}),ua.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const T6=a=>{const t=ua.useRef(null),n=ua.useRef(null),r=ua.useRef(null),u=S6(a),c=E6(),d=m=>{const{forwardedRef:_}=a;_&&(typeof _=="function"?_(m):_.current=m)};return ua.useLayoutEffect(()=>(n.current=new a0.Stage({width:a.width,height:a.height,container:t.current}),d(n.current),r.current=Qd.createContainer(n.current,x1.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),Qd.updateContainer(ua.createElement(c,{},a.children),r.current,null,()=>{}),()=>{d(null),Qd.updateContainer(null,r.current,null),n.current.destroy()}),[]),ua.useLayoutEffect(()=>{d(n.current),C0(n.current,a,u),Qd.updateContainer(ua.createElement(c,{},a.children),r.current,null)}),ua.createElement("div",{ref:t,id:a.id,accessKey:a.accessKey,className:a.className,role:a.role,style:a.style,tabIndex:a.tabIndex,title:a.title})},b6="Layer",A6="Line",R6="Path",Qd=rS(h6);Qd.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:ua.version,rendererPackageName:"react-konva"});const C6=ua.forwardRef((a,t)=>ua.createElement(c4,{},ua.createElement(T6,{...a,forwardedRef:t}))),I1=a=>{const t=a.filter((v,b)=>b%2===0),n=a.filter((v,b)=>b%2===1),r=Math.min(...t),u=Math.max(...t),c=Math.min(...n),d=Math.max(...n),m=u-r||1,_=d-c||1;return a.map((v,b)=>b%2===0?(v-r)/m:(v-c)/_)},D6=a=>{const t=a.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g);let n=0,r=0;const u=[];return t==null||t.forEach(c=>{const d=c[0],m=c.slice(1).trim().split(/[\s,]+/).map(Number).filter(_=>!isNaN(_));d==="M"||d==="L"?(n=m[0],r=m[1],u.push(n,r)):d==="H"?(n=m[0],u.push(n,r)):d==="V"&&(r=m[0],u.push(n,r))}),I1(u)},M2=a=>{if([...new Set(a)].length<=2){console.warn("Very simple shape detected. Scaling to default range.");const n=Math.min(...a),r=Math.max(...a)||1;return a.map(u=>(u-n)/(r-n))}return I1(a)},x2=(a,t)=>a.length<t?[...a,...Array(t-a.length).fill(0)]:a,V2=(a,t,n=10)=>{const r=Math.max(a.length,t.length),u=x2(a,r),c=x2(t,r),d=u.reduce((b,D,U)=>b+Math.pow(D-c[U],2),0),_=Math.sqrt(d)/r,v=Math.max(0,1-_*n);return Math.min(v)},U2=(a,t)=>{const n=(a.length-1)/(t-1);return Array.from({length:t},(r,u)=>{const c=u*n,d=Math.floor(c),m=Math.min(d+1,a.length-1),_=c-d;return a[d]*(1-_)+a[m]*_})},w6=(a,t)=>{if(a.length<2||t.length<2)return console.warn("Insufficient points to calculate similarity"),0;const n=M2(a),r=M2(t);if(n.every(b=>b===0)||r.every(b=>b===0))return console.warn("One or both normalized paths are entirely zeros. Using fallback similarity."),V2(n,r);const u=Math.max(n.length,r.length),c=U2(n,u),d=U2(r,u),m=c.reduce((b,D,U)=>b+D*d[U],0),_=Math.sqrt(c.reduce((b,D)=>b+D*D,0)),v=Math.sqrt(d.reduce((b,D)=>b+D*D,0));return _===0||v===0?(console.warn("One or both paths have zero magnitude. Using fallback similarity."),V2(n,r)):m/(_*v)},N6=({svgPath:a,onComplete:t})=>{const[n,r]=ze.useState([]),[u,c]=ze.useState(!1),[d,m]=ze.useState(!1),[_,v]=ze.useState(null),b=400,D=400,U=C=>C.x>=0&&C.x<=b&&C.y>=0&&C.y<=D,w=C=>{const N=C.target.getStage().getPointerPosition();U(N)&&(c(!0),d||r([...n,{points:[N.x,N.y]}]))},M=C=>{if(!u)return;const N=C.target.getStage().getPointerPosition();if(U(N))if(d){const z=n.map(H=>{const j=[];for(let q=0;q<H.points.length;q+=2){const V=H.points[q],R=H.points[q+1];Math.hypot(N.x-V,N.y-R)>=10&&j.push(V,R)}return{points:j}}).filter(H=>H.points.length>0);r(z)}else{const z=n[n.length-1],H=n.slice(0,n.length-1);H.push({points:[...z.points,N.x,N.y]}),r(H)}},I=()=>{c(!1)},P=()=>{if(n.length===0){v("Please draw something on the canvas before submitting!"),setTimeout(()=>v(null),3e3);return}const C=n.flatMap(q=>q.points),N=I1(C),z=D6(a),H=w6(N,z),j=H>.5;v(j?`Great job! Similarity: ${(H*100).toFixed(2)}%`:`Keep practicing! Similarity: ${(H*100).toFixed(2)}%`),setTimeout(()=>{v(null),t(j,H)},2e3)},K=()=>{m(C=>!C)};return Yt.jsxs("div",{style:Mc.container,children:[Yt.jsx(C6,{width:b,height:D,onMouseDown:w,onMouseMove:M,onMouseUp:I,style:{border:"1px solid black"},children:Yt.jsxs(b6,{children:[Yt.jsx(R6,{data:a,stroke:"gray",strokeWidth:4,lineJoin:"round",x:150,y:100}),n.map((C,N)=>Yt.jsx(A6,{points:C.points,stroke:"black",strokeWidth:6,tension:.5,lineCap:"round"},N))]})}),Yt.jsxs("div",{style:Mc.controls,children:[Yt.jsx("button",{style:d?Mc.activeButton:Mc.button,onClick:K,children:d?"Disable Eraser":"Enable Eraser"}),Yt.jsx("button",{style:Mc.button,onClick:P,children:"Done Tracing"})]}),_&&Yt.jsx("div",{style:Mc.feedbackPopup,children:Yt.jsx("p",{style:Mc.feedbackText,children:_})})]})},Mc={container:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},controls:{display:"flex",gap:"10px",marginTop:"10px"},button:{padding:"10px 20px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",transition:"background-color 0.3s ease"},activeButton:{padding:"10px 20px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",transition:"background-color 0.3s ease"},backButton:{padding:"10px 20px",backgroundColor:"#6c757d",color:"#fff",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",transition:"background-color 0.3s ease"},feedbackPopup:{marginTop:"20px",padding:"15px 20px",borderRadius:"8px",backgroundColor:"#ffffff",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",border:"2px solid #ccc",textAlign:"center"},feedbackText:{fontSize:"18px",fontWeight:"bold",color:"#333"}},O6=({path:a,width:t=400,height:n=400,viewBox:r="-100 -100 300 400"})=>Yt.jsx("div",{style:{...I2.svgWrapper,width:`${t}px`,height:`${n}px`},children:Yt.jsx("svg",{width:"100%",height:"100%",viewBox:r,preserveAspectRatio:"xMidYMid meet",xmlns:"http://www.w3.org/2000/svg",style:I2.svg,children:Yt.jsx("path",{d:a,stroke:"black",strokeWidth:"8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})}),I2={svgWrapper:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px",border:"4px dotted #A6C3BB",borderRadius:"16px",background:"#E6F2ED",boxShadow:"4px 4px 0px rgba(0, 0, 0, 0.2)"},svg:{display:"block",maxWidth:"100%",maxHeight:"100%",filter:"drop-shadow(2px 4px 6px rgba(0, 0, 0, 0.2))"}};var L2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=function(a){const t=[];let n=0;for(let r=0;r<a.length;r++){let u=a.charCodeAt(r);u<128?t[n++]=u:u<2048?(t[n++]=u>>6|192,t[n++]=u&63|128):(u&64512)===55296&&r+1<a.length&&(a.charCodeAt(r+1)&64512)===56320?(u=65536+((u&1023)<<10)+(a.charCodeAt(++r)&1023),t[n++]=u>>18|240,t[n++]=u>>12&63|128,t[n++]=u>>6&63|128,t[n++]=u&63|128):(t[n++]=u>>12|224,t[n++]=u>>6&63|128,t[n++]=u&63|128)}return t},M6=function(a){const t=[];let n=0,r=0;for(;n<a.length;){const u=a[n++];if(u<128)t[r++]=String.fromCharCode(u);else if(u>191&&u<224){const c=a[n++];t[r++]=String.fromCharCode((u&31)<<6|c&63)}else if(u>239&&u<365){const c=a[n++],d=a[n++],m=a[n++],_=((u&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(_>>10)),t[r++]=String.fromCharCode(56320+(_&1023))}else{const c=a[n++],d=a[n++];t[r++]=String.fromCharCode((u&15)<<12|(c&63)<<6|d&63)}}return t.join("")},f4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,t){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let u=0;u<a.length;u+=3){const c=a[u],d=u+1<a.length,m=d?a[u+1]:0,_=u+2<a.length,v=_?a[u+2]:0,b=c>>2,D=(c&3)<<4|m>>4;let U=(m&15)<<2|v>>6,w=v&63;_||(w=64,d||(U=64)),r.push(n[b],n[D],n[U],n[w])}return r.join("")},encodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(a):this.encodeByteArray(h4(a),t)},decodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(a):M6(this.decodeStringToByteArray(a,t))},decodeStringToByteArray(a,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let u=0;u<a.length;){const c=n[a.charAt(u++)],m=u<a.length?n[a.charAt(u)]:0;++u;const v=u<a.length?n[a.charAt(u)]:64;++u;const D=u<a.length?n[a.charAt(u)]:64;if(++u,c==null||m==null||v==null||D==null)throw new x6;const U=c<<2|m>>4;if(r.push(U),v!==64){const w=m<<4&240|v>>2;if(r.push(w),D!==64){const M=v<<6&192|D;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class x6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V6=function(a){const t=h4(a);return f4.encodeByteArray(t,!0)},s0=function(a){return V6(a).replace(/\./g,"")},d4=function(a){try{return f4.decodeString(a,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=()=>U6().__FIREBASE_DEFAULTS__,L6=()=>{if(typeof process>"u"||typeof L2>"u")return;const a=L2.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},z6=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=a&&d4(a[1]);return t&&JSON.parse(t)},w0=()=>{try{return I6()||L6()||z6()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},g4=a=>{var t,n;return(n=(t=w0())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[a]},P6=a=>{const t=g4(a);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},m4=()=>{var a;return(a=w0())===null||a===void 0?void 0:a.config},p4=a=>{var t;return(t=w0())===null||t===void 0?void 0:t[`_${a}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(a,t){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",u=a.iat||0,c=a.sub||a.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:u,exp:u+3600,auth_time:u,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},a);return[s0(JSON.stringify(n)),s0(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function H6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fa())}function k6(){var a;const t=(a=w0())===null||a===void 0?void 0:a.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function q6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function j6(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function F6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function K6(){const a=fa();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function Y6(){return!k6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X6(){try{return typeof indexedDB=="object"}catch{return!1}}function Q6(){return new Promise((a,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(r);u.onsuccess=()=>{u.result.close(),n||self.indexedDB.deleteDatabase(r),a(!0)},u.onupgradeneeded=()=>{n=!1},u.onerror=()=>{var c;t(((c=u.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6="FirebaseError";class No extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Z6,Object.setPrototypeOf(this,No.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pg.prototype.create)}}class pg{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},u=`${this.service}/${t}`,c=this.errors[t],d=c?W6(c,r):"Error",m=`${this.serviceName}: ${d} (${u}).`;return new No(u,m,r)}}function W6(a,t){return a.replace(J6,(n,r)=>{const u=t[r];return u!=null?String(u):`<${r}?>`})}const J6=/\{\$([^}]+)}/g;function $6(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}function r0(a,t){if(a===t)return!0;const n=Object.keys(a),r=Object.keys(t);for(const u of n){if(!r.includes(u))return!1;const c=a[u],d=t[u];if(z2(c)&&z2(d)){if(!r0(c,d))return!1}else if(c!==d)return!1}for(const u of r)if(!n.includes(u))return!1;return!0}function z2(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(a){const t=[];for(const[n,r]of Object.entries(a))Array.isArray(r)?r.forEach(u=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(u))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Zd(a){const t={};return a.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[u,c]=r.split("=");t[decodeURIComponent(u)]=decodeURIComponent(c)}}),t}function Wd(a){const t=a.indexOf("?");if(!t)return"";const n=a.indexOf("#",t);return a.substring(t,n>0?n:void 0)}function tT(a,t){const n=new eT(a,t);return n.subscribe.bind(n)}class eT{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let u;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");nT(t,["next","error","complete"])?u=t:u={next:t,error:n,complete:r},u.next===void 0&&(u.next=jp),u.error===void 0&&(u.error=jp),u.complete===void 0&&(u.complete=jp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?u.error(this.finalError):u.complete()}catch{}}),this.observers.push(u),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nT(a,t){if(typeof a!="object"||a===null)return!1;for(const n of t)if(n in a&&typeof a[n]=="function")return!0;return!1}function jp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(a){return a&&a._delegate?a._delegate:a}class Ic{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new B6;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:n});u&&r.resolve(u)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),u=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(u)return null;throw c}else{if(u)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(sT(t))try{this.getOrInitializeService({instanceIdentifier:Vc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:u});r.resolve(c)}catch{}}}}clearInstance(t=Vc){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Vc){return this.instances.has(t)}getOptions(t=Vc){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);r===m&&d.resolve(u)}return u}onInit(t,n){var r;const u=this.normalizeInstanceIdentifier(n),c=(r=this.onInitCallbacks.get(u))!==null&&r!==void 0?r:new Set;c.add(t),this.onInitCallbacks.set(u,c);const d=this.instances.get(u);return d&&t(d,u),()=>{c.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const u of r)try{u(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aT(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Vc){return this.component?this.component.multipleInstances?t:Vc:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aT(a){return a===Vc?void 0:a}function sT(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new iT(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(De||(De={}));const lT={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},oT=De.INFO,uT={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},cT=(a,t,...n)=>{if(t<a.logLevel)return;const r=new Date().toISOString(),u=uT[t];if(u)console[u](`[${r}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class L1{constructor(t){this.name=t,this._logLevel=oT,this._logHandler=cT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in De))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?lT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...t),this._logHandler(this,De.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...t),this._logHandler(this,De.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,De.INFO,...t),this._logHandler(this,De.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,De.WARN,...t),this._logHandler(this,De.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...t),this._logHandler(this,De.ERROR,...t)}}const hT=(a,t)=>t.some(n=>a instanceof n);let P2,B2;function fT(){return P2||(P2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dT(){return B2||(B2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const y4=new WeakMap,i1=new WeakMap,_4=new WeakMap,Fp=new WeakMap,z1=new WeakMap;function gT(a){const t=new Promise((n,r)=>{const u=()=>{a.removeEventListener("success",c),a.removeEventListener("error",d)},c=()=>{n(Cu(a.result)),u()},d=()=>{r(a.error),u()};a.addEventListener("success",c),a.addEventListener("error",d)});return t.then(n=>{n instanceof IDBCursor&&y4.set(n,a)}).catch(()=>{}),z1.set(t,a),t}function mT(a){if(i1.has(a))return;const t=new Promise((n,r)=>{const u=()=>{a.removeEventListener("complete",c),a.removeEventListener("error",d),a.removeEventListener("abort",d)},c=()=>{n(),u()},d=()=>{r(a.error||new DOMException("AbortError","AbortError")),u()};a.addEventListener("complete",c),a.addEventListener("error",d),a.addEventListener("abort",d)});i1.set(a,t)}let a1={get(a,t,n){if(a instanceof IDBTransaction){if(t==="done")return i1.get(a);if(t==="objectStoreNames")return a.objectStoreNames||_4.get(a);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cu(a[t])},set(a,t,n){return a[t]=n,!0},has(a,t){return a instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in a}};function pT(a){a1=a(a1)}function yT(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=a.call(Kp(this),t,...n);return _4.set(r,t.sort?t.sort():[t]),Cu(r)}:dT().includes(a)?function(...t){return a.apply(Kp(this),t),Cu(y4.get(this))}:function(...t){return Cu(a.apply(Kp(this),t))}}function _T(a){return typeof a=="function"?yT(a):(a instanceof IDBTransaction&&mT(a),hT(a,fT())?new Proxy(a,a1):a)}function Cu(a){if(a instanceof IDBRequest)return gT(a);if(Fp.has(a))return Fp.get(a);const t=_T(a);return t!==a&&(Fp.set(a,t),z1.set(t,a)),t}const Kp=a=>z1.get(a);function vT(a,t,{blocked:n,upgrade:r,blocking:u,terminated:c}={}){const d=indexedDB.open(a,t),m=Cu(d);return r&&d.addEventListener("upgradeneeded",_=>{r(Cu(d.result),_.oldVersion,_.newVersion,Cu(d.transaction),_)}),n&&d.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),m.then(_=>{c&&_.addEventListener("close",()=>c()),u&&_.addEventListener("versionchange",v=>u(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const ET=["get","getKey","getAll","getAllKeys","count"],ST=["put","add","delete","clear"],Yp=new Map;function G2(a,t){if(!(a instanceof IDBDatabase&&!(t in a)&&typeof t=="string"))return;if(Yp.get(t))return Yp.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,u=ST.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(u||ET.includes(n)))return;const c=async function(d,...m){const _=this.transaction(d,u?"readwrite":"readonly");let v=_.store;return r&&(v=v.index(m.shift())),(await Promise.all([v[n](...m),u&&_.done]))[0]};return Yp.set(t,c),c}pT(a=>({...a,get:(t,n,r)=>G2(t,n)||a.get(t,n,r),has:(t,n)=>!!G2(t,n)||a.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function bT(a){const t=a.getComponent();return(t==null?void 0:t.type)==="VERSION"}const s1="@firebase/app",H2="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new L1("@firebase/app"),AT="@firebase/app-compat",RT="@firebase/analytics-compat",CT="@firebase/analytics",DT="@firebase/app-check-compat",wT="@firebase/app-check",NT="@firebase/auth",OT="@firebase/auth-compat",MT="@firebase/database",xT="@firebase/data-connect",VT="@firebase/database-compat",UT="@firebase/functions",IT="@firebase/functions-compat",LT="@firebase/installations",zT="@firebase/installations-compat",PT="@firebase/messaging",BT="@firebase/messaging-compat",GT="@firebase/performance",HT="@firebase/performance-compat",kT="@firebase/remote-config",qT="@firebase/remote-config-compat",jT="@firebase/storage",FT="@firebase/storage-compat",KT="@firebase/firestore",YT="@firebase/vertexai",XT="@firebase/firestore-compat",QT="firebase",ZT="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="[DEFAULT]",WT={[s1]:"fire-core",[AT]:"fire-core-compat",[CT]:"fire-analytics",[RT]:"fire-analytics-compat",[wT]:"fire-app-check",[DT]:"fire-app-check-compat",[NT]:"fire-auth",[OT]:"fire-auth-compat",[MT]:"fire-rtdb",[xT]:"fire-data-connect",[VT]:"fire-rtdb-compat",[UT]:"fire-fn",[IT]:"fire-fn-compat",[LT]:"fire-iid",[zT]:"fire-iid-compat",[PT]:"fire-fcm",[BT]:"fire-fcm-compat",[GT]:"fire-perf",[HT]:"fire-perf-compat",[kT]:"fire-rc",[qT]:"fire-rc-compat",[jT]:"fire-gcs",[FT]:"fire-gcs-compat",[KT]:"fire-fst",[XT]:"fire-fst-compat",[YT]:"fire-vertex","fire-js":"fire-js",[QT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=new Map,JT=new Map,l1=new Map;function k2(a,t){try{a.container.addComponent(t)}catch(n){Ro.debug(`Component ${t.name} failed to register with FirebaseApp ${a.name}`,n)}}function Kh(a){const t=a.name;if(l1.has(t))return Ro.debug(`There were multiple attempts to register component ${t}.`),!1;l1.set(t,a);for(const n of l0.values())k2(n,a);for(const n of JT.values())k2(n,a);return!0}function P1(a,t){const n=a.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),a.container.getProvider(t)}function wl(a){return a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Du=new pg("app","Firebase",$T);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ic("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Du.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=ZT;function v4(a,t={}){let n=a;typeof t!="object"&&(t={name:t});const r=Object.assign({name:r1,automaticDataCollectionEnabled:!1},t),u=r.name;if(typeof u!="string"||!u)throw Du.create("bad-app-name",{appName:String(u)});if(n||(n=m4()),!n)throw Du.create("no-options");const c=l0.get(u);if(c){if(r0(n,c.options)&&r0(r,c.config))return c;throw Du.create("duplicate-app",{appName:u})}const d=new rT(u);for(const _ of l1.values())d.addComponent(_);const m=new t9(n,r,d);return l0.set(u,m),m}function E4(a=r1){const t=l0.get(a);if(!t&&a===r1&&m4())return v4();if(!t)throw Du.create("no-app",{appName:a});return t}function wu(a,t,n){var r;let u=(r=WT[a])!==null&&r!==void 0?r:a;n&&(u+=`-${n}`);const c=u.match(/\s|\//),d=t.match(/\s|\//);if(c||d){const m=[`Unable to register library "${u}" with version "${t}":`];c&&m.push(`library name "${u}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ro.warn(m.join(" "));return}Kh(new Ic(`${u}-version`,()=>({library:u,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e9="firebase-heartbeat-database",n9=1,lg="firebase-heartbeat-store";let Xp=null;function S4(){return Xp||(Xp=vT(e9,n9,{upgrade:(a,t)=>{switch(t){case 0:try{a.createObjectStore(lg)}catch(n){console.warn(n)}}}}).catch(a=>{throw Du.create("idb-open",{originalErrorMessage:a.message})})),Xp}async function i9(a){try{const n=(await S4()).transaction(lg),r=await n.objectStore(lg).get(T4(a));return await n.done,r}catch(t){if(t instanceof No)Ro.warn(t.message);else{const n=Du.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ro.warn(n.message)}}}async function q2(a,t){try{const r=(await S4()).transaction(lg,"readwrite");await r.objectStore(lg).put(t,T4(a)),await r.done}catch(n){if(n instanceof No)Ro.warn(n.message);else{const r=Du.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ro.warn(r.message)}}}function T4(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=1024,s9=30*24*60*60*1e3;class r9{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new o9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=j2();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:u}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const m=new Date(d.date).valueOf();return Date.now()-m<=s9}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ro.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=j2(),{heartbeatsToSend:r,unsentEntries:u}=l9(this._heartbeatsCache.heartbeats),c=s0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,u.length>0?(this._heartbeatsCache.heartbeats=u,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Ro.warn(n),""}}}function j2(){return new Date().toISOString().substring(0,10)}function l9(a,t=a9){const n=[];let r=a.slice();for(const u of a){const c=n.find(d=>d.agent===u.agent);if(c){if(c.dates.push(u.date),F2(n)>t){c.dates.pop();break}}else if(n.push({agent:u.agent,dates:[u.date]}),F2(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class o9{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return X6()?Q6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await i9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const u=await this.read();return q2(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:u.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const u=await this.read();return q2(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:u.lastSentHeartbeatDate,heartbeats:[...u.heartbeats,...t.heartbeats]})}else return}}function F2(a){return s0(JSON.stringify({version:2,heartbeats:a})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(a){Kh(new Ic("platform-logger",t=>new TT(t),"PRIVATE")),Kh(new Ic("heartbeat",t=>new r9(t),"PRIVATE")),wu(s1,H2,a),wu(s1,H2,"esm2017"),wu("fire-js","")}u9("");var c9="firebase",h9="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wu(c9,h9,"app");function B1(a,t){var n={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&t.indexOf(r)<0&&(n[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,r=Object.getOwnPropertySymbols(a);u<r.length;u++)t.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(a,r[u])&&(n[r[u]]=a[r[u]]);return n}function b4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const f9=b4,A4=new pg("auth","Firebase",b4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new L1("@firebase/auth");function d9(a,...t){o0.logLevel<=De.WARN&&o0.warn(`Auth (${tf}): ${a}`,...t)}function Xm(a,...t){o0.logLevel<=De.ERROR&&o0.error(`Auth (${tf}): ${a}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(a,...t){throw G1(a,...t)}function Nl(a,...t){return G1(a,...t)}function R4(a,t,n){const r=Object.assign(Object.assign({},f9()),{[t]:n});return new pg("auth","Firebase",r).create(t,{appName:a.name})}function bo(a){return R4(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function G1(a,...t){if(typeof a!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=a.name),a._errorFactory.create(n,...r)}return A4.create(a,...t)}function Jt(a,t,...n){if(!a)throw G1(t,...n)}function Eo(a){const t="INTERNAL ASSERTION FAILED: "+a;throw Xm(t),new Error(t)}function Co(a,t){a||Eo(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.href)||""}function g9(){return K2()==="http:"||K2()==="https:"}function K2(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(g9()||j6()||"connection"in navigator)?navigator.onLine:!0}function p9(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(t,n){this.shortDelay=t,this.longDelay=n,Co(n>t,"Short delay should be less than long delay!"),this.isMobile=H6()||F6()}get(){return m9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(a,t){Co(a.emulator,"Emulator should always be set here");const{url:n}=a.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Eo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Eo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Eo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=new _g(3e4,6e4);function Pu(a,t){return a.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:a.tenantId}):t}async function Bu(a,t,n,r,u={}){return D4(a,u,async()=>{let c={},d={};r&&(t==="GET"?d=r:c={body:JSON.stringify(r)});const m=yg(Object.assign({key:a.config.apiKey},d)).slice(1),_=await a._getAdditionalHeaders();_["Content-Type"]="application/json",a.languageCode&&(_["X-Firebase-Locale"]=a.languageCode);const v=Object.assign({method:t,headers:_},c);return q6()||(v.referrerPolicy="no-referrer"),C4.fetch()(w4(a,a.config.apiHost,n,m),v)})}async function D4(a,t,n){a._canInitEmulator=!1;const r=Object.assign(Object.assign({},y9),t);try{const u=new E9(a),c=await Promise.race([n(),u.promise]);u.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Gm(a,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[_,v]=m.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gm(a,"credential-already-in-use",d);if(_==="EMAIL_EXISTS")throw Gm(a,"email-already-in-use",d);if(_==="USER_DISABLED")throw Gm(a,"user-disabled",d);const b=r[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw R4(a,b,v);Ir(a,b)}}catch(u){if(u instanceof No)throw u;Ir(a,"network-request-failed",{message:String(u)})}}async function vg(a,t,n,r,u={}){const c=await Bu(a,t,n,r,u);return"mfaPendingCredential"in c&&Ir(a,"multi-factor-auth-required",{_serverResponse:c}),c}function w4(a,t,n,r){const u=`${t}${n}?${r}`;return a.config.emulator?H1(a.config,u):`${a.config.apiScheme}://${u}`}function v9(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class E9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Nl(this.auth,"network-request-failed")),_9.get())})}}function Gm(a,t,n){const r={appName:a.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const u=Nl(a,t,r);return u.customData._tokenResponse=n,u}function Y2(a){return a!==void 0&&a.enterprise!==void 0}class S9{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return v9(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function T9(a,t){return Bu(a,"GET","/v2/recaptchaConfig",Pu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b9(a,t){return Bu(a,"POST","/v1/accounts:delete",t)}async function N4(a,t){return Bu(a,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(a){if(a)try{const t=new Date(Number(a));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function A9(a,t=!1){const n=ts(a),r=await n.getIdToken(t),u=k1(r);Jt(u&&u.exp&&u.auth_time&&u.iat,n.auth,"internal-error");const c=typeof u.firebase=="object"?u.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:u,token:r,authTime:eg(Qp(u.auth_time)),issuedAtTime:eg(Qp(u.iat)),expirationTime:eg(Qp(u.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Qp(a){return Number(a)*1e3}function k1(a){const[t,n,r]=a.split(".");if(t===void 0||n===void 0||r===void 0)return Xm("JWT malformed, contained fewer than 3 sections"),null;try{const u=d4(n);return u?JSON.parse(u):(Xm("Failed to decode base64 JWT payload"),null)}catch(u){return Xm("Caught error parsing JWT payload as JSON",u==null?void 0:u.toString()),null}}function X2(a){const t=k1(a);return Jt(t,"internal-error"),Jt(typeof t.exp<"u","internal-error"),Jt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function og(a,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof No&&R9(r)&&a.auth.currentUser===a&&await a.auth.signOut(),r}}function R9({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const u=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,u)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=eg(this.lastLoginAt),this.creationTime=eg(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u0(a){var t;const n=a.auth,r=await a.getIdToken(),u=await og(a,N4(n,{idToken:r}));Jt(u==null?void 0:u.users.length,n,"internal-error");const c=u.users[0];a._notifyReloadListener(c);const d=!((t=c.providerUserInfo)===null||t===void 0)&&t.length?O4(c.providerUserInfo):[],m=w9(a.providerData,d),_=a.isAnonymous,v=!(a.email&&c.passwordHash)&&!(m!=null&&m.length),b=_?v:!1,D={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:m,metadata:new u1(c.createdAt,c.lastLoginAt),isAnonymous:b};Object.assign(a,D)}async function D9(a){const t=ts(a);await u0(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function w9(a,t){return[...a.filter(r=>!t.some(u=>u.providerId===r.providerId)),...t]}function O4(a){return a.map(t=>{var{providerId:n}=t,r=B1(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N9(a,t){const n=await D4(a,{},async()=>{const r=yg({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:u,apiKey:c}=a.config,d=w4(a,u,"/v1/token",`key=${c}`),m=await a._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",C4.fetch()(d,{method:"POST",headers:m,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function O9(a,t){return Bu(a,"POST","/v2/accounts:revokeToken",Pu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Jt(t.idToken,"internal-error"),Jt(typeof t.idToken<"u","internal-error"),Jt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):X2(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Jt(t.length!==0,"internal-error");const n=X2(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Jt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:u,expiresIn:c}=await N9(t,n);this.updateTokensAndExpiration(r,u,Number(c))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:u,expirationTime:c}=n,d=new kh;return r&&(Jt(typeof r=="string","internal-error",{appName:t}),d.refreshToken=r),u&&(Jt(typeof u=="string","internal-error",{appName:t}),d.accessToken=u),c&&(Jt(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new kh,this.toJSON())}_performRefresh(){return Eo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(a,t){Jt(typeof a=="string"||typeof a>"u","internal-error",{appName:t})}class So{constructor(t){var{uid:n,auth:r,stsTokenManager:u}=t,c=B1(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new C9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=u,this.accessToken=u.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new u1(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(t){const n=await og(this,this.stsTokenManager.getToken(this.auth,t));return Jt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return A9(this,t)}reload(){return D9(this)}_assign(t){this!==t&&(Jt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new So(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Jt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await u0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wl(this.auth.app))return Promise.reject(bo(this.auth));const t=await this.getIdToken();return await og(this,b9(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,u,c,d,m,_,v,b;const D=(r=n.displayName)!==null&&r!==void 0?r:void 0,U=(u=n.email)!==null&&u!==void 0?u:void 0,w=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,M=(d=n.photoURL)!==null&&d!==void 0?d:void 0,I=(m=n.tenantId)!==null&&m!==void 0?m:void 0,P=(_=n._redirectEventId)!==null&&_!==void 0?_:void 0,K=(v=n.createdAt)!==null&&v!==void 0?v:void 0,C=(b=n.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:N,emailVerified:z,isAnonymous:H,providerData:j,stsTokenManager:q}=n;Jt(N&&q,t,"internal-error");const V=kh.fromJSON(this.name,q);Jt(typeof N=="string",t,"internal-error"),Eu(D,t.name),Eu(U,t.name),Jt(typeof z=="boolean",t,"internal-error"),Jt(typeof H=="boolean",t,"internal-error"),Eu(w,t.name),Eu(M,t.name),Eu(I,t.name),Eu(P,t.name),Eu(K,t.name),Eu(C,t.name);const R=new So({uid:N,auth:t,email:U,emailVerified:z,displayName:D,isAnonymous:H,photoURL:M,phoneNumber:w,tenantId:I,stsTokenManager:V,createdAt:K,lastLoginAt:C});return j&&Array.isArray(j)&&(R.providerData=j.map(x=>Object.assign({},x))),P&&(R._redirectEventId=P),R}static async _fromIdTokenResponse(t,n,r=!1){const u=new kh;u.updateFromServerResponse(n);const c=new So({uid:n.localId,auth:t,stsTokenManager:u,isAnonymous:r});return await u0(c),c}static async _fromGetAccountInfoResponse(t,n,r){const u=n.users[0];Jt(u.localId!==void 0,"internal-error");const c=u.providerUserInfo!==void 0?O4(u.providerUserInfo):[],d=!(u.email&&u.passwordHash)&&!(c!=null&&c.length),m=new kh;m.updateFromIdToken(r);const _=new So({uid:u.localId,auth:t,stsTokenManager:m,isAnonymous:d}),v={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:c,metadata:new u1(u.createdAt,u.lastLoginAt),isAnonymous:!(u.email&&u.passwordHash)&&!(c!=null&&c.length)};return Object.assign(_,v),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=new Map;function To(a){Co(a instanceof Function,"Expected a class definition");let t=Q2.get(a);return t?(Co(t instanceof a,"Instance stored in cache mismatched with class"),t):(t=new a,Q2.set(a,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}M4.type="NONE";const Z2=M4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(a,t,n){return`firebase:${a}:${t}:${n}`}class qh{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:u,name:c}=this.auth;this.fullUserKey=Qm(this.userKey,u.apiKey,c),this.fullPersistenceKey=Qm("persistence",u.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?So._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new qh(To(Z2),t,r);const u=(await Promise.all(n.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let c=u[0]||To(Z2);const d=Qm(r,t.config.apiKey,t.name);let m=null;for(const v of n)try{const b=await v._get(d);if(b){const D=So._fromJSON(t,b);v!==c&&(m=D),c=v;break}}catch{}const _=u.filter(v=>v._shouldAllowMigration);return!c._shouldAllowMigration||!_.length?new qh(c,t,r):(c=_[0],m&&await c._set(d,m.toJSON()),await Promise.all(n.map(async v=>{if(v!==c)try{await v._remove(d)}catch{}})),new qh(c,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(a){const t=a.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(I4(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(x4(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(z4(t))return"Blackberry";if(P4(t))return"Webos";if(V4(t))return"Safari";if((t.includes("chrome/")||U4(t))&&!t.includes("edge/"))return"Chrome";if(L4(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=a.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function x4(a=fa()){return/firefox\//i.test(a)}function V4(a=fa()){const t=a.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function U4(a=fa()){return/crios\//i.test(a)}function I4(a=fa()){return/iemobile/i.test(a)}function L4(a=fa()){return/android/i.test(a)}function z4(a=fa()){return/blackberry/i.test(a)}function P4(a=fa()){return/webos/i.test(a)}function q1(a=fa()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function M9(a=fa()){var t;return q1(a)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function x9(){return K6()&&document.documentMode===10}function B4(a=fa()){return q1(a)||L4(a)||P4(a)||z4(a)||/windows phone/i.test(a)||I4(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(a,t=[]){let n;switch(a){case"Browser":n=W2(fa());break;case"Worker":n=`${W2(fa())}-${a}`;break;default:n=a}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${tf}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=c=>new Promise((d,m)=>{try{const _=t(c);d(_)}catch(_){m(_)}});r.onAbort=n,this.queue.push(r);const u=this.queue.length-1;return()=>{this.queue[u]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const u of n)try{u()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U9(a,t={}){return Bu(a,"GET","/v2/passwordPolicy",Pu(a,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9=6;class L9{constructor(t){var n,r,u,c;const d=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:I9,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(u=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&u!==void 0?u:"",this.forceUpgradeOnSignin=(c=t.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,u,c,d,m;const _={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,_),this.validatePasswordCharacterOptions(t,_),_.isValid&&(_.isValid=(n=_.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),_.isValid&&(_.isValid=(r=_.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),_.isValid&&(_.isValid=(u=_.containsLowercaseLetter)!==null&&u!==void 0?u:!0),_.isValid&&(_.isValid=(c=_.containsUppercaseLetter)!==null&&c!==void 0?c:!0),_.isValid&&(_.isValid=(d=_.containsNumericCharacter)!==null&&d!==void 0?d:!0),_.isValid&&(_.isValid=(m=_.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),_}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,u=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),u&&(n.meetsMaxPasswordLength=t.length<=u)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let u=0;u<t.length;u++)r=t.charAt(u),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,u,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=u)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(t,n,r,u){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=u,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new J2(this),this.idTokenSubscription=new J2(this),this.beforeStateQueue=new V9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=A4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=u.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=To(n)),this._initializationPromise=this.queue(async()=>{var r,u;if(!this._deleted&&(this.persistenceManager=await qh.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await N4(this,{idToken:t}),r=await So._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(wl(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let u=r,c=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=u==null?void 0:u._redirectEventId,_=await this.tryRedirectSignIn(t);(!d||d===m)&&(_!=null&&_.user)&&(u=_.user,c=!0)}if(!u)return this.directlySetCurrentUser(null);if(!u._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(u)}catch(d){u=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return u?this.reloadAndSetCurrentUserOrClear(u):this.directlySetCurrentUser(null)}return Jt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===u._redirectEventId?this.directlySetCurrentUser(u):this.reloadAndSetCurrentUserOrClear(u)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await u0(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=p9()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(wl(this.app))return Promise.reject(bo(this));const n=t?ts(t):null;return n&&Jt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Jt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return wl(this.app)?Promise.reject(bo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return wl(this.app)?Promise.reject(bo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(To(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await U9(this),n=new L9(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new pg("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await O9(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&To(t)||this._popupRedirectResolver;Jt(n,this,"argument-error"),this.redirectPersistenceManager=await qh.create(this,[To(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,u){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Jt(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const _=t.addObserver(n,r,u);return()=>{d=!0,_()}}else{const _=t.addObserver(n);return()=>{d=!0,_()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Jt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=G4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const u=await this._getAppCheckToken();return u&&(n["X-Firebase-AppCheck"]=u),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&d9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Bc(a){return ts(a)}class J2{constructor(t){this.auth=t,this.observer=null,this.addObserver=tT(n=>this.observer=n)}get next(){return Jt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function P9(a){N0=a}function H4(a){return N0.loadJS(a)}function B9(){return N0.recaptchaEnterpriseScript}function G9(){return N0.gapiScript}function H9(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class k9{constructor(){this.enterprise=new q9}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class q9{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const j9="recaptcha-enterprise",k4="NO_RECAPTCHA";class F9{constructor(t){this.type=j9,this.auth=Bc(t)}async verify(t="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{T9(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(_=>{if(_.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const v=new S9(_);return c.tenantId==null?c._agentRecaptchaConfig=v:c._tenantRecaptchaConfigs[c.tenantId]=v,d(v.siteKey)}}).catch(_=>{m(_)})})}function u(c,d,m){const _=window.grecaptcha;Y2(_)?_.enterprise.ready(()=>{_.enterprise.execute(c,{action:t}).then(v=>{d(v)}).catch(()=>{d(k4)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new k9().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{r(this.auth).then(m=>{if(!n&&Y2(window.grecaptcha))u(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let _=B9();_.length!==0&&(_+=m),H4(_).then(()=>{u(m,c,d)}).catch(v=>{d(v)})}}).catch(m=>{d(m)})})}}async function $2(a,t,n,r=!1,u=!1){const c=new F9(a);let d;if(u)d=k4;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const m=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const _=m.phoneEnrollmentInfo.phoneNumber,v=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:_,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const _=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function c1(a,t,n,r,u){var c;if(!((c=a._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await $2(a,t,n,n==="getOobCode");return r(a,d)}else return r(a,t).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await $2(a,t,n,n==="getOobCode");return r(a,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(a,t){const n=P1(a,"auth");if(n.isInitialized()){const u=n.getImmediate(),c=n.getOptions();if(r0(c,t??{}))return u;Ir(u,"already-initialized")}return n.initialize({options:t})}function Y9(a,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(To);t!=null&&t.errorMap&&a._updateErrorMap(t.errorMap),a._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function X9(a,t,n){const r=Bc(a);Jt(r._canInitEmulator,r,"emulator-config-failed"),Jt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const u=!1,c=q4(t),{host:d,port:m}=Q9(t),_=m===null?"":`:${m}`;r.config.emulator={url:`${c}//${d}${_}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:u})}),Z9()}function q4(a){const t=a.indexOf(":");return t<0?"":a.substr(0,t+1)}function Q9(a){const t=q4(a),n=/(\/\/)?([^?#/]+)/.exec(a.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",u=/^(\[[^\]]+\])(:|$)/.exec(r);if(u){const c=u[1];return{host:c,port:tv(r.substr(c.length+1))}}else{const[c,d]=r.split(":");return{host:c,port:tv(d)}}}function tv(a){if(!a)return null;const t=Number(a);return isNaN(t)?null:t}function Z9(){function a(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Eo("not implemented")}_getIdTokenResponse(t){return Eo("not implemented")}_linkToIdToken(t,n){return Eo("not implemented")}_getReauthenticationResolver(t){return Eo("not implemented")}}async function W9(a,t){return Bu(a,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J9(a,t){return vg(a,"POST","/v1/accounts:signInWithPassword",Pu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $9(a,t){return vg(a,"POST","/v1/accounts:signInWithEmailLink",Pu(a,t))}async function t8(a,t){return vg(a,"POST","/v1/accounts:signInWithEmailLink",Pu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug extends j1{constructor(t,n,r,u=null){super("password",r),this._email=t,this._password=n,this._tenantId=u}static _fromEmailAndPassword(t,n){return new ug(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new ug(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return c1(t,n,"signInWithPassword",J9);case"emailLink":return $9(t,{email:this._email,oobCode:this._password});default:Ir(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return c1(t,r,"signUpPassword",W9);case"emailLink":return t8(t,{idToken:n,email:this._email,oobCode:this._password});default:Ir(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jh(a,t){return vg(a,"POST","/v1/accounts:signInWithIdp",Pu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e8="http://localhost";class Lc extends j1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Lc(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Ir("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:u}=n,c=B1(n,["providerId","signInMethod"]);if(!r||!u)return null;const d=new Lc(r,u);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const n=this.buildRequest();return jh(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,jh(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,jh(t,n)}buildRequest(){const t={requestUri:e8,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=yg(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n8(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function i8(a){const t=Zd(Wd(a)).link,n=t?Zd(Wd(t)).deep_link_id:null,r=Zd(Wd(a)).deep_link_id;return(r?Zd(Wd(r)).link:null)||r||n||t||a}class F1{constructor(t){var n,r,u,c,d,m;const _=Zd(Wd(t)),v=(n=_.apiKey)!==null&&n!==void 0?n:null,b=(r=_.oobCode)!==null&&r!==void 0?r:null,D=n8((u=_.mode)!==null&&u!==void 0?u:null);Jt(v&&b&&D,"argument-error"),this.apiKey=v,this.operation=D,this.code=b,this.continueUrl=(c=_.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(d=_.languageCode)!==null&&d!==void 0?d:null,this.tenantId=(m=_.tenantId)!==null&&m!==void 0?m:null}static parseLink(t){const n=i8(t);try{return new F1(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(){this.providerId=ef.PROVIDER_ID}static credential(t,n){return ug._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=F1.parseLink(n);return Jt(r,"argument-error"),ug._fromEmailAndCode(t,r.code,r.tenantId)}}ef.PROVIDER_ID="password";ef.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ef.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg extends j4{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su extends Eg{constructor(){super("facebook.com")}static credential(t){return Lc._fromParams({providerId:Su.PROVIDER_ID,signInMethod:Su.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Su.credentialFromTaggedObject(t)}static credentialFromError(t){return Su.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Su.credential(t.oauthAccessToken)}catch{return null}}}Su.FACEBOOK_SIGN_IN_METHOD="facebook.com";Su.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends Eg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Lc._fromParams({providerId:Tu.PROVIDER_ID,signInMethod:Tu.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Tu.credentialFromTaggedObject(t)}static credentialFromError(t){return Tu.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Tu.credential(n,r)}catch{return null}}}Tu.GOOGLE_SIGN_IN_METHOD="google.com";Tu.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends Eg{constructor(){super("github.com")}static credential(t){return Lc._fromParams({providerId:bu.PROVIDER_ID,signInMethod:bu.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bu.credentialFromTaggedObject(t)}static credentialFromError(t){return bu.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bu.credential(t.oauthAccessToken)}catch{return null}}}bu.GITHUB_SIGN_IN_METHOD="github.com";bu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends Eg{constructor(){super("twitter.com")}static credential(t,n){return Lc._fromParams({providerId:Au.PROVIDER_ID,signInMethod:Au.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Au.credentialFromTaggedObject(t)}static credentialFromError(t){return Au.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Au.credential(n,r)}catch{return null}}}Au.TWITTER_SIGN_IN_METHOD="twitter.com";Au.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a8(a,t){return vg(a,"POST","/v1/accounts:signUp",Pu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,u=!1){const c=await So._fromIdTokenResponse(t,r,u),d=ev(r);return new zc({user:c,providerId:d,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const u=ev(r);return new zc({user:t,providerId:u,_tokenResponse:r,operationType:n})}}function ev(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0 extends No{constructor(t,n,r,u){var c;super(n.code,n.message),this.operationType=r,this.user=u,Object.setPrototypeOf(this,c0.prototype),this.customData={appName:t.name,tenantId:(c=t.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,u){return new c0(t,n,r,u)}}function F4(a,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(a):n._getIdTokenResponse(a)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?c0._fromErrorAndOperation(a,c,t,r):c})}async function s8(a,t,n=!1){const r=await og(a,t._linkToIdToken(a.auth,await a.getIdToken()),n);return zc._forOperation(a,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r8(a,t,n=!1){const{auth:r}=a;if(wl(r.app))return Promise.reject(bo(r));const u="reauthenticate";try{const c=await og(a,F4(r,u,t,a),n);Jt(c.idToken,r,"internal-error");const d=k1(c.idToken);Jt(d,r,"internal-error");const{sub:m}=d;return Jt(a.uid===m,r,"user-mismatch"),zc._forOperation(a,u,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Ir(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K4(a,t,n=!1){if(wl(a.app))return Promise.reject(bo(a));const r="signIn",u=await F4(a,r,t),c=await zc._fromIdTokenResponse(a,r,u);return n||await a._updateCurrentUser(c.user),c}async function l8(a,t){return K4(Bc(a),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y4(a){const t=Bc(a);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function o8(a,t,n){if(wl(a.app))return Promise.reject(bo(a));const r=Bc(a),d=await c1(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",a8).catch(_=>{throw _.code==="auth/password-does-not-meet-requirements"&&Y4(a),_}),m=await zc._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(m.user),m}function u8(a,t,n){return wl(a.app)?Promise.reject(bo(a)):l8(ts(a),ef.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Y4(a),r})}function c8(a,t,n,r){return ts(a).onIdTokenChanged(t,n,r)}function h8(a,t,n){return ts(a).beforeAuthStateChanged(t,n)}function X4(a,t,n,r){return ts(a).onAuthStateChanged(t,n,r)}function f8(a){return ts(a).signOut()}const h0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(h0,"1"),this.storage.removeItem(h0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8=1e3,g8=10;class Z4 extends Q4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=B4(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),u=this.localCache[n];r!==u&&t(n,u,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((d,m,_)=>{this.notifyListeners(d,_)});return}const r=t.key;n?this.detachListener():this.stopPolling();const u=()=>{const d=this.storage.getItem(r);!n&&this.localCache[r]===d||this.notifyListeners(r,d)},c=this.storage.getItem(r);x9()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(u,g8):u()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const u of Array.from(r))u(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},d8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Z4.type="LOCAL";const m8=Z4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4 extends Q4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}W4.type="SESSION";const J4=W4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(a){return Promise.all(a.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(u=>u.isListeningto(t));if(n)return n;const r=new O0(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:u,data:c}=n.data,d=this.handlersMap[u];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:u});const m=Array.from(d).map(async v=>v(n.origin,c)),_=await p8(m);n.ports[0].postMessage({status:"done",eventId:r,eventType:u,response:_})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}O0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(a="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return a+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const u=typeof MessageChannel<"u"?new MessageChannel:null;if(!u)throw new Error("connection_unavailable");let c,d;return new Promise((m,_)=>{const v=K1("",20);u.port1.start();const b=setTimeout(()=>{_(new Error("unsupported_event"))},r);d={messageChannel:u,onMessage(D){const U=D;if(U.data.eventId===v)switch(U.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(U.data.response);break;default:clearTimeout(b),clearTimeout(c),_(new Error("invalid_response"));break}}},this.handlers.add(d),u.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:v,data:n},[u.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(){return window}function _8(a){Ol().location.href=a}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(){return typeof Ol().WorkerGlobalScope<"u"&&typeof Ol().importScripts=="function"}async function v8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function E8(){var a;return((a=navigator==null?void 0:navigator.serviceWorker)===null||a===void 0?void 0:a.controller)||null}function S8(){return $4()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="firebaseLocalStorageDb",T8=1,f0="firebaseLocalStorage",eE="fbase_key";class Sg{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function M0(a,t){return a.transaction([f0],t?"readwrite":"readonly").objectStore(f0)}function b8(){const a=indexedDB.deleteDatabase(tE);return new Sg(a).toPromise()}function h1(){const a=indexedDB.open(tE,T8);return new Promise((t,n)=>{a.addEventListener("error",()=>{n(a.error)}),a.addEventListener("upgradeneeded",()=>{const r=a.result;try{r.createObjectStore(f0,{keyPath:eE})}catch(u){n(u)}}),a.addEventListener("success",async()=>{const r=a.result;r.objectStoreNames.contains(f0)?t(r):(r.close(),await b8(),t(await h1()))})})}async function nv(a,t,n){const r=M0(a,!0).put({[eE]:t,value:n});return new Sg(r).toPromise()}async function A8(a,t){const n=M0(a,!1).get(t),r=await new Sg(n).toPromise();return r===void 0?null:r.value}function iv(a,t){const n=M0(a,!0).delete(t);return new Sg(n).toPromise()}const R8=800,C8=3;class nE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await h1(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>C8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=O0._getInstance(S8()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await v8(),!this.activeServiceWorker)return;this.sender=new y8(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||E8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await h1();return await nv(t,h0,"1"),await iv(t,h0),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>nv(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>A8(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>iv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(u=>{const c=M0(u,!1).getAll();return new Sg(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:u,value:c}of t)r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(c)&&(this.notifyListeners(u,c),n.push(u));for(const u of Object.keys(this.localCache))this.localCache[u]&&!r.has(u)&&(this.notifyListeners(u,null),n.push(u));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const u of Array.from(r))u(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),R8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nE.type="LOCAL";const D8=nE;new _g(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(a,t){return t?To(t):(Jt(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1 extends j1{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return jh(t,this._buildIdpRequest())}_linkToIdToken(t,n){return jh(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return jh(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function N8(a){return K4(a.auth,new Y1(a),a.bypassAuthState)}function O8(a){const{auth:t,user:n}=a;return Jt(n,t,"internal-error"),r8(n,new Y1(a),a.bypassAuthState)}async function M8(a){const{auth:t,user:n}=a;return Jt(n,t,"internal-error"),s8(n,new Y1(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(t,n,r,u,c=!1){this.auth=t,this.resolver=r,this.user=u,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:u,tenantId:c,error:d,type:m}=t;if(d){this.reject(d);return}const _={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:u||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(_))}catch(v){this.reject(v)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return N8;case"linkViaPopup":case"linkViaRedirect":return M8;case"reauthViaPopup":case"reauthViaRedirect":return O8;default:Ir(this.auth,"internal-error")}}resolve(t){Co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8=new _g(2e3,1e4);class Hh extends iE{constructor(t,n,r,u,c){super(t,n,u,c),this.provider=r,this.authWindow=null,this.pollId=null,Hh.currentPopupAction&&Hh.currentPopupAction.cancel(),Hh.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Jt(t,this.auth,"internal-error"),t}async onExecution(){Co(this.filter.length===1,"Popup operations only handle one event");const t=K1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Nl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Nl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hh.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,x8.get())};t()}}Hh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8="pendingRedirect",Zm=new Map;class U8 extends iE{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=Zm.get(this.auth._key());if(!t){try{const r=await I8(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}Zm.set(this.auth._key(),t)}return this.bypassAuthState||Zm.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function I8(a,t){const n=P8(t),r=z8(a);if(!await r._isAvailable())return!1;const u=await r._get(n)==="true";return await r._remove(n),u}function L8(a,t){Zm.set(a._key(),t)}function z8(a){return To(a._redirectPersistence)}function P8(a){return Qm(V8,a.config.apiKey,a.name)}async function B8(a,t,n=!1){if(wl(a.app))return Promise.reject(bo(a));const r=Bc(a),u=w8(r,t),d=await new U8(r,u,n).execute();return d&&!n&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8=10*60*1e3;class H8{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!k8(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!aE(t)){const u=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Nl(this.auth,u))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=G8&&this.cachedEventUids.clear(),this.cachedEventUids.has(av(t))}saveEventToCache(t){this.cachedEventUids.add(av(t)),this.lastProcessedEventTime=Date.now()}}function av(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(t=>t).join("-")}function aE({type:a,error:t}){return a==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function k8(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aE(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q8(a,t={}){return Bu(a,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F8=/^https?/;async function K8(a){if(a.config.emulator)return;const{authorizedDomains:t}=await q8(a);for(const n of t)try{if(Y8(n))return}catch{}Ir(a,"unauthorized-domain")}function Y8(a){const t=o1(),{protocol:n,hostname:r}=new URL(t);if(a.startsWith("chrome-extension://")){const d=new URL(a);return d.hostname===""&&r===""?n==="chrome-extension:"&&a.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===r}if(!F8.test(n))return!1;if(j8.test(a))return r===a;const u=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+u+"|"+u+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8=new _g(3e4,6e4);function sv(){const a=Ol().___jsl;if(a!=null&&a.H){for(const t of Object.keys(a.H))if(a.H[t].r=a.H[t].r||[],a.H[t].L=a.H[t].L||[],a.H[t].r=[...a.H[t].L],a.CP)for(let n=0;n<a.CP.length;n++)a.CP[n]=null}}function Q8(a){return new Promise((t,n)=>{var r,u,c;function d(){sv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{sv(),n(Nl(a,"network-request-failed"))},timeout:X8.get()})}if(!((u=(r=Ol().gapi)===null||r===void 0?void 0:r.iframes)===null||u===void 0)&&u.Iframe)t(gapi.iframes.getContext());else if(!((c=Ol().gapi)===null||c===void 0)&&c.load)d();else{const m=H9("iframefcb");return Ol()[m]=()=>{gapi.load?d():n(Nl(a,"network-request-failed"))},H4(`${G9()}?onload=${m}`).catch(_=>n(_))}}).catch(t=>{throw Wm=null,t})}let Wm=null;function Z8(a){return Wm=Wm||Q8(a),Wm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8=new _g(5e3,15e3),J8="__/auth/iframe",$8="emulator/auth/iframe",tb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nb(a){const t=a.config;Jt(t.authDomain,a,"auth-domain-config-required");const n=t.emulator?H1(t,$8):`https://${a.config.authDomain}/${J8}`,r={apiKey:t.apiKey,appName:a.name,v:tf},u=eb.get(a.config.apiHost);u&&(r.eid=u);const c=a._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${yg(r).slice(1)}`}async function ib(a){const t=await Z8(a),n=Ol().gapi;return Jt(n,a,"internal-error"),t.open({where:document.body,url:nb(a),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tb,dontclear:!0},r=>new Promise(async(u,c)=>{await r.restyle({setHideOnLeave:!1});const d=Nl(a,"network-request-failed"),m=Ol().setTimeout(()=>{c(d)},W8.get());function _(){Ol().clearTimeout(m),u(r)}r.ping(_).then(_,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sb=500,rb=600,lb="_blank",ob="http://localhost";class rv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ub(a,t,n,r=sb,u=rb){const c=Math.max((window.screen.availHeight-u)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const _=Object.assign(Object.assign({},ab),{width:r.toString(),height:u.toString(),top:c,left:d}),v=fa().toLowerCase();n&&(m=U4(v)?lb:n),x4(v)&&(t=t||ob,_.scrollbars="yes");const b=Object.entries(_).reduce((U,[w,M])=>`${U}${w}=${M},`,"");if(M9(v)&&m!=="_self")return cb(t||"",m),new rv(null);const D=window.open(t||"",m,b);Jt(D,a,"popup-blocked");try{D.focus()}catch{}return new rv(D)}function cb(a,t){const n=document.createElement("a");n.href=a,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="__/auth/handler",fb="emulator/auth/handler",db=encodeURIComponent("fac");async function lv(a,t,n,r,u,c){Jt(a.config.authDomain,a,"auth-domain-config-required"),Jt(a.config.apiKey,a,"invalid-api-key");const d={apiKey:a.config.apiKey,appName:a.name,authType:n,redirectUrl:r,v:tf,eventId:u};if(t instanceof j4){t.setDefaultLanguage(a.languageCode),d.providerId=t.providerId||"",$6(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[b,D]of Object.entries({}))d[b]=D}if(t instanceof Eg){const b=t.getScopes().filter(D=>D!=="");b.length>0&&(d.scopes=b.join(","))}a.tenantId&&(d.tid=a.tenantId);const m=d;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const _=await a._getAppCheckToken(),v=_?`#${db}=${encodeURIComponent(_)}`:"";return`${gb(a)}?${yg(m).slice(1)}${v}`}function gb({config:a}){return a.emulator?H1(a,fb):`https://${a.authDomain}/${hb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="webStorageSupport";class mb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=J4,this._completeRedirectFn=B8,this._overrideRedirectResult=L8}async _openPopup(t,n,r,u){var c;Co((c=this.eventManagers[t._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await lv(t,n,r,o1(),u);return ub(t,d,K1())}async _openRedirect(t,n,r,u){await this._originValidation(t);const c=await lv(t,n,r,o1(),u);return _8(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:u,promise:c}=this.eventManagers[n];return u?Promise.resolve(u):(Co(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await ib(t),r=new H8(t);return n.register("authEvent",u=>(Jt(u==null?void 0:u.authEvent,t,"invalid-auth-event"),{status:r.onEvent(u.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Zp,{type:Zp},u=>{var c;const d=(c=u==null?void 0:u[0])===null||c===void 0?void 0:c[Zp];d!==void 0&&n(!!d),Ir(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=K8(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return B4()||V4()||q1()}}const pb=mb;var ov="@firebase/auth",uv="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Jt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vb(a){Kh(new Ic("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),u=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=r.options;Jt(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const _={apiKey:d,authDomain:m,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:G4(a)},v=new z9(r,u,c,_);return Y9(v,n),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Kh(new Ic("auth-internal",t=>{const n=Bc(t.getProvider("auth").getImmediate());return(r=>new yb(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wu(ov,uv,_b(a)),wu(ov,uv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=5*60,Sb=p4("authIdTokenMaxAge")||Eb;let cv=null;const Tb=a=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Sb)return;const u=n==null?void 0:n.token;cv!==u&&(cv=u,await fetch(a,{method:u?"POST":"DELETE",headers:u?{Authorization:`Bearer ${u}`}:{}}))};function bb(a=E4()){const t=P1(a,"auth");if(t.isInitialized())return t.getImmediate();const n=K9(a,{popupRedirectResolver:pb,persistence:[D8,m8,J4]}),r=p4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const d=Tb(c.toString());h8(n,d,()=>d(n.currentUser)),c8(n,m=>d(m))}}const u=g4("auth");return u&&X9(n,`http://${u}`),n}function Ab(){var a,t;return(t=(a=document.getElementsByTagName("head"))===null||a===void 0?void 0:a[0])!==null&&t!==void 0?t:document}P9({loadJS(a){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",a),r.onload=t,r.onerror=u=>{const c=Nl("internal-error");c.customData=u,n(c)},r.type="text/javascript",r.charset="UTF-8",Ab().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vb("Browser");var hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nu,sE;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(q,V){function R(){}R.prototype=V.prototype,q.D=V.prototype,q.prototype=new R,q.prototype.constructor=q,q.C=function(x,G,Y){for(var T=Array(arguments.length-2),F=2;F<arguments.length;F++)T[F-2]=arguments[F];return V.prototype[G].apply(x,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(q,V,R){R||(R=0);var x=Array(16);if(typeof V=="string")for(var G=0;16>G;++G)x[G]=V.charCodeAt(R++)|V.charCodeAt(R++)<<8|V.charCodeAt(R++)<<16|V.charCodeAt(R++)<<24;else for(G=0;16>G;++G)x[G]=V[R++]|V[R++]<<8|V[R++]<<16|V[R++]<<24;V=q.g[0],R=q.g[1],G=q.g[2];var Y=q.g[3],T=V+(Y^R&(G^Y))+x[0]+3614090360&4294967295;V=R+(T<<7&4294967295|T>>>25),T=Y+(G^V&(R^G))+x[1]+3905402710&4294967295,Y=V+(T<<12&4294967295|T>>>20),T=G+(R^Y&(V^R))+x[2]+606105819&4294967295,G=Y+(T<<17&4294967295|T>>>15),T=R+(V^G&(Y^V))+x[3]+3250441966&4294967295,R=G+(T<<22&4294967295|T>>>10),T=V+(Y^R&(G^Y))+x[4]+4118548399&4294967295,V=R+(T<<7&4294967295|T>>>25),T=Y+(G^V&(R^G))+x[5]+1200080426&4294967295,Y=V+(T<<12&4294967295|T>>>20),T=G+(R^Y&(V^R))+x[6]+2821735955&4294967295,G=Y+(T<<17&4294967295|T>>>15),T=R+(V^G&(Y^V))+x[7]+4249261313&4294967295,R=G+(T<<22&4294967295|T>>>10),T=V+(Y^R&(G^Y))+x[8]+1770035416&4294967295,V=R+(T<<7&4294967295|T>>>25),T=Y+(G^V&(R^G))+x[9]+2336552879&4294967295,Y=V+(T<<12&4294967295|T>>>20),T=G+(R^Y&(V^R))+x[10]+4294925233&4294967295,G=Y+(T<<17&4294967295|T>>>15),T=R+(V^G&(Y^V))+x[11]+2304563134&4294967295,R=G+(T<<22&4294967295|T>>>10),T=V+(Y^R&(G^Y))+x[12]+1804603682&4294967295,V=R+(T<<7&4294967295|T>>>25),T=Y+(G^V&(R^G))+x[13]+4254626195&4294967295,Y=V+(T<<12&4294967295|T>>>20),T=G+(R^Y&(V^R))+x[14]+2792965006&4294967295,G=Y+(T<<17&4294967295|T>>>15),T=R+(V^G&(Y^V))+x[15]+1236535329&4294967295,R=G+(T<<22&4294967295|T>>>10),T=V+(G^Y&(R^G))+x[1]+4129170786&4294967295,V=R+(T<<5&4294967295|T>>>27),T=Y+(R^G&(V^R))+x[6]+3225465664&4294967295,Y=V+(T<<9&4294967295|T>>>23),T=G+(V^R&(Y^V))+x[11]+643717713&4294967295,G=Y+(T<<14&4294967295|T>>>18),T=R+(Y^V&(G^Y))+x[0]+3921069994&4294967295,R=G+(T<<20&4294967295|T>>>12),T=V+(G^Y&(R^G))+x[5]+3593408605&4294967295,V=R+(T<<5&4294967295|T>>>27),T=Y+(R^G&(V^R))+x[10]+38016083&4294967295,Y=V+(T<<9&4294967295|T>>>23),T=G+(V^R&(Y^V))+x[15]+3634488961&4294967295,G=Y+(T<<14&4294967295|T>>>18),T=R+(Y^V&(G^Y))+x[4]+3889429448&4294967295,R=G+(T<<20&4294967295|T>>>12),T=V+(G^Y&(R^G))+x[9]+568446438&4294967295,V=R+(T<<5&4294967295|T>>>27),T=Y+(R^G&(V^R))+x[14]+3275163606&4294967295,Y=V+(T<<9&4294967295|T>>>23),T=G+(V^R&(Y^V))+x[3]+4107603335&4294967295,G=Y+(T<<14&4294967295|T>>>18),T=R+(Y^V&(G^Y))+x[8]+1163531501&4294967295,R=G+(T<<20&4294967295|T>>>12),T=V+(G^Y&(R^G))+x[13]+2850285829&4294967295,V=R+(T<<5&4294967295|T>>>27),T=Y+(R^G&(V^R))+x[2]+4243563512&4294967295,Y=V+(T<<9&4294967295|T>>>23),T=G+(V^R&(Y^V))+x[7]+1735328473&4294967295,G=Y+(T<<14&4294967295|T>>>18),T=R+(Y^V&(G^Y))+x[12]+2368359562&4294967295,R=G+(T<<20&4294967295|T>>>12),T=V+(R^G^Y)+x[5]+4294588738&4294967295,V=R+(T<<4&4294967295|T>>>28),T=Y+(V^R^G)+x[8]+2272392833&4294967295,Y=V+(T<<11&4294967295|T>>>21),T=G+(Y^V^R)+x[11]+1839030562&4294967295,G=Y+(T<<16&4294967295|T>>>16),T=R+(G^Y^V)+x[14]+4259657740&4294967295,R=G+(T<<23&4294967295|T>>>9),T=V+(R^G^Y)+x[1]+2763975236&4294967295,V=R+(T<<4&4294967295|T>>>28),T=Y+(V^R^G)+x[4]+1272893353&4294967295,Y=V+(T<<11&4294967295|T>>>21),T=G+(Y^V^R)+x[7]+4139469664&4294967295,G=Y+(T<<16&4294967295|T>>>16),T=R+(G^Y^V)+x[10]+3200236656&4294967295,R=G+(T<<23&4294967295|T>>>9),T=V+(R^G^Y)+x[13]+681279174&4294967295,V=R+(T<<4&4294967295|T>>>28),T=Y+(V^R^G)+x[0]+3936430074&4294967295,Y=V+(T<<11&4294967295|T>>>21),T=G+(Y^V^R)+x[3]+3572445317&4294967295,G=Y+(T<<16&4294967295|T>>>16),T=R+(G^Y^V)+x[6]+76029189&4294967295,R=G+(T<<23&4294967295|T>>>9),T=V+(R^G^Y)+x[9]+3654602809&4294967295,V=R+(T<<4&4294967295|T>>>28),T=Y+(V^R^G)+x[12]+3873151461&4294967295,Y=V+(T<<11&4294967295|T>>>21),T=G+(Y^V^R)+x[15]+530742520&4294967295,G=Y+(T<<16&4294967295|T>>>16),T=R+(G^Y^V)+x[2]+3299628645&4294967295,R=G+(T<<23&4294967295|T>>>9),T=V+(G^(R|~Y))+x[0]+4096336452&4294967295,V=R+(T<<6&4294967295|T>>>26),T=Y+(R^(V|~G))+x[7]+1126891415&4294967295,Y=V+(T<<10&4294967295|T>>>22),T=G+(V^(Y|~R))+x[14]+2878612391&4294967295,G=Y+(T<<15&4294967295|T>>>17),T=R+(Y^(G|~V))+x[5]+4237533241&4294967295,R=G+(T<<21&4294967295|T>>>11),T=V+(G^(R|~Y))+x[12]+1700485571&4294967295,V=R+(T<<6&4294967295|T>>>26),T=Y+(R^(V|~G))+x[3]+2399980690&4294967295,Y=V+(T<<10&4294967295|T>>>22),T=G+(V^(Y|~R))+x[10]+4293915773&4294967295,G=Y+(T<<15&4294967295|T>>>17),T=R+(Y^(G|~V))+x[1]+2240044497&4294967295,R=G+(T<<21&4294967295|T>>>11),T=V+(G^(R|~Y))+x[8]+1873313359&4294967295,V=R+(T<<6&4294967295|T>>>26),T=Y+(R^(V|~G))+x[15]+4264355552&4294967295,Y=V+(T<<10&4294967295|T>>>22),T=G+(V^(Y|~R))+x[6]+2734768916&4294967295,G=Y+(T<<15&4294967295|T>>>17),T=R+(Y^(G|~V))+x[13]+1309151649&4294967295,R=G+(T<<21&4294967295|T>>>11),T=V+(G^(R|~Y))+x[4]+4149444226&4294967295,V=R+(T<<6&4294967295|T>>>26),T=Y+(R^(V|~G))+x[11]+3174756917&4294967295,Y=V+(T<<10&4294967295|T>>>22),T=G+(V^(Y|~R))+x[2]+718787259&4294967295,G=Y+(T<<15&4294967295|T>>>17),T=R+(Y^(G|~V))+x[9]+3951481745&4294967295,q.g[0]=q.g[0]+V&4294967295,q.g[1]=q.g[1]+(G+(T<<21&4294967295|T>>>11))&4294967295,q.g[2]=q.g[2]+G&4294967295,q.g[3]=q.g[3]+Y&4294967295}r.prototype.u=function(q,V){V===void 0&&(V=q.length);for(var R=V-this.blockSize,x=this.B,G=this.h,Y=0;Y<V;){if(G==0)for(;Y<=R;)u(this,q,Y),Y+=this.blockSize;if(typeof q=="string"){for(;Y<V;)if(x[G++]=q.charCodeAt(Y++),G==this.blockSize){u(this,x),G=0;break}}else for(;Y<V;)if(x[G++]=q[Y++],G==this.blockSize){u(this,x),G=0;break}}this.h=G,this.o+=V},r.prototype.v=function(){var q=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);q[0]=128;for(var V=1;V<q.length-8;++V)q[V]=0;var R=8*this.o;for(V=q.length-8;V<q.length;++V)q[V]=R&255,R/=256;for(this.u(q),q=Array(16),V=R=0;4>V;++V)for(var x=0;32>x;x+=8)q[R++]=this.g[V]>>>x&255;return q};function c(q,V){var R=m;return Object.prototype.hasOwnProperty.call(R,q)?R[q]:R[q]=V(q)}function d(q,V){this.h=V;for(var R=[],x=!0,G=q.length-1;0<=G;G--){var Y=q[G]|0;x&&Y==V||(R[G]=Y,x=!1)}this.g=R}var m={};function _(q){return-128<=q&&128>q?c(q,function(V){return new d([V|0],0>V?-1:0)}):new d([q|0],0>q?-1:0)}function v(q){if(isNaN(q)||!isFinite(q))return D;if(0>q)return P(v(-q));for(var V=[],R=1,x=0;q>=R;x++)V[x]=q/R|0,R*=4294967296;return new d(V,0)}function b(q,V){if(q.length==0)throw Error("number format error: empty string");if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(q.charAt(0)=="-")return P(b(q.substring(1),V));if(0<=q.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=v(Math.pow(V,8)),x=D,G=0;G<q.length;G+=8){var Y=Math.min(8,q.length-G),T=parseInt(q.substring(G,G+Y),V);8>Y?(Y=v(Math.pow(V,Y)),x=x.j(Y).add(v(T))):(x=x.j(R),x=x.add(v(T)))}return x}var D=_(0),U=_(1),w=_(16777216);a=d.prototype,a.m=function(){if(I(this))return-P(this).m();for(var q=0,V=1,R=0;R<this.g.length;R++){var x=this.i(R);q+=(0<=x?x:4294967296+x)*V,V*=4294967296}return q},a.toString=function(q){if(q=q||10,2>q||36<q)throw Error("radix out of range: "+q);if(M(this))return"0";if(I(this))return"-"+P(this).toString(q);for(var V=v(Math.pow(q,6)),R=this,x="";;){var G=z(R,V).g;R=K(R,G.j(V));var Y=((0<R.g.length?R.g[0]:R.h)>>>0).toString(q);if(R=G,M(R))return Y+x;for(;6>Y.length;)Y="0"+Y;x=Y+x}},a.i=function(q){return 0>q?0:q<this.g.length?this.g[q]:this.h};function M(q){if(q.h!=0)return!1;for(var V=0;V<q.g.length;V++)if(q.g[V]!=0)return!1;return!0}function I(q){return q.h==-1}a.l=function(q){return q=K(this,q),I(q)?-1:M(q)?0:1};function P(q){for(var V=q.g.length,R=[],x=0;x<V;x++)R[x]=~q.g[x];return new d(R,~q.h).add(U)}a.abs=function(){return I(this)?P(this):this},a.add=function(q){for(var V=Math.max(this.g.length,q.g.length),R=[],x=0,G=0;G<=V;G++){var Y=x+(this.i(G)&65535)+(q.i(G)&65535),T=(Y>>>16)+(this.i(G)>>>16)+(q.i(G)>>>16);x=T>>>16,Y&=65535,T&=65535,R[G]=T<<16|Y}return new d(R,R[R.length-1]&-2147483648?-1:0)};function K(q,V){return q.add(P(V))}a.j=function(q){if(M(this)||M(q))return D;if(I(this))return I(q)?P(this).j(P(q)):P(P(this).j(q));if(I(q))return P(this.j(P(q)));if(0>this.l(w)&&0>q.l(w))return v(this.m()*q.m());for(var V=this.g.length+q.g.length,R=[],x=0;x<2*V;x++)R[x]=0;for(x=0;x<this.g.length;x++)for(var G=0;G<q.g.length;G++){var Y=this.i(x)>>>16,T=this.i(x)&65535,F=q.i(G)>>>16,k=q.i(G)&65535;R[2*x+2*G]+=T*k,C(R,2*x+2*G),R[2*x+2*G+1]+=Y*k,C(R,2*x+2*G+1),R[2*x+2*G+1]+=T*F,C(R,2*x+2*G+1),R[2*x+2*G+2]+=Y*F,C(R,2*x+2*G+2)}for(x=0;x<V;x++)R[x]=R[2*x+1]<<16|R[2*x];for(x=V;x<2*V;x++)R[x]=0;return new d(R,0)};function C(q,V){for(;(q[V]&65535)!=q[V];)q[V+1]+=q[V]>>>16,q[V]&=65535,V++}function N(q,V){this.g=q,this.h=V}function z(q,V){if(M(V))throw Error("division by zero");if(M(q))return new N(D,D);if(I(q))return V=z(P(q),V),new N(P(V.g),P(V.h));if(I(V))return V=z(q,P(V)),new N(P(V.g),V.h);if(30<q.g.length){if(I(q)||I(V))throw Error("slowDivide_ only works with positive integers.");for(var R=U,x=V;0>=x.l(q);)R=H(R),x=H(x);var G=j(R,1),Y=j(x,1);for(x=j(x,2),R=j(R,2);!M(x);){var T=Y.add(x);0>=T.l(q)&&(G=G.add(R),Y=T),x=j(x,1),R=j(R,1)}return V=K(q,G.j(V)),new N(G,V)}for(G=D;0<=q.l(V);){for(R=Math.max(1,Math.floor(q.m()/V.m())),x=Math.ceil(Math.log(R)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),Y=v(R),T=Y.j(V);I(T)||0<T.l(q);)R-=x,Y=v(R),T=Y.j(V);M(Y)&&(Y=U),G=G.add(Y),q=K(q,T)}return new N(G,q)}a.A=function(q){return z(this,q).h},a.and=function(q){for(var V=Math.max(this.g.length,q.g.length),R=[],x=0;x<V;x++)R[x]=this.i(x)&q.i(x);return new d(R,this.h&q.h)},a.or=function(q){for(var V=Math.max(this.g.length,q.g.length),R=[],x=0;x<V;x++)R[x]=this.i(x)|q.i(x);return new d(R,this.h|q.h)},a.xor=function(q){for(var V=Math.max(this.g.length,q.g.length),R=[],x=0;x<V;x++)R[x]=this.i(x)^q.i(x);return new d(R,this.h^q.h)};function H(q){for(var V=q.g.length+1,R=[],x=0;x<V;x++)R[x]=q.i(x)<<1|q.i(x-1)>>>31;return new d(R,q.h)}function j(q,V){var R=V>>5;V%=32;for(var x=q.g.length-R,G=[],Y=0;Y<x;Y++)G[Y]=0<V?q.i(Y+R)>>>V|q.i(Y+R+1)<<32-V:q.i(Y+R);return new d(G,q.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sE=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=b,Nu=d}).apply(typeof hv<"u"?hv:typeof self<"u"?self:typeof window<"u"?window:{});var Hm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rE,Jd,lE,Jm,f1,oE,uE,cE;(function(){var a,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,A,L){return g==Array.prototype||g==Object.prototype||(g[A]=L.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hm=="object"&&Hm];for(var A=0;A<g.length;++A){var L=g[A];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var r=n(this);function u(g,A){if(A)t:{var L=r;g=g.split(".");for(var J=0;J<g.length-1;J++){var ot=g[J];if(!(ot in L))break t;L=L[ot]}g=g[g.length-1],J=L[g],A=A(J),A!=J&&A!=null&&t(L,g,{configurable:!0,writable:!0,value:A})}}function c(g,A){g instanceof String&&(g+="");var L=0,J=!1,ot={next:function(){if(!J&&L<g.length){var vt=L++;return{value:A(vt,g[vt]),done:!1}}return J=!0,{done:!0,value:void 0}}};return ot[Symbol.iterator]=function(){return ot},ot}u("Array.prototype.values",function(g){return g||function(){return c(this,function(A,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function _(g){var A=typeof g;return A=A!="object"?A:g?Array.isArray(g)?"array":A:"null",A=="array"||A=="object"&&typeof g.length=="number"}function v(g){var A=typeof g;return A=="object"&&g!=null||A=="function"}function b(g,A,L){return g.call.apply(g.bind,arguments)}function D(g,A,L){if(!g)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var ot=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ot,J),g.apply(A,ot)}}return function(){return g.apply(A,arguments)}}function U(g,A,L){return U=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:D,U.apply(null,arguments)}function w(g,A){var L=Array.prototype.slice.call(arguments,1);return function(){var J=L.slice();return J.push.apply(J,arguments),g.apply(this,J)}}function M(g,A){function L(){}L.prototype=A.prototype,g.aa=A.prototype,g.prototype=new L,g.prototype.constructor=g,g.Qb=function(J,ot,vt){for(var Lt=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)Lt[ve-2]=arguments[ve];return A.prototype[ot].apply(J,Lt)}}function I(g){const A=g.length;if(0<A){const L=Array(A);for(let J=0;J<A;J++)L[J]=g[J];return L}return[]}function P(g,A){for(let L=1;L<arguments.length;L++){const J=arguments[L];if(_(J)){const ot=g.length||0,vt=J.length||0;g.length=ot+vt;for(let Lt=0;Lt<vt;Lt++)g[ot+Lt]=J[Lt]}else g.push(J)}}class K{constructor(A,L){this.i=A,this.j=L,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function C(g){return/^[\s\xa0]*$/.test(g)}function N(){var g=m.navigator;return g&&(g=g.userAgent)?g:""}function z(g){return z[" "](g),g}z[" "]=function(){};var H=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function j(g,A,L){for(const J in g)A.call(L,g[J],J,g)}function q(g,A){for(const L in g)A.call(void 0,g[L],L,g)}function V(g){const A={};for(const L in g)A[L]=g[L];return A}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(g,A){let L,J;for(let ot=1;ot<arguments.length;ot++){J=arguments[ot];for(L in J)g[L]=J[L];for(let vt=0;vt<R.length;vt++)L=R[vt],Object.prototype.hasOwnProperty.call(J,L)&&(g[L]=J[L])}}function G(g){var A=1;g=g.split(":");const L=[];for(;0<A&&g.length;)L.push(g.shift()),A--;return g.length&&L.push(g.join(":")),L}function Y(g){m.setTimeout(()=>{throw g},0)}function T(){var g=dt;let A=null;return g.g&&(A=g.g,g.g=g.g.next,g.g||(g.h=null),A.next=null),A}class F{constructor(){this.h=this.g=null}add(A,L){const J=k.get();J.set(A,L),this.h?this.h.next=J:this.g=J,this.h=J}}var k=new K(()=>new Q,g=>g.reset());class Q{constructor(){this.next=this.g=this.h=null}set(A,L){this.h=A,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let $,at=!1,dt=new F,X=()=>{const g=m.Promise.resolve(void 0);$=()=>{g.then(it)}};var it=()=>{for(var g;g=T();){try{g.h.call(g.g)}catch(L){Y(L)}var A=k;A.j(g),100>A.h&&(A.h++,g.next=A.g,A.g=g)}at=!1};function Et(){this.s=this.s,this.C=this.C}Et.prototype.s=!1,Et.prototype.ma=function(){this.s||(this.s=!0,this.N())},Et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(g,A){this.type=g,this.g=this.target=A,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var gt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var g=!1,A=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const L=()=>{};m.addEventListener("test",L,A),m.removeEventListener("test",L,A)}catch{}return g}();function Rt(g,A){if(st.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var L=this.type=g.type,J=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=A,A=g.relatedTarget){if(H){t:{try{z(A.nodeName);var ot=!0;break t}catch{}ot=!1}ot||(A=null)}}else L=="mouseover"?A=g.fromElement:L=="mouseout"&&(A=g.toElement);this.relatedTarget=A,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Nt[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Rt.aa.h.call(this)}}M(Rt,st);var Nt={2:"touch",3:"pen",4:"mouse"};Rt.prototype.h=function(){Rt.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),ct=0;function At(g,A,L,J,ot){this.listener=g,this.proxy=null,this.src=A,this.type=L,this.capture=!!J,this.ha=ot,this.key=++ct,this.da=this.fa=!1}function Ct(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function It(g){this.src=g,this.g={},this.h=0}It.prototype.add=function(g,A,L,J,ot){var vt=g.toString();g=this.g[vt],g||(g=this.g[vt]=[],this.h++);var Lt=$t(g,A,J,ot);return-1<Lt?(A=g[Lt],L||(A.fa=!1)):(A=new At(A,this.src,vt,!!J,ot),A.fa=L,g.push(A)),A};function Pt(g,A){var L=A.type;if(L in g.g){var J=g.g[L],ot=Array.prototype.indexOf.call(J,A,void 0),vt;(vt=0<=ot)&&Array.prototype.splice.call(J,ot,1),vt&&(Ct(A),g.g[L].length==0&&(delete g.g[L],g.h--))}}function $t(g,A,L,J){for(var ot=0;ot<g.length;++ot){var vt=g[ot];if(!vt.da&&vt.listener==A&&vt.capture==!!L&&vt.ha==J)return ot}return-1}var oe="closure_lm_"+(1e6*Math.random()|0),Kt={};function Fe(g,A,L,J,ot){if(Array.isArray(A)){for(var vt=0;vt<A.length;vt++)Fe(g,A[vt],L,J,ot);return null}return L=Oi(L),g&&g[et]?g.K(A,L,v(J)?!!J.capture:!1,ot):le(g,A,L,!1,J,ot)}function le(g,A,L,J,ot,vt){if(!A)throw Error("Invalid event type");var Lt=v(ot)?!!ot.capture:!!ot,ve=Xn(g);if(ve||(g[oe]=ve=new It(g)),L=ve.add(A,L,J,Lt,vt),L.proxy)return L;if(J=Ke(),L.proxy=J,J.src=g,J.listener=L,g.addEventListener)gt||(ot=Lt),ot===void 0&&(ot=!1),g.addEventListener(A.toString(),J,ot);else if(g.attachEvent)g.attachEvent(oi(A.toString()),J);else if(g.addListener&&g.removeListener)g.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return L}function Ke(){function g(L){return A.call(g.src,g.listener,L)}const A=en;return g}function gi(g,A,L,J,ot){if(Array.isArray(A))for(var vt=0;vt<A.length;vt++)gi(g,A[vt],L,J,ot);else J=v(J)?!!J.capture:!!J,L=Oi(L),g&&g[et]?(g=g.i,A=String(A).toString(),A in g.g&&(vt=g.g[A],L=$t(vt,L,J,ot),-1<L&&(Ct(vt[L]),Array.prototype.splice.call(vt,L,1),vt.length==0&&(delete g.g[A],g.h--)))):g&&(g=Xn(g))&&(A=g.g[A.toString()],g=-1,A&&(g=$t(A,L,J,ot)),(L=-1<g?A[g]:null)&&He(L))}function He(g){if(typeof g!="number"&&g&&!g.da){var A=g.src;if(A&&A[et])Pt(A.i,g);else{var L=g.type,J=g.proxy;A.removeEventListener?A.removeEventListener(L,J,g.capture):A.detachEvent?A.detachEvent(oi(L),J):A.addListener&&A.removeListener&&A.removeListener(J),(L=Xn(A))?(Pt(L,g),L.h==0&&(L.src=null,A[oe]=null)):Ct(g)}}}function oi(g){return g in Kt?Kt[g]:Kt[g]="on"+g}function en(g,A){if(g.da)g=!0;else{A=new Rt(A,this);var L=g.listener,J=g.ha||g.src;g.fa&&He(g),g=L.call(J,A)}return g}function Xn(g){return g=g[oe],g instanceof It?g:null}var nn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oi(g){return typeof g=="function"?g:(g[nn]||(g[nn]=function(A){return g.handleEvent(A)}),g[nn])}function Ce(){Et.call(this),this.i=new It(this),this.M=this,this.F=null}M(Ce,Et),Ce.prototype[et]=!0,Ce.prototype.removeEventListener=function(g,A,L,J){gi(this,g,A,L,J)};function ke(g,A){var L,J=g.F;if(J)for(L=[];J;J=J.F)L.push(J);if(g=g.M,J=A.type||A,typeof A=="string")A=new st(A,g);else if(A instanceof st)A.target=A.target||g;else{var ot=A;A=new st(J,g),x(A,ot)}if(ot=!0,L)for(var vt=L.length-1;0<=vt;vt--){var Lt=A.g=L[vt];ot=Qn(Lt,J,!0,A)&&ot}if(Lt=A.g=g,ot=Qn(Lt,J,!0,A)&&ot,ot=Qn(Lt,J,!1,A)&&ot,L)for(vt=0;vt<L.length;vt++)Lt=A.g=L[vt],ot=Qn(Lt,J,!1,A)&&ot}Ce.prototype.N=function(){if(Ce.aa.N.call(this),this.i){var g=this.i,A;for(A in g.g){for(var L=g.g[A],J=0;J<L.length;J++)Ct(L[J]);delete g.g[A],g.h--}}this.F=null},Ce.prototype.K=function(g,A,L,J){return this.i.add(String(g),A,!1,L,J)},Ce.prototype.L=function(g,A,L,J){return this.i.add(String(g),A,!0,L,J)};function Qn(g,A,L,J){if(A=g.i.g[String(A)],!A)return!0;A=A.concat();for(var ot=!0,vt=0;vt<A.length;++vt){var Lt=A[vt];if(Lt&&!Lt.da&&Lt.capture==L){var ve=Lt.listener,_n=Lt.ha||Lt.src;Lt.fa&&Pt(g.i,Lt),ot=ve.call(_n,J)!==!1&&ot}}return ot&&!J.defaultPrevented}function da(g,A,L){if(typeof g=="function")L&&(g=U(g,L));else if(g&&typeof g.handleEvent=="function")g=U(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:m.setTimeout(g,A||0)}function ji(g){g.g=da(()=>{g.g=null,g.i&&(g.i=!1,ji(g))},g.l);const A=g.h;g.h=null,g.m.apply(null,A)}class ga extends Et{constructor(A,L){super(),this.m=A,this.l=L,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:ji(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zn(g){Et.call(this),this.h=g,this.g={}}M(zn,Et);var an=[];function Ae(g){j(g.g,function(A,L){this.g.hasOwnProperty(L)&&He(A)},g),g.g={}}zn.prototype.N=function(){zn.aa.N.call(this),Ae(this)},zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ma=m.JSON.stringify,Fi=m.JSON.parse,Zn=class{stringify(g){return m.JSON.stringify(g,void 0)}parse(g){return m.JSON.parse(g,void 0)}};function Fs(){}Fs.prototype.h=null;function Gu(g){return g.h||(g.h=g.i())}function Hu(){}var pa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ks(){st.call(this,"d")}M(Ks,st);function Ki(){st.call(this,"c")}M(Ki,st);var ya={},Ys=null;function Xs(){return Ys=Ys||new Ce}ya.La="serverreachability";function Qs(g){st.call(this,ya.La,g)}M(Qs,st);function es(g){const A=Xs();ke(A,new Qs(A))}ya.STAT_EVENT="statevent";function Il(g,A){st.call(this,ya.STAT_EVENT,g),this.stat=A}M(Il,st);function En(g){const A=Xs();ke(A,new Il(A,g))}ya.Ma="timingevent";function ku(g,A){st.call(this,ya.Ma,g),this.size=A}M(ku,st);function Ss(g,A){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){g()},A)}function Ts(){this.g=!0}Ts.prototype.xa=function(){this.g=!1};function ns(g,A,L,J,ot,vt){g.info(function(){if(g.g)if(vt)for(var Lt="",ve=vt.split("&"),_n=0;_n<ve.length;_n++){var Ee=ve[_n].split("=");if(1<Ee.length){var Cn=Ee[0];Ee=Ee[1];var Pn=Cn.split("_");Lt=2<=Pn.length&&Pn[1]=="type"?Lt+(Cn+"="+Ee+"&"):Lt+(Cn+"=redacted&")}}else Lt=null;else Lt=vt;return"XMLHTTP REQ ("+J+") [attempt "+ot+"]: "+A+`
`+L+`
`+Lt})}function qu(g,A,L,J,ot,vt,Lt){g.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+ot+"]: "+A+`
`+L+`
`+vt+" "+Lt})}function Mi(g,A,L,J){g.info(function(){return"XMLHTTP TEXT ("+A+"): "+Rn(g,L)+(J?" "+J:"")})}function ni(g,A){g.info(function(){return"TIMEOUT: "+A})}Ts.prototype.info=function(){};function Rn(g,A){if(!g.g)return A;if(!A)return null;try{var L=JSON.parse(A);if(L){for(g=0;g<L.length;g++)if(Array.isArray(L[g])){var J=L[g];if(!(2>J.length)){var ot=J[1];if(Array.isArray(ot)&&!(1>ot.length)){var vt=ot[0];if(vt!="noop"&&vt!="stop"&&vt!="close")for(var Lt=1;Lt<ot.length;Lt++)ot[Lt]=""}}}}return ma(L)}catch{return A}}var ue={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},is={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zs;function Ll(){}M(Ll,Fs),Ll.prototype.g=function(){return new XMLHttpRequest},Ll.prototype.i=function(){return{}},Zs=new Ll;function as(g,A,L,J){this.j=g,this.i=A,this.l=L,this.R=J||1,this.U=new zn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ju}function ju(){this.i=null,this.g="",this.h=!1}var bs={},Ws={};function _a(g,A,L){g.L=1,g.v=Br(pn(A)),g.m=L,g.P=!0,Sn(g,null)}function Sn(g,A){g.F=Date.now(),sn(g),g.A=pn(g.v);var L=g.A,J=g.R;Array.isArray(J)||(J=[String(J)]),Cs(L.i,"t",J),g.C=0,L=g.j.J,g.h=new ju,g.g=Ua(g.j,L?A:null,!g.m),0<g.O&&(g.M=new ga(U(g.Y,g,g.g),g.O)),A=g.U,L=g.g,J=g.ca;var ot="readystatechange";Array.isArray(ot)||(ot&&(an[0]=ot.toString()),ot=an);for(var vt=0;vt<ot.length;vt++){var Lt=Fe(L,ot[vt],J||A.handleEvent,!1,A.h||A);if(!Lt)break;A.g[Lt.key]=Lt}A=g.H?V(g.H):{},g.m?(g.u||(g.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,A)):(g.u="GET",g.g.ea(g.A,g.u,null,A)),es(),ns(g.i,g.u,g.A,g.l,g.R,g.m)}as.prototype.ca=function(g){g=g.target;const A=this.M;A&&Ta(g)==3?A.j():this.Y(g)},as.prototype.Y=function(g){try{if(g==this.g)t:{const Pn=Ta(this.g);var A=this.g.Ba();const Dn=this.g.Z();if(!(3>Pn)&&(Pn!=3||this.g&&(this.h.h||this.g.oa()||Qu(this.g)))){this.J||Pn!=4||A==7||(A==8||0>=Dn?es(3):es(2)),Yi(this);var L=this.g.Z();this.X=L;e:if(Je(this)){var J=Qu(this.g);g="";var ot=J.length,vt=Ta(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pi(this),mi(this);var Lt="";break e}this.h.i=new m.TextDecoder}for(A=0;A<ot;A++)this.h.h=!0,g+=this.h.i.decode(J[A],{stream:!(vt&&A==ot-1)});J.length=0,this.h.g+=g,this.C=0,Lt=this.h.g}else Lt=this.g.oa();if(this.o=L==200,qu(this.i,this.u,this.A,this.l,this.R,Pn,L),this.o){if(this.T&&!this.K){e:{if(this.g){var ve,_n=this.g;if((ve=_n.g?_n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(ve)){var Ee=ve;break e}}Ee=null}if(L=Ee)Mi(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xi(this,L);else{this.o=!1,this.s=3,En(12),pi(this),mi(this);break t}}if(this.P){L=!0;let ii;for(;!this.J&&this.C<Lt.length;)if(ii=Ma(this,Lt),ii==Ws){Pn==4&&(this.s=4,En(14),L=!1),Mi(this.i,this.l,null,"[Incomplete Response]");break}else if(ii==bs){this.s=4,En(15),Mi(this.i,this.l,Lt,"[Invalid Chunk]"),L=!1;break}else Mi(this.i,this.l,ii,null),xi(this,ii);if(Je(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pn!=4||Lt.length!=0||this.h.h||(this.s=1,En(16),L=!1),this.o=this.o&&L,!L)Mi(this.i,this.l,Lt,"[Invalid Chunked Response]"),pi(this),mi(this);else if(0<Lt.length&&!this.W){this.W=!0;var Cn=this.j;Cn.g==this&&Cn.ba&&!Cn.M&&(Cn.j.info("Great, no buffering proxy detected. Bytes received: "+Lt.length),ar(Cn),Cn.M=!0,En(11))}}else Mi(this.i,this.l,Lt,null),xi(this,Lt);Pn==4&&pi(this),this.o&&!this.J&&(Pn==4?zo(this.j,this):(this.o=!1,sn(this)))}else lf(this.g),L==400&&0<Lt.indexOf("Unknown SID")?(this.s=3,En(12)):(this.s=0,En(13)),pi(this),mi(this)}}}catch{}finally{}};function Je(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Ma(g,A){var L=g.C,J=A.indexOf(`
`,L);return J==-1?Ws:(L=Number(A.substring(L,J)),isNaN(L)?bs:(J+=1,J+L>A.length?Ws:(A=A.slice(J,J+L),g.C=J+L,A)))}as.prototype.cancel=function(){this.J=!0,pi(this)};function sn(g){g.S=Date.now()+g.I,zl(g,g.I)}function zl(g,A){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Ss(U(g.ba,g),A)}function Yi(g){g.B&&(m.clearTimeout(g.B),g.B=null)}as.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(ni(this.i,this.A),this.L!=2&&(es(),En(17)),pi(this),this.s=2,mi(this)):zl(this,this.S-g)};function mi(g){g.j.G==0||g.J||zo(g.j,g)}function pi(g){Yi(g);var A=g.M;A&&typeof A.ma=="function"&&A.ma(),g.M=null,Ae(g.U),g.g&&(A=g.g,g.g=null,A.abort(),A.ma())}function xi(g,A){try{var L=g.j;if(L.G!=0&&(L.g==g||Js(L.h,g))){if(!g.K&&Js(L.h,g)&&L.G==3){try{var J=L.Da.g.parse(A)}catch{J=null}if(Array.isArray(J)&&J.length==3){var ot=J;if(ot[0]==0){t:if(!L.u){if(L.g)if(L.g.F+3e3<g.F)Qr(L),Hl(L);else break t;Fl(L),En(18)}}else L.za=ot[1],0<L.za-L.T&&37500>ot[2]&&L.F&&L.v==0&&!L.C&&(L.C=Ss(U(L.Za,L),6e3));if(1>=Fu(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else Ds(L,11)}else if((g.K||L.g==g)&&Qr(L),!C(A))for(ot=L.Da.g.parse(A),A=0;A<ot.length;A++){let Ee=ot[A];if(L.T=Ee[0],Ee=Ee[1],L.G==2)if(Ee[0]=="c"){L.K=Ee[1],L.ia=Ee[2];const Cn=Ee[3];Cn!=null&&(L.la=Cn,L.j.info("VER="+L.la));const Pn=Ee[4];Pn!=null&&(L.Aa=Pn,L.j.info("SVER="+L.Aa));const Dn=Ee[5];Dn!=null&&typeof Dn=="number"&&0<Dn&&(J=1.5*Dn,L.L=J,L.j.info("backChannelRequestTimeoutMs_="+J)),J=L;const ii=g.g;if(ii){const za=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(za){var vt=J.h;vt.g||za.indexOf("spdy")==-1&&za.indexOf("quic")==-1&&za.indexOf("h2")==-1||(vt.j=vt.l,vt.g=new Set,vt.h&&($s(vt,vt.h),vt.h=null))}if(J.D){const Ho=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(J.ya=Ho,Ve(J.I,J.D,Ho))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-g.F,L.j.info("Handshake RTT: "+L.R+"ms")),J=L;var Lt=g;if(J.qa=tc(J,J.J?J.ia:null,J.W),Lt.K){Xi(J.h,Lt);var ve=Lt,_n=J.L;_n&&(ve.I=_n),ve.B&&(Yi(ve),sn(ve)),J.g=Lt}else Ju(J);0<L.i.length&&kl(L)}else Ee[0]!="stop"&&Ee[0]!="close"||Ds(L,7);else L.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Ds(L,7):Lo(L):Ee[0]!="noop"&&L.l&&L.l.ta(Ee),L.v=0)}}es(4)}catch{}}var jc=class{constructor(g,A){this.g=g,this.map=A}};function Oo(g){this.l=g||10,m.PerformanceNavigationTiming?(g=m.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mo(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Fu(g){return g.h?1:g.g?g.g.size:0}function Js(g,A){return g.h?g.h==A:g.g?g.g.has(A):!1}function $s(g,A){g.g?g.g.add(A):g.h=A}function Xi(g,A){g.h&&g.h==A?g.h=null:g.g&&g.g.has(A)&&g.g.delete(A)}Oo.prototype.cancel=function(){if(this.i=yi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function yi(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let A=g.i;for(const L of g.g.values())A=A.concat(L.D);return A}return I(g.i)}function Fc(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(_(g)){for(var A=[],L=g.length,J=0;J<L;J++)A.push(g[J]);return A}A=[],L=0;for(J in g)A[L++]=g[J];return A}function Kc(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(_(g)||typeof g=="string"){var A=[];g=g.length;for(var L=0;L<g;L++)A.push(L);return A}A=[],L=0;for(const J in g)A[L++]=J;return A}}}function Lr(g,A){if(g.forEach&&typeof g.forEach=="function")g.forEach(A,void 0);else if(_(g)||typeof g=="string")Array.prototype.forEach.call(g,A,void 0);else for(var L=Kc(g),J=Fc(g),ot=J.length,vt=0;vt<ot;vt++)A.call(void 0,J[vt],L&&L[vt],g)}var xo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zr(g,A){if(g){g=g.split("&");for(var L=0;L<g.length;L++){var J=g[L].indexOf("="),ot=null;if(0<=J){var vt=g[L].substring(0,J);ot=g[L].substring(J+1)}else vt=g[L];A(vt,ot?decodeURIComponent(ot.replace(/\+/g," ")):"")}}}function As(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof As){this.h=g.h,tr(this,g.j),this.o=g.o,this.g=g.g,Pr(this,g.s),this.l=g.l;var A=g.i,L=new ss;L.i=A.i,A.g&&(L.g=new Map(A.g),L.h=A.h),Pl(this,L),this.m=g.m}else g&&(A=String(g).match(xo))?(this.h=!1,tr(this,A[1]||"",!0),this.o=va(A[2]||""),this.g=va(A[3]||"",!0),Pr(this,A[4]),this.l=va(A[5]||"",!0),Pl(this,A[6]||"",!0),this.m=va(A[7]||"")):(this.h=!1,this.i=new ss(null,this.h))}As.prototype.toString=function(){var g=[],A=this.j;A&&g.push(Ea(A,Gr,!0),":");var L=this.g;return(L||A=="file")&&(g.push("//"),(A=this.o)&&g.push(Ea(A,Gr,!0),"@"),g.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&g.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&g.push("/"),g.push(Ea(L,L.charAt(0)=="/"?Bl:Ku,!0))),(L=this.i.toString())&&g.push("?",L),(L=this.m)&&g.push("#",Ea(L,Xc)),g.join("")};function pn(g){return new As(g)}function tr(g,A,L){g.j=L?va(A,!0):A,g.j&&(g.j=g.j.replace(/:$/,""))}function Pr(g,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);g.s=A}else g.s=null}function Pl(g,A,L){A instanceof ss?(g.i=A,Uo(g.i,g.h)):(L||(A=Ea(A,Yc)),g.i=new ss(A,g.h))}function Ve(g,A,L){g.i.set(A,L)}function Br(g){return Ve(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function va(g,A){return g?A?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Ea(g,A,L){return typeof g=="string"?(g=encodeURI(g).replace(A,Vo),L&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Vo(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Gr=/[#\/\?@]/g,Ku=/[#\?:]/g,Bl=/[#\?]/g,Yc=/[#\?@]/g,Xc=/#/g;function ss(g,A){this.h=this.g=null,this.i=g||null,this.j=!!A}function Sa(g){g.g||(g.g=new Map,g.h=0,g.i&&zr(g.i,function(A,L){g.add(decodeURIComponent(A.replace(/\+/g," ")),L)}))}a=ss.prototype,a.add=function(g,A){Sa(this),this.i=null,g=rs(this,g);var L=this.g.get(g);return L||this.g.set(g,L=[]),L.push(A),this.h+=1,this};function Hr(g,A){Sa(g),A=rs(g,A),g.g.has(A)&&(g.i=null,g.h-=g.g.get(A).length,g.g.delete(A))}function Rs(g,A){return Sa(g),A=rs(g,A),g.g.has(A)}a.forEach=function(g,A){Sa(this),this.g.forEach(function(L,J){L.forEach(function(ot){g.call(A,ot,J,this)},this)},this)},a.na=function(){Sa(this);const g=Array.from(this.g.values()),A=Array.from(this.g.keys()),L=[];for(let J=0;J<A.length;J++){const ot=g[J];for(let vt=0;vt<ot.length;vt++)L.push(A[J])}return L},a.V=function(g){Sa(this);let A=[];if(typeof g=="string")Rs(this,g)&&(A=A.concat(this.g.get(rs(this,g))));else{g=Array.from(this.g.values());for(let L=0;L<g.length;L++)A=A.concat(g[L])}return A},a.set=function(g,A){return Sa(this),this.i=null,g=rs(this,g),Rs(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[A]),this.h+=1,this},a.get=function(g,A){return g?(g=this.V(g),0<g.length?String(g[0]):A):A};function Cs(g,A,L){Hr(g,A),0<L.length&&(g.i=null,g.g.set(rs(g,A),I(L)),g.h+=L.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],A=Array.from(this.g.keys());for(var L=0;L<A.length;L++){var J=A[L];const vt=encodeURIComponent(String(J)),Lt=this.V(J);for(J=0;J<Lt.length;J++){var ot=vt;Lt[J]!==""&&(ot+="="+encodeURIComponent(String(Lt[J]))),g.push(ot)}}return this.i=g.join("&")};function rs(g,A){return A=String(A),g.j&&(A=A.toLowerCase()),A}function Uo(g,A){A&&!g.j&&(Sa(g),g.i=null,g.g.forEach(function(L,J){var ot=J.toLowerCase();J!=ot&&(Hr(this,J),Cs(this,ot,L))},g)),g.j=A}function Yu(g,A){const L=new Ts;if(m.Image){const J=new Image;J.onload=w(Qi,L,"TestLoadImage: loaded",!0,A,J),J.onerror=w(Qi,L,"TestLoadImage: error",!1,A,J),J.onabort=w(Qi,L,"TestLoadImage: abort",!1,A,J),J.ontimeout=w(Qi,L,"TestLoadImage: timeout",!1,A,J),m.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=g}else A(!1)}function kr(g,A){const L=new Ts,J=new AbortController,ot=setTimeout(()=>{J.abort(),Qi(L,"TestPingServer: timeout",!1,A)},1e4);fetch(g,{signal:J.signal}).then(vt=>{clearTimeout(ot),vt.ok?Qi(L,"TestPingServer: ok",!0,A):Qi(L,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(ot),Qi(L,"TestPingServer: error",!1,A)})}function Qi(g,A,L,J,ot){try{ot&&(ot.onload=null,ot.onerror=null,ot.onabort=null,ot.ontimeout=null),J(L)}catch{}}function qr(){this.g=new Zn}function ls(g,A,L){const J=L||"";try{Lr(g,function(ot,vt){let Lt=ot;v(ot)&&(Lt=ma(ot)),A.push(J+vt+"="+encodeURIComponent(Lt))})}catch(ot){throw A.push(J+"type="+encodeURIComponent("_badmap")),ot}}function jr(g){this.l=g.Ub||null,this.j=g.eb||!1}M(jr,Fs),jr.prototype.g=function(){return new er(this.l,this.j)},jr.prototype.i=function(g){return function(){return g}}({});function er(g,A){Ce.call(this),this.D=g,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(er,Ce),a=er.prototype,a.open=function(g,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=A,this.readyState=1,xa(this)},a.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(A.body=g),(this.D||m).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zi(this)),this.readyState=0},a.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,xa(this)),this.g&&(this.readyState=3,xa(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Io(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Io(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}a.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var A=g.value?g.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!g.done}))&&(this.response=this.responseText+=A)}g.done?Zi(this):xa(this),this.readyState==3&&Io(this)}},a.Ra=function(g){this.g&&(this.response=this.responseText=g,Zi(this))},a.Qa=function(g){this.g&&(this.response=g,Zi(this))},a.ga=function(){this.g&&Zi(this)};function Zi(g){g.readyState=4,g.l=null,g.j=null,g.v=null,xa(g)}a.setRequestHeader=function(g,A){this.u.append(g,A)},a.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],A=this.h.entries();for(var L=A.next();!L.done;)L=L.value,g.push(L[0]+": "+L[1]),L=A.next();return g.join(`\r
`)};function xa(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(er.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Fr(g){let A="";return j(g,function(L,J){A+=J,A+=":",A+=L,A+=`\r
`}),A}function Wn(g,A,L){t:{for(J in L){var J=!1;break t}J=!0}J||(L=Fr(L),typeof g=="string"?L!=null&&encodeURIComponent(String(L)):Ve(g,A,L))}function Pe(g){Ce.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Pe,Ce);var Kr=/^https?$/i,Yr=["POST","PUT"];a=Pe.prototype,a.Ha=function(g){this.J=g},a.ea=function(g,A,L,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);A=A?A.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zs.g(),this.v=this.o?Gu(this.o):Gu(Zs),this.g.onreadystatechange=U(this.Ea,this);try{this.B=!0,this.g.open(A,String(g),!0),this.B=!1}catch(vt){Xu(this,vt);return}if(g=L||"",L=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var ot in J)L.set(ot,J[ot]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const vt of J.keys())L.set(vt,J.get(vt));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(L.keys()).find(vt=>vt.toLowerCase()=="content-type"),ot=m.FormData&&g instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Yr,A,void 0))||J||ot||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[vt,Lt]of L)this.g.setRequestHeader(vt,Lt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ir(this),this.u=!0,this.g.send(g),this.u=!1}catch(vt){Xu(this,vt)}};function Xu(g,A){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=A,g.m=5,Va(g),os(g)}function Va(g){g.A||(g.A=!0,ke(g,"complete"),ke(g,"error"))}a.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,ke(this,"complete"),ke(this,"abort"),os(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),os(this,!0)),Pe.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?nr(this):this.bb())},a.bb=function(){nr(this)};function nr(g){if(g.h&&typeof d<"u"&&(!g.v[1]||Ta(g)!=4||g.Z()!=2)){if(g.u&&Ta(g)==4)da(g.Ea,0,g);else if(ke(g,"readystatechange"),Ta(g)==4){g.h=!1;try{const Lt=g.Z();t:switch(Lt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break t;default:A=!1}var L;if(!(L=A)){var J;if(J=Lt===0){var ot=String(g.D).match(xo)[1]||null;!ot&&m.self&&m.self.location&&(ot=m.self.location.protocol.slice(0,-1)),J=!Kr.test(ot?ot.toLowerCase():"")}L=J}if(L)ke(g,"complete"),ke(g,"success");else{g.m=6;try{var vt=2<Ta(g)?g.g.statusText:""}catch{vt=""}g.l=vt+" ["+g.Z()+"]",Va(g)}}finally{os(g)}}}}function os(g,A){if(g.g){ir(g);const L=g.g,J=g.v[0]?()=>{}:null;g.g=null,g.v=null,A||ke(g,"ready");try{L.onreadystatechange=J}catch{}}}function ir(g){g.I&&(m.clearTimeout(g.I),g.I=null)}a.isActive=function(){return!!this.g};function Ta(g){return g.g?g.g.readyState:0}a.Z=function(){try{return 2<Ta(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(g){if(this.g){var A=this.g.responseText;return g&&A.indexOf(g)==0&&(A=A.substring(g.length)),Fi(A)}};function Qu(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function lf(g){const A={};g=(g.g&&2<=Ta(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<g.length;J++){if(C(g[J]))continue;var L=G(g[J]);const ot=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const vt=A[ot]||[];A[ot]=vt,vt.push(L)}q(A,function(J){return J.join(", ")})}a.Ba=function(){return this.m},a.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yn(g,A,L){return L&&L.internalChannelParams&&L.internalChannelParams[g]||A}function Gl(g){this.Aa=0,this.i=[],this.j=new Ts,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yn("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yn("baseRetryDelayMs",5e3,g),this.cb=yn("retryDelaySeedMs",1e4,g),this.Wa=yn("forwardChannelMaxRetries",2,g),this.wa=yn("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Oo(g&&g.concurrentRequestLimit),this.Da=new qr,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}a=Gl.prototype,a.la=8,a.G=1,a.connect=function(g,A,L,J){En(0),this.W=g,this.H=A||{},L&&J!==void 0&&(this.H.OSID=L,this.H.OAID=J),this.F=this.X,this.I=tc(this,null,this.W),kl(this)};function Lo(g){if(Zu(g),g.G==3){var A=g.U++,L=pn(g.I);if(Ve(L,"SID",g.K),Ve(L,"RID",A),Ve(L,"TYPE","terminate"),Xr(g,L),A=new as(g,g.j,A),A.L=2,A.v=Br(pn(L)),L=!1,m.navigator&&m.navigator.sendBeacon)try{L=m.navigator.sendBeacon(A.v.toString(),"")}catch{}!L&&m.Image&&(new Image().src=A.v,L=!0),L||(A.g=Ua(A.j,null),A.g.ea(A.v)),A.F=Date.now(),sn(A)}Po(g)}function Hl(g){g.g&&(ar(g),g.g.cancel(),g.g=null)}function Zu(g){Hl(g),g.u&&(m.clearTimeout(g.u),g.u=null),Qr(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&m.clearTimeout(g.s),g.s=null)}function kl(g){if(!Mo(g.h)&&!g.s){g.s=!0;var A=g.Ga;$||X(),at||($(),at=!0),dt.add(A,g),g.B=0}}function ql(g,A){return Fu(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=A.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Ss(U(g.Ga,g,A),Kl(g,g.B)),g.B++,!0)}a.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const ot=new as(this,this.j,g);let vt=this.o;if(this.S&&(vt?(vt=V(vt),x(vt,this.S)):vt=this.S),this.m!==null||this.O||(ot.H=vt,vt=null),this.P)t:{for(var A=0,L=0;L<this.i.length;L++){e:{var J=this.i[L];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break e}J=void 0}if(J===void 0)break;if(A+=J,4096<A){A=L;break t}if(A===4096||L===this.i.length-1){A=L+1;break t}}A=1e3}else A=1e3;A=Wu(this,ot,A),L=pn(this.I),Ve(L,"RID",g),Ve(L,"CVER",22),this.D&&Ve(L,"X-HTTP-Session-Id",this.D),Xr(this,L),vt&&(this.O?A="headers="+encodeURIComponent(String(Fr(vt)))+"&"+A:this.m&&Wn(L,this.m,vt)),$s(this.h,ot),this.Ua&&Ve(L,"TYPE","init"),this.P?(Ve(L,"$req",A),Ve(L,"SID","null"),ot.T=!0,_a(ot,L,null)):_a(ot,L,A),this.G=2}}else this.G==3&&(g?jl(this,g):this.i.length==0||Mo(this.h)||jl(this))};function jl(g,A){var L;A?L=A.l:L=g.U++;const J=pn(g.I);Ve(J,"SID",g.K),Ve(J,"RID",L),Ve(J,"AID",g.T),Xr(g,J),g.m&&g.o&&Wn(J,g.m,g.o),L=new as(g,g.j,L,g.B+1),g.m===null&&(L.H=g.o),A&&(g.i=A.D.concat(g.i)),A=Wu(g,L,1e3),L.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),$s(g.h,L),_a(L,J,A)}function Xr(g,A){g.H&&j(g.H,function(L,J){Ve(A,J,L)}),g.l&&Lr({},function(L,J){Ve(A,J,L)})}function Wu(g,A,L){L=Math.min(g.i.length,L);var J=g.l?U(g.l.Na,g.l,g):null;t:{var ot=g.i;let vt=-1;for(;;){const Lt=["count="+L];vt==-1?0<L?(vt=ot[0].g,Lt.push("ofs="+vt)):vt=0:Lt.push("ofs="+vt);let ve=!0;for(let _n=0;_n<L;_n++){let Ee=ot[_n].g;const Cn=ot[_n].map;if(Ee-=vt,0>Ee)vt=Math.max(0,ot[_n].g-100),ve=!1;else try{ls(Cn,Lt,"req"+Ee+"_")}catch{J&&J(Cn)}}if(ve){J=Lt.join("&");break t}}}return g=g.i.splice(0,L),A.D=g,J}function Ju(g){if(!g.g&&!g.u){g.Y=1;var A=g.Fa;$||X(),at||($(),at=!0),dt.add(A,g),g.v=0}}function Fl(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Ss(U(g.Fa,g),Kl(g,g.v)),g.v++,!0)}a.Fa=function(){if(this.u=null,$u(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Ss(U(this.ab,this),g)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,En(10),Hl(this),$u(this))};function ar(g){g.A!=null&&(m.clearTimeout(g.A),g.A=null)}function $u(g){g.g=new as(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var A=pn(g.qa);Ve(A,"RID","rpc"),Ve(A,"SID",g.K),Ve(A,"AID",g.T),Ve(A,"CI",g.F?"0":"1"),!g.F&&g.ja&&Ve(A,"TO",g.ja),Ve(A,"TYPE","xmlhttp"),Xr(g,A),g.m&&g.o&&Wn(A,g.m,g.o),g.L&&(g.g.I=g.L);var L=g.g;g=g.ia,L.L=1,L.v=Br(pn(A)),L.m=null,L.P=!0,Sn(L,g)}a.Za=function(){this.C!=null&&(this.C=null,Hl(this),Fl(this),En(19))};function Qr(g){g.C!=null&&(m.clearTimeout(g.C),g.C=null)}function zo(g,A){var L=null;if(g.g==A){Qr(g),ar(g),g.g=null;var J=2}else if(Js(g.h,A))L=A.D,Xi(g.h,A),J=1;else return;if(g.G!=0){if(A.o)if(J==1){L=A.m?A.m.length:0,A=Date.now()-A.F;var ot=g.B;J=Xs(),ke(J,new ku(J,L)),kl(g)}else Ju(g);else if(ot=A.s,ot==3||ot==0&&0<A.X||!(J==1&&ql(g,A)||J==2&&Fl(g)))switch(L&&0<L.length&&(A=g.h,A.i=A.i.concat(L)),ot){case 1:Ds(g,5);break;case 4:Ds(g,10);break;case 3:Ds(g,6);break;default:Ds(g,2)}}}function Kl(g,A){let L=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(L*=2),L*A}function Ds(g,A){if(g.j.info("Error code "+A),A==2){var L=U(g.fb,g),J=g.Xa;const ot=!J;J=new As(J||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||tr(J,"https"),Br(J),ot?Yu(J.toString(),L):kr(J.toString(),L)}else En(2);g.G=0,g.l&&g.l.sa(A),Po(g),Zu(g)}a.fb=function(g){g?(this.j.info("Successfully pinged google.com"),En(2)):(this.j.info("Failed to ping google.com"),En(1))};function Po(g){if(g.G=0,g.ka=[],g.l){const A=yi(g.h);(A.length!=0||g.i.length!=0)&&(P(g.ka,A),P(g.ka,g.i),g.h.i.length=0,I(g.i),g.i.length=0),g.l.ra()}}function tc(g,A,L){var J=L instanceof As?pn(L):new As(L);if(J.g!="")A&&(J.g=A+"."+J.g),Pr(J,J.s);else{var ot=m.location;J=ot.protocol,A=A?A+"."+ot.hostname:ot.hostname,ot=+ot.port;var vt=new As(null);J&&tr(vt,J),A&&(vt.g=A),ot&&Pr(vt,ot),L&&(vt.l=L),J=vt}return L=g.D,A=g.ya,L&&A&&Ve(J,L,A),Ve(J,"VER",g.la),Xr(g,J),J}function Ua(g,A,L){if(A&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=g.Ca&&!g.pa?new Pe(new jr({eb:L})):new Pe(g.pa),A.Ha(g.J),A}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bo(){}a=Bo.prototype,a.ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){};function Go(){}Go.prototype.g=function(g,A){return new _i(g,A)};function _i(g,A){Ce.call(this),this.g=new Gl(A),this.l=g,this.h=A&&A.messageUrlParams||null,g=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(g?g["X-WebChannel-Content-Type"]=A.messageContentType:g={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(g?g["X-WebChannel-Client-Profile"]=A.va:g={"X-WebChannel-Client-Profile":A.va}),this.g.S=g,(g=A&&A.Sb)&&!C(g)&&(this.g.m=g),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!C(A)&&(this.g.D=A,g=this.h,g!==null&&A in g&&(g=this.h,A in g&&delete g[A])),this.j=new La(this)}M(_i,Ce),_i.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_i.prototype.close=function(){Lo(this.g)},_i.prototype.o=function(g){var A=this.g;if(typeof g=="string"){var L={};L.__data__=g,g=L}else this.u&&(L={},L.__data__=ma(g),g=L);A.i.push(new jc(A.Ya++,g)),A.G==3&&kl(A)},_i.prototype.N=function(){this.g.l=null,delete this.j,Lo(this.g),delete this.g,_i.aa.N.call(this)};function us(g){Ks.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var A=g.__sm__;if(A){t:{for(const L in A){g=L;break t}g=void 0}(this.i=g)&&(g=this.i,A=A!==null&&g in A?A[g]:void 0),this.data=A}else this.data=g}M(us,Ks);function Ia(){Ki.call(this),this.status=1}M(Ia,Ki);function La(g){this.g=g}M(La,Bo),La.prototype.ua=function(){ke(this.g,"a")},La.prototype.ta=function(g){ke(this.g,new us(g))},La.prototype.sa=function(g){ke(this.g,new Ia)},La.prototype.ra=function(){ke(this.g,"b")},Go.prototype.createWebChannel=Go.prototype.g,_i.prototype.send=_i.prototype.o,_i.prototype.open=_i.prototype.m,_i.prototype.close=_i.prototype.close,cE=function(){return new Go},uE=function(){return Xs()},oE=ya,f1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,Jm=ue,is.COMPLETE="complete",lE=is,Hu.EventType=pa,pa.OPEN="a",pa.CLOSE="b",pa.ERROR="c",pa.MESSAGE="d",Ce.prototype.listen=Ce.prototype.K,Jd=Hu,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,rE=Pe}).apply(typeof Hm<"u"?Hm:typeof self<"u"?self:typeof window<"u"?window:{});const fv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ca.UNAUTHENTICATED=new ca(null),ca.GOOGLE_CREDENTIALS=new ca("google-credentials-uid"),ca.FIRST_PARTY=new ca("first-party-uid"),ca.MOCK_USER=new ca("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new L1("@firebase/firestore");function zh(){return Pc.logLevel}function Bt(a,...t){if(Pc.logLevel<=De.DEBUG){const n=t.map(X1);Pc.debug(`Firestore (${nf}): ${a}`,...n)}}function Do(a,...t){if(Pc.logLevel<=De.ERROR){const n=t.map(X1);Pc.error(`Firestore (${nf}): ${a}`,...n)}}function Yh(a,...t){if(Pc.logLevel<=De.WARN){const n=t.map(X1);Pc.warn(`Firestore (${nf}): ${a}`,...n)}}function X1(a){if(typeof a=="string")return a;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(a="Unexpected state"){const t=`FIRESTORE (${nf}) INTERNAL ASSERTION FAILED: `+a;throw Do(t),new Error(t)}function We(a,t){a||te()}function re(a,t){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class jt extends No{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Rb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(ca.UNAUTHENTICATED))}shutdown(){}}class Cb{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Db{constructor(t){this.t=t,this.currentUser=ca.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){We(this.o===void 0);let r=this.i;const u=_=>this.i!==r?(r=this.i,n(_)):Promise.resolve();let c=new Ou;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ou,t.enqueueRetryable(()=>u(this.currentUser))};const d=()=>{const _=c;t.enqueueRetryable(async()=>{await _.promise,await u(this.currentUser)})},m=_=>{Bt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(_=>m(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?m(_):(Bt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ou)}},0),d()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Bt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We(typeof r.accessToken=="string"),new hE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return We(t===null||typeof t=="string"),new ca(t)}}class wb{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=ca.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Nb{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new wb(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(ca.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ob{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mb{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){We(this.o===void 0);const r=c=>{c.error!=null&&Bt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,Bt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable(()=>r(c))};const u=c=>{Bt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>u(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?u(c):Bt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(We(typeof n.token=="string"),this.R=n.token,new Ob(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<a;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const u=xb(40);for(let c=0;c<u.length;++c)r.length<20&&u[c]<n&&(r+=t.charAt(u[c]%t.length))}return r}}function xe(a,t){return a<t?-1:a>t?1:0}function Xh(a,t,n){return a.length===t.length&&a.every((r,u)=>n(r,t[u]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{static now(){return fi.fromMillis(Date.now())}static fromDate(t){return fi.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new fi(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new jt(Vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new jt(Vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new jt(Vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new jt(Vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?xe(this.nanoseconds,t.nanoseconds):xe(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(t){return new ae(t)}static min(){return new ae(new fi(0,0))}static max(){return new ae(new fi(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(t,n,r){n===void 0?n=0:n>t.length&&te(),r===void 0?r=t.length-n:r>t.length-n&&te(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Dl.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Dl?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let u=0;u<r;u++){const c=Dl.compareSegments(t.get(u),n.get(u));if(c!==0)return c}return Math.sign(t.length-n.length)}static compareSegments(t,n){const r=Dl.isNumericId(t),u=Dl.isNumericId(n);return r&&!u?-1:!r&&u?1:r&&u?Dl.extractNumericId(t).compare(Dl.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Nu.fromString(t.substring(4,t.length-2))}}class An extends Dl{construct(t,n,r){return new An(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new jt(Vt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(u=>u.length>0))}return new An(n)}static emptyPath(){return new An([])}}const Vb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ki extends Dl{construct(t,n,r){return new ki(t,n,r)}static isValidIdentifier(t){return Vb.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ki.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ki(["__name__"])}static fromServerFormat(t){const n=[];let r="",u=0;const c=()=>{if(r.length===0)throw new jt(Vt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;u<t.length;){const m=t[u];if(m==="\\"){if(u+1===t.length)throw new jt(Vt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const _=t[u+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new jt(Vt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=_,u+=2}else m==="`"?(d=!d,u++):m!=="."||d?(r+=m,u++):(c(),u++)}if(c(),d)throw new jt(Vt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ki(n)}static emptyPath(){return new ki([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(t){this.path=t}static fromPath(t){return new Xt(An.fromString(t))}static fromName(t){return new Xt(An.fromString(t).popFirst(5))}static empty(){return new Xt(An.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&An.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return An.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Xt(new An(t.slice()))}}function Ub(a,t){const n=a.toTimestamp().seconds,r=a.toTimestamp().nanoseconds+1,u=ae.fromTimestamp(r===1e9?new fi(n+1,0):new fi(n,r));return new xu(u,Xt.empty(),t)}function Ib(a){return new xu(a.readTime,a.key,-1)}class xu{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new xu(ae.min(),Xt.empty(),-1)}static max(){return new xu(ae.max(),Xt.empty(),-1)}}function Lb(a,t){let n=a.readTime.compareTo(t.readTime);return n!==0?n:(n=Xt.comparator(a.documentKey,t.documentKey),n!==0?n:xe(a.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(a){if(a.code!==Vt.FAILED_PRECONDITION||a.message!==zb)throw a;Bt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new wt((r,u)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(r,u)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,u)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof wt?n:wt.resolve(n)}catch(n){return wt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):wt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):wt.reject(n)}static resolve(t){return new wt((n,r)=>{n(t)})}static reject(t){return new wt((n,r)=>{r(t)})}static waitFor(t){return new wt((n,r)=>{let u=0,c=0,d=!1;t.forEach(m=>{++u,m.next(()=>{++c,d&&c===u&&n()},_=>r(_))}),d=!0,c===u&&n()})}static or(t){let n=wt.resolve(!1);for(const r of t)n=n.next(u=>u?wt.resolve(u):r());return n}static forEach(t,n){const r=[];return t.forEach((u,c)=>{r.push(n.call(this,u,c))}),this.waitFor(r)}static mapArray(t,n){return new wt((r,u)=>{const c=t.length,d=new Array(c);let m=0;for(let _=0;_<c;_++){const v=_;n(t[v]).next(b=>{d[v]=b,++m,m===c&&r(d)},b=>u(b))}})}static doWhile(t,n){return new wt((r,u)=>{const c=()=>{t()===!0?n().next(()=>{c()},u):r()};c()})}}function Bb(a){const t=a.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sf(a){return a.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}x0.oe=-1;function V0(a){return a==null}function d0(a){return a===0&&1/a==-1/0}function Gb(a){return typeof a=="number"&&Number.isInteger(a)&&!d0(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(a){let t="";for(let n=0;n<a.length;n++)t.length>0&&(t=dv(t)),t=kb(a.get(n),t);return dv(t)}function kb(a,t){let n=t;const r=a.length;for(let u=0;u<r;u++){const c=a.charAt(u);switch(c){case"\0":n+="";break;case"":n+="";break;default:n+=c}}return n}function dv(a){return a+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(a){let t=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&t++;return t}function Gc(a,t){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&t(n,a[n])}function dE(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t,n){this.comparator=t,this.root=n||Hi.EMPTY}insert(t,n){return new Ln(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Hi.BLACK,null,null))}remove(t){return new Ln(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Hi.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const u=this.comparator(t,r.key);if(u===0)return n+r.left.size;u<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new km(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new km(this.root,t,this.comparator,!1)}getReverseIterator(){return new km(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new km(this.root,t,this.comparator,!0)}}class km{constructor(t,n,r,u){this.isReverse=u,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?r(t.key,n):1,n&&u&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Hi{constructor(t,n,r,u,c){this.key=t,this.value=n,this.color=r??Hi.RED,this.left=u??Hi.EMPTY,this.right=c??Hi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,u,c){return new Hi(t??this.key,n??this.value,r??this.color,u??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let u=this;const c=r(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,n,r),null):c===0?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(t,n,r)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Hi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,u=this;if(n(t,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(t,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),n(t,u.key)===0){if(u.right.isEmpty())return Hi.EMPTY;r=u.right.min(),u=u.copy(r.key,r.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(t,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Hi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Hi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const t=this.left.check();if(t!==this.right.check())throw te();return t+(this.isRed()?0:1)}}Hi.EMPTY=null,Hi.RED=!0,Hi.BLACK=!1;Hi.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(t,n,r,u,c){return this}insert(t,n,r){return new Hi(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t){this.comparator=t,this.data=new Ln(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const u=r.getNext();if(this.comparator(u.key,t[1])>=0)return;n(u.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new mv(this.data.getIterator())}getIteratorFrom(t){return new mv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof di)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=r.getNext().key;if(this.comparator(u,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new di(this.comparator);return n.data=t,n}}class mv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(t){this.fields=t,t.sort(ki.comparator)}static empty(){return new Vr([])}unionWith(t){let n=new di(ki.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Vr(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Xh(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(u){try{return atob(u)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new gE("Invalid base64 string: "+c):c}}(t);return new qi(n)}static fromUint8Array(t){const n=function(u){let c="";for(let d=0;d<u.length;++d)c+=String.fromCharCode(u[d]);return c}(t);return new qi(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let u=0;u<n.length;u++)r[u]=n.charCodeAt(u);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return xe(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}qi.EMPTY_BYTE_STRING=new qi("");const qb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vu(a){if(We(!!a),typeof a=="string"){let t=0;const n=qb.exec(a);if(We(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),t=Number(u)}const r=new Date(a);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ti(a.seconds),nanos:ti(a.nanos)}}function ti(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function Uu(a){return typeof a=="string"?qi.fromBase64String(a):qi.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(a){var t,n;return((n=(((t=a==null?void 0:a.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function U0(a){const t=a.mapValue.fields.__previous_value__;return Q1(t)?U0(t):t}function cg(a){const t=Vu(a.mapValue.fields.__local_write_time__.timestampValue);return new fi(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(t,n,r,u,c,d,m,_,v){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=u,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=_,this.useFetchStreams=v}}class hg{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new hg("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof hg&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Iu(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Q1(a)?4:Kb(a)?9007199254740991:Fb(a)?10:11:te()}function Vl(a,t){if(a===t)return!0;const n=Iu(a);if(n!==Iu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return cg(a).isEqual(cg(t));case 3:return function(u,c){if(typeof u.timestampValue=="string"&&typeof c.timestampValue=="string"&&u.timestampValue.length===c.timestampValue.length)return u.timestampValue===c.timestampValue;const d=Vu(u.timestampValue),m=Vu(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(a,t);case 5:return a.stringValue===t.stringValue;case 6:return function(u,c){return Uu(u.bytesValue).isEqual(Uu(c.bytesValue))}(a,t);case 7:return a.referenceValue===t.referenceValue;case 8:return function(u,c){return ti(u.geoPointValue.latitude)===ti(c.geoPointValue.latitude)&&ti(u.geoPointValue.longitude)===ti(c.geoPointValue.longitude)}(a,t);case 2:return function(u,c){if("integerValue"in u&&"integerValue"in c)return ti(u.integerValue)===ti(c.integerValue);if("doubleValue"in u&&"doubleValue"in c){const d=ti(u.doubleValue),m=ti(c.doubleValue);return d===m?d0(d)===d0(m):isNaN(d)&&isNaN(m)}return!1}(a,t);case 9:return Xh(a.arrayValue.values||[],t.arrayValue.values||[],Vl);case 10:case 11:return function(u,c){const d=u.mapValue.fields||{},m=c.mapValue.fields||{};if(gv(d)!==gv(m))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(m[_]===void 0||!Vl(d[_],m[_])))return!1;return!0}(a,t);default:return te()}}function fg(a,t){return(a.values||[]).find(n=>Vl(n,t))!==void 0}function Qh(a,t){if(a===t)return 0;const n=Iu(a),r=Iu(t);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(a.booleanValue,t.booleanValue);case 2:return function(c,d){const m=ti(c.integerValue||c.doubleValue),_=ti(d.integerValue||d.doubleValue);return m<_?-1:m>_?1:m===_?0:isNaN(m)?isNaN(_)?0:-1:1}(a,t);case 3:return pv(a.timestampValue,t.timestampValue);case 4:return pv(cg(a),cg(t));case 5:return xe(a.stringValue,t.stringValue);case 6:return function(c,d){const m=Uu(c),_=Uu(d);return m.compareTo(_)}(a.bytesValue,t.bytesValue);case 7:return function(c,d){const m=c.split("/"),_=d.split("/");for(let v=0;v<m.length&&v<_.length;v++){const b=xe(m[v],_[v]);if(b!==0)return b}return xe(m.length,_.length)}(a.referenceValue,t.referenceValue);case 8:return function(c,d){const m=xe(ti(c.latitude),ti(d.latitude));return m!==0?m:xe(ti(c.longitude),ti(d.longitude))}(a.geoPointValue,t.geoPointValue);case 9:return yv(a.arrayValue,t.arrayValue);case 10:return function(c,d){var m,_,v,b;const D=c.fields||{},U=d.fields||{},w=(m=D.value)===null||m===void 0?void 0:m.arrayValue,M=(_=U.value)===null||_===void 0?void 0:_.arrayValue,I=xe(((v=w==null?void 0:w.values)===null||v===void 0?void 0:v.length)||0,((b=M==null?void 0:M.values)===null||b===void 0?void 0:b.length)||0);return I!==0?I:yv(w,M)}(a.mapValue,t.mapValue);case 11:return function(c,d){if(c===qm.mapValue&&d===qm.mapValue)return 0;if(c===qm.mapValue)return 1;if(d===qm.mapValue)return-1;const m=c.fields||{},_=Object.keys(m),v=d.fields||{},b=Object.keys(v);_.sort(),b.sort();for(let D=0;D<_.length&&D<b.length;++D){const U=xe(_[D],b[D]);if(U!==0)return U;const w=Qh(m[_[D]],v[b[D]]);if(w!==0)return w}return xe(_.length,b.length)}(a.mapValue,t.mapValue);default:throw te()}}function pv(a,t){if(typeof a=="string"&&typeof t=="string"&&a.length===t.length)return xe(a,t);const n=Vu(a),r=Vu(t),u=xe(n.seconds,r.seconds);return u!==0?u:xe(n.nanos,r.nanos)}function yv(a,t){const n=a.values||[],r=t.values||[];for(let u=0;u<n.length&&u<r.length;++u){const c=Qh(n[u],r[u]);if(c)return c}return xe(n.length,r.length)}function Zh(a){return d1(a)}function d1(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(n){const r=Vu(n);return`time(${r.seconds},${r.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?function(n){return Uu(n).toBase64()}(a.bytesValue):"referenceValue"in a?function(n){return Xt.fromName(n).toString()}(a.referenceValue):"geoPointValue"in a?function(n){return`geo(${n.latitude},${n.longitude})`}(a.geoPointValue):"arrayValue"in a?function(n){let r="[",u=!0;for(const c of n.values||[])u?u=!1:r+=",",r+=d1(c);return r+"]"}(a.arrayValue):"mapValue"in a?function(n){const r=Object.keys(n.fields||{}).sort();let u="{",c=!0;for(const d of r)c?c=!1:u+=",",u+=`${d}:${d1(n.fields[d])}`;return u+"}"}(a.mapValue):te()}function $m(a){switch(Iu(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=U0(a);return t?16+$m(t):16;case 5:return 2*a.stringValue.length;case 6:return Uu(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((u,c)=>u+$m(c),0)}(a.arrayValue);case 10:case 11:return function(r){let u=0;return Gc(r.fields,(c,d)=>{u+=c.length+$m(d)}),u}(a.mapValue);default:throw te()}}function g1(a){return!!a&&"integerValue"in a}function Z1(a){return!!a&&"arrayValue"in a}function _v(a){return!!a&&"nullValue"in a}function vv(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function t0(a){return!!a&&"mapValue"in a}function Fb(a){var t,n;return((n=(((t=a==null?void 0:a.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ng(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const t={mapValue:{fields:{}}};return Gc(a.mapValue.fields,(n,r)=>t.mapValue.fields[n]=ng(r)),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ng(a.arrayValue.values[n]);return t}return Object.assign({},a)}function Kb(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(t){this.value=t}static empty(){return new js({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!t0(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ng(n)}setAll(t){let n=ki.emptyPath(),r={},u=[];t.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const _=this.getFieldsMap(n);this.applyChanges(_,r,u),r={},u=[],n=m.popLast()}d?r[m.lastSegment()]=ng(d):u.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,r,u)}delete(t){const n=this.field(t.popLast());t0(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Vl(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let u=n.mapValue.fields[t.get(r)];t0(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=u),n=u}return n.mapValue.fields}applyChanges(t,n,r){Gc(n,(u,c)=>t[u]=c);for(const u of r)delete t[u]}clone(){return new js(ng(this.value))}}function mE(a){const t=[];return Gc(a.fields,(n,r)=>{const u=new ki([n]);if(t0(r)){const c=mE(r.mapValue).fields;if(c.length===0)t.push(u);else for(const d of c)t.push(u.child(d))}else t.push(u)}),new Vr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(t,n,r,u,c,d,m){this.key=t,this.documentType=n,this.version=r,this.readTime=u,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(t){return new ha(t,0,ae.min(),ae.min(),ae.min(),js.empty(),0)}static newFoundDocument(t,n,r,u){return new ha(t,1,n,ae.min(),r,u,0)}static newNoDocument(t,n){return new ha(t,2,n,ae.min(),ae.min(),js.empty(),0)}static newUnknownDocument(t,n){return new ha(t,3,n,ae.min(),ae.min(),js.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=js.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=js.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ha&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ha(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(t,n){this.position=t,this.inclusive=n}}function Ev(a,t,n){let r=0;for(let u=0;u<a.position.length;u++){const c=t[u],d=a.position[u];if(c.field.isKeyField()?r=Xt.comparator(Xt.fromName(d.referenceValue),n.key):r=Qh(d,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function Sv(a,t){if(a===null)return t===null;if(t===null||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!Vl(a.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(t,n="asc"){this.field=t,this.dir=n}}function Yb(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{}class hi extends pE{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Qb(t,n,r):n==="array-contains"?new Jb(t,r):n==="in"?new $b(t,r):n==="not-in"?new t7(t,r):n==="array-contains-any"?new e7(t,r):new hi(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Zb(t,r):new Wb(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Qh(n,this.value)):n!==null&&Iu(this.value)===Iu(n)&&this.matchesComparison(Qh(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ul extends pE{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Ul(t,n)}matches(t){return yE(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function yE(a){return a.op==="and"}function _E(a){return Xb(a)&&yE(a)}function Xb(a){for(const t of a.filters)if(t instanceof Ul)return!1;return!0}function m1(a){if(a instanceof hi)return a.field.canonicalString()+a.op.toString()+Zh(a.value);if(_E(a))return a.filters.map(t=>m1(t)).join(",");{const t=a.filters.map(n=>m1(n)).join(",");return`${a.op}(${t})`}}function vE(a,t){return a instanceof hi?function(r,u){return u instanceof hi&&r.op===u.op&&r.field.isEqual(u.field)&&Vl(r.value,u.value)}(a,t):a instanceof Ul?function(r,u){return u instanceof Ul&&r.op===u.op&&r.filters.length===u.filters.length?r.filters.reduce((c,d,m)=>c&&vE(d,u.filters[m]),!0):!1}(a,t):void te()}function EE(a){return a instanceof hi?function(n){return`${n.field.canonicalString()} ${n.op} ${Zh(n.value)}`}(a):a instanceof Ul?function(n){return n.op.toString()+" {"+n.getFilters().map(EE).join(" ,")+"}"}(a):"Filter"}class Qb extends hi{constructor(t,n,r){super(t,n,r),this.key=Xt.fromName(r.referenceValue)}matches(t){const n=Xt.comparator(t.key,this.key);return this.matchesComparison(n)}}class Zb extends hi{constructor(t,n){super(t,"in",n),this.keys=SE("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Wb extends hi{constructor(t,n){super(t,"not-in",n),this.keys=SE("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function SE(a,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Xt.fromName(r.referenceValue))}class Jb extends hi{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Z1(n)&&fg(n.arrayValue,this.value)}}class $b extends hi{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&fg(this.value.arrayValue,n)}}class t7 extends hi{constructor(t,n){super(t,"not-in",n)}matches(t){if(fg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!fg(this.value.arrayValue,n)}}class e7 extends hi{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Z1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fg(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(t,n=null,r=[],u=[],c=null,d=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=u,this.limit=c,this.startAt=d,this.endAt=m,this.ue=null}}function Tv(a,t=null,n=[],r=[],u=null,c=null,d=null){return new n7(a,t,n,r,u,c,d)}function W1(a){const t=re(a);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>m1(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(c){return c.field.canonicalString()+c.dir}(r)).join(","),V0(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Zh(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Zh(r)).join(",")),t.ue=n}return t.ue}function J1(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!Yb(a.orderBy[n],t.orderBy[n]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!vE(a.filters[n],t.filters[n]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!Sv(a.startAt,t.startAt)&&Sv(a.endAt,t.endAt)}function p1(a){return Xt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(t,n=null,r=[],u=[],c=null,d="F",m=null,_=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=u,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=_,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function i7(a,t,n,r,u,c,d,m){return new I0(a,t,n,r,u,c,d,m)}function TE(a){return new I0(a)}function bv(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function a7(a){return a.collectionGroup!==null}function ig(a){const t=re(a);if(t.ce===null){t.ce=[];const n=new Set;for(const c of t.explicitOrderBy)t.ce.push(c),n.add(c.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new di(ki.comparator);return d.filters.forEach(_=>{_.getFlattenedFilters().forEach(v=>{v.isInequality()&&(m=m.add(v.field))})}),m})(t).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||t.ce.push(new m0(c,r))}),n.has(ki.keyField().canonicalString())||t.ce.push(new m0(ki.keyField(),r))}return t.ce}function Ml(a){const t=re(a);return t.le||(t.le=s7(t,ig(a))),t.le}function s7(a,t){if(a.limitType==="F")return Tv(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map(u=>{const c=u.dir==="desc"?"asc":"desc";return new m0(u.field,c)});const n=a.endAt?new g0(a.endAt.position,a.endAt.inclusive):null,r=a.startAt?new g0(a.startAt.position,a.startAt.inclusive):null;return Tv(a.path,a.collectionGroup,t,a.filters,a.limit,n,r)}}function y1(a,t,n){return new I0(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,n,a.startAt,a.endAt)}function L0(a,t){return J1(Ml(a),Ml(t))&&a.limitType===t.limitType}function bE(a){return`${W1(Ml(a))}|lt:${a.limitType}`}function Ph(a){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(u=>EE(u)).join(", ")}]`),V0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(u=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(u)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(u=>Zh(u)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(u=>Zh(u)).join(",")),`Target(${r})`}(Ml(a))}; limitType=${a.limitType})`}function z0(a,t){return t.isFoundDocument()&&function(r,u){const c=u.key.path;return r.collectionGroup!==null?u.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Xt.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(a,t)&&function(r,u){for(const c of ig(r))if(!c.field.isKeyField()&&u.data.field(c.field)===null)return!1;return!0}(a,t)&&function(r,u){for(const c of r.filters)if(!c.matches(u))return!1;return!0}(a,t)&&function(r,u){return!(r.startAt&&!function(d,m,_){const v=Ev(d,m,_);return d.inclusive?v<=0:v<0}(r.startAt,ig(r),u)||r.endAt&&!function(d,m,_){const v=Ev(d,m,_);return d.inclusive?v>=0:v>0}(r.endAt,ig(r),u))}(a,t)}function r7(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function AE(a){return(t,n)=>{let r=!1;for(const u of ig(a)){const c=l7(u,t,n);if(c!==0)return c;r=r||u.field.isKeyField()}return 0}}function l7(a,t,n){const r=a.field.isKeyField()?Xt.comparator(t.key,n.key):function(c,d,m){const _=d.data.field(c),v=m.data.field(c);return _!==null&&v!==null?Qh(_,v):te()}(a.field,t,n);switch(a.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[u,c]of r)if(this.equalsFn(u,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),u=this.inner[r];if(u===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let c=0;c<u.length;c++)if(this.equalsFn(u[c][0],t))return void(u[c]=[t,n]);u.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let u=0;u<r.length;u++)if(this.equalsFn(r[u][0],t))return r.length===1?delete this.inner[n]:r.splice(u,1),this.innerSize--,!0;return!1}forEach(t){Gc(this.inner,(n,r)=>{for(const[u,c]of r)t(u,c)})}isEmpty(){return dE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o7=new Ln(Xt.comparator);function wo(){return o7}const RE=new Ln(Xt.comparator);function $d(...a){let t=RE;for(const n of a)t=t.insert(n.key,n);return t}function CE(a){let t=RE;return a.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Uc(){return ag()}function DE(){return ag()}function ag(){return new Hc(a=>a.toString(),(a,t)=>a.isEqual(t))}const u7=new Ln(Xt.comparator),c7=new di(Xt.comparator);function we(...a){let t=c7;for(const n of a)t=t.add(n);return t}const h7=new di(xe);function f7(){return h7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:d0(t)?"-0":t}}function wE(a){return{integerValue:""+a}}function d7(a,t){return Gb(t)?wE(t):$1(a,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this._=void 0}}function g7(a,t,n){return a instanceof dg?function(u,c){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return c&&Q1(c)&&(c=U0(c)),c&&(d.fields.__previous_value__=c),{mapValue:d}}(n,t):a instanceof gg?OE(a,t):a instanceof mg?ME(a,t):function(u,c){const d=NE(u,c),m=Av(d)+Av(u.Pe);return g1(d)&&g1(u.Pe)?wE(m):$1(u.serializer,m)}(a,t)}function m7(a,t,n){return a instanceof gg?OE(a,t):a instanceof mg?ME(a,t):n}function NE(a,t){return a instanceof p0?function(r){return g1(r)||function(c){return!!c&&"doubleValue"in c}(r)}(t)?t:{integerValue:0}:null}class dg extends P0{}class gg extends P0{constructor(t){super(),this.elements=t}}function OE(a,t){const n=xE(t);for(const r of a.elements)n.some(u=>Vl(u,r))||n.push(r);return{arrayValue:{values:n}}}class mg extends P0{constructor(t){super(),this.elements=t}}function ME(a,t){let n=xE(t);for(const r of a.elements)n=n.filter(u=>!Vl(u,r));return{arrayValue:{values:n}}}class p0 extends P0{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Av(a){return ti(a.integerValue||a.doubleValue)}function xE(a){return Z1(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(t,n){this.field=t,this.transform=n}}function y7(a,t){return a.field.isEqual(t.field)&&function(r,u){return r instanceof gg&&u instanceof gg||r instanceof mg&&u instanceof mg?Xh(r.elements,u.elements,Vl):r instanceof p0&&u instanceof p0?Vl(r.Pe,u.Pe):r instanceof dg&&u instanceof dg}(a.transform,t.transform)}class _7{constructor(t,n){this.version=t,this.transformResults=n}}class Ao{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ao}static exists(t){return new Ao(void 0,t)}static updateTime(t){return new Ao(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function e0(a,t){return a.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(a.updateTime):a.exists===void 0||a.exists===t.isFoundDocument()}class B0{}function VE(a,t){if(!a.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return a.isNoDocument()?new IE(a.key,Ao.none()):new Tg(a.key,a.data,Ao.none());{const n=a.data,r=js.empty();let u=new di(ki.comparator);for(let c of t.fields)if(!u.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?r.delete(c):r.set(c,d),u=u.add(c)}return new kc(a.key,r,new Vr(u.toArray()),Ao.none())}}function v7(a,t,n){a instanceof Tg?function(u,c,d){const m=u.value.clone(),_=Cv(u.fieldTransforms,c,d.transformResults);m.setAll(_),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(a,t,n):a instanceof kc?function(u,c,d){if(!e0(u.precondition,c))return void c.convertToUnknownDocument(d.version);const m=Cv(u.fieldTransforms,c,d.transformResults),_=c.data;_.setAll(UE(u)),_.setAll(m),c.convertToFoundDocument(d.version,_).setHasCommittedMutations()}(a,t,n):function(u,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,t,n)}function sg(a,t,n,r){return a instanceof Tg?function(c,d,m,_){if(!e0(c.precondition,d))return m;const v=c.value.clone(),b=Dv(c.fieldTransforms,_,d);return v.setAll(b),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(a,t,n,r):a instanceof kc?function(c,d,m,_){if(!e0(c.precondition,d))return m;const v=Dv(c.fieldTransforms,_,d),b=d.data;return b.setAll(UE(c)),b.setAll(v),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(D=>D.field))}(a,t,n,r):function(c,d,m){return e0(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(a,t,n)}function E7(a,t){let n=null;for(const r of a.fieldTransforms){const u=t.data.field(r.field),c=NE(r.transform,u||null);c!=null&&(n===null&&(n=js.empty()),n.set(r.field,c))}return n||null}function Rv(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&!!function(r,u){return r===void 0&&u===void 0||!(!r||!u)&&Xh(r,u,(c,d)=>y7(c,d))}(a.fieldTransforms,t.fieldTransforms)&&(a.type===0?a.value.isEqual(t.value):a.type!==1||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask))}class Tg extends B0{constructor(t,n,r,u=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class kc extends B0{constructor(t,n,r,u,c=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=u,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function UE(a){const t=new Map;return a.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=a.data.field(n);t.set(n,r)}}),t}function Cv(a,t,n){const r=new Map;We(a.length===n.length);for(let u=0;u<n.length;u++){const c=a[u],d=c.transform,m=t.data.field(c.field);r.set(c.field,m7(d,m,n[u]))}return r}function Dv(a,t,n){const r=new Map;for(const u of a){const c=u.transform,d=n.data.field(u.field);r.set(u.field,g7(c,d,t))}return r}class IE extends B0{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S7 extends B0{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(t,n,r,u){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=u}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const c=this.mutations[u];c.key.isEqual(t.key)&&v7(c,t,r[u])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=sg(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=sg(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=DE();return this.mutations.forEach(u=>{const c=t.get(u.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(u.key)?null:m;const _=VE(d,m);_!==null&&r.set(u.key,_),d.isValidDocument()||d.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),we())}isEqual(t){return this.batchId===t.batchId&&Xh(this.mutations,t.mutations,(n,r)=>Rv(n,r))&&Xh(this.baseMutations,t.baseMutations,(n,r)=>Rv(n,r))}}class ty{constructor(t,n,r,u){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=u}static from(t,n,r){We(t.mutations.length===r.length);let u=function(){return u7}();const c=t.mutations;for(let d=0;d<c.length;d++)u=u.insert(c[d].key,r[d].version);return new ty(t,n,r,u)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li,Le;function R7(a){switch(a){default:return te();case Vt.CANCELLED:case Vt.UNKNOWN:case Vt.DEADLINE_EXCEEDED:case Vt.RESOURCE_EXHAUSTED:case Vt.INTERNAL:case Vt.UNAVAILABLE:case Vt.UNAUTHENTICATED:return!1;case Vt.INVALID_ARGUMENT:case Vt.NOT_FOUND:case Vt.ALREADY_EXISTS:case Vt.PERMISSION_DENIED:case Vt.FAILED_PRECONDITION:case Vt.ABORTED:case Vt.OUT_OF_RANGE:case Vt.UNIMPLEMENTED:case Vt.DATA_LOSS:return!0}}function LE(a){if(a===void 0)return Do("GRPC error has no .code"),Vt.UNKNOWN;switch(a){case li.OK:return Vt.OK;case li.CANCELLED:return Vt.CANCELLED;case li.UNKNOWN:return Vt.UNKNOWN;case li.DEADLINE_EXCEEDED:return Vt.DEADLINE_EXCEEDED;case li.RESOURCE_EXHAUSTED:return Vt.RESOURCE_EXHAUSTED;case li.INTERNAL:return Vt.INTERNAL;case li.UNAVAILABLE:return Vt.UNAVAILABLE;case li.UNAUTHENTICATED:return Vt.UNAUTHENTICATED;case li.INVALID_ARGUMENT:return Vt.INVALID_ARGUMENT;case li.NOT_FOUND:return Vt.NOT_FOUND;case li.ALREADY_EXISTS:return Vt.ALREADY_EXISTS;case li.PERMISSION_DENIED:return Vt.PERMISSION_DENIED;case li.FAILED_PRECONDITION:return Vt.FAILED_PRECONDITION;case li.ABORTED:return Vt.ABORTED;case li.OUT_OF_RANGE:return Vt.OUT_OF_RANGE;case li.UNIMPLEMENTED:return Vt.UNIMPLEMENTED;case li.DATA_LOSS:return Vt.DATA_LOSS;default:return te()}}(Le=li||(li={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7=new Nu([4294967295,4294967295],0);function wv(a){const t=C7().encode(a),n=new sE;return n.update(t),new Uint8Array(n.digest())}function Nv(a){const t=new DataView(a.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),u=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Nu([n,r],0),new Nu([u,c],0)]}class ey{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new tg(`Invalid padding: ${n}`);if(r<0)throw new tg(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new tg(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new tg(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ie=Nu.fromNumber(this.Te)}de(t,n,r){let u=t.add(n.multiply(Nu.fromNumber(r)));return u.compare(D7)===1&&(u=new Nu([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ie).toNumber()}Ee(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=wv(t),[r,u]=Nv(n);for(let c=0;c<this.hashCount;c++){const d=this.de(r,u,c);if(!this.Ee(d))return!1}return!0}static create(t,n,r){const u=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new ey(c,u,n);return r.forEach(m=>d.insert(m)),d}insert(t){if(this.Te===0)return;const n=wv(t),[r,u]=Nv(n);for(let c=0;c<this.hashCount;c++){const d=this.de(r,u,c);this.Ae(d)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class tg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(t,n,r,u,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=u,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const u=new Map;return u.set(t,bg.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new G0(ae.min(),u,new Ln(xe),wo(),we())}}class bg{constructor(t,n,r,u,c){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=u,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new bg(r,n,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(t,n,r,u){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=u}}class zE{constructor(t,n){this.targetId=t,this.me=n}}class PE{constructor(t,n,r=qi.EMPTY_BYTE_STRING,u=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=u}}class Ov{constructor(){this.fe=0,this.ge=Mv(),this.pe=qi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=we(),n=we(),r=we();return this.ge.forEach((u,c)=>{switch(c){case 0:t=t.add(u);break;case 2:n=n.add(u);break;case 1:r=r.add(u);break;default:te()}}),new bg(this.pe,this.ye,t,n,r)}Ce(){this.we=!1,this.ge=Mv()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class w7{constructor(t){this.Be=t,this.Le=new Map,this.ke=wo(),this.qe=jm(),this.Qe=jm(),this.Ke=new Ln(xe)}$e(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(n,t.Ve):this.We(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.We(n,t.key,t.Ve)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(t.resumeToken));break;default:te()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Le.forEach((r,u)=>{this.je(u)&&n(u)})}Je(t){const n=t.targetId,r=t.me.count,u=this.Ye(n);if(u){const c=u.target;if(p1(c))if(r===0){const d=new Xt(c.path);this.We(n,d,ha.newNoDocument(d,ae.min()))}else We(r===1);else{const d=this.Ze(n);if(d!==r){const m=this.Xe(t),_=m?this.et(m,t,d):1;if(_!==0){this.He(n);const v=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,v)}}}}}Xe(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:u=0},hashCount:c=0}=n;let d,m;try{d=Uu(r).toUint8Array()}catch(_){if(_ instanceof gE)return Yh("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{m=new ey(d,u,c)}catch(_){return Yh(_ instanceof tg?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return m.Te===0?null:m}et(t,n,r){return n.me.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Be.getRemoteKeysForTarget(n);let u=0;return r.forEach(c=>{const d=this.Be.nt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(m)||(this.We(n,c,null),u++)}),u}it(t){const n=new Map;this.Le.forEach((c,d)=>{const m=this.Ye(d);if(m){if(c.current&&p1(m.target)){const _=new Xt(m.target.path);this.st(_).has(d)||this.ot(d,_)||this.We(d,_,ha.newNoDocument(_,t))}c.be&&(n.set(d,c.ve()),c.Ce())}});let r=we();this.Qe.forEach((c,d)=>{let m=!0;d.forEachWhile(_=>{const v=this.Ye(_);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(c))}),this.ke.forEach((c,d)=>d.setReadTime(t));const u=new G0(t,n,this.Ke,this.ke,r);return this.ke=wo(),this.qe=jm(),this.Qe=jm(),this.Ke=new Ln(xe),u}Ue(t,n){if(!this.je(t))return;const r=this.ot(t,n.key)?2:0;this.ze(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const u=this.ze(t);this.ot(t,n)?u.Fe(n,1):u.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(t)),this.Qe=this.Qe.insert(n,this._t(n).add(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Le.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let n=this.Le.get(t);return n||(n=new Ov,this.Le.set(t,n)),n}_t(t){let n=this.Qe.get(t);return n||(n=new di(xe),this.Qe=this.Qe.insert(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new di(xe),this.qe=this.qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||Bt("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.Le.get(t);return n&&n.Se?null:this.Be.ut(t)}He(t){this.Le.set(t,new Ov),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}ot(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function jm(){return new Ln(Xt.comparator)}function Mv(){return new Ln(Xt.comparator)}const N7={asc:"ASCENDING",desc:"DESCENDING"},O7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M7={and:"AND",or:"OR"};class x7{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function _1(a,t){return a.useProto3Json||V0(t)?t:{value:t}}function y0(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function BE(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function V7(a,t){return y0(a,t.toTimestamp())}function xl(a){return We(!!a),ae.fromTimestamp(function(n){const r=Vu(n);return new fi(r.seconds,r.nanos)}(a))}function ny(a,t){return v1(a,t).canonicalString()}function v1(a,t){const n=function(u){return new An(["projects",u.projectId,"databases",u.database])}(a).child("documents");return t===void 0?n:n.child(t)}function GE(a){const t=An.fromString(a);return We(FE(t)),t}function E1(a,t){return ny(a.databaseId,t.path)}function Wp(a,t){const n=GE(t);if(n.get(1)!==a.databaseId.projectId)throw new jt(Vt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new jt(Vt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new Xt(kE(n))}function HE(a,t){return ny(a.databaseId,t)}function U7(a){const t=GE(a);return t.length===4?An.emptyPath():kE(t)}function S1(a){return new An(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function kE(a){return We(a.length>4&&a.get(4)==="documents"),a.popFirst(5)}function xv(a,t,n){return{name:E1(a,t),fields:n.value.mapValue.fields}}function I7(a,t){let n;if("targetChange"in t){t.targetChange;const r=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:te()}(t.targetChange.targetChangeType||"NO_CHANGE"),u=t.targetChange.targetIds||[],c=function(v,b){return v.useProto3Json?(We(b===void 0||typeof b=="string"),qi.fromBase64String(b||"")):(We(b===void 0||b instanceof Buffer||b instanceof Uint8Array),qi.fromUint8Array(b||new Uint8Array))}(a,t.targetChange.resumeToken),d=t.targetChange.cause,m=d&&function(v){const b=v.code===void 0?Vt.UNKNOWN:LE(v.code);return new jt(b,v.message||"")}(d);n=new PE(r,u,c,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const u=Wp(a,r.document.name),c=xl(r.document.updateTime),d=r.document.createTime?xl(r.document.createTime):ae.min(),m=new js({mapValue:{fields:r.document.fields}}),_=ha.newFoundDocument(u,c,d,m),v=r.targetIds||[],b=r.removedTargetIds||[];n=new n0(v,b,_.key,_)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const u=Wp(a,r.document),c=r.readTime?xl(r.readTime):ae.min(),d=ha.newNoDocument(u,c),m=r.removedTargetIds||[];n=new n0([],m,d.key,d)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const u=Wp(a,r.document),c=r.removedTargetIds||[];n=new n0([],c,u,null)}else{if(!("filter"in t))return te();{t.filter;const r=t.filter;r.targetId;const{count:u=0,unchangedNames:c}=r,d=new A7(u,c),m=r.targetId;n=new zE(m,d)}}return n}function L7(a,t){let n;if(t instanceof Tg)n={update:xv(a,t.key,t.value)};else if(t instanceof IE)n={delete:E1(a,t.key)};else if(t instanceof kc)n={update:xv(a,t.key,t.data),updateMask:F7(t.fieldMask)};else{if(!(t instanceof S7))return te();n={verify:E1(a,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(c,d){const m=d.transform;if(m instanceof dg)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof gg)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof mg)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof p0)return{fieldPath:d.field.canonicalString(),increment:m.Pe};throw te()}(0,r))),t.precondition.isNone||(n.currentDocument=function(u,c){return c.updateTime!==void 0?{updateTime:V7(u,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:te()}(a,t.precondition)),n}function z7(a,t){return a&&a.length>0?(We(t!==void 0),a.map(n=>function(u,c){let d=u.updateTime?xl(u.updateTime):xl(c);return d.isEqual(ae.min())&&(d=xl(c)),new _7(d,u.transformResults||[])}(n,t))):[]}function P7(a,t){return{documents:[HE(a,t.path)]}}function B7(a,t){const n={structuredQuery:{}},r=t.path;let u;t.collectionGroup!==null?(u=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(u=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=HE(a,u);const c=function(v){if(v.length!==0)return jE(Ul.create(v,"and"))}(t.filters);c&&(n.structuredQuery.where=c);const d=function(v){if(v.length!==0)return v.map(b=>function(U){return{field:Bh(U.field),direction:k7(U.dir)}}(b))}(t.orderBy);d&&(n.structuredQuery.orderBy=d);const m=_1(a,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(t.endAt)),{ct:n,parent:u}}function G7(a){let t=U7(a.parent);const n=a.structuredQuery,r=n.from?n.from.length:0;let u=null;if(r>0){We(r===1);const b=n.from[0];b.allDescendants?u=b.collectionId:t=t.child(b.collectionId)}let c=[];n.where&&(c=function(D){const U=qE(D);return U instanceof Ul&&_E(U)?U.getFilters():[U]}(n.where));let d=[];n.orderBy&&(d=function(D){return D.map(U=>function(M){return new m0(Gh(M.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(U))}(n.orderBy));let m=null;n.limit&&(m=function(D){let U;return U=typeof D=="object"?D.value:D,V0(U)?null:U}(n.limit));let _=null;n.startAt&&(_=function(D){const U=!!D.before,w=D.values||[];return new g0(w,U)}(n.startAt));let v=null;return n.endAt&&(v=function(D){const U=!D.before,w=D.values||[];return new g0(w,U)}(n.endAt)),i7(t,u,d,c,m,"F",_,v)}function H7(a,t){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function qE(a){return a.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gh(n.unaryFilter.field);return hi.create(r,"==",{doubleValue:NaN});case"IS_NULL":const u=Gh(n.unaryFilter.field);return hi.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Gh(n.unaryFilter.field);return hi.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Gh(n.unaryFilter.field);return hi.create(d,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(a):a.fieldFilter!==void 0?function(n){return hi.create(Gh(n.fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(a):a.compositeFilter!==void 0?function(n){return Ul.create(n.compositeFilter.filters.map(r=>qE(r)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(a):te()}function k7(a){return N7[a]}function q7(a){return O7[a]}function j7(a){return M7[a]}function Bh(a){return{fieldPath:a.canonicalString()}}function Gh(a){return ki.fromServerFormat(a.fieldPath)}function jE(a){return a instanceof hi?function(n){if(n.op==="=="){if(vv(n.value))return{unaryFilter:{field:Bh(n.field),op:"IS_NAN"}};if(_v(n.value))return{unaryFilter:{field:Bh(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vv(n.value))return{unaryFilter:{field:Bh(n.field),op:"IS_NOT_NAN"}};if(_v(n.value))return{unaryFilter:{field:Bh(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bh(n.field),op:q7(n.op),value:n.value}}}(a):a instanceof Ul?function(n){const r=n.getFilters().map(u=>jE(u));return r.length===1?r[0]:{compositeFilter:{op:j7(n.op),filters:r}}}(a):te()}function F7(a){const t=[];return a.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function FE(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(t,n,r,u,c=ae.min(),d=ae.min(),m=qi.EMPTY_BYTE_STRING,_=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=u,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=_}withSequenceNumber(t){return new Ru(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(t){this.ht=t}}function Y7(a){const t=G7({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?y1(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(){this.ln=new Q7}addToCollectionParentIndex(t,n){return this.ln.add(n),wt.resolve()}getCollectionParents(t,n){return wt.resolve(this.ln.getEntries(n))}addFieldIndex(t,n){return wt.resolve()}deleteFieldIndex(t,n){return wt.resolve()}deleteAllFieldIndexes(t){return wt.resolve()}createTargetIndexes(t,n){return wt.resolve()}getDocumentsMatchingTarget(t,n){return wt.resolve(null)}getIndexType(t,n){return wt.resolve(0)}getFieldIndexes(t,n){return wt.resolve([])}getNextCollectionGroupToUpdate(t){return wt.resolve(null)}getMinOffset(t,n){return wt.resolve(xu.min())}getMinOffsetFromCollectionGroup(t,n){return wt.resolve(xu.min())}updateCollectionGroup(t,n,r){return wt.resolve()}updateIndexEntries(t,n){return wt.resolve()}}class Q7{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),u=this.index[n]||new di(An.comparator),c=!u.has(r);return this.index[n]=u.add(r),c}has(t){const n=t.lastSegment(),r=t.popLast(),u=this.index[n];return u&&u.has(r)}getEntries(t){return(this.index[t]||new di(An.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $a{static withCacheSize(t){return new $a(t,$a.DEFAULT_COLLECTION_PERCENTILE,$a.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$a.DEFAULT_COLLECTION_PERCENTILE=10,$a.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$a.DEFAULT=new $a(41943040,$a.DEFAULT_COLLECTION_PERCENTILE,$a.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$a.DISABLED=new $a(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new Wh(0)}static Qn(){return new Wh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv([a,t],[n,r]){const u=xe(a,n);return u===0?xe(t,r):u}class Z7{constructor(t){this.Gn=t,this.buffer=new di(Uv),this.zn=0}jn(){return++this.zn}Hn(t){const n=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Uv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class W7{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){Bt("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sf(n)?Bt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await af(n)}await this.Yn(3e5)})}}class J7{constructor(t,n){this.Zn=t,this.params=n}calculateTargetCount(t,n){return this.Zn.Xn(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return wt.resolve(x0.oe);const r=new Z7(n);return this.Zn.forEachTarget(t,u=>r.Hn(u.sequenceNumber)).next(()=>this.Zn.er(t,u=>r.Hn(u))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Zn.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Zn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Bt("LruGarbageCollector","Garbage collection skipped; disabled"),wt.resolve(Vv)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Bt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vv):this.tr(t,n))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,n){let r,u,c,d,m,_,v;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Bt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),u=this.params.maximumSequenceNumbersToCollect):u=D,d=Date.now(),this.nthSequenceNumber(t,u))).next(D=>(r=D,m=Date.now(),this.removeTargets(t,r,n))).next(D=>(c=D,_=Date.now(),this.removeOrphanedDocuments(t,r))).next(D=>(v=Date.now(),zh()<=De.DEBUG&&Bt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${u} in `+(m-d)+`ms
	Removed ${c} targets in `+(_-m)+`ms
	Removed ${D} documents in `+(v-_)+`ms
Total Duration: ${v-b}ms`),wt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:c,documentsRemoved:D})))}}function $7(a,t){return new J7(a,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(){this.changes=new Hc(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ha.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?wt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(t,n,r,u){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=u}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(u=>(r=u,this.remoteDocumentCache.getEntry(t,n))).next(u=>(r!==null&&sg(r.mutation,u,Vr.empty(),fi.now()),u))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,we()).next(()=>r))}getLocalViewOfDocuments(t,n,r=we()){const u=Uc();return this.populateOverlays(t,u,n).next(()=>this.computeViews(t,n,u,r).next(c=>{let d=$d();return c.forEach((m,_)=>{d=d.insert(m,_.overlayedDocument)}),d}))}getOverlayedDocuments(t,n){const r=Uc();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,we()))}populateOverlays(t,n,r){const u=[];return r.forEach(c=>{n.has(c)||u.push(c)}),this.documentOverlayCache.getOverlays(t,u).next(c=>{c.forEach((d,m)=>{n.set(d,m)})})}computeViews(t,n,r,u){let c=wo();const d=ag(),m=function(){return ag()}();return n.forEach((_,v)=>{const b=r.get(v.key);u.has(v.key)&&(b===void 0||b.mutation instanceof kc)?c=c.insert(v.key,v):b!==void 0?(d.set(v.key,b.mutation.getFieldMask()),sg(b.mutation,v,b.mutation.getFieldMask(),fi.now())):d.set(v.key,Vr.empty())}),this.recalculateAndSaveOverlays(t,c).next(_=>(_.forEach((v,b)=>d.set(v,b)),n.forEach((v,b)=>{var D;return m.set(v,new eA(b,(D=d.get(v))!==null&&D!==void 0?D:null))}),m))}recalculateAndSaveOverlays(t,n){const r=ag();let u=new Ln((d,m)=>d-m),c=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(d=>{for(const m of d)m.keys().forEach(_=>{const v=n.get(_);if(v===null)return;let b=r.get(_)||Vr.empty();b=m.applyToLocalView(v,b),r.set(_,b);const D=(u.get(m.batchId)||we()).add(_);u=u.insert(m.batchId,D)})}).next(()=>{const d=[],m=u.getReverseIterator();for(;m.hasNext();){const _=m.getNext(),v=_.key,b=_.value,D=DE();b.forEach(U=>{if(!c.has(U)){const w=VE(n.get(U),r.get(U));w!==null&&D.set(U,w),c=c.add(U)}}),d.push(this.documentOverlayCache.saveOverlays(t,v,D))}return wt.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,u){return function(d){return Xt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):a7(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,u):this.getDocumentsMatchingCollectionQuery(t,n,r,u)}getNextDocuments(t,n,r,u){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,u).next(c=>{const d=u-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,u-c.size):wt.resolve(Uc());let m=-1,_=c;return d.next(v=>wt.forEach(v,(b,D)=>(m<D.largestBatchId&&(m=D.largestBatchId),c.get(b)?wt.resolve():this.remoteDocumentCache.getEntry(t,b).next(U=>{_=_.insert(b,U)}))).next(()=>this.populateOverlays(t,v,c)).next(()=>this.computeViews(t,_,v,we())).next(b=>({batchId:m,changes:CE(b)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Xt(n)).next(r=>{let u=$d();return r.isFoundDocument()&&(u=u.insert(r.key,r)),u})}getDocumentsMatchingCollectionGroupQuery(t,n,r,u){const c=n.collectionGroup;let d=$d();return this.indexManager.getCollectionParents(t,c).next(m=>wt.forEach(m,_=>{const v=function(D,U){return new I0(U,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt)}(n,_.child(c));return this.getDocumentsMatchingCollectionQuery(t,v,r,u).next(b=>{b.forEach((D,U)=>{d=d.insert(D,U)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(t,n,r,u){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,c,u))).next(d=>{c.forEach((_,v)=>{const b=v.getKey();d.get(b)===null&&(d=d.insert(b,ha.newInvalidDocument(b)))});let m=$d();return d.forEach((_,v)=>{const b=c.get(_);b!==void 0&&sg(b.mutation,v,Vr.empty(),fi.now()),z0(n,v)&&(m=m.insert(_,v))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,n){return wt.resolve(this.Tr.get(n))}saveBundleMetadata(t,n){return this.Tr.set(n.id,function(u){return{id:u.id,version:u.version,createTime:xl(u.createTime)}}(n)),wt.resolve()}getNamedQuery(t,n){return wt.resolve(this.Ir.get(n))}saveNamedQuery(t,n){return this.Ir.set(n.name,function(u){return{name:u.name,query:Y7(u.bundledQuery),readTime:xl(u.readTime)}}(n)),wt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this.overlays=new Ln(Xt.comparator),this.dr=new Map}getOverlay(t,n){return wt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Uc();return wt.forEach(n,u=>this.getOverlay(t,u).next(c=>{c!==null&&r.set(u,c)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((u,c)=>{this.Tt(t,n,c)}),wt.resolve()}removeOverlaysForBatchId(t,n,r){const u=this.dr.get(r);return u!==void 0&&(u.forEach(c=>this.overlays=this.overlays.remove(c)),this.dr.delete(r)),wt.resolve()}getOverlaysForCollection(t,n,r){const u=Uc(),c=n.length+1,d=new Xt(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const _=m.getNext().value,v=_.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&_.largestBatchId>r&&u.set(_.getKey(),_)}return wt.resolve(u)}getOverlaysForCollectionGroup(t,n,r,u){let c=new Ln((v,b)=>v-b);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>r){let b=c.get(v.largestBatchId);b===null&&(b=Uc(),c=c.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const m=Uc(),_=c.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((v,b)=>m.set(v,b)),!(m.size()>=u)););return wt.resolve(m)}Tt(t,n,r){const u=this.overlays.get(r.key);if(u!==null){const d=this.dr.get(u.largestBatchId).delete(r.key);this.dr.set(u.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new b7(n,r));let c=this.dr.get(n);c===void 0&&(c=we(),this.dr.set(n,c)),this.dr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.sessionToken=qi.EMPTY_BYTE_STRING}getSessionToken(t){return wt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,wt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(){this.Er=new di(wi.Ar),this.Rr=new di(wi.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(t,n){const r=new wi(t,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.gr(new wi(t,n))}pr(t,n){t.forEach(r=>this.removeReference(r,n))}yr(t){const n=new Xt(new An([])),r=new wi(n,t),u=new wi(n,t+1),c=[];return this.Rr.forEachInRange([r,u],d=>{this.gr(d),c.push(d.key)}),c}wr(){this.Er.forEach(t=>this.gr(t))}gr(t){this.Er=this.Er.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const n=new Xt(new An([])),r=new wi(n,t),u=new wi(n,t+1);let c=we();return this.Rr.forEachInRange([r,u],d=>{c=c.add(d.key)}),c}containsKey(t){const n=new wi(t,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class wi{constructor(t,n){this.key=t,this.br=n}static Ar(t,n){return Xt.comparator(t.key,n.key)||xe(t.br,n.br)}static Vr(t,n){return xe(t.br,n.br)||Xt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new di(wi.Ar)}checkEmpty(t){return wt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,u){const c=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new T7(c,n,r,u);this.mutationQueue.push(d);for(const m of u)this.vr=this.vr.add(new wi(m.key,c)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return wt.resolve(d)}lookupMutationBatch(t,n){return wt.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,u=this.Fr(r),c=u<0?0:u;return wt.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return wt.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return wt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new wi(n,0),u=new wi(n,Number.POSITIVE_INFINITY),c=[];return this.vr.forEachInRange([r,u],d=>{const m=this.Cr(d.br);c.push(m)}),wt.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new di(xe);return n.forEach(u=>{const c=new wi(u,0),d=new wi(u,Number.POSITIVE_INFINITY);this.vr.forEachInRange([c,d],m=>{r=r.add(m.br)})}),wt.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,u=r.length+1;let c=r;Xt.isDocumentKey(c)||(c=c.child(""));const d=new wi(new Xt(c),0);let m=new di(xe);return this.vr.forEachWhile(_=>{const v=_.key.path;return!!r.isPrefixOf(v)&&(v.length===u&&(m=m.add(_.br)),!0)},d),wt.resolve(this.Mr(m))}Mr(t){const n=[];return t.forEach(r=>{const u=this.Cr(r);u!==null&&n.push(u)}),n}removeMutationBatch(t,n){We(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return wt.forEach(n.mutations,u=>{const c=new wi(u.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,u.key)}).next(()=>{this.vr=r})}Bn(t){}containsKey(t,n){const r=new wi(n,0),u=this.vr.firstAfterOrEqual(r);return wt.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(t){return this.mutationQueue.length,wt.resolve()}Or(t,n){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){const n=this.Fr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(t){this.Nr=t,this.docs=function(){return new Ln(Xt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,u=this.docs.get(r),c=u?u.size:0,d=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return wt.resolve(r?r.document.mutableCopy():ha.newInvalidDocument(n))}getEntries(t,n){let r=wo();return n.forEach(u=>{const c=this.docs.get(u);r=r.insert(u,c?c.document.mutableCopy():ha.newInvalidDocument(u))}),wt.resolve(r)}getDocumentsMatchingQuery(t,n,r,u){let c=wo();const d=n.path,m=new Xt(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(m);for(;_.hasNext();){const{key:v,value:{document:b}}=_.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||Lb(Ib(b),r)<=0||(u.has(b.key)||z0(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return wt.resolve(c)}getAllFromCollectionGroup(t,n,r,u){te()}Br(t,n){return wt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new oA(this)}getSize(t){return wt.resolve(this.size)}}class oA extends tA{constructor(t){super(),this.hr=t}applyChanges(t){const n=[];return this.changes.forEach((r,u)=>{u.isValidDocument()?n.push(this.hr.addEntry(t,u)):this.hr.removeEntry(r)}),wt.waitFor(n)}getFromCache(t,n){return this.hr.getEntry(t,n)}getAllFromCache(t,n){return this.hr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(t){this.persistence=t,this.Lr=new Hc(n=>W1(n),J1),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.kr=0,this.qr=new iy,this.targetCount=0,this.Qr=Wh.qn()}forEachTarget(t,n){return this.Lr.forEach((r,u)=>n(u)),wt.resolve()}getLastRemoteSnapshotVersion(t){return wt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return wt.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),wt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),wt.resolve()}Un(t){this.Lr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Qr=new Wh(n),this.highestTargetId=n),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,n){return this.Un(n),this.targetCount+=1,wt.resolve()}updateTargetData(t,n){return this.Un(n),wt.resolve()}removeTargetData(t,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,wt.resolve()}removeTargets(t,n,r){let u=0;const c=[];return this.Lr.forEach((d,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.Lr.delete(d),c.push(this.removeMatchingKeysForTargetId(t,m.targetId)),u++)}),wt.waitFor(c).next(()=>u)}getTargetCount(t){return wt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Lr.get(n)||null;return wt.resolve(r)}addMatchingKeys(t,n,r){return this.qr.mr(n,r),wt.resolve()}removeMatchingKeys(t,n,r){this.qr.pr(n,r);const u=this.persistence.referenceDelegate,c=[];return u&&n.forEach(d=>{c.push(u.markPotentiallyOrphaned(t,d))}),wt.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this.qr.yr(n),wt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.qr.Sr(n);return wt.resolve(r)}containsKey(t,n){return wt.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(t,n){this.Kr={},this.overlays={},this.$r=new x0(0),this.Ur=!1,this.Ur=!0,this.Wr=new sA,this.referenceDelegate=t(this),this.Gr=new uA(this),this.indexManager=new X7,this.remoteDocumentCache=function(u){return new lA(u)}(r=>this.referenceDelegate.zr(r)),this.serializer=new K7(n),this.jr=new iA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new aA,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Kr[t.toKey()];return r||(r=new rA(n,this.referenceDelegate),this.Kr[t.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,n,r){Bt("MemoryPersistence","Starting transaction:",t);const u=new cA(this.$r.next());return this.referenceDelegate.Hr(),r(u).next(c=>this.referenceDelegate.Jr(u).next(()=>c)).toPromise().then(c=>(u.raiseOnCommittedEvent(),c))}Yr(t,n){return wt.or(Object.values(this.Kr).map(r=>()=>r.containsKey(t,n)))}}class cA extends Pb{constructor(t){super(),this.currentSequenceNumber=t}}class ay{constructor(t){this.persistence=t,this.Zr=new iy,this.Xr=null}static ei(t){return new ay(t)}get ti(){if(this.Xr)return this.Xr;throw te()}addReference(t,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),wt.resolve()}removeReference(t,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),wt.resolve()}markPotentiallyOrphaned(t,n){return this.ti.add(n.toString()),wt.resolve()}removeTarget(t,n){this.Zr.yr(n.targetId).forEach(u=>this.ti.add(u.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(u=>{u.forEach(c=>this.ti.add(c.toString()))}).next(()=>r.removeTargetData(t,n))}Hr(){this.Xr=new Set}Jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wt.forEach(this.ti,r=>{const u=Xt.fromPath(r);return this.ni(t,u).next(c=>{c||n.removeEntry(u,ae.min())})}).next(()=>(this.Xr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ni(t,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(t){return 0}ni(t,n){return wt.or([()=>wt.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Yr(t,n)])}}class _0{constructor(t,n){this.persistence=t,this.ri=new Hc(r=>Hb(r.path),(r,u)=>r.isEqual(u)),this.garbageCollector=$7(this,n)}static ei(t,n){return new _0(t,n)}Hr(){}Jr(t){return wt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}Xn(t){const n=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(u=>r+u))}nr(t){let n=0;return this.er(t,r=>{n++}).next(()=>n)}er(t,n){return wt.forEach(this.ri,(r,u)=>this.ir(t,r,u).next(c=>c?wt.resolve():n(u)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const u=this.persistence.getRemoteDocumentCache(),c=u.newChangeBuffer();return u.Br(t,d=>this.ir(t,d,n).next(m=>{m||(r++,c.removeEntry(d,ae.min()))})).next(()=>c.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.ri.set(n,t.currentSequenceNumber),wt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),wt.resolve()}removeReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),wt.resolve()}updateLimboDocument(t,n){return this.ri.set(n,t.currentSequenceNumber),wt.resolve()}zr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=$m(t.data.value)),n}ir(t,n,r){return wt.or([()=>this.persistence.Yr(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const u=this.ri.get(n);return wt.resolve(u!==void 0&&u>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(t,n,r,u){this.targetId=t,this.fromCache=n,this.Wi=r,this.Gi=u}static zi(t,n){let r=we(),u=we();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:u=u.add(c.doc.key)}return new sy(t,n.fromCache,r,u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return Y6()?8:Bb(fa())>0?6:4}()}initialize(t,n){this.Zi=t,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(t,n,r,u){const c={result:null};return this.Xi(t,n).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.es(t,n,u,r).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new hA;return this.ts(t,n,d).next(m=>{if(c.result=m,this.Hi)return this.ns(t,n,d,m.size)})}).next(()=>c.result)}ns(t,n,r,u){return r.documentReadCount<this.Ji?(zh()<=De.DEBUG&&Bt("QueryEngine","SDK will not create cache indexes for query:",Ph(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),wt.resolve()):(zh()<=De.DEBUG&&Bt("QueryEngine","Query:",Ph(n),"scans",r.documentReadCount,"local documents and returns",u,"documents as results."),r.documentReadCount>this.Yi*u?(zh()<=De.DEBUG&&Bt("QueryEngine","The SDK decides to create cache indexes for query:",Ph(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ml(n))):wt.resolve())}Xi(t,n){if(bv(n))return wt.resolve(null);let r=Ml(n);return this.indexManager.getIndexType(t,r).next(u=>u===0?null:(n.limit!==null&&u===1&&(n=y1(n,null,"F"),r=Ml(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(c=>{const d=we(...c);return this.Zi.getDocuments(t,d).next(m=>this.indexManager.getMinOffset(t,r).next(_=>{const v=this.rs(n,m);return this.ss(n,v,d,_.readTime)?this.Xi(t,y1(n,null,"F")):this.os(t,v,n,_)}))})))}es(t,n,r,u){return bv(n)||u.isEqual(ae.min())?wt.resolve(null):this.Zi.getDocuments(t,r).next(c=>{const d=this.rs(n,c);return this.ss(n,d,r,u)?wt.resolve(null):(zh()<=De.DEBUG&&Bt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Ph(n)),this.os(t,d,n,Ub(u,-1)).next(m=>m))})}rs(t,n){let r=new di(AE(t));return n.forEach((u,c)=>{z0(t,c)&&(r=r.add(c))}),r}ss(t,n,r,u){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(u)>0)}ts(t,n,r){return zh()<=De.DEBUG&&Bt("QueryEngine","Using full collection scan to execute query:",Ph(n)),this.Zi.getDocumentsMatchingQuery(t,n,xu.min(),r)}os(t,n,r,u){return this.Zi.getDocumentsMatchingQuery(t,r,u).next(c=>(n.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(t,n,r,u){this.persistence=t,this._s=n,this.serializer=u,this.us=new Ln(xe),this.cs=new Hc(c=>W1(c),J1),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(r)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new nA(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.us))}}function gA(a,t,n,r){return new dA(a,t,n,r)}async function YE(a,t){const n=re(a);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let u;return n.mutationQueue.getAllMutationBatches(r).next(c=>(u=c,n.Ps(t),n.mutationQueue.getAllMutationBatches(r))).next(c=>{const d=[],m=[];let _=we();for(const v of u){d.push(v.batchId);for(const b of v.mutations)_=_.add(b.key)}for(const v of c){m.push(v.batchId);for(const b of v.mutations)_=_.add(b.key)}return n.localDocuments.getDocuments(r,_).next(v=>({Ts:v,removedBatchIds:d,addedBatchIds:m}))})})}function mA(a,t){const n=re(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const u=t.batch.keys(),c=n.hs.newChangeBuffer({trackRemovals:!0});return function(m,_,v,b){const D=v.batch,U=D.keys();let w=wt.resolve();return U.forEach(M=>{w=w.next(()=>b.getEntry(_,M)).next(I=>{const P=v.docVersions.get(M);We(P!==null),I.version.compareTo(P)<0&&(D.applyToRemoteDocument(I,v),I.isValidDocument()&&(I.setReadTime(v.commitVersion),b.addEntry(I)))})}),w.next(()=>m.mutationQueue.removeMutationBatch(_,D))}(n,r,t,c).next(()=>c.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,u,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let _=we();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(_=_.add(m.batch.mutations[v].key));return _}(t))).next(()=>n.localDocuments.getDocuments(r,u))})}function XE(a){const t=re(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Gr.getLastRemoteSnapshotVersion(n))}function pA(a,t){const n=re(a),r=t.snapshotVersion;let u=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=n.hs.newChangeBuffer({trackRemovals:!0});u=n.us;const m=[];t.targetChanges.forEach((b,D)=>{const U=u.get(D);if(!U)return;m.push(n.Gr.removeMatchingKeys(c,b.removedDocuments,D).next(()=>n.Gr.addMatchingKeys(c,b.addedDocuments,D)));let w=U.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(D)!==null?w=w.withResumeToken(qi.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):b.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(b.resumeToken,r)),u=u.insert(D,w),function(I,P,K){return I.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(U,w,b)&&m.push(n.Gr.updateTargetData(c,w))});let _=wo(),v=we();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))}),m.push(yA(c,d,t.documentUpdates).next(b=>{_=b.Is,v=b.ds})),!r.isEqual(ae.min())){const b=n.Gr.getLastRemoteSnapshotVersion(c).next(D=>n.Gr.setTargetsMetadata(c,c.currentSequenceNumber,r));m.push(b)}return wt.waitFor(m).next(()=>d.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,_,v)).next(()=>_)}).then(c=>(n.us=u,c))}function yA(a,t,n){let r=we(),u=we();return n.forEach(c=>r=r.add(c)),t.getEntries(a,r).next(c=>{let d=wo();return n.forEach((m,_)=>{const v=c.get(m);_.isFoundDocument()!==v.isFoundDocument()&&(u=u.add(m)),_.isNoDocument()&&_.version.isEqual(ae.min())?(t.removeEntry(m,_.readTime),d=d.insert(m,_)):!v.isValidDocument()||_.version.compareTo(v.version)>0||_.version.compareTo(v.version)===0&&v.hasPendingWrites?(t.addEntry(_),d=d.insert(m,_)):Bt("LocalStore","Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",_.version)}),{Is:d,ds:u}})}function _A(a,t){const n=re(a);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function vA(a,t){const n=re(a);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let u;return n.Gr.getTargetData(r,t).next(c=>c?(u=c,wt.resolve(u)):n.Gr.allocateTargetId(r).next(d=>(u=new Ru(t,d,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,u).next(()=>u))))}).then(r=>{const u=n.us.get(r.targetId);return(u===null||r.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(t,r.targetId)),r})}async function T1(a,t,n){const r=re(a),u=r.us.get(t),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,d=>r.persistence.referenceDelegate.removeTarget(d,u))}catch(d){if(!sf(d))throw d;Bt("LocalStore",`Failed to update sequence numbers for target ${t}: ${d}`)}r.us=r.us.remove(t),r.cs.delete(u.target)}function Iv(a,t,n){const r=re(a);let u=ae.min(),c=we();return r.persistence.runTransaction("Execute query","readwrite",d=>function(_,v,b){const D=re(_),U=D.cs.get(b);return U!==void 0?wt.resolve(D.us.get(U)):D.Gr.getTargetData(v,b)}(r,d,Ml(t)).next(m=>{if(m)return u=m.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(d,m.targetId).next(_=>{c=_})}).next(()=>r._s.getDocumentsMatchingQuery(d,t,n?u:ae.min(),n?c:we())).next(m=>(EA(r,r7(t),m),{documents:m,Es:c})))}function EA(a,t,n){let r=a.ls.get(t)||ae.min();n.forEach((u,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),a.ls.set(t,r)}class Lv{constructor(){this.activeTargetIds=f7()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class SA{constructor(){this._o=new Lv,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,n,r){this.ao[t]=n}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new Lv,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{uo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Bt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){Bt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fm=null;function Jp(){return Fm===null?Fm=function(){return 268435456+Math.round(2147483648*Math.random())}():Fm++,"0x"+Fm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="WebChannelConnection";class RA extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${u}/databases/${c}`,this.xo=this.databaseId.database==="(default)"?`project_id=${u}`:`project_id=${u}&database_id=${c}`}Oo(n,r,u,c,d){const m=Jp(),_=this.No(n,r.toUriEncodedString());Bt("RestConnection",`Sending RPC '${n}' ${m}:`,_,u);const v={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(v,c,d),this.Lo(n,_,v,u).then(b=>(Bt("RestConnection",`Received RPC '${n}' ${m}: `,b),b),b=>{throw Yh("RestConnection",`RPC '${n}' ${m} failed with error: `,b,"url: ",_,"request:",u),b})}ko(n,r,u,c,d,m){return this.Oo(n,r,u,c,d)}Bo(n,r,u){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nf}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((c,d)=>n[d]=c),u&&u.headers.forEach((c,d)=>n[d]=c)}No(n,r){const u=bA[n];return`${this.Fo}/v1/${r}:${u}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Lo(t,n,r,u){const c=Jp();return new Promise((d,m)=>{const _=new rE;_.setWithCredentials(!0),_.listenOnce(lE.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Jm.NO_ERROR:const b=_.getResponseJson();Bt(la,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(b)),d(b);break;case Jm.TIMEOUT:Bt(la,`RPC '${t}' ${c} timed out`),m(new jt(Vt.DEADLINE_EXCEEDED,"Request time out"));break;case Jm.HTTP_ERROR:const D=_.getStatus();if(Bt(la,`RPC '${t}' ${c} failed with status:`,D,"response text:",_.getResponseText()),D>0){let U=_.getResponseJson();Array.isArray(U)&&(U=U[0]);const w=U==null?void 0:U.error;if(w&&w.status&&w.message){const M=function(P){const K=P.toLowerCase().replace(/_/g,"-");return Object.values(Vt).indexOf(K)>=0?K:Vt.UNKNOWN}(w.status);m(new jt(M,w.message))}else m(new jt(Vt.UNKNOWN,"Server responded with status "+_.getStatus()))}else m(new jt(Vt.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{Bt(la,`RPC '${t}' ${c} completed.`)}});const v=JSON.stringify(u);Bt(la,`RPC '${t}' ${c} sending request:`,u),_.send(n,"POST",v,r,15)})}qo(t,n,r){const u=Jp(),c=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=cE(),m=uE(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(_.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(_.useFetchStreams=!0),this.Bo(_.initMessageHeaders,n,r),_.encodeInitMessageHeaders=!0;const b=c.join("");Bt(la,`Creating RPC '${t}' stream ${u}: ${b}`,_);const D=d.createWebChannel(b,_);let U=!1,w=!1;const M=new AA({Eo:P=>{w?Bt(la,`Not sending because RPC '${t}' stream ${u} is closed:`,P):(U||(Bt(la,`Opening RPC '${t}' stream ${u} transport.`),D.open(),U=!0),Bt(la,`RPC '${t}' stream ${u} sending:`,P),D.send(P))},Ao:()=>D.close()}),I=(P,K,C)=>{P.listen(K,N=>{try{C(N)}catch(z){setTimeout(()=>{throw z},0)}})};return I(D,Jd.EventType.OPEN,()=>{w||(Bt(la,`RPC '${t}' stream ${u} transport opened.`),M.So())}),I(D,Jd.EventType.CLOSE,()=>{w||(w=!0,Bt(la,`RPC '${t}' stream ${u} transport closed`),M.Do())}),I(D,Jd.EventType.ERROR,P=>{w||(w=!0,Yh(la,`RPC '${t}' stream ${u} transport errored:`,P),M.Do(new jt(Vt.UNAVAILABLE,"The operation could not be completed")))}),I(D,Jd.EventType.MESSAGE,P=>{var K;if(!w){const C=P.data[0];We(!!C);const N=C,z=(N==null?void 0:N.error)||((K=N[0])===null||K===void 0?void 0:K.error);if(z){Bt(la,`RPC '${t}' stream ${u} received error:`,z);const H=z.status;let j=function(R){const x=li[R];if(x!==void 0)return LE(x)}(H),q=z.message;j===void 0&&(j=Vt.INTERNAL,q="Unknown error status: "+H+" with message "+z.message),w=!0,M.Do(new jt(j,q)),D.close()}else Bt(la,`RPC '${t}' stream ${u} received:`,C),M.vo(C)}}),I(m,oE.STAT_EVENT,P=>{P.stat===f1.PROXY?Bt(la,`RPC '${t}' stream ${u} detected buffering proxy`):P.stat===f1.NOPROXY&&Bt(la,`RPC '${t}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{M.bo()},0),M}}function $p(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(a){return new x7(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(t,n,r=1e3,u=1.5,c=6e4){this.li=t,this.timerId=n,this.Qo=r,this.Ko=u,this.$o=c,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),u=Math.max(0,n-r);u>0&&Bt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,u,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(t,n,r,u,c,d,m,_){this.li=t,this.Yo=r,this.Zo=u,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=_,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new QE(t,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():n&&n.code===Vt.RESOURCE_EXHAUSTED?(Do(n.toString()),Do("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===Vt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(n)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,u])=>{this.Xo===n&&this.I_(r,u)},r=>{t(()=>{const u=new jt(Vt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(u)})})}I_(t,n){const r=this.T_(this.Xo);this.stream=this.E_(t,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(u=>{r(()=>this.d_(u))}),this.stream.onMessage(u=>{r(()=>++this.n_==1?this.A_(u):this.onNext(u))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(t){return Bt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return n=>{this.li.enqueueAndForget(()=>this.Xo===t?n():(Bt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CA extends ZE{constructor(t,n,r,u,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,u,d),this.serializer=c}E_(t,n){return this.connection.qo("Listen",t,n)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();const n=I7(this.serializer,t),r=function(c){if(!("targetChange"in c))return ae.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?ae.min():d.readTime?xl(d.readTime):ae.min()}(t);return this.listener.R_(n,r)}V_(t){const n={};n.database=S1(this.serializer),n.addTarget=function(c,d){let m;const _=d.target;if(m=p1(_)?{documents:P7(c,_)}:{query:B7(c,_).ct},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=BE(c,d.resumeToken);const v=_1(c,d.expectedCount);v!==null&&(m.expectedCount=v)}else if(d.snapshotVersion.compareTo(ae.min())>0){m.readTime=y0(c,d.snapshotVersion.toTimestamp());const v=_1(c,d.expectedCount);v!==null&&(m.expectedCount=v)}return m}(this.serializer,t);const r=H7(this.serializer,t);r&&(n.labels=r),this.c_(n)}m_(t){const n={};n.database=S1(this.serializer),n.removeTarget=t,this.c_(n)}}class DA extends ZE{constructor(t,n,r,u,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,u,d),this.serializer=c}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(t,n){return this.connection.qo("Write",t,n)}A_(t){return We(!!t.streamToken),this.lastStreamToken=t.streamToken,We(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){We(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const n=z7(t.writeResults,t.commitTime),r=xl(t.commitTime);return this.listener.y_(r,n)}w_(){const t={};t.database=S1(this.serializer),this.c_(t)}g_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>L7(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA extends class{}{constructor(t,n,r,u){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=u,this.S_=!1}b_(){if(this.S_)throw new jt(Vt.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,n,r,u){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Oo(t,v1(n,r),u,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new jt(Vt.UNKNOWN,c.toString())})}ko(t,n,r,u,c){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.ko(t,v1(n,r),u,d,m,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new jt(Vt.UNKNOWN,d.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class NA{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Do(n),this.C_=!1):Bt("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(t,n,r,u,c){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=c,this.Q_.uo(d=>{r.enqueueAndForget(async()=>{qc(this)&&(Bt("RemoteStore","Restarting streams for network reachability change."),await async function(_){const v=re(_);v.k_.add(4),await Ag(v),v.K_.set("Unknown"),v.k_.delete(4),await k0(v)}(this))})}),this.K_=new NA(r,u)}}async function k0(a){if(qc(a))for(const t of a.q_)await t(!0)}async function Ag(a){for(const t of a.q_)await t(!1)}function WE(a,t){const n=re(a);n.L_.has(t.targetId)||(n.L_.set(t.targetId,t),uy(n)?oy(n):rf(n).s_()&&ly(n,t))}function ry(a,t){const n=re(a),r=rf(n);n.L_.delete(t),r.s_()&&JE(n,t),n.L_.size===0&&(r.s_()?r.a_():qc(n)&&n.K_.set("Unknown"))}function ly(a,t){if(a.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ae.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}rf(a).V_(t)}function JE(a,t){a.U_.xe(t),rf(a).m_(t)}function oy(a){a.U_=new w7({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>a.L_.get(t)||null,nt:()=>a.datastore.serializer.databaseId}),rf(a).start(),a.K_.F_()}function uy(a){return qc(a)&&!rf(a).i_()&&a.L_.size>0}function qc(a){return re(a).k_.size===0}function $E(a){a.U_=void 0}async function MA(a){a.K_.set("Online")}async function xA(a){a.L_.forEach((t,n)=>{ly(a,t)})}async function VA(a,t){$E(a),uy(a)?(a.K_.O_(t),oy(a)):a.K_.set("Unknown")}async function UA(a,t,n){if(a.K_.set("Online"),t instanceof PE&&t.state===2&&t.cause)try{await async function(u,c){const d=c.cause;for(const m of c.targetIds)u.L_.has(m)&&(await u.remoteSyncer.rejectListen(m,d),u.L_.delete(m),u.U_.removeTarget(m))}(a,t)}catch(r){Bt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await v0(a,r)}else if(t instanceof n0?a.U_.$e(t):t instanceof zE?a.U_.Je(t):a.U_.Ge(t),!n.isEqual(ae.min()))try{const r=await XE(a.localStore);n.compareTo(r)>=0&&await function(c,d){const m=c.U_.it(d);return m.targetChanges.forEach((_,v)=>{if(_.resumeToken.approximateByteSize()>0){const b=c.L_.get(v);b&&c.L_.set(v,b.withResumeToken(_.resumeToken,d))}}),m.targetMismatches.forEach((_,v)=>{const b=c.L_.get(_);if(!b)return;c.L_.set(_,b.withResumeToken(qi.EMPTY_BYTE_STRING,b.snapshotVersion)),JE(c,_);const D=new Ru(b.target,_,v,b.sequenceNumber);ly(c,D)}),c.remoteSyncer.applyRemoteEvent(m)}(a,n)}catch(r){Bt("RemoteStore","Failed to raise snapshot:",r),await v0(a,r)}}async function v0(a,t,n){if(!sf(t))throw t;a.k_.add(1),await Ag(a),a.K_.set("Offline"),n||(n=()=>XE(a.localStore)),a.asyncQueue.enqueueRetryable(async()=>{Bt("RemoteStore","Retrying IndexedDB access"),await n(),a.k_.delete(1),await k0(a)})}function t3(a,t){return t().catch(n=>v0(a,n,t))}async function q0(a){const t=re(a),n=Lu(t);let r=t.B_.length>0?t.B_[t.B_.length-1].batchId:-1;for(;IA(t);)try{const u=await _A(t.localStore,r);if(u===null){t.B_.length===0&&n.a_();break}r=u.batchId,LA(t,u)}catch(u){await v0(t,u)}e3(t)&&n3(t)}function IA(a){return qc(a)&&a.B_.length<10}function LA(a,t){a.B_.push(t);const n=Lu(a);n.s_()&&n.f_&&n.g_(t.mutations)}function e3(a){return qc(a)&&!Lu(a).i_()&&a.B_.length>0}function n3(a){Lu(a).start()}async function zA(a){Lu(a).w_()}async function PA(a){const t=Lu(a);for(const n of a.B_)t.g_(n.mutations)}async function BA(a,t,n){const r=a.B_.shift(),u=ty.from(r,t,n);await t3(a,()=>a.remoteSyncer.applySuccessfulWrite(u)),await q0(a)}async function GA(a,t){t&&Lu(a).f_&&await async function(r,u){if(function(d){return R7(d)&&d!==Vt.ABORTED}(u.code)){const c=r.B_.shift();Lu(r).__(),await t3(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,u)),await q0(r)}}(a,t),e3(a)&&n3(a)}async function Pv(a,t){const n=re(a);n.asyncQueue.verifyOperationInProgress(),Bt("RemoteStore","RemoteStore received new credentials");const r=qc(n);n.k_.add(3),await Ag(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await k0(n)}async function HA(a,t){const n=re(a);t?(n.k_.delete(2),await k0(n)):t||(n.k_.add(2),await Ag(n),n.K_.set("Unknown"))}function rf(a){return a.W_||(a.W_=function(n,r,u){const c=re(n);return c.b_(),new CA(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(a.datastore,a.asyncQueue,{Ro:MA.bind(null,a),mo:xA.bind(null,a),po:VA.bind(null,a),R_:UA.bind(null,a)}),a.q_.push(async t=>{t?(a.W_.__(),uy(a)?oy(a):a.K_.set("Unknown")):(await a.W_.stop(),$E(a))})),a.W_}function Lu(a){return a.G_||(a.G_=function(n,r,u){const c=re(n);return c.b_(),new DA(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(a.datastore,a.asyncQueue,{Ro:()=>Promise.resolve(),mo:zA.bind(null,a),po:GA.bind(null,a),p_:PA.bind(null,a),y_:BA.bind(null,a)}),a.q_.push(async t=>{t?(a.G_.__(),await q0(a)):(await a.G_.stop(),a.B_.length>0&&(Bt("RemoteStore",`Stopping write stream with ${a.B_.length} pending writes`),a.B_=[]))})),a.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(t,n,r,u,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=u,this.removalCallback=c,this.deferred=new Ou,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,u,c){const d=Date.now()+r,m=new cy(t,n,d,u,c);return m.start(r),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new jt(Vt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hy(a,t){if(Do("AsyncQueue",`${t}: ${a}`),sf(a))return new jt(Vt.UNAVAILABLE,`${t}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{static emptySet(t){return new Fh(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Xt.comparator(n.key,r.key):(n,r)=>Xt.comparator(n.key,r.key),this.keyedMap=$d(),this.sortedSet=new Ln(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Fh)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=r.getNext().key;if(!u.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Fh;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(){this.z_=new Ln(Xt.comparator)}track(t){const n=t.doc.key,r=this.z_.get(n);r?t.type!==0&&r.type===3?this.z_=this.z_.insert(n,t):t.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.z_=this.z_.remove(n):t.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):te():this.z_=this.z_.insert(n,t)}j_(){const t=[];return this.z_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Jh{constructor(t,n,r,u,c,d,m,_,v){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=u,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=_,this.hasCachedResults=v}static fromInitialDocuments(t,n,r,u,c){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new Jh(t,n,Fh.emptySet(n),d,r,u,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&L0(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==r[u].type||!n[u].doc.isEqual(r[u].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}}class qA{constructor(){this.queries=Gv(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const u=re(n),c=u.queries;u.queries=Gv(),c.forEach((d,m)=>{for(const _ of m.J_)_.onError(r)})})(this,new jt(Vt.ABORTED,"Firestore shutting down"))}}function Gv(){return new Hc(a=>bE(a),L0)}async function jA(a,t){const n=re(a);let r=3;const u=t.query;let c=n.queries.get(u);c?!c.Y_()&&t.Z_()&&(r=2):(c=new kA,r=t.Z_()?0:1);try{switch(r){case 0:c.H_=await n.onListen(u,!0);break;case 1:c.H_=await n.onListen(u,!1);break;case 2:await n.onFirstRemoteStoreListen(u)}}catch(d){const m=hy(d,`Initialization of query '${Ph(t.query)}' failed`);return void t.onError(m)}n.queries.set(u,c),c.J_.push(t),t.ea(n.onlineState),c.H_&&t.ta(c.H_)&&fy(n)}async function FA(a,t){const n=re(a),r=t.query;let u=3;const c=n.queries.get(r);if(c){const d=c.J_.indexOf(t);d>=0&&(c.J_.splice(d,1),c.J_.length===0?u=t.Z_()?0:1:!c.Y_()&&t.Z_()&&(u=2))}switch(u){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function KA(a,t){const n=re(a);let r=!1;for(const u of t){const c=u.query,d=n.queries.get(c);if(d){for(const m of d.J_)m.ta(u)&&(r=!0);d.H_=u}}r&&fy(n)}function YA(a,t,n){const r=re(a),u=r.queries.get(t);if(u)for(const c of u.J_)c.onError(n);r.queries.delete(t)}function fy(a){a.X_.forEach(t=>{t.next()})}var b1,Hv;(Hv=b1||(b1={})).na="default",Hv.Cache="cache";class XA{constructor(t,n,r){this.query=t,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(t){if(!this.options.includeMetadataChanges){const r=[];for(const u of t.docChanges)u.type!==3&&r.push(u);t=new Jh(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ia?this.oa(t)&&(this.ra.next(t),n=!0):this._a(t,this.onlineState)&&(this.aa(t),n=!0),this.sa=t,n}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),n=!0),n}_a(t,n){if(!t.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}oa(t){if(t.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(t){t=Jh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==b1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(t){this.key=t}}class a3{constructor(t){this.key=t}}class QA{constructor(t,n){this.query=t,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=we(),this.mutatedKeys=we(),this.Va=AE(t),this.ma=new Fh(this.Va)}get fa(){return this.Ea}ga(t,n){const r=n?n.pa:new Bv,u=n?n.ma:this.ma;let c=n?n.mutatedKeys:this.mutatedKeys,d=u,m=!1;const _=this.query.limitType==="F"&&u.size===this.query.limit?u.last():null,v=this.query.limitType==="L"&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal((b,D)=>{const U=u.get(b),w=z0(this.query,D)?D:null,M=!!U&&this.mutatedKeys.has(U.key),I=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let P=!1;U&&w?U.data.isEqual(w.data)?M!==I&&(r.track({type:3,doc:w}),P=!0):this.ya(U,w)||(r.track({type:2,doc:w}),P=!0,(_&&this.Va(w,_)>0||v&&this.Va(w,v)<0)&&(m=!0)):!U&&w?(r.track({type:0,doc:w}),P=!0):U&&!w&&(r.track({type:1,doc:U}),P=!0,(_||v)&&(m=!0)),P&&(w?(d=d.add(w),c=I?c.add(b):c.delete(b)):(d=d.delete(b),c=c.delete(b)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),c=c.delete(b.key),r.track({type:1,doc:b})}return{ma:d,pa:r,ss:m,mutatedKeys:c}}ya(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,u){const c=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;const d=t.pa.j_();d.sort((b,D)=>function(w,M){const I=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return I(w)-I(M)}(b.type,D.type)||this.Va(b.doc,D.doc)),this.wa(r),u=u!=null&&u;const m=n&&!u?this.Sa():[],_=this.Ra.size===0&&this.current&&!u?1:0,v=_!==this.Aa;return this.Aa=_,d.length!==0||v?{snapshot:new Jh(this.query,t.ma,c,d,t.mutatedKeys,_===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:m}:{ba:m}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Bv,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.Ea.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=t.current)}Sa(){if(!this.current)return[];const t=this.Ra;this.Ra=we(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return t.forEach(r=>{this.Ra.has(r)||n.push(new a3(r))}),this.Ra.forEach(r=>{t.has(r)||n.push(new i3(r))}),n}va(t){this.Ea=t.Es,this.Ra=we();const n=this.ga(t.documents);return this.applyChanges(n,!0)}Ca(){return Jh.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class ZA{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class WA{constructor(t){this.key=t,this.Fa=!1}}class JA{constructor(t,n,r,u,c,d){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=u,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Ma={},this.xa=new Hc(m=>bE(m),L0),this.Oa=new Map,this.Na=new Set,this.Ba=new Ln(Xt.comparator),this.La=new Map,this.ka=new iy,this.qa={},this.Qa=new Map,this.Ka=Wh.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function $A(a,t,n=!0){const r=c3(a);let u;const c=r.xa.get(t);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),u=c.view.Ca()):u=await s3(r,t,n,!0),u}async function tR(a,t){const n=c3(a);await s3(n,t,!0,!1)}async function s3(a,t,n,r){const u=await vA(a.localStore,Ml(t)),c=u.targetId,d=a.sharedClientState.addLocalQueryTarget(c,n);let m;return r&&(m=await eR(a,t,c,d==="current",u.resumeToken)),a.isPrimaryClient&&n&&WE(a.remoteStore,u),m}async function eR(a,t,n,r,u){a.Ua=(D,U,w)=>async function(I,P,K,C){let N=P.view.ga(K);N.ss&&(N=await Iv(I.localStore,P.query,!1).then(({documents:q})=>P.view.ga(q,N)));const z=C&&C.targetChanges.get(P.targetId),H=C&&C.targetMismatches.get(P.targetId)!=null,j=P.view.applyChanges(N,I.isPrimaryClient,z,H);return qv(I,P.targetId,j.ba),j.snapshot}(a,D,U,w);const c=await Iv(a.localStore,t,!0),d=new QA(t,c.Es),m=d.ga(c.documents),_=bg.createSynthesizedTargetChangeForCurrentChange(n,r&&a.onlineState!=="Offline",u),v=d.applyChanges(m,a.isPrimaryClient,_);qv(a,n,v.ba);const b=new ZA(t,n,d);return a.xa.set(t,b),a.Oa.has(n)?a.Oa.get(n).push(t):a.Oa.set(n,[t]),v.snapshot}async function nR(a,t,n){const r=re(a),u=r.xa.get(t),c=r.Oa.get(u.targetId);if(c.length>1)return r.Oa.set(u.targetId,c.filter(d=>!L0(d,t))),void r.xa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(u.targetId),r.sharedClientState.isActiveQueryTarget(u.targetId)||await T1(r.localStore,u.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(u.targetId),n&&ry(r.remoteStore,u.targetId),A1(r,u.targetId)}).catch(af)):(A1(r,u.targetId),await T1(r.localStore,u.targetId,!0))}async function iR(a,t){const n=re(a),r=n.xa.get(t),u=n.Oa.get(r.targetId);n.isPrimaryClient&&u.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ry(n.remoteStore,r.targetId))}async function aR(a,t,n){const r=hR(a);try{const u=await function(d,m){const _=re(d),v=fi.now(),b=m.reduce((w,M)=>w.add(M.key),we());let D,U;return _.persistence.runTransaction("Locally write mutations","readwrite",w=>{let M=wo(),I=we();return _.hs.getEntries(w,b).next(P=>{M=P,M.forEach((K,C)=>{C.isValidDocument()||(I=I.add(K))})}).next(()=>_.localDocuments.getOverlayedDocuments(w,M)).next(P=>{D=P;const K=[];for(const C of m){const N=E7(C,D.get(C.key).overlayedDocument);N!=null&&K.push(new kc(C.key,N,mE(N.value.mapValue),Ao.exists(!0)))}return _.mutationQueue.addMutationBatch(w,v,K,m)}).next(P=>{U=P;const K=P.applyToLocalDocumentSet(D,I);return _.documentOverlayCache.saveOverlays(w,P.batchId,K)})}).then(()=>({batchId:U.batchId,changes:CE(D)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(u.batchId),function(d,m,_){let v=d.qa[d.currentUser.toKey()];v||(v=new Ln(xe)),v=v.insert(m,_),d.qa[d.currentUser.toKey()]=v}(r,u.batchId,n),await Rg(r,u.changes),await q0(r.remoteStore)}catch(u){const c=hy(u,"Failed to persist write");n.reject(c)}}async function r3(a,t){const n=re(a);try{const r=await pA(n.localStore,t);t.targetChanges.forEach((u,c)=>{const d=n.La.get(c);d&&(We(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?d.Fa=!0:u.modifiedDocuments.size>0?We(d.Fa):u.removedDocuments.size>0&&(We(d.Fa),d.Fa=!1))}),await Rg(n,r,t)}catch(r){await af(r)}}function kv(a,t,n){const r=re(a);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const u=[];r.xa.forEach((c,d)=>{const m=d.view.ea(t);m.snapshot&&u.push(m.snapshot)}),function(d,m){const _=re(d);_.onlineState=m;let v=!1;_.queries.forEach((b,D)=>{for(const U of D.J_)U.ea(m)&&(v=!0)}),v&&fy(_)}(r.eventManager,t),u.length&&r.Ma.R_(u),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function sR(a,t,n){const r=re(a);r.sharedClientState.updateQueryState(t,"rejected",n);const u=r.La.get(t),c=u&&u.key;if(c){let d=new Ln(Xt.comparator);d=d.insert(c,ha.newNoDocument(c,ae.min()));const m=we().add(c),_=new G0(ae.min(),new Map,new Ln(xe),d,m);await r3(r,_),r.Ba=r.Ba.remove(c),r.La.delete(t),dy(r)}else await T1(r.localStore,t,!1).then(()=>A1(r,t,n)).catch(af)}async function rR(a,t){const n=re(a),r=t.batch.batchId;try{const u=await mA(n.localStore,t);o3(n,r,null),l3(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Rg(n,u)}catch(u){await af(u)}}async function lR(a,t,n){const r=re(a);try{const u=await function(d,m){const _=re(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let b;return _.mutationQueue.lookupMutationBatch(v,m).next(D=>(We(D!==null),b=D.keys(),_.mutationQueue.removeMutationBatch(v,D))).next(()=>_.mutationQueue.performConsistencyCheck(v)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(v,b,m)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,b)).next(()=>_.localDocuments.getDocuments(v,b))})}(r.localStore,t);o3(r,t,n),l3(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Rg(r,u)}catch(u){await af(u)}}function l3(a,t){(a.Qa.get(t)||[]).forEach(n=>{n.resolve()}),a.Qa.delete(t)}function o3(a,t,n){const r=re(a);let u=r.qa[r.currentUser.toKey()];if(u){const c=u.get(t);c&&(n?c.reject(n):c.resolve(),u=u.remove(t)),r.qa[r.currentUser.toKey()]=u}}function A1(a,t,n=null){a.sharedClientState.removeLocalQueryTarget(t);for(const r of a.Oa.get(t))a.xa.delete(r),n&&a.Ma.Wa(r,n);a.Oa.delete(t),a.isPrimaryClient&&a.ka.yr(t).forEach(r=>{a.ka.containsKey(r)||u3(a,r)})}function u3(a,t){a.Na.delete(t.path.canonicalString());const n=a.Ba.get(t);n!==null&&(ry(a.remoteStore,n),a.Ba=a.Ba.remove(t),a.La.delete(n),dy(a))}function qv(a,t,n){for(const r of n)r instanceof i3?(a.ka.addReference(r.key,t),oR(a,r)):r instanceof a3?(Bt("SyncEngine","Document no longer in limbo: "+r.key),a.ka.removeReference(r.key,t),a.ka.containsKey(r.key)||u3(a,r.key)):te()}function oR(a,t){const n=t.key,r=n.path.canonicalString();a.Ba.get(n)||a.Na.has(r)||(Bt("SyncEngine","New document in limbo: "+n),a.Na.add(r),dy(a))}function dy(a){for(;a.Na.size>0&&a.Ba.size<a.maxConcurrentLimboResolutions;){const t=a.Na.values().next().value;a.Na.delete(t);const n=new Xt(An.fromString(t)),r=a.Ka.next();a.La.set(r,new WA(n)),a.Ba=a.Ba.insert(n,r),WE(a.remoteStore,new Ru(Ml(TE(n.path)),r,"TargetPurposeLimboResolution",x0.oe))}}async function Rg(a,t,n){const r=re(a),u=[],c=[],d=[];r.xa.isEmpty()||(r.xa.forEach((m,_)=>{d.push(r.Ua(_,t,n).then(v=>{var b;if((v||n)&&r.isPrimaryClient){const D=v?!v.fromCache:(b=n==null?void 0:n.targetChanges.get(_.targetId))===null||b===void 0?void 0:b.current;r.sharedClientState.updateQueryState(_.targetId,D?"current":"not-current")}if(v){u.push(v);const D=sy.zi(_.targetId,v);c.push(D)}}))}),await Promise.all(d),r.Ma.R_(u),await async function(_,v){const b=re(_);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>wt.forEach(v,U=>wt.forEach(U.Wi,w=>b.persistence.referenceDelegate.addReference(D,U.targetId,w)).next(()=>wt.forEach(U.Gi,w=>b.persistence.referenceDelegate.removeReference(D,U.targetId,w)))))}catch(D){if(!sf(D))throw D;Bt("LocalStore","Failed to update sequence numbers: "+D)}for(const D of v){const U=D.targetId;if(!D.fromCache){const w=b.us.get(U),M=w.snapshotVersion,I=w.withLastLimboFreeSnapshotVersion(M);b.us=b.us.insert(U,I)}}}(r.localStore,c))}async function uR(a,t){const n=re(a);if(!n.currentUser.isEqual(t)){Bt("SyncEngine","User change. New user:",t.toKey());const r=await YE(n.localStore,t);n.currentUser=t,function(c,d){c.Qa.forEach(m=>{m.forEach(_=>{_.reject(new jt(Vt.CANCELLED,d))})}),c.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Rg(n,r.Ts)}}function cR(a,t){const n=re(a),r=n.La.get(t);if(r&&r.Fa)return we().add(r.key);{let u=we();const c=n.Oa.get(t);if(!c)return u;for(const d of c){const m=n.xa.get(d);u=u.unionWith(m.view.fa)}return u}}function c3(a){const t=re(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=r3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sR.bind(null,t),t.Ma.R_=KA.bind(null,t.eventManager),t.Ma.Wa=YA.bind(null,t.eventManager),t}function hR(a){const t=re(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=rR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lR.bind(null,t),t}class E0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=H0(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,n){return null}Ya(t,n){return null}Ha(t){return gA(this.persistence,new fA,t.initialUser,this.serializer)}ja(t){return new KE(ay.ei,this.serializer)}za(t){return new SA}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}E0.provider={build:()=>new E0};class fR extends E0{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,n){We(this.persistence.referenceDelegate instanceof _0);const r=this.persistence.referenceDelegate.garbageCollector;return new W7(r,t.asyncQueue,n)}ja(t){const n=this.cacheSizeBytes!==void 0?$a.withCacheSize(this.cacheSizeBytes):$a.DEFAULT;return new KE(r=>_0.ei(r,n),this.serializer)}}class R1{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>kv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uR.bind(null,this.syncEngine),await HA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new qA}()}createDatastore(t){const n=H0(t.databaseInfo.databaseId),r=function(c){return new RA(c)}(t.databaseInfo);return function(c,d,m,_){return new wA(c,d,m,_)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,u,c,d,m){return new OA(r,u,c,d,m)}(this.localStore,this.datastore,t.asyncQueue,n=>kv(this.syncEngine,n,0),function(){return zv.p()?new zv:new TA}())}createSyncEngine(t,n){return function(u,c,d,m,_,v,b){const D=new JA(u,c,d,m,_,v);return b&&(D.$a=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(u){const c=re(u);Bt("RemoteStore","RemoteStore shutting down."),c.k_.add(5),await Ag(c),c.Q_.shutdown(),c.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}R1.provider={build:()=>new R1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):Do("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(t,n,r,u,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=u,this.user=ca.UNAUTHENTICATED,this.clientId=fE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,async d=>{Bt("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(r,d=>(Bt("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ou;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=hy(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function t1(a,t){a.asyncQueue.verifyOperationInProgress(),Bt("FirestoreClient","Initializing OfflineComponentProvider");const n=a.configuration;await t.initialize(n);let r=n.initialUser;a.setCredentialChangeListener(async u=>{r.isEqual(u)||(await YE(t.localStore,u),r=u)}),t.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=t}async function jv(a,t){a.asyncQueue.verifyOperationInProgress();const n=await mR(a);Bt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,a.configuration),a.setCredentialChangeListener(r=>Pv(t.remoteStore,r)),a.setAppCheckTokenChangeListener((r,u)=>Pv(t.remoteStore,u)),a._onlineComponents=t}async function mR(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){Bt("FirestoreClient","Using user provided OfflineComponentProvider");try{await t1(a,a._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(u){return u.name==="FirebaseError"?u.code===Vt.FAILED_PRECONDITION||u.code===Vt.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11}(n))throw n;Yh("Error using user provided cache. Falling back to memory cache: "+n),await t1(a,new E0)}}else Bt("FirestoreClient","Using default OfflineComponentProvider"),await t1(a,new fR(void 0));return a._offlineComponents}async function h3(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(Bt("FirestoreClient","Using user provided OnlineComponentProvider"),await jv(a,a._uninitializedComponentsProvider._online)):(Bt("FirestoreClient","Using default OnlineComponentProvider"),await jv(a,new R1))),a._onlineComponents}function pR(a){return h3(a).then(t=>t.syncEngine)}async function yR(a){const t=await h3(a),n=t.eventManager;return n.onListen=$A.bind(null,t.syncEngine),n.onUnlisten=nR.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=tR.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=iR.bind(null,t.syncEngine),n}function _R(a,t,n={}){const r=new Ou;return a.asyncQueue.enqueueAndForget(async()=>function(c,d,m,_,v){const b=new dR({next:U=>{b.eu(),d.enqueueAndForget(()=>FA(c,D)),U.fromCache&&_.source==="server"?v.reject(new jt(Vt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(U)},error:U=>v.reject(U)}),D=new XA(m,b,{includeMetadataChanges:!0,ua:!0});return jA(c,D)}(await yR(a),a.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(a){const t={};return a.timeoutSeconds!==void 0&&(t.timeoutSeconds=a.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(a,t,n){if(!n)throw new jt(Vt.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function vR(a,t,n,r){if(t===!0&&r===!0)throw new jt(Vt.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function Kv(a){if(!Xt.isDocumentKey(a))throw new jt(Vt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Yv(a){if(Xt.isDocumentKey(a))throw new jt(Vt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function gy(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(a);return t?`a custom ${t} object`:"an object"}}return typeof a=="function"?"a function":te()}function S0(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new jt(Vt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gy(a);throw new jt(Vt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new jt(Vt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new jt(Vt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}vR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=f3((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new jt(Vt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new jt(Vt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new jt(Vt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,u){return r.timeoutSeconds===u.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class j0{constructor(t,n,r,u){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new jt(Vt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new jt(Vt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xv(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Rb;switch(r.type){case"firstParty":return new Nb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new jt(Vt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Fv.get(n);r&&(Bt("ComponentProvider","Removing Datastore"),Fv.delete(n),r.terminate())}(this),Promise.resolve()}}function ER(a,t,n,r={}){var u;const c=(a=S0(a,j0))._getSettings(),d=`${t}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==d&&Yh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},c),{host:d,ssl:!1})),r.mockUserToken){let m,_;if(typeof r.mockUserToken=="string")m=r.mockUserToken,_=ca.MOCK_USER;else{m=G6(r.mockUserToken,(u=a._app)===null||u===void 0?void 0:u.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new jt(Vt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new ca(v)}a._authCredentials=new Cb(new hE(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new F0(this.firestore,t,this._query)}}class Ur{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ur(this.firestore,t,this._key)}}class Mu extends F0{constructor(t,n,r){super(t,n,TE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ur(this.firestore,null,new Xt(t))}withConverter(t){return new Mu(this.firestore,t,this._path)}}function Qv(a,t,...n){if(a=ts(a),d3("collection","path",t),a instanceof j0){const r=An.fromString(t,...n);return Yv(r),new Mu(a,null,r)}{if(!(a instanceof Ur||a instanceof Mu))throw new jt(Vt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(An.fromString(t,...n));return Yv(r),new Mu(a.firestore,null,r)}}function SR(a,t,...n){if(a=ts(a),arguments.length===1&&(t=fE.newId()),d3("doc","path",t),a instanceof j0){const r=An.fromString(t,...n);return Kv(r),new Ur(a,null,new Xt(r))}{if(!(a instanceof Ur||a instanceof Mu))throw new jt(Vt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(An.fromString(t,...n));return Kv(r),new Ur(a.firestore,a instanceof Mu?a.converter:null,new Xt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(t=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new QE(this,"async_queue_retry"),this.fu=()=>{const r=$p();r&&Bt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=t;const n=$p();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.du){this.du=!0,this.Vu=t||!1;const n=$p();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.du)return new Promise(()=>{});const n=new Ou;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!sf(t))throw t;Bt("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const n=this.gu.then(()=>(this.Ru=!0,t().catch(r=>{this.Au=r,this.Ru=!1;const u=function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),m}(r);throw Do("INTERNAL UNHANDLED ERROR: ",u),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(t,n,r){this.pu(),this.mu.indexOf(t)>-1&&(n=0);const u=cy.createAndSchedule(this,t,n,r,c=>this.Su(c));return this.Eu.push(u),u}pu(){this.Au&&te()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const n of this.Eu)if(n.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const n=this.Eu.indexOf(t);this.Eu.splice(n,1)}}class my extends j0{constructor(t,n,r,u){super(t,n,r,u),this.type="firestore",this._queue=new Zv,this._persistenceKey=(u==null?void 0:u.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Zv(t),this._firestoreClient=void 0,await t}}}function g3(a,t){const n=typeof a=="object"?a:E4(),r=typeof a=="string"?a:"(default)",u=P1(n,"firestore").getImmediate({identifier:r});if(!u._initialized){const c=P6("firestore");c&&ER(u,...c)}return u}function m3(a){if(a._terminated)throw new jt(Vt.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||TR(a),a._firestoreClient}function TR(a){var t,n,r;const u=a._freezeSettings(),c=function(m,_,v,b){return new jb(m,_,v,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,f3(b.experimentalLongPollingOptions),b.useFetchStreams)}(a._databaseId,((t=a._app)===null||t===void 0?void 0:t.options.appId)||"",a._persistenceKey,u);a._componentsProvider||!((n=u.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=u.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(a._componentsProvider={_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider}),a._firestoreClient=new gR(a._authCredentials,a._appCheckCredentials,a._queue,c,a._componentsProvider&&function(m){const _=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(_),_online:_}}(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(t){this._byteString=t}static fromBase64String(t){try{return new $h(qi.fromBase64String(t))}catch(n){throw new jt(Vt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new $h(qi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new jt(Vt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ki(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new jt(Vt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new jt(Vt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return xe(this._lat,t._lat)||xe(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,u){if(r.length!==u.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==u[c])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=/^__.*__$/;class AR{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new kc(t,this.data,this.fieldMask,n,this.fieldTransforms):new Tg(t,this.data,n,this.fieldTransforms)}}function p3(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class Ey{constructor(t,n,r,u,c,d){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=u,c===void 0&&this.Fu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new Ey(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),u=this.xu({path:r,Nu:!1});return u.Bu(t),u}Lu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),u=this.xu({path:r,Nu:!1});return u.Fu(),u}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return T0(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Bu(this.path.get(t))}Bu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(p3(this.Mu)&&bR.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class RR{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||H0(t)}$u(t,n,r,u=!1){return new Ey({Mu:t,methodName:n,Ku:r,path:ki.emptyPath(),Nu:!1,Qu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function CR(a){const t=a._freezeSettings(),n=H0(a._databaseId);return new RR(a._databaseId,!!t.ignoreUndefinedProperties,n)}function DR(a,t,n,r,u,c={}){const d=a.$u(c.merge||c.mergeFields?2:0,t,n,u);E3("Data must be an object, but it was:",d,r);const m=_3(r,d);let _,v;if(c.merge)_=new Vr(d.fieldMask),v=d.fieldTransforms;else if(c.mergeFields){const b=[];for(const D of c.mergeFields){const U=wR(t,D,n);if(!d.contains(U))throw new jt(Vt.INVALID_ARGUMENT,`Field '${U}' is specified in your field mask but missing from your input data.`);OR(b,U)||b.push(U)}_=new Vr(b),v=d.fieldTransforms.filter(D=>_.covers(D.field))}else _=null,v=d.fieldTransforms;return new AR(new js(m),_,v)}class Sy extends yy{_toFieldTransform(t){return new p7(t.path,new dg)}isEqual(t){return t instanceof Sy}}function y3(a,t){if(v3(a=ts(a)))return E3("Unsupported field value:",t,a),_3(a,t);if(a instanceof yy)return function(r,u){if(!p3(u.Mu))throw u.qu(`${r._methodName}() can only be used with update() and set()`);if(!u.path)throw u.qu(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(u);c&&u.fieldTransforms.push(c)}(a,t),null;if(a===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(r,u){const c=[];let d=0;for(const m of r){let _=y3(m,u.ku(d));_==null&&(_={nullValue:"NULL_VALUE"}),c.push(_),d++}return{arrayValue:{values:c}}}(a,t)}return function(r,u){if((r=ts(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return d7(u.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=fi.fromDate(r);return{timestampValue:y0(u.serializer,c)}}if(r instanceof fi){const c=new fi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:y0(u.serializer,c)}}if(r instanceof _y)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $h)return{bytesValue:BE(u.serializer,r._byteString)};if(r instanceof Ur){const c=u.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw u.qu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:ny(r.firestore._databaseId||u.databaseId,r._key.path)}}if(r instanceof vy)return function(d,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map(_=>{if(typeof _!="number")throw m.qu("VectorValues must only contain numeric values.");return $1(m.serializer,_)})}}}}}}(r,u);throw u.qu(`Unsupported field value: ${gy(r)}`)}(a,t)}function _3(a,t){const n={};return dE(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Gc(a,(r,u)=>{const c=y3(u,t.Ou(r));c!=null&&(n[r]=c)}),{mapValue:{fields:n}}}function v3(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof fi||a instanceof _y||a instanceof $h||a instanceof Ur||a instanceof yy||a instanceof vy)}function E3(a,t,n){if(!v3(n)||!function(u){return typeof u=="object"&&u!==null&&(Object.getPrototypeOf(u)===Object.prototype||Object.getPrototypeOf(u)===null)}(n)){const r=gy(n);throw r==="an object"?t.qu(a+" a custom object"):t.qu(a+" "+r)}}function wR(a,t,n){if((t=ts(t))instanceof py)return t._internalPath;if(typeof t=="string")return S3(a,t);throw T0("Field path arguments must be of type string or ",a,!1,void 0,n)}const NR=new RegExp("[~\\*/\\[\\]]");function S3(a,t,n){if(t.search(NR)>=0)throw T0(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new py(...t.split("."))._internalPath}catch{throw T0(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function T0(a,t,n,r,u){const c=r&&!r.isEmpty(),d=u!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let _="";return(c||d)&&(_+=" (found",c&&(_+=` in field ${r}`),d&&(_+=` in document ${u}`),_+=")"),new jt(Vt.INVALID_ARGUMENT,m+a+_)}function OR(a,t){return a.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(t,n,r,u,c){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=u,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ur(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new MR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(b3("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MR extends T3{data(){return super.data()}}function b3(a,t){return typeof t=="string"?S3(a,t):t instanceof py?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new jt(Vt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VR{convertValue(t,n="none"){switch(Iu(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ti(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Uu(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw te()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Gc(t,(u,c)=>{r[u]=this.convertValue(c,n)}),r}convertVectorValue(t){var n,r,u;const c=(u=(r=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||u===void 0?void 0:u.map(d=>ti(d.doubleValue));return new vy(c)}convertGeoPoint(t){return new _y(ti(t.latitude),ti(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=U0(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(cg(t));default:return null}}convertTimestamp(t){const n=Vu(t);return new fi(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=An.fromString(t);We(FE(r));const u=new hg(r.get(1),r.get(3)),c=new Xt(r.popFirst(5));return u.isEqual(n)||Do(`Document ${c} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(a,t,n){let r;return r=a?a.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class IR extends T3{constructor(t,n,r,u,c,d){super(t,n,r,u,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new i0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(b3("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class i0 extends IR{data(t={}){return super.data(t)}}class LR{constructor(t,n,r,u){this._firestore=t,this._userDataWriter=n,this._snapshot=u,this.metadata=new Km(u.hasPendingWrites,u.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new i0(this._firestore,this._userDataWriter,r.key,r,new Km(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new jt(Vt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,c){if(u._snapshot.oldDocs.isEmpty()){let d=0;return u._snapshot.docChanges.map(m=>{const _=new i0(u._firestore,u._userDataWriter,m.doc.key,m.doc,new Km(u._snapshot.mutatedKeys.has(m.doc.key),u._snapshot.fromCache),u.query.converter);return m.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}})}{let d=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const _=new i0(u._firestore,u._userDataWriter,m.doc.key,m.doc,new Km(u._snapshot.mutatedKeys.has(m.doc.key),u._snapshot.fromCache),u.query.converter);let v=-1,b=-1;return m.type!==0&&(v=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),b=d.indexOf(m.doc.key)),{type:zR(m.type),doc:_,oldIndex:v,newIndex:b}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zR(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}class PR extends VR{constructor(t){super(),this.firestore=t}convertBytes(t){return new $h(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ur(this.firestore,null,n)}}function Wv(a){a=S0(a,F0);const t=S0(a.firestore,my),n=m3(t),r=new PR(t);return xR(a._query),_R(n,a._query).then(u=>new LR(t,r,a,u))}function BR(a,t){const n=S0(a.firestore,my),r=SR(a),u=UR(a.converter,t);return GR(n,[DR(CR(a.firestore),"addDoc",r._key,u,a.converter!==null,{}).toMutation(r._key,Ao.exists(!1))]).then(()=>r)}function GR(a,t){return function(r,u){const c=new Ou;return r.asyncQueue.enqueueAndForget(async()=>aR(await pR(r),u,c)),c.promise}(m3(a),t)}function HR(){return new Sy("serverTimestamp")}(function(t,n=!0){(function(u){nf=u})(tf),Kh(new Ic("firestore",(r,{instanceIdentifier:u,options:c})=>{const d=r.getProvider("app").getImmediate(),m=new my(new Db(r.getProvider("auth-internal")),new Mb(r.getProvider("app-check-internal")),function(v,b){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new jt(Vt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hg(v.options.projectId,b)}(d,u),d);return c=Object.assign({useFetchStreams:n},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),wu(fv,"4.7.6",t),wu(fv,"4.7.6","esm2017")})();const kR={apiKey:"AIzaSyC2TPUyNqYDP-3ebM2bQ-Kx3CJVeb-zlEw",authDomain:"teeline-tracer.firebaseapp.com",projectId:"teeline-tracer",storageBucket:"teeline-tracer.firebasestorage.app",messagingSenderId:"1039627863544",appId:"1:1039627863544:web:79a76cb451f01ce471820d",measurementId:"G-WY00H60KMG"},Ty=v4(kR);g3(Ty);const rg=bb(Ty),qR=({onAuthChange:a})=>{const[t,n]=ze.useState(""),[r,u]=ze.useState(""),[c,d]=ze.useState(!0);ze.useEffect(()=>{const _=X4(rg,v=>{a(v)});return()=>_()},[a]);const m=async()=>{try{c?await u8(rg,t,r):await o8(rg,t,r),n(""),u("")}catch(_){console.error("Auth Error:",_)}};return Yt.jsx("div",{style:xc.fullScreenContainer,children:Yt.jsxs("div",{style:xc.authBox,children:[Yt.jsx("h2",{style:xc.title,children:c?"Login":"Sign Up"}),Yt.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:_=>n(_.target.value),style:xc.input}),Yt.jsx("input",{type:"password",placeholder:"Password",value:r,onChange:_=>u(_.target.value),style:xc.input}),Yt.jsx("button",{style:xc.authButton,onClick:m,children:c?"Login":"Sign Up"}),Yt.jsx("button",{style:xc.toggleButton,onClick:()=>d(!c),children:c?"Need an account? Sign Up":"Already have an account? Login"})]})})},xc={fullScreenContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",backgroundColor:"#E6F2ED",fontFamily:"'Baloo 2', cursive",borderRadius:"16px"},authBox:{backgroundColor:"#D1E1DB",padding:"30px",borderRadius:"16px",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.1)",textAlign:"center",width:"300px"},title:{fontSize:"24px",fontWeight:"bold",color:"#2F3D38",marginBottom:"20px"},input:{width:"100%",padding:"10px",border:"2px solid #A6C3BB",borderRadius:"12px",fontSize:"16px",marginBottom:"15px",textAlign:"center"},authButton:{width:"100%",padding:"12px",backgroundColor:"#6D8B83",color:"#FFFFFF",border:"none",borderRadius:"16px",cursor:"pointer",fontSize:"16px",marginBottom:"10px",transition:"background 0.3s"},toggleButton:{background:"none",border:"none",color:"#2F3D38",fontSize:"14px",cursor:"pointer",textDecoration:"underline"}},Jv=g3(Ty),Ih=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],jR="/teeline-tracing",FR=()=>{const[a,t]=ze.useState(null),[n,r]=ze.useState(null),[u,c]=ze.useState(null),[d,m]=ze.useState(!1),[_,v]=ze.useState({}),[b,D]=ze.useState([]),[U,w]=ze.useState([]);ze.useEffect(()=>{const z=X4(rg,H=>{t(H)});return()=>z()},[]),ze.useEffect(()=>{if(!a)return;(async()=>{try{const H=Qv(Jv,`users/${a.uid}/piles`),j=await Wv(H),q=[],V=[];j.forEach(R=>{const x=R.data();x.pileType==="good"?q.push(x.letter):V.push(x.letter)}),D(q),w(V)}catch(H){console.error("Error fetching user data:",H)}})()},[a]);const M=async(z,H)=>{if(a)try{const j=Qv(Jv,`users/${a.uid}/piles`),q=await Wv(j);let V=!1;q.forEach(R=>{R.data().letter===z&&R.data().pileType===H&&(V=!0)}),V||(await BR(j,{pileType:H,letter:z,createdAt:HR()}),D(R=>H==="good"?[...R,z]:R.filter(x=>x!==z)),w(R=>H==="needsWork"?[...R,z]:R.filter(x=>x!==z)))}catch(j){console.error("Error adding letter to pile:",j)}};ze.useEffect(()=>{(async()=>{try{const H=await Promise.all(Ih.map(q=>fetch(`${jR}/normalized_svgs/${q}.svg`).then(V=>V.text()))),j={};H.forEach((q,V)=>{const R=Ih[V],x=q.match(/<path[^>]*d="([^"]*)"/);x&&(j[R]=x[1])}),v(j)}catch(H){console.error("Error loading SVG paths:",H)}})()},[]);const I=z=>{r(z),m(!1)},P=()=>{m(!0)},K=z=>{n&&M(n,z?"good":"needsWork"),m(!1)},C=()=>{if(n){const H=(Ih.indexOf(n)+1)%Ih.length;r(Ih[H]),m(!1)}},N=async()=>{await f8(rg)};return a?Yt.jsxs("div",{style:oa.container,children:[!n&&Yt.jsxs("div",{style:oa.topBar,children:[Yt.jsxs("h2",{style:oa.title,children:["Welcome, ",a==null?void 0:a.email]}),Yt.jsx("button",{style:oa.logoutButton,onClick:N,children:"Logout"})]}),n?Yt.jsx("div",{style:oa.previewContainer,children:d?Yt.jsx(N6,{svgPath:_[n],onComplete:K}):Yt.jsxs(Yt.Fragment,{children:[Yt.jsxs("h2",{style:oa.title,children:["Teeline Version: ",n.toUpperCase()]}),_[n]?Yt.jsx(O6,{path:_[n],width:400,height:400}):Yt.jsx("p",{children:"Loading Teeline version..."}),Yt.jsx("button",{style:oa.traceButton,onClick:P,children:"Start Tracing"}),Yt.jsx("button",{style:oa.nextButton,onClick:C,children:"Move to Next Letter"}),Yt.jsx("button",{style:oa.backButton,onClick:()=>r(null),children:"Back to Grid"})]})}):Yt.jsxs(Yt.Fragment,{children:[Yt.jsx("div",{style:oa.grid,children:Ih.map((z,H)=>Yt.jsx("div",{style:{...oa.card,...u===H?oa.cardHover:{},animationDelay:`${H*.1}s`},onMouseEnter:()=>c(H),onMouseLeave:()=>c(null),onClick:()=>I(z),children:Yt.jsx("span",{style:oa.letter,children:z.toUpperCase()})},z))}),Yt.jsxs("div",{style:oa.pilesContainer,children:[Yt.jsxs("div",{style:oa.pile,children:[Yt.jsx("h3",{children:"Good To Go"}),b.map(z=>Yt.jsx("div",{children:z.toUpperCase()},z))]}),Yt.jsxs("div",{style:oa.pile,children:[Yt.jsx("h3",{children:"Needs Work"}),U.map(z=>Yt.jsx("div",{children:z.toUpperCase()},z))]})]})]})]}):Yt.jsx(qR,{onAuthChange:t})},oa={nextButton:{padding:"12px 24px",backgroundColor:"#4CAF50",color:"#FFFFFF",borderRadius:"16px",cursor:"pointer",marginTop:"10px"},container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"#E6F2ED",padding:"20px",fontFamily:"'Baloo 2', cursive",borderRadius:"16px"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"30px",width:"100%",maxWidth:"800px"},card:{display:"flex",alignItems:"center",justifyContent:"center",border:"3px solid #D1E1DB",borderRadius:"16px",background:"linear-gradient(135deg, #A6C3BB, #D1E1DB)",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.1)",width:"150px",height:"150px",cursor:"pointer",fontSize:"24px",fontWeight:"bold",textAlign:"center",color:"#2F3D38",opacity:0,transform:"translateY(-50px)",animation:"dropIn 0.5s ease-out forwards",transition:"transform 0.2s ease, box-shadow 0.2s ease"},cardHover:{transform:"translateY(-4px)",boxShadow:"8px 8px 0px rgba(0, 0, 0, 0.3)",background:"linear-gradient(135deg, #D1E1DB, #A6C3BB)"},previewContainer:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",padding:"20px",borderRadius:"16px",background:"#E6F2ED",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.2)"},title:{fontSize:"28px",fontWeight:"bold",color:"#2F3D38"},traceButton:{padding:"12px 24px",backgroundColor:"#6D8B83",color:"#FFFFFF",borderRadius:"16px",cursor:"pointer"},backButton:{padding:"12px 24px",backgroundColor:"#A6C3BB",color:"#2F3D38",borderRadius:"16px",cursor:"pointer"},letter:{fontSize:"48px",fontWeight:"bold",color:"#2F3D38"},pilesContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:"20px",marginTop:"20px",width:"100%",maxWidth:"800px"},pile:{flex:1,border:"3px dashed #A6C3BB",borderRadius:"16px",padding:"20px",backgroundColor:"#E6F2ED",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},logoutButton:{width:"100%",padding:"12px",marginBottom:"20px",backgroundColor:"#A6C3BB",color:"#2F3D38",border:"none",borderRadius:"16px",cursor:"pointer",fontSize:"16px",transition:"background 0.3s"}},KR=()=>Yt.jsxs("div",{style:$v.appContainer,children:[Yt.jsx("h1",{style:$v.title,children:"Teeline Alphabet"}),Yt.jsx(FR,{})]}),$v={appContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"radial-gradient(circle at bottom right, #2F3D38, #6D8B83 40%, #A6C3BB 70%)",padding:"20px",boxShadow:"0px 10px 20px rgba(0, 0, 0, 0.2)",borderRadius:"16px",border:"4px dotted #2F3D38"},title:{textAlign:"center",marginBottom:"20px",fontSize:"36px",color:"#2F3D38",fontFamily:"'Baloo 2', cursive",textShadow:"3px 3px 0px #6D8B83, 5px 5px 0px #A6C3BB"}};m5.createRoot(document.getElementById("root")).render(Yt.jsx(ze.StrictMode,{children:Yt.jsx(KR,{})}));
