(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))r(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(u){if(u.ep)return;u.ep=!0;const c=n(u);fetch(u.href,c)}})();var r_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function N1(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Dp={exports:{}},rd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_;function h5(){if(l_)return rd;l_=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,u,c){var d=null;if(c!==void 0&&(d=""+c),u.key!==void 0&&(d=""+u.key),"key"in u){c={};for(var m in u)m!=="key"&&(c[m]=u[m])}else c=u;return u=c.ref,{$$typeof:a,type:r,key:d,ref:u!==void 0?u:null,props:c}}return rd.Fragment=t,rd.jsx=n,rd.jsxs=n,rd}var o_;function f5(){return o_||(o_=1,Dp.exports=h5()),Dp.exports}var kt=f5(),wp={exports:{}},de={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_;function d5(){if(u_)return de;u_=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.iterator;function U(Q){return Q===null||typeof Q!="object"?null:(Q=R&&Q[R]||Q["@@iterator"],typeof Q=="function"?Q:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,I={};function P(Q,at,Et){this.props=Q,this.context=at,this.refs=I,this.updater=Et||w}P.prototype.isReactComponent={},P.prototype.setState=function(Q,at){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,at,"setState")},P.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function K(){}K.prototype=P.prototype;function C(Q,at,Et){this.props=Q,this.context=at,this.refs=I,this.updater=Et||w}var M=C.prototype=new K;M.constructor=C,O(M,P.prototype),M.isPureReactComponent=!0;var G=Array.isArray,H={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function q(Q,at,Et,st,gt,Rt){return Et=Rt.ref,{$$typeof:a,type:Q,key:at,ref:Et!==void 0?Et:null,props:Rt}}function V(Q,at){return q(Q.type,at,void 0,void 0,void 0,Q.props)}function D(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===a}function x(Q){var at={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(Et){return at[Et]})}var L=/\/+/g;function j(Q,at){return typeof Q=="object"&&Q!==null&&Q.key!=null?x(""+Q.key):at.toString(36)}function T(){}function F(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(T,T):(Q.status="pending",Q.then(function(at){Q.status==="pending"&&(Q.status="fulfilled",Q.value=at)},function(at){Q.status==="pending"&&(Q.status="rejected",Q.reason=at)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function k(Q,at,Et,st,gt){var Rt=typeof Q;(Rt==="undefined"||Rt==="boolean")&&(Q=null);var Nt=!1;if(Q===null)Nt=!0;else switch(Rt){case"bigint":case"string":case"number":Nt=!0;break;case"object":switch(Q.$$typeof){case a:case t:Nt=!0;break;case b:return Nt=Q._init,k(Nt(Q._payload),at,Et,st,gt)}}if(Nt)return gt=gt(Q),Nt=st===""?"."+j(Q,0):st,G(gt)?(Et="",Nt!=null&&(Et=Nt.replace(L,"$&/")+"/"),k(gt,at,Et,"",function(At){return At})):gt!=null&&(D(gt)&&(gt=V(gt,Et+(gt.key==null||Q&&Q.key===gt.key?"":(""+gt.key).replace(L,"$&/")+"/")+Nt)),at.push(gt)),1;Nt=0;var et=st===""?".":st+":";if(G(Q))for(var ht=0;ht<Q.length;ht++)st=Q[ht],Rt=et+j(st,ht),Nt+=k(st,at,Et,Rt,gt);else if(ht=U(Q),typeof ht=="function")for(Q=ht.call(Q),ht=0;!(st=Q.next()).done;)st=st.value,Rt=et+j(st,ht++),Nt+=k(st,at,Et,Rt,gt);else if(Rt==="object"){if(typeof Q.then=="function")return k(F(Q),at,Et,st,gt);throw at=String(Q),Error("Objects are not valid as a React child (found: "+(at==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":at)+"). If you meant to render a collection of children, use an array instead.")}return Nt}function X(Q,at,Et){if(Q==null)return Q;var st=[],gt=0;return k(Q,st,"","",function(Rt){return at.call(Et,Rt,gt++)}),st}function $(Q){if(Q._status===-1){var at=Q._result;at=at(),at.then(function(Et){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=Et)},function(Et){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=Et)}),Q._status===-1&&(Q._status=0,Q._result=at)}if(Q._status===1)return Q._result.default;throw Q._result}var it=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var at=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(at))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)};function ut(){}return de.Children={map:X,forEach:function(Q,at,Et){X(Q,function(){at.apply(this,arguments)},Et)},count:function(Q){var at=0;return X(Q,function(){at++}),at},toArray:function(Q){return X(Q,function(at){return at})||[]},only:function(Q){if(!D(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},de.Component=P,de.Fragment=n,de.Profiler=u,de.PureComponent=C,de.StrictMode=r,de.Suspense=_,de.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,de.act=function(){throw Error("act(...) is not supported in production builds of React.")},de.cache=function(Q){return function(){return Q.apply(null,arguments)}},de.cloneElement=function(Q,at,Et){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var st=O({},Q.props),gt=Q.key,Rt=void 0;if(at!=null)for(Nt in at.ref!==void 0&&(Rt=void 0),at.key!==void 0&&(gt=""+at.key),at)!Y.call(at,Nt)||Nt==="key"||Nt==="__self"||Nt==="__source"||Nt==="ref"&&at.ref===void 0||(st[Nt]=at[Nt]);var Nt=arguments.length-2;if(Nt===1)st.children=Et;else if(1<Nt){for(var et=Array(Nt),ht=0;ht<Nt;ht++)et[ht]=arguments[ht+2];st.children=et}return q(Q.type,gt,void 0,void 0,Rt,st)},de.createContext=function(Q){return Q={$$typeof:d,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:c,_context:Q},Q},de.createElement=function(Q,at,Et){var st,gt={},Rt=null;if(at!=null)for(st in at.key!==void 0&&(Rt=""+at.key),at)Y.call(at,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(gt[st]=at[st]);var Nt=arguments.length-2;if(Nt===1)gt.children=Et;else if(1<Nt){for(var et=Array(Nt),ht=0;ht<Nt;ht++)et[ht]=arguments[ht+2];gt.children=et}if(Q&&Q.defaultProps)for(st in Nt=Q.defaultProps,Nt)gt[st]===void 0&&(gt[st]=Nt[st]);return q(Q,Rt,void 0,void 0,null,gt)},de.createRef=function(){return{current:null}},de.forwardRef=function(Q){return{$$typeof:m,render:Q}},de.isValidElement=D,de.lazy=function(Q){return{$$typeof:b,_payload:{_status:-1,_result:Q},_init:$}},de.memo=function(Q,at){return{$$typeof:v,type:Q,compare:at===void 0?null:at}},de.startTransition=function(Q){var at=H.T,Et={};H.T=Et;try{var st=Q(),gt=H.S;gt!==null&&gt(Et,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(ut,it)}catch(Rt){it(Rt)}finally{H.T=at}},de.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},de.use=function(Q){return H.H.use(Q)},de.useActionState=function(Q,at,Et){return H.H.useActionState(Q,at,Et)},de.useCallback=function(Q,at){return H.H.useCallback(Q,at)},de.useContext=function(Q){return H.H.useContext(Q)},de.useDebugValue=function(){},de.useDeferredValue=function(Q,at){return H.H.useDeferredValue(Q,at)},de.useEffect=function(Q,at){return H.H.useEffect(Q,at)},de.useId=function(){return H.H.useId()},de.useImperativeHandle=function(Q,at,Et){return H.H.useImperativeHandle(Q,at,Et)},de.useInsertionEffect=function(Q,at){return H.H.useInsertionEffect(Q,at)},de.useLayoutEffect=function(Q,at){return H.H.useLayoutEffect(Q,at)},de.useMemo=function(Q,at){return H.H.useMemo(Q,at)},de.useOptimistic=function(Q,at){return H.H.useOptimistic(Q,at)},de.useReducer=function(Q,at,Et){return H.H.useReducer(Q,at,Et)},de.useRef=function(Q){return H.H.useRef(Q)},de.useState=function(Q){return H.H.useState(Q)},de.useSyncExternalStore=function(Q,at,Et){return H.H.useSyncExternalStore(Q,at,Et)},de.useTransition=function(){return H.H.useTransition()},de.version="19.0.0",de}var c_;function b0(){return c_||(c_=1,wp.exports=d5()),wp.exports}var ae=b0();const oa=N1(ae);var Np={exports:{}},ld={},Op={exports:{}},Mp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function g5(){return h_||(h_=1,function(a){function t(X,$){var it=X.length;X.push($);t:for(;0<it;){var ut=it-1>>>1,Q=X[ut];if(0<u(Q,$))X[ut]=$,X[it]=Q,it=ut;else break t}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var $=X[0],it=X.pop();if(it!==$){X[0]=it;t:for(var ut=0,Q=X.length,at=Q>>>1;ut<at;){var Et=2*(ut+1)-1,st=X[Et],gt=Et+1,Rt=X[gt];if(0>u(st,it))gt<Q&&0>u(Rt,st)?(X[ut]=Rt,X[gt]=it,ut=gt):(X[ut]=st,X[Et]=it,ut=Et);else if(gt<Q&&0>u(Rt,it))X[ut]=Rt,X[gt]=it,ut=gt;else break t}}return $}function u(X,$){var it=X.sortIndex-$.sortIndex;return it!==0?it:X.id-$.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();a.unstable_now=function(){return d.now()-m}}var _=[],v=[],b=1,R=null,U=3,w=!1,O=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function M(X){for(var $=n(v);$!==null;){if($.callback===null)r(v);else if($.startTime<=X)r(v),$.sortIndex=$.expirationTime,t(_,$);else break;$=n(v)}}function G(X){if(I=!1,M(X),!O)if(n(_)!==null)O=!0,F();else{var $=n(v);$!==null&&k(G,$.startTime-X)}}var H=!1,Y=-1,q=5,V=-1;function D(){return!(a.unstable_now()-V<q)}function x(){if(H){var X=a.unstable_now();V=X;var $=!0;try{t:{O=!1,I&&(I=!1,K(Y),Y=-1),w=!0;var it=U;try{e:{for(M(X),R=n(_);R!==null&&!(R.expirationTime>X&&D());){var ut=R.callback;if(typeof ut=="function"){R.callback=null,U=R.priorityLevel;var Q=ut(R.expirationTime<=X);if(X=a.unstable_now(),typeof Q=="function"){R.callback=Q,M(X),$=!0;break e}R===n(_)&&r(_),M(X)}else r(_);R=n(_)}if(R!==null)$=!0;else{var at=n(v);at!==null&&k(G,at.startTime-X),$=!1}}break t}finally{R=null,U=it,w=!1}$=void 0}}finally{$?L():H=!1}}}var L;if(typeof C=="function")L=function(){C(x)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,T=j.port2;j.port1.onmessage=x,L=function(){T.postMessage(null)}}else L=function(){P(x,0)};function F(){H||(H=!0,L())}function k(X,$){Y=P(function(){X(a.unstable_now())},$)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(X){X.callback=null},a.unstable_continueExecution=function(){O||w||(O=!0,F())},a.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<X?Math.floor(1e3/X):5},a.unstable_getCurrentPriorityLevel=function(){return U},a.unstable_getFirstCallbackNode=function(){return n(_)},a.unstable_next=function(X){switch(U){case 1:case 2:case 3:var $=3;break;default:$=U}var it=U;U=$;try{return X()}finally{U=it}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(X,$){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var it=U;U=X;try{return $()}finally{U=it}},a.unstable_scheduleCallback=function(X,$,it){var ut=a.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?ut+it:ut):it=ut,X){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=it+Q,X={id:b++,callback:$,priorityLevel:X,startTime:it,expirationTime:Q,sortIndex:-1},it>ut?(X.sortIndex=it,t(v,X),n(_)===null&&X===n(v)&&(I?(K(Y),Y=-1):I=!0,k(G,it-ut))):(X.sortIndex=Q,t(_,X),O||w||(O=!0,F())),X},a.unstable_shouldYield=D,a.unstable_wrapCallback=function(X){var $=U;return function(){var it=U;U=$;try{return X.apply(this,arguments)}finally{U=it}}}}(Mp)),Mp}var f_;function O1(){return f_||(f_=1,Op.exports=g5()),Op.exports}var xp={exports:{}},ra={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function m5(){if(d_)return ra;d_=1;var a=b0();function t(_){var v="https://react.dev/errors/"+_;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)v+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+_+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},u=Symbol.for("react.portal");function c(_,v,b){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:R==null?null:""+R,children:_,containerInfo:v,implementation:b}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(_,v){if(_==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return ra.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ra.createPortal=function(_,v){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(t(299));return c(_,v,null,b)},ra.flushSync=function(_){var v=d.T,b=r.p;try{if(d.T=null,r.p=2,_)return _()}finally{d.T=v,r.p=b,r.d.f()}},ra.preconnect=function(_,v){typeof _=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,r.d.C(_,v))},ra.prefetchDNS=function(_){typeof _=="string"&&r.d.D(_)},ra.preinit=function(_,v){if(typeof _=="string"&&v&&typeof v.as=="string"){var b=v.as,R=m(b,v.crossOrigin),U=typeof v.integrity=="string"?v.integrity:void 0,w=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;b==="style"?r.d.S(_,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:R,integrity:U,fetchPriority:w}):b==="script"&&r.d.X(_,{crossOrigin:R,integrity:U,fetchPriority:w,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},ra.preinitModule=function(_,v){if(typeof _=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var b=m(v.as,v.crossOrigin);r.d.M(_,{crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&r.d.M(_)},ra.preload=function(_,v){if(typeof _=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var b=v.as,R=m(b,v.crossOrigin);r.d.L(_,b,{crossOrigin:R,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},ra.preloadModule=function(_,v){if(typeof _=="string")if(v){var b=m(v.as,v.crossOrigin);r.d.m(_,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else r.d.m(_)},ra.requestFormReset=function(_){r.d.r(_)},ra.unstable_batchedUpdates=function(_,v){return _(v)},ra.useFormState=function(_,v,b){return d.H.useFormState(_,v,b)},ra.useFormStatus=function(){return d.H.useHostTransitionStatus()},ra.version="19.0.0",ra}var g_;function p5(){if(g_)return xp.exports;g_=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),xp.exports=m5(),xp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function y5(){if(m_)return ld;m_=1;var a=O1(),t=b0(),n=p5();function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var c=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),U=Symbol.for("react.consumer"),w=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),G=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=H&&e[H]||e["@@iterator"],typeof e=="function"?e:null)}var q=Symbol.for("react.client.reference");function V(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===q?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case m:return"Portal";case b:return"Profiler";case v:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case w:return(e.displayName||"Context")+".Provider";case U:return(e._context.displayName||"Context")+".Consumer";case O:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case K:return i=e.displayName||null,i!==null?i:V(e.type)||"Memo";case C:i=e._payload,e=e._init;try{return V(e(i))}catch{}}return null}var D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,x=Object.assign,L,j;function T(e){if(L===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);L=i&&i[1]||"",j=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+L+e+j}var F=!1;function k(e,i){if(!e||F)return"";F=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(i){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(St){var yt=St}Reflect.construct(e,[],Ot)}else{try{Ot.call()}catch(St){yt=St}e.call(Ot.prototype)}}else{try{throw Error()}catch(St){yt=St}(Ot=e())&&typeof Ot.catch=="function"&&Ot.catch(function(){})}}catch(St){if(St&&yt&&typeof St.stack=="string")return[St.stack,yt.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=h.DetermineComponentFrameRoot(),B=E[0],Z=E[1];if(B&&Z){var tt=B.split(`
`),lt=Z.split(`
`);for(p=h=0;h<tt.length&&!tt[h].includes("DetermineComponentFrameRoot");)h++;for(;p<lt.length&&!lt[p].includes("DetermineComponentFrameRoot");)p++;if(h===tt.length||p===lt.length)for(h=tt.length-1,p=lt.length-1;1<=h&&0<=p&&tt[h]!==lt[p];)p--;for(;1<=h&&0<=p;h--,p--)if(tt[h]!==lt[p]){if(h!==1||p!==1)do if(h--,p--,0>p||tt[h]!==lt[p]){var bt=`
`+tt[h].replace(" at new "," at ");return e.displayName&&bt.includes("<anonymous>")&&(bt=bt.replace("<anonymous>",e.displayName)),bt}while(1<=h&&0<=p);break}}}finally{F=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?T(o):""}function X(e){switch(e.tag){case 26:case 27:case 5:return T(e.type);case 16:return T("Lazy");case 13:return T("Suspense");case 19:return T("SuspenseList");case 0:case 15:return e=k(e.type,!1),e;case 11:return e=k(e.type.render,!1),e;case 1:return e=k(e.type,!0),e;default:return""}}function $(e){try{var i="";do i+=X(e),e=e.return;while(e);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function it(e){var i=e,o=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,i.flags&4098&&(o=i.return),e=i.return;while(e)}return i.tag===3?o:null}function ut(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function Q(e){if(it(e)!==e)throw Error(r(188))}function at(e){var i=e.alternate;if(!i){if(i=it(e),i===null)throw Error(r(188));return i!==e?null:e}for(var o=e,h=i;;){var p=o.return;if(p===null)break;var E=p.alternate;if(E===null){if(h=p.return,h!==null){o=h;continue}break}if(p.child===E.child){for(E=p.child;E;){if(E===o)return Q(p),e;if(E===h)return Q(p),i;E=E.sibling}throw Error(r(188))}if(o.return!==h.return)o=p,h=E;else{for(var B=!1,Z=p.child;Z;){if(Z===o){B=!0,o=p,h=E;break}if(Z===h){B=!0,h=p,o=E;break}Z=Z.sibling}if(!B){for(Z=E.child;Z;){if(Z===o){B=!0,o=E,h=p;break}if(Z===h){B=!0,h=E,o=p;break}Z=Z.sibling}if(!B)throw Error(r(189))}}if(o.alternate!==h)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?e:i}function Et(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=Et(e),i!==null)return i;e=e.sibling}return null}var st=Array.isArray,gt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Rt={pending:!1,data:null,method:null,action:null},Nt=[],et=-1;function ht(e){return{current:e}}function At(e){0>et||(e.current=Nt[et],Nt[et]=null,et--)}function Ct(e,i){et++,Nt[et]=e.current,e.current=i}var It=ht(null),Pt=ht(null),$t=ht(null),ue=ht(null);function Yt(e,i){switch(Ct($t,i),Ct(Pt,e),Ct(It,null),e=i.nodeType,e){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?Iy(i):0;break;default:if(e=e===8?i.parentNode:i,i=e.tagName,e=e.namespaceURI)e=Iy(e),i=Ly(e,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}At(It),Ct(It,i)}function Fe(){At(It),At(Pt),At($t)}function oe(e){e.memoizedState!==null&&Ct(ue,e);var i=It.current,o=Ly(i,e.type);i!==o&&(Ct(Pt,e),Ct(It,o))}function Ke(e){Pt.current===e&&(At(It),At(Pt)),ue.current===e&&(At(ue),ed._currentValue=Rt)}var gi=Object.prototype.hasOwnProperty,ke=a.unstable_scheduleCallback,oi=a.unstable_cancelCallback,en=a.unstable_shouldYield,Xn=a.unstable_requestPaint,nn=a.unstable_now,Oi=a.unstable_getCurrentPriorityLevel,De=a.unstable_ImmediatePriority,He=a.unstable_UserBlockingPriority,Qn=a.unstable_NormalPriority,fa=a.unstable_LowPriority,ji=a.unstable_IdlePriority,da=a.log,zn=a.unstable_setDisableYieldValue,an=null,Re=null;function ga(e){if(Re&&typeof Re.onCommitFiberRoot=="function")try{Re.onCommitFiberRoot(an,e,void 0,(e.current.flags&128)===128)}catch{}}function Fi(e){if(typeof da=="function"&&zn(e),Re&&typeof Re.setStrictMode=="function")try{Re.setStrictMode(an,e)}catch{}}var Zn=Math.clz32?Math.clz32:Gu,js=Math.log,Bu=Math.LN2;function Gu(e){return e>>>=0,e===0?32:31-(js(e)/Bu|0)|0}var ma=128,Fs=4194304;function Ki(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function pa(e,i){var o=e.pendingLanes;if(o===0)return 0;var h=0,p=e.suspendedLanes,E=e.pingedLanes,B=e.warmLanes;e=e.finishedLanes!==0;var Z=o&134217727;return Z!==0?(o=Z&~p,o!==0?h=Ki(o):(E&=Z,E!==0?h=Ki(E):e||(B=Z&~B,B!==0&&(h=Ki(B))))):(Z=o&~p,Z!==0?h=Ki(Z):E!==0?h=Ki(E):e||(B=o&~B,B!==0&&(h=Ki(B)))),h===0?0:i!==0&&i!==h&&!(i&p)&&(p=h&-h,B=i&-i,p>=B||p===32&&(B&4194176)!==0)?i:h}function Ks(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Ys(e,i){switch(e){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xs(){var e=ma;return ma<<=1,!(ma&4194176)&&(ma=128),e}function ts(){var e=Fs;return Fs<<=1,!(Fs&62914560)&&(Fs=4194304),e}function Il(e){for(var i=[],o=0;31>o;o++)i.push(e);return i}function En(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ku(e,i,o,h,p,E){var B=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var Z=e.entanglements,tt=e.expirationTimes,lt=e.hiddenUpdates;for(o=B&~o;0<o;){var bt=31-Zn(o),Ot=1<<bt;Z[bt]=0,tt[bt]=-1;var yt=lt[bt];if(yt!==null)for(lt[bt]=null,bt=0;bt<yt.length;bt++){var St=yt[bt];St!==null&&(St.lane&=-536870913)}o&=~Ot}h!==0&&Es(e,h,0),E!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=E&~(B&~i))}function Es(e,i,o){e.pendingLanes|=i,e.suspendedLanes&=~i;var h=31-Zn(i);e.entangledLanes|=i,e.entanglements[h]=e.entanglements[h]|1073741824|o&4194218}function Ss(e,i){var o=e.entangledLanes|=i;for(e=e.entanglements;o;){var h=31-Zn(o),p=1<<h;p&i|e[h]&i&&(e[h]|=i),o&=~p}}function es(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Hu(){var e=gt.p;return e!==0?e:(e=window.event,e===void 0?32:t_(e.type))}function Mi(e,i){var o=gt.p;try{return gt.p=e,i()}finally{gt.p=o}}var ni=Math.random().toString(36).slice(2),Rn="__reactFiber$"+ni,ce="__reactProps$"+ni,ns="__reactContainer$"+ni,Qs="__reactEvents$"+ni,Ll="__reactListeners$"+ni,is="__reactHandles$"+ni,qu="__reactResources$"+ni,Ts="__reactMarker$"+ni;function Zs(e){delete e[Rn],delete e[ce],delete e[Qs],delete e[Ll],delete e[is]}function ya(e){var i=e[Rn];if(i)return i;for(var o=e.parentNode;o;){if(i=o[ns]||o[Rn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(e=By(e);e!==null;){if(o=e[Rn])return o;e=By(e)}return i}e=o,o=e.parentNode}return null}function Sn(e){if(e=e[Rn]||e[ns]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Je(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(r(33))}function Oa(e){var i=e[qu];return i||(i=e[qu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function sn(e){e[Ts]=!0}var zl=new Set,Yi={};function mi(e,i){pi(e,i),pi(e+"Capture",i)}function pi(e,i){for(Yi[e]=i,e=0;e<i.length;e++)zl.add(i[e])}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),No={},Oo={};function ju(e){return gi.call(Oo,e)?!0:gi.call(No,e)?!1:jc.test(e)?Oo[e]=!0:(No[e]=!0,!1)}function Ws(e,i,o){if(ju(i))if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var h=i.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+o)}}function Js(e,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+o)}}function Xi(e,i,o,h){if(h===null)e.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(i,o,""+h)}}function yi(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Fc(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Kc(e){var i=Fc(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),h=""+e[i];if(!e.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,E=o.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return p.call(this)},set:function(B){h=""+B,E.call(this,B)}}),Object.defineProperty(e,i,{enumerable:o.enumerable}),{getValue:function(){return h},setValue:function(B){h=""+B},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Ir(e){e._valueTracker||(e._valueTracker=Kc(e))}function Mo(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var o=i.getValue(),h="";return e&&(h=Fc(e)?e.checked?"true":"false":e.value),e=h,e!==o?(i.setValue(e),!0):!1}function Lr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var bs=/[\n"\\]/g;function pn(e){return e.replace(bs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function $s(e,i,o,h,p,E,B,Z){e.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?e.type=B:e.removeAttribute("type"),i!=null?B==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+yi(i)):e.value!==""+yi(i)&&(e.value=""+yi(i)):B!=="submit"&&B!=="reset"||e.removeAttribute("value"),i!=null?Pl(e,B,yi(i)):o!=null?Pl(e,B,yi(o)):h!=null&&e.removeAttribute("value"),p==null&&E!=null&&(e.defaultChecked=!!E),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?e.name=""+yi(Z):e.removeAttribute("name")}function zr(e,i,o,h,p,E,B,Z){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(e.type=E),i!=null||o!=null){if(!(E!=="submit"&&E!=="reset"||i!=null))return;o=o!=null?""+yi(o):"",i=i!=null?""+yi(i):o,Z||i===e.value||(e.value=i),e.defaultValue=i}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,e.checked=Z?e.checked:!!h,e.defaultChecked=!!h,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(e.name=B)}function Pl(e,i,o){i==="number"&&Lr(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function Ue(e,i,o,h){if(e=e.options,i){i={};for(var p=0;p<o.length;p++)i["$"+o[p]]=!0;for(o=0;o<e.length;o++)p=i.hasOwnProperty("$"+e[o].value),e[o].selected!==p&&(e[o].selected=p),p&&h&&(e[o].defaultSelected=!0)}else{for(o=""+yi(o),i=null,p=0;p<e.length;p++){if(e[p].value===o){e[p].selected=!0,h&&(e[p].defaultSelected=!0);return}i!==null||e[p].disabled||(i=e[p])}i!==null&&(i.selected=!0)}}function Pr(e,i,o){if(i!=null&&(i=""+yi(i),i!==e.value&&(e.value=i),o==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=o!=null?""+yi(o):""}function _a(e,i,o,h){if(i==null){if(h!=null){if(o!=null)throw Error(r(92));if(st(h)){if(1<h.length)throw Error(r(93));h=h[0]}o=h}o==null&&(o=""),i=o}o=yi(i),e.defaultValue=o,h=e.textContent,h===o&&h!==""&&h!==null&&(e.value=h)}function va(e,i){if(i){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=i;return}}e.textContent=i}var xo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Br(e,i,o){var h=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?h?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":h?e.setProperty(i,o):typeof o!="number"||o===0||xo.has(i)?i==="float"?e.cssFloat=o:e[i]=(""+o).trim():e[i]=o+"px"}function Fu(e,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(e=e.style,o!=null){for(var h in o)!o.hasOwnProperty(h)||i!=null&&i.hasOwnProperty(h)||(h.indexOf("--")===0?e.setProperty(h,""):h==="float"?e.cssFloat="":e[h]="");for(var p in i)h=i[p],i.hasOwnProperty(p)&&o[p]!==h&&Br(e,p,h)}else for(var E in i)i.hasOwnProperty(E)&&Br(e,E,i[E])}function Bl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function as(e){return Xc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ea=null;function Gr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var As=null,Rs=null;function ss(e){var i=Sn(e);if(i&&(e=i.stateNode)){var o=e[ce]||null;t:switch(e=i.stateNode,i.type){case"input":if($s(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+pn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var h=o[i];if(h!==e&&h.form===e.form){var p=h[ce]||null;if(!p)throw Error(r(90));$s(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<o.length;i++)h=o[i],h.form===e.form&&Mo(h)}break t;case"textarea":Pr(e,o.value,o.defaultValue);break t;case"select":i=o.value,i!=null&&Ue(e,!!o.multiple,i,!1)}}}var Vo=!1;function Ku(e,i,o){if(Vo)return e(i,o);Vo=!0;try{var h=e(i);return h}finally{if(Vo=!1,(As!==null||Rs!==null)&&(fo(),As&&(i=As,e=Rs,Rs=As=null,ss(i),e)))for(i=0;i<e.length;i++)ss(e[i])}}function kr(e,i){var o=e.stateNode;if(o===null)return null;var h=o[ce]||null;if(h===null)return null;o=h[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break t;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Qi=!1;if(xi)try{var Hr={};Object.defineProperty(Hr,"passive",{get:function(){Qi=!0}}),window.addEventListener("test",Hr,Hr),window.removeEventListener("test",Hr,Hr)}catch{Qi=!1}var rs=null,qr=null,tr=null;function Uo(){if(tr)return tr;var e,i=qr,o=i.length,h,p="value"in rs?rs.value:rs.textContent,E=p.length;for(e=0;e<o&&i[e]===p[e];e++);var B=o-e;for(h=1;h<=B&&i[o-h]===p[E-h];h++);return tr=p.slice(e,1<h?1-h:void 0)}function Zi(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Ma(){return!0}function jr(){return!1}function Wn(e){function i(o,h,p,E,B){this._reactName=o,this._targetInst=p,this.type=h,this.nativeEvent=E,this.target=B,this.currentTarget=null;for(var Z in e)e.hasOwnProperty(Z)&&(o=e[Z],this[Z]=o?o(E):E[Z]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Ma:jr,this.isPropagationStopped=jr,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ma)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ma)},persist:function(){},isPersistent:Ma}),i}var Pe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fr=Wn(Pe),Kr=x({},Pe,{view:0,detail:0}),Yu=Wn(Kr),xa,er,ls,nr=x({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ir,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ls&&(ls&&e.type==="mousemove"?(xa=e.screenX-ls.screenX,er=e.screenY-ls.screenY):er=xa=0,ls=e),xa)},movementY:function(e){return"movementY"in e?e.movementY:er}}),Sa=Wn(nr),Xu=x({},nr,{dataTransfer:0}),lf=Wn(Xu),yn=x({},Kr,{relatedTarget:0}),Gl=Wn(yn),Io=x({},Pe,{animationName:0,elapsedTime:0,pseudoElement:0}),kl=Wn(Io),Qu=x({},Pe,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Hl=Wn(Qu),ql=x({},Pe,{data:0}),jl=Wn(ql),Yr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fl(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Wu[e])?!!i[e]:!1}function ir(){return Fl}var Ju=x({},Kr,{key:function(e){if(e.key){var i=Yr[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Zi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ir,charCode:function(e){return e.type==="keypress"?Zi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Xr=Wn(Ju),Lo=x({},nr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kl=Wn(Lo),Cs=x({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ir}),zo=Wn(Cs),$u=x({},Pe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Va=Wn($u),Po=x({},nr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Bo=Wn(Po),_i=x({},Pe,{newState:0,oldState:0}),os=Wn(_i),Ua=[9,13,27,32],Ia=xi&&"CompositionEvent"in window,g=null;xi&&"documentMode"in document&&(g=document.documentMode);var A=xi&&"TextEvent"in window&&!g,z=xi&&(!Ia||g&&8<g&&11>=g),J=" ",ot=!1;function vt(e,i){switch(e){case"keyup":return Ua.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ee=!1;function _n(e,i){switch(e){case"compositionend":return Lt(i);case"keypress":return i.which!==32?null:(ot=!0,J);case"textInput":return e=i.data,e===J&&ot?null:e;default:return null}}function Se(e,i){if(Ee)return e==="compositionend"||!Ia&&vt(e,i)?(e=Uo(),tr=qr=rs=null,Ee=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return z&&i.locale!=="ko"?null:i.data;default:return null}}var Cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Cn[e.type]:i==="textarea"}function Dn(e,i,o,h){As?Rs?Rs.push(h):Rs=[h]:As=h,i=Am(i,"onChange"),0<i.length&&(o=new Fr("onChange","change",null,o,h),e.push({event:o,listeners:i}))}var ii=null,La=null;function Go(e){Oy(e,0)}function tc(e){var i=Je(e);if(Mo(i))return e}function Qc(e,i){if(e==="change")return i}var Zc=!1;if(xi){var Wc;if(xi){var ko="oninput"in document;if(!ko){var Ho=document.createElement("div");Ho.setAttribute("oninput","return;"),ko=typeof Ho.oninput=="function"}Wc=ko}else Wc=!1;Zc=Wc&&(!document.documentMode||9<document.documentMode)}function fn(){ii&&(ii.detachEvent("onpropertychange",Cg),La=ii=null)}function Cg(e){if(e.propertyName==="value"&&tc(La)){var i=[];Dn(i,La,e,Gr(e)),Ku(Go,i)}}function X0(e,i,o){e==="focusin"?(fn(),ii=i,La=o,ii.attachEvent("onpropertychange",Cg)):e==="focusout"&&fn()}function Dg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return tc(La)}function ec(e,i){if(e==="click")return tc(i)}function Qr(e,i){if(e==="input"||e==="change")return tc(i)}function wg(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Wi=typeof Object.is=="function"?Object.is:wg;function us(e,i){if(Wi(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var o=Object.keys(e),h=Object.keys(i);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var p=o[h];if(!gi.call(i,p)||!Wi(e[p],i[p]))return!1}return!0}function Ji(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function of(e,i){var o=Ji(e);e=0;for(var h;o;){if(o.nodeType===3){if(h=e+o.textContent.length,e<=i&&h>=i)return{node:o,offset:i-e};e=h}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Ji(o)}}function uf(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?uf(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function cf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Lr(e.document);i instanceof e.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)e=i.contentWindow;else break;i=Lr(e.document)}return i}function nc(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function hf(e,i){var o=cf(i);i=e.focusedElem;var h=e.selectionRange;if(o!==i&&i&&i.ownerDocument&&uf(i.ownerDocument.documentElement,i)){if(h!==null&&nc(i)){if(e=h.start,o=h.end,o===void 0&&(o=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(o,i.value.length);else if(o=(e=i.ownerDocument||document)&&e.defaultView||window,o.getSelection){o=o.getSelection();var p=i.textContent.length,E=Math.min(h.start,p);h=h.end===void 0?E:Math.min(h.end,p),!o.extend&&E>h&&(p=h,h=E,E=p),p=of(i,E);var B=of(i,h);p&&B&&(o.rangeCount!==1||o.anchorNode!==p.node||o.anchorOffset!==p.offset||o.focusNode!==B.node||o.focusOffset!==B.offset)&&(e=e.createRange(),e.setStart(p.node,p.offset),o.removeAllRanges(),E>h?(o.addRange(e),o.extend(B.node,B.offset)):(e.setEnd(B.node,B.offset),o.addRange(e)))}}for(e=[],o=i;o=o.parentNode;)o.nodeType===1&&e.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)o=e[i],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Jc=xi&&"documentMode"in document&&11>=document.documentMode,Yl=null,ff=null,qo=null,$c=!1;function za(e,i,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;$c||Yl==null||Yl!==Lr(h)||(h=Yl,"selectionStart"in h&&nc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),qo&&us(qo,h)||(qo=h,h=Am(ff,"onSelect"),0<h.length&&(i=new Fr("onSelect","select",null,i,o),e.push({event:i,listeners:h}),i.target=Yl)))}function ar(e,i){var o={};return o[e.toLowerCase()]=i.toLowerCase(),o["Webkit"+e]="webkit"+i,o["Moz"+e]="moz"+i,o}var Xl={animationend:ar("Animation","AnimationEnd"),animationiteration:ar("Animation","AnimationIteration"),animationstart:ar("Animation","AnimationStart"),transitionrun:ar("Transition","TransitionRun"),transitionstart:ar("Transition","TransitionStart"),transitioncancel:ar("Transition","TransitionCancel"),transitionend:ar("Transition","TransitionEnd")},df={},th={};xi&&(th=document.createElement("div").style,"AnimationEvent"in window||(delete Xl.animationend.animation,delete Xl.animationiteration.animation,delete Xl.animationstart.animation),"TransitionEvent"in window||delete Xl.transitionend.transition);function Bn(e){if(df[e])return df[e];if(!Xl[e])return e;var i=Xl[e],o;for(o in i)if(i.hasOwnProperty(o)&&o in th)return df[e]=i[o];return e}var gf=Bn("animationend"),$i=Bn("animationiteration"),mf=Bn("animationstart"),sr=Bn("transitionrun"),jo=Bn("transitionstart"),Zr=Bn("transitioncancel"),eh=Bn("transitionend"),nh=new Map,rr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Pa(e,i){nh.set(e,i),mi(i,[e])}var ui=[],Ds=0,lr=0;function ic(){for(var e=Ds,i=lr=Ds=0;i<e;){var o=ui[i];ui[i++]=null;var h=ui[i];ui[i++]=null;var p=ui[i];ui[i++]=null;var E=ui[i];if(ui[i++]=null,h!==null&&p!==null){var B=h.pending;B===null?p.next=p:(p.next=B.next,B.next=p),h.pending=p}E!==0&&sc(o,p,E)}}function ac(e,i,o,h){ui[Ds++]=e,ui[Ds++]=i,ui[Ds++]=o,ui[Ds++]=h,lr|=h,e.lanes|=h,e=e.alternate,e!==null&&(e.lanes|=h)}function Ql(e,i,o,h){return ac(e,i,o,h),rc(e)}function or(e,i){return ac(e,null,null,i),rc(e)}function sc(e,i,o){e.lanes|=o;var h=e.alternate;h!==null&&(h.lanes|=o);for(var p=!1,E=e.return;E!==null;)E.childLanes|=o,h=E.alternate,h!==null&&(h.childLanes|=o),E.tag===22&&(e=E.stateNode,e===null||e._visibility&1||(p=!0)),e=E,E=E.return;p&&i!==null&&e.tag===3&&(E=e.stateNode,p=31-Zn(o),E=E.hiddenUpdates,e=E[p],e===null?E[p]=[i]:e.push(i),i.lane=o|536870912)}function rc(e){if(50<Xa)throw Xa=0,Nr=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Wr={},ih=new WeakMap;function ta(e,i){if(typeof e=="object"&&e!==null){var o=ih.get(e);return o!==void 0?o:(i={value:e,source:i,stack:$(i)},ih.set(e,i),i)}return{value:e,source:i,stack:$(i)}}var Zl=[],Jr=0,vi=null,lc=0,rn=[],Ta=0,ur=null,ws=1,cr="";function Vi(e,i){Zl[Jr++]=lc,Zl[Jr++]=vi,vi=e,lc=i}function pf(e,i,o){rn[Ta++]=ws,rn[Ta++]=cr,rn[Ta++]=ur,ur=e;var h=ws;e=cr;var p=32-Zn(h)-1;h&=~(1<<p),o+=1;var E=32-Zn(i)+p;if(30<E){var B=p-p%5;E=(h&(1<<B)-1).toString(32),h>>=B,p-=B,ws=1<<32-Zn(i)+p|o<<p|h,cr=E+e}else ws=1<<E|o<<p|h,cr=e}function oc(e){e.return!==null&&(Vi(e,1),pf(e,1,0))}function $r(e){for(;e===vi;)vi=Zl[--Jr],Zl[Jr]=null,lc=Zl[--Jr],Zl[Jr]=null;for(;e===ur;)ur=rn[--Ta],rn[Ta]=null,cr=rn[--Ta],rn[Ta]=null,ws=rn[--Ta],rn[Ta]=null}var Ei=null,ai=null,Oe=!1,Ba=null,Ga=!1,uc=Error(r(519));function Wl(e){var i=Error(r(418,""));throw Ns(ta(i,e)),uc}function Ng(e){var i=e.stateNode,o=e.type,h=e.memoizedProps;switch(i[Rn]=e,i[ce]=h,o){case"dialog":xe("cancel",i),xe("close",i);break;case"iframe":case"object":case"embed":xe("load",i);break;case"video":case"audio":for(o=0;o<Zf.length;o++)xe(Zf[o],i);break;case"source":xe("error",i);break;case"img":case"image":case"link":xe("error",i),xe("load",i);break;case"details":xe("toggle",i);break;case"input":xe("invalid",i),zr(i,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Ir(i);break;case"select":xe("invalid",i);break;case"textarea":xe("invalid",i),_a(i,h.value,h.defaultValue,h.children),Ir(i)}o=h.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||h.suppressHydrationWarning===!0||Uy(i.textContent,o)?(h.popover!=null&&(xe("beforetoggle",i),xe("toggle",i)),h.onScroll!=null&&xe("scroll",i),h.onScrollEnd!=null&&xe("scrollend",i),h.onClick!=null&&(i.onclick=Rm),i=!0):i=!1,i||Wl(e)}function Og(e){for(Ei=e.return;Ei;)switch(Ei.tag){case 3:case 27:Ga=!0;return;case 5:case 13:Ga=!1;return;default:Ei=Ei.return}}function Fo(e){if(e!==Ei)return!1;if(!Oe)return Og(e),Oe=!0,!1;var i=!1,o;if((o=e.tag!==3&&e.tag!==27)&&((o=e.tag===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||gp(e.type,e.memoizedProps)),o=!o),o&&(i=!0),i&&ai&&Wl(e),Og(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(o=e.data,o==="/$"){if(i===0){ai=Mr(e.nextSibling);break t}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;e=e.nextSibling}ai=null}}else ai=Ei?Mr(e.stateNode.nextSibling):null;return!0}function Ko(){ai=Ei=null,Oe=!1}function Ns(e){Ba===null?Ba=[e]:Ba.push(e)}var tl=Error(r(460)),yf=Error(r(474)),ah={then:function(){}};function Mg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cc(){}function el(e,i,o){switch(o=e[o],o===void 0?e.push(i):o!==i&&(i.then(cc,cc),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,e===tl?Error(r(483)):e;default:if(typeof i.status=="string")i.then(cc,cc);else{if(e=Xe,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(h){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=h}},function(h){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=h}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,e===tl?Error(r(483)):e}throw Yo=i,tl}}var Yo=null;function Be(){if(Yo===null)throw Error(r(459));var e=Yo;return Yo=null,e}var nl=null,hc=0;function fc(e){var i=hc;return hc+=1,nl===null&&(nl=[]),el(nl,e,i)}function dc(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function sh(e,i){throw i.$$typeof===c?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function xg(e){var i=e._init;return i(e._payload)}function Vg(e){function i(ft,rt){if(e){var mt=ft.deletions;mt===null?(ft.deletions=[rt],ft.flags|=16):mt.push(rt)}}function o(ft,rt){if(!e)return null;for(;rt!==null;)i(ft,rt),rt=rt.sibling;return null}function h(ft){for(var rt=new Map;ft!==null;)ft.key!==null?rt.set(ft.key,ft):rt.set(ft.index,ft),ft=ft.sibling;return rt}function p(ft,rt){return ft=zi(ft,rt),ft.index=0,ft.sibling=null,ft}function E(ft,rt,mt){return ft.index=mt,e?(mt=ft.alternate,mt!==null?(mt=mt.index,mt<rt?(ft.flags|=33554434,rt):mt):(ft.flags|=33554434,rt)):(ft.flags|=1048576,rt)}function B(ft){return e&&ft.alternate===null&&(ft.flags|=33554434),ft}function Z(ft,rt,mt,Dt){return rt===null||rt.tag!==6?(rt=qn(mt,ft.mode,Dt),rt.return=ft,rt):(rt=p(rt,mt),rt.return=ft,rt)}function tt(ft,rt,mt,Dt){var Gt=mt.type;return Gt===_?bt(ft,rt,mt.props.children,Dt,mt.key):rt!==null&&(rt.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===C&&xg(Gt)===rt.type)?(rt=p(rt,mt.props),dc(rt,mt),rt.return=ft,rt):(rt=ou(mt.type,mt.key,mt.props,null,ft.mode,Dt),dc(rt,mt),rt.return=ft,rt)}function lt(ft,rt,mt,Dt){return rt===null||rt.tag!==4||rt.stateNode.containerInfo!==mt.containerInfo||rt.stateNode.implementation!==mt.implementation?(rt=Rc(mt,ft.mode,Dt),rt.return=ft,rt):(rt=p(rt,mt.children||[]),rt.return=ft,rt)}function bt(ft,rt,mt,Dt,Gt){return rt===null||rt.tag!==7?(rt=Sl(mt,ft.mode,Dt,Gt),rt.return=ft,rt):(rt=p(rt,mt),rt.return=ft,rt)}function Ot(ft,rt,mt){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return rt=qn(""+rt,ft.mode,mt),rt.return=ft,rt;if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case d:return mt=ou(rt.type,rt.key,rt.props,null,ft.mode,mt),dc(mt,rt),mt.return=ft,mt;case m:return rt=Rc(rt,ft.mode,mt),rt.return=ft,rt;case C:var Dt=rt._init;return rt=Dt(rt._payload),Ot(ft,rt,mt)}if(st(rt)||Y(rt))return rt=Sl(rt,ft.mode,mt,null),rt.return=ft,rt;if(typeof rt.then=="function")return Ot(ft,fc(rt),mt);if(rt.$$typeof===w)return Ot(ft,Th(ft,rt),mt);sh(ft,rt)}return null}function yt(ft,rt,mt,Dt){var Gt=rt!==null?rt.key:null;if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return Gt!==null?null:Z(ft,rt,""+mt,Dt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case d:return mt.key===Gt?tt(ft,rt,mt,Dt):null;case m:return mt.key===Gt?lt(ft,rt,mt,Dt):null;case C:return Gt=mt._init,mt=Gt(mt._payload),yt(ft,rt,mt,Dt)}if(st(mt)||Y(mt))return Gt!==null?null:bt(ft,rt,mt,Dt,null);if(typeof mt.then=="function")return yt(ft,rt,fc(mt),Dt);if(mt.$$typeof===w)return yt(ft,rt,Th(ft,mt),Dt);sh(ft,mt)}return null}function St(ft,rt,mt,Dt,Gt){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return ft=ft.get(mt)||null,Z(rt,ft,""+Dt,Gt);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case d:return ft=ft.get(Dt.key===null?mt:Dt.key)||null,tt(rt,ft,Dt,Gt);case m:return ft=ft.get(Dt.key===null?mt:Dt.key)||null,lt(rt,ft,Dt,Gt);case C:var be=Dt._init;return Dt=be(Dt._payload),St(ft,rt,mt,Dt,Gt)}if(st(Dt)||Y(Dt))return ft=ft.get(mt)||null,bt(rt,ft,Dt,Gt,null);if(typeof Dt.then=="function")return St(ft,rt,mt,fc(Dt),Gt);if(Dt.$$typeof===w)return St(ft,rt,mt,Th(rt,Dt),Gt);sh(rt,Dt)}return null}function qt(ft,rt,mt,Dt){for(var Gt=null,be=null,jt=rt,Wt=rt=0,Di=null;jt!==null&&Wt<mt.length;Wt++){jt.index>Wt?(Di=jt,jt=null):Di=jt.sibling;var Ge=yt(ft,jt,mt[Wt],Dt);if(Ge===null){jt===null&&(jt=Di);break}e&&jt&&Ge.alternate===null&&i(ft,jt),rt=E(Ge,rt,Wt),be===null?Gt=Ge:be.sibling=Ge,be=Ge,jt=Di}if(Wt===mt.length)return o(ft,jt),Oe&&Vi(ft,Wt),Gt;if(jt===null){for(;Wt<mt.length;Wt++)jt=Ot(ft,mt[Wt],Dt),jt!==null&&(rt=E(jt,rt,Wt),be===null?Gt=jt:be.sibling=jt,be=jt);return Oe&&Vi(ft,Wt),Gt}for(jt=h(jt);Wt<mt.length;Wt++)Di=St(jt,ft,Wt,mt[Wt],Dt),Di!==null&&(e&&Di.alternate!==null&&jt.delete(Di.key===null?Wt:Di.key),rt=E(Di,rt,Wt),be===null?Gt=Di:be.sibling=Di,be=Di);return e&&jt.forEach(function(yu){return i(ft,yu)}),Oe&&Vi(ft,Wt),Gt}function re(ft,rt,mt,Dt){if(mt==null)throw Error(r(151));for(var Gt=null,be=null,jt=rt,Wt=rt=0,Di=null,Ge=mt.next();jt!==null&&!Ge.done;Wt++,Ge=mt.next()){jt.index>Wt?(Di=jt,jt=null):Di=jt.sibling;var yu=yt(ft,jt,Ge.value,Dt);if(yu===null){jt===null&&(jt=Di);break}e&&jt&&yu.alternate===null&&i(ft,jt),rt=E(yu,rt,Wt),be===null?Gt=yu:be.sibling=yu,be=yu,jt=Di}if(Ge.done)return o(ft,jt),Oe&&Vi(ft,Wt),Gt;if(jt===null){for(;!Ge.done;Wt++,Ge=mt.next())Ge=Ot(ft,Ge.value,Dt),Ge!==null&&(rt=E(Ge,rt,Wt),be===null?Gt=Ge:be.sibling=Ge,be=Ge);return Oe&&Vi(ft,Wt),Gt}for(jt=h(jt);!Ge.done;Wt++,Ge=mt.next())Ge=St(jt,ft,Wt,Ge.value,Dt),Ge!==null&&(e&&Ge.alternate!==null&&jt.delete(Ge.key===null?Wt:Ge.key),rt=E(Ge,rt,Wt),be===null?Gt=Ge:be.sibling=Ge,be=Ge);return e&&jt.forEach(function(c5){return i(ft,c5)}),Oe&&Vi(ft,Wt),Gt}function Kn(ft,rt,mt,Dt){if(typeof mt=="object"&&mt!==null&&mt.type===_&&mt.key===null&&(mt=mt.props.children),typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case d:t:{for(var Gt=mt.key;rt!==null;){if(rt.key===Gt){if(Gt=mt.type,Gt===_){if(rt.tag===7){o(ft,rt.sibling),Dt=p(rt,mt.props.children),Dt.return=ft,ft=Dt;break t}}else if(rt.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===C&&xg(Gt)===rt.type){o(ft,rt.sibling),Dt=p(rt,mt.props),dc(Dt,mt),Dt.return=ft,ft=Dt;break t}o(ft,rt);break}else i(ft,rt);rt=rt.sibling}mt.type===_?(Dt=Sl(mt.props.children,ft.mode,Dt,mt.key),Dt.return=ft,ft=Dt):(Dt=ou(mt.type,mt.key,mt.props,null,ft.mode,Dt),dc(Dt,mt),Dt.return=ft,ft=Dt)}return B(ft);case m:t:{for(Gt=mt.key;rt!==null;){if(rt.key===Gt)if(rt.tag===4&&rt.stateNode.containerInfo===mt.containerInfo&&rt.stateNode.implementation===mt.implementation){o(ft,rt.sibling),Dt=p(rt,mt.children||[]),Dt.return=ft,ft=Dt;break t}else{o(ft,rt);break}else i(ft,rt);rt=rt.sibling}Dt=Rc(mt,ft.mode,Dt),Dt.return=ft,ft=Dt}return B(ft);case C:return Gt=mt._init,mt=Gt(mt._payload),Kn(ft,rt,mt,Dt)}if(st(mt))return qt(ft,rt,mt,Dt);if(Y(mt)){if(Gt=Y(mt),typeof Gt!="function")throw Error(r(150));return mt=Gt.call(mt),re(ft,rt,mt,Dt)}if(typeof mt.then=="function")return Kn(ft,rt,fc(mt),Dt);if(mt.$$typeof===w)return Kn(ft,rt,Th(ft,mt),Dt);sh(ft,mt)}return typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint"?(mt=""+mt,rt!==null&&rt.tag===6?(o(ft,rt.sibling),Dt=p(rt,mt),Dt.return=ft,ft=Dt):(o(ft,rt),Dt=qn(mt,ft.mode,Dt),Dt.return=ft,ft=Dt),B(ft)):o(ft,rt)}return function(ft,rt,mt,Dt){try{hc=0;var Gt=Kn(ft,rt,mt,Dt);return nl=null,Gt}catch(jt){if(jt===tl)throw jt;var be=Un(29,jt,null,ft.mode);return be.lanes=Dt,be.return=ft,be}finally{}}}var hr=Vg(!0),fr=Vg(!1),Jl=ht(null),$l=ht(0);function il(e,i){e=wr,Ct($l,e),Ct(Jl,i),wr=e|i.baseLanes}function rh(){Ct($l,wr),Ct(Jl,Jl.current)}function gc(){wr=$l.current,At(Jl),At($l)}var ea=ht(null),Os=null;function dr(e){var i=e.alternate;Ct(Gn,Gn.current&1),Ct(ea,e),Os===null&&(i===null||Jl.current!==null||i.memoizedState!==null)&&(Os=e)}function _f(e){if(e.tag===22){if(Ct(Gn,Gn.current),Ct(ea,e),Os===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(Os=e)}}else gr()}function gr(){Ct(Gn,Gn.current),Ct(ea,ea.current)}function Ms(e){At(ea),Os===e&&(Os=null),At(Gn)}var Gn=ht(0);function Xo(e){for(var i=e;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var pe=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(o,h){e.push(h)}};this.abort=function(){i.aborted=!0,e.forEach(function(o){return o()})}},Q0=a.unstable_scheduleCallback,ba=a.unstable_NormalPriority,wn={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vf(){return{controller:new pe,data:new Map,refCount:0}}function al(e){e.refCount--,e.refCount===0&&Q0(ba,function(){e.controller.abort()})}var xs=null,sl=0,to=0,rl=null;function Z0(e,i){if(xs===null){var o=xs=[];sl=0,to=sp(),rl={status:"pending",value:void 0,then:function(h){o.push(h)}}}return sl++,i.then(Ef,Ef),i}function Ef(){if(--sl===0&&xs!==null){rl!==null&&(rl.status="fulfilled");var e=xs;xs=null,to=0,rl=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function ll(e,i){var o=[],h={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return e.then(function(){h.status="fulfilled",h.value=i;for(var p=0;p<o.length;p++)(0,o[p])(i)},function(p){for(h.status="rejected",h.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),h}var lh=D.S;D.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Z0(e,i),lh!==null&&lh(e,i)};var mr=ht(null);function mc(){var e=mr.current;return e!==null?e:Xe.pooledCache}function Qo(e,i){i===null?Ct(mr,mr.current):Ct(mr,i.pool)}function pr(){var e=mc();return e===null?null:{parent:wn._currentValue,pool:e}}var yr=0,he=null,qe=null,kn=null,Zt=!1,ol=!1,ul=!1,Zo=0,cl=0,Wo=null,W0=0;function Tn(){throw Error(r(321))}function eo(e,i){if(i===null)return!1;for(var o=0;o<i.length&&o<e.length;o++)if(!Wi(e[o],i[o]))return!1;return!0}function Sf(e,i,o,h,p,E){return yr=E,he=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,D.H=e===null||e.memoizedState===null?fl:vr,ul=!1,E=o(h,p),ul=!1,ol&&(E=Ig(i,o,h,p)),Ug(e),E}function Ug(e){D.H=Us;var i=qe!==null&&qe.next!==null;if(yr=0,kn=qe=he=null,Zt=!1,cl=0,Wo=null,i)throw Error(r(300));e===null||Jn||(e=e.dependencies,e!==null&&nu(e)&&(Jn=!0))}function Ig(e,i,o,h){he=e;var p=0;do{if(ol&&(Wo=null),cl=0,ol=!1,25<=p)throw Error(r(301));if(p+=1,kn=qe=null,e.updateQueue!=null){var E=e.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}D.H=ao,E=i(o,h)}while(ol);return E}function J0(){var e=D.H,i=e.useState()[0];return i=typeof i.then=="function"?yc(i):i,e=e.useState()[0],(qe!==null?qe.memoizedState:null)!==e&&(he.flags|=1024),i}function Tf(){var e=Zo!==0;return Zo=0,e}function pc(e,i,o){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~o}function oh(e){if(Zt){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Zt=!1}yr=0,kn=qe=he=null,ol=!1,cl=Zo=0,Wo=null}function ci(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?he.memoizedState=kn=e:kn=kn.next=e,kn}function Nn(){if(qe===null){var e=he.alternate;e=e!==null?e.memoizedState:null}else e=qe.next;var i=kn===null?he.memoizedState:kn.next;if(i!==null)kn=i,qe=e;else{if(e===null)throw he.alternate===null?Error(r(467)):Error(r(310));qe=e,e={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},kn===null?he.memoizedState=kn=e:kn=kn.next=e}return kn}var uh;uh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function yc(e){var i=cl;return cl+=1,Wo===null&&(Wo=[]),e=el(Wo,e,i),i=he,(kn===null?i.memoizedState:kn.next)===null&&(i=i.alternate,D.H=i===null||i.memoizedState===null?fl:vr),e}function Jo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return yc(e);if(e.$$typeof===w)return Si(e)}throw Error(r(438,String(e)))}function cs(e){var i=null,o=he.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var h=he.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(i={data:h.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=uh(),he.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(e),h=0;h<e;h++)o[h]=G;return i.index++,o}function dn(e,i){return typeof i=="function"?i(e):i}function hs(e){var i=Nn();return na(i,qe,e)}function na(e,i,o){var h=e.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var p=e.baseQueue,E=h.pending;if(E!==null){if(p!==null){var B=p.next;p.next=E.next,E.next=B}i.baseQueue=p=E,h.pending=null}if(E=e.baseState,p===null)e.memoizedState=E;else{i=p.next;var Z=B=null,tt=null,lt=i,bt=!1;do{var Ot=lt.lane&-536870913;if(Ot!==lt.lane?(Kt&Ot)===Ot:(yr&Ot)===Ot){var yt=lt.revertLane;if(yt===0)tt!==null&&(tt=tt.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),Ot===to&&(bt=!0);else if((yr&yt)===yt){lt=lt.next,yt===to&&(bt=!0);continue}else Ot={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},tt===null?(Z=tt=Ot,B=E):tt=tt.next=Ot,he.lanes|=yt,_s|=yt;Ot=lt.action,ul&&o(E,Ot),E=lt.hasEagerState?lt.eagerState:o(E,Ot)}else yt={lane:Ot,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},tt===null?(Z=tt=yt,B=E):tt=tt.next=yt,he.lanes|=Ot,_s|=Ot;lt=lt.next}while(lt!==null&&lt!==i);if(tt===null?B=E:tt.next=Z,!Wi(E,e.memoizedState)&&(Jn=!0,bt&&(o=rl,o!==null)))throw o;e.memoizedState=E,e.baseState=B,e.baseQueue=tt,h.lastRenderedState=E}return p===null&&(h.lanes=0),[e.memoizedState,h.dispatch]}function ch(e){var i=Nn(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=e;var h=o.dispatch,p=o.pending,E=i.memoizedState;if(p!==null){o.pending=null;var B=p=p.next;do E=e(E,B.action),B=B.next;while(B!==p);Wi(E,i.memoizedState)||(Jn=!0),i.memoizedState=E,i.baseQueue===null&&(i.baseState=E),o.lastRenderedState=E}return[E,h]}function Lg(e,i,o){var h=he,p=Nn(),E=Oe;if(E){if(o===void 0)throw Error(r(407));o=o()}else o=i();var B=!Wi((qe||p).memoizedState,o);if(B&&(p.memoizedState=o,Jn=!0),p=p.queue,Cf(zg.bind(null,h,p,e),[e]),p.getSnapshot!==i||B||kn!==null&&kn.memoizedState.tag&1){if(h.flags|=2048,Vs(9,hl.bind(null,h,p,o,i),{destroy:void 0},null),Xe===null)throw Error(r(349));E||yr&60||Ui(h,i,o)}return o}function Ui(e,i,o){e.flags|=16384,e={getSnapshot:i,value:o},i=he.updateQueue,i===null?(i=uh(),he.updateQueue=i,i.stores=[e]):(o=i.stores,o===null?i.stores=[e]:o.push(e))}function hl(e,i,o,h){i.value=o,i.getSnapshot=h,Pg(i)&&Bg(e)}function zg(e,i,o){return o(function(){Pg(i)&&Bg(e)})}function Pg(e){var i=e.getSnapshot;e=e.value;try{var o=i();return!Wi(e,o)}catch{return!0}}function Bg(e){var i=or(e,2);i!==null&&Fn(i,e,2)}function bf(e){var i=ci();if(typeof e=="function"){var o=e;if(e=o(),ul){Fi(!0);try{o()}finally{Fi(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:e},i}function Af(e,i,o,h){return e.baseState=o,na(e,qe,typeof h=="function"?h:dn)}function $0(e,i,o,h,p){if(mh(e))throw Error(r(485));if(e=i.action,e!==null){var E={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){E.listeners.push(B)}};D.T!==null?o(!0):E.isTransition=!1,h(E),o=i.pending,o===null?(E.next=i.pending=E,Rf(i,E)):(E.next=o.next,i.pending=o.next=E)}}function Rf(e,i){var o=i.action,h=i.payload,p=e.state;if(i.isTransition){var E=D.T,B={};D.T=B;try{var Z=o(p,h),tt=D.S;tt!==null&&tt(B,Z),Gg(e,i,Z)}catch(lt){_r(e,i,lt)}finally{D.T=E}}else try{E=o(p,h),Gg(e,i,E)}catch(lt){_r(e,i,lt)}}function Gg(e,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(h){no(e,i,h)},function(h){return _r(e,i,h)}):no(e,i,o)}function no(e,i,o){i.status="fulfilled",i.value=o,kg(i),e.state=o,i=e.pending,i!==null&&(o=i.next,o===i?e.pending=null:(o=o.next,i.next=o,Rf(e,o)))}function _r(e,i,o){var h=e.pending;if(e.pending=null,h!==null){h=h.next;do i.status="rejected",i.reason=o,kg(i),i=i.next;while(i!==h)}e.action=null}function kg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Hg(e,i){return i}function qg(e,i){if(Oe){var o=Xe.formState;if(o!==null){t:{var h=he;if(Oe){if(ai){e:{for(var p=ai,E=Ga;p.nodeType!==8;){if(!E){p=null;break e}if(p=Mr(p.nextSibling),p===null){p=null;break e}}E=p.data,p=E==="F!"||E==="F"?p:null}if(p){ai=Mr(p.nextSibling),h=p.data==="F!";break t}}Wl(h)}h=!1}h&&(i=o[0])}}return o=ci(),o.memoizedState=o.baseState=i,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hg,lastRenderedState:i},o.queue=h,o=Of.bind(null,he,h),h.dispatch=o,h=bf(!1),E=_c.bind(null,he,!1,h.queue),h=ci(),p={state:i,dispatch:null,action:e,pending:null},h.queue=p,o=$0.bind(null,he,p,E,o),p.dispatch=o,h.memoizedState=e,[i,o,!1]}function $o(e){var i=Nn();return jg(i,qe,e)}function jg(e,i,o){i=na(e,i,Hg)[0],e=hs(dn)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?yc(i):i;var h=Nn(),p=h.queue,E=p.dispatch;return o!==h.memoizedState&&(he.flags|=2048,Vs(9,tp.bind(null,p,o),{destroy:void 0},null)),[i,E,e]}function tp(e,i){e.action=i}function Fg(e){var i=Nn(),o=qe;if(o!==null)return jg(i,o,e);Nn(),i=i.memoizedState,o=Nn();var h=o.queue.dispatch;return o.memoizedState=e,[i,h,!1]}function Vs(e,i,o,h){return e={tag:e,create:i,inst:o,deps:h,next:null},i=he.updateQueue,i===null&&(i=uh(),he.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=e.next=e:(h=o.next,o.next=e,e.next=h,i.lastEffect=e),e}function Kg(){return Nn().memoizedState}function hh(e,i,o,h){var p=ci();he.flags|=e,p.memoizedState=Vs(1|i,o,{destroy:void 0},h===void 0?null:h)}function fh(e,i,o,h){var p=Nn();h=h===void 0?null:h;var E=p.memoizedState.inst;qe!==null&&h!==null&&eo(h,qe.memoizedState.deps)?p.memoizedState=Vs(i,o,E,h):(he.flags|=e,p.memoizedState=Vs(1|i,o,E,h))}function Yg(e,i){hh(8390656,8,e,i)}function Cf(e,i){fh(2048,8,e,i)}function Xg(e,i){return fh(4,2,e,i)}function Qg(e,i){return fh(4,4,e,i)}function Zg(e,i){if(typeof i=="function"){e=e();var o=i(e);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Wg(e,i,o){o=o!=null?o.concat([e]):null,fh(4,4,Zg.bind(null,i,e),o)}function Df(){}function Jg(e,i){var o=Nn();i=i===void 0?null:i;var h=o.memoizedState;return i!==null&&eo(i,h[1])?h[0]:(o.memoizedState=[e,i],e)}function $g(e,i){var o=Nn();i=i===void 0?null:i;var h=o.memoizedState;if(i!==null&&eo(i,h[1]))return h[0];if(h=e(),ul){Fi(!0);try{e()}finally{Fi(!1)}}return o.memoizedState=[h,i],h}function dh(e,i,o){return o===void 0||yr&1073741824?e.memoizedState=i:(e.memoizedState=o,e=wa(),he.lanes|=e,_s|=e,o)}function tm(e,i,o,h){return Wi(o,i)?o:Jl.current!==null?(e=dh(e,o,h),Wi(e,i)||(Jn=!0),e):yr&42?(e=wa(),he.lanes|=e,_s|=e,i):(Jn=!0,e.memoizedState=o)}function em(e,i,o,h,p){var E=gt.p;gt.p=E!==0&&8>E?E:8;var B=D.T,Z={};D.T=Z,_c(e,!1,i,o);try{var tt=p(),lt=D.S;if(lt!==null&&lt(Z,tt),tt!==null&&typeof tt=="object"&&typeof tt.then=="function"){var bt=ll(tt,h);io(e,i,bt,Bi(e))}else io(e,i,h,Bi(e))}catch(Ot){io(e,i,{then:function(){},status:"rejected",reason:Ot},Bi())}finally{gt.p=E,D.T=B}}function ep(){}function wf(e,i,o,h){if(e.tag!==5)throw Error(r(476));var p=nm(e).queue;em(e,p,i,Rt,o===null?ep:function(){return im(e),o(h)})}function nm(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:Rt,baseState:Rt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:Rt},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:o},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function im(e){var i=nm(e).next.queue;io(e,i,{},Bi())}function gh(){return Si(ed)}function Nf(){return Nn().memoizedState}function am(){return Nn().memoizedState}function sm(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var o=Bi();e=Ca(o);var h=Da(i,e,o);h!==null&&(Fn(h,i,o),ml(h,i,o)),i={cache:vf()},e.payload=i;return}i=i.return}}function rm(e,i,o){var h=Bi();o={lane:h,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},mh(e)?lm(i,o):(o=Ql(e,i,o,h),o!==null&&(Fn(o,e,h),om(o,i,h)))}function Of(e,i,o){var h=Bi();io(e,i,o,h)}function io(e,i,o,h){var p={lane:h,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(mh(e))lm(i,p);else{var E=e.alternate;if(e.lanes===0&&(E===null||E.lanes===0)&&(E=i.lastRenderedReducer,E!==null))try{var B=i.lastRenderedState,Z=E(B,o);if(p.hasEagerState=!0,p.eagerState=Z,Wi(Z,B))return ac(e,i,p,0),Xe===null&&ic(),!1}catch{}finally{}if(o=Ql(e,i,p,h),o!==null)return Fn(o,e,h),om(o,i,h),!0}return!1}function _c(e,i,o,h){if(h={lane:2,revertLane:sp(),action:h,hasEagerState:!1,eagerState:null,next:null},mh(e)){if(i)throw Error(r(479))}else i=Ql(e,o,h,2),i!==null&&Fn(i,e,2)}function mh(e){var i=e.alternate;return e===he||i!==null&&i===he}function lm(e,i){ol=Zt=!0;var o=e.pending;o===null?i.next=i:(i.next=o.next,o.next=i),e.pending=i}function om(e,i,o){if(o&4194176){var h=i.lanes;h&=e.pendingLanes,o|=h,i.lanes=o,Ss(e,o)}}var Us={readContext:Si,use:Jo,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useLayoutEffect:Tn,useInsertionEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useSyncExternalStore:Tn,useId:Tn};Us.useCacheRefresh=Tn,Us.useMemoCache=Tn,Us.useHostTransitionStatus=Tn,Us.useFormState=Tn,Us.useActionState=Tn,Us.useOptimistic=Tn;var fl={readContext:Si,use:Jo,useCallback:function(e,i){return ci().memoizedState=[e,i===void 0?null:i],e},useContext:Si,useEffect:Yg,useImperativeHandle:function(e,i,o){o=o!=null?o.concat([e]):null,hh(4194308,4,Zg.bind(null,i,e),o)},useLayoutEffect:function(e,i){return hh(4194308,4,e,i)},useInsertionEffect:function(e,i){hh(4,2,e,i)},useMemo:function(e,i){var o=ci();i=i===void 0?null:i;var h=e();if(ul){Fi(!0);try{e()}finally{Fi(!1)}}return o.memoizedState=[h,i],h},useReducer:function(e,i,o){var h=ci();if(o!==void 0){var p=o(i);if(ul){Fi(!0);try{o(i)}finally{Fi(!1)}}}else p=i;return h.memoizedState=h.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},h.queue=e,e=e.dispatch=rm.bind(null,he,e),[h.memoizedState,e]},useRef:function(e){var i=ci();return e={current:e},i.memoizedState=e},useState:function(e){e=bf(e);var i=e.queue,o=Of.bind(null,he,i);return i.dispatch=o,[e.memoizedState,o]},useDebugValue:Df,useDeferredValue:function(e,i){var o=ci();return dh(o,e,i)},useTransition:function(){var e=bf(!1);return e=em.bind(null,he,e.queue,!0,!1),ci().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,o){var h=he,p=ci();if(Oe){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),Xe===null)throw Error(r(349));Kt&60||Ui(h,i,o)}p.memoizedState=o;var E={value:o,getSnapshot:i};return p.queue=E,Yg(zg.bind(null,h,E,e),[e]),h.flags|=2048,Vs(9,hl.bind(null,h,E,o,i),{destroy:void 0},null),o},useId:function(){var e=ci(),i=Xe.identifierPrefix;if(Oe){var o=cr,h=ws;o=(h&~(1<<32-Zn(h)-1)).toString(32)+o,i=":"+i+"R"+o,o=Zo++,0<o&&(i+="H"+o.toString(32)),i+=":"}else o=W0++,i=":"+i+"r"+o.toString(32)+":";return e.memoizedState=i},useCacheRefresh:function(){return ci().memoizedState=sm.bind(null,he)}};fl.useMemoCache=cs,fl.useHostTransitionStatus=gh,fl.useFormState=qg,fl.useActionState=qg,fl.useOptimistic=function(e){var i=ci();i.memoizedState=i.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=_c.bind(null,he,!0,o),o.dispatch=i,[e,i]};var vr={readContext:Si,use:Jo,useCallback:Jg,useContext:Si,useEffect:Cf,useImperativeHandle:Wg,useInsertionEffect:Xg,useLayoutEffect:Qg,useMemo:$g,useReducer:hs,useRef:Kg,useState:function(){return hs(dn)},useDebugValue:Df,useDeferredValue:function(e,i){var o=Nn();return tm(o,qe.memoizedState,e,i)},useTransition:function(){var e=hs(dn)[0],i=Nn().memoizedState;return[typeof e=="boolean"?e:yc(e),i]},useSyncExternalStore:Lg,useId:Nf};vr.useCacheRefresh=am,vr.useMemoCache=cs,vr.useHostTransitionStatus=gh,vr.useFormState=$o,vr.useActionState=$o,vr.useOptimistic=function(e,i){var o=Nn();return Af(o,qe,e,i)};var ao={readContext:Si,use:Jo,useCallback:Jg,useContext:Si,useEffect:Cf,useImperativeHandle:Wg,useInsertionEffect:Xg,useLayoutEffect:Qg,useMemo:$g,useReducer:ch,useRef:Kg,useState:function(){return ch(dn)},useDebugValue:Df,useDeferredValue:function(e,i){var o=Nn();return qe===null?dh(o,e,i):tm(o,qe.memoizedState,e,i)},useTransition:function(){var e=ch(dn)[0],i=Nn().memoizedState;return[typeof e=="boolean"?e:yc(e),i]},useSyncExternalStore:Lg,useId:Nf};ao.useCacheRefresh=am,ao.useMemoCache=cs,ao.useHostTransitionStatus=gh,ao.useFormState=Fg,ao.useActionState=Fg,ao.useOptimistic=function(e,i){var o=Nn();return qe!==null?Af(o,qe,e,i):(o.baseState=e,[e,o.queue.dispatch])};function Mf(e,i,o,h){i=e.memoizedState,o=o(h,i),o=o==null?i:x({},i,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var xf={isMounted:function(e){return(e=e._reactInternals)?it(e)===e:!1},enqueueSetState:function(e,i,o){e=e._reactInternals;var h=Bi(),p=Ca(h);p.payload=i,o!=null&&(p.callback=o),i=Da(e,p,h),i!==null&&(Fn(i,e,h),ml(i,e,h))},enqueueReplaceState:function(e,i,o){e=e._reactInternals;var h=Bi(),p=Ca(h);p.tag=1,p.payload=i,o!=null&&(p.callback=o),i=Da(e,p,h),i!==null&&(Fn(i,e,h),ml(i,e,h))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var o=Bi(),h=Ca(o);h.tag=2,i!=null&&(h.callback=i),i=Da(e,h,o),i!==null&&(Fn(i,e,o),ml(i,e,o))}};function um(e,i,o,h,p,E,B){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,E,B):i.prototype&&i.prototype.isPureReactComponent?!us(o,h)||!us(p,E):!0}function cm(e,i,o,h){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,h),i.state!==e&&xf.enqueueReplaceState(i,i.state,null)}function so(e,i){var o=i;if("ref"in i){o={};for(var h in i)h!=="ref"&&(o[h]=i[h])}if(e=e.defaultProps){o===i&&(o=x({},o));for(var p in e)o[p]===void 0&&(o[p]=e[p])}return o}var ph=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function hm(e){ph(e)}function fm(e){console.error(e)}function dm(e){ph(e)}function yh(e,i){try{var o=e.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(h){setTimeout(function(){throw h})}}function gm(e,i,o){try{var h=e.onCaughtError;h(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Vf(e,i,o){return o=Ca(o),o.tag=3,o.payload={element:null},o.callback=function(){yh(e,i)},o}function Uf(e){return e=Ca(e),e.tag=3,e}function mm(e,i,o,h){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var E=h.value;e.payload=function(){return p(E)},e.callback=function(){gm(i,o,h)}}var B=o.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(e.callback=function(){gm(i,o,h),typeof p!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var Z=h.stack;this.componentDidCatch(h.value,{componentStack:Z!==null?Z:""})})}function np(e,i,o,h,p){if(o.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(i=o.alternate,i!==null&&Ec(i,o,p,!0),o=ea.current,o!==null){switch(o.tag){case 13:return Os===null?wc():o.alternate===null&&hn===0&&(hn=3),o.flags&=-257,o.flags|=65536,o.lanes=p,h===ah?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([h]):i.add(h),ie(e,h,p)),!1;case 22:return o.flags|=65536,h===ah?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([h])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([h]):o.add(h)),ie(e,h,p)),!1}throw Error(r(435,o.tag))}return ie(e,h,p),wc(),!1}if(Oe)return i=ea.current,i!==null?(!(i.flags&65536)&&(i.flags|=256),i.flags|=65536,i.lanes=p,h!==uc&&(e=Error(r(422),{cause:h}),Ns(ta(e,o)))):(h!==uc&&(i=Error(r(423),{cause:h}),Ns(ta(i,o))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,h=ta(h,o),p=Vf(e.stateNode,h,p),au(e,p),hn!==4&&(hn=2)),!1;var E=Error(r(520),{cause:h});if(E=ta(E,o),Dc===null?Dc=[E]:Dc.push(E),hn!==4&&(hn=2),i===null)return!0;h=ta(h,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,e=p&-p,o.lanes|=e,e=Vf(o.stateNode,h,e),au(o,e),!1;case 1:if(i=o.type,E=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(jn===null||!jn.has(E))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Uf(p),mm(p,e,o,h),au(o,p),!1}o=o.return}while(o!==null);return!1}var Aa=Error(r(461)),Jn=!1;function $n(e,i,o,h){i.child=e===null?fr(i,null,o,h):hr(i,e.child,o,h)}function If(e,i,o,h,p){o=o.render;var E=i.ref;if("ref"in h){var B={};for(var Z in h)Z!=="ref"&&(B[Z]=h[Z])}else B=h;return lo(i),h=Sf(e,i,o,B,E,p),Z=Tf(),e!==null&&!Jn?(pc(e,i,p),On(e,i,p)):(Oe&&Z&&oc(i),i.flags|=1,$n(e,i,h,p),i.child)}function Lf(e,i,o,h,p){if(e===null){var E=o.type;return typeof E=="function"&&!Cr(E)&&E.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=E,zf(e,i,E,h,p)):(e=ou(o.type,null,h,i,i.mode,p),e.ref=i.ref,e.return=i,i.child=e)}if(E=e.child,!jf(e,p)){var B=E.memoizedProps;if(o=o.compare,o=o!==null?o:us,o(B,h)&&e.ref===i.ref)return On(e,i,p)}return i.flags|=1,e=zi(E,h),e.ref=i.ref,e.return=i,i.child=e}function zf(e,i,o,h,p){if(e!==null){var E=e.memoizedProps;if(us(E,h)&&e.ref===i.ref)if(Jn=!1,i.pendingProps=h=E,jf(e,p))e.flags&131072&&(Jn=!0);else return i.lanes=e.lanes,On(e,i,p)}return Bf(e,i,o,h,p)}function pm(e,i,o){var h=i.pendingProps,p=h.children,E=(i.stateNode._pendingVisibility&2)!==0,B=e!==null?e.memoizedState:null;if(tu(e,i),h.mode==="hidden"||E){if(i.flags&128){if(h=B!==null?B.baseLanes|o:o,e!==null){for(p=i.child=e.child,E=0;p!==null;)E=E|p.lanes|p.childLanes,p=p.sibling;i.childLanes=E&~h}else i.childLanes=0,i.child=null;return Pf(e,i,h,o)}if(o&536870912)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Qo(i,B!==null?B.cachePool:null),B!==null?il(i,B):rh(),_f(i);else return i.lanes=i.childLanes=536870912,Pf(e,i,B!==null?B.baseLanes|o:o,o)}else B!==null?(Qo(i,B.cachePool),il(i,B),gr(),i.memoizedState=null):(e!==null&&Qo(i,null),rh(),gr());return $n(e,i,p,o),i.child}function Pf(e,i,o,h){var p=mc();return p=p===null?null:{parent:wn._currentValue,pool:p},i.memoizedState={baseLanes:o,cachePool:p},e!==null&&Qo(i,null),rh(),_f(i),e!==null&&Ec(e,i,h,!0),null}function tu(e,i){var o=i.ref;if(o===null)e!==null&&e.ref!==null&&(i.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(e===null||e.ref!==o)&&(i.flags|=2097664)}}function Bf(e,i,o,h,p){return lo(i),o=Sf(e,i,o,h,void 0,p),h=Tf(),e!==null&&!Jn?(pc(e,i,p),On(e,i,p)):(Oe&&h&&oc(i),i.flags|=1,$n(e,i,o,p),i.child)}function ym(e,i,o,h,p,E){return lo(i),i.updateQueue=null,o=Ig(i,h,o,p),Ug(e),h=Tf(),e!==null&&!Jn?(pc(e,i,E),On(e,i,E)):(Oe&&h&&oc(i),i.flags|=1,$n(e,i,o,E),i.child)}function _m(e,i,o,h,p){if(lo(i),i.stateNode===null){var E=Wr,B=o.contextType;typeof B=="object"&&B!==null&&(E=Si(B)),E=new o(h,E),i.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=xf,i.stateNode=E,E._reactInternals=i,E=i.stateNode,E.props=h,E.state=i.memoizedState,E.refs={},Ii(i),B=o.contextType,E.context=typeof B=="object"&&B!==null?Si(B):Wr,E.state=i.memoizedState,B=o.getDerivedStateFromProps,typeof B=="function"&&(Mf(i,o,B,h),E.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(B=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),B!==E.state&&xf.enqueueReplaceState(E,E.state,null),ds(i,h,E,p),Ti(),E.state=i.memoizedState),typeof E.componentDidMount=="function"&&(i.flags|=4194308),h=!0}else if(e===null){E=i.stateNode;var Z=i.memoizedProps,tt=so(o,Z);E.props=tt;var lt=E.context,bt=o.contextType;B=Wr,typeof bt=="object"&&bt!==null&&(B=Si(bt));var Ot=o.getDerivedStateFromProps;bt=typeof Ot=="function"||typeof E.getSnapshotBeforeUpdate=="function",Z=i.pendingProps!==Z,bt||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(Z||lt!==B)&&cm(i,E,h,B),Hn=!1;var yt=i.memoizedState;E.state=yt,ds(i,h,E,p),Ti(),lt=i.memoizedState,Z||yt!==lt||Hn?(typeof Ot=="function"&&(Mf(i,o,Ot,h),lt=i.memoizedState),(tt=Hn||um(i,o,tt,h,yt,lt,B))?(bt||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(i.flags|=4194308)):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=lt),E.props=h,E.state=lt,E.context=B,h=tt):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{E=i.stateNode,bh(e,i),B=i.memoizedProps,bt=so(o,B),E.props=bt,Ot=i.pendingProps,yt=E.context,lt=o.contextType,tt=Wr,typeof lt=="object"&&lt!==null&&(tt=Si(lt)),Z=o.getDerivedStateFromProps,(lt=typeof Z=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(B!==Ot||yt!==tt)&&cm(i,E,h,tt),Hn=!1,yt=i.memoizedState,E.state=yt,ds(i,h,E,p),Ti();var St=i.memoizedState;B!==Ot||yt!==St||Hn||e!==null&&e.dependencies!==null&&nu(e.dependencies)?(typeof Z=="function"&&(Mf(i,o,Z,h),St=i.memoizedState),(bt=Hn||um(i,o,bt,h,yt,St,tt)||e!==null&&e.dependencies!==null&&nu(e.dependencies))?(lt||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,St,tt),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,St,tt)),typeof E.componentDidUpdate=="function"&&(i.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof E.componentDidUpdate!="function"||B===e.memoizedProps&&yt===e.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||B===e.memoizedProps&&yt===e.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=St),E.props=h,E.state=St,E.context=tt,h=bt):(typeof E.componentDidUpdate!="function"||B===e.memoizedProps&&yt===e.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||B===e.memoizedProps&&yt===e.memoizedState||(i.flags|=1024),h=!1)}return E=h,tu(e,i),h=(i.flags&128)!==0,E||h?(E=i.stateNode,o=h&&typeof o.getDerivedStateFromError!="function"?null:E.render(),i.flags|=1,e!==null&&h?(i.child=hr(i,e.child,null,p),i.child=hr(i,null,o,p)):$n(e,i,o,p),i.memoizedState=E.state,e=i.child):e=On(e,i,p),e}function Gf(e,i,o,h){return Ko(),i.flags|=256,$n(e,i,o,h),i.child}var kf={dehydrated:null,treeContext:null,retryLane:0};function si(e){return{baseLanes:e,cachePool:pr()}}function _h(e,i,o){return e=e!==null?e.childLanes&~o:0,i&&(e|=Pi),e}function vm(e,i,o){var h=i.pendingProps,p=!1,E=(i.flags&128)!==0,B;if((B=E)||(B=e!==null&&e.memoizedState===null?!1:(Gn.current&2)!==0),B&&(p=!0,i.flags&=-129),B=(i.flags&32)!==0,i.flags&=-33,e===null){if(Oe){if(p?dr(i):gr(),Oe){var Z=ai,tt;if(tt=Z){t:{for(tt=Z,Z=Ga;tt.nodeType!==8;){if(!Z){Z=null;break t}if(tt=Mr(tt.nextSibling),tt===null){Z=null;break t}}Z=tt}Z!==null?(i.memoizedState={dehydrated:Z,treeContext:ur!==null?{id:ws,overflow:cr}:null,retryLane:536870912},tt=Un(18,null,null,0),tt.stateNode=Z,tt.return=i,i.child=tt,Ei=i,ai=null,tt=!0):tt=!1}tt||Wl(i)}if(Z=i.memoizedState,Z!==null&&(Z=Z.dehydrated,Z!==null))return Z.data==="$!"?i.lanes=16:i.lanes=536870912,null;Ms(i)}return Z=h.children,h=h.fallback,p?(gr(),p=i.mode,Z=qf({mode:"hidden",children:Z},p),h=Sl(h,p,o,null),Z.return=i,h.return=i,Z.sibling=h,i.child=Z,p=i.child,p.memoizedState=si(o),p.childLanes=_h(e,B,o),i.memoizedState=kf,h):(dr(i),Hf(i,Z))}if(tt=e.memoizedState,tt!==null&&(Z=tt.dehydrated,Z!==null)){if(E)i.flags&256?(dr(i),i.flags&=-257,i=vh(e,i,o)):i.memoizedState!==null?(gr(),i.child=e.child,i.flags|=128,i=null):(gr(),p=h.fallback,Z=i.mode,h=qf({mode:"visible",children:h.children},Z),p=Sl(p,Z,o,null),p.flags|=2,h.return=i,p.return=i,h.sibling=p,i.child=h,hr(i,e.child,null,o),h=i.child,h.memoizedState=si(o),h.childLanes=_h(e,B,o),i.memoizedState=kf,i=p);else if(dr(i),Z.data==="$!"){if(B=Z.nextSibling&&Z.nextSibling.dataset,B)var lt=B.dgst;B=lt,h=Error(r(419)),h.stack="",h.digest=B,Ns({value:h,source:null,stack:null}),i=vh(e,i,o)}else if(Jn||Ec(e,i,o,!1),B=(o&e.childLanes)!==0,Jn||B){if(B=Xe,B!==null){if(h=o&-o,h&42)h=1;else switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=64;break;case 268435456:h=134217728;break;default:h=0}if(h=h&(B.suspendedLanes|o)?0:h,h!==0&&h!==tt.retryLane)throw tt.retryLane=h,or(e,h),Fn(B,e,h),Aa}Z.data==="$?"||wc(),i=vh(e,i,o)}else Z.data==="$?"?(i.flags|=128,i.child=e.child,i=mo.bind(null,e),Z._reactRetry=i,i=null):(e=tt.treeContext,ai=Mr(Z.nextSibling),Ei=i,Oe=!0,Ba=null,Ga=!1,e!==null&&(rn[Ta++]=ws,rn[Ta++]=cr,rn[Ta++]=ur,ws=e.id,cr=e.overflow,ur=i),i=Hf(i,h.children),i.flags|=4096);return i}return p?(gr(),p=h.fallback,Z=i.mode,tt=e.child,lt=tt.sibling,h=zi(tt,{mode:"hidden",children:h.children}),h.subtreeFlags=tt.subtreeFlags&31457280,lt!==null?p=zi(lt,p):(p=Sl(p,Z,o,null),p.flags|=2),p.return=i,h.return=i,h.sibling=p,i.child=h,h=p,p=i.child,Z=e.child.memoizedState,Z===null?Z=si(o):(tt=Z.cachePool,tt!==null?(lt=wn._currentValue,tt=tt.parent!==lt?{parent:lt,pool:lt}:tt):tt=pr(),Z={baseLanes:Z.baseLanes|o,cachePool:tt}),p.memoizedState=Z,p.childLanes=_h(e,B,o),i.memoizedState=kf,h):(dr(i),o=e.child,e=o.sibling,o=zi(o,{mode:"visible",children:h.children}),o.return=i,o.sibling=null,e!==null&&(B=i.deletions,B===null?(i.deletions=[e],i.flags|=16):B.push(e)),i.child=o,i.memoizedState=null,o)}function Hf(e,i){return i=qf({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function qf(e,i){return Kf(e,i,0,null)}function vh(e,i,o){return hr(i,e.child,null,o),e=Hf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Eh(e,i,o){e.lanes|=i;var h=e.alternate;h!==null&&(h.lanes|=i),Ra(e.return,i,o)}function dl(e,i,o,h,p){var E=e.memoizedState;E===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:p}:(E.isBackwards=i,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=o,E.tailMode=p)}function ro(e,i,o){var h=i.pendingProps,p=h.revealOrder,E=h.tail;if($n(e,i,h.children,o),h=Gn.current,h&2)h=h&1|2,i.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Eh(e,o,i);else if(e.tag===19)Eh(e,o,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}h&=1}switch(Ct(Gn,h),p){case"forwards":for(o=i.child,p=null;o!==null;)e=o.alternate,e!==null&&Xo(e)===null&&(p=o),o=o.sibling;o=p,o===null?(p=i.child,i.child=null):(p=o.sibling,o.sibling=null),dl(i,!1,p,o,E);break;case"backwards":for(o=null,p=i.child,i.child=null;p!==null;){if(e=p.alternate,e!==null&&Xo(e)===null){i.child=p;break}e=p.sibling,p.sibling=o,o=p,p=e}dl(i,!0,o,null,E);break;case"together":dl(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function On(e,i,o){if(e!==null&&(i.dependencies=e.dependencies),_s|=i.lanes,!(o&i.childLanes))if(e!==null){if(Ec(e,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,o=zi(e,e.pendingProps),i.child=o,o.return=i;e.sibling!==null;)e=e.sibling,o=o.sibling=zi(e,e.pendingProps),o.return=i;o.sibling=null}return i.child}function jf(e,i){return e.lanes&i?!0:(e=e.dependencies,!!(e!==null&&nu(e)))}function ip(e,i,o){switch(i.tag){case 3:Yt(i,i.stateNode.containerInfo),gl(i,wn,e.memoizedState.cache),Ko();break;case 27:case 5:oe(i);break;case 4:Yt(i,i.stateNode.containerInfo);break;case 10:gl(i,i.type,i.memoizedProps.value);break;case 13:var h=i.memoizedState;if(h!==null)return h.dehydrated!==null?(dr(i),i.flags|=128,null):o&i.child.childLanes?vm(e,i,o):(dr(i),e=On(e,i,o),e!==null?e.sibling:null);dr(i);break;case 19:var p=(e.flags&128)!==0;if(h=(o&i.childLanes)!==0,h||(Ec(e,i,o,!1),h=(o&i.childLanes)!==0),p){if(h)return ro(e,i,o);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ct(Gn,Gn.current),h)break;return null;case 22:case 23:return i.lanes=0,pm(e,i,o);case 24:gl(i,wn,e.memoizedState.cache)}return On(e,i,o)}function vc(e,i,o){if(e!==null)if(e.memoizedProps!==i.pendingProps)Jn=!0;else{if(!jf(e,o)&&!(i.flags&128))return Jn=!1,ip(e,i,o);Jn=!!(e.flags&131072)}else Jn=!1,Oe&&i.flags&1048576&&pf(i,lc,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var h=i.elementType,p=h._init;if(h=p(h._payload),i.type=h,typeof h=="function")Cr(h)?(e=so(h,e),i.tag=1,i=_m(null,i,h,e,o)):(i.tag=0,i=Bf(null,i,h,e,o));else{if(h!=null){if(p=h.$$typeof,p===O){i.tag=11,i=If(null,i,h,e,o);break t}else if(p===K){i.tag=14,i=Lf(null,i,h,e,o);break t}}throw i=V(h)||h,Error(r(306,i,""))}}return i;case 0:return Bf(e,i,i.type,i.pendingProps,o);case 1:return h=i.type,p=so(h,i.pendingProps),_m(e,i,h,p,o);case 3:t:{if(Yt(i,i.stateNode.containerInfo),e===null)throw Error(r(387));var E=i.pendingProps;p=i.memoizedState,h=p.element,bh(e,i),ds(i,E,null,o);var B=i.memoizedState;if(E=B.cache,gl(i,wn,E),E!==p.cache&&Sh(i,[wn],o,!0),Ti(),E=B.element,p.isDehydrated)if(p={element:E,isDehydrated:!1,cache:B.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=Gf(e,i,E,o);break t}else if(E!==h){h=ta(Error(r(424)),i),Ns(h),i=Gf(e,i,E,o);break t}else for(ai=Mr(i.stateNode.containerInfo.firstChild),Ei=i,Oe=!0,Ba=null,Ga=!0,o=fr(i,null,E,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ko(),E===h){i=On(e,i,o);break t}$n(e,i,E,o)}i=i.child}return i;case 26:return tu(e,i),e===null?(o=qy(i.type,null,i.pendingProps,null))?i.memoizedState=o:Oe||(o=i.type,e=i.pendingProps,h=Cm($t.current).createElement(o),h[Rn]=i,h[ce]=e,Gi(h,o,e),sn(h),i.stateNode=h):i.memoizedState=qy(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return oe(i),e===null&&Oe&&(h=i.stateNode=Gy(i.type,i.pendingProps,$t.current),Ei=i,Ga=!0,ai=Mr(h.firstChild)),h=i.pendingProps.children,e!==null||Oe?$n(e,i,h,o):i.child=hr(i,null,h,o),tu(e,i),i.child;case 5:return e===null&&Oe&&((p=h=ai)&&(h=G3(h,i.type,i.pendingProps,Ga),h!==null?(i.stateNode=h,Ei=i,ai=Mr(h.firstChild),Ga=!1,p=!0):p=!1),p||Wl(i)),oe(i),p=i.type,E=i.pendingProps,B=e!==null?e.memoizedProps:null,h=E.children,gp(p,E)?h=null:B!==null&&gp(p,B)&&(i.flags|=32),i.memoizedState!==null&&(p=Sf(e,i,J0,null,null,o),ed._currentValue=p),tu(e,i),$n(e,i,h,o),i.child;case 6:return e===null&&Oe&&((e=o=ai)&&(o=k3(o,i.pendingProps,Ga),o!==null?(i.stateNode=o,Ei=i,ai=null,e=!0):e=!1),e||Wl(i)),null;case 13:return vm(e,i,o);case 4:return Yt(i,i.stateNode.containerInfo),h=i.pendingProps,e===null?i.child=hr(i,null,h,o):$n(e,i,h,o),i.child;case 11:return If(e,i,i.type,i.pendingProps,o);case 7:return $n(e,i,i.pendingProps,o),i.child;case 8:return $n(e,i,i.pendingProps.children,o),i.child;case 12:return $n(e,i,i.pendingProps.children,o),i.child;case 10:return h=i.pendingProps,gl(i,i.type,h.value),$n(e,i,h.children,o),i.child;case 9:return p=i.type._context,h=i.pendingProps.children,lo(i),p=Si(p),h=h(p),i.flags|=1,$n(e,i,h,o),i.child;case 14:return Lf(e,i,i.type,i.pendingProps,o);case 15:return zf(e,i,i.type,i.pendingProps,o);case 19:return ro(e,i,o);case 22:return pm(e,i,o);case 24:return lo(i),h=Si(wn),e===null?(p=mc(),p===null&&(p=Xe,E=vf(),p.pooledCache=E,E.refCount++,E!==null&&(p.pooledCacheLanes|=o),p=E),i.memoizedState={parent:h,cache:p},Ii(i),gl(i,wn,p)):(e.lanes&o&&(bh(e,i),ds(i,null,null,o),Ti()),p=e.memoizedState,E=i.memoizedState,p.parent!==h?(p={parent:h,cache:h},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),gl(i,wn,h)):(h=E.cache,gl(i,wn,h),h!==p.cache&&Sh(i,[wn],o,!0))),$n(e,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}var eu=ht(null),Is=null,fs=null;function gl(e,i,o){Ct(eu,i._currentValue),i._currentValue=o}function Er(e){e._currentValue=eu.current,At(eu)}function Ra(e,i,o){for(;e!==null;){var h=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),e===o)break;e=e.return}}function Sh(e,i,o,h){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var E=p.dependencies;if(E!==null){var B=p.child;E=E.firstContext;t:for(;E!==null;){var Z=E;E=p;for(var tt=0;tt<i.length;tt++)if(Z.context===i[tt]){E.lanes|=o,Z=E.alternate,Z!==null&&(Z.lanes|=o),Ra(E.return,o,e),h||(B=null);break t}E=Z.next}}else if(p.tag===18){if(B=p.return,B===null)throw Error(r(341));B.lanes|=o,E=B.alternate,E!==null&&(E.lanes|=o),Ra(B,o,e),B=null}else B=p.child;if(B!==null)B.return=p;else for(B=p;B!==null;){if(B===e){B=null;break}if(p=B.sibling,p!==null){p.return=B.return,B=p;break}B=B.return}p=B}}function Ec(e,i,o,h){e=null;for(var p=i,E=!1;p!==null;){if(!E){if(p.flags&524288)E=!0;else if(p.flags&262144)break}if(p.tag===10){var B=p.alternate;if(B===null)throw Error(r(387));if(B=B.memoizedProps,B!==null){var Z=p.type;Wi(p.pendingProps.value,B.value)||(e!==null?e.push(Z):e=[Z])}}else if(p===ue.current){if(B=p.alternate,B===null)throw Error(r(387));B.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(ed):e=[ed])}p=p.return}e!==null&&Sh(i,e,o,h),i.flags|=262144}function nu(e){for(e=e.firstContext;e!==null;){if(!Wi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function lo(e){Is=e,fs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Si(e){return iu(Is,e)}function Th(e,i){return Is===null&&lo(e),iu(e,i)}function iu(e,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},fs===null){if(e===null)throw Error(r(308));fs=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else fs=fs.next=i;return o}var Hn=!1;function Ii(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bh(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ca(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Da(e,i,o){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,ne&2){var p=h.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),h.pending=i,i=rc(e),sc(e,null,o),i}return ac(e,h,i,o),rc(e)}function ml(e,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194176)!==0)){var h=i.lanes;h&=e.pendingLanes,o|=h,i.lanes=o,Ss(e,o)}}function au(e,i){var o=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var p=null,E=null;if(o=o.firstBaseUpdate,o!==null){do{var B={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};E===null?p=E=B:E=E.next=B,o=o.next}while(o!==null);E===null?p=E=i:E=E.next=i}else p=E=i;o={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:E,shared:h.shared,callbacks:h.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=i:e.next=i,o.lastBaseUpdate=i}var ia=!1;function Ti(){if(ia){var e=rl;if(e!==null)throw e}}function ds(e,i,o,h){ia=!1;var p=e.updateQueue;Hn=!1;var E=p.firstBaseUpdate,B=p.lastBaseUpdate,Z=p.shared.pending;if(Z!==null){p.shared.pending=null;var tt=Z,lt=tt.next;tt.next=null,B===null?E=lt:B.next=lt,B=tt;var bt=e.alternate;bt!==null&&(bt=bt.updateQueue,Z=bt.lastBaseUpdate,Z!==B&&(Z===null?bt.firstBaseUpdate=lt:Z.next=lt,bt.lastBaseUpdate=tt))}if(E!==null){var Ot=p.baseState;B=0,bt=lt=tt=null,Z=E;do{var yt=Z.lane&-536870913,St=yt!==Z.lane;if(St?(Kt&yt)===yt:(h&yt)===yt){yt!==0&&yt===to&&(ia=!0),bt!==null&&(bt=bt.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});t:{var qt=e,re=Z;yt=i;var Kn=o;switch(re.tag){case 1:if(qt=re.payload,typeof qt=="function"){Ot=qt.call(Kn,Ot,yt);break t}Ot=qt;break t;case 3:qt.flags=qt.flags&-65537|128;case 0:if(qt=re.payload,yt=typeof qt=="function"?qt.call(Kn,Ot,yt):qt,yt==null)break t;Ot=x({},Ot,yt);break t;case 2:Hn=!0}}yt=Z.callback,yt!==null&&(e.flags|=64,St&&(e.flags|=8192),St=p.callbacks,St===null?p.callbacks=[yt]:St.push(yt))}else St={lane:yt,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},bt===null?(lt=bt=St,tt=Ot):bt=bt.next=St,B|=yt;if(Z=Z.next,Z===null){if(Z=p.shared.pending,Z===null)break;St=Z,Z=St.next,St.next=null,p.lastBaseUpdate=St,p.shared.pending=null}}while(!0);bt===null&&(tt=Ot),p.baseState=tt,p.firstBaseUpdate=lt,p.lastBaseUpdate=bt,E===null&&(p.shared.lanes=0),_s|=B,e.lanes=B,e.memoizedState=Ot}}function Ls(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function zs(e,i){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)Ls(o[e],i)}function Mn(e,i){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var p=h.next;o=p;do{if((o.tag&e)===e){h=void 0;var E=o.create,B=o.inst;h=E(),B.destroy=h}o=o.next}while(o!==p)}}catch(Z){xt(i,i.return,Z)}}function ka(e,i,o){try{var h=i.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var E=p.next;h=E;do{if((h.tag&e)===e){var B=h.inst,Z=B.destroy;if(Z!==void 0){B.destroy=void 0,p=i;var tt=o;try{Z()}catch(lt){xt(p,tt,lt)}}}h=h.next}while(h!==E)}}catch(lt){xt(i,i.return,lt)}}function Sr(e){var i=e.updateQueue;if(i!==null){var o=e.stateNode;try{zs(i,o)}catch(h){xt(e,e.return,h)}}}function Sc(e,i,o){o.props=so(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(h){xt(e,i,h)}}function xn(e,i){try{var o=e.ref;if(o!==null){var h=e.stateNode;switch(e.tag){case 26:case 27:case 5:var p=h;break;default:p=h}typeof o=="function"?e.refCleanup=o(p):o.current=p}}catch(E){xt(e,i,E)}}function Ye(e,i){var o=e.ref,h=e.refCleanup;if(o!==null)if(typeof h=="function")try{h()}catch(p){xt(e,i,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){xt(e,i,p)}else o.current=null}function Me(e){var i=e.type,o=e.memoizedProps,h=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&h.focus();break t;case"img":o.src?h.src=o.src:o.srcSet&&(h.srcset=o.srcSet)}}catch(p){xt(e,e.return,p)}}function Ha(e,i,o){try{var h=e.stateNode;I3(h,e.type,o,i),h[ce]=i}catch(p){xt(e,e.return,p)}}function gs(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function Tc(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||gs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function aa(e,i,o){var h=e.tag;if(h===5||h===6)e=e.stateNode,i?o.nodeType===8?o.parentNode.insertBefore(e,i):o.insertBefore(e,i):(o.nodeType===8?(i=o.parentNode,i.insertBefore(e,o)):(i=o,i.appendChild(e)),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Rm));else if(h!==4&&h!==27&&(e=e.child,e!==null))for(aa(e,i,o),e=e.sibling;e!==null;)aa(e,i,o),e=e.sibling}function Tr(e,i,o){var h=e.tag;if(h===5||h===6)e=e.stateNode,i?o.insertBefore(e,i):o.appendChild(e);else if(h!==4&&h!==27&&(e=e.child,e!==null))for(Tr(e,i,o),e=e.sibling;e!==null;)Tr(e,i,o),e=e.sibling}var ms=!1,un=!1,pl=!1,Ah=typeof WeakSet=="function"?WeakSet:Set,Vn=null,Rh=!1;function su(e,i){if(e=e.containerInfo,fp=xm,e=cf(e),nc(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else t:{o=(o=e.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var p=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{o.nodeType,E.nodeType}catch{o=null;break t}var B=0,Z=-1,tt=-1,lt=0,bt=0,Ot=e,yt=null;e:for(;;){for(var St;Ot!==o||p!==0&&Ot.nodeType!==3||(Z=B+p),Ot!==E||h!==0&&Ot.nodeType!==3||(tt=B+h),Ot.nodeType===3&&(B+=Ot.nodeValue.length),(St=Ot.firstChild)!==null;)yt=Ot,Ot=St;for(;;){if(Ot===e)break e;if(yt===o&&++lt===p&&(Z=B),yt===E&&++bt===h&&(tt=B),(St=Ot.nextSibling)!==null)break;Ot=yt,yt=Ot.parentNode}Ot=St}o=Z===-1||tt===-1?null:{start:Z,end:tt}}else o=null}o=o||{start:0,end:0}}else o=null;for(dp={focusedElem:e,selectionRange:o},xm=!1,Vn=i;Vn!==null;)if(i=Vn,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Vn=e;else for(;Vn!==null;){switch(i=Vn,E=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&E!==null){e=void 0,o=i,p=E.memoizedProps,E=E.memoizedState,h=o.stateNode;try{var qt=so(o.type,p,o.elementType===o.type);e=h.getSnapshotBeforeUpdate(qt,E),h.__reactInternalSnapshotBeforeUpdate=e}catch(re){xt(o,o.return,re)}}break;case 3:if(e&1024){if(e=i.stateNode.containerInfo,o=e.nodeType,o===9)yp(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yp(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(r(163))}if(e=i.sibling,e!==null){e.return=i.return,Vn=e;break}Vn=i.return}return qt=Rh,Rh=!1,qt}function ru(e,i,o){var h=o.flags;switch(o.tag){case 0:case 11:case 15:Ps(e,o),h&4&&Mn(5,o);break;case 1:if(Ps(e,o),h&4)if(e=o.stateNode,i===null)try{e.componentDidMount()}catch(Z){xt(o,o.return,Z)}else{var p=so(o.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(p,i,e.__reactInternalSnapshotBeforeUpdate)}catch(Z){xt(o,o.return,Z)}}h&64&&Sr(o),h&512&&xn(o,o.return);break;case 3:if(Ps(e,o),h&64&&(h=o.updateQueue,h!==null)){if(e=null,o.child!==null)switch(o.child.tag){case 27:case 5:e=o.child.stateNode;break;case 1:e=o.child.stateNode}try{zs(h,e)}catch(Z){xt(o,o.return,Z)}}break;case 26:Ps(e,o),h&512&&xn(o,o.return);break;case 27:case 5:Ps(e,o),i===null&&h&4&&Me(o),h&512&&xn(o,o.return);break;case 12:Ps(e,o);break;case 13:Ps(e,o),h&4&&Em(e,o);break;case 22:if(p=o.memoizedState!==null||ms,!p){i=i!==null&&i.memoizedState!==null||un;var E=ms,B=un;ms=p,(un=i)&&!B?ys(e,o,(o.subtreeFlags&8772)!==0):Ps(e,o),ms=E,un=B}h&512&&(o.memoizedProps.mode==="manual"?xn(o,o.return):Ye(o,o.return));break;default:Ps(e,o)}}function Ch(e){var i=e.alternate;i!==null&&(e.alternate=null,Ch(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Zs(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var cn=null,ri=!1;function bi(e,i,o){for(o=o.child;o!==null;)Dh(e,i,o),o=o.sibling}function Dh(e,i,o){if(Re&&typeof Re.onCommitFiberUnmount=="function")try{Re.onCommitFiberUnmount(an,o)}catch{}switch(o.tag){case 26:un||Ye(o,i),bi(e,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:un||Ye(o,i);var h=cn,p=ri;for(cn=o.stateNode,bi(e,i,o),o=o.stateNode,i=o.attributes;i.length;)o.removeAttributeNode(i[0]);Zs(o),cn=h,ri=p;break;case 5:un||Ye(o,i);case 6:p=cn;var E=ri;if(cn=null,bi(e,i,o),cn=p,ri=E,cn!==null)if(ri)try{e=cn,h=o.stateNode,e.nodeType===8?e.parentNode.removeChild(h):e.removeChild(h)}catch(B){xt(o,i,B)}else try{cn.removeChild(o.stateNode)}catch(B){xt(o,i,B)}break;case 18:cn!==null&&(ri?(i=cn,o=o.stateNode,i.nodeType===8?pp(i.parentNode,o):i.nodeType===1&&pp(i,o),sd(i)):pp(cn,o.stateNode));break;case 4:h=cn,p=ri,cn=o.stateNode.containerInfo,ri=!0,bi(e,i,o),cn=h,ri=p;break;case 0:case 11:case 14:case 15:un||ka(2,o,i),un||ka(4,o,i),bi(e,i,o);break;case 1:un||(Ye(o,i),h=o.stateNode,typeof h.componentWillUnmount=="function"&&Sc(o,i,h)),bi(e,i,o);break;case 21:bi(e,i,o);break;case 22:un||Ye(o,i),un=(h=un)||o.memoizedState!==null,bi(e,i,o),un=h;break;default:bi(e,i,o)}}function Em(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{sd(e)}catch(o){xt(i,i.return,o)}}function bc(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Ah),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Ah),i;default:throw Error(r(435,e.tag))}}function Ac(e,i){var o=bc(e);i.forEach(function(h){var p=pt.bind(null,e,h);o.has(h)||(o.add(h),h.then(p,p))})}function Li(e,i){var o=i.deletions;if(o!==null)for(var h=0;h<o.length;h++){var p=o[h],E=e,B=i,Z=B;t:for(;Z!==null;){switch(Z.tag){case 27:case 5:cn=Z.stateNode,ri=!1;break t;case 3:cn=Z.stateNode.containerInfo,ri=!0;break t;case 4:cn=Z.stateNode.containerInfo,ri=!0;break t}Z=Z.return}if(cn===null)throw Error(r(160));Dh(E,B,p),cn=null,ri=!1,E=p.alternate,E!==null&&(E.return=null),p.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)oo(i,e),i=i.sibling}var Ai=null;function oo(e,i){var o=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Li(i,e),Ri(e),h&4&&(ka(3,e,e.return),Mn(3,e),ka(5,e,e.return));break;case 1:Li(i,e),Ri(e),h&512&&(un||o===null||Ye(o,o.return)),h&64&&ms&&(e=e.updateQueue,e!==null&&(h=e.callbacks,h!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?h:o.concat(h))));break;case 26:var p=Ai;if(Li(i,e),Ri(e),h&512&&(un||o===null||Ye(o,o.return)),h&4){var E=o!==null?o.memoizedState:null;if(h=e.memoizedState,o===null)if(h===null)if(e.stateNode===null){t:{h=e.type,o=e.memoizedProps,p=p.ownerDocument||p;e:switch(h){case"title":E=p.getElementsByTagName("title")[0],(!E||E[Ts]||E[Rn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=p.createElement(h),p.head.insertBefore(E,p.querySelector("head > title"))),Gi(E,h,o),E[Rn]=e,sn(E),h=E;break t;case"link":var B=Ky("link","href",p).get(h+(o.href||""));if(B){for(var Z=0;Z<B.length;Z++)if(E=B[Z],E.getAttribute("href")===(o.href==null?null:o.href)&&E.getAttribute("rel")===(o.rel==null?null:o.rel)&&E.getAttribute("title")===(o.title==null?null:o.title)&&E.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){B.splice(Z,1);break e}}E=p.createElement(h),Gi(E,h,o),p.head.appendChild(E);break;case"meta":if(B=Ky("meta","content",p).get(h+(o.content||""))){for(Z=0;Z<B.length;Z++)if(E=B[Z],E.getAttribute("content")===(o.content==null?null:""+o.content)&&E.getAttribute("name")===(o.name==null?null:o.name)&&E.getAttribute("property")===(o.property==null?null:o.property)&&E.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&E.getAttribute("charset")===(o.charSet==null?null:o.charSet)){B.splice(Z,1);break e}}E=p.createElement(h),Gi(E,h,o),p.head.appendChild(E);break;default:throw Error(r(468,h))}E[Rn]=e,sn(E),h=E}e.stateNode=h}else Yy(p,e.type,e.stateNode);else e.stateNode=Fy(p,h,e.memoizedProps);else E!==h?(E===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):E.count--,h===null?Yy(p,e.type,e.stateNode):Fy(p,h,e.memoizedProps)):h===null&&e.stateNode!==null&&Ha(e,e.memoizedProps,o.memoizedProps)}break;case 27:if(h&4&&e.alternate===null){p=e.stateNode,E=e.memoizedProps;try{for(var tt=p.firstChild;tt;){var lt=tt.nextSibling,bt=tt.nodeName;tt[Ts]||bt==="HEAD"||bt==="BODY"||bt==="SCRIPT"||bt==="STYLE"||bt==="LINK"&&tt.rel.toLowerCase()==="stylesheet"||p.removeChild(tt),tt=lt}for(var Ot=e.type,yt=p.attributes;yt.length;)p.removeAttributeNode(yt[0]);Gi(p,Ot,E),p[Rn]=e,p[ce]=E}catch(qt){xt(e,e.return,qt)}}case 5:if(Li(i,e),Ri(e),h&512&&(un||o===null||Ye(o,o.return)),e.flags&32){p=e.stateNode;try{va(p,"")}catch(qt){xt(e,e.return,qt)}}h&4&&e.stateNode!=null&&(p=e.memoizedProps,Ha(e,p,o!==null?o.memoizedProps:p)),h&1024&&(pl=!0);break;case 6:if(Li(i,e),Ri(e),h&4){if(e.stateNode===null)throw Error(r(162));h=e.memoizedProps,o=e.stateNode;try{o.nodeValue=h}catch(qt){xt(e,e.return,qt)}}break;case 3:if(Nm=null,p=Ai,Ai=Dm(i.containerInfo),Li(i,e),Ai=p,Ri(e),h&4&&o!==null&&o.memoizedState.isDehydrated)try{sd(i.containerInfo)}catch(qt){xt(e,e.return,qt)}pl&&(pl=!1,yl(e));break;case 4:h=Ai,Ai=Dm(e.stateNode.containerInfo),Li(i,e),Ri(e),Ai=h;break;case 12:Li(i,e),Ri(e);break;case 13:Li(i,e),Ri(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(fe=nn()),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Ac(e,h)));break;case 22:if(h&512&&(un||o===null||Ye(o,o.return)),tt=e.memoizedState!==null,lt=o!==null&&o.memoizedState!==null,bt=ms,Ot=un,ms=bt||tt,un=Ot||lt,Li(i,e),un=Ot,ms=bt,Ri(e),i=e.stateNode,i._current=e,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,h&8192&&(i._visibility=tt?i._visibility&-2:i._visibility|1,tt&&(i=ms||un,o===null||lt||i||ps(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))t:for(o=null,i=e;;){if(i.tag===5||i.tag===26||i.tag===27){if(o===null){lt=o=i;try{if(p=lt.stateNode,tt)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{B=lt.stateNode,Z=lt.memoizedProps.style;var St=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;B.style.display=St==null||typeof St=="boolean"?"":(""+St).trim()}}catch(qt){xt(lt,lt.return,qt)}}}else if(i.tag===6){if(o===null){lt=i;try{lt.stateNode.nodeValue=tt?"":lt.memoizedProps}catch(qt){xt(lt,lt.return,qt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}h&4&&(h=e.updateQueue,h!==null&&(o=h.retryQueue,o!==null&&(h.retryQueue=null,Ac(e,o))));break;case 19:Li(i,e),Ri(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Ac(e,h)));break;case 21:break;default:Li(i,e),Ri(e)}}function Ri(e){var i=e.flags;if(i&2){try{if(e.tag!==27){t:{for(var o=e.return;o!==null;){if(gs(o)){var h=o;break t}o=o.return}throw Error(r(160))}switch(h.tag){case 27:var p=h.stateNode,E=Tc(e);Tr(e,E,p);break;case 5:var B=h.stateNode;h.flags&32&&(va(B,""),h.flags&=-33);var Z=Tc(e);Tr(e,Z,B);break;case 3:case 4:var tt=h.stateNode.containerInfo,lt=Tc(e);aa(e,lt,tt);break;default:throw Error(r(161))}}}catch(bt){xt(e,e.return,bt)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function yl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;yl(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Ps(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ru(e,i.alternate,i),i=i.sibling}function ps(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:ka(4,i,i.return),ps(i);break;case 1:Ye(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Sc(i,i.return,o),ps(i);break;case 26:case 27:case 5:Ye(i,i.return),ps(i);break;case 22:Ye(i,i.return),i.memoizedState===null&&ps(i);break;default:ps(i)}e=e.sibling}}function ys(e,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var h=i.alternate,p=e,E=i,B=E.flags;switch(E.tag){case 0:case 11:case 15:ys(p,E,o),Mn(4,E);break;case 1:if(ys(p,E,o),h=E,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(lt){xt(h,h.return,lt)}if(h=E,p=h.updateQueue,p!==null){var Z=h.stateNode;try{var tt=p.shared.hiddenCallbacks;if(tt!==null)for(p.shared.hiddenCallbacks=null,p=0;p<tt.length;p++)Ls(tt[p],Z)}catch(lt){xt(h,h.return,lt)}}o&&B&64&&Sr(E),xn(E,E.return);break;case 26:case 27:case 5:ys(p,E,o),o&&h===null&&B&4&&Me(E),xn(E,E.return);break;case 12:ys(p,E,o);break;case 13:ys(p,E,o),o&&B&4&&Em(p,E);break;case 22:E.memoizedState===null&&ys(p,E,o),xn(E,E.return);break;default:ys(p,E,o)}i=i.sibling}}function sa(e,i){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&al(o))}function qa(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&al(e))}function ln(e,i,o,h){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)br(e,i,o,h),i=i.sibling}function br(e,i,o,h){var p=i.flags;switch(i.tag){case 0:case 11:case 15:ln(e,i,o,h),p&2048&&Mn(9,i);break;case 3:ln(e,i,o,h),p&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&al(e)));break;case 12:if(p&2048){ln(e,i,o,h),e=i.stateNode;try{var E=i.memoizedProps,B=E.id,Z=E.onPostCommit;typeof Z=="function"&&Z(B,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(tt){xt(i,i.return,tt)}}else ln(e,i,o,h);break;case 23:break;case 22:E=i.stateNode,i.memoizedState!==null?E._visibility&4?ln(e,i,o,h):Ie(e,i):E._visibility&4?ln(e,i,o,h):(E._visibility|=4,ee(e,i,o,h,(i.subtreeFlags&10256)!==0)),p&2048&&sa(i.alternate,i);break;case 24:ln(e,i,o,h),p&2048&&qa(i.alternate,i);break;default:ln(e,i,o,h)}}function ee(e,i,o,h,p){for(p=p&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var E=e,B=i,Z=o,tt=h,lt=B.flags;switch(B.tag){case 0:case 11:case 15:ee(E,B,Z,tt,p),Mn(8,B);break;case 23:break;case 22:var bt=B.stateNode;B.memoizedState!==null?bt._visibility&4?ee(E,B,Z,tt,p):Ie(E,B):(bt._visibility|=4,ee(E,B,Z,tt,p)),p&&lt&2048&&sa(B.alternate,B);break;case 24:ee(E,B,Z,tt,p),p&&lt&2048&&qa(B.alternate,B);break;default:ee(E,B,Z,tt,p)}i=i.sibling}}function Ie(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=e,h=i,p=h.flags;switch(h.tag){case 22:Ie(o,h),p&2048&&sa(h.alternate,h);break;case 24:Ie(o,h),p&2048&&qa(h.alternate,h);break;default:Ie(o,h)}i=i.sibling}}var gn=8192;function Ar(e){if(e.subtreeFlags&gn)for(e=e.child;e!==null;)uo(e),e=e.sibling}function uo(e){switch(e.tag){case 26:Ar(e),e.flags&gn&&e.memoizedState!==null&&t5(Ai,e.memoizedState,e.memoizedProps);break;case 5:Ar(e);break;case 3:case 4:var i=Ai;Ai=Dm(e.stateNode.containerInfo),Ar(e),Ai=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=gn,gn=16777216,Ar(e),gn=i):Ar(e));break;default:Ar(e)}}function _l(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function vl(e){var i=e.deletions;if(e.flags&16){if(i!==null)for(var o=0;o<i.length;o++){var h=i[o];Vn=h,Sm(h,e)}_l(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)lu(e),e=e.sibling}function lu(e){switch(e.tag){case 0:case 11:case 15:vl(e),e.flags&2048&&ka(9,e,e.return);break;case 3:vl(e);break;case 12:vl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&4&&(e.return===null||e.return.tag!==13)?(i._visibility&=-5,Rr(e)):vl(e);break;default:vl(e)}}function Rr(e){var i=e.deletions;if(e.flags&16){if(i!==null)for(var o=0;o<i.length;o++){var h=i[o];Vn=h,Sm(h,e)}_l(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:ka(8,i,i.return),Rr(i);break;case 22:o=i.stateNode,o._visibility&4&&(o._visibility&=-5,Rr(i));break;default:Rr(i)}e=e.sibling}}function Sm(e,i){for(;Vn!==null;){var o=Vn;switch(o.tag){case 0:case 11:case 15:ka(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var h=o.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:al(o.memoizedState.cache)}if(h=o.child,h!==null)h.return=o,Vn=h;else t:for(o=e;Vn!==null;){h=Vn;var p=h.sibling,E=h.return;if(Ch(h),h===o){Vn=null;break t}if(p!==null){p.return=E,Vn=p;break t}Vn=E}}}function Ff(e,i,o,h){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(e,i,o,h){return new Ff(e,i,o,h)}function Cr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zi(e,i){var o=e.alternate;return o===null?(o=Un(e.tag,i,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=i,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&31457280,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,i=e.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function El(e,i){e.flags&=31457282;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,i=o.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function ou(e,i,o,h,p,E){var B=0;if(h=e,typeof e=="function")Cr(e)&&(B=1);else if(typeof e=="string")B=J3(e,o,It.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case _:return Sl(o.children,p,E,i);case v:B=8,p|=24;break;case b:return e=Un(12,o,i,p|2),e.elementType=b,e.lanes=E,e;case I:return e=Un(13,o,i,p),e.elementType=I,e.lanes=E,e;case P:return e=Un(19,o,i,p),e.elementType=P,e.lanes=E,e;case M:return Kf(o,p,E,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R:case w:B=10;break t;case U:B=9;break t;case O:B=11;break t;case K:B=14;break t;case C:B=16,h=null;break t}B=29,o=Error(r(130,e===null?"null":typeof e,"")),h=null}return i=Un(B,o,i,p),i.elementType=e,i.type=h,i.lanes=E,i}function Sl(e,i,o,h){return e=Un(7,e,h,i),e.lanes=o,e}function Kf(e,i,o,h){e=Un(22,e,h,i),e.elementType=M,e.lanes=o;var p={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var E=p._current;if(E===null)throw Error(r(456));if(!(p._pendingVisibility&2)){var B=or(E,2);B!==null&&(p._pendingVisibility|=2,Fn(B,E,2))}},attach:function(){var E=p._current;if(E===null)throw Error(r(456));if(p._pendingVisibility&2){var B=or(E,2);B!==null&&(p._pendingVisibility&=-3,Fn(B,E,2))}}};return e.stateNode=p,e}function qn(e,i,o){return e=Un(6,e,null,i),e.lanes=o,e}function Rc(e,i,o){return i=Un(4,e.children!==null?e.children:[],e.key,i),i.lanes=o,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function ja(e){e.flags|=4}function Tl(e,i){if(i.type!=="stylesheet"||i.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Xy(i)){if(i=ea.current,i!==null&&((Kt&4194176)===Kt?Os!==null:(Kt&62914560)!==Kt&&!(Kt&536870912)||i!==Os))throw Yo=ah,yf;e.flags|=8192}}function Fa(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?ts():536870912,e.lanes|=i,Gs|=i)}function Cc(e,i){if(!Oe)switch(e.tailMode){case"hidden":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function vn(e){var i=e.alternate!==null&&e.alternate.child===e.child,o=0,h=0;if(i)for(var p=e.child;p!==null;)o|=p.lanes|p.childLanes,h|=p.subtreeFlags&31457280,h|=p.flags&31457280,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)o|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=h,e.childLanes=o,i}function ap(e,i,o){var h=i.pendingProps;switch($r(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(i),null;case 1:return vn(i),null;case 3:return o=i.stateNode,h=null,e!==null&&(h=e.memoizedState.cache),i.memoizedState.cache!==h&&(i.flags|=2048),Er(wn),Fe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Fo(i)?ja(i):e===null||e.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Ba!==null&&(Qa(Ba),Ba=null))),vn(i),null;case 26:return o=i.memoizedState,e===null?(ja(i),o!==null?(vn(i),Tl(i,o)):(vn(i),i.flags&=-16777217)):o?o!==e.memoizedState?(ja(i),vn(i),Tl(i,o)):(vn(i),i.flags&=-16777217):(e.memoizedProps!==h&&ja(i),vn(i),i.flags&=-16777217),null;case 27:Ke(i),o=$t.current;var p=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==h&&ja(i);else{if(!h){if(i.stateNode===null)throw Error(r(166));return vn(i),null}e=It.current,Fo(i)?Ng(i):(e=Gy(p,h,o),i.stateNode=e,ja(i))}return vn(i),null;case 5:if(Ke(i),o=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==h&&ja(i);else{if(!h){if(i.stateNode===null)throw Error(r(166));return vn(i),null}if(e=It.current,Fo(i))Ng(i);else{switch(p=Cm($t.current),e){case 1:e=p.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:e=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":e=p.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":e=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof h.is=="string"?p.createElement("select",{is:h.is}):p.createElement("select"),h.multiple?e.multiple=!0:h.size&&(e.size=h.size);break;default:e=typeof h.is=="string"?p.createElement(o,{is:h.is}):p.createElement(o)}}e[Rn]=i,e[ce]=h;t:for(p=i.child;p!==null;){if(p.tag===5||p.tag===6)e.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===i)break t;for(;p.sibling===null;){if(p.return===null||p.return===i)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}i.stateNode=e;t:switch(Gi(e,o,h),o){case"button":case"input":case"select":case"textarea":e=!!h.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ja(i)}}return vn(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==h&&ja(i);else{if(typeof h!="string"&&i.stateNode===null)throw Error(r(166));if(e=$t.current,Fo(i)){if(e=i.stateNode,o=i.memoizedProps,h=null,p=Ei,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}e[Rn]=i,e=!!(e.nodeValue===o||h!==null&&h.suppressHydrationWarning===!0||Uy(e.nodeValue,o)),e||Wl(i)}else e=Cm(e).createTextNode(h),e[Rn]=i,i.stateNode=e}return vn(i),null;case 13:if(h=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Fo(i),h!==null&&h.dehydrated!==null){if(e===null){if(!p)throw Error(r(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[Rn]=i}else Ko(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;vn(i),p=!1}else Ba!==null&&(Qa(Ba),Ba=null),p=!0;if(!p)return i.flags&256?(Ms(i),i):(Ms(i),null)}if(Ms(i),i.flags&128)return i.lanes=o,i;if(o=h!==null,e=e!==null&&e.memoizedState!==null,o){h=i.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool);var E=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==p&&(h.flags|=2048)}return o!==e&&o&&(i.child.flags|=8192),Fa(i,i.updateQueue),vn(i),null;case 4:return Fe(),e===null&&up(i.stateNode.containerInfo),vn(i),null;case 10:return Er(i.type),vn(i),null;case 19:if(At(Gn),p=i.memoizedState,p===null)return vn(i),null;if(h=(i.flags&128)!==0,E=p.rendering,E===null)if(h)Cc(p,!1);else{if(hn!==0||e!==null&&e.flags&128)for(e=i.child;e!==null;){if(E=Xo(e),E!==null){for(i.flags|=128,Cc(p,!1),e=E.updateQueue,i.updateQueue=e,Fa(i,e),i.subtreeFlags=0,e=o,o=i.child;o!==null;)El(o,e),o=o.sibling;return Ct(Gn,Gn.current&1|2),i.child}e=e.sibling}p.tail!==null&&nn()>_e&&(i.flags|=128,h=!0,Cc(p,!1),i.lanes=4194304)}else{if(!h)if(e=Xo(E),e!==null){if(i.flags|=128,h=!0,e=e.updateQueue,i.updateQueue=e,Fa(i,e),Cc(p,!0),p.tail===null&&p.tailMode==="hidden"&&!E.alternate&&!Oe)return vn(i),null}else 2*nn()-p.renderingStartTime>_e&&o!==536870912&&(i.flags|=128,h=!0,Cc(p,!1),i.lanes=4194304);p.isBackwards?(E.sibling=i.child,i.child=E):(e=p.last,e!==null?e.sibling=E:i.child=E,p.last=E)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=nn(),i.sibling=null,e=Gn.current,Ct(Gn,h?e&1|2:e&1),i):(vn(i),null);case 22:case 23:return Ms(i),gc(),h=i.memoizedState!==null,e!==null?e.memoizedState!==null!==h&&(i.flags|=8192):h&&(i.flags|=8192),h?o&536870912&&!(i.flags&128)&&(vn(i),i.subtreeFlags&6&&(i.flags|=8192)):vn(i),o=i.updateQueue,o!==null&&Fa(i,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),h=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),h!==o&&(i.flags|=2048),e!==null&&At(mr),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Er(wn),vn(i),null;case 25:return null}throw Error(r(156,i.tag))}function bn(e,i){switch($r(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Er(wn),Fe(),e=i.flags,e&65536&&!(e&128)?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Ke(i),null;case 13:if(Ms(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Ko()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return At(Gn),null;case 4:return Fe(),null;case 10:return Er(i.type),null;case 22:case 23:return Ms(i),gc(),e!==null&&At(mr),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Er(wn),null;case 25:return null;default:return null}}function Yf(e,i){switch($r(i),i.tag){case 3:Er(wn),Fe();break;case 26:case 27:case 5:Ke(i);break;case 4:Fe();break;case 13:Ms(i);break;case 19:At(Gn);break;case 10:Er(i.type);break;case 22:case 23:Ms(i),gc(),e!==null&&At(mr);break;case 24:Er(wn)}}var co={getCacheForType:function(e){var i=Si(wn),o=i.data.get(e);return o===void 0&&(o=e(),i.data.set(e,o)),o}},Dr=typeof WeakMap=="function"?WeakMap:Map,ne=0,Xe=null,ge=null,Kt=0,$e=0,Le=null,In=!1,Ci=!1,bl=!1,wr=0,hn=0,_s=0,Bs=0,uu=0,Pi=0,Gs=0,Dc=null,ye=null,Qe=!1,fe=0,_e=1/0,je=null,jn=null,Ka=!1,Ya=null,ho=0,vs=0,mn=null,Xa=0,Nr=null;function Bi(){if(ne&2&&Kt!==0)return Kt&-Kt;if(D.T!==null){var e=to;return e!==0?e:sp()}return Hu()}function wa(){Pi===0&&(Pi=!(Kt&536870912)||Oe?Xs():536870912);var e=ea.current;return e!==null&&(e.flags|=32),Pi}function Fn(e,i,o){(e===Xe&&$e===2||e.cancelPendingCommit!==null)&&(Or(e,0),Na(e,Kt,Pi,!1)),En(e,o),(!(ne&2)||e!==Xe)&&(e===Xe&&(!(ne&2)&&(Bs|=o),hn===4&&Na(e,Kt,Pi,!1)),tn(e))}function cu(e,i,o){if(ne&6)throw Error(r(327));var h=!o&&(i&60)===0&&(i&e.expiredLanes)===0||Ks(e,i),p=h?s(e,i):go(e,i,!0),E=h;do{if(p===0){Ci&&!h&&Na(e,i,0,!1);break}else if(p===6)Na(e,i,0,!In);else{if(o=e.current.alternate,E&&!Xf(o)){p=go(e,i,!1),E=!1;continue}if(p===2){if(E=i,e.errorRecoveryDisabledLanes&E)var B=0;else B=e.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){i=B;t:{var Z=e;p=Dc;var tt=Z.current.memoizedState.isDehydrated;if(tt&&(Or(Z,B).flags|=256),B=go(Z,B,!1),B!==2){if(bl&&!tt){Z.errorRecoveryDisabledLanes|=E,Bs|=E,p=4;break t}E=ye,ye=p,E!==null&&Qa(E)}p=B}if(E=!1,p!==2)continue}}if(p===1){Or(e,0),Na(e,i,0,!0);break}t:{switch(h=e,p){case 0:case 1:throw Error(r(345));case 4:if((i&4194176)===i){Na(h,i,Pi,!In);break t}break;case 2:ye=null;break;case 3:case 5:break;default:throw Error(r(329))}if(h.finishedWork=o,h.finishedLanes=i,(i&62914560)===i&&(E=fe+300-nn(),10<E)){if(Na(h,i,Pi,!In),pa(h,0)!==0)break t;h.timeoutHandle=zy(wh.bind(null,h,o,ye,je,Qe,i,Pi,Bs,Gs,In,2,-0,0),E);break t}wh(h,o,ye,je,Qe,i,Pi,Bs,Gs,In,0,-0,0)}}break}while(!0);tn(e)}function Qa(e){ye===null?ye=e:ye.push.apply(ye,e)}function wh(e,i,o,h,p,E,B,Z,tt,lt,bt,Ot,yt){var St=i.subtreeFlags;if((St&8192||(St&16785408)===16785408)&&(td={stylesheets:null,count:0,unsuspend:$3},uo(i),i=e5(),i!==null)){e.cancelPendingCommit=i(nt.bind(null,e,o,h,p,B,Z,tt,1,Ot,yt)),Na(e,E,B,!lt);return}nt(e,o,h,p,B,Z,tt,bt,Ot,yt)}function Xf(e){for(var i=e;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var h=0;h<o.length;h++){var p=o[h],E=p.getSnapshot;p=p.value;try{if(!Wi(E(),p))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Na(e,i,o,h){i&=~uu,i&=~Bs,e.suspendedLanes|=i,e.pingedLanes&=~i,h&&(e.warmLanes|=i),h=e.expirationTimes;for(var p=i;0<p;){var E=31-Zn(p),B=1<<E;h[E]=-1,p&=~B}o!==0&&Es(e,o,i)}function fo(){return ne&6?!0:(Te(0),!1)}function ks(){if(ge!==null){if($e===0)var e=ge.return;else e=ge,fs=Is=null,oh(e),nl=null,hc=0,e=ge;for(;e!==null;)Yf(e.alternate,e),e=e.return;ge=null}}function Or(e,i){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,z3(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),ks(),Xe=e,ge=o=zi(e.current,null),Kt=i,$e=0,Le=null,In=!1,Ci=Ks(e,i),bl=!1,Gs=Pi=uu=Bs=_s=hn=0,ye=Dc=null,Qe=!1,i&8&&(i|=i&32);var h=e.entangledLanes;if(h!==0)for(e=e.entanglements,h&=i;0<h;){var p=31-Zn(h),E=1<<p;i|=e[p],h&=~E}return wr=i,ic(),o}function Al(e,i){he=null,D.H=Us,i===tl?(i=Be(),$e=3):i===yf?(i=Be(),$e=4):$e=i===Aa?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Le=i,ge===null&&(hn=1,yh(e,ta(i,e.current)))}function hu(){var e=D.H;return D.H=Us,e===null?Us:e}function Nh(){var e=D.A;return D.A=co,e}function wc(){hn=4,In||(Kt&4194176)!==Kt&&ea.current!==null||(Ci=!0),!(_s&134217727)&&!(Bs&134217727)||Xe===null||Na(Xe,Kt,Pi,!1)}function go(e,i,o){var h=ne;ne|=2;var p=hu(),E=Nh();(Xe!==e||Kt!==i)&&(je=null,Or(e,i)),i=!1;var B=hn;t:do try{if($e!==0&&ge!==null){var Z=ge,tt=Le;switch($e){case 8:ks(),B=6;break t;case 3:case 2:case 6:ea.current===null&&(i=!0);var lt=$e;if($e=0,Le=null,S(e,Z,tt,lt),o&&Ci){B=0;break t}break;default:lt=$e,$e=0,Le=null,S(e,Z,tt,lt)}}Qf(),B=hn;break}catch(bt){Al(e,bt)}while(!0);return i&&e.shellSuspendCounter++,fs=Is=null,ne=h,D.H=p,D.A=E,ge===null&&(Xe=null,Kt=0,ic()),B}function Qf(){for(;ge!==null;)f(ge)}function s(e,i){var o=ne;ne|=2;var h=hu(),p=Nh();Xe!==e||Kt!==i?(je=null,_e=nn()+500,Or(e,i)):Ci=Ks(e,i);t:do try{if($e!==0&&ge!==null){i=ge;var E=Le;e:switch($e){case 1:$e=0,Le=null,S(e,i,E,1);break;case 2:if(Mg(E)){$e=0,Le=null,y(i);break}i=function(){$e===2&&Xe===e&&($e=7),tn(e)},E.then(i,i);break t;case 3:$e=7;break t;case 4:$e=5;break t;case 7:Mg(E)?($e=0,Le=null,y(i)):($e=0,Le=null,S(e,i,E,7));break;case 5:var B=null;switch(ge.tag){case 26:B=ge.memoizedState;case 5:case 27:var Z=ge;if(!B||Xy(B)){$e=0,Le=null;var tt=Z.sibling;if(tt!==null)ge=tt;else{var lt=Z.return;lt!==null?(ge=lt,N(lt)):ge=null}break e}}$e=0,Le=null,S(e,i,E,5);break;case 6:$e=0,Le=null,S(e,i,E,6);break;case 8:ks(),hn=6;break t;default:throw Error(r(462))}}l();break}catch(bt){Al(e,bt)}while(!0);return fs=Is=null,D.H=h,D.A=p,ne=o,ge!==null?0:(Xe=null,Kt=0,ic(),hn)}function l(){for(;ge!==null&&!en();)f(ge)}function f(e){var i=vc(e.alternate,e,wr);e.memoizedProps=e.pendingProps,i===null?N(e):ge=i}function y(e){var i=e,o=i.alternate;switch(i.tag){case 15:case 0:i=ym(o,i,i.pendingProps,i.type,void 0,Kt);break;case 11:i=ym(o,i,i.pendingProps,i.type.render,i.ref,Kt);break;case 5:oh(i);default:Yf(o,i),i=ge=El(i,wr),i=vc(o,i,wr)}e.memoizedProps=e.pendingProps,i===null?N(e):ge=i}function S(e,i,o,h){fs=Is=null,oh(i),nl=null,hc=0;var p=i.return;try{if(np(e,p,i,o,Kt)){hn=1,yh(e,ta(o,e.current)),ge=null;return}}catch(E){if(p!==null)throw ge=p,E;hn=1,yh(e,ta(o,e.current)),ge=null;return}i.flags&32768?(Oe||h===1?e=!0:Ci||Kt&536870912?e=!1:(In=e=!0,(h===2||h===3||h===6)&&(h=ea.current,h!==null&&h.tag===13&&(h.flags|=16384))),W(i,e)):N(i)}function N(e){var i=e;do{if(i.flags&32768){W(i,In);return}e=i.return;var o=ap(i.alternate,i,wr);if(o!==null){ge=o;return}if(i=i.sibling,i!==null){ge=i;return}ge=i=e}while(i!==null);hn===0&&(hn=5)}function W(e,i){do{var o=bn(e.alternate,e);if(o!==null){o.flags&=32767,ge=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(e=e.sibling,e!==null)){ge=e;return}ge=e=o}while(e!==null);hn=6,ge=null}function nt(e,i,o,h,p,E,B,Z,tt,lt){var bt=D.T,Ot=gt.p;try{gt.p=2,D.T=null,dt(e,i,o,h,Ot,p,E,B,Z,tt,lt)}finally{D.T=bt,gt.p=Ot}}function dt(e,i,o,h,p,E,B,Z){do Ut();while(Ya!==null);if(ne&6)throw Error(r(327));var tt=e.finishedWork;if(h=e.finishedLanes,tt===null)return null;if(e.finishedWork=null,e.finishedLanes=0,tt===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var lt=tt.lanes|tt.childLanes;if(lt|=lr,ku(e,h,lt,E,B,Z),e===Xe&&(ge=Xe=null,Kt=0),!(tt.subtreeFlags&10256)&&!(tt.flags&10256)||Ka||(Ka=!0,vs=lt,mn=o,ct(Qn,function(){return Ut(),null})),o=(tt.flags&15990)!==0,tt.subtreeFlags&15990||o?(o=D.T,D.T=null,E=gt.p,gt.p=2,B=ne,ne|=4,su(e,tt),oo(tt,e),hf(dp,e.containerInfo),xm=!!fp,dp=fp=null,e.current=tt,ru(e,tt.alternate,tt),Xn(),ne=B,gt.p=E,D.T=o):e.current=tt,Ka?(Ka=!1,Ya=e,ho=h):Tt(e,lt),lt=e.pendingLanes,lt===0&&(jn=null),ga(tt.stateNode),tn(e),i!==null)for(p=e.onRecoverableError,tt=0;tt<i.length;tt++)lt=i[tt],p(lt.value,{componentStack:lt.stack});return ho&3&&Ut(),lt=e.pendingLanes,h&4194218&&lt&42?e===Nr?Xa++:(Xa=0,Nr=e):Xa=0,Te(0),null}function Tt(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,al(i)))}function Ut(){if(Ya!==null){var e=Ya,i=vs;vs=0;var o=es(ho),h=D.T,p=gt.p;try{if(gt.p=32>o?32:o,D.T=null,Ya===null)var E=!1;else{o=mn,mn=null;var B=Ya,Z=ho;if(Ya=null,ho=0,ne&6)throw Error(r(331));var tt=ne;if(ne|=4,lu(B.current),br(B,B.current,Z,o),ne=tt,Te(0,!1),Re&&typeof Re.onPostCommitFiberRoot=="function")try{Re.onPostCommitFiberRoot(an,B)}catch{}E=!0}return E}finally{gt.p=p,D.T=h,Tt(e,i)}}return!1}function zt(e,i,o){i=ta(o,i),i=Vf(e.stateNode,i,2),e=Da(e,i,2),e!==null&&(En(e,2),tn(e))}function xt(e,i,o){if(e.tag===3)zt(e,e,o);else for(;i!==null;){if(i.tag===3){zt(i,e,o);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(jn===null||!jn.has(h))){e=ta(o,e),o=Uf(2),h=Da(i,o,2),h!==null&&(mm(o,h,i,e),En(h,2),tn(h));break}}i=i.return}}function ie(e,i,o){var h=e.pingCache;if(h===null){h=e.pingCache=new Dr;var p=new Set;h.set(i,p)}else p=h.get(i),p===void 0&&(p=new Set,h.set(i,p));p.has(o)||(bl=!0,p.add(o),e=Za.bind(null,e,i,o),i.then(e,e))}function Za(e,i,o){var h=e.pingCache;h!==null&&h.delete(i),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,Xe===e&&(Kt&o)===o&&(hn===4||hn===3&&(Kt&62914560)===Kt&&300>nn()-fe?!(ne&2)&&Or(e,0):uu|=o,Gs===Kt&&(Gs=0)),tn(e)}function fu(e,i){i===0&&(i=ts()),e=or(e,i),e!==null&&(En(e,i),tn(e))}function mo(e){var i=e.memoizedState,o=0;i!==null&&(o=i.retryLane),fu(e,o)}function pt(e,i){var o=0;switch(e.tag){case 13:var h=e.stateNode,p=e.memoizedState;p!==null&&(o=p.retryLane);break;case 19:h=e.stateNode;break;case 22:h=e.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(i),fu(e,o)}function ct(e,i){return ke(e,i)}var _t=null,Mt=null,Ht=!1,Ze=!1,Qt=!1,me=0;function tn(e){e!==Mt&&e.next===null&&(Mt===null?_t=Mt=e:Mt=Mt.next=e),Ze=!0,Ht||(Ht=!0,w3(Rl))}function Te(e,i){if(!Qt&&Ze){Qt=!0;do for(var o=!1,h=_t;h!==null;){if(e!==0){var p=h.pendingLanes;if(p===0)var E=0;else{var B=h.suspendedLanes,Z=h.pingedLanes;E=(1<<31-Zn(42|e)+1)-1,E&=p&~(B&~Z),E=E&201326677?E&201326677|1:E?E|2:0}E!==0&&(o=!0,Dy(h,E))}else E=Kt,E=pa(h,h===Xe?E:0),!(E&3)||Ks(h,E)||(o=!0,Dy(h,E));h=h.next}while(o);Qt=!1}}function Rl(){Ze=Ht=!1;var e=0;me!==0&&(L3()&&(e=me),me=0);for(var i=nn(),o=null,h=_t;h!==null;){var p=h.next,E=Tm(h,i);E===0?(h.next=null,o===null?_t=p:o.next=p,p===null&&(Mt=o)):(o=h,(e!==0||E&3)&&(Ze=!0)),h=p}Te(e)}function Tm(e,i){for(var o=e.suspendedLanes,h=e.pingedLanes,p=e.expirationTimes,E=e.pendingLanes&-62914561;0<E;){var B=31-Zn(E),Z=1<<B,tt=p[B];tt===-1?(!(Z&o)||Z&h)&&(p[B]=Ys(Z,i)):tt<=i&&(e.expiredLanes|=Z),E&=~Z}if(i=Xe,o=Kt,o=pa(e,e===i?o:0),h=e.callbackNode,o===0||e===i&&$e===2||e.cancelPendingCommit!==null)return h!==null&&h!==null&&oi(h),e.callbackNode=null,e.callbackPriority=0;if(!(o&3)||Ks(e,o)){if(i=o&-o,i===e.callbackPriority)return i;switch(h!==null&&oi(h),es(o)){case 2:case 8:o=He;break;case 32:o=Qn;break;case 268435456:o=ji;break;default:o=Qn}return h=Cy.bind(null,e),o=ke(o,h),e.callbackPriority=i,e.callbackNode=o,i}return h!==null&&h!==null&&oi(h),e.callbackPriority=2,e.callbackNode=null,2}function Cy(e,i){var o=e.callbackNode;if(Ut()&&e.callbackNode!==o)return null;var h=Kt;return h=pa(e,e===Xe?h:0),h===0?null:(cu(e,h,i),Tm(e,nn()),e.callbackNode!=null&&e.callbackNode===o?Cy.bind(null,e):null)}function Dy(e,i){if(Ut())return null;cu(e,i,!0)}function w3(e){P3(function(){ne&6?ke(De,e):e()})}function sp(){return me===0&&(me=Xs()),me}function wy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:as(""+e)}function Ny(e,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,e.id&&o.setAttribute("form",e.id),i.parentNode.insertBefore(o,i),e=new FormData(e),o.parentNode.removeChild(o),e}function N3(e,i,o,h,p){if(i==="submit"&&o&&o.stateNode===p){var E=wy((p[ce]||null).action),B=h.submitter;B&&(i=(i=B[ce]||null)?wy(i.formAction):B.getAttribute("formAction"),i!==null&&(E=i,B=null));var Z=new Fr("action","action",null,h,p);e.push({event:Z,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(me!==0){var tt=B?Ny(p,B):new FormData(p);wf(o,{pending:!0,data:tt,method:p.method,action:E},null,tt)}}else typeof E=="function"&&(Z.preventDefault(),tt=B?Ny(p,B):new FormData(p),wf(o,{pending:!0,data:tt,method:p.method,action:E},E,tt))},currentTarget:p}]})}}for(var rp=0;rp<rr.length;rp++){var lp=rr[rp],O3=lp.toLowerCase(),M3=lp[0].toUpperCase()+lp.slice(1);Pa(O3,"on"+M3)}Pa(gf,"onAnimationEnd"),Pa($i,"onAnimationIteration"),Pa(mf,"onAnimationStart"),Pa("dblclick","onDoubleClick"),Pa("focusin","onFocus"),Pa("focusout","onBlur"),Pa(sr,"onTransitionRun"),Pa(jo,"onTransitionStart"),Pa(Zr,"onTransitionCancel"),Pa(eh,"onTransitionEnd"),pi("onMouseEnter",["mouseout","mouseover"]),pi("onMouseLeave",["mouseout","mouseover"]),pi("onPointerEnter",["pointerout","pointerover"]),pi("onPointerLeave",["pointerout","pointerover"]),mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zf));function Oy(e,i){i=(i&4)!==0;for(var o=0;o<e.length;o++){var h=e[o],p=h.event;h=h.listeners;t:{var E=void 0;if(i)for(var B=h.length-1;0<=B;B--){var Z=h[B],tt=Z.instance,lt=Z.currentTarget;if(Z=Z.listener,tt!==E&&p.isPropagationStopped())break t;E=Z,p.currentTarget=lt;try{E(p)}catch(bt){ph(bt)}p.currentTarget=null,E=tt}else for(B=0;B<h.length;B++){if(Z=h[B],tt=Z.instance,lt=Z.currentTarget,Z=Z.listener,tt!==E&&p.isPropagationStopped())break t;E=Z,p.currentTarget=lt;try{E(p)}catch(bt){ph(bt)}p.currentTarget=null,E=tt}}}}function xe(e,i){var o=i[Qs];o===void 0&&(o=i[Qs]=new Set);var h=e+"__bubble";o.has(h)||(My(i,e,2,!1),o.add(h))}function op(e,i,o){var h=0;i&&(h|=4),My(o,e,h,i)}var bm="_reactListening"+Math.random().toString(36).slice(2);function up(e){if(!e[bm]){e[bm]=!0,zl.forEach(function(o){o!=="selectionchange"&&(x3.has(o)||op(o,!1,e),op(o,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[bm]||(i[bm]=!0,op("selectionchange",!1,i))}}function My(e,i,o,h){switch(t_(i)){case 2:var p=a5;break;case 8:p=s5;break;default:p=Tp}o=p.bind(null,i,o,e),p=void 0,!Qi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),h?p!==void 0?e.addEventListener(i,o,{capture:!0,passive:p}):e.addEventListener(i,o,!0):p!==void 0?e.addEventListener(i,o,{passive:p}):e.addEventListener(i,o,!1)}function cp(e,i,o,h,p){var E=h;if(!(i&1)&&!(i&2)&&h!==null)t:for(;;){if(h===null)return;var B=h.tag;if(B===3||B===4){var Z=h.stateNode.containerInfo;if(Z===p||Z.nodeType===8&&Z.parentNode===p)break;if(B===4)for(B=h.return;B!==null;){var tt=B.tag;if((tt===3||tt===4)&&(tt=B.stateNode.containerInfo,tt===p||tt.nodeType===8&&tt.parentNode===p))return;B=B.return}for(;Z!==null;){if(B=ya(Z),B===null)return;if(tt=B.tag,tt===5||tt===6||tt===26||tt===27){h=E=B;continue t}Z=Z.parentNode}}h=h.return}Ku(function(){var lt=E,bt=Gr(o),Ot=[];t:{var yt=nh.get(e);if(yt!==void 0){var St=Fr,qt=e;switch(e){case"keypress":if(Zi(o)===0)break t;case"keydown":case"keyup":St=Xr;break;case"focusin":qt="focus",St=Gl;break;case"focusout":qt="blur",St=Gl;break;case"beforeblur":case"afterblur":St=Gl;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":St=Sa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":St=lf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":St=zo;break;case gf:case $i:case mf:St=kl;break;case eh:St=Va;break;case"scroll":case"scrollend":St=Yu;break;case"wheel":St=Bo;break;case"copy":case"cut":case"paste":St=Hl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":St=Kl;break;case"toggle":case"beforetoggle":St=os}var re=(i&4)!==0,Kn=!re&&(e==="scroll"||e==="scrollend"),ft=re?yt!==null?yt+"Capture":null:yt;re=[];for(var rt=lt,mt;rt!==null;){var Dt=rt;if(mt=Dt.stateNode,Dt=Dt.tag,Dt!==5&&Dt!==26&&Dt!==27||mt===null||ft===null||(Dt=kr(rt,ft),Dt!=null&&re.push(Wf(rt,Dt,mt))),Kn)break;rt=rt.return}0<re.length&&(yt=new St(yt,qt,null,o,bt),Ot.push({event:yt,listeners:re}))}}if(!(i&7)){t:{if(yt=e==="mouseover"||e==="pointerover",St=e==="mouseout"||e==="pointerout",yt&&o!==Ea&&(qt=o.relatedTarget||o.fromElement)&&(ya(qt)||qt[ns]))break t;if((St||yt)&&(yt=bt.window===bt?bt:(yt=bt.ownerDocument)?yt.defaultView||yt.parentWindow:window,St?(qt=o.relatedTarget||o.toElement,St=lt,qt=qt?ya(qt):null,qt!==null&&(Kn=it(qt),re=qt.tag,qt!==Kn||re!==5&&re!==27&&re!==6)&&(qt=null)):(St=null,qt=lt),St!==qt)){if(re=Sa,Dt="onMouseLeave",ft="onMouseEnter",rt="mouse",(e==="pointerout"||e==="pointerover")&&(re=Kl,Dt="onPointerLeave",ft="onPointerEnter",rt="pointer"),Kn=St==null?yt:Je(St),mt=qt==null?yt:Je(qt),yt=new re(Dt,rt+"leave",St,o,bt),yt.target=Kn,yt.relatedTarget=mt,Dt=null,ya(bt)===lt&&(re=new re(ft,rt+"enter",qt,o,bt),re.target=mt,re.relatedTarget=Kn,Dt=re),Kn=Dt,St&&qt)e:{for(re=St,ft=qt,rt=0,mt=re;mt;mt=Oh(mt))rt++;for(mt=0,Dt=ft;Dt;Dt=Oh(Dt))mt++;for(;0<rt-mt;)re=Oh(re),rt--;for(;0<mt-rt;)ft=Oh(ft),mt--;for(;rt--;){if(re===ft||ft!==null&&re===ft.alternate)break e;re=Oh(re),ft=Oh(ft)}re=null}else re=null;St!==null&&xy(Ot,yt,St,re,!1),qt!==null&&Kn!==null&&xy(Ot,Kn,qt,re,!0)}}t:{if(yt=lt?Je(lt):window,St=yt.nodeName&&yt.nodeName.toLowerCase(),St==="select"||St==="input"&&yt.type==="file")var Gt=Qc;else if(Pn(yt))if(Zc)Gt=Qr;else{Gt=Dg;var be=X0}else St=yt.nodeName,!St||St.toLowerCase()!=="input"||yt.type!=="checkbox"&&yt.type!=="radio"?lt&&Bl(lt.elementType)&&(Gt=Qc):Gt=ec;if(Gt&&(Gt=Gt(e,lt))){Dn(Ot,Gt,o,bt);break t}be&&be(e,yt,lt),e==="focusout"&&lt&&yt.type==="number"&&lt.memoizedProps.value!=null&&Pl(yt,"number",yt.value)}switch(be=lt?Je(lt):window,e){case"focusin":(Pn(be)||be.contentEditable==="true")&&(Yl=be,ff=lt,qo=null);break;case"focusout":qo=ff=Yl=null;break;case"mousedown":$c=!0;break;case"contextmenu":case"mouseup":case"dragend":$c=!1,za(Ot,o,bt);break;case"selectionchange":if(Jc)break;case"keydown":case"keyup":za(Ot,o,bt)}var jt;if(Ia)t:{switch(e){case"compositionstart":var Wt="onCompositionStart";break t;case"compositionend":Wt="onCompositionEnd";break t;case"compositionupdate":Wt="onCompositionUpdate";break t}Wt=void 0}else Ee?vt(e,o)&&(Wt="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Wt="onCompositionStart");Wt&&(z&&o.locale!=="ko"&&(Ee||Wt!=="onCompositionStart"?Wt==="onCompositionEnd"&&Ee&&(jt=Uo()):(rs=bt,qr="value"in rs?rs.value:rs.textContent,Ee=!0)),be=Am(lt,Wt),0<be.length&&(Wt=new jl(Wt,e,null,o,bt),Ot.push({event:Wt,listeners:be}),jt?Wt.data=jt:(jt=Lt(o),jt!==null&&(Wt.data=jt)))),(jt=A?_n(e,o):Se(e,o))&&(Wt=Am(lt,"onBeforeInput"),0<Wt.length&&(be=new jl("onBeforeInput","beforeinput",null,o,bt),Ot.push({event:be,listeners:Wt}),be.data=jt)),N3(Ot,e,lt,o,bt)}Oy(Ot,i)})}function Wf(e,i,o){return{instance:e,listener:i,currentTarget:o}}function Am(e,i){for(var o=i+"Capture",h=[];e!==null;){var p=e,E=p.stateNode;p=p.tag,p!==5&&p!==26&&p!==27||E===null||(p=kr(e,o),p!=null&&h.unshift(Wf(e,p,E)),p=kr(e,i),p!=null&&h.push(Wf(e,p,E))),e=e.return}return h}function Oh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function xy(e,i,o,h,p){for(var E=i._reactName,B=[];o!==null&&o!==h;){var Z=o,tt=Z.alternate,lt=Z.stateNode;if(Z=Z.tag,tt!==null&&tt===h)break;Z!==5&&Z!==26&&Z!==27||lt===null||(tt=lt,p?(lt=kr(o,E),lt!=null&&B.unshift(Wf(o,lt,tt))):p||(lt=kr(o,E),lt!=null&&B.push(Wf(o,lt,tt)))),o=o.return}B.length!==0&&e.push({event:i,listeners:B})}var V3=/\r\n?/g,U3=/\u0000|\uFFFD/g;function Vy(e){return(typeof e=="string"?e:""+e).replace(V3,`
`).replace(U3,"")}function Uy(e,i){return i=Vy(i),Vy(e)===i}function Rm(){}function on(e,i,o,h,p,E){switch(o){case"children":typeof h=="string"?i==="body"||i==="textarea"&&h===""||va(e,h):(typeof h=="number"||typeof h=="bigint")&&i!=="body"&&va(e,""+h);break;case"className":Js(e,"class",h);break;case"tabIndex":Js(e,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Js(e,o,h);break;case"style":Fu(e,h,E);break;case"data":if(i!=="object"){Js(e,"data",h);break}case"src":case"href":if(h===""&&(i!=="a"||o!=="href")){e.removeAttribute(o);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(o);break}h=as(""+h),e.setAttribute(o,h);break;case"action":case"formAction":if(typeof h=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(o==="formAction"?(i!=="input"&&on(e,i,"name",p.name,p,null),on(e,i,"formEncType",p.formEncType,p,null),on(e,i,"formMethod",p.formMethod,p,null),on(e,i,"formTarget",p.formTarget,p,null)):(on(e,i,"encType",p.encType,p,null),on(e,i,"method",p.method,p,null),on(e,i,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(o);break}h=as(""+h),e.setAttribute(o,h);break;case"onClick":h!=null&&(e.onclick=Rm);break;case"onScroll":h!=null&&xe("scroll",e);break;case"onScrollEnd":h!=null&&xe("scrollend",e);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(o=h.__html,o!=null){if(p.children!=null)throw Error(r(60));e.innerHTML=o}}break;case"multiple":e.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":e.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){e.removeAttribute("xlink:href");break}o=as(""+h),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,""+h):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":h===!0?e.setAttribute(o,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,h):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?e.setAttribute(o,h):e.removeAttribute(o);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?e.removeAttribute(o):e.setAttribute(o,h);break;case"popover":xe("beforetoggle",e),xe("toggle",e),Ws(e,"popover",h);break;case"xlinkActuate":Xi(e,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Xi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Xi(e,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Xi(e,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Xi(e,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Xi(e,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Xi(e,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Xi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Xi(e,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Ws(e,"is",h);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Yc.get(o)||o,Ws(e,o,h))}}function hp(e,i,o,h,p,E){switch(o){case"style":Fu(e,h,E);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(o=h.__html,o!=null){if(p.children!=null)throw Error(r(60));e.innerHTML=o}}break;case"children":typeof h=="string"?va(e,h):(typeof h=="number"||typeof h=="bigint")&&va(e,""+h);break;case"onScroll":h!=null&&xe("scroll",e);break;case"onScrollEnd":h!=null&&xe("scrollend",e);break;case"onClick":h!=null&&(e.onclick=Rm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yi.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),i=o.slice(2,p?o.length-7:void 0),E=e[ce]||null,E=E!=null?E[o]:null,typeof E=="function"&&e.removeEventListener(i,E,p),typeof h=="function")){typeof E!="function"&&E!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(i,h,p);break t}o in e?e[o]=h:h===!0?e.setAttribute(o,""):Ws(e,o,h)}}}function Gi(e,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",e),xe("load",e);var h=!1,p=!1,E;for(E in o)if(o.hasOwnProperty(E)){var B=o[E];if(B!=null)switch(E){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:on(e,i,E,B,o,null)}}p&&on(e,i,"srcSet",o.srcSet,o,null),h&&on(e,i,"src",o.src,o,null);return;case"input":xe("invalid",e);var Z=E=B=p=null,tt=null,lt=null;for(h in o)if(o.hasOwnProperty(h)){var bt=o[h];if(bt!=null)switch(h){case"name":p=bt;break;case"type":B=bt;break;case"checked":tt=bt;break;case"defaultChecked":lt=bt;break;case"value":E=bt;break;case"defaultValue":Z=bt;break;case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(r(137,i));break;default:on(e,i,h,bt,o,null)}}zr(e,E,Z,tt,lt,B,p,!1),Ir(e);return;case"select":xe("invalid",e),h=B=E=null;for(p in o)if(o.hasOwnProperty(p)&&(Z=o[p],Z!=null))switch(p){case"value":E=Z;break;case"defaultValue":B=Z;break;case"multiple":h=Z;default:on(e,i,p,Z,o,null)}i=E,o=B,e.multiple=!!h,i!=null?Ue(e,!!h,i,!1):o!=null&&Ue(e,!!h,o,!0);return;case"textarea":xe("invalid",e),E=p=h=null;for(B in o)if(o.hasOwnProperty(B)&&(Z=o[B],Z!=null))switch(B){case"value":h=Z;break;case"defaultValue":p=Z;break;case"children":E=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(91));break;default:on(e,i,B,Z,o,null)}_a(e,h,p,E),Ir(e);return;case"option":for(tt in o)if(o.hasOwnProperty(tt)&&(h=o[tt],h!=null))switch(tt){case"selected":e.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:on(e,i,tt,h,o,null)}return;case"dialog":xe("cancel",e),xe("close",e);break;case"iframe":case"object":xe("load",e);break;case"video":case"audio":for(h=0;h<Zf.length;h++)xe(Zf[h],e);break;case"image":xe("error",e),xe("load",e);break;case"details":xe("toggle",e);break;case"embed":case"source":case"link":xe("error",e),xe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in o)if(o.hasOwnProperty(lt)&&(h=o[lt],h!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:on(e,i,lt,h,o,null)}return;default:if(Bl(i)){for(bt in o)o.hasOwnProperty(bt)&&(h=o[bt],h!==void 0&&hp(e,i,bt,h,o,void 0));return}}for(Z in o)o.hasOwnProperty(Z)&&(h=o[Z],h!=null&&on(e,i,Z,h,o,null))}function I3(e,i,o,h){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,E=null,B=null,Z=null,tt=null,lt=null,bt=null;for(St in o){var Ot=o[St];if(o.hasOwnProperty(St)&&Ot!=null)switch(St){case"checked":break;case"value":break;case"defaultValue":tt=Ot;default:h.hasOwnProperty(St)||on(e,i,St,null,h,Ot)}}for(var yt in h){var St=h[yt];if(Ot=o[yt],h.hasOwnProperty(yt)&&(St!=null||Ot!=null))switch(yt){case"type":E=St;break;case"name":p=St;break;case"checked":lt=St;break;case"defaultChecked":bt=St;break;case"value":B=St;break;case"defaultValue":Z=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(r(137,i));break;default:St!==Ot&&on(e,i,yt,St,h,Ot)}}$s(e,B,Z,tt,lt,bt,E,p);return;case"select":St=B=Z=yt=null;for(E in o)if(tt=o[E],o.hasOwnProperty(E)&&tt!=null)switch(E){case"value":break;case"multiple":St=tt;default:h.hasOwnProperty(E)||on(e,i,E,null,h,tt)}for(p in h)if(E=h[p],tt=o[p],h.hasOwnProperty(p)&&(E!=null||tt!=null))switch(p){case"value":yt=E;break;case"defaultValue":Z=E;break;case"multiple":B=E;default:E!==tt&&on(e,i,p,E,h,tt)}i=Z,o=B,h=St,yt!=null?Ue(e,!!o,yt,!1):!!h!=!!o&&(i!=null?Ue(e,!!o,i,!0):Ue(e,!!o,o?[]:"",!1));return;case"textarea":St=yt=null;for(Z in o)if(p=o[Z],o.hasOwnProperty(Z)&&p!=null&&!h.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:on(e,i,Z,null,h,p)}for(B in h)if(p=h[B],E=o[B],h.hasOwnProperty(B)&&(p!=null||E!=null))switch(B){case"value":yt=p;break;case"defaultValue":St=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==E&&on(e,i,B,p,h,E)}Pr(e,yt,St);return;case"option":for(var qt in o)if(yt=o[qt],o.hasOwnProperty(qt)&&yt!=null&&!h.hasOwnProperty(qt))switch(qt){case"selected":e.selected=!1;break;default:on(e,i,qt,null,h,yt)}for(tt in h)if(yt=h[tt],St=o[tt],h.hasOwnProperty(tt)&&yt!==St&&(yt!=null||St!=null))switch(tt){case"selected":e.selected=yt&&typeof yt!="function"&&typeof yt!="symbol";break;default:on(e,i,tt,yt,h,St)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var re in o)yt=o[re],o.hasOwnProperty(re)&&yt!=null&&!h.hasOwnProperty(re)&&on(e,i,re,null,h,yt);for(lt in h)if(yt=h[lt],St=o[lt],h.hasOwnProperty(lt)&&yt!==St&&(yt!=null||St!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(r(137,i));break;default:on(e,i,lt,yt,h,St)}return;default:if(Bl(i)){for(var Kn in o)yt=o[Kn],o.hasOwnProperty(Kn)&&yt!==void 0&&!h.hasOwnProperty(Kn)&&hp(e,i,Kn,void 0,h,yt);for(bt in h)yt=h[bt],St=o[bt],!h.hasOwnProperty(bt)||yt===St||yt===void 0&&St===void 0||hp(e,i,bt,yt,h,St);return}}for(var ft in o)yt=o[ft],o.hasOwnProperty(ft)&&yt!=null&&!h.hasOwnProperty(ft)&&on(e,i,ft,null,h,yt);for(Ot in h)yt=h[Ot],St=o[Ot],!h.hasOwnProperty(Ot)||yt===St||yt==null&&St==null||on(e,i,Ot,yt,h,St)}var fp=null,dp=null;function Cm(e){return e.nodeType===9?e:e.ownerDocument}function Iy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ly(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function gp(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var mp=null;function L3(){var e=window.event;return e&&e.type==="popstate"?e===mp?!1:(mp=e,!0):(mp=null,!1)}var zy=typeof setTimeout=="function"?setTimeout:void 0,z3=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,P3=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(e){return Py.resolve(null).then(e).catch(B3)}:zy;function B3(e){setTimeout(function(){throw e})}function pp(e,i){var o=i,h=0;do{var p=o.nextSibling;if(e.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(h===0){e.removeChild(p),sd(i);return}h--}else o!=="$"&&o!=="$?"&&o!=="$!"||h++;o=p}while(o);sd(i)}function yp(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":yp(o),Zs(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function G3(e,i,o,h){for(;e.nodeType===1;){var p=o;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!h&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(h){if(!e[Ts])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(E=e.getAttribute("rel"),E==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(E!==p.rel||e.getAttribute("href")!==(p.href==null?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(E=e.getAttribute("src"),(E!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&E&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var E=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===E)return e}else return e;if(e=Mr(e.nextSibling),e===null)break}return null}function k3(e,i,o){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=Mr(e.nextSibling),e===null))return null;return e}function Mr(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}function By(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return e;i--}else o==="/$"&&i++}e=e.previousSibling}return null}function Gy(e,i,o){switch(i=Cm(o),e){case"html":if(e=i.documentElement,!e)throw Error(r(452));return e;case"head":if(e=i.head,!e)throw Error(r(453));return e;case"body":if(e=i.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}var Hs=new Map,ky=new Set;function Dm(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var po=gt.d;gt.d={f:H3,r:q3,D:j3,C:F3,L:K3,m:Y3,X:Q3,S:X3,M:Z3};function H3(){var e=po.f(),i=fo();return e||i}function q3(e){var i=Sn(e);i!==null&&i.tag===5&&i.type==="form"?im(i):po.r(e)}var Mh=typeof document>"u"?null:document;function Hy(e,i,o){var h=Mh;if(h&&typeof i=="string"&&i){var p=pn(i);p='link[rel="'+e+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),ky.has(p)||(ky.add(p),e={rel:e,crossOrigin:o,href:i},h.querySelector(p)===null&&(i=h.createElement("link"),Gi(i,"link",e),sn(i),h.head.appendChild(i)))}}function j3(e){po.D(e),Hy("dns-prefetch",e,null)}function F3(e,i){po.C(e,i),Hy("preconnect",e,i)}function K3(e,i,o){po.L(e,i,o);var h=Mh;if(h&&e&&i){var p='link[rel="preload"][as="'+pn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+pn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+pn(o.imageSizes)+'"]')):p+='[href="'+pn(e)+'"]';var E=p;switch(i){case"style":E=xh(e);break;case"script":E=Vh(e)}Hs.has(E)||(e=x({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:e,as:i},o),Hs.set(E,e),h.querySelector(p)!==null||i==="style"&&h.querySelector(Jf(E))||i==="script"&&h.querySelector($f(E))||(i=h.createElement("link"),Gi(i,"link",e),sn(i),h.head.appendChild(i)))}}function Y3(e,i){po.m(e,i);var o=Mh;if(o&&e){var h=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+pn(h)+'"][href="'+pn(e)+'"]',E=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Vh(e)}if(!Hs.has(E)&&(e=x({rel:"modulepreload",href:e},i),Hs.set(E,e),o.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector($f(E)))return}h=o.createElement("link"),Gi(h,"link",e),sn(h),o.head.appendChild(h)}}}function X3(e,i,o){po.S(e,i,o);var h=Mh;if(h&&e){var p=Oa(h).hoistableStyles,E=xh(e);i=i||"default";var B=p.get(E);if(!B){var Z={loading:0,preload:null};if(B=h.querySelector(Jf(E)))Z.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":i},o),(o=Hs.get(E))&&_p(e,o);var tt=B=h.createElement("link");sn(tt),Gi(tt,"link",e),tt._p=new Promise(function(lt,bt){tt.onload=lt,tt.onerror=bt}),tt.addEventListener("load",function(){Z.loading|=1}),tt.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,wm(B,i,h)}B={type:"stylesheet",instance:B,count:1,state:Z},p.set(E,B)}}}function Q3(e,i){po.X(e,i);var o=Mh;if(o&&e){var h=Oa(o).hoistableScripts,p=Vh(e),E=h.get(p);E||(E=o.querySelector($f(p)),E||(e=x({src:e,async:!0},i),(i=Hs.get(p))&&vp(e,i),E=o.createElement("script"),sn(E),Gi(E,"link",e),o.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(p,E))}}function Z3(e,i){po.M(e,i);var o=Mh;if(o&&e){var h=Oa(o).hoistableScripts,p=Vh(e),E=h.get(p);E||(E=o.querySelector($f(p)),E||(e=x({src:e,async:!0,type:"module"},i),(i=Hs.get(p))&&vp(e,i),E=o.createElement("script"),sn(E),Gi(E,"link",e),o.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(p,E))}}function qy(e,i,o,h){var p=(p=$t.current)?Dm(p):null;if(!p)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=xh(o.href),o=Oa(p).hoistableStyles,h=o.get(i),h||(h={type:"style",instance:null,count:0,state:null},o.set(i,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=xh(o.href);var E=Oa(p).hoistableStyles,B=E.get(e);if(B||(p=p.ownerDocument||p,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(e,B),(E=p.querySelector(Jf(e)))&&!E._p&&(B.instance=E,B.state.loading=5),Hs.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Hs.set(e,o),E||W3(p,e,o,B.state))),i&&h===null)throw Error(r(528,""));return B}if(i&&h!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Vh(o),o=Oa(p).hoistableScripts,h=o.get(i),h||(h={type:"script",instance:null,count:0,state:null},o.set(i,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function xh(e){return'href="'+pn(e)+'"'}function Jf(e){return'link[rel="stylesheet"]['+e+"]"}function jy(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function W3(e,i,o,h){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?h.loading=1:(i=e.createElement("link"),h.preload=i,i.addEventListener("load",function(){return h.loading|=1}),i.addEventListener("error",function(){return h.loading|=2}),Gi(i,"link",o),sn(i),e.head.appendChild(i))}function Vh(e){return'[src="'+pn(e)+'"]'}function $f(e){return"script[async]"+e}function Fy(e,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var h=e.querySelector('style[data-href~="'+pn(o.href)+'"]');if(h)return i.instance=h,sn(h),h;var p=x({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return h=(e.ownerDocument||e).createElement("style"),sn(h),Gi(h,"style",p),wm(h,o.precedence,e),i.instance=h;case"stylesheet":p=xh(o.href);var E=e.querySelector(Jf(p));if(E)return i.state.loading|=4,i.instance=E,sn(E),E;h=jy(o),(p=Hs.get(p))&&_p(h,p),E=(e.ownerDocument||e).createElement("link"),sn(E);var B=E;return B._p=new Promise(function(Z,tt){B.onload=Z,B.onerror=tt}),Gi(E,"link",h),i.state.loading|=4,wm(E,o.precedence,e),i.instance=E;case"script":return E=Vh(o.src),(p=e.querySelector($f(E)))?(i.instance=p,sn(p),p):(h=o,(p=Hs.get(E))&&(h=x({},o),vp(h,p)),e=e.ownerDocument||e,p=e.createElement("script"),sn(p),Gi(p,"link",h),e.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&!(i.state.loading&4)&&(h=i.instance,i.state.loading|=4,wm(h,o.precedence,e));return i.instance}function wm(e,i,o){for(var h=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,E=p,B=0;B<h.length;B++){var Z=h[B];if(Z.dataset.precedence===i)E=Z;else if(E!==p)break}E?E.parentNode.insertBefore(e,E.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(e,i.firstChild))}function _p(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function vp(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Nm=null;function Ky(e,i,o){if(Nm===null){var h=new Map,p=Nm=new Map;p.set(o,h)}else p=Nm,h=p.get(o),h||(h=new Map,p.set(o,h));if(h.has(e))return h;for(h.set(e,null),o=o.getElementsByTagName(e),p=0;p<o.length;p++){var E=o[p];if(!(E[Ts]||E[Rn]||e==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var B=E.getAttribute(i)||"";B=e+B;var Z=h.get(B);Z?Z.push(E):h.set(B,[E])}}return h}function Yy(e,i,o){e=e.ownerDocument||e,e.head.insertBefore(o,i==="title"?e.querySelector("head > title"):null)}function J3(e,i,o){if(o===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Xy(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var td=null;function $3(){}function t5(e,i,o){if(td===null)throw Error(r(475));var h=td;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&!(i.state.loading&4)){if(i.instance===null){var p=xh(o.href),E=e.querySelector(Jf(p));if(E){e=E._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(h.count++,h=Om.bind(h),e.then(h,h)),i.state.loading|=4,i.instance=E,sn(E);return}E=e.ownerDocument||e,o=jy(o),(p=Hs.get(p))&&_p(o,p),E=E.createElement("link"),sn(E);var B=E;B._p=new Promise(function(Z,tt){B.onload=Z,B.onerror=tt}),Gi(E,"link",o),i.instance=E}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(i,e),(e=i.state.preload)&&!(i.state.loading&3)&&(h.count++,i=Om.bind(h),e.addEventListener("load",i),e.addEventListener("error",i))}}function e5(){if(td===null)throw Error(r(475));var e=td;return e.stylesheets&&e.count===0&&Ep(e,e.stylesheets),0<e.count?function(i){var o=setTimeout(function(){if(e.stylesheets&&Ep(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o)}}:null}function Om(){if(this.count--,this.count===0){if(this.stylesheets)Ep(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Mm=null;function Ep(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Mm=new Map,i.forEach(n5,e),Mm=null,Om.call(e))}function n5(e,i){if(!(i.state.loading&4)){var o=Mm.get(e);if(o)var h=o.get(null);else{o=new Map,Mm.set(e,o);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<p.length;E++){var B=p[E];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(o.set(B.dataset.precedence,B),h=B)}h&&o.set(null,h)}p=i.instance,B=p.getAttribute("data-precedence"),E=o.get(B)||h,E===h&&o.set(null,p),o.set(B,p),this.count++,h=Om.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),E?E.parentNode.insertBefore(p,E.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),i.state.loading|=4}}var ed={$$typeof:w,Provider:null,Consumer:null,_currentValue:Rt,_currentValue2:Rt,_threadCount:0};function i5(e,i,o,h,p,E,B,Z){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Il(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Il(0),this.hiddenUpdates=Il(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=E,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function Qy(e,i,o,h,p,E,B,Z,tt,lt,bt,Ot){return e=new i5(e,i,o,B,Z,tt,lt,Ot),i=1,E===!0&&(i|=24),E=Un(3,null,null,i),e.current=E,E.stateNode=e,i=vf(),i.refCount++,e.pooledCache=i,i.refCount++,E.memoizedState={element:h,isDehydrated:o,cache:i},Ii(E),e}function Zy(e){return e?(e=Wr,e):Wr}function Wy(e,i,o,h,p,E){p=Zy(p),h.context===null?h.context=p:h.pendingContext=p,h=Ca(i),h.payload={element:o},E=E===void 0?null:E,E!==null&&(h.callback=E),o=Da(e,h,i),o!==null&&(Fn(o,e,i),ml(o,e,i))}function Jy(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<i?o:i}}function Sp(e,i){Jy(e,i),(e=e.alternate)&&Jy(e,i)}function $y(e){if(e.tag===13){var i=or(e,67108864);i!==null&&Fn(i,e,67108864),Sp(e,67108864)}}var xm=!0;function a5(e,i,o,h){var p=D.T;D.T=null;var E=gt.p;try{gt.p=2,Tp(e,i,o,h)}finally{gt.p=E,D.T=p}}function s5(e,i,o,h){var p=D.T;D.T=null;var E=gt.p;try{gt.p=8,Tp(e,i,o,h)}finally{gt.p=E,D.T=p}}function Tp(e,i,o,h){if(xm){var p=bp(h);if(p===null)cp(e,i,h,Vm,o),e_(e,h);else if(l5(p,e,i,o,h))h.stopPropagation();else if(e_(e,h),i&4&&-1<r5.indexOf(e)){for(;p!==null;){var E=Sn(p);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var B=Ki(E.pendingLanes);if(B!==0){var Z=E;for(Z.pendingLanes|=2,Z.entangledLanes|=2;B;){var tt=1<<31-Zn(B);Z.entanglements[1]|=tt,B&=~tt}tn(E),!(ne&6)&&(_e=nn()+500,Te(0))}}break;case 13:Z=or(E,2),Z!==null&&Fn(Z,E,2),fo(),Sp(E,2)}if(E=bp(h),E===null&&cp(e,i,h,Vm,o),E===p)break;p=E}p!==null&&h.stopPropagation()}else cp(e,i,h,null,o)}}function bp(e){return e=Gr(e),Ap(e)}var Vm=null;function Ap(e){if(Vm=null,e=ya(e),e!==null){var i=it(e);if(i===null)e=null;else{var o=i.tag;if(o===13){if(e=ut(i),e!==null)return e;e=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Vm=e,null}function t_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oi()){case De:return 2;case He:return 8;case Qn:case fa:return 32;case ji:return 268435456;default:return 32}default:return 32}}var Rp=!1,du=null,gu=null,mu=null,nd=new Map,id=new Map,pu=[],r5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function e_(e,i){switch(e){case"focusin":case"focusout":du=null;break;case"dragenter":case"dragleave":gu=null;break;case"mouseover":case"mouseout":mu=null;break;case"pointerover":case"pointerout":nd.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":id.delete(i.pointerId)}}function ad(e,i,o,h,p,E){return e===null||e.nativeEvent!==E?(e={blockedOn:i,domEventName:o,eventSystemFlags:h,nativeEvent:E,targetContainers:[p]},i!==null&&(i=Sn(i),i!==null&&$y(i)),e):(e.eventSystemFlags|=h,i=e.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),e)}function l5(e,i,o,h,p){switch(i){case"focusin":return du=ad(du,e,i,o,h,p),!0;case"dragenter":return gu=ad(gu,e,i,o,h,p),!0;case"mouseover":return mu=ad(mu,e,i,o,h,p),!0;case"pointerover":var E=p.pointerId;return nd.set(E,ad(nd.get(E)||null,e,i,o,h,p)),!0;case"gotpointercapture":return E=p.pointerId,id.set(E,ad(id.get(E)||null,e,i,o,h,p)),!0}return!1}function n_(e){var i=ya(e.target);if(i!==null){var o=it(i);if(o!==null){if(i=o.tag,i===13){if(i=ut(o),i!==null){e.blockedOn=i,Mi(e.priority,function(){if(o.tag===13){var h=Bi(),p=or(o,h);p!==null&&Fn(p,o,h),Sp(o,h)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Um(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var o=bp(e.nativeEvent);if(o===null){o=e.nativeEvent;var h=new o.constructor(o.type,o);Ea=h,o.target.dispatchEvent(h),Ea=null}else return i=Sn(o),i!==null&&$y(i),e.blockedOn=o,!1;i.shift()}return!0}function i_(e,i,o){Um(e)&&o.delete(i)}function o5(){Rp=!1,du!==null&&Um(du)&&(du=null),gu!==null&&Um(gu)&&(gu=null),mu!==null&&Um(mu)&&(mu=null),nd.forEach(i_),id.forEach(i_)}function Im(e,i){e.blockedOn===i&&(e.blockedOn=null,Rp||(Rp=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,o5)))}var Lm=null;function a_(e){Lm!==e&&(Lm=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Lm===e&&(Lm=null);for(var i=0;i<e.length;i+=3){var o=e[i],h=e[i+1],p=e[i+2];if(typeof h!="function"){if(Ap(h||o)===null)continue;break}var E=Sn(o);E!==null&&(e.splice(i,3),i-=3,wf(E,{pending:!0,data:p,method:o.method,action:h},h,p))}}))}function sd(e){function i(tt){return Im(tt,e)}du!==null&&Im(du,e),gu!==null&&Im(gu,e),mu!==null&&Im(mu,e),nd.forEach(i),id.forEach(i);for(var o=0;o<pu.length;o++){var h=pu[o];h.blockedOn===e&&(h.blockedOn=null)}for(;0<pu.length&&(o=pu[0],o.blockedOn===null);)n_(o),o.blockedOn===null&&pu.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(h=0;h<o.length;h+=3){var p=o[h],E=o[h+1],B=p[ce]||null;if(typeof E=="function")B||a_(o);else if(B){var Z=null;if(E&&E.hasAttribute("formAction")){if(p=E,B=E[ce]||null)Z=B.formAction;else if(Ap(p)!==null)continue}else Z=B.action;typeof Z=="function"?o[h+1]=Z:(o.splice(h,3),h-=3),a_(o)}}}function Cp(e){this._internalRoot=e}zm.prototype.render=Cp.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,h=Bi();Wy(o,h,e,i,null,null)},zm.prototype.unmount=Cp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;e.tag===0&&Ut(),Wy(e.current,2,null,e,null,null),fo(),i[ns]=null}};function zm(e){this._internalRoot=e}zm.prototype.unstable_scheduleHydration=function(e){if(e){var i=Hu();e={blockedOn:null,target:e,priority:i};for(var o=0;o<pu.length&&i!==0&&i<pu[o].priority;o++);pu.splice(o,0,e),o===0&&n_(e)}};var s_=t.version;if(s_!=="19.0.0")throw Error(r(527,s_,"19.0.0"));gt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=at(i),e=e!==null?Et(e):null,e=e===null?null:e.stateNode,e};var u5={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:D,findFiberByHostInstance:ya,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pm.isDisabled&&Pm.supportsFiber)try{an=Pm.inject(u5),Re=Pm}catch{}}return ld.createRoot=function(e,i){if(!u(e))throw Error(r(299));var o=!1,h="",p=hm,E=fm,B=dm,Z=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(E=i.onCaughtError),i.onRecoverableError!==void 0&&(B=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(Z=i.unstable_transitionCallbacks)),i=Qy(e,1,!1,null,null,o,h,p,E,B,Z,null),e[ns]=i.current,up(e.nodeType===8?e.parentNode:e),new Cp(i)},ld.hydrateRoot=function(e,i,o){if(!u(e))throw Error(r(299));var h=!1,p="",E=hm,B=fm,Z=dm,tt=null,lt=null;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(E=o.onUncaughtError),o.onCaughtError!==void 0&&(B=o.onCaughtError),o.onRecoverableError!==void 0&&(Z=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(tt=o.unstable_transitionCallbacks),o.formState!==void 0&&(lt=o.formState)),i=Qy(e,1,!0,i,o??null,h,p,E,B,Z,tt,lt),i.context=Zy(null),o=i.current,h=Bi(),p=Ca(h),p.callback=null,Da(o,p,h),i.current.lanes=h,En(i,h),tn(i),e[ns]=i.current,up(e),new zm(i)},ld.version="19.0.0",ld}var p_;function _5(){if(p_)return Np.exports;p_=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Np.exports=y5(),Np.exports}var v5=_5(),Xm={exports:{}},od={},Vp={},Up={},y_;function ve(){return y_||(y_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a._registerNode=a.Konva=a.glob=void 0;const t=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}a.glob=typeof r_<"u"?r_:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},a.Konva={_global:a.glob,version:"9.3.18",isBrowser:n(),isUnminified:/param/.test((function(u){}).toString()),dblClickWindow:400,getAngle(u){return a.Konva.angleDeg?u*t:u},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return a.Konva.DD.isDragging},isTransforming(){var u;return(u=a.Konva.Transformer)===null||u===void 0?void 0:u.isTransforming()},isDragReady(){return!!a.Konva.DD.node},releaseCanvasOnDestroy:!0,document:a.glob.document,_injectGlobal(u){a.glob.Konva=u}};const r=u=>{a.Konva[u.prototype.getClassName()]=u};a._registerNode=r,a.Konva._injectGlobal(a.Konva)}(Up)),Up}var Ip={},__;function Yn(){return __||(__=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.Transform=void 0;const t=ve();class n{constructor(G=[1,0,0,1,0,0]){this.dirty=!1,this.m=G&&G.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(G){G.m[0]=this.m[0],G.m[1]=this.m[1],G.m[2]=this.m[2],G.m[3]=this.m[3],G.m[4]=this.m[4],G.m[5]=this.m[5]}point(G){const H=this.m;return{x:H[0]*G.x+H[2]*G.y+H[4],y:H[1]*G.x+H[3]*G.y+H[5]}}translate(G,H){return this.m[4]+=this.m[0]*G+this.m[2]*H,this.m[5]+=this.m[1]*G+this.m[3]*H,this}scale(G,H){return this.m[0]*=G,this.m[1]*=G,this.m[2]*=H,this.m[3]*=H,this}rotate(G){const H=Math.cos(G),Y=Math.sin(G),q=this.m[0]*H+this.m[2]*Y,V=this.m[1]*H+this.m[3]*Y,D=this.m[0]*-Y+this.m[2]*H,x=this.m[1]*-Y+this.m[3]*H;return this.m[0]=q,this.m[1]=V,this.m[2]=D,this.m[3]=x,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(G,H){const Y=this.m[0]+this.m[2]*H,q=this.m[1]+this.m[3]*H,V=this.m[2]+this.m[0]*G,D=this.m[3]+this.m[1]*G;return this.m[0]=Y,this.m[1]=q,this.m[2]=V,this.m[3]=D,this}multiply(G){const H=this.m[0]*G.m[0]+this.m[2]*G.m[1],Y=this.m[1]*G.m[0]+this.m[3]*G.m[1],q=this.m[0]*G.m[2]+this.m[2]*G.m[3],V=this.m[1]*G.m[2]+this.m[3]*G.m[3],D=this.m[0]*G.m[4]+this.m[2]*G.m[5]+this.m[4],x=this.m[1]*G.m[4]+this.m[3]*G.m[5]+this.m[5];return this.m[0]=H,this.m[1]=Y,this.m[2]=q,this.m[3]=V,this.m[4]=D,this.m[5]=x,this}invert(){const G=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),H=this.m[3]*G,Y=-this.m[1]*G,q=-this.m[2]*G,V=this.m[0]*G,D=G*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),x=G*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=H,this.m[1]=Y,this.m[2]=q,this.m[3]=V,this.m[4]=D,this.m[5]=x,this}getMatrix(){return this.m}decompose(){const G=this.m[0],H=this.m[1],Y=this.m[2],q=this.m[3],V=this.m[4],D=this.m[5],x=G*q-H*Y,L={x:V,y:D,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(G!=0||H!=0){const j=Math.sqrt(G*G+H*H);L.rotation=H>0?Math.acos(G/j):-Math.acos(G/j),L.scaleX=j,L.scaleY=x/j,L.skewX=(G*Y+H*q)/x,L.skewY=0}else if(Y!=0||q!=0){const j=Math.sqrt(Y*Y+q*q);L.rotation=Math.PI/2-(q>0?Math.acos(-Y/j):-Math.acos(Y/j)),L.scaleX=x/j,L.scaleY=j,L.skewX=0,L.skewY=(G*Y+H*q)/x}return L.rotation=a.Util._getRotation(L.rotation),L}}a.Transform=n;const r="[object Array]",u="[object Number]",c="[object String]",d="[object Boolean]",m=Math.PI/180,_=180/Math.PI,v="#",b="",R="0",U="Konva warning: ",w="Konva error: ",O="rgb(",I={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},P=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let K=[];const C=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(M){setTimeout(M,60)};a.Util={_isElement(M){return!!(M&&M.nodeType==1)},_isFunction(M){return!!(M&&M.constructor&&M.call&&M.apply)},_isPlainObject(M){return!!M&&M.constructor===Object},_isArray(M){return Object.prototype.toString.call(M)===r},_isNumber(M){return Object.prototype.toString.call(M)===u&&!isNaN(M)&&isFinite(M)},_isString(M){return Object.prototype.toString.call(M)===c},_isBoolean(M){return Object.prototype.toString.call(M)===d},isObject(M){return M instanceof Object},isValidSelector(M){if(typeof M!="string")return!1;const G=M[0];return G==="#"||G==="."||G===G.toUpperCase()},_sign(M){return M===0||M>0?1:-1},requestAnimFrame(M){K.push(M),K.length===1&&C(function(){const G=K;K=[],G.forEach(function(H){H()})})},createCanvasElement(){const M=document.createElement("canvas");try{M.style=M.style||{}}catch{}return M},createImageElement(){return document.createElement("img")},_isInDocument(M){for(;M=M.parentNode;)if(M==document)return!0;return!1},_urlToImage(M,G){const H=a.Util.createImageElement();H.onload=function(){G(H)},H.src=M},_rgbToHex(M,G,H){return((1<<24)+(M<<16)+(G<<8)+H).toString(16).slice(1)},_hexToRgb(M){M=M.replace(v,b);const G=parseInt(M,16);return{r:G>>16&255,g:G>>8&255,b:G&255}},getRandomColor(){let M=(Math.random()*16777215<<0).toString(16);for(;M.length<6;)M=R+M;return v+M},getRGB(M){let G;return M in I?(G=I[M],{r:G[0],g:G[1],b:G[2]}):M[0]===v?this._hexToRgb(M.substring(1)):M.substr(0,4)===O?(G=P.exec(M.replace(/ /g,"")),{r:parseInt(G[1],10),g:parseInt(G[2],10),b:parseInt(G[3],10)}):{r:0,g:0,b:0}},colorToRGBA(M){return M=M||"black",a.Util._namedColorToRBA(M)||a.Util._hex3ColorToRGBA(M)||a.Util._hex4ColorToRGBA(M)||a.Util._hex6ColorToRGBA(M)||a.Util._hex8ColorToRGBA(M)||a.Util._rgbColorToRGBA(M)||a.Util._rgbaColorToRGBA(M)||a.Util._hslColorToRGBA(M)},_namedColorToRBA(M){const G=I[M.toLowerCase()];return G?{r:G[0],g:G[1],b:G[2],a:1}:null},_rgbColorToRGBA(M){if(M.indexOf("rgb(")===0){M=M.match(/rgb\(([^)]+)\)/)[1];const G=M.split(/ *, */).map(Number);return{r:G[0],g:G[1],b:G[2],a:1}}},_rgbaColorToRGBA(M){if(M.indexOf("rgba(")===0){M=M.match(/rgba\(([^)]+)\)/)[1];const G=M.split(/ *, */).map((H,Y)=>H.slice(-1)==="%"?Y===3?parseInt(H)/100:parseInt(H)/100*255:Number(H));return{r:G[0],g:G[1],b:G[2],a:G[3]}}},_hex8ColorToRGBA(M){if(M[0]==="#"&&M.length===9)return{r:parseInt(M.slice(1,3),16),g:parseInt(M.slice(3,5),16),b:parseInt(M.slice(5,7),16),a:parseInt(M.slice(7,9),16)/255}},_hex6ColorToRGBA(M){if(M[0]==="#"&&M.length===7)return{r:parseInt(M.slice(1,3),16),g:parseInt(M.slice(3,5),16),b:parseInt(M.slice(5,7),16),a:1}},_hex4ColorToRGBA(M){if(M[0]==="#"&&M.length===5)return{r:parseInt(M[1]+M[1],16),g:parseInt(M[2]+M[2],16),b:parseInt(M[3]+M[3],16),a:parseInt(M[4]+M[4],16)/255}},_hex3ColorToRGBA(M){if(M[0]==="#"&&M.length===4)return{r:parseInt(M[1]+M[1],16),g:parseInt(M[2]+M[2],16),b:parseInt(M[3]+M[3],16),a:1}},_hslColorToRGBA(M){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(M)){const[G,...H]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(M),Y=Number(H[0])/360,q=Number(H[1])/100,V=Number(H[2])/100;let D,x,L;if(q===0)return L=V*255,{r:Math.round(L),g:Math.round(L),b:Math.round(L),a:1};V<.5?D=V*(1+q):D=V+q-V*q;const j=2*V-D,T=[0,0,0];for(let F=0;F<3;F++)x=Y+1/3*-(F-1),x<0&&x++,x>1&&x--,6*x<1?L=j+(D-j)*6*x:2*x<1?L=D:3*x<2?L=j+(D-j)*(2/3-x)*6:L=j,T[F]=L*255;return{r:Math.round(T[0]),g:Math.round(T[1]),b:Math.round(T[2]),a:1}}},haveIntersection(M,G){return!(G.x>M.x+M.width||G.x+G.width<M.x||G.y>M.y+M.height||G.y+G.height<M.y)},cloneObject(M){const G={};for(const H in M)this._isPlainObject(M[H])?G[H]=this.cloneObject(M[H]):this._isArray(M[H])?G[H]=this.cloneArray(M[H]):G[H]=M[H];return G},cloneArray(M){return M.slice(0)},degToRad(M){return M*m},radToDeg(M){return M*_},_degToRad(M){return a.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),a.Util.degToRad(M)},_radToDeg(M){return a.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),a.Util.radToDeg(M)},_getRotation(M){return t.Konva.angleDeg?a.Util.radToDeg(M):M},_capitalize(M){return M.charAt(0).toUpperCase()+M.slice(1)},throw(M){throw new Error(w+M)},error(M){console.error(w+M)},warn(M){t.Konva.showWarnings&&console.warn(U+M)},each(M,G){for(const H in M)G(H,M[H])},_inRange(M,G,H){return G<=M&&M<H},_getProjectionToSegment(M,G,H,Y,q,V){let D,x,L;const j=(M-H)*(M-H)+(G-Y)*(G-Y);if(j==0)D=M,x=G,L=(q-H)*(q-H)+(V-Y)*(V-Y);else{const T=((q-M)*(H-M)+(V-G)*(Y-G))/j;T<0?(D=M,x=G,L=(M-q)*(M-q)+(G-V)*(G-V)):T>1?(D=H,x=Y,L=(H-q)*(H-q)+(Y-V)*(Y-V)):(D=M+T*(H-M),x=G+T*(Y-G),L=(D-q)*(D-q)+(x-V)*(x-V))}return[D,x,L]},_getProjectionToLine(M,G,H){const Y=a.Util.cloneObject(M);let q=Number.MAX_VALUE;return G.forEach(function(V,D){if(!H&&D===G.length-1)return;const x=G[(D+1)%G.length],L=a.Util._getProjectionToSegment(V.x,V.y,x.x,x.y,M.x,M.y),j=L[0],T=L[1],F=L[2];F<q&&(Y.x=j,Y.y=T,q=F)}),Y},_prepareArrayForTween(M,G,H){const Y=[],q=[];if(M.length>G.length){const D=G;G=M,M=D}for(let D=0;D<M.length;D+=2)Y.push({x:M[D],y:M[D+1]});for(let D=0;D<G.length;D+=2)q.push({x:G[D],y:G[D+1]});const V=[];return q.forEach(function(D){const x=a.Util._getProjectionToLine(D,Y,H);V.push(x.x),V.push(x.y)}),V},_prepareToStringify(M){let G;M.visitedByCircularReferenceRemoval=!0;for(const H in M)if(M.hasOwnProperty(H)&&M[H]&&typeof M[H]=="object"){if(G=Object.getOwnPropertyDescriptor(M,H),M[H].visitedByCircularReferenceRemoval||a.Util._isElement(M[H]))if(G.configurable)delete M[H];else return null;else if(a.Util._prepareToStringify(M[H])===null)if(G.configurable)delete M[H];else return null}return delete M.visitedByCircularReferenceRemoval,M},_assign(M,G){for(const H in G)M[H]=G[H];return M},_getFirstPointerId(M){return M.touches?M.changedTouches[0].identifier:M.pointerId||999},releaseCanvas(...M){t.Konva.releaseCanvasOnDestroy&&M.forEach(G=>{G.width=0,G.height=0})},drawRoundedRectPath(M,G,H,Y){let q=0,V=0,D=0,x=0;typeof Y=="number"?q=V=D=x=Math.min(Y,G/2,H/2):(q=Math.min(Y[0]||0,G/2,H/2),V=Math.min(Y[1]||0,G/2,H/2),x=Math.min(Y[2]||0,G/2,H/2),D=Math.min(Y[3]||0,G/2,H/2)),M.moveTo(q,0),M.lineTo(G-V,0),M.arc(G-V,V,V,Math.PI*3/2,0,!1),M.lineTo(G,H-x),M.arc(G-x,H-x,x,0,Math.PI/2,!1),M.lineTo(D,H),M.arc(D,H-D,D,Math.PI/2,Math.PI,!1),M.lineTo(0,q),M.arc(q,q,q,Math.PI,Math.PI*3/2,!1)}}}(Ip)),Ip}var ud={},Lp={},Wa={},v_;function Ce(){if(v_)return Wa;v_=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.RGBComponent=r,Wa.alphaComponent=u,Wa.getNumberValidator=c,Wa.getNumberOrArrayOfNumbersValidator=d,Wa.getNumberOrAutoValidator=m,Wa.getStringValidator=_,Wa.getStringOrGradientValidator=v,Wa.getFunctionValidator=b,Wa.getNumberArrayValidator=R,Wa.getBooleanValidator=U,Wa.getComponentValidator=w;const a=ve(),t=Yn();function n(O){return t.Util._isString(O)?'"'+O+'"':Object.prototype.toString.call(O)==="[object Number]"||t.Util._isBoolean(O)?O:Object.prototype.toString.call(O)}function r(O){return O>255?255:O<0?0:Math.round(O)}function u(O){return O>1?1:O<1e-4?1e-4:O}function c(){if(a.Konva.isUnminified)return function(O,I){return t.Util._isNumber(O)||t.Util.warn(n(O)+' is a not valid value for "'+I+'" attribute. The value should be a number.'),O}}function d(O){if(a.Konva.isUnminified)return function(I,P){let K=t.Util._isNumber(I),C=t.Util._isArray(I)&&I.length==O;return!K&&!C&&t.Util.warn(n(I)+' is a not valid value for "'+P+'" attribute. The value should be a number or Array<number>('+O+")"),I}}function m(){if(a.Konva.isUnminified)return function(O,I){var P=t.Util._isNumber(O),K=O==="auto";return P||K||t.Util.warn(n(O)+' is a not valid value for "'+I+'" attribute. The value should be a number or "auto".'),O}}function _(){if(a.Konva.isUnminified)return function(O,I){return t.Util._isString(O)||t.Util.warn(n(O)+' is a not valid value for "'+I+'" attribute. The value should be a string.'),O}}function v(){if(a.Konva.isUnminified)return function(O,I){const P=t.Util._isString(O),K=Object.prototype.toString.call(O)==="[object CanvasGradient]"||O&&O.addColorStop;return P||K||t.Util.warn(n(O)+' is a not valid value for "'+I+'" attribute. The value should be a string or a native gradient.'),O}}function b(){if(a.Konva.isUnminified)return function(O,I){return t.Util._isFunction(O)||t.Util.warn(n(O)+' is a not valid value for "'+I+'" attribute. The value should be a function.'),O}}function R(){if(a.Konva.isUnminified)return function(O,I){const P=Int8Array?Object.getPrototypeOf(Int8Array):null;return P&&O instanceof P||(t.Util._isArray(O)?O.forEach(function(K){t.Util._isNumber(K)||t.Util.warn('"'+I+'" attribute has non numeric element '+K+". Make sure that all elements are numbers.")}):t.Util.warn(n(O)+' is a not valid value for "'+I+'" attribute. The value should be a array of numbers.')),O}}function U(){if(a.Konva.isUnminified)return function(O,I){var P=O===!0||O===!1;return P||t.Util.warn(n(O)+' is a not valid value for "'+I+'" attribute. The value should be a boolean.'),O}}function w(O){if(a.Konva.isUnminified)return function(I,P){return I==null||t.Util.isObject(I)||t.Util.warn(n(I)+' is a not valid value for "'+P+'" attribute. The value should be an object with properties '+O),I}}return Wa}var E_;function Ae(){return E_||(E_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Factory=void 0;const t=Yn(),n=Ce(),r="get",u="set";a.Factory={addGetterSetter(c,d,m,_,v){a.Factory.addGetter(c,d,m),a.Factory.addSetter(c,d,_,v),a.Factory.addOverloadedGetterSetter(c,d)},addGetter(c,d,m){var _=r+t.Util._capitalize(d);c.prototype[_]=c.prototype[_]||function(){const v=this.attrs[d];return v===void 0?m:v}},addSetter(c,d,m,_){var v=u+t.Util._capitalize(d);c.prototype[v]||a.Factory.overWriteSetter(c,d,m,_)},overWriteSetter(c,d,m,_){var v=u+t.Util._capitalize(d);c.prototype[v]=function(b){return m&&b!==void 0&&b!==null&&(b=m.call(this,b,d)),this._setAttr(d,b),_&&_.call(this),this}},addComponentsGetterSetter(c,d,m,_,v){const b=m.length,R=t.Util._capitalize,U=r+R(d),w=u+R(d);c.prototype[U]=function(){const I={};for(let P=0;P<b;P++){const K=m[P];I[K]=this.getAttr(d+R(K))}return I};const O=(0,n.getComponentValidator)(m);c.prototype[w]=function(I){const P=this.attrs[d];_&&(I=_.call(this,I,d)),O&&O.call(this,I,d);for(const K in I)I.hasOwnProperty(K)&&this._setAttr(d+R(K),I[K]);return I||m.forEach(K=>{this._setAttr(d+R(K),void 0)}),this._fireChangeEvent(d,P,I),v&&v.call(this),this},a.Factory.addOverloadedGetterSetter(c,d)},addOverloadedGetterSetter(c,d){var m=t.Util._capitalize(d),_=u+m,v=r+m;c.prototype[d]=function(){return arguments.length?(this[_](arguments[0]),this):this[v]()}},addDeprecatedGetterSetter(c,d,m,_){t.Util.error("Adding deprecated "+d);const v=r+t.Util._capitalize(d),b=d+" property is deprecated and will be removed soon. Look at Konva change log for more information.";c.prototype[v]=function(){t.Util.error(b);const R=this.attrs[d];return R===void 0?m:R},a.Factory.addSetter(c,d,_,function(){t.Util.error(b)}),a.Factory.addOverloadedGetterSetter(c,d)},backCompat(c,d){t.Util.each(d,function(m,_){const v=c.prototype[_],b=r+t.Util._capitalize(m),R=u+t.Util._capitalize(m);function U(){v.apply(this,arguments),t.Util.error('"'+m+'" method is deprecated and will be removed soon. Use ""'+_+'" instead.')}c.prototype[m]=U,c.prototype[b]=U,c.prototype[R]=U})},afterSetFilter(){this._filterUpToDate=!1}}}(Lp)),Lp}var yo={},_o={},S_;function n4(){if(S_)return _o;S_=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.HitContext=_o.SceneContext=_o.Context=void 0;const a=Yn(),t=ve();function n(K){const C=[],M=K.length,G=a.Util;for(let H=0;H<M;H++){let Y=K[H];G._isNumber(Y)?Y=Math.round(Y*1e3)/1e3:G._isString(Y)||(Y=Y+""),C.push(Y)}return C}const r=",",u="(",c=")",d="([",m="])",_=";",v="()",b="=",R=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],U=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],w=100;let O=class{constructor(C){this.canvas=C,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(C){C.fillEnabled()&&this._fill(C)}_fill(C){}strokeShape(C){C.hasStroke()&&this._stroke(C)}_stroke(C){}fillStrokeShape(C){C.attrs.fillAfterStrokeEnabled?(this.strokeShape(C),this.fillShape(C)):(this.fillShape(C),this.strokeShape(C))}getTrace(C,M){let G=this.traceArr,H=G.length,Y="",q,V,D,x;for(q=0;q<H;q++)V=G[q],D=V.method,D?(x=V.args,Y+=D,C?Y+=v:a.Util._isArray(x[0])?Y+=d+x.join(r)+m:(M&&(x=x.map(L=>typeof L=="number"?Math.floor(L):L)),Y+=u+x.join(r)+c)):(Y+=V.property,C||(Y+=b+V.val)),Y+=_;return Y}clearTrace(){this.traceArr=[]}_trace(C){let M=this.traceArr,G;M.push(C),G=M.length,G>=w&&M.shift()}reset(){const C=this.getCanvas().getPixelRatio();this.setTransform(1*C,0,0,1*C,0,0)}getCanvas(){return this.canvas}clear(C){const M=this.getCanvas();C?this.clearRect(C.x||0,C.y||0,C.width||0,C.height||0):this.clearRect(0,0,M.getWidth()/M.pixelRatio,M.getHeight()/M.pixelRatio)}_applyLineCap(C){const M=C.attrs.lineCap;M&&this.setAttr("lineCap",M)}_applyOpacity(C){const M=C.getAbsoluteOpacity();M!==1&&this.setAttr("globalAlpha",M)}_applyLineJoin(C){const M=C.attrs.lineJoin;M&&this.setAttr("lineJoin",M)}setAttr(C,M){this._context[C]=M}arc(C,M,G,H,Y,q){this._context.arc(C,M,G,H,Y,q)}arcTo(C,M,G,H,Y){this._context.arcTo(C,M,G,H,Y)}beginPath(){this._context.beginPath()}bezierCurveTo(C,M,G,H,Y,q){this._context.bezierCurveTo(C,M,G,H,Y,q)}clearRect(C,M,G,H){this._context.clearRect(C,M,G,H)}clip(...C){this._context.clip.apply(this._context,C)}closePath(){this._context.closePath()}createImageData(C,M){const G=arguments;if(G.length===2)return this._context.createImageData(C,M);if(G.length===1)return this._context.createImageData(C)}createLinearGradient(C,M,G,H){return this._context.createLinearGradient(C,M,G,H)}createPattern(C,M){return this._context.createPattern(C,M)}createRadialGradient(C,M,G,H,Y,q){return this._context.createRadialGradient(C,M,G,H,Y,q)}drawImage(C,M,G,H,Y,q,V,D,x){const L=arguments,j=this._context;L.length===3?j.drawImage(C,M,G):L.length===5?j.drawImage(C,M,G,H,Y):L.length===9&&j.drawImage(C,M,G,H,Y,q,V,D,x)}ellipse(C,M,G,H,Y,q,V,D){this._context.ellipse(C,M,G,H,Y,q,V,D)}isPointInPath(C,M,G,H){return G?this._context.isPointInPath(G,C,M,H):this._context.isPointInPath(C,M,H)}fill(...C){this._context.fill.apply(this._context,C)}fillRect(C,M,G,H){this._context.fillRect(C,M,G,H)}strokeRect(C,M,G,H){this._context.strokeRect(C,M,G,H)}fillText(C,M,G,H){H?this._context.fillText(C,M,G,H):this._context.fillText(C,M,G)}measureText(C){return this._context.measureText(C)}getImageData(C,M,G,H){return this._context.getImageData(C,M,G,H)}lineTo(C,M){this._context.lineTo(C,M)}moveTo(C,M){this._context.moveTo(C,M)}rect(C,M,G,H){this._context.rect(C,M,G,H)}roundRect(C,M,G,H,Y){this._context.roundRect(C,M,G,H,Y)}putImageData(C,M,G){this._context.putImageData(C,M,G)}quadraticCurveTo(C,M,G,H){this._context.quadraticCurveTo(C,M,G,H)}restore(){this._context.restore()}rotate(C){this._context.rotate(C)}save(){this._context.save()}scale(C,M){this._context.scale(C,M)}setLineDash(C){this._context.setLineDash?this._context.setLineDash(C):"mozDash"in this._context?this._context.mozDash=C:"webkitLineDash"in this._context&&(this._context.webkitLineDash=C)}getLineDash(){return this._context.getLineDash()}setTransform(C,M,G,H,Y,q){this._context.setTransform(C,M,G,H,Y,q)}stroke(C){C?this._context.stroke(C):this._context.stroke()}strokeText(C,M,G,H){this._context.strokeText(C,M,G,H)}transform(C,M,G,H,Y,q){this._context.transform(C,M,G,H,Y,q)}translate(C,M){this._context.translate(C,M)}_enableTrace(){let C=this,M=R.length,G=this.setAttr,H,Y;const q=function(V){let D=C[V],x;C[V]=function(){return Y=n(Array.prototype.slice.call(arguments,0)),x=D.apply(C,arguments),C._trace({method:V,args:Y}),x}};for(H=0;H<M;H++)q(R[H]);C.setAttr=function(){G.apply(C,arguments);const V=arguments[0];let D=arguments[1];(V==="shadowOffsetX"||V==="shadowOffsetY"||V==="shadowBlur")&&(D=D/this.canvas.getPixelRatio()),C._trace({property:V,val:D})}}_applyGlobalCompositeOperation(C){const M=C.attrs.globalCompositeOperation;!M||M==="source-over"||this.setAttr("globalCompositeOperation",M)}};_o.Context=O,U.forEach(function(K){Object.defineProperty(O.prototype,K,{get(){return this._context[K]},set(C){this._context[K]=C}})});class I extends O{constructor(C,{willReadFrequently:M=!1}={}){super(C),this._context=C._canvas.getContext("2d",{willReadFrequently:M})}_fillColor(C){const M=C.fill();this.setAttr("fillStyle",M),C._fillFunc(this)}_fillPattern(C){this.setAttr("fillStyle",C._getFillPattern()),C._fillFunc(this)}_fillLinearGradient(C){const M=C._getLinearGradient();M&&(this.setAttr("fillStyle",M),C._fillFunc(this))}_fillRadialGradient(C){const M=C._getRadialGradient();M&&(this.setAttr("fillStyle",M),C._fillFunc(this))}_fill(C){const M=C.fill(),G=C.getFillPriority();if(M&&G==="color"){this._fillColor(C);return}const H=C.getFillPatternImage();if(H&&G==="pattern"){this._fillPattern(C);return}const Y=C.getFillLinearGradientColorStops();if(Y&&G==="linear-gradient"){this._fillLinearGradient(C);return}const q=C.getFillRadialGradientColorStops();if(q&&G==="radial-gradient"){this._fillRadialGradient(C);return}M?this._fillColor(C):H?this._fillPattern(C):Y?this._fillLinearGradient(C):q&&this._fillRadialGradient(C)}_strokeLinearGradient(C){const M=C.getStrokeLinearGradientStartPoint(),G=C.getStrokeLinearGradientEndPoint(),H=C.getStrokeLinearGradientColorStops(),Y=this.createLinearGradient(M.x,M.y,G.x,G.y);if(H){for(let q=0;q<H.length;q+=2)Y.addColorStop(H[q],H[q+1]);this.setAttr("strokeStyle",Y)}}_stroke(C){const M=C.dash(),G=C.getStrokeScaleEnabled();if(C.hasStroke()){if(!G){this.save();const Y=this.getCanvas().getPixelRatio();this.setTransform(Y,0,0,Y,0,0)}this._applyLineCap(C),M&&C.dashEnabled()&&(this.setLineDash(M),this.setAttr("lineDashOffset",C.dashOffset())),this.setAttr("lineWidth",C.strokeWidth()),C.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),C.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(C):this.setAttr("strokeStyle",C.stroke()),C._strokeFunc(this),G||this.restore()}}_applyShadow(C){var M,G,H;const Y=(M=C.getShadowRGBA())!==null&&M!==void 0?M:"black",q=(G=C.getShadowBlur())!==null&&G!==void 0?G:5,V=(H=C.getShadowOffset())!==null&&H!==void 0?H:{x:0,y:0},D=C.getAbsoluteScale(),x=this.canvas.getPixelRatio(),L=D.x*x,j=D.y*x;this.setAttr("shadowColor",Y),this.setAttr("shadowBlur",q*Math.min(Math.abs(L),Math.abs(j))),this.setAttr("shadowOffsetX",V.x*L),this.setAttr("shadowOffsetY",V.y*j)}}_o.SceneContext=I;class P extends O{constructor(C){super(C),this._context=C._canvas.getContext("2d",{willReadFrequently:!0})}_fill(C){this.save(),this.setAttr("fillStyle",C.colorKey),C._fillFuncHit(this),this.restore()}strokeShape(C){C.hasHitStroke()&&this._stroke(C)}_stroke(C){if(C.hasHitStroke()){const M=C.getStrokeScaleEnabled();if(!M){this.save();const Y=this.getCanvas().getPixelRatio();this.setTransform(Y,0,0,Y,0,0)}this._applyLineCap(C);const G=C.hitStrokeWidth(),H=G==="auto"?C.strokeWidth():G;this.setAttr("lineWidth",H),this.setAttr("strokeStyle",C.colorKey),C._strokeFuncHit(this),M||this.restore()}}}return _o.HitContext=P,_o}var T_;function A0(){if(T_)return yo;T_=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.HitCanvas=yo.SceneCanvas=yo.Canvas=void 0;const a=Yn(),t=n4(),n=ve(),r=Ae(),u=Ce();let c;function d(){if(c)return c;const b=a.Util.createCanvasElement(),R=b.getContext("2d");return c=function(){const U=n.Konva._global.devicePixelRatio||1,w=R.webkitBackingStorePixelRatio||R.mozBackingStorePixelRatio||R.msBackingStorePixelRatio||R.oBackingStorePixelRatio||R.backingStorePixelRatio||1;return U/w}(),a.Util.releaseCanvas(b),c}let m=class{constructor(R){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const w=(R||{}).pixelRatio||n.Konva.pixelRatio||d();this.pixelRatio=w,this._canvas=a.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(R){const U=this.pixelRatio;this.pixelRatio=R,this.setSize(this.getWidth()/U,this.getHeight()/U)}setWidth(R){this.width=this._canvas.width=R*this.pixelRatio,this._canvas.style.width=R+"px";const U=this.pixelRatio;this.getContext()._context.scale(U,U)}setHeight(R){this.height=this._canvas.height=R*this.pixelRatio,this._canvas.style.height=R+"px";const U=this.pixelRatio;this.getContext()._context.scale(U,U)}getWidth(){return this.width}getHeight(){return this.height}setSize(R,U){this.setWidth(R||0),this.setHeight(U||0)}toDataURL(R,U){try{return this._canvas.toDataURL(R,U)}catch{try{return this._canvas.toDataURL()}catch(O){return a.Util.error("Unable to get data URL. "+O.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};yo.Canvas=m,r.Factory.addGetterSetter(m,"pixelRatio",void 0,(0,u.getNumberValidator)());class _ extends m{constructor(R={width:0,height:0,willReadFrequently:!1}){super(R),this.context=new t.SceneContext(this,{willReadFrequently:R.willReadFrequently}),this.setSize(R.width,R.height)}}yo.SceneCanvas=_;class v extends m{constructor(R={width:0,height:0}){super(R),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(R.width,R.height)}}return yo.HitCanvas=v,yo}var zp={},b_;function M1(){return b_||(b_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.DD=void 0;const t=ve(),n=Yn();a.DD={get isDragging(){let r=!1;return a.DD._dragElements.forEach(u=>{u.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return a.DD._dragElements.forEach(u=>{r=u.node}),r},_dragElements:new Map,_drag(r){const u=[];a.DD._dragElements.forEach((c,d)=>{const{node:m}=c,_=m.getStage();_.setPointersPositions(r),c.pointerId===void 0&&(c.pointerId=n.Util._getFirstPointerId(r));const v=_._changedPointerPositions.find(b=>b.id===c.pointerId);if(v){if(c.dragStatus!=="dragging"){const b=m.dragDistance();if(Math.max(Math.abs(v.x-c.startPointerPos.x),Math.abs(v.y-c.startPointerPos.y))<b||(m.startDrag({evt:r}),!m.isDragging()))return}m._setDragPosition(r,c),u.push(m)}}),u.forEach(c=>{c.fire("dragmove",{type:"dragmove",target:c,evt:r},!0)})},_endDragBefore(r){const u=[];a.DD._dragElements.forEach(c=>{const{node:d}=c,m=d.getStage();if(r&&m.setPointersPositions(r),!m._changedPointerPositions.find(b=>b.id===c.pointerId))return;(c.dragStatus==="dragging"||c.dragStatus==="stopped")&&(a.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,c.dragStatus="stopped");const v=c.node.getLayer()||c.node instanceof t.Konva.Stage&&c.node;v&&u.indexOf(v)===-1&&u.push(v)}),u.forEach(c=>{c.draw()})},_endDragAfter(r){a.DD._dragElements.forEach((u,c)=>{u.dragStatus==="stopped"&&u.node.fire("dragend",{type:"dragend",target:u.node,evt:r},!0),u.dragStatus!=="dragging"&&a.DD._dragElements.delete(c)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",a.DD._endDragBefore,!0),window.addEventListener("touchend",a.DD._endDragBefore,!0),window.addEventListener("touchcancel",a.DD._endDragBefore,!0),window.addEventListener("mousemove",a.DD._drag),window.addEventListener("touchmove",a.DD._drag),window.addEventListener("mouseup",a.DD._endDragAfter,!1),window.addEventListener("touchend",a.DD._endDragAfter,!1),window.addEventListener("touchcancel",a.DD._endDragAfter,!1))}(zp)),zp}var A_;function ei(){if(A_)return ud;A_=1,Object.defineProperty(ud,"__esModule",{value:!0}),ud.Node=void 0;const a=Yn(),t=Ae(),n=A0(),r=ve(),u=M1(),c=Ce(),d="absoluteOpacity",m="allEventListeners",_="absoluteTransform",v="absoluteScale",b="canvas",R="Change",U="children",w="konva",O="listening",I="mouseenter",P="mouseleave",K="set",C="Shape",M=" ",G="stage",H="transform",Y="Stage",q="visible",V=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(M);let D=1,x=class a1{constructor(T){this._id=D++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(T),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(T){(T===H||T===_)&&this._cache.get(T)?this._cache.get(T).dirty=!0:T?this._cache.delete(T):this._cache.clear()}_getCache(T,F){let k=this._cache.get(T);return(k===void 0||(T===H||T===_)&&k.dirty===!0)&&(k=F.call(this),this._cache.set(T,k)),k}_calculate(T,F,k){if(!this._attachedDepsListeners.get(T)){const X=F.map($=>$+"Change.konva").join(M);this.on(X,()=>{this._clearCache(T)}),this._attachedDepsListeners.set(T,!0)}return this._getCache(T,k)}_getCanvasCache(){return this._cache.get(b)}_clearSelfAndDescendantCache(T){this._clearCache(T),T===_&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(b)){const{scene:T,filter:F,hit:k}=this._cache.get(b);a.Util.releaseCanvas(T,F,k),this._cache.delete(b)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(T){const F=T||{};let k={};(F.x===void 0||F.y===void 0||F.width===void 0||F.height===void 0)&&(k=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let X=Math.ceil(F.width||k.width),$=Math.ceil(F.height||k.height),it=F.pixelRatio,ut=F.x===void 0?Math.floor(k.x):F.x,Q=F.y===void 0?Math.floor(k.y):F.y,at=F.offset||0,Et=F.drawBorder||!1,st=F.hitCanvasPixelRatio||1;if(!X||!$){a.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const gt=Math.abs(Math.round(k.x)-ut)>.5?1:0,Rt=Math.abs(Math.round(k.y)-Q)>.5?1:0;X+=at*2+gt,$+=at*2+Rt,ut-=at,Q-=at;const Nt=new n.SceneCanvas({pixelRatio:it,width:X,height:$}),et=new n.SceneCanvas({pixelRatio:it,width:0,height:0,willReadFrequently:!0}),ht=new n.HitCanvas({pixelRatio:st,width:X,height:$}),At=Nt.getContext(),Ct=ht.getContext();return ht.isCache=!0,Nt.isCache=!0,this._cache.delete(b),this._filterUpToDate=!1,F.imageSmoothingEnabled===!1&&(Nt.getContext()._context.imageSmoothingEnabled=!1,et.getContext()._context.imageSmoothingEnabled=!1),At.save(),Ct.save(),At.translate(-ut,-Q),Ct.translate(-ut,-Q),this._isUnderCache=!0,this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(v),this.drawScene(Nt,this),this.drawHit(ht,this),this._isUnderCache=!1,At.restore(),Ct.restore(),Et&&(At.save(),At.beginPath(),At.rect(0,0,X,$),At.closePath(),At.setAttr("strokeStyle","red"),At.setAttr("lineWidth",5),At.stroke(),At.restore()),this._cache.set(b,{scene:Nt,filter:et,hit:ht,x:ut,y:Q}),this._requestDraw(),this}isCached(){return this._cache.has(b)}getClientRect(T){throw new Error('abstract "getClientRect" method call')}_transformedRect(T,F){const k=[{x:T.x,y:T.y},{x:T.x+T.width,y:T.y},{x:T.x+T.width,y:T.y+T.height},{x:T.x,y:T.y+T.height}];let X=1/0,$=1/0,it=-1/0,ut=-1/0;const Q=this.getAbsoluteTransform(F);return k.forEach(function(at){const Et=Q.point(at);X===void 0&&(X=it=Et.x,$=ut=Et.y),X=Math.min(X,Et.x),$=Math.min($,Et.y),it=Math.max(it,Et.x),ut=Math.max(ut,Et.y)}),{x:X,y:$,width:it-X,height:ut-$}}_drawCachedSceneCanvas(T){T.save(),T._applyOpacity(this),T._applyGlobalCompositeOperation(this);const F=this._getCanvasCache();T.translate(F.x,F.y);const k=this._getCachedSceneCanvas(),X=k.pixelRatio;T.drawImage(k._canvas,0,0,k.width/X,k.height/X),T.restore()}_drawCachedHitCanvas(T){const F=this._getCanvasCache(),k=F.hit;T.save(),T.translate(F.x,F.y),T.drawImage(k._canvas,0,0,k.width/k.pixelRatio,k.height/k.pixelRatio),T.restore()}_getCachedSceneCanvas(){let T=this.filters(),F=this._getCanvasCache(),k=F.scene,X=F.filter,$=X.getContext(),it,ut,Q,at;if(T){if(!this._filterUpToDate){const Et=k.pixelRatio;X.setSize(k.width/k.pixelRatio,k.height/k.pixelRatio);try{for(it=T.length,$.clear(),$.drawImage(k._canvas,0,0,k.getWidth()/Et,k.getHeight()/Et),ut=$.getImageData(0,0,X.getWidth(),X.getHeight()),Q=0;Q<it;Q++){if(at=T[Q],typeof at!="function"){a.Util.error("Filter should be type of function, but got "+typeof at+" instead. Please check correct filters");continue}at.call(this,ut),$.putImageData(ut,0,0)}}catch(st){a.Util.error("Unable to apply filter. "+st.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return X}return k}on(T,F){if(this._cache&&this._cache.delete(m),arguments.length===3)return this._delegate.apply(this,arguments);let k=T.split(M),X=k.length,$,it,ut,Q,at;for($=0;$<X;$++)it=k[$],ut=it.split("."),Q=ut[0],at=ut[1]||"",this.eventListeners[Q]||(this.eventListeners[Q]=[]),this.eventListeners[Q].push({name:at,handler:F});return this}off(T,F){let k=(T||"").split(M),X=k.length,$,it,ut,Q,at,Et;if(this._cache&&this._cache.delete(m),!T)for(it in this.eventListeners)this._off(it);for($=0;$<X;$++)if(ut=k[$],Q=ut.split("."),at=Q[0],Et=Q[1],at)this.eventListeners[at]&&this._off(at,Et,F);else for(it in this.eventListeners)this._off(it,Et,F);return this}dispatchEvent(T){const F={target:this,type:T.type,evt:T};return this.fire(T.type,F),this}addEventListener(T,F){return this.on(T,function(k){F.call(this,k.evt)}),this}removeEventListener(T){return this.off(T),this}_delegate(T,F,k){const X=this;this.on(T,function($){const it=$.target.findAncestors(F,!0,X);for(let ut=0;ut<it.length;ut++)$=a.Util.cloneObject($),$.currentTarget=it[ut],k.call(it[ut],$)})}remove(){return this.isDragging()&&this.stopDrag(),u.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(_),this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(G),this._clearSelfAndDescendantCache(q),this._clearSelfAndDescendantCache(O)}_remove(){this._clearCaches();const T=this.getParent();T&&T.children&&(T.children.splice(this.index,1),T._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(T){const F="get"+a.Util._capitalize(T);return a.Util._isFunction(this[F])?this[F]():this.attrs[T]}getAncestors(){let T=this.getParent(),F=[];for(;T;)F.push(T),T=T.getParent();return F}getAttrs(){return this.attrs||{}}setAttrs(T){return this._batchTransformChanges(()=>{let F,k;if(!T)return this;for(F in T)F!==U&&(k=K+a.Util._capitalize(F),a.Util._isFunction(this[k])?this[k](T[F]):this._setAttr(F,T[F]))}),this}isListening(){return this._getCache(O,this._isListening)}_isListening(T){if(!this.listening())return!1;const k=this.getParent();return k&&k!==T&&this!==T?k._isListening(T):!0}isVisible(){return this._getCache(q,this._isVisible)}_isVisible(T){if(!this.visible())return!1;const k=this.getParent();return k&&k!==T&&this!==T?k._isVisible(T):!0}shouldDrawHit(T,F=!1){if(T)return this._isVisible(T)&&this._isListening(T);const k=this.getLayer();let X=!1;u.DD._dragElements.forEach(it=>{it.dragStatus==="dragging"&&(it.node.nodeType==="Stage"||it.node.getLayer()===k)&&(X=!0)});const $=!F&&!r.Konva.hitOnDragEnabled&&(X||r.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!$}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let T=this.getDepth(),F=this,k=0,X,$,it,ut;function Q(Et){for(X=[],$=Et.length,it=0;it<$;it++)ut=Et[it],k++,ut.nodeType!==C&&(X=X.concat(ut.getChildren().slice())),ut._id===F._id&&(it=$);X.length>0&&X[0].getDepth()<=T&&Q(X)}const at=this.getStage();return F.nodeType!==Y&&at&&Q(at.getChildren()),k}getDepth(){let T=0,F=this.parent;for(;F;)T++,F=F.parent;return T}_batchTransformChanges(T){this._batchingTransformChange=!0,T(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(H),this._clearSelfAndDescendantCache(_)),this._needClearTransformCache=!1}setPosition(T){return this._batchTransformChanges(()=>{this.x(T.x),this.y(T.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const T=this.getStage();if(!T)return null;const F=T.getPointerPosition();if(!F)return null;const k=this.getAbsoluteTransform().copy();return k.invert(),k.point(F)}getAbsolutePosition(T){let F=!1,k=this.parent;for(;k;){if(k.isCached()){F=!0;break}k=k.parent}F&&!T&&(T=!0);const X=this.getAbsoluteTransform(T).getMatrix(),$=new a.Transform,it=this.offset();return $.m=X.slice(),$.translate(it.x,it.y),$.getTranslation()}setAbsolutePosition(T){const{x:F,y:k,...X}=this._clearTransform();this.attrs.x=F,this.attrs.y=k,this._clearCache(H);const $=this._getAbsoluteTransform().copy();return $.invert(),$.translate(T.x,T.y),T={x:this.attrs.x+$.getTranslation().x,y:this.attrs.y+$.getTranslation().y},this._setTransform(X),this.setPosition({x:T.x,y:T.y}),this._clearCache(H),this._clearSelfAndDescendantCache(_),this}_setTransform(T){let F;for(F in T)this.attrs[F]=T[F]}_clearTransform(){const T={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,T}move(T){let F=T.x,k=T.y,X=this.x(),$=this.y();return F!==void 0&&(X+=F),k!==void 0&&($+=k),this.setPosition({x:X,y:$}),this}_eachAncestorReverse(T,F){let k=[],X=this.getParent(),$,it;if(!(F&&F._id===this._id)){for(k.unshift(this);X&&(!F||X._id!==F._id);)k.unshift(X),X=X.parent;for($=k.length,it=0;it<$;it++)T(k[it])}}rotate(T){return this.rotation(this.rotation()+T),this}moveToTop(){if(!this.parent)return a.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const T=this.index,F=this.parent.getChildren().length;return T<F-1?(this.parent.children.splice(T,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return a.Util.warn("Node has no parent. moveUp function is ignored."),!1;const T=this.index,F=this.parent.getChildren().length;return T<F-1?(this.parent.children.splice(T,1),this.parent.children.splice(T+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return a.Util.warn("Node has no parent. moveDown function is ignored."),!1;const T=this.index;return T>0?(this.parent.children.splice(T,1),this.parent.children.splice(T-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return a.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const T=this.index;return T>0?(this.parent.children.splice(T,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(T){if(!this.parent)return a.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(T<0||T>=this.parent.children.length)&&a.Util.warn("Unexpected value "+T+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const F=this.index;return this.parent.children.splice(F,1),this.parent.children.splice(T,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(d,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let T=this.opacity();const F=this.getParent();return F&&!F._isUnderCache&&(T*=F.getAbsoluteOpacity()),T}moveTo(T){return this.getParent()!==T&&(this._remove(),T.add(this)),this}toObject(){let T=this.getAttrs(),F,k,X,$,it;const ut={attrs:{},className:this.getClassName()};for(F in T)k=T[F],it=a.Util.isObject(k)&&!a.Util._isPlainObject(k)&&!a.Util._isArray(k),!it&&(X=typeof this[F]=="function"&&this[F],delete T[F],$=X?X.call(this):null,T[F]=k,$!==k&&(ut.attrs[F]=k));return a.Util._prepareToStringify(ut)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(T,F,k){const X=[];F&&this._isMatch(T)&&X.push(this);let $=this.parent;for(;$;){if($===k)return X;$._isMatch(T)&&X.push($),$=$.parent}return X}isAncestorOf(T){return!1}findAncestor(T,F,k){return this.findAncestors(T,F,k)[0]}_isMatch(T){if(!T)return!1;if(typeof T=="function")return T(this);let F=T.replace(/ /g,"").split(","),k=F.length,X,$;for(X=0;X<k;X++)if($=F[X],a.Util.isValidSelector($)||(a.Util.warn('Selector "'+$+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),a.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),a.Util.warn("Konva is awesome, right?")),$.charAt(0)==="#"){if(this.id()===$.slice(1))return!0}else if($.charAt(0)==="."){if(this.hasName($.slice(1)))return!0}else if(this.className===$||this.nodeType===$)return!0;return!1}getLayer(){const T=this.getParent();return T?T.getLayer():null}getStage(){return this._getCache(G,this._getStage)}_getStage(){const T=this.getParent();return T?T.getStage():null}fire(T,F={},k){return F.target=F.target||this,k?this._fireAndBubble(T,F):this._fire(T,F),this}getAbsoluteTransform(T){return T?this._getAbsoluteTransform(T):this._getCache(_,this._getAbsoluteTransform)}_getAbsoluteTransform(T){let F;if(T)return F=new a.Transform,this._eachAncestorReverse(function(k){const X=k.transformsEnabled();X==="all"?F.multiply(k.getTransform()):X==="position"&&F.translate(k.x()-k.offsetX(),k.y()-k.offsetY())},T),F;{F=this._cache.get(_)||new a.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(F):F.reset();const k=this.transformsEnabled();if(k==="all")F.multiply(this.getTransform());else if(k==="position"){const X=this.attrs.x||0,$=this.attrs.y||0,it=this.attrs.offsetX||0,ut=this.attrs.offsetY||0;F.translate(X-it,$-ut)}return F.dirty=!1,F}}getAbsoluteScale(T){let F=this;for(;F;)F._isUnderCache&&(T=F),F=F.getParent();const X=this.getAbsoluteTransform(T).decompose();return{x:X.scaleX,y:X.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(H,this._getTransform)}_getTransform(){var T,F;const k=this._cache.get(H)||new a.Transform;k.reset();const X=this.x(),$=this.y(),it=r.Konva.getAngle(this.rotation()),ut=(T=this.attrs.scaleX)!==null&&T!==void 0?T:1,Q=(F=this.attrs.scaleY)!==null&&F!==void 0?F:1,at=this.attrs.skewX||0,Et=this.attrs.skewY||0,st=this.attrs.offsetX||0,gt=this.attrs.offsetY||0;return(X!==0||$!==0)&&k.translate(X,$),it!==0&&k.rotate(it),(at!==0||Et!==0)&&k.skew(at,Et),(ut!==1||Q!==1)&&k.scale(ut,Q),(st!==0||gt!==0)&&k.translate(-1*st,-1*gt),k.dirty=!1,k}clone(T){let F=a.Util.cloneObject(this.attrs),k,X,$,it,ut;for(k in T)F[k]=T[k];const Q=new this.constructor(F);for(k in this.eventListeners)for(X=this.eventListeners[k],$=X.length,it=0;it<$;it++)ut=X[it],ut.name.indexOf(w)<0&&(Q.eventListeners[k]||(Q.eventListeners[k]=[]),Q.eventListeners[k].push(ut));return Q}_toKonvaCanvas(T){T=T||{};const F=this.getClientRect(),k=this.getStage(),X=T.x!==void 0?T.x:Math.floor(F.x),$=T.y!==void 0?T.y:Math.floor(F.y),it=T.pixelRatio||1,ut=new n.SceneCanvas({width:T.width||Math.ceil(F.width)||(k?k.width():0),height:T.height||Math.ceil(F.height)||(k?k.height():0),pixelRatio:it}),Q=ut.getContext(),at=new n.SceneCanvas({width:ut.width/ut.pixelRatio+Math.abs(X),height:ut.height/ut.pixelRatio+Math.abs($),pixelRatio:ut.pixelRatio});return T.imageSmoothingEnabled===!1&&(Q._context.imageSmoothingEnabled=!1),Q.save(),(X||$)&&Q.translate(-1*X,-1*$),this.drawScene(ut,void 0,at),Q.restore(),ut}toCanvas(T){return this._toKonvaCanvas(T)._canvas}toDataURL(T){T=T||{};const F=T.mimeType||null,k=T.quality||null,X=this._toKonvaCanvas(T).toDataURL(F,k);return T.callback&&T.callback(X),X}toImage(T){return new Promise((F,k)=>{try{const X=T==null?void 0:T.callback;X&&delete T.callback,a.Util._urlToImage(this.toDataURL(T),function($){F($),X==null||X($)})}catch(X){k(X)}})}toBlob(T){return new Promise((F,k)=>{try{const X=T==null?void 0:T.callback;X&&delete T.callback,this.toCanvas(T).toBlob($=>{F($),X==null||X($)},T==null?void 0:T.mimeType,T==null?void 0:T.quality)}catch(X){k(X)}})}setSize(T){return this.width(T.width),this.height(T.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():r.Konva.dragDistance}_off(T,F,k){let X=this.eventListeners[T],$,it,ut;for($=0;$<X.length;$++)if(it=X[$].name,ut=X[$].handler,(it!=="konva"||F==="konva")&&(!F||it===F)&&(!k||k===ut)){if(X.splice($,1),X.length===0){delete this.eventListeners[T];break}$--}}_fireChangeEvent(T,F,k){this._fire(T+R,{oldVal:F,newVal:k})}addName(T){if(!this.hasName(T)){const F=this.name(),k=F?F+" "+T:T;this.name(k)}return this}hasName(T){if(!T)return!1;const F=this.name();return F?(F||"").split(/\s/g).indexOf(T)!==-1:!1}removeName(T){const F=(this.name()||"").split(/\s/g),k=F.indexOf(T);return k!==-1&&(F.splice(k,1),this.name(F.join(" "))),this}setAttr(T,F){const k=this[K+a.Util._capitalize(T)];return a.Util._isFunction(k)?k.call(this,F):this._setAttr(T,F),this}_requestDraw(){if(r.Konva.autoDrawEnabled){const T=this.getLayer()||this.getStage();T==null||T.batchDraw()}}_setAttr(T,F){const k=this.attrs[T];k===F&&!a.Util.isObject(F)||(F==null?delete this.attrs[T]:this.attrs[T]=F,this._shouldFireChangeEvents&&this._fireChangeEvent(T,k,F),this._requestDraw())}_setComponentAttr(T,F,k){let X;k!==void 0&&(X=this.attrs[T],X||(this.attrs[T]=this.getAttr(T)),this.attrs[T][F]=k,this._fireChangeEvent(T,X,k))}_fireAndBubble(T,F,k){if(F&&this.nodeType===C&&(F.target=this),!((T===I||T===P)&&(k&&(this===k||this.isAncestorOf&&this.isAncestorOf(k))||this.nodeType==="Stage"&&!k))){this._fire(T,F);const $=(T===I||T===P)&&k&&k.isAncestorOf&&k.isAncestorOf(this)&&!k.isAncestorOf(this.parent);(F&&!F.cancelBubble||!F)&&this.parent&&this.parent.isListening()&&!$&&(k&&k.parent?this._fireAndBubble.call(this.parent,T,F,k):this._fireAndBubble.call(this.parent,T,F))}}_getProtoListeners(T){var F,k,X;const $=(F=this._cache.get(m))!==null&&F!==void 0?F:{};let it=$==null?void 0:$[T];if(it===void 0){it=[];let ut=Object.getPrototypeOf(this);for(;ut;){const Q=(X=(k=ut.eventListeners)===null||k===void 0?void 0:k[T])!==null&&X!==void 0?X:[];it.push(...Q),ut=Object.getPrototypeOf(ut)}$[T]=it,this._cache.set(m,$)}return it}_fire(T,F){F=F||{},F.currentTarget=this,F.type=T;const k=this._getProtoListeners(T);if(k)for(var X=0;X<k.length;X++)k[X].handler.call(this,F);const $=this.eventListeners[T];if($)for(var X=0;X<$.length;X++)$[X].handler.call(this,F)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(T){const F=T?T.pointerId:void 0,k=this.getStage(),X=this.getAbsolutePosition();if(!k)return;const $=k._getPointerById(F)||k._changedPointerPositions[0]||X;u.DD._dragElements.set(this._id,{node:this,startPointerPos:$,offset:{x:$.x-X.x,y:$.y-X.y},dragStatus:"ready",pointerId:F})}startDrag(T,F=!0){u.DD._dragElements.has(this._id)||this._createDragElement(T);const k=u.DD._dragElements.get(this._id);k.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:T&&T.evt},F)}_setDragPosition(T,F){const k=this.getStage()._getPointerById(F.pointerId);if(!k)return;let X={x:k.x-F.offset.x,y:k.y-F.offset.y};const $=this.dragBoundFunc();if($!==void 0){const it=$.call(this,X,T);it?X=it:a.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==X.x||this._lastPos.y!==X.y)&&(this.setAbsolutePosition(X),this._requestDraw()),this._lastPos=X}stopDrag(T){const F=u.DD._dragElements.get(this._id);F&&(F.dragStatus="stopped"),u.DD._endDragBefore(T),u.DD._endDragAfter(T)}setDraggable(T){this._setAttr("draggable",T),this._dragChange()}isDragging(){const T=u.DD._dragElements.get(this._id);return T?T.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(T){if(!(!(T.evt.button!==void 0)||r.Konva.dragButtons.indexOf(T.evt.button)>=0)||this.isDragging())return;let X=!1;u.DD._dragElements.forEach($=>{this.isAncestorOf($.node)&&(X=!0)}),X||this._createDragElement(T)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const F=u.DD._dragElements.get(this._id),k=F&&F.dragStatus==="dragging",X=F&&F.dragStatus==="ready";k?this.stopDrag():X&&u.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(T={x:0,y:0}){const F=this.getStage();if(!F)return!1;const k={x:-T.x,y:-T.y,width:F.width()+2*T.x,height:F.height()+2*T.y};return a.Util.haveIntersection(k,this.getClientRect())}static create(T,F){return a.Util._isString(T)&&(T=JSON.parse(T)),this._createNode(T,F)}static _createNode(T,F){let k=a1.prototype.getClassName.call(T),X=T.children,$,it,ut;F&&(T.attrs.container=F),r.Konva[k]||(a.Util.warn('Can not find a node with class name "'+k+'". Fallback to "Shape".'),k="Shape");const Q=r.Konva[k];if($=new Q(T.attrs),X)for(it=X.length,ut=0;ut<it;ut++)$.add(a1._createNode(X[ut]));return $}};ud.Node=x,x.prototype.nodeType="Node",x.prototype._attrsAffectingSize=[],x.prototype.eventListeners={},x.prototype.on.call(x.prototype,V,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(H),this._clearSelfAndDescendantCache(_)}),x.prototype.on.call(x.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(q)}),x.prototype.on.call(x.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(O)}),x.prototype.on.call(x.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(d)});const L=t.Factory.addGetterSetter;return L(x,"zIndex"),L(x,"absolutePosition"),L(x,"position"),L(x,"x",0,(0,c.getNumberValidator)()),L(x,"y",0,(0,c.getNumberValidator)()),L(x,"globalCompositeOperation","source-over",(0,c.getStringValidator)()),L(x,"opacity",1,(0,c.getNumberValidator)()),L(x,"name","",(0,c.getStringValidator)()),L(x,"id","",(0,c.getStringValidator)()),L(x,"rotation",0,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(x,"scale",["x","y"]),L(x,"scaleX",1,(0,c.getNumberValidator)()),L(x,"scaleY",1,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(x,"skew",["x","y"]),L(x,"skewX",0,(0,c.getNumberValidator)()),L(x,"skewY",0,(0,c.getNumberValidator)()),t.Factory.addComponentsGetterSetter(x,"offset",["x","y"]),L(x,"offsetX",0,(0,c.getNumberValidator)()),L(x,"offsetY",0,(0,c.getNumberValidator)()),L(x,"dragDistance",void 0,(0,c.getNumberValidator)()),L(x,"width",0,(0,c.getNumberValidator)()),L(x,"height",0,(0,c.getNumberValidator)()),L(x,"listening",!0,(0,c.getBooleanValidator)()),L(x,"preventDefault",!0,(0,c.getBooleanValidator)()),L(x,"filters",void 0,function(j){return this._filterUpToDate=!1,j}),L(x,"visible",!0,(0,c.getBooleanValidator)()),L(x,"transformsEnabled","all",(0,c.getStringValidator)()),L(x,"size"),L(x,"dragBoundFunc"),L(x,"draggable",!1,(0,c.getBooleanValidator)()),t.Factory.backCompat(x,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),ud}var cd={},R_;function R0(){if(R_)return cd;R_=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.Container=void 0;const a=Ae(),t=ei(),n=Ce();let r=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(c){if(!c)return this.children||[];const d=this.children||[],m=[];return d.forEach(function(_){c(_)&&m.push(_)}),m}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(c=>{c.parent=null,c.index=0,c.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(c=>{c.parent=null,c.index=0,c.destroy()}),this.children=[],this._requestDraw(),this}add(...c){if(c.length===0)return this;if(c.length>1){for(let m=0;m<c.length;m++)this.add(c[m]);return this}const d=c[0];return d.getParent()?(d.moveTo(this),this):(this._validateAdd(d),d.index=this.getChildren().length,d.parent=this,d._clearCaches(),this.getChildren().push(d),this._fire("add",{child:d}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(c){return this._generalFind(c,!1)}findOne(c){const d=this._generalFind(c,!0);return d.length>0?d[0]:void 0}_generalFind(c,d){const m=[];return this._descendants(_=>{const v=_._isMatch(c);return v&&m.push(_),!!(v&&d)}),m}_descendants(c){let d=!1;const m=this.getChildren();for(const _ of m){if(d=c(_),d)return!0;if(_.hasChildren()&&(d=_._descendants(c),d))return!0}return!1}toObject(){const c=t.Node.prototype.toObject.call(this);return c.children=[],this.getChildren().forEach(d=>{c.children.push(d.toObject())}),c}isAncestorOf(c){let d=c.getParent();for(;d;){if(d._id===this._id)return!0;d=d.getParent()}return!1}clone(c){const d=t.Node.prototype.clone.call(this,c);return this.getChildren().forEach(function(m){d.add(m.clone())}),d}getAllIntersections(c){const d=[];return this.find("Shape").forEach(m=>{m.isVisible()&&m.intersects(c)&&d.push(m)}),d}_clearSelfAndDescendantCache(c){var d;super._clearSelfAndDescendantCache(c),!this.isCached()&&((d=this.children)===null||d===void 0||d.forEach(function(m){m._clearSelfAndDescendantCache(c)}))}_setChildrenIndices(){var c;(c=this.children)===null||c===void 0||c.forEach(function(d,m){d.index=m}),this._requestDraw()}drawScene(c,d,m){const _=this.getLayer(),v=c||_&&_.getCanvas(),b=v&&v.getContext(),R=this._getCanvasCache(),U=R&&R.scene,w=v&&v.isCache;if(!this.isVisible()&&!w)return this;if(U){b.save();const O=this.getAbsoluteTransform(d).getMatrix();b.transform(O[0],O[1],O[2],O[3],O[4],O[5]),this._drawCachedSceneCanvas(b),b.restore()}else this._drawChildren("drawScene",v,d,m);return this}drawHit(c,d){if(!this.shouldDrawHit(d))return this;const m=this.getLayer(),_=c||m&&m.hitCanvas,v=_&&_.getContext(),b=this._getCanvasCache();if(b&&b.hit){v.save();const U=this.getAbsoluteTransform(d).getMatrix();v.transform(U[0],U[1],U[2],U[3],U[4],U[5]),this._drawCachedHitCanvas(v),v.restore()}else this._drawChildren("drawHit",_,d);return this}_drawChildren(c,d,m,_){var v;const b=d&&d.getContext(),R=this.clipWidth(),U=this.clipHeight(),w=this.clipFunc(),O=typeof R=="number"&&typeof U=="number"||w,I=m===this;if(O){b.save();const K=this.getAbsoluteTransform(m);let C=K.getMatrix();b.transform(C[0],C[1],C[2],C[3],C[4],C[5]),b.beginPath();let M;if(w)M=w.call(this,b,this);else{const G=this.clipX(),H=this.clipY();b.rect(G||0,H||0,R,U)}b.clip.apply(b,M),C=K.copy().invert().getMatrix(),b.transform(C[0],C[1],C[2],C[3],C[4],C[5])}const P=!I&&this.globalCompositeOperation()!=="source-over"&&c==="drawScene";P&&(b.save(),b._applyGlobalCompositeOperation(this)),(v=this.children)===null||v===void 0||v.forEach(function(K){K[c](d,m,_)}),P&&b.restore(),O&&b.restore()}getClientRect(c={}){var d;const m=c.skipTransform,_=c.relativeTo;let v,b,R,U,w={x:1/0,y:1/0,width:0,height:0};const O=this;(d=this.children)===null||d===void 0||d.forEach(function(K){if(!K.visible())return;const C=K.getClientRect({relativeTo:O,skipShadow:c.skipShadow,skipStroke:c.skipStroke});C.width===0&&C.height===0||(v===void 0?(v=C.x,b=C.y,R=C.x+C.width,U=C.y+C.height):(v=Math.min(v,C.x),b=Math.min(b,C.y),R=Math.max(R,C.x+C.width),U=Math.max(U,C.y+C.height)))});const I=this.find("Shape");let P=!1;for(let K=0;K<I.length;K++)if(I[K]._isVisible(this)){P=!0;break}return P&&v!==void 0?w={x:v,y:b,width:R-v,height:U-b}:w={x:0,y:0,width:0,height:0},m?w:this._transformedRect(w,_)}};return cd.Container=r,a.Factory.addComponentsGetterSetter(r,"clip",["x","y","width","height"]),a.Factory.addGetterSetter(r,"clipX",void 0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(r,"clipY",void 0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(r,"clipWidth",void 0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(r,"clipHeight",void 0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(r,"clipFunc"),cd}var Pp={},_u={},C_;function i4(){if(C_)return _u;C_=1,Object.defineProperty(_u,"__esModule",{value:!0}),_u.getCapturedShape=r,_u.createEvent=u,_u.hasPointerCapture=c,_u.setPointerCapture=d,_u.releaseCapture=m;const a=ve(),t=new Map,n=a.Konva._global.PointerEvent!==void 0;function r(_){return t.get(_)}function u(_){return{evt:_,pointerId:_.pointerId}}function c(_,v){return t.get(_)===v}function d(_,v){m(_),v.getStage()&&(t.set(_,v),n&&v._fire("gotpointercapture",u(new PointerEvent("gotpointercapture"))))}function m(_,v){const b=t.get(_);if(!b)return;const R=b.getStage();R&&R.content,t.delete(_),n&&b._fire("lostpointercapture",u(new PointerEvent("lostpointercapture")))}return _u}var D_;function E5(){return D_||(D_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Stage=a.stages=void 0;const t=Yn(),n=Ae(),r=R0(),u=ve(),c=A0(),d=M1(),m=ve(),_=i4(),v="Stage",b="string",R="px",U="mouseout",w="mouseleave",O="mouseover",I="mouseenter",P="mousemove",K="mousedown",C="mouseup",M="pointermove",G="pointerdown",H="pointerup",Y="pointercancel",q="lostpointercapture",V="pointerout",D="pointerleave",x="pointerover",L="pointerenter",j="contextmenu",T="touchstart",F="touchend",k="touchmove",X="touchcancel",$="wheel",it=5,ut=[[I,"_pointerenter"],[K,"_pointerdown"],[P,"_pointermove"],[C,"_pointerup"],[w,"_pointerleave"],[T,"_pointerdown"],[k,"_pointermove"],[F,"_pointerup"],[X,"_pointercancel"],[O,"_pointerover"],[$,"_wheel"],[j,"_contextmenu"],[G,"_pointerdown"],[M,"_pointermove"],[H,"_pointerup"],[Y,"_pointercancel"],[q,"_lostpointercapture"]],Q={mouse:{[V]:U,[D]:w,[x]:O,[L]:I,[M]:P,[G]:K,[H]:C,[Y]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[V]:"touchout",[D]:"touchleave",[x]:"touchover",[L]:"touchenter",[M]:k,[G]:T,[H]:F,[Y]:X,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[V]:V,[D]:D,[x]:x,[L]:L,[M]:M,[G]:G,[H]:H,[Y]:Y,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},at=Nt=>Nt.indexOf("pointer")>=0?"pointer":Nt.indexOf("touch")>=0?"touch":"mouse",Et=Nt=>{const et=at(Nt);if(et==="pointer")return u.Konva.pointerEventsEnabled&&Q.pointer;if(et==="touch")return Q.touch;if(et==="mouse")return Q.mouse};function st(Nt={}){return(Nt.clipFunc||Nt.clipWidth||Nt.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),Nt}const gt="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";a.stages=[];class Rt extends r.Container{constructor(et){super(st(et)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),a.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{st(this.attrs)}),this._checkVisibility()}_validateAdd(et){const ht=et.getType()==="Layer",At=et.getType()==="FastLayer";ht||At||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const et=this.visible()?"":"none";this.content.style.display=et}setContainer(et){if(typeof et===b){if(et.charAt(0)==="."){const At=et.slice(1);et=document.getElementsByClassName(At)[0]}else{var ht;et.charAt(0)!=="#"?ht=et:ht=et.slice(1),et=document.getElementById(ht)}if(!et)throw"Can not find container in document with id "+ht}return this._setAttr("container",et),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),et.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const et=this.children,ht=et.length;for(let At=0;At<ht;At++)et[At].clear();return this}clone(et){return et||(et={}),et.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,et)}destroy(){super.destroy();const et=this.content;et&&t.Util._isInDocument(et)&&this.container().removeChild(et);const ht=a.stages.indexOf(this);return ht>-1&&a.stages.splice(ht,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const et=this._pointerPositions[0]||this._changedPointerPositions[0];return et?{x:et.x,y:et.y}:(t.Util.warn(gt),null)}_getPointerById(et){return this._pointerPositions.find(ht=>ht.id===et)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(et){et=et||{},et.x=et.x||0,et.y=et.y||0,et.width=et.width||this.width(),et.height=et.height||this.height();const ht=new c.SceneCanvas({width:et.width,height:et.height,pixelRatio:et.pixelRatio||1}),At=ht.getContext()._context,Ct=this.children;return(et.x||et.y)&&At.translate(-1*et.x,-1*et.y),Ct.forEach(function(It){if(!It.isVisible())return;const Pt=It._toKonvaCanvas(et);At.drawImage(Pt._canvas,et.x,et.y,Pt.getWidth()/Pt.getPixelRatio(),Pt.getHeight()/Pt.getPixelRatio())}),ht}getIntersection(et){if(!et)return null;const ht=this.children,At=ht.length,Ct=At-1;for(let It=Ct;It>=0;It--){const Pt=ht[It].getIntersection(et);if(Pt)return Pt}return null}_resizeDOM(){const et=this.width(),ht=this.height();this.content&&(this.content.style.width=et+R,this.content.style.height=ht+R),this.bufferCanvas.setSize(et,ht),this.bufferHitCanvas.setSize(et,ht),this.children.forEach(At=>{At.setSize({width:et,height:ht}),At.draw()})}add(et,...ht){if(arguments.length>1){for(let Ct=0;Ct<arguments.length;Ct++)this.add(arguments[Ct]);return this}super.add(et);const At=this.children.length;return At>it&&t.Util.warn("The stage has "+At+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),et.setSize({width:this.width(),height:this.height()}),et.draw(),u.Konva.isBrowser&&this.content.appendChild(et.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(et){return _.hasPointerCapture(et,this)}setPointerCapture(et){_.setPointerCapture(et,this)}releaseCapture(et){_.releaseCapture(et,this)}getLayers(){return this.children}_bindContentEvents(){u.Konva.isBrowser&&ut.forEach(([et,ht])=>{this.content.addEventListener(et,At=>{this[ht](At)},{passive:!1})})}_pointerenter(et){this.setPointersPositions(et);const ht=Et(et.type);ht&&this._fire(ht.pointerenter,{evt:et,target:this,currentTarget:this})}_pointerover(et){this.setPointersPositions(et);const ht=Et(et.type);ht&&this._fire(ht.pointerover,{evt:et,target:this,currentTarget:this})}_getTargetShape(et){let ht=this[et+"targetShape"];return ht&&!ht.getStage()&&(ht=null),ht}_pointerleave(et){const ht=Et(et.type),At=at(et.type);if(!ht)return;this.setPointersPositions(et);const Ct=this._getTargetShape(At),It=!(u.Konva.isDragging()||u.Konva.isTransforming())||u.Konva.hitOnDragEnabled;Ct&&It?(Ct._fireAndBubble(ht.pointerout,{evt:et}),Ct._fireAndBubble(ht.pointerleave,{evt:et}),this._fire(ht.pointerleave,{evt:et,target:this,currentTarget:this}),this[At+"targetShape"]=null):It&&(this._fire(ht.pointerleave,{evt:et,target:this,currentTarget:this}),this._fire(ht.pointerout,{evt:et,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(et){const ht=Et(et.type),At=at(et.type);if(!ht)return;this.setPointersPositions(et);let Ct=!1;this._changedPointerPositions.forEach(It=>{const Pt=this.getIntersection(It);if(d.DD.justDragged=!1,u.Konva["_"+At+"ListenClick"]=!0,!Pt||!Pt.isListening()){this[At+"ClickStartShape"]=void 0;return}u.Konva.capturePointerEventsEnabled&&Pt.setPointerCapture(It.id),this[At+"ClickStartShape"]=Pt,Pt._fireAndBubble(ht.pointerdown,{evt:et,pointerId:It.id}),Ct=!0;const $t=et.type.indexOf("touch")>=0;Pt.preventDefault()&&et.cancelable&&$t&&et.preventDefault()}),Ct||this._fire(ht.pointerdown,{evt:et,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(et){const ht=Et(et.type),At=at(et.type);if(!ht||(u.Konva.isDragging()&&d.DD.node.preventDefault()&&et.cancelable&&et.preventDefault(),this.setPointersPositions(et),!(!(u.Konva.isDragging()||u.Konva.isTransforming())||u.Konva.hitOnDragEnabled)))return;const It={};let Pt=!1;const $t=this._getTargetShape(At);this._changedPointerPositions.forEach(ue=>{const Yt=_.getCapturedShape(ue.id)||this.getIntersection(ue),Fe=ue.id,oe={evt:et,pointerId:Fe},Ke=$t!==Yt;if(Ke&&$t&&($t._fireAndBubble(ht.pointerout,{...oe},Yt),$t._fireAndBubble(ht.pointerleave,{...oe},Yt)),Yt){if(It[Yt._id])return;It[Yt._id]=!0}Yt&&Yt.isListening()?(Pt=!0,Ke&&(Yt._fireAndBubble(ht.pointerover,{...oe},$t),Yt._fireAndBubble(ht.pointerenter,{...oe},$t),this[At+"targetShape"]=Yt),Yt._fireAndBubble(ht.pointermove,{...oe})):$t&&(this._fire(ht.pointerover,{evt:et,target:this,currentTarget:this,pointerId:Fe}),this[At+"targetShape"]=null)}),Pt||this._fire(ht.pointermove,{evt:et,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(et){const ht=Et(et.type),At=at(et.type);if(!ht)return;this.setPointersPositions(et);const Ct=this[At+"ClickStartShape"],It=this[At+"ClickEndShape"],Pt={};let $t=!1;this._changedPointerPositions.forEach(ue=>{const Yt=_.getCapturedShape(ue.id)||this.getIntersection(ue);if(Yt){if(Yt.releaseCapture(ue.id),Pt[Yt._id])return;Pt[Yt._id]=!0}const Fe=ue.id,oe={evt:et,pointerId:Fe};let Ke=!1;u.Konva["_"+At+"InDblClickWindow"]?(Ke=!0,clearTimeout(this[At+"DblTimeout"])):d.DD.justDragged||(u.Konva["_"+At+"InDblClickWindow"]=!0,clearTimeout(this[At+"DblTimeout"])),this[At+"DblTimeout"]=setTimeout(function(){u.Konva["_"+At+"InDblClickWindow"]=!1},u.Konva.dblClickWindow),Yt&&Yt.isListening()?($t=!0,this[At+"ClickEndShape"]=Yt,Yt._fireAndBubble(ht.pointerup,{...oe}),u.Konva["_"+At+"ListenClick"]&&Ct&&Ct===Yt&&(Yt._fireAndBubble(ht.pointerclick,{...oe}),Ke&&It&&It===Yt&&Yt._fireAndBubble(ht.pointerdblclick,{...oe}))):(this[At+"ClickEndShape"]=null,u.Konva["_"+At+"ListenClick"]&&this._fire(ht.pointerclick,{evt:et,target:this,currentTarget:this,pointerId:Fe}),Ke&&this._fire(ht.pointerdblclick,{evt:et,target:this,currentTarget:this,pointerId:Fe}))}),$t||this._fire(ht.pointerup,{evt:et,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),u.Konva["_"+At+"ListenClick"]=!1,et.cancelable&&At!=="touch"&&At!=="pointer"&&et.preventDefault()}_contextmenu(et){this.setPointersPositions(et);const ht=this.getIntersection(this.getPointerPosition());ht&&ht.isListening()?ht._fireAndBubble(j,{evt:et}):this._fire(j,{evt:et,target:this,currentTarget:this})}_wheel(et){this.setPointersPositions(et);const ht=this.getIntersection(this.getPointerPosition());ht&&ht.isListening()?ht._fireAndBubble($,{evt:et}):this._fire($,{evt:et,target:this,currentTarget:this})}_pointercancel(et){this.setPointersPositions(et);const ht=_.getCapturedShape(et.pointerId)||this.getIntersection(this.getPointerPosition());ht&&ht._fireAndBubble(H,_.createEvent(et)),_.releaseCapture(et.pointerId)}_lostpointercapture(et){_.releaseCapture(et.pointerId)}setPointersPositions(et){const ht=this._getContentPosition();let At=null,Ct=null;et=et||window.event,et.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(et.touches,It=>{this._pointerPositions.push({id:It.identifier,x:(It.clientX-ht.left)/ht.scaleX,y:(It.clientY-ht.top)/ht.scaleY})}),Array.prototype.forEach.call(et.changedTouches||et.touches,It=>{this._changedPointerPositions.push({id:It.identifier,x:(It.clientX-ht.left)/ht.scaleX,y:(It.clientY-ht.top)/ht.scaleY})})):(At=(et.clientX-ht.left)/ht.scaleX,Ct=(et.clientY-ht.top)/ht.scaleY,this.pointerPos={x:At,y:Ct},this._pointerPositions=[{x:At,y:Ct,id:t.Util._getFirstPointerId(et)}],this._changedPointerPositions=[{x:At,y:Ct,id:t.Util._getFirstPointerId(et)}])}_setPointerPosition(et){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(et)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const et=this.content.getBoundingClientRect();return{top:et.top,left:et.left,scaleX:et.width/this.content.clientWidth||1,scaleY:et.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new c.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new c.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!u.Konva.isBrowser)return;const et=this.container();if(!et)throw"Stage has no container. A container is required.";et.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),et.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(et){et.batchDraw()}),this}}a.Stage=Rt,Rt.prototype.nodeType=v,(0,m._registerNode)(Rt),n.Factory.addGetterSetter(Rt,"container"),u.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{a.stages.forEach(Nt=>{Nt.batchDraw()})})}(Pp)),Pp}var hd={},Bp={},w_;function Ni(){return w_||(w_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Shape=a.shapes=void 0;const t=ve(),n=Yn(),r=Ae(),u=ei(),c=Ce(),d=ve(),m=i4(),_="hasShadow",v="shadowRGBA",b="patternImage",R="linearGradient",U="radialGradient";let w;function O(){return w||(w=n.Util.createCanvasElement().getContext("2d"),w)}a.shapes={};function I(D){const x=this.attrs.fillRule;x?D.fill(x):D.fill()}function P(D){D.stroke()}function K(D){const x=this.attrs.fillRule;x?D.fill(x):D.fill()}function C(D){D.stroke()}function M(){this._clearCache(_)}function G(){this._clearCache(v)}function H(){this._clearCache(b)}function Y(){this._clearCache(R)}function q(){this._clearCache(U)}class V extends u.Node{constructor(x){super(x);let L;for(;L=n.Util.getRandomColor(),!(L&&!(L in a.shapes)););this.colorKey=L,a.shapes[L]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(_,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(b,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const L=O().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(L&&L.setTransform){const j=new n.Transform;j.translate(this.fillPatternX(),this.fillPatternY()),j.rotate(t.Konva.getAngle(this.fillPatternRotation())),j.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),j.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const T=j.getMatrix(),F=typeof DOMMatrix>"u"?{a:T[0],b:T[1],c:T[2],d:T[3],e:T[4],f:T[5]}:new DOMMatrix(T);L.setTransform(F)}return L}}_getLinearGradient(){return this._getCache(R,this.__getLinearGradient)}__getLinearGradient(){const x=this.fillLinearGradientColorStops();if(x){const L=O(),j=this.fillLinearGradientStartPoint(),T=this.fillLinearGradientEndPoint(),F=L.createLinearGradient(j.x,j.y,T.x,T.y);for(let k=0;k<x.length;k+=2)F.addColorStop(x[k],x[k+1]);return F}}_getRadialGradient(){return this._getCache(U,this.__getRadialGradient)}__getRadialGradient(){const x=this.fillRadialGradientColorStops();if(x){const L=O(),j=this.fillRadialGradientStartPoint(),T=this.fillRadialGradientEndPoint(),F=L.createRadialGradient(j.x,j.y,this.fillRadialGradientStartRadius(),T.x,T.y,this.fillRadialGradientEndRadius());for(let k=0;k<x.length;k+=2)F.addColorStop(x[k],x[k+1]);return F}}getShadowRGBA(){return this._getCache(v,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const x=n.Util.colorToRGBA(this.shadowColor());if(x)return"rgba("+x.r+","+x.g+","+x.b+","+x.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const x=this.hitStrokeWidth();return x==="auto"?this.hasStroke():this.strokeEnabled()&&!!x}intersects(x){const L=this.getStage();if(!L)return!1;const j=L.bufferHitCanvas;return j.getContext().clear(),this.drawHit(j,void 0,!0),j.context.getImageData(Math.round(x.x),Math.round(x.y),1,1).data[3]>0}destroy(){return u.Node.prototype.destroy.call(this),delete a.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(x){var L;if(!((L=this.attrs.perfectDrawEnabled)!==null&&L!==void 0?L:!0))return!1;const T=x||this.hasFill(),F=this.hasStroke(),k=this.getAbsoluteOpacity()!==1;if(T&&F&&k)return!0;const X=this.hasShadow(),$=this.shadowForStrokeEnabled();return!!(T&&F&&X&&$)}setStrokeHitEnabled(x){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),x?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const x=this.size();return{x:this._centroid?-x.width/2:0,y:this._centroid?-x.height/2:0,width:x.width,height:x.height}}getClientRect(x={}){let L=!1,j=this.getParent();for(;j;){if(j.isCached()){L=!0;break}j=j.getParent()}const T=x.skipTransform,F=x.relativeTo||L&&this.getStage()||void 0,k=this.getSelfRect(),$=!x.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,it=k.width+$,ut=k.height+$,Q=!x.skipShadow&&this.hasShadow(),at=Q?this.shadowOffsetX():0,Et=Q?this.shadowOffsetY():0,st=it+Math.abs(at),gt=ut+Math.abs(Et),Rt=Q&&this.shadowBlur()||0,Nt=st+Rt*2,et=gt+Rt*2,ht={width:Nt,height:et,x:-($/2+Rt)+Math.min(at,0)+k.x,y:-($/2+Rt)+Math.min(Et,0)+k.y};return T?ht:this._transformedRect(ht,F)}drawScene(x,L,j){const T=this.getLayer();let F=x||T.getCanvas(),k=F.getContext(),X=this._getCanvasCache(),$=this.getSceneFunc(),it=this.hasShadow(),ut,Q;const at=F.isCache,Et=L===this;if(!this.isVisible()&&!Et)return this;if(X){k.save();const gt=this.getAbsoluteTransform(L).getMatrix();return k.transform(gt[0],gt[1],gt[2],gt[3],gt[4],gt[5]),this._drawCachedSceneCanvas(k),k.restore(),this}if(!$)return this;if(k.save(),this._useBufferCanvas()&&!at){ut=this.getStage();const gt=j||ut.bufferCanvas;Q=gt.getContext(),Q.clear(),Q.save(),Q._applyLineJoin(this);var st=this.getAbsoluteTransform(L).getMatrix();Q.transform(st[0],st[1],st[2],st[3],st[4],st[5]),$.call(this,Q,this),Q.restore();const Rt=gt.pixelRatio;it&&k._applyShadow(this),k._applyOpacity(this),k._applyGlobalCompositeOperation(this),k.drawImage(gt._canvas,0,0,gt.width/Rt,gt.height/Rt)}else{if(k._applyLineJoin(this),!Et){var st=this.getAbsoluteTransform(L).getMatrix();k.transform(st[0],st[1],st[2],st[3],st[4],st[5]),k._applyOpacity(this),k._applyGlobalCompositeOperation(this)}it&&k._applyShadow(this),$.call(this,k,this)}return k.restore(),this}drawHit(x,L,j=!1){if(!this.shouldDrawHit(L,j))return this;const T=this.getLayer(),F=x||T.hitCanvas,k=F&&F.getContext(),X=this.hitFunc()||this.sceneFunc(),$=this._getCanvasCache(),it=$&&$.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),it){k.save();const Q=this.getAbsoluteTransform(L).getMatrix();return k.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]),this._drawCachedHitCanvas(k),k.restore(),this}if(!X)return this;if(k.save(),k._applyLineJoin(this),!(this===L)){const Q=this.getAbsoluteTransform(L).getMatrix();k.transform(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5])}return X.call(this,k,this),k.restore(),this}drawHitFromCache(x=0){const L=this._getCanvasCache(),j=this._getCachedSceneCanvas(),T=L.hit,F=T.getContext(),k=T.getWidth(),X=T.getHeight();F.clear(),F.drawImage(j._canvas,0,0,k,X);try{const $=F.getImageData(0,0,k,X),it=$.data,ut=it.length,Q=n.Util._hexToRgb(this.colorKey);for(let at=0;at<ut;at+=4)it[at+3]>x?(it[at]=Q.r,it[at+1]=Q.g,it[at+2]=Q.b,it[at+3]=255):it[at+3]=0;F.putImageData($,0,0)}catch($){n.Util.error("Unable to draw hit graph from cached scene canvas. "+$.message)}return this}hasPointerCapture(x){return m.hasPointerCapture(x,this)}setPointerCapture(x){m.setPointerCapture(x,this)}releaseCapture(x){m.releaseCapture(x,this)}}a.Shape=V,V.prototype._fillFunc=I,V.prototype._strokeFunc=P,V.prototype._fillFuncHit=K,V.prototype._strokeFuncHit=C,V.prototype._centroid=!1,V.prototype.nodeType="Shape",(0,d._registerNode)(V),V.prototype.eventListeners={},V.prototype.on.call(V.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",M),V.prototype.on.call(V.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",G),V.prototype.on.call(V.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",H),V.prototype.on.call(V.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",Y),V.prototype.on.call(V.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",q),r.Factory.addGetterSetter(V,"stroke",void 0,(0,c.getStringOrGradientValidator)()),r.Factory.addGetterSetter(V,"strokeWidth",2,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(V,"hitStrokeWidth","auto",(0,c.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(V,"strokeHitEnabled",!0,(0,c.getBooleanValidator)()),r.Factory.addGetterSetter(V,"perfectDrawEnabled",!0,(0,c.getBooleanValidator)()),r.Factory.addGetterSetter(V,"shadowForStrokeEnabled",!0,(0,c.getBooleanValidator)()),r.Factory.addGetterSetter(V,"lineJoin"),r.Factory.addGetterSetter(V,"lineCap"),r.Factory.addGetterSetter(V,"sceneFunc"),r.Factory.addGetterSetter(V,"hitFunc"),r.Factory.addGetterSetter(V,"dash"),r.Factory.addGetterSetter(V,"dashOffset",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"shadowColor",void 0,(0,c.getStringValidator)()),r.Factory.addGetterSetter(V,"shadowBlur",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"shadowOpacity",1,(0,c.getNumberValidator)()),r.Factory.addComponentsGetterSetter(V,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(V,"shadowOffsetX",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"shadowOffsetY",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillPatternImage"),r.Factory.addGetterSetter(V,"fill",void 0,(0,c.getStringOrGradientValidator)()),r.Factory.addGetterSetter(V,"fillPatternX",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillPatternY",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(V,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(V,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(V,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(V,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(V,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(V,"fillEnabled",!0),r.Factory.addGetterSetter(V,"strokeEnabled",!0),r.Factory.addGetterSetter(V,"shadowEnabled",!0),r.Factory.addGetterSetter(V,"dashEnabled",!0),r.Factory.addGetterSetter(V,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(V,"fillPriority","color"),r.Factory.addComponentsGetterSetter(V,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(V,"fillPatternOffsetX",0,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillPatternOffsetY",0,(0,c.getNumberValidator)()),r.Factory.addComponentsGetterSetter(V,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(V,"fillPatternScaleX",1,(0,c.getNumberValidator)()),r.Factory.addGetterSetter(V,"fillPatternScaleY",1,(0,c.getNumberValidator)()),r.Factory.addComponentsGetterSetter(V,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(V,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(V,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(V,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(V,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(V,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(V,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(V,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(V,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(V,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(V,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(V,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(V,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(V,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(V,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(V,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(V,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(V,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(V,"fillPatternRotation",0),r.Factory.addGetterSetter(V,"fillRule",void 0,(0,c.getStringValidator)()),r.Factory.backCompat(V,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(Bp)),Bp}var N_;function a4(){if(N_)return hd;N_=1,Object.defineProperty(hd,"__esModule",{value:!0}),hd.Layer=void 0;const a=Yn(),t=R0(),n=ei(),r=Ae(),u=A0(),c=Ce(),d=Ni(),m=ve(),_="#",v="beforeDraw",b="draw",R=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],U=R.length;class w extends t.Container{constructor(I){super(I),this.canvas=new u.SceneCanvas,this.hitCanvas=new u.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(I){return this.getContext().clear(I),this.getHitCanvas().getContext().clear(I),this}setZIndex(I){super.setZIndex(I);const P=this.getStage();return P&&P.content&&(P.content.removeChild(this.getNativeCanvasElement()),I<P.children.length-1?P.content.insertBefore(this.getNativeCanvasElement(),P.children[I+1].getCanvas()._canvas):P.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);const I=this.getStage();return I&&I.content&&(I.content.removeChild(this.getNativeCanvasElement()),I.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!n.Node.prototype.moveUp.call(this))return!1;const P=this.getStage();return!P||!P.content?!1:(P.content.removeChild(this.getNativeCanvasElement()),this.index<P.children.length-1?P.content.insertBefore(this.getNativeCanvasElement(),P.children[this.index+1].getCanvas()._canvas):P.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){const I=this.getStage();if(I){const P=I.children;I.content&&(I.content.removeChild(this.getNativeCanvasElement()),I.content.insertBefore(this.getNativeCanvasElement(),P[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){const I=this.getStage();if(I){const P=I.children;I.content&&(I.content.removeChild(this.getNativeCanvasElement()),I.content.insertBefore(this.getNativeCanvasElement(),P[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const I=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),I&&I.parentNode&&a.Util._isInDocument(I)&&I.parentNode.removeChild(I),this}getStage(){return this.parent}setSize({width:I,height:P}){return this.canvas.setSize(I,P),this.hitCanvas.setSize(I,P),this._setSmoothEnabled(),this}_validateAdd(I){const P=I.getType();P!=="Group"&&P!=="Shape"&&a.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(I){return I=I||{},I.width=I.width||this.getWidth(),I.height=I.height||this.getHeight(),I.x=I.x!==void 0?I.x:this.x(),I.y=I.y!==void 0?I.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,I)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){a.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){a.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,a.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(I){if(!this.isListening()||!this.isVisible())return null;let P=1,K=!1;for(;;){for(let C=0;C<U;C++){const M=R[C],G=this._getIntersection({x:I.x+M.x*P,y:I.y+M.y*P}),H=G.shape;if(H)return H;if(K=!!G.antialiased,!G.antialiased)break}if(K)P+=1;else return null}}_getIntersection(I){const P=this.hitCanvas.pixelRatio,K=this.hitCanvas.context.getImageData(Math.round(I.x*P),Math.round(I.y*P),1,1).data,C=K[3];if(C===255){const M=a.Util._rgbToHex(K[0],K[1],K[2]),G=d.shapes[_+M];return G?{shape:G}:{antialiased:!0}}else if(C>0)return{antialiased:!0};return{}}drawScene(I,P){const K=this.getLayer(),C=I||K&&K.getCanvas();return this._fire(v,{node:this}),this.clearBeforeDraw()&&C.getContext().clear(),t.Container.prototype.drawScene.call(this,C,P),this._fire(b,{node:this}),this}drawHit(I,P){const K=this.getLayer(),C=I||K&&K.hitCanvas;return K&&K.clearBeforeDraw()&&K.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,C,P),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(I){a.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(I)}getHitGraphEnabled(I){return a.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const I=this.parent;!!this.hitCanvas._canvas.parentNode?I.content.removeChild(this.hitCanvas._canvas):I.content.appendChild(this.hitCanvas._canvas)}destroy(){return a.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return hd.Layer=w,w.prototype.nodeType="Layer",(0,m._registerNode)(w),r.Factory.addGetterSetter(w,"imageSmoothingEnabled",!0),r.Factory.addGetterSetter(w,"clearBeforeDraw",!0),r.Factory.addGetterSetter(w,"hitGraphEnabled",!0,(0,c.getBooleanValidator)()),hd}var fd={},O_;function S5(){if(O_)return fd;O_=1,Object.defineProperty(fd,"__esModule",{value:!0}),fd.FastLayer=void 0;const a=Yn(),t=a4(),n=ve();let r=class extends t.Layer{constructor(c){super(c),this.listening(!1),a.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return fd.FastLayer=r,r.prototype.nodeType="FastLayer",(0,n._registerNode)(r),fd}var dd={},M_;function x1(){if(M_)return dd;M_=1,Object.defineProperty(dd,"__esModule",{value:!0}),dd.Group=void 0;const a=Yn(),t=R0(),n=ve();let r=class extends t.Container{_validateAdd(c){const d=c.getType();d!=="Group"&&d!=="Shape"&&a.Util.throw("You may only add groups and shapes to groups.")}};return dd.Group=r,r.prototype.nodeType="Group",(0,n._registerNode)(r),dd}var gd={},x_;function V1(){if(x_)return gd;x_=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.Animation=void 0;const a=ve(),t=Yn(),n=function(){return a.glob.performance&&a.glob.performance.now?function(){return a.glob.performance.now()}:function(){return new Date().getTime()}}();let r=class Lh{constructor(c,d){this.id=Lh.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=c,this.setLayers(d)}setLayers(c){let d=[];return c&&(d=Array.isArray(c)?c:[c]),this.layers=d,this}getLayers(){return this.layers}addLayer(c){const d=this.layers,m=d.length;for(let _=0;_<m;_++)if(d[_]._id===c._id)return!1;return this.layers.push(c),!0}isRunning(){const d=Lh.animations,m=d.length;for(let _=0;_<m;_++)if(d[_].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),Lh._addAnimation(this),this}stop(){return Lh._removeAnimation(this),this}_updateFrameObject(c){this.frame.timeDiff=c-this.frame.lastTime,this.frame.lastTime=c,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(c){this.animations.push(c),this._handleAnimation()}static _removeAnimation(c){const d=c.id,m=this.animations,_=m.length;for(let v=0;v<_;v++)if(m[v].id===d){this.animations.splice(v,1);break}}static _runFrames(){const c={},d=this.animations;for(let m=0;m<d.length;m++){const _=d[m],v=_.layers,b=_.func;_._updateFrameObject(n());const R=v.length;let U;if(b?U=b.call(_,_.frame)!==!1:U=!0,!!U)for(let w=0;w<R;w++){const O=v[w];O._id!==void 0&&(c[O._id]=O)}}for(const m in c)c.hasOwnProperty(m)&&c[m].batchDraw()}static _animationLoop(){const c=Lh;c.animations.length?(c._runFrames(),t.Util.requestAnimFrame(c._animationLoop)):c.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return gd.Animation=r,r.animations=[],r.animIdCounter=0,r.animRunning=!1,gd}var Gp={},V_;function T5(){return V_||(V_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Easings=a.Tween=void 0;const t=Yn(),n=V1(),r=ei(),u=ve(),c={node:1,duration:1,easing:1,onFinish:1,yoyo:1},d=1,m=2,_=3,v=["fill","stroke","shadowColor"];let b=0;class R{constructor(O,I,P,K,C,M,G){this.prop=O,this.propFunc=I,this.begin=K,this._pos=K,this.duration=M,this._change=0,this.prevPos=0,this.yoyo=G,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=P,this._change=C-this.begin,this.pause()}fire(O){const I=this[O];I&&I()}setTime(O){O>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():O<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=O,this.update())}getTime(){return this._time}setPosition(O){this.prevPos=this._pos,this.propFunc(O),this._pos=O}getPosition(O){return O===void 0&&(O=this._time),this.func(O,this.begin,this._change,this.duration)}play(){this.state=m,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=_,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(O){this.pause(),this._time=O,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const O=this.getTimer()-this._startTime;this.state===m?this.setTime(O):this.state===_&&this.setTime(this.duration-O)}pause(){this.state=d,this.fire("onPause")}getTimer(){return new Date().getTime()}}class U{constructor(O){const I=this,P=O.node,K=P._id,C=O.easing||a.Easings.Linear,M=!!O.yoyo;let G,H;typeof O.duration>"u"?G=.3:O.duration===0?G=.001:G=O.duration,this.node=P,this._id=b++;const Y=P.getLayer()||(P instanceof u.Konva.Stage?P.getLayers():null);Y||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){I.tween.onEnterFrame()},Y),this.tween=new R(H,function(q){I._tweenFunc(q)},C,0,1,G*1e3,M),this._addListeners(),U.attrs[K]||(U.attrs[K]={}),U.attrs[K][this._id]||(U.attrs[K][this._id]={}),U.tweens[K]||(U.tweens[K]={});for(H in O)c[H]===void 0&&this._addAttr(H,O[H]);this.reset(),this.onFinish=O.onFinish,this.onReset=O.onReset,this.onUpdate=O.onUpdate}_addAttr(O,I){const P=this.node,K=P._id;let C,M,G,H,Y;const q=U.tweens[K][O];q&&delete U.attrs[K][q][O];let V=P.getAttr(O);if(t.Util._isArray(I))if(C=[],M=Math.max(I.length,V.length),O==="points"&&I.length!==V.length&&(I.length>V.length?(H=V,V=t.Util._prepareArrayForTween(V,I,P.closed())):(G=I,I=t.Util._prepareArrayForTween(I,V,P.closed()))),O.indexOf("fill")===0)for(let D=0;D<M;D++)if(D%2===0)C.push(I[D]-V[D]);else{const x=t.Util.colorToRGBA(V[D]);Y=t.Util.colorToRGBA(I[D]),V[D]=x,C.push({r:Y.r-x.r,g:Y.g-x.g,b:Y.b-x.b,a:Y.a-x.a})}else for(let D=0;D<M;D++)C.push(I[D]-V[D]);else v.indexOf(O)!==-1?(V=t.Util.colorToRGBA(V),Y=t.Util.colorToRGBA(I),C={r:Y.r-V.r,g:Y.g-V.g,b:Y.b-V.b,a:Y.a-V.a}):C=I-V;U.attrs[K][this._id][O]={start:V,diff:C,end:I,trueEnd:G,trueStart:H},U.tweens[K][O]=this._id}_tweenFunc(O){const I=this.node,P=U.attrs[I._id][this._id];let K,C,M,G,H,Y,q,V;for(K in P){if(C=P[K],M=C.start,G=C.diff,V=C.end,t.Util._isArray(M))if(H=[],q=Math.max(M.length,V.length),K.indexOf("fill")===0)for(Y=0;Y<q;Y++)Y%2===0?H.push((M[Y]||0)+G[Y]*O):H.push("rgba("+Math.round(M[Y].r+G[Y].r*O)+","+Math.round(M[Y].g+G[Y].g*O)+","+Math.round(M[Y].b+G[Y].b*O)+","+(M[Y].a+G[Y].a*O)+")");else for(Y=0;Y<q;Y++)H.push((M[Y]||0)+G[Y]*O);else v.indexOf(K)!==-1?H="rgba("+Math.round(M.r+G.r*O)+","+Math.round(M.g+G.g*O)+","+Math.round(M.b+G.b*O)+","+(M.a+G.a*O)+")":H=M+G*O;I.setAttr(K,H)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const O=this.node,I=U.attrs[O._id][this._id];I.points&&I.points.trueEnd&&O.setAttr("points",I.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const O=this.node,I=U.attrs[O._id][this._id];I.points&&I.points.trueStart&&O.points(I.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(O){return this.tween.seek(O*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const O=this.node._id,I=this._id,P=U.tweens[O];this.pause();for(const K in P)delete U.tweens[O][K];delete U.attrs[O][I]}}a.Tween=U,U.attrs={},U.tweens={},r.Node.prototype.to=function(w){const O=w.onFinish;w.node=this,w.onFinish=function(){this.destroy(),O&&O()},new U(w).play()},a.Easings={BackEaseIn(w,O,I,P){return I*(w/=P)*w*((1.70158+1)*w-1.70158)+O},BackEaseOut(w,O,I,P){return I*((w=w/P-1)*w*((1.70158+1)*w+1.70158)+1)+O},BackEaseInOut(w,O,I,P){let K=1.70158;return(w/=P/2)<1?I/2*(w*w*(((K*=1.525)+1)*w-K))+O:I/2*((w-=2)*w*(((K*=1.525)+1)*w+K)+2)+O},ElasticEaseIn(w,O,I,P,K,C){let M=0;return w===0?O:(w/=P)===1?O+I:(C||(C=P*.3),!K||K<Math.abs(I)?(K=I,M=C/4):M=C/(2*Math.PI)*Math.asin(I/K),-(K*Math.pow(2,10*(w-=1))*Math.sin((w*P-M)*(2*Math.PI)/C))+O)},ElasticEaseOut(w,O,I,P,K,C){let M=0;return w===0?O:(w/=P)===1?O+I:(C||(C=P*.3),!K||K<Math.abs(I)?(K=I,M=C/4):M=C/(2*Math.PI)*Math.asin(I/K),K*Math.pow(2,-10*w)*Math.sin((w*P-M)*(2*Math.PI)/C)+I+O)},ElasticEaseInOut(w,O,I,P,K,C){let M=0;return w===0?O:(w/=P/2)===2?O+I:(C||(C=P*(.3*1.5)),!K||K<Math.abs(I)?(K=I,M=C/4):M=C/(2*Math.PI)*Math.asin(I/K),w<1?-.5*(K*Math.pow(2,10*(w-=1))*Math.sin((w*P-M)*(2*Math.PI)/C))+O:K*Math.pow(2,-10*(w-=1))*Math.sin((w*P-M)*(2*Math.PI)/C)*.5+I+O)},BounceEaseOut(w,O,I,P){return(w/=P)<1/2.75?I*(7.5625*w*w)+O:w<2/2.75?I*(7.5625*(w-=1.5/2.75)*w+.75)+O:w<2.5/2.75?I*(7.5625*(w-=2.25/2.75)*w+.9375)+O:I*(7.5625*(w-=2.625/2.75)*w+.984375)+O},BounceEaseIn(w,O,I,P){return I-a.Easings.BounceEaseOut(P-w,0,I,P)+O},BounceEaseInOut(w,O,I,P){return w<P/2?a.Easings.BounceEaseIn(w*2,0,I,P)*.5+O:a.Easings.BounceEaseOut(w*2-P,0,I,P)*.5+I*.5+O},EaseIn(w,O,I,P){return I*(w/=P)*w+O},EaseOut(w,O,I,P){return-I*(w/=P)*(w-2)+O},EaseInOut(w,O,I,P){return(w/=P/2)<1?I/2*w*w+O:-I/2*(--w*(w-2)-1)+O},StrongEaseIn(w,O,I,P){return I*(w/=P)*w*w*w*w+O},StrongEaseOut(w,O,I,P){return I*((w=w/P-1)*w*w*w*w+1)+O},StrongEaseInOut(w,O,I,P){return(w/=P/2)<1?I/2*w*w*w*w*w+O:I/2*((w-=2)*w*w*w*w+2)+O},Linear(w,O,I,P){return I*w/P+O}}}(Gp)),Gp}var U_;function s1(){return U_||(U_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Konva=void 0;const t=ve(),n=Yn(),r=ei(),u=R0(),c=E5(),d=a4(),m=S5(),_=x1(),v=M1(),b=Ni(),R=V1(),U=T5(),w=n4(),O=A0();a.Konva=n.Util._assign(t.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:u.Container,Stage:c.Stage,stages:c.stages,Layer:d.Layer,FastLayer:m.FastLayer,Group:_.Group,DD:v.DD,Shape:b.Shape,shapes:b.shapes,Animation:R.Animation,Tween:U.Tween,Easings:U.Easings,Context:w.Context,Canvas:O.Canvas}),a.default=a.Konva}(Vp)),Vp}var md={},I_;function b5(){if(I_)return md;I_=1,Object.defineProperty(md,"__esModule",{value:!0}),md.Arc=void 0;const a=Ae(),t=Ni(),n=ve(),r=Ce(),u=ve();let c=class extends t.Shape{_sceneFunc(m){const _=n.Konva.getAngle(this.angle()),v=this.clockwise();m.beginPath(),m.arc(0,0,this.outerRadius(),0,_,v),m.arc(0,0,this.innerRadius(),_,0,!v),m.closePath(),m.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(m){this.outerRadius(m/2)}setHeight(m){this.outerRadius(m/2)}getSelfRect(){const m=this.innerRadius(),_=this.outerRadius(),v=this.clockwise(),b=n.Konva.getAngle(v?360-this.angle():this.angle()),R=Math.cos(Math.min(b,Math.PI)),U=1,w=Math.sin(Math.min(Math.max(Math.PI,b),3*Math.PI/2)),O=Math.sin(Math.min(b,Math.PI/2)),I=R*(R>0?m:_),P=U*_,K=w*(w>0?m:_),C=O*(O>0?_:m);return{x:I,y:v?-1*C:K,width:P-I,height:C-K}}};return md.Arc=c,c.prototype._centroid=!0,c.prototype.className="Arc",c.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,u._registerNode)(c),a.Factory.addGetterSetter(c,"innerRadius",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"outerRadius",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"angle",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"clockwise",!1,(0,r.getBooleanValidator)()),md}var pd={},yd={},L_;function s4(){if(L_)return yd;L_=1,Object.defineProperty(yd,"__esModule",{value:!0}),yd.Line=void 0;const a=Ae(),t=ve(),n=Ni(),r=Ce();function u(m,_,v,b,R,U,w){const O=Math.sqrt(Math.pow(v-m,2)+Math.pow(b-_,2)),I=Math.sqrt(Math.pow(R-v,2)+Math.pow(U-b,2)),P=w*O/(O+I),K=w*I/(O+I),C=v-P*(R-m),M=b-P*(U-_),G=v+K*(R-m),H=b+K*(U-_);return[C,M,G,H]}function c(m,_){const v=m.length,b=[];for(let R=2;R<v-2;R+=2){const U=u(m[R-2],m[R-1],m[R],m[R+1],m[R+2],m[R+3],_);isNaN(U[0])||(b.push(U[0]),b.push(U[1]),b.push(m[R]),b.push(m[R+1]),b.push(U[2]),b.push(U[3]))}return b}class d extends n.Shape{constructor(_){super(_),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(_){let v=this.points(),b=v.length,R=this.tension(),U=this.closed(),w=this.bezier(),O,I,P;if(b){if(_.beginPath(),_.moveTo(v[0],v[1]),R!==0&&b>4){for(O=this.getTensionPoints(),I=O.length,P=U?0:4,U||_.quadraticCurveTo(O[0],O[1],O[2],O[3]);P<I-2;)_.bezierCurveTo(O[P++],O[P++],O[P++],O[P++],O[P++],O[P++]);U||_.quadraticCurveTo(O[I-2],O[I-1],v[b-2],v[b-1])}else if(w)for(P=2;P<b;)_.bezierCurveTo(v[P++],v[P++],v[P++],v[P++],v[P++],v[P++]);else for(P=2;P<b;P+=2)_.lineTo(v[P],v[P+1]);U?(_.closePath(),_.fillStrokeShape(this)):_.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():c(this.points(),this.tension())}_getTensionPointsClosed(){const _=this.points(),v=_.length,b=this.tension(),R=u(_[v-2],_[v-1],_[0],_[1],_[2],_[3],b),U=u(_[v-4],_[v-3],_[v-2],_[v-1],_[0],_[1],b),w=c(_,b);return[R[2],R[3]].concat(w).concat([U[0],U[1],_[v-2],_[v-1],U[2],U[3],R[0],R[1],_[0],_[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let _=this.points();if(_.length<4)return{x:_[0]||0,y:_[1]||0,width:0,height:0};this.tension()!==0?_=[_[0],_[1],...this._getTensionPoints(),_[_.length-2],_[_.length-1]]:_=this.points();let v=_[0],b=_[0],R=_[1],U=_[1],w,O;for(let I=0;I<_.length/2;I++)w=_[I*2],O=_[I*2+1],v=Math.min(v,w),b=Math.max(b,w),R=Math.min(R,O),U=Math.max(U,O);return{x:v,y:R,width:b-v,height:U-R}}}return yd.Line=d,d.prototype.className="Line",d.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(d),a.Factory.addGetterSetter(d,"closed",!1),a.Factory.addGetterSetter(d,"bezier",!1),a.Factory.addGetterSetter(d,"tension",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(d,"points",[],(0,r.getNumberArrayValidator)()),yd}var _d={},kp={},z_;function A5(){return z_||(z_=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.t2length=a.getQuadraticArcLength=a.getCubicArcLength=a.binomialCoefficients=a.cValues=a.tValues=void 0,a.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],a.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],a.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(d,m,_)=>{let v,b;const U=_/2;v=0;for(let w=0;w<20;w++)b=U*a.tValues[20][w]+U,v+=a.cValues[20][w]*r(d,m,b);return U*v};a.getCubicArcLength=t;const n=(d,m,_)=>{_===void 0&&(_=1);const v=d[0]-2*d[1]+d[2],b=m[0]-2*m[1]+m[2],R=2*d[1]-2*d[0],U=2*m[1]-2*m[0],w=4*(v*v+b*b),O=4*(v*R+b*U),I=R*R+U*U;if(w===0)return _*Math.sqrt(Math.pow(d[2]-d[0],2)+Math.pow(m[2]-m[0],2));const P=O/(2*w),K=I/w,C=_+P,M=K-P*P,G=C*C+M>0?Math.sqrt(C*C+M):0,H=P*P+M>0?Math.sqrt(P*P+M):0,Y=P+Math.sqrt(P*P+M)!==0?M*Math.log(Math.abs((C+G)/(P+H))):0;return Math.sqrt(w)/2*(C*G-P*H+Y)};a.getQuadraticArcLength=n;function r(d,m,_){const v=u(1,_,d),b=u(1,_,m),R=v*v+b*b;return Math.sqrt(R)}const u=(d,m,_)=>{const v=_.length-1;let b,R;if(v===0)return 0;if(d===0){R=0;for(let U=0;U<=v;U++)R+=a.binomialCoefficients[v][U]*Math.pow(1-m,v-U)*Math.pow(m,U)*_[U];return R}else{b=new Array(v);for(let U=0;U<v;U++)b[U]=v*(_[U+1]-_[U]);return u(d-1,m,b)}},c=(d,m,_)=>{let v=1,b=d/m,R=(d-_(b))/m,U=0;for(;v>.001;){const w=_(b+R),O=Math.abs(d-w)/m;if(O<v)v=O,b+=R;else{const I=_(b-R),P=Math.abs(d-I)/m;P<v?(v=P,b-=R):R/=2}if(U++,U>500)break}return b};a.t2length=c}(kp)),kp}var P_;function U1(){if(P_)return _d;P_=1,Object.defineProperty(_d,"__esModule",{value:!0}),_d.Path=void 0;const a=Ae(),t=Ni(),n=ve(),r=A5();class u extends t.Shape{constructor(d){super(d),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=u.parsePathData(this.data()),this.pathLength=u.getPathLength(this.dataArray)}_sceneFunc(d){const m=this.dataArray;d.beginPath();let _=!1;for(let G=0;G<m.length;G++){const H=m[G].command,Y=m[G].points;switch(H){case"L":d.lineTo(Y[0],Y[1]);break;case"M":d.moveTo(Y[0],Y[1]);break;case"C":d.bezierCurveTo(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]);break;case"Q":d.quadraticCurveTo(Y[0],Y[1],Y[2],Y[3]);break;case"A":var v=Y[0],b=Y[1],R=Y[2],U=Y[3],w=Y[4],O=Y[5],I=Y[6],P=Y[7],K=R>U?R:U,C=R>U?1:R/U,M=R>U?U/R:1;d.translate(v,b),d.rotate(I),d.scale(C,M),d.arc(0,0,K,w,w+O,1-P),d.scale(1/C,1/M),d.rotate(-I),d.translate(-v,-b);break;case"z":_=!0,d.closePath();break}}!_&&!this.hasFill()?d.strokeShape(this):d.fillStrokeShape(this)}getSelfRect(){let d=[];this.dataArray.forEach(function(w){if(w.command==="A"){const O=w.points[4],I=w.points[5],P=w.points[4]+I;let K=Math.PI/180;if(Math.abs(O-P)<K&&(K=Math.abs(O-P)),I<0)for(let C=O-K;C>P;C-=K){const M=u.getPointOnEllipticalArc(w.points[0],w.points[1],w.points[2],w.points[3],C,0);d.push(M.x,M.y)}else for(let C=O+K;C<P;C+=K){const M=u.getPointOnEllipticalArc(w.points[0],w.points[1],w.points[2],w.points[3],C,0);d.push(M.x,M.y)}}else if(w.command==="C")for(let O=0;O<=1;O+=.01){const I=u.getPointOnCubicBezier(O,w.start.x,w.start.y,w.points[0],w.points[1],w.points[2],w.points[3],w.points[4],w.points[5]);d.push(I.x,I.y)}else d=d.concat(w.points)});let m=d[0],_=d[0],v=d[1],b=d[1],R,U;for(let w=0;w<d.length/2;w++)R=d[w*2],U=d[w*2+1],isNaN(R)||(m=Math.min(m,R),_=Math.max(_,R)),isNaN(U)||(v=Math.min(v,U),b=Math.max(b,U));return{x:m,y:v,width:_-m,height:b-v}}getLength(){return this.pathLength}getPointAtLength(d){return u.getPointAtLengthOfDataArray(d,this.dataArray)}static getLineLength(d,m,_,v){return Math.sqrt((_-d)*(_-d)+(v-m)*(v-m))}static getPathLength(d){let m=0;for(let _=0;_<d.length;++_)m+=d[_].pathLength;return m}static getPointAtLengthOfDataArray(d,m){let _,v=0,b=m.length;if(!b)return null;for(;v<b&&d>m[v].pathLength;)d-=m[v].pathLength,++v;if(v===b)return _=m[v-1].points.slice(-2),{x:_[0],y:_[1]};if(d<.01)return _=m[v].points.slice(0,2),{x:_[0],y:_[1]};const R=m[v],U=R.points;switch(R.command){case"L":return u.getPointOnLine(d,R.start.x,R.start.y,U[0],U[1]);case"C":return u.getPointOnCubicBezier((0,r.t2length)(d,u.getPathLength(m),G=>(0,r.getCubicArcLength)([R.start.x,U[0],U[2],U[4]],[R.start.y,U[1],U[3],U[5]],G)),R.start.x,R.start.y,U[0],U[1],U[2],U[3],U[4],U[5]);case"Q":return u.getPointOnQuadraticBezier((0,r.t2length)(d,u.getPathLength(m),G=>(0,r.getQuadraticArcLength)([R.start.x,U[0],U[2]],[R.start.y,U[1],U[3]],G)),R.start.x,R.start.y,U[0],U[1],U[2],U[3]);case"A":var w=U[0],O=U[1],I=U[2],P=U[3],K=U[4],C=U[5],M=U[6];return K+=C*d/R.pathLength,u.getPointOnEllipticalArc(w,O,I,P,K,M)}return null}static getPointOnLine(d,m,_,v,b,R,U){R=R??m,U=U??_;const w=this.getLineLength(m,_,v,b);if(w<1e-10)return{x:m,y:_};if(v===m)return{x:R,y:U+(b>_?d:-d)};const O=(b-_)/(v-m),I=Math.sqrt(d*d/(1+O*O))*(v<m?-1:1),P=O*I;if(Math.abs(U-_-O*(R-m))<1e-10)return{x:R+I,y:U+P};const K=((R-m)*(v-m)+(U-_)*(b-_))/(w*w),C=m+K*(v-m),M=_+K*(b-_),G=this.getLineLength(R,U,C,M),H=Math.sqrt(d*d-G*G),Y=Math.sqrt(H*H/(1+O*O))*(v<m?-1:1),q=O*Y;return{x:C+Y,y:M+q}}static getPointOnCubicBezier(d,m,_,v,b,R,U,w,O){function I(H){return H*H*H}function P(H){return 3*H*H*(1-H)}function K(H){return 3*H*(1-H)*(1-H)}function C(H){return(1-H)*(1-H)*(1-H)}const M=w*I(d)+R*P(d)+v*K(d)+m*C(d),G=O*I(d)+U*P(d)+b*K(d)+_*C(d);return{x:M,y:G}}static getPointOnQuadraticBezier(d,m,_,v,b,R,U){function w(C){return C*C}function O(C){return 2*C*(1-C)}function I(C){return(1-C)*(1-C)}const P=R*w(d)+v*O(d)+m*I(d),K=U*w(d)+b*O(d)+_*I(d);return{x:P,y:K}}static getPointOnEllipticalArc(d,m,_,v,b,R){const U=Math.cos(R),w=Math.sin(R),O={x:_*Math.cos(b),y:v*Math.sin(b)};return{x:d+(O.x*U-O.y*w),y:m+(O.x*w+O.y*U)}}static parsePathData(d){if(!d)return[];let m=d;const _=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];m=m.replace(new RegExp(" ","g"),",");for(var v=0;v<_.length;v++)m=m.replace(new RegExp(_[v],"g"),"|"+_[v]);const b=m.split("|"),R=[],U=[];let w=0,O=0;const I=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let P;for(v=1;v<b.length;v++){let T=b[v],F=T.charAt(0);for(T=T.slice(1),U.length=0;P=I.exec(T);)U.push(P[0]);const k=[];for(let X=0,$=U.length;X<$;X++){if(U[X]==="00"){k.push(0,0);continue}const it=parseFloat(U[X]);isNaN(it)?k.push(0):k.push(it)}for(;k.length>0&&!isNaN(k[0]);){let X="",$=[];const it=w,ut=O;var K,C,M,G,H,Y,q,V,D,x;switch(F){case"l":w+=k.shift(),O+=k.shift(),X="L",$.push(w,O);break;case"L":w=k.shift(),O=k.shift(),$.push(w,O);break;case"m":var L=k.shift(),j=k.shift();if(w+=L,O+=j,X="M",R.length>2&&R[R.length-1].command==="z"){for(let Q=R.length-2;Q>=0;Q--)if(R[Q].command==="M"){w=R[Q].points[0]+L,O=R[Q].points[1]+j;break}}$.push(w,O),F="l";break;case"M":w=k.shift(),O=k.shift(),X="M",$.push(w,O),F="L";break;case"h":w+=k.shift(),X="L",$.push(w,O);break;case"H":w=k.shift(),X="L",$.push(w,O);break;case"v":O+=k.shift(),X="L",$.push(w,O);break;case"V":O=k.shift(),X="L",$.push(w,O);break;case"C":$.push(k.shift(),k.shift(),k.shift(),k.shift()),w=k.shift(),O=k.shift(),$.push(w,O);break;case"c":$.push(w+k.shift(),O+k.shift(),w+k.shift(),O+k.shift()),w+=k.shift(),O+=k.shift(),X="C",$.push(w,O);break;case"S":C=w,M=O,K=R[R.length-1],K.command==="C"&&(C=w+(w-K.points[2]),M=O+(O-K.points[3])),$.push(C,M,k.shift(),k.shift()),w=k.shift(),O=k.shift(),X="C",$.push(w,O);break;case"s":C=w,M=O,K=R[R.length-1],K.command==="C"&&(C=w+(w-K.points[2]),M=O+(O-K.points[3])),$.push(C,M,w+k.shift(),O+k.shift()),w+=k.shift(),O+=k.shift(),X="C",$.push(w,O);break;case"Q":$.push(k.shift(),k.shift()),w=k.shift(),O=k.shift(),$.push(w,O);break;case"q":$.push(w+k.shift(),O+k.shift()),w+=k.shift(),O+=k.shift(),X="Q",$.push(w,O);break;case"T":C=w,M=O,K=R[R.length-1],K.command==="Q"&&(C=w+(w-K.points[0]),M=O+(O-K.points[1])),w=k.shift(),O=k.shift(),X="Q",$.push(C,M,w,O);break;case"t":C=w,M=O,K=R[R.length-1],K.command==="Q"&&(C=w+(w-K.points[0]),M=O+(O-K.points[1])),w+=k.shift(),O+=k.shift(),X="Q",$.push(C,M,w,O);break;case"A":G=k.shift(),H=k.shift(),Y=k.shift(),q=k.shift(),V=k.shift(),D=w,x=O,w=k.shift(),O=k.shift(),X="A",$=this.convertEndpointToCenterParameterization(D,x,w,O,q,V,G,H,Y);break;case"a":G=k.shift(),H=k.shift(),Y=k.shift(),q=k.shift(),V=k.shift(),D=w,x=O,w+=k.shift(),O+=k.shift(),X="A",$=this.convertEndpointToCenterParameterization(D,x,w,O,q,V,G,H,Y);break}R.push({command:X||F,points:$,start:{x:it,y:ut},pathLength:this.calcLength(it,ut,X||F,$)})}(F==="z"||F==="Z")&&R.push({command:"z",points:[],start:void 0,pathLength:0})}return R}static calcLength(d,m,_,v){let b,R,U,w;const O=u;switch(_){case"L":return O.getLineLength(d,m,v[0],v[1]);case"C":return(0,r.getCubicArcLength)([d,v[0],v[2],v[4]],[m,v[1],v[3],v[5]],1);case"Q":return(0,r.getQuadraticArcLength)([d,v[0],v[2]],[m,v[1],v[3]],1);case"A":b=0;var I=v[4],P=v[5],K=v[4]+P,C=Math.PI/180;if(Math.abs(I-K)<C&&(C=Math.abs(I-K)),R=O.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],I,0),P<0)for(w=I-C;w>K;w-=C)U=O.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],w,0),b+=O.getLineLength(R.x,R.y,U.x,U.y),R=U;else for(w=I+C;w<K;w+=C)U=O.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],w,0),b+=O.getLineLength(R.x,R.y,U.x,U.y),R=U;return U=O.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],K,0),b+=O.getLineLength(R.x,R.y,U.x,U.y),b}return 0}static convertEndpointToCenterParameterization(d,m,_,v,b,R,U,w,O){const I=O*(Math.PI/180),P=Math.cos(I)*(d-_)/2+Math.sin(I)*(m-v)/2,K=-1*Math.sin(I)*(d-_)/2+Math.cos(I)*(m-v)/2,C=P*P/(U*U)+K*K/(w*w);C>1&&(U*=Math.sqrt(C),w*=Math.sqrt(C));let M=Math.sqrt((U*U*(w*w)-U*U*(K*K)-w*w*(P*P))/(U*U*(K*K)+w*w*(P*P)));b===R&&(M*=-1),isNaN(M)&&(M=0);const G=M*U*K/w,H=M*-w*P/U,Y=(d+_)/2+Math.cos(I)*G-Math.sin(I)*H,q=(m+v)/2+Math.sin(I)*G+Math.cos(I)*H,V=function(k){return Math.sqrt(k[0]*k[0]+k[1]*k[1])},D=function(k,X){return(k[0]*X[0]+k[1]*X[1])/(V(k)*V(X))},x=function(k,X){return(k[0]*X[1]<k[1]*X[0]?-1:1)*Math.acos(D(k,X))},L=x([1,0],[(P-G)/U,(K-H)/w]),j=[(P-G)/U,(K-H)/w],T=[(-1*P-G)/U,(-1*K-H)/w];let F=x(j,T);return D(j,T)<=-1&&(F=Math.PI),D(j,T)>=1&&(F=0),R===0&&F>0&&(F=F-2*Math.PI),R===1&&F<0&&(F=F+2*Math.PI),[Y,q,U,w,L,F,I,R]}}return _d.Path=u,u.prototype.className="Path",u.prototype._attrsAffectingSize=["data"],(0,n._registerNode)(u),a.Factory.addGetterSetter(u,"data"),_d}var B_;function R5(){if(B_)return pd;B_=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.Arrow=void 0;const a=Ae(),t=s4(),n=Ce(),r=ve(),u=U1();let c=class extends t.Line{_sceneFunc(m){super._sceneFunc(m);const _=Math.PI*2,v=this.points();let b=v;const R=this.tension()!==0&&v.length>4;R&&(b=this.getTensionPoints());const U=this.pointerLength(),w=v.length;let O,I;if(R){const C=[b[b.length-4],b[b.length-3],b[b.length-2],b[b.length-1],v[w-2],v[w-1]],M=u.Path.calcLength(b[b.length-4],b[b.length-3],"C",C),G=u.Path.getPointOnQuadraticBezier(Math.min(1,1-U/M),C[0],C[1],C[2],C[3],C[4],C[5]);O=v[w-2]-G.x,I=v[w-1]-G.y}else O=v[w-2]-v[w-4],I=v[w-1]-v[w-3];const P=(Math.atan2(I,O)+_)%_,K=this.pointerWidth();this.pointerAtEnding()&&(m.save(),m.beginPath(),m.translate(v[w-2],v[w-1]),m.rotate(P),m.moveTo(0,0),m.lineTo(-U,K/2),m.lineTo(-U,-K/2),m.closePath(),m.restore(),this.__fillStroke(m)),this.pointerAtBeginning()&&(m.save(),m.beginPath(),m.translate(v[0],v[1]),R?(O=(b[0]+b[2])/2-v[0],I=(b[1]+b[3])/2-v[1]):(O=v[2]-v[0],I=v[3]-v[1]),m.rotate((Math.atan2(-I,-O)+_)%_),m.moveTo(0,0),m.lineTo(-U,K/2),m.lineTo(-U,-K/2),m.closePath(),m.restore(),this.__fillStroke(m))}__fillStroke(m){const _=this.dashEnabled();_&&(this.attrs.dashEnabled=!1,m.setLineDash([])),m.fillStrokeShape(this),_&&(this.attrs.dashEnabled=!0)}getSelfRect(){const m=super.getSelfRect(),_=this.pointerWidth()/2;return{x:m.x,y:m.y-_,width:m.width,height:m.height+_*2}}};return pd.Arrow=c,c.prototype.className="Arrow",(0,r._registerNode)(c),a.Factory.addGetterSetter(c,"pointerLength",10,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(c,"pointerWidth",10,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(c,"pointerAtBeginning",!1),a.Factory.addGetterSetter(c,"pointerAtEnding",!0),pd}var vd={},G_;function C5(){if(G_)return vd;G_=1,Object.defineProperty(vd,"__esModule",{value:!0}),vd.Circle=void 0;const a=Ae(),t=Ni(),n=Ce(),r=ve();let u=class extends t.Shape{_sceneFunc(d){d.beginPath(),d.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(d){this.radius()!==d/2&&this.radius(d/2)}setHeight(d){this.radius()!==d/2&&this.radius(d/2)}};return vd.Circle=u,u.prototype._centroid=!0,u.prototype.className="Circle",u.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(u),a.Factory.addGetterSetter(u,"radius",0,(0,n.getNumberValidator)()),vd}var Ed={},k_;function D5(){if(k_)return Ed;k_=1,Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.Ellipse=void 0;const a=Ae(),t=Ni(),n=Ce(),r=ve();let u=class extends t.Shape{_sceneFunc(d){const m=this.radiusX(),_=this.radiusY();d.beginPath(),d.save(),m!==_&&d.scale(1,_/m),d.arc(0,0,m,0,Math.PI*2,!1),d.restore(),d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(d){this.radiusX(d/2)}setHeight(d){this.radiusY(d/2)}};return Ed.Ellipse=u,u.prototype.className="Ellipse",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,r._registerNode)(u),a.Factory.addComponentsGetterSetter(u,"radius",["x","y"]),a.Factory.addGetterSetter(u,"radiusX",0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(u,"radiusY",0,(0,n.getNumberValidator)()),Ed}var Sd={},H_;function w5(){if(H_)return Sd;H_=1,Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.Image=void 0;const a=Yn(),t=Ae(),n=Ni(),r=ve(),u=Ce();class c extends n.Shape{constructor(m){super(m),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const m=this.image();m&&m.complete||m&&m.readyState===4||m&&m.addEventListener&&m.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const m=!!this.cornerRadius(),_=this.hasShadow();return m&&_?!0:super._useBufferCanvas(!0)}_sceneFunc(m){const _=this.getWidth(),v=this.getHeight(),b=this.cornerRadius(),R=this.attrs.image;let U;if(R){const w=this.attrs.cropWidth,O=this.attrs.cropHeight;w&&O?U=[R,this.cropX(),this.cropY(),w,O,0,0,_,v]:U=[R,0,0,_,v]}(this.hasFill()||this.hasStroke()||b)&&(m.beginPath(),b?a.Util.drawRoundedRectPath(m,_,v,b):m.rect(0,0,_,v),m.closePath(),m.fillStrokeShape(this)),R&&(b&&m.clip(),m.drawImage.apply(m,U))}_hitFunc(m){const _=this.width(),v=this.height(),b=this.cornerRadius();m.beginPath(),b?a.Util.drawRoundedRectPath(m,_,v,b):m.rect(0,0,_,v),m.closePath(),m.fillStrokeShape(this)}getWidth(){var m,_;return(m=this.attrs.width)!==null&&m!==void 0?m:(_=this.image())===null||_===void 0?void 0:_.width}getHeight(){var m,_;return(m=this.attrs.height)!==null&&m!==void 0?m:(_=this.image())===null||_===void 0?void 0:_.height}static fromURL(m,_,v=null){const b=a.Util.createImageElement();b.onload=function(){const R=new c({image:b});_(R)},b.onerror=v,b.crossOrigin="Anonymous",b.src=m}}return Sd.Image=c,c.prototype.className="Image",(0,r._registerNode)(c),t.Factory.addGetterSetter(c,"cornerRadius",0,(0,u.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(c,"image"),t.Factory.addComponentsGetterSetter(c,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(c,"cropX",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropY",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropWidth",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(c,"cropHeight",0,(0,u.getNumberValidator)()),Sd}var Nc={},q_;function N5(){if(q_)return Nc;q_=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.Tag=Nc.Label=void 0;const a=Ae(),t=Ni(),n=x1(),r=Ce(),u=ve(),c=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],d="Change.konva",m="none",_="up",v="right",b="down",R="left",U=c.length;let w=class extends n.Group{constructor(P){super(P),this.on("add.konva",function(K){this._addListeners(K.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(P){let K=this,C;const M=function(){K._sync()};for(C=0;C<U;C++)P.on(c[C]+d,M)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let P=this.getText(),K=this.getTag(),C,M,G,H,Y,q,V;if(P&&K){switch(C=P.width(),M=P.height(),G=K.pointerDirection(),H=K.pointerWidth(),V=K.pointerHeight(),Y=0,q=0,G){case _:Y=C/2,q=-1*V;break;case v:Y=C+H,q=M/2;break;case b:Y=C/2,q=M+V;break;case R:Y=-1*H,q=M/2;break}K.setAttrs({x:-1*Y,y:-1*q,width:C,height:M}),P.setAttrs({x:-1*Y,y:-1*q})}}};Nc.Label=w,w.prototype.className="Label",(0,u._registerNode)(w);class O extends t.Shape{_sceneFunc(P){const K=this.width(),C=this.height(),M=this.pointerDirection(),G=this.pointerWidth(),H=this.pointerHeight(),Y=this.cornerRadius();let q=0,V=0,D=0,x=0;typeof Y=="number"?q=V=D=x=Math.min(Y,K/2,C/2):(q=Math.min(Y[0]||0,K/2,C/2),V=Math.min(Y[1]||0,K/2,C/2),x=Math.min(Y[2]||0,K/2,C/2),D=Math.min(Y[3]||0,K/2,C/2)),P.beginPath(),P.moveTo(q,0),M===_&&(P.lineTo((K-G)/2,0),P.lineTo(K/2,-1*H),P.lineTo((K+G)/2,0)),P.lineTo(K-V,0),P.arc(K-V,V,V,Math.PI*3/2,0,!1),M===v&&(P.lineTo(K,(C-H)/2),P.lineTo(K+G,C/2),P.lineTo(K,(C+H)/2)),P.lineTo(K,C-x),P.arc(K-x,C-x,x,0,Math.PI/2,!1),M===b&&(P.lineTo((K+G)/2,C),P.lineTo(K/2,C+H),P.lineTo((K-G)/2,C)),P.lineTo(D,C),P.arc(D,C-D,D,Math.PI/2,Math.PI,!1),M===R&&(P.lineTo(0,(C+H)/2),P.lineTo(-1*G,C/2),P.lineTo(0,(C-H)/2)),P.lineTo(0,q),P.arc(q,q,q,Math.PI,Math.PI*3/2,!1),P.closePath(),P.fillStrokeShape(this)}getSelfRect(){let P=0,K=0,C=this.pointerWidth(),M=this.pointerHeight(),G=this.pointerDirection(),H=this.width(),Y=this.height();return G===_?(K-=M,Y+=M):G===b?Y+=M:G===R?(P-=C*1.5,H+=C):G===v&&(H+=C*1.5),{x:P,y:K,width:H,height:Y}}}return Nc.Tag=O,O.prototype.className="Tag",(0,u._registerNode)(O),a.Factory.addGetterSetter(O,"pointerDirection",m),a.Factory.addGetterSetter(O,"pointerWidth",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(O,"pointerHeight",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(O,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),Nc}var Td={},j_;function r4(){if(j_)return Td;j_=1,Object.defineProperty(Td,"__esModule",{value:!0}),Td.Rect=void 0;const a=Ae(),t=Ni(),n=ve(),r=Yn(),u=Ce();let c=class extends t.Shape{_sceneFunc(m){const _=this.cornerRadius(),v=this.width(),b=this.height();m.beginPath(),_?r.Util.drawRoundedRectPath(m,v,b,_):m.rect(0,0,v,b),m.closePath(),m.fillStrokeShape(this)}};return Td.Rect=c,c.prototype.className="Rect",(0,n._registerNode)(c),a.Factory.addGetterSetter(c,"cornerRadius",0,(0,u.getNumberOrArrayOfNumbersValidator)(4)),Td}var bd={},F_;function O5(){if(F_)return bd;F_=1,Object.defineProperty(bd,"__esModule",{value:!0}),bd.RegularPolygon=void 0;const a=Ae(),t=Ni(),n=Ce(),r=ve();let u=class extends t.Shape{_sceneFunc(d){const m=this._getPoints();d.beginPath(),d.moveTo(m[0].x,m[0].y);for(let _=1;_<m.length;_++)d.lineTo(m[_].x,m[_].y);d.closePath(),d.fillStrokeShape(this)}_getPoints(){const d=this.attrs.sides,m=this.attrs.radius||0,_=[];for(let v=0;v<d;v++)_.push({x:m*Math.sin(v*2*Math.PI/d),y:-1*m*Math.cos(v*2*Math.PI/d)});return _}getSelfRect(){const d=this._getPoints();let m=d[0].x,_=d[0].y,v=d[0].x,b=d[0].y;return d.forEach(R=>{m=Math.min(m,R.x),_=Math.max(_,R.x),v=Math.min(v,R.y),b=Math.max(b,R.y)}),{x:m,y:v,width:_-m,height:b-v}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(d){this.radius(d/2)}setHeight(d){this.radius(d/2)}};return bd.RegularPolygon=u,u.prototype.className="RegularPolygon",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(u),a.Factory.addGetterSetter(u,"radius",0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(u,"sides",0,(0,n.getNumberValidator)()),bd}var Ad={},K_;function M5(){if(K_)return Ad;K_=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.Ring=void 0;const a=Ae(),t=Ni(),n=Ce(),r=ve(),u=Math.PI*2;let c=class extends t.Shape{_sceneFunc(m){m.beginPath(),m.arc(0,0,this.innerRadius(),0,u,!1),m.moveTo(this.outerRadius(),0),m.arc(0,0,this.outerRadius(),u,0,!0),m.closePath(),m.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(m){this.outerRadius(m/2)}setHeight(m){this.outerRadius(m/2)}};return Ad.Ring=c,c.prototype.className="Ring",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(c),a.Factory.addGetterSetter(c,"innerRadius",0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(c,"outerRadius",0,(0,n.getNumberValidator)()),Ad}var Rd={},Y_;function x5(){if(Y_)return Rd;Y_=1,Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.Sprite=void 0;const a=Ae(),t=Ni(),n=V1(),r=Ce(),u=ve();let c=class extends t.Shape{constructor(m){super(m),this._updated=!0,this.anim=new n.Animation(()=>{const _=this._updated;return this._updated=!1,_}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(m){const _=this.animation(),v=this.frameIndex(),b=v*4,R=this.animations()[_],U=this.frameOffsets(),w=R[b+0],O=R[b+1],I=R[b+2],P=R[b+3],K=this.image();if((this.hasFill()||this.hasStroke())&&(m.beginPath(),m.rect(0,0,I,P),m.closePath(),m.fillStrokeShape(this)),K)if(U){const C=U[_],M=v*2;m.drawImage(K,w,O,I,P,C[M+0],C[M+1],I,P)}else m.drawImage(K,w,O,I,P,0,0,I,P)}_hitFunc(m){const _=this.animation(),v=this.frameIndex(),b=v*4,R=this.animations()[_],U=this.frameOffsets(),w=R[b+2],O=R[b+3];if(m.beginPath(),U){const I=U[_],P=v*2;m.rect(I[P+0],I[P+1],w,O)}else m.rect(0,0,w,O);m.closePath(),m.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const m=this;this.interval=setInterval(function(){m._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const m=this.getLayer();this.anim.setLayers(m),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const m=this.frameIndex(),_=this.animation(),v=this.animations(),b=v[_],R=b.length/4;m<R-1?this.frameIndex(m+1):this.frameIndex(0)}};return Rd.Sprite=c,c.prototype.className="Sprite",(0,u._registerNode)(c),a.Factory.addGetterSetter(c,"animation"),a.Factory.addGetterSetter(c,"animations"),a.Factory.addGetterSetter(c,"frameOffsets"),a.Factory.addGetterSetter(c,"image"),a.Factory.addGetterSetter(c,"frameIndex",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"frameRate",17,(0,r.getNumberValidator)()),a.Factory.backCompat(c,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Rd}var Cd={},X_;function V5(){if(X_)return Cd;X_=1,Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.Star=void 0;const a=Ae(),t=Ni(),n=Ce(),r=ve();let u=class extends t.Shape{_sceneFunc(d){const m=this.innerRadius(),_=this.outerRadius(),v=this.numPoints();d.beginPath(),d.moveTo(0,0-_);for(let b=1;b<v*2;b++){const R=b%2===0?_:m,U=R*Math.sin(b*Math.PI/v),w=-1*R*Math.cos(b*Math.PI/v);d.lineTo(U,w)}d.closePath(),d.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(d){this.outerRadius(d/2)}setHeight(d){this.outerRadius(d/2)}};return Cd.Star=u,u.prototype.className="Star",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(u),a.Factory.addGetterSetter(u,"numPoints",5,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(u,"innerRadius",0,(0,n.getNumberValidator)()),a.Factory.addGetterSetter(u,"outerRadius",0,(0,n.getNumberValidator)()),Cd}var Uh={},Q_;function l4(){if(Q_)return Uh;Q_=1,Object.defineProperty(Uh,"__esModule",{value:!0}),Uh.Text=void 0,Uh.stringToArray=d;const a=Yn(),t=Ae(),n=Ni(),r=ve(),u=Ce(),c=ve();function d(Et){return[...Et].reduce((st,gt,Rt,Nt)=>{if(new RegExp("\\p{Emoji}","u").test(gt)){const et=Nt[Rt+1];et&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(et)?(st.push(gt+et),Nt[Rt+1]=""):st.push(gt)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(gt+(Nt[Rt+1]||""))?st.push(gt+Nt[Rt+1]):Rt>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(gt)?st[st.length-1]+=gt:gt&&st.push(gt);return st},[])}const m="auto",_="center",v="inherit",b="justify",R="Change.konva",U="2d",w="-",O="left",I="text",P="Text",K="top",C="bottom",M="middle",G="normal",H="px ",Y=" ",q="right",V="rtl",D="word",x="char",L="none",j="…",T=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],F=T.length;function k(Et){return Et.split(",").map(st=>{st=st.trim();const gt=st.indexOf(" ")>=0,Rt=st.indexOf('"')>=0||st.indexOf("'")>=0;return gt&&!Rt&&(st=`"${st}"`),st}).join(", ")}let X;function $(){return X||(X=a.Util.createCanvasElement().getContext(U),X)}function it(Et){Et.fillText(this._partialText,this._partialTextX,this._partialTextY)}function ut(Et){Et.setAttr("miterLimit",2),Et.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Q(Et){return Et=Et||{},!Et.fillLinearGradientColorStops&&!Et.fillRadialGradientColorStops&&!Et.fillPatternImage&&(Et.fill=Et.fill||"black"),Et}let at=class extends n.Shape{constructor(st){super(Q(st)),this._partialTextX=0,this._partialTextY=0;for(let gt=0;gt<F;gt++)this.on(T[gt]+R,this._setTextData);this._setTextData()}_sceneFunc(st){const gt=this.textArr,Rt=gt.length;if(!this.text())return;let Nt=this.padding(),et=this.fontSize(),ht=this.lineHeight()*et,At=this.verticalAlign(),Ct=this.direction(),It=0,Pt=this.align(),$t=this.getWidth(),ue=this.letterSpacing(),Yt=this.fill(),Fe=this.textDecoration(),oe=Fe.indexOf("underline")!==-1,Ke=Fe.indexOf("line-through")!==-1,gi;Ct=Ct===v?st.direction:Ct;let ke=ht/2,oi=M;if(r.Konva._fixTextRendering){const ji=this.measureSize("M");oi="alphabetic",ke=(ji.fontBoundingBoxAscent-ji.fontBoundingBoxDescent)/2+ht/2}var en=0,Xn=0;for(Ct===V&&st.setAttr("direction",Ct),st.setAttr("font",this._getContextFont()),st.setAttr("textBaseline",oi),st.setAttr("textAlign",O),At===M?It=(this.getHeight()-Rt*ht-Nt*2)/2:At===C&&(It=this.getHeight()-Rt*ht-Nt*2),st.translate(Nt,It+Nt),gi=0;gi<Rt;gi++){var en=0,Xn=0,nn=gt[gi],Oi=nn.text,De=nn.width,He=nn.lastInParagraph,Qn,fa;if(st.save(),Pt===q?en+=$t-De-Nt*2:Pt===_&&(en+=($t-De-Nt*2)/2),oe){st.save(),st.beginPath();const zn=r.Konva._fixTextRendering?Math.round(et/4):Math.round(et/2),an=en,Re=ke+Xn+zn;st.moveTo(an,Re),Qn=Oi.split(" ").length-1,fa=Pt===b&&!He?$t-Nt*2:De,st.lineTo(an+Math.round(fa),Re),st.lineWidth=et/15;const ga=this._getLinearGradient();st.strokeStyle=ga||Yt,st.stroke(),st.restore()}if(Ke){st.save(),st.beginPath();const zn=r.Konva._fixTextRendering?-Math.round(et/4):0;st.moveTo(en,ke+Xn+zn),Qn=Oi.split(" ").length-1,fa=Pt===b&&!He?$t-Nt*2:De,st.lineTo(en+Math.round(fa),ke+Xn+zn),st.lineWidth=et/15;const an=this._getLinearGradient();st.strokeStyle=an||Yt,st.stroke(),st.restore()}if(Ct!==V&&(ue!==0||Pt===b)){Qn=Oi.split(" ").length-1;const zn=d(Oi);for(let an=0;an<zn.length;an++){const Re=zn[an];Re===" "&&!He&&Pt===b&&(en+=($t-Nt*2-De)/Qn),this._partialTextX=en,this._partialTextY=ke+Xn,this._partialText=Re,st.fillStrokeShape(this),en+=this.measureSize(Re).width+ue}}else ue!==0&&st.setAttr("letterSpacing",`${ue}px`),this._partialTextX=en,this._partialTextY=ke+Xn,this._partialText=Oi,st.fillStrokeShape(this);st.restore(),Rt>1&&(ke+=ht)}}_hitFunc(st){const gt=this.getWidth(),Rt=this.getHeight();st.beginPath(),st.rect(0,0,gt,Rt),st.closePath(),st.fillStrokeShape(this)}setText(st){const gt=a.Util._isString(st)?st:st==null?"":st+"";return this._setAttr(I,gt),this}getWidth(){return this.attrs.width===m||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===m||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return a.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(st){var gt,Rt,Nt,et,ht,At,Ct,It,Pt,$t,ue;let Yt=$(),Fe=this.fontSize(),oe;Yt.save(),Yt.font=this._getContextFont(),oe=Yt.measureText(st),Yt.restore();const Ke=Fe/100;return{actualBoundingBoxAscent:(gt=oe.actualBoundingBoxAscent)!==null&&gt!==void 0?gt:71.58203125*Ke,actualBoundingBoxDescent:(Rt=oe.actualBoundingBoxDescent)!==null&&Rt!==void 0?Rt:0,actualBoundingBoxLeft:(Nt=oe.actualBoundingBoxLeft)!==null&&Nt!==void 0?Nt:-7.421875*Ke,actualBoundingBoxRight:(et=oe.actualBoundingBoxRight)!==null&&et!==void 0?et:75.732421875*Ke,alphabeticBaseline:(ht=oe.alphabeticBaseline)!==null&&ht!==void 0?ht:0,emHeightAscent:(At=oe.emHeightAscent)!==null&&At!==void 0?At:100*Ke,emHeightDescent:(Ct=oe.emHeightDescent)!==null&&Ct!==void 0?Ct:-20*Ke,fontBoundingBoxAscent:(It=oe.fontBoundingBoxAscent)!==null&&It!==void 0?It:91*Ke,fontBoundingBoxDescent:(Pt=oe.fontBoundingBoxDescent)!==null&&Pt!==void 0?Pt:21*Ke,hangingBaseline:($t=oe.hangingBaseline)!==null&&$t!==void 0?$t:72.80000305175781*Ke,ideographicBaseline:(ue=oe.ideographicBaseline)!==null&&ue!==void 0?ue:-21*Ke,width:oe.width,height:Fe}}_getContextFont(){return this.fontStyle()+Y+this.fontVariant()+Y+(this.fontSize()+H)+k(this.fontFamily())}_addTextLine(st){this.align()===b&&(st=st.trim());const Rt=this._getTextWidth(st);return this.textArr.push({text:st,width:Rt,lastInParagraph:!1})}_getTextWidth(st){const gt=this.letterSpacing(),Rt=st.length;return $().measureText(st).width+gt*Rt}_setTextData(){let st=this.text().split(`
`),gt=+this.fontSize(),Rt=0,Nt=this.lineHeight()*gt,et=this.attrs.width,ht=this.attrs.height,At=et!==m&&et!==void 0,Ct=ht!==m&&ht!==void 0,It=this.padding(),Pt=et-It*2,$t=ht-It*2,ue=0,Yt=this.wrap(),Fe=Yt!==L,oe=Yt!==x&&Fe,Ke=this.ellipsis();this.textArr=[],$().font=this._getContextFont();const gi=Ke?this._getTextWidth(j):0;for(let ke=0,oi=st.length;ke<oi;++ke){let en=st[ke],Xn=this._getTextWidth(en);if(At&&Xn>Pt)for(;en.length>0;){let nn=0,Oi=d(en).length,De="",He=0;for(;nn<Oi;){const Qn=nn+Oi>>>1,fa=d(en),ji=fa.slice(0,Qn+1).join(""),da=this._getTextWidth(ji)+gi;da<=Pt?(nn=Qn+1,De=ji,He=da):Oi=Qn}if(De){if(oe){const ji=d(en),da=d(De),zn=ji[da.length],an=zn===Y||zn===w;let Re;if(an&&He<=Pt)Re=da.length;else{const ga=da.lastIndexOf(Y),Fi=da.lastIndexOf(w);Re=Math.max(ga,Fi)+1}Re>0&&(nn=Re,De=ji.slice(0,nn).join(""),He=this._getTextWidth(De))}if(De=De.trimRight(),this._addTextLine(De),Rt=Math.max(Rt,He),ue+=Nt,this._shouldHandleEllipsis(ue)){this._tryToAddEllipsisToLastLine();break}if(en=d(en).slice(nn).join("").trimLeft(),en.length>0&&(Xn=this._getTextWidth(en),Xn<=Pt)){this._addTextLine(en),ue+=Nt,Rt=Math.max(Rt,Xn);break}}else break}else this._addTextLine(en),ue+=Nt,Rt=Math.max(Rt,Xn),this._shouldHandleEllipsis(ue)&&ke<oi-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Ct&&ue+Nt>$t)break}this.textHeight=gt,this.textWidth=Rt}_shouldHandleEllipsis(st){const gt=+this.fontSize(),Rt=this.lineHeight()*gt,Nt=this.attrs.height,et=Nt!==m&&Nt!==void 0,ht=this.padding(),At=Nt-ht*2;return!(this.wrap()!==L)||et&&st+Rt>At}_tryToAddEllipsisToLastLine(){const st=this.attrs.width,gt=st!==m&&st!==void 0,Rt=this.padding(),Nt=st-Rt*2,et=this.ellipsis(),ht=this.textArr[this.textArr.length-1];!ht||!et||(gt&&(this._getTextWidth(ht.text+j)<Nt||(ht.text=ht.text.slice(0,ht.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(ht.text+j))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const st=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,gt=this.hasShadow();return st&&gt?!0:super._useBufferCanvas()}};return Uh.Text=at,at.prototype._fillFunc=it,at.prototype._strokeFunc=ut,at.prototype.className=P,at.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,c._registerNode)(at),t.Factory.overWriteSetter(at,"width",(0,u.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(at,"height",(0,u.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(at,"direction",v),t.Factory.addGetterSetter(at,"fontFamily","Arial"),t.Factory.addGetterSetter(at,"fontSize",12,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(at,"fontStyle",G),t.Factory.addGetterSetter(at,"fontVariant",G),t.Factory.addGetterSetter(at,"padding",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(at,"align",O),t.Factory.addGetterSetter(at,"verticalAlign",K),t.Factory.addGetterSetter(at,"lineHeight",1,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(at,"wrap",D),t.Factory.addGetterSetter(at,"ellipsis",!1,(0,u.getBooleanValidator)()),t.Factory.addGetterSetter(at,"letterSpacing",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(at,"text","",(0,u.getStringValidator)()),t.Factory.addGetterSetter(at,"textDecoration",""),Uh}var Dd={},Z_;function U5(){if(Z_)return Dd;Z_=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.TextPath=void 0;const a=Yn(),t=Ae(),n=Ni(),r=U1(),u=l4(),c=Ce(),d=ve(),m="",_="normal";function v(U){U.fillText(this.partialText,0,0)}function b(U){U.strokeText(this.partialText,0,0)}let R=class extends n.Shape{constructor(w){super(w),this.dummyCanvas=a.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return r.Path.getPathLength(this.dataArray)}_getPointAtLength(w){if(!this.attrs.data)return null;const O=this.pathLength;return w-1>O?null:r.Path.getPointAtLengthOfDataArray(w,this.dataArray)}_readDataAttribute(){this.dataArray=r.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(w){w.setAttr("font",this._getContextFont()),w.setAttr("textBaseline",this.textBaseline()),w.setAttr("textAlign","left"),w.save();const O=this.textDecoration(),I=this.fill(),P=this.fontSize(),K=this.glyphInfo;O==="underline"&&w.beginPath();for(let C=0;C<K.length;C++){w.save();const M=K[C].p0;w.translate(M.x,M.y),w.rotate(K[C].rotation),this.partialText=K[C].text,w.fillStrokeShape(this),O==="underline"&&(C===0&&w.moveTo(0,P/2+1),w.lineTo(P,P/2+1)),w.restore()}O==="underline"&&(w.strokeStyle=I,w.lineWidth=P/20,w.stroke()),w.restore()}_hitFunc(w){w.beginPath();const O=this.glyphInfo;if(O.length>=1){const I=O[0].p0;w.moveTo(I.x,I.y)}for(let I=0;I<O.length;I++){const P=O[I].p1;w.lineTo(P.x,P.y)}w.setAttr("lineWidth",this.fontSize()),w.setAttr("strokeStyle",this.colorKey),w.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return a.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(w){return u.Text.prototype.setText.call(this,w)}_getContextFont(){return u.Text.prototype._getContextFont.call(this)}_getTextSize(w){const I=this.dummyCanvas.getContext("2d");I.save(),I.font=this._getContextFont();const P=I.measureText(w);return I.restore(),{width:P.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:w,height:O}=this._getTextSize(this.attrs.text);if(this.textWidth=w,this.textHeight=O,this.glyphInfo=[],!this.attrs.data)return null;const I=this.letterSpacing(),P=this.align(),K=this.kerningFunc(),C=Math.max(this.textWidth+((this.attrs.text||"").length-1)*I,0);let M=0;P==="center"&&(M=Math.max(0,this.pathLength/2-C/2)),P==="right"&&(M=Math.max(0,this.pathLength-C));const G=(0,u.stringToArray)(this.text());let H=M;for(let Y=0;Y<G.length;Y++){const q=this._getPointAtLength(H);if(!q)return;let V=this._getTextSize(G[Y]).width+I;if(G[Y]===" "&&P==="justify"){const F=this.text().split(" ").length-1;V+=(this.pathLength-C)/F}const D=this._getPointAtLength(H+V);if(!D)return;const x=r.Path.getLineLength(q.x,q.y,D.x,D.y);let L=0;if(K)try{L=K(G[Y-1],G[Y])*this.fontSize()}catch{L=0}q.x+=L,D.x+=L,this.textWidth+=L;const j=r.Path.getPointOnLine(L+x/2,q.x,q.y,D.x,D.y),T=Math.atan2(D.y-q.y,D.x-q.x);this.glyphInfo.push({transposeX:j.x,transposeY:j.y,text:G[Y],rotation:T,p0:q,p1:D}),H+=V}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const w=[];this.glyphInfo.forEach(function(H){w.push(H.p0.x),w.push(H.p0.y),w.push(H.p1.x),w.push(H.p1.y)});let O=w[0]||0,I=w[0]||0,P=w[1]||0,K=w[1]||0,C,M;for(let H=0;H<w.length/2;H++)C=w[H*2],M=w[H*2+1],O=Math.min(O,C),I=Math.max(I,C),P=Math.min(P,M),K=Math.max(K,M);const G=this.fontSize();return{x:O-G/2,y:P-G/2,width:I-O+G,height:K-P+G}}destroy(){return a.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Dd.TextPath=R,R.prototype._fillFunc=v,R.prototype._strokeFunc=b,R.prototype._fillFuncHit=v,R.prototype._strokeFuncHit=b,R.prototype.className="TextPath",R.prototype._attrsAffectingSize=["text","fontSize","data"],(0,d._registerNode)(R),t.Factory.addGetterSetter(R,"data"),t.Factory.addGetterSetter(R,"fontFamily","Arial"),t.Factory.addGetterSetter(R,"fontSize",12,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(R,"fontStyle",_),t.Factory.addGetterSetter(R,"align","left"),t.Factory.addGetterSetter(R,"letterSpacing",0,(0,c.getNumberValidator)()),t.Factory.addGetterSetter(R,"textBaseline","middle"),t.Factory.addGetterSetter(R,"fontVariant",_),t.Factory.addGetterSetter(R,"text",m),t.Factory.addGetterSetter(R,"textDecoration",""),t.Factory.addGetterSetter(R,"kerningFunc",void 0),Dd}var wd={},W_;function I5(){if(W_)return wd;W_=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.Transformer=void 0;const a=Yn(),t=Ae(),n=ei(),r=Ni(),u=r4(),c=x1(),d=ve(),m=Ce(),_=ve(),v="tr-konva",b=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(V=>V+`.${v}`).join(" "),R="nodesRect",U=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],w={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},O="ontouchstart"in d.Konva._global;function I(V,D,x){if(V==="rotater")return x;D+=a.Util.degToRad(w[V]||0);const L=(a.Util.radToDeg(D)%360+360)%360;return a.Util._inRange(L,315+22.5,360)||a.Util._inRange(L,0,22.5)?"ns-resize":a.Util._inRange(L,45-22.5,45+22.5)?"nesw-resize":a.Util._inRange(L,90-22.5,90+22.5)?"ew-resize":a.Util._inRange(L,135-22.5,135+22.5)?"nwse-resize":a.Util._inRange(L,180-22.5,180+22.5)?"ns-resize":a.Util._inRange(L,225-22.5,225+22.5)?"nesw-resize":a.Util._inRange(L,270-22.5,270+22.5)?"ew-resize":a.Util._inRange(L,315-22.5,315+22.5)?"nwse-resize":(a.Util.error("Transformer has unknown angle for cursor detection: "+L),"pointer")}const P=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function K(V){return{x:V.x+V.width/2*Math.cos(V.rotation)+V.height/2*Math.sin(-V.rotation),y:V.y+V.height/2*Math.cos(V.rotation)+V.width/2*Math.sin(V.rotation)}}function C(V,D,x){const L=x.x+(V.x-x.x)*Math.cos(D)-(V.y-x.y)*Math.sin(D),j=x.y+(V.x-x.x)*Math.sin(D)+(V.y-x.y)*Math.cos(D);return{...V,rotation:V.rotation+D,x:L,y:j}}function M(V,D){const x=K(V);return C(V,D,x)}function G(V,D,x){let L=D;for(let j=0;j<V.length;j++){const T=d.Konva.getAngle(V[j]),F=Math.abs(T-D)%(Math.PI*2);Math.min(F,Math.PI*2-F)<x&&(L=T)}return L}let H=0,Y=class extends c.Group{constructor(D){super(D),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(b,this.update),this.getNode()&&this.update()}attachTo(D){return this.setNode(D),this}setNode(D){return a.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([D])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return v+this._id}setNodes(D=[]){this._nodes&&this._nodes.length&&this.detach();const x=D.filter(j=>j.isAncestorOf(this)?(a.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=D=x,D.length===1&&this.useSingleNodeRotation()?this.rotation(D[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(j=>{const T=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},F=j._attrsAffectingSize.map(k=>k+"Change."+this._getEventNamespace()).join(" ");j.on(F,T),j.on(U.map(k=>k+`.${this._getEventNamespace()}`).join(" "),T),j.on(`absoluteTransformChange.${this._getEventNamespace()}`,T),this._proxyDrag(j)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(D){let x;D.on(`dragstart.${this._getEventNamespace()}`,L=>{x=D.getAbsolutePosition(),!this.isDragging()&&D!==this.findOne(".back")&&this.startDrag(L,!1)}),D.on(`dragmove.${this._getEventNamespace()}`,L=>{if(!x)return;const j=D.getAbsolutePosition(),T=j.x-x.x,F=j.y-x.y;this.nodes().forEach(k=>{if(k===D||k.isDragging())return;const X=k.getAbsolutePosition();k.setAbsolutePosition({x:X.x+T,y:X.y+F}),k.startDrag(L)}),x=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(D=>{D.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(R),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(R,this.__getNodeRect)}__getNodeShape(D,x=this.rotation(),L){const j=D.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),T=D.getAbsoluteScale(L),F=D.getAbsolutePosition(L),k=j.x*T.x-D.offsetX()*T.x,X=j.y*T.y-D.offsetY()*T.y,$=(d.Konva.getAngle(D.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),it={x:F.x+k*Math.cos($)+X*Math.sin(-$),y:F.y+X*Math.cos($)+k*Math.sin($),width:j.width*T.x,height:j.height*T.y,rotation:$};return C(it,-d.Konva.getAngle(x),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const x=[];this.nodes().map($=>{const it=$.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),ut=[{x:it.x,y:it.y},{x:it.x+it.width,y:it.y},{x:it.x+it.width,y:it.y+it.height},{x:it.x,y:it.y+it.height}],Q=$.getAbsoluteTransform();ut.forEach(function(at){const Et=Q.point(at);x.push(Et)})});const L=new a.Transform;L.rotate(-d.Konva.getAngle(this.rotation()));let j=1/0,T=1/0,F=-1/0,k=-1/0;x.forEach(function($){const it=L.point($);j===void 0&&(j=F=it.x,T=k=it.y),j=Math.min(j,it.x),T=Math.min(T,it.y),F=Math.max(F,it.x),k=Math.max(k,it.y)}),L.invert();const X=L.point({x:j,y:T});return{x:X.x,y:X.y,width:F-j,height:k-T,rotation:d.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),P.forEach(D=>{this._createAnchor(D)}),this._createAnchor("rotater")}_createAnchor(D){const x=new u.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:D+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:O?10:"auto"}),L=this;x.on("mousedown touchstart",function(j){L._handleMouseDown(j)}),x.on("dragstart",j=>{x.stopDrag(),j.cancelBubble=!0}),x.on("dragend",j=>{j.cancelBubble=!0}),x.on("mouseenter",()=>{const j=d.Konva.getAngle(this.rotation()),T=this.rotateAnchorCursor(),F=I(D,j,T);x.getStage().content&&(x.getStage().content.style.cursor=F),this._cursorChange=!0}),x.on("mouseout",()=>{x.getStage().content&&(x.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(x)}_createBack(){const D=new r.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(x,L){const j=L.getParent(),T=j.padding();x.beginPath(),x.rect(-T,-T,L.width()+T*2,L.height()+T*2),x.moveTo(L.width()/2,-T),j.rotateEnabled()&&j.rotateLineVisible()&&x.lineTo(L.width()/2,-j.rotateAnchorOffset()*a.Util._sign(L.height())-T),x.fillStrokeShape(L)},hitFunc:(x,L)=>{if(!this.shouldOverdrawWholeArea())return;const j=this.padding();x.beginPath(),x.rect(-j,-j,L.width()+j*2,L.height()+j*2),x.fillStrokeShape(L)}});this.add(D),this._proxyDrag(D),D.on("dragstart",x=>{x.cancelBubble=!0}),D.on("dragmove",x=>{x.cancelBubble=!0}),D.on("dragend",x=>{x.cancelBubble=!0}),this.on("dragmove",x=>{this.update()})}_handleMouseDown(D){if(this._transforming)return;this._movingAnchorName=D.target.name().split(" ")[0];const x=this._getNodeRect(),L=x.width,j=x.height,T=Math.sqrt(Math.pow(L,2)+Math.pow(j,2));this.sin=Math.abs(j/T),this.cos=Math.abs(L/T),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const F=D.target.getAbsolutePosition(),k=D.target.getStage().getPointerPosition();this._anchorDragOffset={x:k.x-F.x,y:k.y-F.y},H++,this._fire("transformstart",{evt:D.evt,target:this.getNode()}),this._nodes.forEach(X=>{X._fire("transformstart",{evt:D.evt,target:X})})}_handleMouseMove(D){let x,L,j;const T=this.findOne("."+this._movingAnchorName),F=T.getStage();F.setPointersPositions(D);const k=F.getPointerPosition();let X={x:k.x-this._anchorDragOffset.x,y:k.y-this._anchorDragOffset.y};const $=T.getAbsolutePosition();this.anchorDragBoundFunc()&&(X=this.anchorDragBoundFunc()($,X,D)),T.setAbsolutePosition(X);const it=T.getAbsolutePosition();if($.x===it.x&&$.y===it.y)return;if(this._movingAnchorName==="rotater"){const At=this._getNodeRect();x=T.x()-At.width/2,L=-T.y()+At.height/2;let Ct=Math.atan2(-L,x)+Math.PI/2;At.height<0&&(Ct-=Math.PI);const Pt=d.Konva.getAngle(this.rotation())+Ct,$t=d.Konva.getAngle(this.rotationSnapTolerance()),Yt=G(this.rotationSnaps(),Pt,$t)-At.rotation,Fe=M(At,Yt);this._fitNodesInto(Fe,D);return}const ut=this.shiftBehavior();let Q;ut==="inverted"?Q=this.keepRatio()&&!D.shiftKey:ut==="none"?Q=this.keepRatio():Q=this.keepRatio()||D.shiftKey;var Rt=this.centeredScaling()||D.altKey;if(this._movingAnchorName==="top-left"){if(Q){var at=Rt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};j=Math.sqrt(Math.pow(at.x-T.x(),2)+Math.pow(at.y-T.y(),2));var Et=this.findOne(".top-left").x()>at.x?-1:1,st=this.findOne(".top-left").y()>at.y?-1:1;x=j*this.cos*Et,L=j*this.sin*st,this.findOne(".top-left").x(at.x-x),this.findOne(".top-left").y(at.y-L)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(T.y());else if(this._movingAnchorName==="top-right"){if(Q){var at=Rt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};j=Math.sqrt(Math.pow(T.x()-at.x,2)+Math.pow(at.y-T.y(),2));var Et=this.findOne(".top-right").x()<at.x?-1:1,st=this.findOne(".top-right").y()>at.y?-1:1;x=j*this.cos*Et,L=j*this.sin*st,this.findOne(".top-right").x(at.x+x),this.findOne(".top-right").y(at.y-L)}var gt=T.position();this.findOne(".top-left").y(gt.y),this.findOne(".bottom-right").x(gt.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(T.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(T.x());else if(this._movingAnchorName==="bottom-left"){if(Q){var at=Rt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};j=Math.sqrt(Math.pow(at.x-T.x(),2)+Math.pow(T.y()-at.y,2));var Et=at.x<T.x()?-1:1,st=T.y()<at.y?-1:1;x=j*this.cos*Et,L=j*this.sin*st,T.x(at.x-x),T.y(at.y+L)}gt=T.position(),this.findOne(".top-left").x(gt.x),this.findOne(".bottom-right").y(gt.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(T.y());else if(this._movingAnchorName==="bottom-right"){if(Q){var at=Rt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};j=Math.sqrt(Math.pow(T.x()-at.x,2)+Math.pow(T.y()-at.y,2));var Et=this.findOne(".bottom-right").x()<at.x?-1:1,st=this.findOne(".bottom-right").y()<at.y?-1:1;x=j*this.cos*Et,L=j*this.sin*st,this.findOne(".bottom-right").x(at.x+x),this.findOne(".bottom-right").y(at.y+L)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var Rt=this.centeredScaling()||D.altKey;if(Rt){const At=this.findOne(".top-left"),Ct=this.findOne(".bottom-right"),It=At.x(),Pt=At.y(),$t=this.getWidth()-Ct.x(),ue=this.getHeight()-Ct.y();Ct.move({x:-It,y:-Pt}),At.move({x:$t,y:ue})}const Nt=this.findOne(".top-left").getAbsolutePosition();x=Nt.x,L=Nt.y;const et=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),ht=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x,y:L,width:et,height:ht,rotation:d.Konva.getAngle(this.rotation())},D)}_handleMouseUp(D){this._removeEvents(D)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(D){var x;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const L=this.getNode();H--,this._fire("transformend",{evt:D,target:L}),(x=this.getLayer())===null||x===void 0||x.batchDraw(),L&&this._nodes.forEach(j=>{var T;j._fire("transformend",{evt:D,target:j}),(T=j.getLayer())===null||T===void 0||T.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(D,x){const L=this._getNodeRect(),j=1;if(a.Util._inRange(D.width,-this.padding()*2-j,j)){this.update();return}if(a.Util._inRange(D.height,-this.padding()*2-j,j)){this.update();return}const T=new a.Transform;if(T.rotate(d.Konva.getAngle(this.rotation())),this._movingAnchorName&&D.width<0&&this._movingAnchorName.indexOf("left")>=0){const Q=T.point({x:-this.padding()*2,y:0});D.x+=Q.x,D.y+=Q.y,D.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=Q.x,this._anchorDragOffset.y-=Q.y}else if(this._movingAnchorName&&D.width<0&&this._movingAnchorName.indexOf("right")>=0){const Q=T.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=Q.x,this._anchorDragOffset.y-=Q.y,D.width+=this.padding()*2}if(this._movingAnchorName&&D.height<0&&this._movingAnchorName.indexOf("top")>=0){const Q=T.point({x:0,y:-this.padding()*2});D.x+=Q.x,D.y+=Q.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=Q.x,this._anchorDragOffset.y-=Q.y,D.height+=this.padding()*2}else if(this._movingAnchorName&&D.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const Q=T.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=Q.x,this._anchorDragOffset.y-=Q.y,D.height+=this.padding()*2}if(this.boundBoxFunc()){const Q=this.boundBoxFunc()(L,D);Q?D=Q:a.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const F=1e7,k=new a.Transform;k.translate(L.x,L.y),k.rotate(L.rotation),k.scale(L.width/F,L.height/F);const X=new a.Transform,$=D.width/F,it=D.height/F;this.flipEnabled()===!1?(X.translate(D.x,D.y),X.rotate(D.rotation),X.translate(D.width<0?D.width:0,D.height<0?D.height:0),X.scale(Math.abs($),Math.abs(it))):(X.translate(D.x,D.y),X.rotate(D.rotation),X.scale($,it));const ut=X.multiply(k.invert());this._nodes.forEach(Q=>{var at;const Et=Q.getParent().getAbsoluteTransform(),st=Q.getTransform().copy();st.translate(Q.offsetX(),Q.offsetY());const gt=new a.Transform;gt.multiply(Et.copy().invert()).multiply(ut).multiply(Et).multiply(st);const Rt=gt.decompose();Q.setAttrs(Rt),(at=Q.getLayer())===null||at===void 0||at.batchDraw()}),this.rotation(a.Util._getRotation(D.rotation)),this._nodes.forEach(Q=>{this._fire("transform",{evt:x,target:Q}),Q._fire("transform",{evt:x,target:Q})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(D,x){this.findOne(D).setAttrs(x)}update(){var D;const x=this._getNodeRect();this.rotation(a.Util._getRotation(x.rotation));const L=x.width,j=x.height,T=this.enabledAnchors(),F=this.resizeEnabled(),k=this.padding(),X=this.anchorSize(),$=this.find("._anchor");$.forEach(ut=>{ut.setAttrs({width:X,height:X,offsetX:X/2,offsetY:X/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:X/2+k,offsetY:X/2+k,visible:F&&T.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:L/2,y:0,offsetY:X/2+k,visible:F&&T.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:L,y:0,offsetX:X/2-k,offsetY:X/2+k,visible:F&&T.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:j/2,offsetX:X/2+k,visible:F&&T.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:L,y:j/2,offsetX:X/2-k,visible:F&&T.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:j,offsetX:X/2+k,offsetY:X/2-k,visible:F&&T.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:L/2,y:j,offsetY:X/2-k,visible:F&&T.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:L,y:j,offsetX:X/2-k,offsetY:X/2-k,visible:F&&T.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:L/2,y:-this.rotateAnchorOffset()*a.Util._sign(j)-k,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:L,height:j,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const it=this.anchorStyleFunc();it&&$.forEach(ut=>{it(ut)}),(D=this.getLayer())===null||D===void 0||D.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const D=this.findOne("."+this._movingAnchorName);D&&D.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),c.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(D){return n.Node.prototype.clone.call(this,D)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};wd.Transformer=Y,Y.isTransforming=()=>H>0;function q(V){return V instanceof Array||a.Util.warn("enabledAnchors value should be an array"),V instanceof Array&&V.forEach(function(D){P.indexOf(D)===-1&&a.Util.warn("Unknown anchor name: "+D+". Available names are: "+P.join(", "))}),V||[]}return Y.prototype.className="Transformer",(0,_._registerNode)(Y),t.Factory.addGetterSetter(Y,"enabledAnchors",P,q),t.Factory.addGetterSetter(Y,"flipEnabled",!0,(0,m.getBooleanValidator)()),t.Factory.addGetterSetter(Y,"resizeEnabled",!0),t.Factory.addGetterSetter(Y,"anchorSize",10,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(Y,"rotateEnabled",!0),t.Factory.addGetterSetter(Y,"rotateLineVisible",!0),t.Factory.addGetterSetter(Y,"rotationSnaps",[]),t.Factory.addGetterSetter(Y,"rotateAnchorOffset",50,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(Y,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(Y,"rotationSnapTolerance",5,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(Y,"borderEnabled",!0),t.Factory.addGetterSetter(Y,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(Y,"anchorStrokeWidth",1,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(Y,"anchorFill","white"),t.Factory.addGetterSetter(Y,"anchorCornerRadius",0,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(Y,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(Y,"borderStrokeWidth",1,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(Y,"borderDash"),t.Factory.addGetterSetter(Y,"keepRatio",!0),t.Factory.addGetterSetter(Y,"shiftBehavior","default"),t.Factory.addGetterSetter(Y,"centeredScaling",!1),t.Factory.addGetterSetter(Y,"ignoreStroke",!1),t.Factory.addGetterSetter(Y,"padding",0,(0,m.getNumberValidator)()),t.Factory.addGetterSetter(Y,"nodes"),t.Factory.addGetterSetter(Y,"node"),t.Factory.addGetterSetter(Y,"boundBoxFunc"),t.Factory.addGetterSetter(Y,"anchorDragBoundFunc"),t.Factory.addGetterSetter(Y,"anchorStyleFunc"),t.Factory.addGetterSetter(Y,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(Y,"useSingleNodeRotation",!0),t.Factory.backCompat(Y,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),wd}var Nd={},J_;function L5(){if(J_)return Nd;J_=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.Wedge=void 0;const a=Ae(),t=Ni(),n=ve(),r=Ce(),u=ve();let c=class extends t.Shape{_sceneFunc(m){m.beginPath(),m.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),m.lineTo(0,0),m.closePath(),m.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(m){this.radius(m/2)}setHeight(m){this.radius(m/2)}};return Nd.Wedge=c,c.prototype.className="Wedge",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["radius"],(0,u._registerNode)(c),a.Factory.addGetterSetter(c,"radius",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"angle",0,(0,r.getNumberValidator)()),a.Factory.addGetterSetter(c,"clockwise",!1),a.Factory.backCompat(c,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Nd}var Od={},$_;function z5(){if($_)return Od;$_=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.Blur=void 0;const a=Ae(),t=ei(),n=Ce();function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const u=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],c=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function d(_,v){const b=_.data,R=_.width,U=_.height;let w,O,I,P,K,C,M,G,H,Y,q,V,D,x,L,j,T,F,k,X,$,it,ut,Q;const at=v+v+1,Et=R-1,st=U-1,gt=v+1,Rt=gt*(gt+1)/2,Nt=new r,et=u[v],ht=c[v];let At=null,Ct=Nt,It=null,Pt=null;for(I=1;I<at;I++)Ct=Ct.next=new r,I===gt&&(At=Ct);for(Ct.next=Nt,M=C=0,O=0;O<U;O++){for(j=T=F=k=G=H=Y=q=0,V=gt*(X=b[C]),D=gt*($=b[C+1]),x=gt*(it=b[C+2]),L=gt*(ut=b[C+3]),G+=Rt*X,H+=Rt*$,Y+=Rt*it,q+=Rt*ut,Ct=Nt,I=0;I<gt;I++)Ct.r=X,Ct.g=$,Ct.b=it,Ct.a=ut,Ct=Ct.next;for(I=1;I<gt;I++)P=C+((Et<I?Et:I)<<2),G+=(Ct.r=X=b[P])*(Q=gt-I),H+=(Ct.g=$=b[P+1])*Q,Y+=(Ct.b=it=b[P+2])*Q,q+=(Ct.a=ut=b[P+3])*Q,j+=X,T+=$,F+=it,k+=ut,Ct=Ct.next;for(It=Nt,Pt=At,w=0;w<R;w++)b[C+3]=ut=q*et>>ht,ut!==0?(ut=255/ut,b[C]=(G*et>>ht)*ut,b[C+1]=(H*et>>ht)*ut,b[C+2]=(Y*et>>ht)*ut):b[C]=b[C+1]=b[C+2]=0,G-=V,H-=D,Y-=x,q-=L,V-=It.r,D-=It.g,x-=It.b,L-=It.a,P=M+((P=w+v+1)<Et?P:Et)<<2,j+=It.r=b[P],T+=It.g=b[P+1],F+=It.b=b[P+2],k+=It.a=b[P+3],G+=j,H+=T,Y+=F,q+=k,It=It.next,V+=X=Pt.r,D+=$=Pt.g,x+=it=Pt.b,L+=ut=Pt.a,j-=X,T-=$,F-=it,k-=ut,Pt=Pt.next,C+=4;M+=R}for(w=0;w<R;w++){for(T=F=k=j=H=Y=q=G=0,C=w<<2,V=gt*(X=b[C]),D=gt*($=b[C+1]),x=gt*(it=b[C+2]),L=gt*(ut=b[C+3]),G+=Rt*X,H+=Rt*$,Y+=Rt*it,q+=Rt*ut,Ct=Nt,I=0;I<gt;I++)Ct.r=X,Ct.g=$,Ct.b=it,Ct.a=ut,Ct=Ct.next;for(K=R,I=1;I<=v;I++)C=K+w<<2,G+=(Ct.r=X=b[C])*(Q=gt-I),H+=(Ct.g=$=b[C+1])*Q,Y+=(Ct.b=it=b[C+2])*Q,q+=(Ct.a=ut=b[C+3])*Q,j+=X,T+=$,F+=it,k+=ut,Ct=Ct.next,I<st&&(K+=R);for(C=w,It=Nt,Pt=At,O=0;O<U;O++)P=C<<2,b[P+3]=ut=q*et>>ht,ut>0?(ut=255/ut,b[P]=(G*et>>ht)*ut,b[P+1]=(H*et>>ht)*ut,b[P+2]=(Y*et>>ht)*ut):b[P]=b[P+1]=b[P+2]=0,G-=V,H-=D,Y-=x,q-=L,V-=It.r,D-=It.g,x-=It.b,L-=It.a,P=w+((P=O+gt)<st?P:st)*R<<2,G+=j+=It.r=b[P],H+=T+=It.g=b[P+1],Y+=F+=It.b=b[P+2],q+=k+=It.a=b[P+3],It=It.next,V+=X=Pt.r,D+=$=Pt.g,x+=it=Pt.b,L+=ut=Pt.a,j-=X,T-=$,F-=it,k-=ut,Pt=Pt.next,C+=R}}const m=function(v){const b=Math.round(this.blurRadius());b>0&&d(v,b)};return Od.Blur=m,a.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Od}var Md={},t2;function P5(){if(t2)return Md;t2=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.Brighten=void 0;const a=Ae(),t=ei(),n=Ce(),r=function(u){const c=this.brightness()*255,d=u.data,m=d.length;for(let _=0;_<m;_+=4)d[_]+=c,d[_+1]+=c,d[_+2]+=c};return Md.Brighten=r,a.Factory.addGetterSetter(t.Node,"brightness",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Md}var xd={},e2;function B5(){if(e2)return xd;e2=1,Object.defineProperty(xd,"__esModule",{value:!0}),xd.Contrast=void 0;const a=Ae(),t=ei(),n=Ce(),r=function(u){const c=Math.pow((this.contrast()+100)/100,2),d=u.data,m=d.length;let _=150,v=150,b=150;for(let R=0;R<m;R+=4)_=d[R],v=d[R+1],b=d[R+2],_/=255,_-=.5,_*=c,_+=.5,_*=255,v/=255,v-=.5,v*=c,v+=.5,v*=255,b/=255,b-=.5,b*=c,b+=.5,b*=255,_=_<0?0:_>255?255:_,v=v<0?0:v>255?255:v,b=b<0?0:b>255?255:b,d[R]=_,d[R+1]=v,d[R+2]=b};return xd.Contrast=r,a.Factory.addGetterSetter(t.Node,"contrast",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),xd}var Vd={},n2;function G5(){if(n2)return Vd;n2=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.Emboss=void 0;const a=Ae(),t=ei(),n=Yn(),r=Ce(),u=function(c){const d=this.embossStrength()*10,m=this.embossWhiteLevel()*255,_=this.embossDirection(),v=this.embossBlend(),b=c.data,R=c.width,U=c.height,w=R*4;let O=0,I=0,P=U;switch(_){case"top-left":O=-1,I=-1;break;case"top":O=-1,I=0;break;case"top-right":O=-1,I=1;break;case"right":O=0,I=1;break;case"bottom-right":O=1,I=1;break;case"bottom":O=1,I=0;break;case"bottom-left":O=1,I=-1;break;case"left":O=0,I=-1;break;default:n.Util.error("Unknown emboss direction: "+_)}do{const K=(P-1)*w;let C=O;P+C<1&&(C=0),P+C>U&&(C=0);const M=(P-1+C)*R*4;let G=R;do{const H=K+(G-1)*4;let Y=I;G+Y<1&&(Y=0),G+Y>R&&(Y=0);const q=M+(G-1+Y)*4,V=b[H]-b[q],D=b[H+1]-b[q+1],x=b[H+2]-b[q+2];let L=V;const j=L>0?L:-L,T=D>0?D:-D,F=x>0?x:-x;if(T>j&&(L=D),F>j&&(L=x),L*=d,v){const k=b[H]+L,X=b[H+1]+L,$=b[H+2]+L;b[H]=k>255?255:k<0?0:k,b[H+1]=X>255?255:X<0?0:X,b[H+2]=$>255?255:$<0?0:$}else{let k=m-L;k<0?k=0:k>255&&(k=255),b[H]=b[H+1]=b[H+2]=k}}while(--G)}while(--P)};return Vd.Emboss=u,a.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,r.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,r.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,a.Factory.afterSetFilter),Vd}var Ud={},i2;function k5(){if(i2)return Ud;i2=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.Enhance=void 0;const a=Ae(),t=ei(),n=Ce();function r(c,d,m,_,v){const b=m-d,R=v-_;if(b===0)return _+R/2;if(R===0)return _;let U=(c-d)/b;return U=R*U+_,U}const u=function(c){const d=c.data,m=d.length;let _=d[0],v=_,b,R=d[1],U=R,w,O=d[2],I=O,P;const K=this.enhance();if(K===0)return;for(let L=0;L<m;L+=4)b=d[L+0],b<_?_=b:b>v&&(v=b),w=d[L+1],w<R?R=w:w>U&&(U=w),P=d[L+2],P<O?O=P:P>I&&(I=P);v===_&&(v=255,_=0),U===R&&(U=255,R=0),I===O&&(I=255,O=0);let C,M,G,H,Y,q,V,D,x;K>0?(M=v+K*(255-v),G=_-K*(_-0),Y=U+K*(255-U),q=R-K*(R-0),D=I+K*(255-I),x=O-K*(O-0)):(C=(v+_)*.5,M=v+K*(v-C),G=_+K*(_-C),H=(U+R)*.5,Y=U+K*(U-H),q=R+K*(R-H),V=(I+O)*.5,D=I+K*(I-V),x=O+K*(O-V));for(let L=0;L<m;L+=4)d[L+0]=r(d[L+0],_,v,G,M),d[L+1]=r(d[L+1],R,U,q,Y),d[L+2]=r(d[L+2],O,I,x,D)};return Ud.Enhance=u,a.Factory.addGetterSetter(t.Node,"enhance",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Ud}var Id={},a2;function H5(){if(a2)return Id;a2=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.Grayscale=void 0;const a=function(t){const n=t.data,r=n.length;for(let u=0;u<r;u+=4){const c=.34*n[u]+.5*n[u+1]+.16*n[u+2];n[u]=c,n[u+1]=c,n[u+2]=c}};return Id.Grayscale=a,Id}var Ld={},s2;function q5(){if(s2)return Ld;s2=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.HSL=void 0;const a=Ae(),t=ei(),n=Ce();a.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"luminance",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter);const r=function(u){const c=u.data,d=c.length,m=1,_=Math.pow(2,this.saturation()),v=Math.abs(this.hue()+360)%360,b=this.luminance()*127,R=m*_*Math.cos(v*Math.PI/180),U=m*_*Math.sin(v*Math.PI/180),w=.299*m+.701*R+.167*U,O=.587*m-.587*R+.33*U,I=.114*m-.114*R-.497*U,P=.299*m-.299*R-.328*U,K=.587*m+.413*R+.035*U,C=.114*m-.114*R+.293*U,M=.299*m-.3*R+1.25*U,G=.587*m-.586*R-1.05*U,H=.114*m+.886*R-.2*U;let Y,q,V,D;for(let x=0;x<d;x+=4)Y=c[x+0],q=c[x+1],V=c[x+2],D=c[x+3],c[x+0]=w*Y+O*q+I*V+b,c[x+1]=P*Y+K*q+C*V+b,c[x+2]=M*Y+G*q+H*V+b,c[x+3]=D};return Ld.HSL=r,Ld}var zd={},r2;function j5(){if(r2)return zd;r2=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.HSV=void 0;const a=Ae(),t=ei(),n=Ce(),r=function(u){const c=u.data,d=c.length,m=Math.pow(2,this.value()),_=Math.pow(2,this.saturation()),v=Math.abs(this.hue()+360)%360,b=m*_*Math.cos(v*Math.PI/180),R=m*_*Math.sin(v*Math.PI/180),U=.299*m+.701*b+.167*R,w=.587*m-.587*b+.33*R,O=.114*m-.114*b-.497*R,I=.299*m-.299*b-.328*R,P=.587*m+.413*b+.035*R,K=.114*m-.114*b+.293*R,C=.299*m-.3*b+1.25*R,M=.587*m-.586*b-1.05*R,G=.114*m+.886*b-.2*R;let H,Y,q,V;for(let D=0;D<d;D+=4)H=c[D+0],Y=c[D+1],q=c[D+2],V=c[D+3],c[D+0]=U*H+w*Y+O*q,c[D+1]=I*H+P*Y+K*q,c[D+2]=C*H+M*Y+G*q,c[D+3]=V};return zd.HSV=r,a.Factory.addGetterSetter(t.Node,"hue",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"saturation",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"value",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),zd}var Pd={},l2;function F5(){if(l2)return Pd;l2=1,Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.Invert=void 0;const a=function(t){const n=t.data,r=n.length;for(let u=0;u<r;u+=4)n[u]=255-n[u],n[u+1]=255-n[u+1],n[u+2]=255-n[u+2]};return Pd.Invert=a,Pd}var Bd={},o2;function K5(){if(o2)return Bd;o2=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.Kaleidoscope=void 0;const a=Ae(),t=ei(),n=Yn(),r=Ce(),u=function(m,_,v){const b=m.data,R=_.data,U=m.width,w=m.height,O=v.polarCenterX||U/2,I=v.polarCenterY||w/2;let P=Math.sqrt(O*O+I*I),K=U-O,C=w-I;const M=Math.sqrt(K*K+C*C);P=M>P?M:P;const G=w,H=U,Y=360/H*Math.PI/180;for(let q=0;q<H;q+=1){const V=Math.sin(q*Y),D=Math.cos(q*Y);for(let x=0;x<G;x+=1){K=Math.floor(O+P*x/G*D),C=Math.floor(I+P*x/G*V);let L=(C*U+K)*4;const j=b[L+0],T=b[L+1],F=b[L+2],k=b[L+3];L=(q+x*U)*4,R[L+0]=j,R[L+1]=T,R[L+2]=F,R[L+3]=k}}},c=function(m,_,v){const b=m.data,R=_.data,U=m.width,w=m.height,O=v.polarCenterX||U/2,I=v.polarCenterY||w/2;let P=Math.sqrt(O*O+I*I),K=U-O,C=w-I;const M=Math.sqrt(K*K+C*C);P=M>P?M:P;const G=w,H=U,Y=0;let q,V;for(K=0;K<U;K+=1)for(C=0;C<w;C+=1){const D=K-O,x=C-I,L=Math.sqrt(D*D+x*x)*G/P;let j=(Math.atan2(x,D)*180/Math.PI+360+Y)%360;j=j*H/360,q=Math.floor(j),V=Math.floor(L);let T=(V*U+q)*4;const F=b[T+0],k=b[T+1],X=b[T+2],$=b[T+3];T=(C*U+K)*4,R[T+0]=F,R[T+1]=k,R[T+2]=X,R[T+3]=$}},d=function(m){const _=m.width,v=m.height;let b,R,U,w,O,I,P,K,C,M,G=Math.round(this.kaleidoscopePower());const H=Math.round(this.kaleidoscopeAngle()),Y=Math.floor(_*(H%360)/360);if(G<1)return;const q=n.Util.createCanvasElement();q.width=_,q.height=v;const V=q.getContext("2d").getImageData(0,0,_,v);n.Util.releaseCanvas(q),u(m,V,{polarCenterX:_/2,polarCenterY:v/2});let D=_/Math.pow(2,G);for(;D<=8;)D=D*2,G-=1;D=Math.ceil(D);let x=D,L=0,j=x,T=1;for(Y+D>_&&(L=x,j=0,T=-1),R=0;R<v;R+=1)for(b=L;b!==j;b+=T)U=Math.round(b+Y)%_,C=(_*R+U)*4,O=V.data[C+0],I=V.data[C+1],P=V.data[C+2],K=V.data[C+3],M=(_*R+b)*4,V.data[M+0]=O,V.data[M+1]=I,V.data[M+2]=P,V.data[M+3]=K;for(R=0;R<v;R+=1)for(x=Math.floor(D),w=0;w<G;w+=1){for(b=0;b<x+1;b+=1)C=(_*R+b)*4,O=V.data[C+0],I=V.data[C+1],P=V.data[C+2],K=V.data[C+3],M=(_*R+x*2-b-1)*4,V.data[M+0]=O,V.data[M+1]=I,V.data[M+2]=P,V.data[M+3]=K;x*=2}c(V,m,{polarRotation:0})};return Bd.Kaleidoscope=d,a.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,r.getNumberValidator)(),a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,r.getNumberValidator)(),a.Factory.afterSetFilter),Bd}var Gd={},u2;function Y5(){if(u2)return Gd;u2=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.Mask=void 0;const a=Ae(),t=ei(),n=Ce();function r(U,w,O){let I=(O*U.width+w)*4;const P=[];return P.push(U.data[I++],U.data[I++],U.data[I++],U.data[I++]),P}function u(U,w){return Math.sqrt(Math.pow(U[0]-w[0],2)+Math.pow(U[1]-w[1],2)+Math.pow(U[2]-w[2],2))}function c(U){const w=[0,0,0];for(let O=0;O<U.length;O++)w[0]+=U[O][0],w[1]+=U[O][1],w[2]+=U[O][2];return w[0]/=U.length,w[1]/=U.length,w[2]/=U.length,w}function d(U,w){const O=r(U,0,0),I=r(U,U.width-1,0),P=r(U,0,U.height-1),K=r(U,U.width-1,U.height-1),C=w||10;if(u(O,I)<C&&u(I,K)<C&&u(K,P)<C&&u(P,O)<C){const M=c([I,O,K,P]),G=[];for(let H=0;H<U.width*U.height;H++){const Y=u(M,[U.data[H*4],U.data[H*4+1],U.data[H*4+2]]);G[H]=Y<C?0:255}return G}}function m(U,w){for(let O=0;O<U.width*U.height;O++)U.data[4*O+3]=w[O]}function _(U,w,O){const I=[1,1,1,1,0,1,1,1,1],P=Math.round(Math.sqrt(I.length)),K=Math.floor(P/2),C=[];for(let M=0;M<O;M++)for(let G=0;G<w;G++){const H=M*w+G;let Y=0;for(let q=0;q<P;q++)for(let V=0;V<P;V++){const D=M+q-K,x=G+V-K;if(D>=0&&D<O&&x>=0&&x<w){const L=D*w+x,j=I[q*P+V];Y+=U[L]*j}}C[H]=Y===255*8?255:0}return C}function v(U,w,O){const I=[1,1,1,1,1,1,1,1,1],P=Math.round(Math.sqrt(I.length)),K=Math.floor(P/2),C=[];for(let M=0;M<O;M++)for(let G=0;G<w;G++){const H=M*w+G;let Y=0;for(let q=0;q<P;q++)for(let V=0;V<P;V++){const D=M+q-K,x=G+V-K;if(D>=0&&D<O&&x>=0&&x<w){const L=D*w+x,j=I[q*P+V];Y+=U[L]*j}}C[H]=Y>=255*4?255:0}return C}function b(U,w,O){const I=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],P=Math.round(Math.sqrt(I.length)),K=Math.floor(P/2),C=[];for(let M=0;M<O;M++)for(let G=0;G<w;G++){const H=M*w+G;let Y=0;for(let q=0;q<P;q++)for(let V=0;V<P;V++){const D=M+q-K,x=G+V-K;if(D>=0&&D<O&&x>=0&&x<w){const L=D*w+x,j=I[q*P+V];Y+=U[L]*j}}C[H]=Y}return C}const R=function(U){const w=this.threshold();let O=d(U,w);return O&&(O=_(O,U.width,U.height),O=v(O,U.width,U.height),O=b(O,U.width,U.height),m(U,O)),U};return Gd.Mask=R,a.Factory.addGetterSetter(t.Node,"threshold",0,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Gd}var kd={},c2;function X5(){if(c2)return kd;c2=1,Object.defineProperty(kd,"__esModule",{value:!0}),kd.Noise=void 0;const a=Ae(),t=ei(),n=Ce(),r=function(u){const c=this.noise()*255,d=u.data,m=d.length,_=c/2;for(let v=0;v<m;v+=4)d[v+0]+=_-2*_*Math.random(),d[v+1]+=_-2*_*Math.random(),d[v+2]+=_-2*_*Math.random()};return kd.Noise=r,a.Factory.addGetterSetter(t.Node,"noise",.2,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),kd}var Hd={},h2;function Q5(){if(h2)return Hd;h2=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.Pixelate=void 0;const a=Ae(),t=Yn(),n=ei(),r=Ce(),u=function(c){let d=Math.ceil(this.pixelSize()),m=c.width,_=c.height,v,b,R,U,w,O,I,P=Math.ceil(m/d),K=Math.ceil(_/d),C,M,G,H,Y,q,V,D=c.data;if(d<=0){t.Util.error("pixelSize value can not be <= 0");return}for(Y=0;Y<P;Y+=1)for(q=0;q<K;q+=1){for(U=0,w=0,O=0,I=0,C=Y*d,M=C+d,G=q*d,H=G+d,V=0,v=C;v<M;v+=1)if(!(v>=m))for(b=G;b<H;b+=1)b>=_||(R=(m*b+v)*4,U+=D[R+0],w+=D[R+1],O+=D[R+2],I+=D[R+3],V+=1);for(U=U/V,w=w/V,O=O/V,I=I/V,v=C;v<M;v+=1)if(!(v>=m))for(b=G;b<H;b+=1)b>=_||(R=(m*b+v)*4,D[R+0]=U,D[R+1]=w,D[R+2]=O,D[R+3]=I)}};return Hd.Pixelate=u,a.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,r.getNumberValidator)(),a.Factory.afterSetFilter),Hd}var qd={},f2;function Z5(){if(f2)return qd;f2=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.Posterize=void 0;const a=Ae(),t=ei(),n=Ce(),r=function(u){const c=Math.round(this.levels()*254)+1,d=u.data,m=d.length,_=255/c;for(let v=0;v<m;v+=1)d[v]=Math.floor(d[v]/_)*_};return qd.Posterize=r,a.Factory.addGetterSetter(t.Node,"levels",.5,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),qd}var jd={},d2;function W5(){if(d2)return jd;d2=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.RGB=void 0;const a=Ae(),t=ei(),n=Ce(),r=function(u){const c=u.data,d=c.length,m=this.red(),_=this.green(),v=this.blue();for(let b=0;b<d;b+=4){const R=(.34*c[b]+.5*c[b+1]+.16*c[b+2])/255;c[b]=R*m,c[b+1]=R*_,c[b+2]=R*v,c[b+3]=c[b+3]}};return jd.RGB=r,a.Factory.addGetterSetter(t.Node,"red",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)}),a.Factory.addGetterSetter(t.Node,"green",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)}),a.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,a.Factory.afterSetFilter),jd}var Fd={},g2;function J5(){if(g2)return Fd;g2=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.RGBA=void 0;const a=Ae(),t=ei(),n=Ce(),r=function(u){const c=u.data,d=c.length,m=this.red(),_=this.green(),v=this.blue(),b=this.alpha();for(let R=0;R<d;R+=4){const U=1-b;c[R]=m*b+c[R]*U,c[R+1]=_*b+c[R+1]*U,c[R+2]=v*b+c[R+2]*U}};return Fd.RGBA=r,a.Factory.addGetterSetter(t.Node,"red",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)}),a.Factory.addGetterSetter(t.Node,"green",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)}),a.Factory.addGetterSetter(t.Node,"blue",0,n.RGBComponent,a.Factory.afterSetFilter),a.Factory.addGetterSetter(t.Node,"alpha",1,function(u){return this._filterUpToDate=!1,u>1?1:u<0?0:u}),Fd}var Kd={},m2;function $5(){if(m2)return Kd;m2=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.Sepia=void 0;const a=function(t){const n=t.data,r=n.length;for(let u=0;u<r;u+=4){const c=n[u+0],d=n[u+1],m=n[u+2];n[u+0]=Math.min(255,c*.393+d*.769+m*.189),n[u+1]=Math.min(255,c*.349+d*.686+m*.168),n[u+2]=Math.min(255,c*.272+d*.534+m*.131)}};return Kd.Sepia=a,Kd}var Yd={},p2;function tS(){if(p2)return Yd;p2=1,Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.Solarize=void 0;const a=function(t){const n=t.data,r=t.width,u=t.height,c=r*4;let d=u;do{const m=(d-1)*c;let _=r;do{const v=m+(_-1)*4;let b=n[v],R=n[v+1],U=n[v+2];b>127&&(b=255-b),R>127&&(R=255-R),U>127&&(U=255-U),n[v]=b,n[v+1]=R,n[v+2]=U}while(--_)}while(--d)};return Yd.Solarize=a,Yd}var Xd={},y2;function eS(){if(y2)return Xd;y2=1,Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.Threshold=void 0;const a=Ae(),t=ei(),n=Ce(),r=function(u){const c=this.threshold()*255,d=u.data,m=d.length;for(let _=0;_<m;_+=1)d[_]=d[_]<c?0:255};return Xd.Threshold=r,a.Factory.addGetterSetter(t.Node,"threshold",.5,(0,n.getNumberValidator)(),a.Factory.afterSetFilter),Xd}var _2;function nS(){if(_2)return od;_2=1,Object.defineProperty(od,"__esModule",{value:!0}),od.Konva=void 0;const a=s1(),t=b5(),n=R5(),r=C5(),u=D5(),c=w5(),d=N5(),m=s4(),_=U1(),v=r4(),b=O5(),R=M5(),U=x5(),w=V5(),O=l4(),I=U5(),P=I5(),K=L5(),C=z5(),M=P5(),G=B5(),H=G5(),Y=k5(),q=H5(),V=q5(),D=j5(),x=F5(),L=K5(),j=Y5(),T=X5(),F=Q5(),k=Z5(),X=W5(),$=J5(),it=$5(),ut=tS(),Q=eS();return od.Konva=a.Konva.Util._assign(a.Konva,{Arc:t.Arc,Arrow:n.Arrow,Circle:r.Circle,Ellipse:u.Ellipse,Image:c.Image,Label:d.Label,Tag:d.Tag,Line:m.Line,Path:_.Path,Rect:v.Rect,RegularPolygon:b.RegularPolygon,Ring:R.Ring,Sprite:U.Sprite,Star:w.Star,Text:O.Text,TextPath:I.TextPath,Transformer:P.Transformer,Wedge:K.Wedge,Filters:{Blur:C.Blur,Brighten:M.Brighten,Contrast:G.Contrast,Emboss:H.Emboss,Enhance:Y.Enhance,Grayscale:q.Grayscale,HSL:V.HSL,HSV:D.HSV,Invert:x.Invert,Kaleidoscope:L.Kaleidoscope,Mask:j.Mask,Noise:T.Noise,Pixelate:F.Pixelate,Posterize:k.Posterize,RGB:X.RGB,RGBA:$.RGBA,Sepia:it.Sepia,Solarize:ut.Solarize,Threshold:Q.Threshold}}),od}var iS=Xm.exports,v2;function aS(){if(v2)return Xm.exports;v2=1,Object.defineProperty(iS,"__esModule",{value:!0});const a=nS();return Xm.exports=a.Konva,Xm.exports}aS();var Bm={exports:{}},E2;function sS(){return E2||(E2=1,function(a,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var n=s1();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=s1();a.exports=r.Konva}(Bm,Bm.exports)),Bm.exports}var rS=sS();const s0=N1(rS);var Hp={exports:{}},qp={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S2;function lS(){return S2||(S2=1,function(a){a.exports=function(t){function n(s,l,f,y){return new Vg(s,l,f,y)}function r(){}function u(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(s){return s===null||typeof s!="object"?null:(s=qe&&s[qe]||s["@@iterator"],typeof s=="function"?s:null)}function d(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===kn?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case sl:return"Fragment";case xs:return"Portal";case rl:return"Profiler";case to:return"StrictMode";case mr:return"Suspense";case mc:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case ll:return(s.displayName||"Context")+".Provider";case Ef:return(s._context.displayName||"Context")+".Consumer";case lh:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Qo:return l=s.displayName||null,l!==null?l:d(s.type)||"Memo";case pr:l=s._payload,s=s._init;try{return d(s(l))}catch{}}return null}function m(s){if(ol===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);ol=l&&l[1]||"",ul=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ol+s+ul}function _(s,l){if(!s||Zo)return"";Zo=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(l){var zt=function(){throw Error()};if(Object.defineProperty(zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(zt,[])}catch(ie){var xt=ie}Reflect.construct(s,[],zt)}else{try{zt.call()}catch(ie){xt=ie}s.call(zt.prototype)}}else{try{throw Error()}catch(ie){xt=ie}(zt=s())&&typeof zt.catch=="function"&&zt.catch(function(){})}}catch(ie){if(ie&&xt&&typeof ie.stack=="string")return[ie.stack,xt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=y.DetermineComponentFrameRoot(),W=N[0],nt=N[1];if(W&&nt){var dt=W.split(`
`),Tt=nt.split(`
`);for(S=y=0;y<dt.length&&!dt[y].includes("DetermineComponentFrameRoot");)y++;for(;S<Tt.length&&!Tt[S].includes("DetermineComponentFrameRoot");)S++;if(y===dt.length||S===Tt.length)for(y=dt.length-1,S=Tt.length-1;1<=y&&0<=S&&dt[y]!==Tt[S];)S--;for(;1<=y&&0<=S;y--,S--)if(dt[y]!==Tt[S]){if(y!==1||S!==1)do if(y--,S--,0>S||dt[y]!==Tt[S]){var Ut=`
`+dt[y].replace(" at new "," at ");return s.displayName&&Ut.includes("<anonymous>")&&(Ut=Ut.replace("<anonymous>",s.displayName)),Ut}while(1<=y&&0<=S);break}}}finally{Zo=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?m(f):""}function v(s){switch(s.tag){case 26:case 27:case 5:return m(s.type);case 16:return m("Lazy");case 13:return m("Suspense");case 19:return m("SuspenseList");case 0:case 15:return s=_(s.type,!1),s;case 11:return s=_(s.type.render,!1),s;case 1:return s=_(s.type,!0),s;default:return""}}function b(s){try{var l="";do l+=v(s),s=s.return;while(s);return l}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function R(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,l.flags&4098&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function U(s){if(R(s)!==s)throw Error(u(188))}function w(s){var l=s.alternate;if(!l){if(l=R(s),l===null)throw Error(u(188));return l!==s?null:s}for(var f=s,y=l;;){var S=f.return;if(S===null)break;var N=S.alternate;if(N===null){if(y=S.return,y!==null){f=y;continue}break}if(S.child===N.child){for(N=S.child;N;){if(N===f)return U(S),s;if(N===y)return U(S),l;N=N.sibling}throw Error(u(188))}if(f.return!==y.return)f=S,y=N;else{for(var W=!1,nt=S.child;nt;){if(nt===f){W=!0,f=S,y=N;break}if(nt===y){W=!0,y=S,f=N;break}nt=nt.sibling}if(!W){for(nt=N.child;nt;){if(nt===f){W=!0,f=N,y=S;break}if(nt===y){W=!0,y=N,f=S;break}nt=nt.sibling}if(!W)throw Error(u(189))}}if(f.alternate!==y)throw Error(u(190))}if(f.tag!==3)throw Error(u(188));return f.stateNode.current===f?s:l}function O(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=O(s),l!==null)return l;s=s.sibling}return null}function I(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(s.tag!==4&&(l=I(s),l!==null))return l;s=s.sibling}return null}function P(s){return{current:s}}function K(s){0>dl||(s.current=Eh[dl],Eh[dl]=null,dl--)}function C(s,l){dl++,Eh[dl]=s.current,s.current=l}function M(s){return s>>>=0,s===0?32:31-(jf(s)/ip|0)|0}function G(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function H(s,l){var f=s.pendingLanes;if(f===0)return 0;var y=0,S=s.suspendedLanes,N=s.pingedLanes,W=s.warmLanes;s=s.finishedLanes!==0;var nt=f&134217727;return nt!==0?(f=nt&~S,f!==0?y=G(f):(N&=nt,N!==0?y=G(N):s||(W=nt&~W,W!==0&&(y=G(W))))):(nt=f&~S,nt!==0?y=G(nt):N!==0?y=G(N):s||(W=f&~W,W!==0&&(y=G(W)))),y===0?0:l!==0&&l!==y&&!(l&S)&&(S=y&-y,W=l&-l,S>=W||S===32&&(W&4194176)!==0)?l:y}function Y(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function q(s,l){switch(s){case 1:case 2:case 4:case 8:return l+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V(){var s=vc;return vc<<=1,!(vc&4194176)&&(vc=128),s}function D(){var s=eu;return eu<<=1,!(eu&62914560)&&(eu=4194304),s}function x(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function L(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function j(s,l,f,y,S,N){var W=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var nt=s.entanglements,dt=s.expirationTimes,Tt=s.hiddenUpdates;for(f=W&~f;0<f;){var Ut=31-On(f),zt=1<<Ut;nt[Ut]=0,dt[Ut]=-1;var xt=Tt[Ut];if(xt!==null)for(Tt[Ut]=null,Ut=0;Ut<xt.length;Ut++){var ie=xt[Ut];ie!==null&&(ie.lane&=-536870913)}f&=~zt}y!==0&&T(s,y,0),N!==0&&S===0&&s.tag!==0&&(s.suspendedLanes|=N&~(W&~l))}function T(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var y=31-On(l);s.entangledLanes|=l,s.entanglements[y]=s.entanglements[y]|1073741824|f&4194218}function F(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var y=31-On(f),S=1<<y;S&l|s[y]&l&&(s[y]|=l),f&=~S}}function k(s){return s&=-s,2<s?8<s?s&134217727?32:268435456:8:2}function X(s){if(Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(iu,s,void 0,(s.current.flags&128)===128)}catch{}}function $(s){if(typeof Si=="function"&&Th(s),Hn&&typeof Hn.setStrictMode=="function")try{Hn.setStrictMode(iu,s)}catch{}}function it(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}function ut(s,l){if(typeof s=="object"&&s!==null){var f=bh.get(s);return f!==void 0?f:(l={value:s,source:l,stack:b(l)},bh.set(s,l),l)}return{value:s,source:l,stack:b(l)}}function Q(s,l){Ca[Da++]=au,Ca[Da++]=ml,ml=s,au=l}function at(s,l,f){ia[Ti++]=Ls,ia[Ti++]=zs,ia[Ti++]=ds,ds=s;var y=Ls;s=zs;var S=32-On(y)-1;y&=~(1<<S),f+=1;var N=32-On(l)+S;if(30<N){var W=S-S%5;N=(y&(1<<W)-1).toString(32),y>>=W,S-=W,Ls=1<<32-On(l)+S|f<<S|y,zs=N+s}else Ls=1<<N|f<<S|y,zs=s}function Et(s){s.return!==null&&(Q(s,1),at(s,1,0))}function st(s){for(;s===ml;)ml=Ca[--Da],Ca[Da]=null,au=Ca[--Da],Ca[Da]=null;for(;s===ds;)ds=ia[--Ti],ia[Ti]=null,zs=ia[--Ti],ia[Ti]=null,Ls=ia[--Ti],ia[Ti]=null}function gt(s,l){C(Sr,l),C(ka,s),C(Mn,null),s=Sf(l),K(Mn),C(Mn,s)}function Rt(){K(Mn),K(ka),K(Sr)}function Nt(s){s.memoizedState!==null&&C(Sc,s);var l=Mn.current,f=Ug(l,s.type);l!==f&&(C(ka,s),C(Mn,f))}function et(s){ka.current===s&&(K(Mn),K(ka)),Sc.current===s&&(K(Sc),cs?_r._currentValue=no:_r._currentValue2=no)}function ht(s){var l=Error(u(418,""));throw $t(ut(l,s)),Tc}function At(s,l){if(!na)throw Error(u(175));so(s.stateNode,s.type,s.memoizedProps,l,s)||ht(s)}function Ct(s){for(xn=s.return;xn;)switch(xn.tag){case 3:case 27:gs=!0;return;case 5:case 13:gs=!1;return;default:xn=xn.return}}function It(s){if(!na||s!==xn)return!1;if(!Me)return Ct(s),Me=!0,!1;var l=!1;if(si?s.tag!==3&&s.tag!==27&&(s.tag!==5||Uf(s.type)&&!ci(s.type,s.memoizedProps))&&(l=!0):s.tag!==3&&(s.tag!==5||Uf(s.type)&&!ci(s.type,s.memoizedProps))&&(l=!0),l&&Ye&&ht(s),Ct(s),s.tag===13){if(!na)throw Error(u(316));if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(u(317));Ye=fm(s)}else Ye=xn?fl(s.stateNode):null;return!0}function Pt(){na&&(Ye=xn=null,Me=!1)}function $t(s){Ha===null?Ha=[s]:Ha.push(s)}function ue(){for(var s=Tr,l=ms=Tr=0;l<s;){var f=aa[l];aa[l++]=null;var y=aa[l];aa[l++]=null;var S=aa[l];aa[l++]=null;var N=aa[l];if(aa[l++]=null,y!==null&&S!==null){var W=y.pending;W===null?S.next=S:(S.next=W.next,W.next=S),y.pending=S}N!==0&&Ke(f,S,N)}}function Yt(s,l,f,y){aa[Tr++]=s,aa[Tr++]=l,aa[Tr++]=f,aa[Tr++]=y,ms|=y,s.lanes|=y,s=s.alternate,s!==null&&(s.lanes|=y)}function Fe(s,l,f,y){return Yt(s,l,f,y),gi(s)}function oe(s,l){return Yt(s,null,null,l),gi(s)}function Ke(s,l,f){s.lanes|=f;var y=s.alternate;y!==null&&(y.lanes|=f);for(var S=!1,N=s.return;N!==null;)N.childLanes|=f,y=N.alternate,y!==null&&(y.childLanes|=f),N.tag===22&&(s=N.stateNode,s===null||s._visibility&1||(S=!0)),s=N,N=N.return;S&&l!==null&&s.tag===3&&(N=s.stateNode,S=31-On(f),N=N.hiddenUpdates,s=N[S],s===null?N[S]=[l]:s.push(l),l.lane=f|536870912)}function gi(s){if(50<go)throw go=0,Qf=null,Error(u(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}function ke(s){s!==pl&&s.next===null&&(pl===null?un=pl=s:pl=pl.next=s),Vn=!0,Ah||(Ah=!0,De(en))}function oi(s,l){if(!Rh&&Vn){Rh=!0;do for(var f=!1,y=un;y!==null;){if(s!==0){var S=y.pendingLanes;if(S===0)var N=0;else{var W=y.suspendedLanes,nt=y.pingedLanes;N=(1<<31-On(42|s)+1)-1,N&=S&~(W&~nt),N=N&201326677?N&201326677|1:N?N|2:0}N!==0&&(f=!0,Oi(y,N))}else N=_e,N=H(y,y===Qe?N:0),!(N&3)||Y(y,N)||(f=!0,Oi(y,N));y=y.next}while(f);Rh=!1}}function en(){Vn=Ah=!1;var s=0;su!==0&&(Pg()&&(s=su),su=0);for(var l=Ra(),f=null,y=un;y!==null;){var S=y.next,N=Xn(y,l);N===0?(y.next=null,f===null?un=S:f.next=S,S===null&&(pl=f)):(f=y,(s!==0||N&3)&&(Vn=!0)),y=S}oi(s)}function Xn(s,l){for(var f=s.suspendedLanes,y=s.pingedLanes,S=s.expirationTimes,N=s.pendingLanes&-62914561;0<N;){var W=31-On(N),nt=1<<W,dt=S[W];dt===-1?(!(nt&f)||nt&y)&&(S[W]=q(nt,l)):dt<=l&&(s.expiredLanes|=nt),N&=~nt}if(l=Qe,f=_e,f=H(s,s===l?f:0),y=s.callbackNode,f===0||s===l&&je===2||s.cancelPendingCommit!==null)return y!==null&&y!==null&&fs(y),s.callbackNode=null,s.callbackPriority=0;if(!(f&3)||Y(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(y!==null&&fs(y),k(f)){case 2:case 8:f=Ec;break;case 32:f=nu;break;case 268435456:f=lo;break;default:f=nu}return y=nn.bind(null,s),f=Is(f,y),s.callbackPriority=l,s.callbackNode=f,l}return y!==null&&y!==null&&fs(y),s.callbackPriority=2,s.callbackNode=null,2}function nn(s,l){var f=s.callbackNode;if(el()&&s.callbackNode!==f)return null;var y=_e;return y=H(s,s===Qe?y:0),y===0?null:(Ta(s,y,l),Xn(s,Ra()),s.callbackNode!=null&&s.callbackNode===f?nn.bind(null,s):null)}function Oi(s,l){if(el())return null;Ta(s,l,!0)}function De(s){Hg?qg(function(){ye&6?Is(Sh,s):s()}):Is(Sh,s)}function He(){return su===0&&(su=V()),su}function Qn(s,l){if(ru===null){var f=ru=[];Ch=0,cn=He(),ri={status:"pending",value:void 0,then:function(y){f.push(y)}}}return Ch++,l.then(fa,fa),l}function fa(){if(--Ch===0&&ru!==null){ri!==null&&(ri.status="fulfilled");var s=ru;ru=null,cn=0,ri=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function ji(s,l){var f=[],y={status:"pending",value:null,reason:null,then:function(S){f.push(S)}};return s.then(function(){y.status="fulfilled",y.value=l;for(var S=0;S<f.length;S++)(0,f[S])(l)},function(S){for(y.status="rejected",y.reason=S,S=0;S<f.length;S++)(0,f[S])(void 0)}),y}function da(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zn(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function an(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Re(s,l,f){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,ye&2){var S=y.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),y.pending=l,l=gi(s),Ke(s,null,f),l}return Yt(s,y,l,f),gi(s)}function ga(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194176)!==0)){var y=l.lanes;y&=s.pendingLanes,f|=y,l.lanes=f,F(s,f)}}function Fi(s,l){var f=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,f===y)){var S=null,N=null;if(f=f.firstBaseUpdate,f!==null){do{var W={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};N===null?S=N=W:N=N.next=W,f=f.next}while(f!==null);N===null?S=N=l:N=N.next=l}else S=N=l;f={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:N,shared:y.shared,callbacks:y.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}function Zn(){if(Dh){var s=ri;if(s!==null)throw s}}function js(s,l,f,y){Dh=!1;var S=s.updateQueue;bi=!1;var N=S.firstBaseUpdate,W=S.lastBaseUpdate,nt=S.shared.pending;if(nt!==null){S.shared.pending=null;var dt=nt,Tt=dt.next;dt.next=null,W===null?N=Tt:W.next=Tt,W=dt;var Ut=s.alternate;Ut!==null&&(Ut=Ut.updateQueue,nt=Ut.lastBaseUpdate,nt!==W&&(nt===null?Ut.firstBaseUpdate=Tt:nt.next=Tt,Ut.lastBaseUpdate=dt))}if(N!==null){var zt=S.baseState;W=0,Ut=Tt=dt=null,nt=N;do{var xt=nt.lane&-536870913,ie=xt!==nt.lane;if(ie?(_e&xt)===xt:(y&xt)===xt){xt!==0&&xt===cn&&(Dh=!0),Ut!==null&&(Ut=Ut.next={lane:0,tag:nt.tag,payload:nt.payload,callback:null,next:null});t:{var Za=s,fu=nt;xt=l;var mo=f;switch(fu.tag){case 1:if(Za=fu.payload,typeof Za=="function"){zt=Za.call(mo,zt,xt);break t}zt=Za;break t;case 3:Za.flags=Za.flags&-65537|128;case 0:if(Za=fu.payload,xt=typeof Za=="function"?Za.call(mo,zt,xt):Za,xt==null)break t;zt=wn({},zt,xt);break t;case 2:bi=!0}}xt=nt.callback,xt!==null&&(s.flags|=64,ie&&(s.flags|=8192),ie=S.callbacks,ie===null?S.callbacks=[xt]:ie.push(xt))}else ie={lane:xt,tag:nt.tag,payload:nt.payload,callback:nt.callback,next:null},Ut===null?(Tt=Ut=ie,dt=zt):Ut=Ut.next=ie,W|=xt;if(nt=nt.next,nt===null){if(nt=S.shared.pending,nt===null)break;ie=nt,nt=ie.next,ie.next=null,S.lastBaseUpdate=ie,S.shared.pending=null}}while(!0);Ut===null&&(dt=zt),S.baseState=dt,S.firstBaseUpdate=Tt,S.lastBaseUpdate=Ut,N===null&&(S.shared.lanes=0),Xa|=W,s.lanes=W,s.memoizedState=zt}}function Bu(s,l){if(typeof s!="function")throw Error(u(191,s));s.call(l)}function Gu(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)Bu(f[s],l)}function ma(s,l){if(Ii(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),y=Object.keys(l);if(f.length!==y.length)return!1;for(y=0;y<f.length;y++){var S=f[y];if(!Em.call(l,S)||!Ii(s[S],l[S]))return!1}return!0}function Fs(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Ki(){}function pa(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(Ki,Ki),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,s===bc?Error(u(483)):s;default:if(typeof l.status=="string")l.then(Ki,Ki);else{if(s=Qe,s!==null&&100<s.shellSuspendCounter)throw Error(u(482));s=l,s.status="pending",s.then(function(y){if(l.status==="pending"){var S=l;S.status="fulfilled",S.value=y}},function(y){if(l.status==="pending"){var S=l;S.status="rejected",S.reason=y}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,s===bc?Error(u(483)):s}throw Ai=l,bc}}function Ks(){if(Ai===null)throw Error(u(459));var s=Ai;return Ai=null,s}function Ys(s){var l=Ri;return Ri+=1,oo===null&&(oo=[]),pa(oo,s,l)}function Xs(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function ts(s,l){throw l.$$typeof===vf?Error(u(525)):(s=Object.prototype.toString.call(l),Error(u(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function Il(s){var l=s._init;return l(s._payload)}function En(s){function l(pt,ct){if(s){var _t=pt.deletions;_t===null?(pt.deletions=[ct],pt.flags|=16):_t.push(ct)}}function f(pt,ct){if(!s)return null;for(;ct!==null;)l(pt,ct),ct=ct.sibling;return null}function y(pt){for(var ct=new Map;pt!==null;)pt.key!==null?ct.set(pt.key,pt):ct.set(pt.index,pt),pt=pt.sibling;return ct}function S(pt,ct){return pt=fr(pt,ct),pt.index=0,pt.sibling=null,pt}function N(pt,ct,_t){return pt.index=_t,s?(_t=pt.alternate,_t!==null?(_t=_t.index,_t<ct?(pt.flags|=33554434,ct):_t):(pt.flags|=33554434,ct)):(pt.flags|=1048576,ct)}function W(pt){return s&&pt.alternate===null&&(pt.flags|=33554434),pt}function nt(pt,ct,_t,Mt){return ct===null||ct.tag!==6?(ct=gc(_t,pt.mode,Mt),ct.return=pt,ct):(ct=S(ct,_t),ct.return=pt,ct)}function dt(pt,ct,_t,Mt){var Ht=_t.type;return Ht===sl?Ut(pt,ct,_t.props.children,Mt,_t.key):ct!==null&&(ct.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===pr&&Il(Ht)===ct.type)?(ct=S(ct,_t.props),Xs(ct,_t),ct.return=pt,ct):(ct=$l(_t.type,_t.key,_t.props,null,pt.mode,Mt),Xs(ct,_t),ct.return=pt,ct)}function Tt(pt,ct,_t,Mt){return ct===null||ct.tag!==4||ct.stateNode.containerInfo!==_t.containerInfo||ct.stateNode.implementation!==_t.implementation?(ct=ea(_t,pt.mode,Mt),ct.return=pt,ct):(ct=S(ct,_t.children||[]),ct.return=pt,ct)}function Ut(pt,ct,_t,Mt,Ht){return ct===null||ct.tag!==7?(ct=il(_t,pt.mode,Mt,Ht),ct.return=pt,ct):(ct=S(ct,_t),ct.return=pt,ct)}function zt(pt,ct,_t){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return ct=gc(""+ct,pt.mode,_t),ct.return=pt,ct;if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case al:return _t=$l(ct.type,ct.key,ct.props,null,pt.mode,_t),Xs(_t,ct),_t.return=pt,_t;case xs:return ct=ea(ct,pt.mode,_t),ct.return=pt,ct;case pr:var Mt=ct._init;return ct=Mt(ct._payload),zt(pt,ct,_t)}if(cl(ct)||c(ct))return ct=il(ct,pt.mode,_t,null),ct.return=pt,ct;if(typeof ct.then=="function")return zt(pt,Ys(ct),_t);if(ct.$$typeof===ll)return zt(pt,vt(pt,ct),_t);ts(pt,ct)}return null}function xt(pt,ct,_t,Mt){var Ht=ct!==null?ct.key:null;if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return Ht!==null?null:nt(pt,ct,""+_t,Mt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case al:return _t.key===Ht?dt(pt,ct,_t,Mt):null;case xs:return _t.key===Ht?Tt(pt,ct,_t,Mt):null;case pr:return Ht=_t._init,_t=Ht(_t._payload),xt(pt,ct,_t,Mt)}if(cl(_t)||c(_t))return Ht!==null?null:Ut(pt,ct,_t,Mt,null);if(typeof _t.then=="function")return xt(pt,ct,Ys(_t),Mt);if(_t.$$typeof===ll)return xt(pt,ct,vt(pt,_t),Mt);ts(pt,_t)}return null}function ie(pt,ct,_t,Mt,Ht){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint")return pt=pt.get(_t)||null,nt(ct,pt,""+Mt,Ht);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case al:return pt=pt.get(Mt.key===null?_t:Mt.key)||null,dt(ct,pt,Mt,Ht);case xs:return pt=pt.get(Mt.key===null?_t:Mt.key)||null,Tt(ct,pt,Mt,Ht);case pr:var Ze=Mt._init;return Mt=Ze(Mt._payload),ie(pt,ct,_t,Mt,Ht)}if(cl(Mt)||c(Mt))return pt=pt.get(_t)||null,Ut(ct,pt,Mt,Ht,null);if(typeof Mt.then=="function")return ie(pt,ct,_t,Ys(Mt),Ht);if(Mt.$$typeof===ll)return ie(pt,ct,_t,vt(ct,Mt),Ht);ts(ct,Mt)}return null}function Za(pt,ct,_t,Mt){for(var Ht=null,Ze=null,Qt=ct,me=ct=0,tn=null;Qt!==null&&me<_t.length;me++){Qt.index>me?(tn=Qt,Qt=null):tn=Qt.sibling;var Te=xt(pt,Qt,_t[me],Mt);if(Te===null){Qt===null&&(Qt=tn);break}s&&Qt&&Te.alternate===null&&l(pt,Qt),ct=N(Te,ct,me),Ze===null?Ht=Te:Ze.sibling=Te,Ze=Te,Qt=tn}if(me===_t.length)return f(pt,Qt),Me&&Q(pt,me),Ht;if(Qt===null){for(;me<_t.length;me++)Qt=zt(pt,_t[me],Mt),Qt!==null&&(ct=N(Qt,ct,me),Ze===null?Ht=Qt:Ze.sibling=Qt,Ze=Qt);return Me&&Q(pt,me),Ht}for(Qt=y(Qt);me<_t.length;me++)tn=ie(Qt,pt,me,_t[me],Mt),tn!==null&&(s&&tn.alternate!==null&&Qt.delete(tn.key===null?me:tn.key),ct=N(tn,ct,me),Ze===null?Ht=tn:Ze.sibling=tn,Ze=tn);return s&&Qt.forEach(function(Rl){return l(pt,Rl)}),Me&&Q(pt,me),Ht}function fu(pt,ct,_t,Mt){if(_t==null)throw Error(u(151));for(var Ht=null,Ze=null,Qt=ct,me=ct=0,tn=null,Te=_t.next();Qt!==null&&!Te.done;me++,Te=_t.next()){Qt.index>me?(tn=Qt,Qt=null):tn=Qt.sibling;var Rl=xt(pt,Qt,Te.value,Mt);if(Rl===null){Qt===null&&(Qt=tn);break}s&&Qt&&Rl.alternate===null&&l(pt,Qt),ct=N(Rl,ct,me),Ze===null?Ht=Rl:Ze.sibling=Rl,Ze=Rl,Qt=tn}if(Te.done)return f(pt,Qt),Me&&Q(pt,me),Ht;if(Qt===null){for(;!Te.done;me++,Te=_t.next())Te=zt(pt,Te.value,Mt),Te!==null&&(ct=N(Te,ct,me),Ze===null?Ht=Te:Ze.sibling=Te,Ze=Te);return Me&&Q(pt,me),Ht}for(Qt=y(Qt);!Te.done;me++,Te=_t.next())Te=ie(Qt,pt,me,Te.value,Mt),Te!==null&&(s&&Te.alternate!==null&&Qt.delete(Te.key===null?me:Te.key),ct=N(Te,ct,me),Ze===null?Ht=Te:Ze.sibling=Te,Ze=Te);return s&&Qt.forEach(function(Tm){return l(pt,Tm)}),Me&&Q(pt,me),Ht}function mo(pt,ct,_t,Mt){if(typeof _t=="object"&&_t!==null&&_t.type===sl&&_t.key===null&&(_t=_t.props.children),typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case al:t:{for(var Ht=_t.key;ct!==null;){if(ct.key===Ht){if(Ht=_t.type,Ht===sl){if(ct.tag===7){f(pt,ct.sibling),Mt=S(ct,_t.props.children),Mt.return=pt,pt=Mt;break t}}else if(ct.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===pr&&Il(Ht)===ct.type){f(pt,ct.sibling),Mt=S(ct,_t.props),Xs(Mt,_t),Mt.return=pt,pt=Mt;break t}f(pt,ct);break}else l(pt,ct);ct=ct.sibling}_t.type===sl?(Mt=il(_t.props.children,pt.mode,Mt,_t.key),Mt.return=pt,pt=Mt):(Mt=$l(_t.type,_t.key,_t.props,null,pt.mode,Mt),Xs(Mt,_t),Mt.return=pt,pt=Mt)}return W(pt);case xs:t:{for(Ht=_t.key;ct!==null;){if(ct.key===Ht)if(ct.tag===4&&ct.stateNode.containerInfo===_t.containerInfo&&ct.stateNode.implementation===_t.implementation){f(pt,ct.sibling),Mt=S(ct,_t.children||[]),Mt.return=pt,pt=Mt;break t}else{f(pt,ct);break}else l(pt,ct);ct=ct.sibling}Mt=ea(_t,pt.mode,Mt),Mt.return=pt,pt=Mt}return W(pt);case pr:return Ht=_t._init,_t=Ht(_t._payload),mo(pt,ct,_t,Mt)}if(cl(_t))return Za(pt,ct,_t,Mt);if(c(_t)){if(Ht=c(_t),typeof Ht!="function")throw Error(u(150));return _t=Ht.call(_t),fu(pt,ct,_t,Mt)}if(typeof _t.then=="function")return mo(pt,ct,Ys(_t),Mt);if(_t.$$typeof===ll)return mo(pt,ct,vt(pt,_t),Mt);ts(pt,_t)}return typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint"?(_t=""+_t,ct!==null&&ct.tag===6?(f(pt,ct.sibling),Mt=S(ct,_t),Mt.return=pt,pt=Mt):(f(pt,ct),Mt=gc(_t,pt.mode,Mt),Mt.return=pt,pt=Mt),W(pt)):f(pt,ct)}return function(pt,ct,_t,Mt){try{Ri=0;var Ht=mo(pt,ct,_t,Mt);return oo=null,Ht}catch(Qt){if(Qt===bc)throw Qt;var Ze=n(29,Qt,null,pt.mode);return Ze.lanes=Mt,Ze.return=pt,Ze}finally{}}}function ku(s,l){s=vs,C(ys,s),C(ps,l),vs=s|l.baseLanes}function Es(){C(ys,vs),C(ps,ps.current)}function Ss(){vs=ys.current,K(ps),K(ys)}function es(s){var l=s.alternate;C(ln,ln.current&1),C(sa,s),qa===null&&(l===null||ps.current!==null||l.memoizedState!==null)&&(qa=s)}function Hu(s){if(s.tag===22){if(C(ln,ln.current),C(sa,s),qa===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(qa=s)}}else Mi()}function Mi(){C(ln,ln.current),C(sa,sa.current)}function ni(s){K(sa),qa===s&&(qa=null),K(ln)}function Rn(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||io(f)||_c(f)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if(l.flags&128)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function ce(){throw Error(u(321))}function ns(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!Ii(s[f],l[f]))return!1;return!0}function Qs(s,l,f,y,S,N){return br=N,ee=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Zt.H=s===null||s.memoizedState===null?Cr:zi,_l=!1,N=f(y,S),_l=!1,uo&&(N=is(l,f,y,S)),Ll(s),N}function Ll(s){Zt.H=Un;var l=Ie!==null&&Ie.next!==null;if(br=0,gn=Ie=ee=null,Ar=!1,lu=0,Rr=null,l)throw Error(u(300));s===null||qn||(s=s.dependencies,s!==null&&z(s)&&(qn=!0))}function is(s,l,f,y){ee=s;var S=0;do{if(uo&&(Rr=null),lu=0,uo=!1,25<=S)throw Error(u(301));if(S+=1,gn=Ie=null,s.updateQueue!=null){var N=s.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}Zt.H=El,N=l(f,y)}while(uo);return N}function qu(){var s=Zt.H,l=s.useState()[0];return l=typeof l.then=="function"?Oa(l):l,s=s.useState()[0],(Ie!==null?Ie.memoizedState:null)!==s&&(ee.flags|=1024),l}function Ts(){var s=vl!==0;return vl=0,s}function Zs(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function ya(s){if(Ar){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Ar=!1}br=0,gn=Ie=ee=null,uo=!1,lu=vl=0,Rr=null}function Sn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?ee.memoizedState=gn=s:gn=gn.next=s,gn}function Je(){if(Ie===null){var s=ee.alternate;s=s!==null?s.memoizedState:null}else s=Ie.next;var l=gn===null?ee.memoizedState:gn.next;if(l!==null)gn=l,Ie=s;else{if(s===null)throw ee.alternate===null?Error(u(467)):Error(u(310));Ie=s,s={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},gn===null?ee.memoizedState=gn=s:gn=gn.next=s}return gn}function Oa(s){var l=lu;return lu+=1,Rr===null&&(Rr=[]),s=pa(Rr,s,l),l=ee,(gn===null?l.memoizedState:gn.next)===null&&(l=l.alternate,Zt.H=l===null||l.memoizedState===null?Cr:zi),s}function sn(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Oa(s);if(s.$$typeof===ll)return ot(s)}throw Error(u(438,String(s)))}function zl(s){var l=null,f=ee.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var y=ee.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(l={data:y.data.map(function(S){return S.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Ff(),ee.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),y=0;y<s;y++)f[y]=he;return l.index++,f}function Yi(s,l){return typeof l=="function"?l(s):l}function mi(s){var l=Je();return pi(l,Ie,s)}function pi(s,l,f){var y=s.queue;if(y===null)throw Error(u(311));y.lastRenderedReducer=f;var S=s.baseQueue,N=y.pending;if(N!==null){if(S!==null){var W=S.next;S.next=N.next,N.next=W}l.baseQueue=S=N,y.pending=null}if(N=s.baseState,S===null)s.memoizedState=N;else{l=S.next;var nt=W=null,dt=null,Tt=l,Ut=!1;do{var zt=Tt.lane&-536870913;if(zt!==Tt.lane?(_e&zt)===zt:(br&zt)===zt){var xt=Tt.revertLane;if(xt===0)dt!==null&&(dt=dt.next={lane:0,revertLane:0,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null}),zt===cn&&(Ut=!0);else if((br&xt)===xt){Tt=Tt.next,xt===cn&&(Ut=!0);continue}else zt={lane:0,revertLane:Tt.revertLane,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null},dt===null?(nt=dt=zt,W=N):dt=dt.next=zt,ee.lanes|=xt,Xa|=xt;zt=Tt.action,_l&&f(N,zt),N=Tt.hasEagerState?Tt.eagerState:f(N,zt)}else xt={lane:zt,revertLane:Tt.revertLane,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null},dt===null?(nt=dt=xt,W=N):dt=dt.next=xt,ee.lanes|=zt,Xa|=zt;Tt=Tt.next}while(Tt!==null&&Tt!==l);if(dt===null?W=N:dt.next=nt,!Ii(N,s.memoizedState)&&(qn=!0,Ut&&(f=ri,f!==null)))throw f;s.memoizedState=N,s.baseState=W,s.baseQueue=dt,y.lastRenderedState=N}return S===null&&(y.lanes=0),[s.memoizedState,y.dispatch]}function xi(s){var l=Je(),f=l.queue;if(f===null)throw Error(u(311));f.lastRenderedReducer=s;var y=f.dispatch,S=f.pending,N=l.memoizedState;if(S!==null){f.pending=null;var W=S=S.next;do N=s(N,W.action),W=W.next;while(W!==S);Ii(N,l.memoizedState)||(qn=!0),l.memoizedState=N,l.baseQueue===null&&(l.baseState=N),f.lastRenderedState=N}return[N,y]}function jc(s,l,f){var y=ee,S=Je(),N=Me;if(N){if(f===void 0)throw Error(u(407));f=f()}else f=l();var W=!Ii((Ie||S).memoizedState,f);if(W&&(S.memoizedState=f,qn=!0),S=S.queue,Bl(ju.bind(null,y,S,s),[s]),S.getSnapshot!==l||W||gn!==null&&gn.memoizedState.tag&1){if(y.flags|=2048,_a(9,Oo.bind(null,y,S,f,l),{destroy:void 0},null),Qe===null)throw Error(u(349));N||br&60||No(y,l,f)}return f}function No(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=ee.updateQueue,l===null?(l=Ff(),ee.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function Oo(s,l,f,y){l.value=f,l.getSnapshot=y,Ws(l)&&Js(s)}function ju(s,l,f){return f(function(){Ws(l)&&Js(s)})}function Ws(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!Ii(s,f)}catch{return!0}}function Js(s){var l=oe(s,2);l!==null&&rn(l,s,2)}function Xi(s){var l=Sn();if(typeof s=="function"){var f=s;if(s=f(),_l){$(!0);try{f()}finally{$(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:s},l}function yi(s,l,f,y){return s.baseState=f,pi(s,Ie,typeof y=="function"?y:Yi)}function Fc(s,l,f,y,S){if(jr(s))throw Error(u(485));if(s=l.action,s!==null){var N={payload:S,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){N.listeners.push(W)}};Zt.T!==null?f(!0):N.isTransition=!1,y(N),f=l.pending,f===null?(N.next=l.pending=N,Kc(l,N)):(N.next=f.next,l.pending=f.next=N)}}function Kc(s,l){var f=l.action,y=l.payload,S=s.state;if(l.isTransition){var N=Zt.T,W={};Zt.T=W;try{var nt=f(S,y),dt=Zt.S;dt!==null&&dt(W,nt),Ir(s,l,nt)}catch(Tt){Lr(s,l,Tt)}finally{Zt.T=N}}else try{N=f(S,y),Ir(s,l,N)}catch(Tt){Lr(s,l,Tt)}}function Ir(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(y){Mo(s,l,y)},function(y){return Lr(s,l,y)}):Mo(s,l,f)}function Mo(s,l,f){l.status="fulfilled",l.value=f,bs(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,Kc(s,f)))}function Lr(s,l,f){var y=s.pending;if(s.pending=null,y!==null){y=y.next;do l.status="rejected",l.reason=f,bs(l),l=l.next;while(l!==y)}s.action=null}function bs(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function pn(s,l){return l}function $s(s,l){if(Me){var f=Qe.formState;if(f!==null){t:{var y=ee;if(Me){if(Ye){var S=om(Ye,gs);if(S){Ye=fl(S),y=Us(S);break t}}ht(y)}y=!1}y&&(l=f[0])}}f=Sn(),f.memoizedState=f.baseState=l,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pn,lastRenderedState:l},f.queue=y,f=Uo.bind(null,ee,y),y.dispatch=f,y=Xi(!1);var N=Ma.bind(null,ee,!1,y.queue);return y=Sn(),S={state:l,dispatch:null,action:s,pending:null},y.queue=S,f=Fc.bind(null,ee,S,N,f),S.dispatch=f,y.memoizedState=s,[l,f,!1]}function zr(s){var l=Je();return Pl(l,Ie,s)}function Pl(s,l,f){l=pi(s,l,pn)[0],s=mi(Yi)[0],l=typeof l=="object"&&l!==null&&typeof l.then=="function"?Oa(l):l;var y=Je(),S=y.queue,N=S.dispatch;return f!==y.memoizedState&&(ee.flags|=2048,_a(9,Ue.bind(null,S,f),{destroy:void 0},null)),[l,N,s]}function Ue(s,l){s.action=l}function Pr(s){var l=Je(),f=Ie;if(f!==null)return Pl(l,f,s);Je(),l=l.memoizedState,f=Je();var y=f.queue.dispatch;return f.memoizedState=s,[l,y,!1]}function _a(s,l,f,y){return s={tag:s,create:l,inst:f,deps:y,next:null},l=ee.updateQueue,l===null&&(l=Ff(),ee.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(y=f.next,f.next=s,s.next=y,l.lastEffect=s),s}function va(){return Je().memoizedState}function xo(s,l,f,y){var S=Sn();ee.flags|=s,S.memoizedState=_a(1|l,f,{destroy:void 0},y===void 0?null:y)}function Br(s,l,f,y){var S=Je();y=y===void 0?null:y;var N=S.memoizedState.inst;Ie!==null&&y!==null&&ns(y,Ie.memoizedState.deps)?S.memoizedState=_a(l,f,N,y):(ee.flags|=s,S.memoizedState=_a(1|l,f,N,y))}function Fu(s,l){xo(8390656,8,s,l)}function Bl(s,l){Br(2048,8,s,l)}function Yc(s,l){return Br(4,2,s,l)}function Xc(s,l){return Br(4,4,s,l)}function as(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Ea(s,l,f){f=f!=null?f.concat([s]):null,Br(4,4,as.bind(null,l,s),f)}function Gr(){}function As(s,l){var f=Je();l=l===void 0?null:l;var y=f.memoizedState;return l!==null&&ns(l,y[1])?y[0]:(f.memoizedState=[s,l],s)}function Rs(s,l){var f=Je();l=l===void 0?null:l;var y=f.memoizedState;if(l!==null&&ns(l,y[1]))return y[0];if(y=s(),_l){$(!0);try{s()}finally{$(!1)}}return f.memoizedState=[y,l],y}function ss(s,l,f){return f===void 0||br&1073741824?s.memoizedState=l:(s.memoizedState=f,s=lc(),ee.lanes|=s,Xa|=s,f)}function Vo(s,l,f,y){return Ii(f,l)?f:ps.current!==null?(s=ss(s,f,y),Ii(s,l)||(qn=!0),s):br&42?(s=lc(),ee.lanes|=s,Xa|=s,l):(qn=!0,s.memoizedState=f)}function Ku(s,l,f,y,S){var N=hl();Ui(N!==0&&8>N?N:8);var W=Zt.T,nt={};Zt.T=nt,Ma(s,!1,l,f);try{var dt=S(),Tt=Zt.S;if(Tt!==null&&Tt(nt,dt),dt!==null&&typeof dt=="object"&&typeof dt.then=="function"){var Ut=ji(dt,y);Zi(s,l,Ut,vi(s))}else Zi(s,l,y,vi(s))}catch(zt){Zi(s,l,{then:function(){},status:"rejected",reason:zt},vi())}finally{Ui(N),Zt.T=W}}function kr(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:no,baseState:no,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:no},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function Qi(){return ot(_r)}function Hr(){return Je().memoizedState}function rs(){return Je().memoizedState}function qr(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=vi();s=an(f);var y=Re(l,s,f);y!==null&&(rn(y,l,f),ga(y,l,f)),l={cache:Ee()},s.payload=l;return}l=l.return}}function tr(s,l,f){var y=vi();f={lane:y,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},jr(s)?Wn(l,f):(f=Fe(s,l,f,y),f!==null&&(rn(f,s,y),Pe(f,l,y)))}function Uo(s,l,f){var y=vi();Zi(s,l,f,y)}function Zi(s,l,f,y){var S={lane:y,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(jr(s))Wn(l,S);else{var N=s.alternate;if(s.lanes===0&&(N===null||N.lanes===0)&&(N=l.lastRenderedReducer,N!==null))try{var W=l.lastRenderedState,nt=N(W,f);if(S.hasEagerState=!0,S.eagerState=nt,Ii(nt,W))return Yt(s,l,S,0),Qe===null&&ue(),!1}catch{}finally{}if(f=Fe(s,l,S,y),f!==null)return rn(f,s,y),Pe(f,l,y),!0}return!1}function Ma(s,l,f,y){if(y={lane:2,revertLane:He(),action:y,hasEagerState:!1,eagerState:null,next:null},jr(s)){if(l)throw Error(u(479))}else l=Fe(s,f,y,2),l!==null&&rn(l,s,2)}function jr(s){var l=s.alternate;return s===ee||l!==null&&l===ee}function Wn(s,l){uo=Ar=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function Pe(s,l,f){if(f&4194176){var y=l.lanes;y&=s.pendingLanes,f|=y,l.lanes=f,F(s,f)}}function Fr(s,l,f,y){l=s.memoizedState,f=f(y,l),f=f==null?l:wn({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}function Kr(s,l,f,y,S,N,W){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,N,W):l.prototype&&l.prototype.isPureReactComponent?!ma(f,y)||!ma(S,N):!0}function Yu(s,l,f,y){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,y),l.state!==s&&ou.enqueueReplaceState(l,l.state,null)}function xa(s,l){var f=l;if("ref"in l){f={};for(var y in l)y!=="ref"&&(f[y]=l[y])}if(s=s.defaultProps){f===l&&(f=wn({},f));for(var S in s)f[S]===void 0&&(f[S]=s[S])}return f}function er(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(y){setTimeout(function(){throw y})}}function ls(s,l,f){try{var y=s.onCaughtError;y(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function nr(s,l,f){return f=an(f),f.tag=3,f.payload={element:null},f.callback=function(){er(s,l)},f}function Sa(s){return s=an(s),s.tag=3,s}function Xu(s,l,f,y){var S=f.type.getDerivedStateFromError;if(typeof S=="function"){var N=y.value;s.payload=function(){return S(N)},s.callback=function(){ls(l,f,y)}}var W=f.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(s.callback=function(){ls(l,f,y),typeof S!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var nt=y.stack;this.componentDidCatch(y.value,{componentStack:nt!==null?nt:""})})}function lf(s,l,f,y,S){if(f.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(l=f.alternate,l!==null&&A(l,f,S,!0),f=sa.current,f!==null){switch(f.tag){case 13:return qa===null?Ga():f.alternate===null&&mn===0&&(mn=3),f.flags&=-257,f.flags|=65536,f.lanes=S,y===Li?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([y]):l.add(y),nl(s,y,S)),!1;case 22:return f.flags|=65536,y===Li?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([y])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([y]):f.add(y)),nl(s,y,S)),!1}throw Error(u(435,f.tag))}return nl(s,y,S),Ga(),!1}if(Me)return l=sa.current,l!==null?(!(l.flags&65536)&&(l.flags|=256),l.flags|=65536,l.lanes=S,y!==Tc&&(s=Error(u(422),{cause:y}),$t(ut(s,f)))):(y!==Tc&&(l=Error(u(423),{cause:y}),$t(ut(l,f))),s=s.current.alternate,s.flags|=65536,S&=-S,s.lanes|=S,y=ut(y,f),S=nr(s.stateNode,y,S),Fi(s,S),mn!==4&&(mn=2)),!1;var N=Error(u(520),{cause:y});if(N=ut(N,f),cu===null?cu=[N]:cu.push(N),mn!==4&&(mn=2),l===null)return!0;y=ut(y,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=S&-S,f.lanes|=s,s=nr(f.stateNode,y,s),Fi(f,s),!1;case 1:if(l=f.type,N=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(ks===null||!ks.has(N))))return f.flags|=65536,S&=-S,f.lanes|=S,S=Sa(S),Xu(S,s,f,y),Fi(f,S),!1}f=f.return}while(f!==null);return!1}function yn(s,l,f,y){l.child=s===null?Ps(l,null,f,y):yl(l,s.child,f,y)}function Gl(s,l,f,y,S){f=f.render;var N=l.ref;if("ref"in y){var W={};for(var nt in y)nt!=="ref"&&(W[nt]=y[nt])}else W=y;return J(l),y=Qs(s,l,f,W,N,S),nt=Ts(),s!==null&&!qn?(Zs(s,l,S),Va(s,l,S)):(Me&&nt&&Et(l),l.flags|=1,yn(s,l,y,S),l.child)}function Io(s,l,f,y,S){if(s===null){var N=f.type;return typeof N=="function"&&!hr(N)&&N.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=N,kl(s,l,N,y,S)):(s=$l(f.type,null,y,l,l.mode,S),s.ref=l.ref,s.return=l,l.child=s)}if(N=s.child,!Po(s,S)){var W=N.memoizedProps;if(f=f.compare,f=f!==null?f:ma,f(W,y)&&s.ref===l.ref)return Va(s,l,S)}return l.flags|=1,s=fr(N,y),s.ref=l.ref,s.return=l,l.child=s}function kl(s,l,f,y,S){if(s!==null){var N=s.memoizedProps;if(ma(N,y)&&s.ref===l.ref)if(qn=!1,l.pendingProps=y=N,Po(s,S))s.flags&131072&&(qn=!0);else return l.lanes=s.lanes,Va(s,l,S)}return jl(s,l,f,y,S)}function Qu(s,l,f){var y=l.pendingProps,S=y.children,N=(l.stateNode._pendingVisibility&2)!==0,W=s!==null?s.memoizedState:null;if(ql(s,l),y.mode==="hidden"||N){if(l.flags&128){if(y=W!==null?W.baseLanes|f:f,s!==null){for(S=l.child=s.child,N=0;S!==null;)N=N|S.lanes|S.childLanes,S=S.sibling;l.childLanes=N&~y}else l.childLanes=0,l.child=null;return Hl(s,l,y,f)}if(f&536870912)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Cn(l,W!==null?W.cachePool:null),W!==null?ku(l,W):Es(),Hu(l);else return l.lanes=l.childLanes=536870912,Hl(s,l,W!==null?W.baseLanes|f:f,f)}else W!==null?(Cn(l,W.cachePool),ku(l,W),Mi(),l.memoizedState=null):(s!==null&&Cn(l,null),Es(),Mi());return yn(s,l,S,f),l.child}function Hl(s,l,f,y){var S=Se();return S=S===null?null:{parent:cs?bn._currentValue:bn._currentValue2,pool:S},l.memoizedState={baseLanes:f,cachePool:S},s!==null&&Cn(l,null),Es(),Hu(l),s!==null&&A(s,l,y,!0),null}function ql(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=2097664);else{if(typeof f!="function"&&typeof f!="object")throw Error(u(284));(s===null||s.ref!==f)&&(l.flags|=2097664)}}function jl(s,l,f,y,S){return J(l),f=Qs(s,l,f,y,void 0,S),y=Ts(),s!==null&&!qn?(Zs(s,l,S),Va(s,l,S)):(Me&&y&&Et(l),l.flags|=1,yn(s,l,f,S),l.child)}function Yr(s,l,f,y,S,N){return J(l),l.updateQueue=null,f=is(l,y,f,S),Ll(s),y=Ts(),s!==null&&!qn?(Zs(s,l,N),Va(s,l,N)):(Me&&y&&Et(l),l.flags|=1,yn(s,l,f,N),l.child)}function Zu(s,l,f,y,S){if(J(l),l.stateNode===null){var N=ro,W=f.contextType;typeof W=="object"&&W!==null&&(N=ot(W)),N=new f(y,N),l.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=ou,l.stateNode=N,N._reactInternals=l,N=l.stateNode,N.props=y,N.state=l.memoizedState,N.refs={},da(l),W=f.contextType,N.context=typeof W=="object"&&W!==null?ot(W):ro,N.state=l.memoizedState,W=f.getDerivedStateFromProps,typeof W=="function"&&(Fr(l,f,W,y),N.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(W=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),W!==N.state&&ou.enqueueReplaceState(N,N.state,null),js(l,y,N,S),Zn(),N.state=l.memoizedState),typeof N.componentDidMount=="function"&&(l.flags|=4194308),y=!0}else if(s===null){N=l.stateNode;var nt=l.memoizedProps,dt=xa(f,nt);N.props=dt;var Tt=N.context,Ut=f.contextType;W=ro,typeof Ut=="object"&&Ut!==null&&(W=ot(Ut));var zt=f.getDerivedStateFromProps;Ut=typeof zt=="function"||typeof N.getSnapshotBeforeUpdate=="function",nt=l.pendingProps!==nt,Ut||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(nt||Tt!==W)&&Yu(l,N,y,W),bi=!1;var xt=l.memoizedState;N.state=xt,js(l,y,N,S),Zn(),Tt=l.memoizedState,nt||xt!==Tt||bi?(typeof zt=="function"&&(Fr(l,f,zt,y),Tt=l.memoizedState),(dt=bi||Kr(l,f,dt,y,xt,Tt,W))?(Ut||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(l.flags|=4194308)):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=Tt),N.props=y,N.state=Tt,N.context=W,y=dt):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{N=l.stateNode,zn(s,l),W=l.memoizedProps,Ut=xa(f,W),N.props=Ut,zt=l.pendingProps,xt=N.context,Tt=f.contextType,dt=ro,typeof Tt=="object"&&Tt!==null&&(dt=ot(Tt)),nt=f.getDerivedStateFromProps,(Tt=typeof nt=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(W!==zt||xt!==dt)&&Yu(l,N,y,dt),bi=!1,xt=l.memoizedState,N.state=xt,js(l,y,N,S),Zn();var ie=l.memoizedState;W!==zt||xt!==ie||bi||s!==null&&s.dependencies!==null&&z(s.dependencies)?(typeof nt=="function"&&(Fr(l,f,nt,y),ie=l.memoizedState),(Ut=bi||Kr(l,f,Ut,y,xt,ie,dt)||s!==null&&s.dependencies!==null&&z(s.dependencies))?(Tt||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(y,ie,dt),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(y,ie,dt)),typeof N.componentDidUpdate=="function"&&(l.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof N.componentDidUpdate!="function"||W===s.memoizedProps&&xt===s.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&xt===s.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=ie),N.props=y,N.state=ie,N.context=dt,y=Ut):(typeof N.componentDidUpdate!="function"||W===s.memoizedProps&&xt===s.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&xt===s.memoizedState||(l.flags|=1024),y=!1)}return N=y,ql(s,l),y=(l.flags&128)!==0,N||y?(N=l.stateNode,f=y&&typeof f.getDerivedStateFromError!="function"?null:N.render(),l.flags|=1,s!==null&&y?(l.child=yl(l,s.child,null,S),l.child=yl(l,null,f,S)):yn(s,l,f,S),l.memoizedState=N.state,s=l.child):s=Va(s,l,S),s}function Wu(s,l,f,y){return Pt(),l.flags|=256,yn(s,l,f,y),l.child}function Fl(s){return{baseLanes:s,cachePool:Pn()}}function ir(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=wa),s}function Ju(s,l,f){var y=l.pendingProps,S=!1,N=(l.flags&128)!==0,W;if((W=N)||(W=s!==null&&s.memoizedState===null?!1:(ln.current&2)!==0),W&&(S=!0,l.flags&=-129),W=(l.flags&32)!==0,l.flags&=-33,s===null){if(Me){if(S?es(l):Mi(),Me){var nt=Ye,dt;(dt=nt)&&(nt=cm(nt,gs),nt!==null?(l.memoizedState={dehydrated:nt,treeContext:ds!==null?{id:Ls,overflow:zs}:null,retryLane:536870912},dt=n(18,null,null,0),dt.stateNode=nt,dt.return=l,l.child=dt,xn=l,Ye=null,dt=!0):dt=!1),dt||ht(l)}if(nt=l.memoizedState,nt!==null&&(nt=nt.dehydrated,nt!==null))return _c(nt)?l.lanes=16:l.lanes=536870912,null;ni(l)}return nt=y.children,y=y.fallback,S?(Mi(),S=l.mode,nt=Lo({mode:"hidden",children:nt},S),y=il(y,S,f,null),nt.return=l,y.return=l,nt.sibling=y,l.child=nt,S=l.child,S.memoizedState=Fl(f),S.childLanes=ir(s,W,f),l.memoizedState=Rc,y):(es(l),Xr(l,nt))}if(dt=s.memoizedState,dt!==null&&(nt=dt.dehydrated,nt!==null)){if(N)l.flags&256?(es(l),l.flags&=-257,l=Kl(s,l,f)):l.memoizedState!==null?(Mi(),l.child=s.child,l.flags|=128,l=null):(Mi(),S=y.fallback,nt=l.mode,y=Lo({mode:"visible",children:y.children},nt),S=il(S,nt,f,null),S.flags|=2,y.return=l,S.return=l,y.sibling=S,l.child=y,yl(l,s.child,null,f),y=l.child,y.memoizedState=Fl(f),y.childLanes=ir(s,W,f),l.memoizedState=Rc,l=S);else if(es(l),_c(nt))W=mh(nt).digest,y=Error(u(419)),y.stack="",y.digest=W,$t({value:y,source:null,stack:null}),l=Kl(s,l,f);else if(qn||A(s,l,f,!1),W=(f&s.childLanes)!==0,qn||W){if(W=Qe,W!==null){if(y=f&-f,y&42)y=1;else switch(y){case 2:y=1;break;case 8:y=4;break;case 32:y=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:y=64;break;case 268435456:y=134217728;break;default:y=0}if(y=y&(W.suspendedLanes|f)?0:y,y!==0&&y!==dt.retryLane)throw dt.retryLane=y,oe(s,y),rn(W,s,y),Kf}io(nt)||Ga(),l=Kl(s,l,f)}else io(nt)?(l.flags|=128,l.child=s.child,l=dc.bind(null,s),lm(nt,l),l=null):(s=dt.treeContext,na&&(Ye=Mf(nt),xn=l,Me=!0,Ha=null,gs=!1,s!==null&&(ia[Ti++]=Ls,ia[Ti++]=zs,ia[Ti++]=ds,Ls=s.id,zs=s.overflow,ds=l)),l=Xr(l,y.children),l.flags|=4096);return l}return S?(Mi(),S=y.fallback,nt=l.mode,dt=s.child,N=dt.sibling,y=fr(dt,{mode:"hidden",children:y.children}),y.subtreeFlags=dt.subtreeFlags&31457280,N!==null?S=fr(N,S):(S=il(S,nt,f,null),S.flags|=2),S.return=l,y.return=l,y.sibling=S,l.child=y,y=S,S=l.child,nt=s.child.memoizedState,nt===null?nt=Fl(f):(dt=nt.cachePool,dt!==null?(N=cs?bn._currentValue:bn._currentValue2,dt=dt.parent!==N?{parent:N,pool:N}:dt):dt=Pn(),nt={baseLanes:nt.baseLanes|f,cachePool:dt}),S.memoizedState=nt,S.childLanes=ir(s,W,f),l.memoizedState=Rc,y):(es(l),f=s.child,s=f.sibling,f=fr(f,{mode:"visible",children:y.children}),f.return=l,f.sibling=null,s!==null&&(W=l.deletions,W===null?(l.deletions=[s],l.flags|=16):W.push(s)),l.child=f,l.memoizedState=null,f)}function Xr(s,l){return l=Lo({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Lo(s,l){return rh(s,l,0,null)}function Kl(s,l,f){return yl(l,s.child,null,f),s=Xr(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function Cs(s,l,f){s.lanes|=l;var y=s.alternate;y!==null&&(y.lanes|=l),Ia(s.return,l,f)}function zo(s,l,f,y,S){var N=s.memoizedState;N===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:f,tailMode:S}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=y,N.tail=f,N.tailMode=S)}function $u(s,l,f){var y=l.pendingProps,S=y.revealOrder,N=y.tail;if(yn(s,l,y.children,f),y=ln.current,y&2)y=y&1|2,l.flags|=128;else{if(s!==null&&s.flags&128)t:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Cs(s,f,l);else if(s.tag===19)Cs(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break t;for(;s.sibling===null;){if(s.return===null||s.return===l)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}switch(C(ln,y),S){case"forwards":for(f=l.child,S=null;f!==null;)s=f.alternate,s!==null&&Rn(s)===null&&(S=f),f=f.sibling;f=S,f===null?(S=l.child,l.child=null):(S=f.sibling,f.sibling=null),zo(l,!1,S,f,N);break;case"backwards":for(f=null,S=l.child,l.child=null;S!==null;){if(s=S.alternate,s!==null&&Rn(s)===null){l.child=S;break}s=S.sibling,S.sibling=f,f=S,S=s}zo(l,!0,f,null,N);break;case"together":zo(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Va(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),Xa|=l.lanes,!(f&l.childLanes))if(s!==null){if(A(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(u(153));if(l.child!==null){for(s=l.child,f=fr(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=fr(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function Po(s,l){return s.lanes&l?!0:(s=s.dependencies,!!(s!==null&&z(s)))}function Bo(s,l,f){switch(l.tag){case 3:gt(l,l.stateNode.containerInfo),os(l,bn,s.memoizedState.cache),Pt();break;case 27:case 5:Nt(l);break;case 4:gt(l,l.stateNode.containerInfo);break;case 10:os(l,l.type,l.memoizedProps.value);break;case 13:var y=l.memoizedState;if(y!==null)return y.dehydrated!==null?(es(l),l.flags|=128,null):f&l.child.childLanes?Ju(s,l,f):(es(l),s=Va(s,l,f),s!==null?s.sibling:null);es(l);break;case 19:var S=(s.flags&128)!==0;if(y=(f&l.childLanes)!==0,y||(A(s,l,f,!1),y=(f&l.childLanes)!==0),S){if(y)return $u(s,l,f);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),C(ln,ln.current),y)break;return null;case 22:case 23:return l.lanes=0,Qu(s,l,f);case 24:os(l,bn,s.memoizedState.cache)}return Va(s,l,f)}function _i(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)qn=!0;else{if(!Po(s,f)&&!(l.flags&128))return qn=!1,Bo(s,l,f);qn=!!(s.flags&131072)}else qn=!1,Me&&l.flags&1048576&&at(l,au,l.index);switch(l.lanes=0,l.tag){case 16:t:{s=l.pendingProps;var y=l.elementType,S=y._init;if(y=S(y._payload),l.type=y,typeof y=="function")hr(y)?(s=xa(y,s),l.tag=1,l=Zu(null,l,y,s,f)):(l.tag=0,l=jl(null,l,y,s,f));else{if(y!=null){if(S=y.$$typeof,S===lh){l.tag=11,l=Gl(null,l,y,s,f);break t}else if(S===Qo){l.tag=14,l=Io(null,l,y,s,f);break t}}throw l=d(y)||y,Error(u(306,l,""))}}return l;case 0:return jl(s,l,l.type,l.pendingProps,f);case 1:return y=l.type,S=xa(y,l.pendingProps),Zu(s,l,y,S,f);case 3:t:{if(gt(l,l.stateNode.containerInfo),s===null)throw Error(u(387));var N=l.pendingProps;S=l.memoizedState,y=S.element,zn(s,l),js(l,N,null,f);var W=l.memoizedState;if(N=W.cache,os(l,bn,N),N!==S.cache&&g(l,[bn],f,!0),Zn(),N=W.element,na&&S.isDehydrated)if(S={element:N,isDehydrated:!1,cache:W.cache},l.updateQueue.baseState=S,l.memoizedState=S,l.flags&256){l=Wu(s,l,N,f);break t}else if(N!==y){y=ut(Error(u(424)),l),$t(y),l=Wu(s,l,N,f);break t}else for(na&&(Ye=ao(l.stateNode.containerInfo),xn=l,Me=!0,Ha=null,gs=!0),f=Ps(l,null,N,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Pt(),N===y){l=Va(s,l,f);break t}yn(s,l,N,f)}l=l.child}return l;case 26:if(Aa)return ql(s,l),s===null?(f=If(l.type,null,l.pendingProps,null))?l.memoizedState=f:Me||(l.stateNode=Bf(l.type,l.pendingProps,Sr.current,l)):l.memoizedState=If(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:if(si)return Nt(l),s===null&&si&&Me&&(y=l.stateNode=_h(l.type,l.pendingProps,Sr.current,Mn.current,!1),xn=l,gs=!0,Ye=vr(y)),y=l.pendingProps.children,s!==null||Me?yn(s,l,y,f):l.child=yl(l,null,y,f),ql(s,l),l.child;case 5:return s===null&&Me&&(mm(l.type,l.pendingProps,Mn.current),(S=y=Ye)&&(y=xf(y,l.type,l.pendingProps,gs),y!==null?(l.stateNode=y,xn=l,Ye=vr(y),gs=!1,S=!0):S=!1),S||ht(l)),Nt(l),S=l.type,N=l.pendingProps,W=s!==null?s.memoizedProps:null,y=N.children,ci(S,N)?y=null:W!==null&&ci(S,W)&&(l.flags|=32),l.memoizedState!==null&&(S=Qs(s,l,qu,null,null,f),cs?_r._currentValue=S:_r._currentValue2=S),ql(s,l),yn(s,l,y,f),l.child;case 6:return s===null&&Me&&(np(l.pendingProps,Mn.current),(s=f=Ye)&&(f=um(f,l.pendingProps,gs),f!==null?(l.stateNode=f,xn=l,Ye=null,s=!0):s=!1),s||ht(l)),null;case 13:return Ju(s,l,f);case 4:return gt(l,l.stateNode.containerInfo),y=l.pendingProps,s===null?l.child=yl(l,null,y,f):yn(s,l,y,f),l.child;case 11:return Gl(s,l,l.type,l.pendingProps,f);case 7:return yn(s,l,l.pendingProps,f),l.child;case 8:return yn(s,l,l.pendingProps.children,f),l.child;case 12:return yn(s,l,l.pendingProps.children,f),l.child;case 10:return y=l.pendingProps,os(l,l.type,y.value),yn(s,l,y.children,f),l.child;case 9:return S=l.type._context,y=l.pendingProps.children,J(l),S=ot(S),y=y(S),l.flags|=1,yn(s,l,y,f),l.child;case 14:return Io(s,l,l.type,l.pendingProps,f);case 15:return kl(s,l,l.type,l.pendingProps,f);case 19:return $u(s,l,f);case 22:return Qu(s,l,f);case 24:return J(l),y=ot(bn),s===null?(S=Se(),S===null&&(S=Qe,N=Ee(),S.pooledCache=N,N.refCount++,N!==null&&(S.pooledCacheLanes|=f),S=N),l.memoizedState={parent:y,cache:S},da(l),os(l,bn,S)):(s.lanes&f&&(zn(s,l),js(l,null,null,f),Zn()),S=s.memoizedState,N=l.memoizedState,S.parent!==y?(S={parent:y,cache:y},l.memoizedState=S,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=S),os(l,bn,y)):(y=N.cache,os(l,bn,y),y!==S.cache&&g(l,[bn],f,!0))),yn(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(u(156,l.tag))}function os(s,l,f){cs?(C(ja,l._currentValue),l._currentValue=f):(C(ja,l._currentValue2),l._currentValue2=f)}function Ua(s){var l=ja.current;cs?s._currentValue=l:s._currentValue2=l,K(ja)}function Ia(s,l,f){for(;s!==null;){var y=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),s===f)break;s=s.return}}function g(s,l,f,y){var S=s.child;for(S!==null&&(S.return=s);S!==null;){var N=S.dependencies;if(N!==null){var W=S.child;N=N.firstContext;t:for(;N!==null;){var nt=N;N=S;for(var dt=0;dt<l.length;dt++)if(nt.context===l[dt]){N.lanes|=f,nt=N.alternate,nt!==null&&(nt.lanes|=f),Ia(N.return,f,s),y||(W=null);break t}N=nt.next}}else if(S.tag===18){if(W=S.return,W===null)throw Error(u(341));W.lanes|=f,N=W.alternate,N!==null&&(N.lanes|=f),Ia(W,f,s),W=null}else W=S.child;if(W!==null)W.return=S;else for(W=S;W!==null;){if(W===s){W=null;break}if(S=W.sibling,S!==null){S.return=W.return,W=S;break}W=W.return}S=W}}function A(s,l,f,y){s=null;for(var S=l,N=!1;S!==null;){if(!N){if(S.flags&524288)N=!0;else if(S.flags&262144)break}if(S.tag===10){var W=S.alternate;if(W===null)throw Error(u(387));if(W=W.memoizedProps,W!==null){var nt=S.type;Ii(S.pendingProps.value,W.value)||(s!==null?s.push(nt):s=[nt])}}else if(S===Sc.current){if(W=S.alternate,W===null)throw Error(u(387));W.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(s!==null?s.push(_r):s=[_r])}S=S.return}s!==null&&g(l,s,f,y),l.flags|=262144}function z(s){for(s=s.firstContext;s!==null;){var l=s.context;if(!Ii(cs?l._currentValue:l._currentValue2,s.memoizedValue))return!0;s=s.next}return!1}function J(s){Tl=s,Fa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ot(s){return Lt(Tl,s)}function vt(s,l){return Tl===null&&J(s),Lt(s,l)}function Lt(s,l){var f=cs?l._currentValue:l._currentValue2;if(l={context:l,memoizedValue:f,next:null},Fa===null){if(s===null)throw Error(u(308));Fa=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Fa=Fa.next=l;return f}function Ee(){return{controller:new Cc,data:new Map,refCount:0}}function _n(s){s.refCount--,s.refCount===0&&vn(ap,function(){s.controller.abort()})}function Se(){var s=co.current;return s!==null?s:Qe.pooledCache}function Cn(s,l){l===null?C(co,co.current):C(co,l.pool)}function Pn(){var s=Se();return s===null?null:{parent:cs?bn._currentValue:bn._currentValue2,pool:s}}function Dn(s){s.flags|=4}function ii(s,l){if(s!==null&&s.child===l.child)return!1;if(l.flags&16)return!0;for(s=l.child;s!==null;){if(s.flags&13878||s.subtreeFlags&13878)return!0;s=s.sibling}return!1}function La(s,l,f,y){if(dn)for(f=l.child;f!==null;){if(f.tag===5||f.tag===6)pc(s,f.stateNode);else if(!(f.tag===4||si&&f.tag===27)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return;f=f.return}f.sibling.return=f.return,f=f.sibling}else if(hs)for(var S=l.child;S!==null;){if(S.tag===5){var N=S.stateNode;f&&y&&(N=rm(N,S.type,S.memoizedProps)),pc(s,N)}else if(S.tag===6)N=S.stateNode,f&&y&&(N=Of(N,S.memoizedProps)),pc(s,N);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)N=S.child,N!==null&&(N.return=S),La(s,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===l)break;for(;S.sibling===null;){if(S.return===null||S.return===l)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function Go(s,l,f,y){if(hs)for(var S=l.child;S!==null;){if(S.tag===5){var N=S.stateNode;f&&y&&(N=rm(N,S.type,S.memoizedProps)),Nf(s,N)}else if(S.tag===6)N=S.stateNode,f&&y&&(N=Of(N,S.memoizedProps)),Nf(s,N);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)N=S.child,N!==null&&(N.return=S),Go(s,S,!(S.memoizedProps!==null&&S.memoizedProps.mode==="manual"),!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===l)break;for(;S.sibling===null;){if(S.return===null||S.return===l)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function tc(s,l){if(hs&&ii(s,l)){s=l.stateNode;var f=s.containerInfo,y=gh();Go(y,l,!1,!1),s.pendingChildren=y,Dn(l),am(f,y)}}function Qc(s,l,f,y){if(dn)s.memoizedProps!==y&&Dn(l);else if(hs){var S=s.stateNode,N=s.memoizedProps;if((s=ii(s,l))||N!==y){var W=Mn.current;N=im(S,f,N,y,!s,null),N===S?l.stateNode=S:(oh(N,f,y,W)&&Dn(l),l.stateNode=N,s?La(N,l,!1,!1):Dn(l))}else l.stateNode=S}}function Zc(s,l,f){if(bf(l,f)){if(s.flags|=16777216,!Af(l,f))if(ai())s.flags|=8192;else throw Ai=Li,Ac}else s.flags&=-16777217}function Wc(s,l){if(_m(l)){if(s.flags|=16777216,!Gf(l))if(ai())s.flags|=8192;else throw Ai=Li,Ac}else s.flags&=-16777217}function ko(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?D():536870912,s.lanes|=l,Fn|=l)}function Ho(s,l){if(!Me)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function fn(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,y=0;if(l)for(var S=s.child;S!==null;)f|=S.lanes|S.childLanes,y|=S.subtreeFlags&31457280,y|=S.flags&31457280,S.return=s,S=S.sibling;else for(S=s.child;S!==null;)f|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=s,S=S.sibling;return s.subtreeFlags|=y,s.childLanes=f,l}function Cg(s,l,f){var y=l.pendingProps;switch(st(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(l),null;case 1:return fn(l),null;case 3:return f=l.stateNode,y=null,s!==null&&(y=s.memoizedState.cache),l.memoizedState.cache!==y&&(l.flags|=2048),Ua(bn),Rt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(It(l)?Dn(l):s===null||s.memoizedState.isDehydrated&&!(l.flags&256)||(l.flags|=1024,Ha!==null&&(ur(Ha),Ha=null))),tc(s,l),fn(l),null;case 26:if(Aa){f=l.type;var S=l.memoizedState;return s===null?(Dn(l),S!==null?(fn(l),Wc(l,S)):(fn(l),Zc(l,f,y))):S?S!==s.memoizedState?(Dn(l),fn(l),Wc(l,S)):(fn(l),l.flags&=-16777217):(dn?s.memoizedProps!==y&&Dn(l):Qc(s,l,f,y),fn(l),Zc(l,f,y)),null}case 27:if(si){if(et(l),f=Sr.current,S=l.type,s!==null&&l.stateNode!=null)dn?s.memoizedProps!==y&&Dn(l):Qc(s,l,S,y);else{if(!y){if(l.stateNode===null)throw Error(u(166));return fn(l),null}s=Mn.current,It(l)?At(l,s):(s=_h(S,y,f,s,!0),l.stateNode=s,Dn(l))}return fn(l),null}case 5:if(et(l),f=l.type,s!==null&&l.stateNode!=null)Qc(s,l,f,y);else{if(!y){if(l.stateNode===null)throw Error(u(166));return fn(l),null}s=Mn.current,It(l)?At(l,s):(S=Tf(f,y,Sr.current,s,l),La(S,l,!1,!1),l.stateNode=S,oh(S,f,y,s)&&Dn(l))}return fn(l),Zc(l,l.type,l.pendingProps),null;case 6:if(s&&l.stateNode!=null)f=s.memoizedProps,dn?f!==y&&Dn(l):hs&&(f!==y?(l.stateNode=Nn(y,Sr.current,Mn.current,l),Dn(l)):l.stateNode=s.stateNode);else{if(typeof y!="string"&&l.stateNode===null)throw Error(u(166));if(s=Sr.current,f=Mn.current,It(l)){if(!na)throw Error(u(176));if(s=l.stateNode,f=l.memoizedProps,y=null,S=xn,S!==null)switch(S.tag){case 27:case 5:y=S.memoizedProps}ph(s,f,l,y)||ht(l)}else l.stateNode=Nn(y,s,f,l)}return fn(l),null;case 13:if(y=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(S=It(l),y!==null&&y.dehydrated!==null){if(s===null){if(!S)throw Error(u(318));if(!na)throw Error(u(344));if(S=l.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(u(317));hm(S,l)}else Pt(),!(l.flags&128)&&(l.memoizedState=null),l.flags|=4;fn(l),S=!1}else Ha!==null&&(ur(Ha),Ha=null),S=!0;if(!S)return l.flags&256?(ni(l),l):(ni(l),null)}if(ni(l),l.flags&128)return l.lanes=f,l;if(f=y!==null,s=s!==null&&s.memoizedState!==null,f){y=l.child,S=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(S=y.alternate.memoizedState.cachePool.pool);var N=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(N=y.memoizedState.cachePool.pool),N!==S&&(y.flags|=2048)}return f!==s&&f&&(l.child.flags|=8192),ko(l,l.updateQueue),fn(l),null;case 4:return Rt(),tc(s,l),s===null&&Lg(l.stateNode.containerInfo),fn(l),null;case 10:return Ua(l.type),fn(l),null;case 19:if(K(ln),S=l.memoizedState,S===null)return fn(l),null;if(y=(l.flags&128)!==0,N=S.rendering,N===null)if(y)Ho(S,!1);else{if(mn!==0||s!==null&&s.flags&128)for(s=l.child;s!==null;){if(N=Rn(s),N!==null){for(l.flags|=128,Ho(S,!1),s=N.updateQueue,l.updateQueue=s,ko(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)Jl(f,s),f=f.sibling;return C(ln,ln.current&1|2),l.child}s=s.sibling}S.tail!==null&&Ra()>Na&&(l.flags|=128,y=!0,Ho(S,!1),l.lanes=4194304)}else{if(!y)if(s=Rn(N),s!==null){if(l.flags|=128,y=!0,s=s.updateQueue,l.updateQueue=s,ko(l,s),Ho(S,!0),S.tail===null&&S.tailMode==="hidden"&&!N.alternate&&!Me)return fn(l),null}else 2*Ra()-S.renderingStartTime>Na&&f!==536870912&&(l.flags|=128,y=!0,Ho(S,!1),l.lanes=4194304);S.isBackwards?(N.sibling=l.child,l.child=N):(s=S.last,s!==null?s.sibling=N:l.child=N,S.last=N)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=Ra(),l.sibling=null,s=ln.current,C(ln,y?s&1|2:s&1),l):(fn(l),null);case 22:case 23:return ni(l),Ss(),y=l.memoizedState!==null,s!==null?s.memoizedState!==null!==y&&(l.flags|=8192):y&&(l.flags|=8192),y?f&536870912&&!(l.flags&128)&&(fn(l),l.subtreeFlags&6&&(l.flags|=8192)):fn(l),f=l.updateQueue,f!==null&&ko(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),y=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==f&&(l.flags|=2048),s!==null&&K(co),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Ua(bn),fn(l),null;case 25:return null}throw Error(u(156,l.tag))}function X0(s,l){switch(st(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ua(bn),Rt(),s=l.flags,s&65536&&!(s&128)?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return et(l),null;case 13:if(ni(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(u(340));Pt()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return K(ln),null;case 4:return Rt(),null;case 10:return Ua(l.type),null;case 22:case 23:return ni(l),Ss(),s!==null&&K(co),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Ua(bn),null;case 25:return null;default:return null}}function Dg(s,l){switch(st(l),l.tag){case 3:Ua(bn),Rt();break;case 26:case 27:case 5:et(l);break;case 4:Rt();break;case 13:ni(l);break;case 19:K(ln);break;case 10:Ua(l.type);break;case 22:case 23:ni(l),Ss(),s!==null&&K(co);break;case 24:Ua(bn)}}function ec(s,l){try{var f=l.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var S=y.next;f=S;do{if((f.tag&s)===s){y=void 0;var N=f.create,W=f.inst;y=N(),W.destroy=y}f=f.next}while(f!==S)}}catch(nt){Be(l,l.return,nt)}}function Qr(s,l,f){try{var y=l.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var N=S.next;y=N;do{if((y.tag&s)===s){var W=y.inst,nt=W.destroy;if(nt!==void 0){W.destroy=void 0,S=l;var dt=f;try{nt()}catch(Tt){Be(S,dt,Tt)}}}y=y.next}while(y!==N)}}catch(Tt){Be(l,l.return,Tt)}}function wg(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{Gu(l,f)}catch(y){Be(s,s.return,y)}}}function Wi(s,l,f){f.props=xa(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(y){Be(s,l,y)}}function us(s,l){try{var f=s.ref;if(f!==null){var y=s.stateNode;switch(s.tag){case 26:case 27:case 5:var S=eo(y);break;default:S=y}typeof f=="function"?s.refCleanup=f(S):f.current=S}}catch(N){Be(s,l,N)}}function Ji(s,l){var f=s.ref,y=s.refCleanup;if(f!==null)if(typeof y=="function")try{y()}catch(S){Be(s,l,S)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(S){Be(s,l,S)}else f.current=null}function of(s){var l=s.type,f=s.memoizedProps,y=s.stateNode;try{Qg(y,l,f,s)}catch(S){Be(s,s.return,S)}}function uf(s,l,f){try{Zg(s.stateNode,s.type,f,l,s)}catch(y){Be(s,s.return,y)}}function cf(s){return s.tag===5||s.tag===3||(Aa?s.tag===26:!1)||(si?s.tag===27:!1)||s.tag===4}function nc(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||cf(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&(!si||s.tag!==27)&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function hf(s,l,f){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?Df(f,s,l):Cf(f,s);else if(!(y===4||si&&y===27)&&(s=s.child,s!==null))for(hf(s,l,f),s=s.sibling;s!==null;)hf(s,l,f),s=s.sibling}function Jc(s,l,f){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?Wg(f,s,l):Yg(f,s);else if(!(y===4||si&&y===27)&&(s=s.child,s!==null))for(Jc(s,l,f),s=s.sibling;s!==null;)Jc(s,l,f),s=s.sibling}function Yl(s,l,f){s=s.containerInfo;try{sm(s,f)}catch(y){Be(l,l.return,y)}}function ff(s,l){for(Ig(s.containerInfo),Kt=l;Kt!==null;)if(s=Kt,l=s.child,(s.subtreeFlags&1028)!==0&&l!==null)l.return=s,Kt=l;else for(;Kt!==null;){s=Kt;var f=s.alternate;switch(l=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if(l&1024&&f!==null){l=void 0;var y=s,S=f.memoizedProps;f=f.memoizedState;var N=y.stateNode;try{var W=xa(y.type,S,y.elementType===y.type);l=N.getSnapshotBeforeUpdate(W,f),N.__reactInternalSnapshotBeforeUpdate=l}catch(nt){Be(y,y.return,nt)}}break;case 3:l&1024&&dn&&nm(s.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(l&1024)throw Error(u(163))}if(l=s.sibling,l!==null){l.return=s.return,Kt=l;break}Kt=s.return}return W=$e,$e=!1,W}function qo(s,l,f){var y=f.flags;switch(f.tag){case 0:case 11:case 15:sr(s,f),y&4&&ec(5,f);break;case 1:if(sr(s,f),y&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(nt){Be(f,f.return,nt)}else{var S=xa(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(S,l,s.__reactInternalSnapshotBeforeUpdate)}catch(nt){Be(f,f.return,nt)}}y&64&&wg(f),y&512&&us(f,f.return);break;case 3:if(sr(s,f),y&64&&(y=f.updateQueue,y!==null)){if(s=null,f.child!==null)switch(f.child.tag){case 27:case 5:s=eo(f.child.stateNode);break;case 1:s=f.child.stateNode}try{Gu(y,s)}catch(nt){Be(f,f.return,nt)}}break;case 26:if(Aa){sr(s,f),y&512&&us(f,f.return);break}case 27:case 5:sr(s,f),l===null&&y&4&&of(f),y&512&&us(f,f.return);break;case 12:sr(s,f);break;case 13:sr(s,f),y&4&&Xl(s,f);break;case 22:if(S=f.memoizedState!==null||Dr,!S){l=l!==null&&l.memoizedState!==null||ne;var N=Dr,W=ne;Dr=S,(ne=l)&&!W?Zr(s,f,(f.subtreeFlags&8772)!==0):sr(s,f),Dr=N,ne=W}y&512&&(f.memoizedProps.mode==="manual"?us(f,f.return):Ji(f,f.return));break;default:sr(s,f)}}function $c(s){var l=s.alternate;l!==null&&(s.alternate=null,$c(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&Bg(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function za(s,l,f){for(f=f.child;f!==null;)ar(s,l,f),f=f.sibling}function ar(s,l,f){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(iu,f)}catch{}switch(f.tag){case 26:if(Aa){ne||Ji(f,l),za(s,l,f),f.memoizedState?zf(f.memoizedState):f.stateNode&&tu(f.stateNode);break}case 27:if(si){ne||Ji(f,l);var y=Le,S=In;Le=f.stateNode,za(s,l,f),qf(f.stateNode),Le=y,In=S;break}case 5:ne||Ji(f,l);case 6:if(dn){if(y=Le,S=In,Le=null,za(s,l,f),Le=y,In=S,Le!==null)if(In)try{$g(Le,f.stateNode)}catch(N){Be(f,l,N)}else try{Jg(Le,f.stateNode)}catch(N){Be(f,l,N)}}else za(s,l,f);break;case 18:dn&&Le!==null&&(In?Vf(Le,f.stateNode):gm(Le,f.stateNode));break;case 4:dn?(y=Le,S=In,Le=f.stateNode.containerInfo,In=!0,za(s,l,f),Le=y,In=S):(hs&&Yl(f.stateNode,f,gh()),za(s,l,f));break;case 0:case 11:case 14:case 15:ne||Qr(2,f,l),ne||Qr(4,f,l),za(s,l,f);break;case 1:ne||(Ji(f,l),y=f.stateNode,typeof y.componentWillUnmount=="function"&&Wi(f,l,y)),za(s,l,f);break;case 21:za(s,l,f);break;case 22:ne||Ji(f,l),ne=(y=ne)||f.memoizedState!==null,za(s,l,f),ne=y;break;default:za(s,l,f)}}function Xl(s,l){if(na&&l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{yh(s)}catch(f){Be(l,l.return,f)}}function df(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new ge),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new ge),l;default:throw Error(u(435,s.tag))}}function th(s,l){var f=df(s);l.forEach(function(y){var S=sh.bind(null,s,y);f.has(y)||(f.add(y),y.then(S,S))})}function Bn(s,l){var f=l.deletions;if(f!==null)for(var y=0;y<f.length;y++){var S=f[y],N=s,W=l;if(dn){var nt=W;t:for(;nt!==null;){switch(nt.tag){case 27:case 5:Le=nt.stateNode,In=!1;break t;case 3:Le=nt.stateNode.containerInfo,In=!0;break t;case 4:Le=nt.stateNode.containerInfo,In=!0;break t}nt=nt.return}if(Le===null)throw Error(u(160));ar(N,W,S),Le=null,In=!1}else ar(N,W,S);N=S.alternate,N!==null&&(N.return=null),S.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)gf(l,s),l=l.sibling}function gf(s,l){var f=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Bn(l,s),$i(s),y&4&&(Qr(3,s,s.return),ec(3,s),Qr(5,s,s.return));break;case 1:Bn(l,s),$i(s),y&512&&(ne||f===null||Ji(f,f.return)),y&64&&Dr&&(s=s.updateQueue,s!==null&&(y=s.callbacks,y!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?y:f.concat(y))));break;case 26:if(Aa){var S=Ci;Bn(l,s),$i(s),y&512&&(ne||f===null||Ji(f,f.return)),y&4&&(y=f!==null?f.memoizedState:null,l=s.memoizedState,f===null?l===null?s.stateNode===null?s.stateNode=pm(S,s.type,s.memoizedProps,s):Pf(S,s.type,s.stateNode):s.stateNode=Lf(S,l,s.memoizedProps):y!==l?(y===null?f.stateNode!==null&&tu(f.stateNode):zf(y),l===null?Pf(S,s.type,s.stateNode):Lf(S,l,s.memoizedProps)):l===null&&s.stateNode!==null&&uf(s,s.memoizedProps,f.memoizedProps));break}case 27:if(si&&y&4&&s.alternate===null){S=s.stateNode;var N=s.memoizedProps;try{vm(S),Hf(s.type,N,S,s)}catch(Ut){Be(s,s.return,Ut)}}case 5:if(Bn(l,s),$i(s),y&512&&(ne||f===null||Ji(f,f.return)),dn){if(s.flags&32){l=s.stateNode;try{dh(l)}catch(Ut){Be(s,s.return,Ut)}}y&4&&s.stateNode!=null&&(l=s.memoizedProps,uf(s,l,f!==null?f.memoizedProps:l)),y&1024&&(Xe=!0)}break;case 6:if(Bn(l,s),$i(s),y&4&&dn){if(s.stateNode===null)throw Error(u(162));y=s.memoizedProps,f=f!==null?f.memoizedProps:y,l=s.stateNode;try{Xg(l,f,y)}catch(Ut){Be(s,s.return,Ut)}}break;case 3:if(Aa?(ym(),S=Ci,Ci=$n(l.containerInfo),Bn(l,s),Ci=S):Bn(l,s),$i(s),y&4){if(dn&&na&&f!==null&&f.memoizedState.isDehydrated)try{dm(l.containerInfo)}catch(Ut){Be(s,s.return,Ut)}if(hs){y=l.containerInfo,f=l.pendingChildren;try{sm(y,f)}catch(Ut){Be(s,s.return,Ut)}}}Xe&&(Xe=!1,mf(s));break;case 4:Aa?(f=Ci,Ci=$n(s.stateNode.containerInfo),Bn(l,s),$i(s),Ci=f):(Bn(l,s),$i(s)),y&4&&hs&&Yl(s.stateNode,s,s.stateNode.pendingChildren);break;case 12:Bn(l,s),$i(s);break;case 13:Bn(l,s),$i(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Xf=Ra()),y&4&&(y=s.updateQueue,y!==null&&(s.updateQueue=null,th(s,y)));break;case 22:y&512&&(ne||f===null||Ji(f,f.return)),S=s.memoizedState!==null;var W=f!==null&&f.memoizedState!==null,nt=Dr,dt=ne;if(Dr=nt||S,ne=dt||W,Bn(l,s),ne=dt,Dr=nt,$i(s),l=s.stateNode,l._current=s,l._visibility&=-3,l._visibility|=l._pendingVisibility&2,y&8192&&(l._visibility=S?l._visibility&-2:l._visibility|1,S&&(l=Dr||ne,f===null||W||l||jo(s)),dn&&(s.memoizedProps===null||s.memoizedProps.mode!=="manual"))){t:if(f=null,dn)for(l=s;;){if(l.tag===5||Aa&&l.tag===26||si&&l.tag===27){if(f===null){W=f=l;try{N=W.stateNode,S?tm(N):ep(W.stateNode,W.memoizedProps)}catch(Ut){Be(W,W.return,Ut)}}}else if(l.tag===6){if(f===null){W=l;try{var Tt=W.stateNode;S?em(Tt):wf(Tt,W.memoizedProps)}catch(Ut){Be(W,W.return,Ut)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break t;for(;l.sibling===null;){if(l.return===null||l.return===s)break t;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}}y&4&&(y=s.updateQueue,y!==null&&(f=y.retryQueue,f!==null&&(y.retryQueue=null,th(s,f))));break;case 19:Bn(l,s),$i(s),y&4&&(y=s.updateQueue,y!==null&&(s.updateQueue=null,th(s,y)));break;case 21:break;default:Bn(l,s),$i(s)}}function $i(s){var l=s.flags;if(l&2){try{if(dn&&(!si||s.tag!==27)){t:{for(var f=s.return;f!==null;){if(cf(f)){var y=f;break t}f=f.return}throw Error(u(160))}switch(y.tag){case 27:if(si){var S=y.stateNode,N=nc(s);Jc(s,N,S);break}case 5:var W=y.stateNode;y.flags&32&&(dh(W),y.flags&=-33);var nt=nc(s);Jc(s,nt,W);break;case 3:case 4:var dt=y.stateNode.containerInfo,Tt=nc(s);hf(s,Tt,dt);break;default:throw Error(u(161))}}}catch(Ut){Be(s,s.return,Ut)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function mf(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;mf(l),l.tag===5&&l.flags&1024&&kg(l.stateNode),s=s.sibling}}function sr(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)qo(s,l.alternate,l),l=l.sibling}function jo(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:Qr(4,l,l.return),jo(l);break;case 1:Ji(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&Wi(l,l.return,f),jo(l);break;case 26:case 27:case 5:Ji(l,l.return),jo(l);break;case 22:Ji(l,l.return),l.memoizedState===null&&jo(l);break;default:jo(l)}s=s.sibling}}function Zr(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var y=l.alternate,S=s,N=l,W=N.flags;switch(N.tag){case 0:case 11:case 15:Zr(S,N,f),ec(4,N);break;case 1:if(Zr(S,N,f),y=N,S=y.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(Tt){Be(y,y.return,Tt)}if(y=N,S=y.updateQueue,S!==null){var nt=y.stateNode;try{var dt=S.shared.hiddenCallbacks;if(dt!==null)for(S.shared.hiddenCallbacks=null,S=0;S<dt.length;S++)Bu(dt[S],nt)}catch(Tt){Be(y,y.return,Tt)}}f&&W&64&&wg(N),us(N,N.return);break;case 26:case 27:case 5:Zr(S,N,f),f&&y===null&&W&4&&of(N),us(N,N.return);break;case 12:Zr(S,N,f);break;case 13:Zr(S,N,f),f&&W&4&&Xl(S,N);break;case 22:N.memoizedState===null&&Zr(S,N,f),us(N,N.return);break;default:Zr(S,N,f)}l=l.sibling}}function eh(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&_n(f))}function nh(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&_n(s))}function rr(s,l,f,y){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Pa(s,l,f,y),l=l.sibling}function Pa(s,l,f,y){var S=l.flags;switch(l.tag){case 0:case 11:case 15:rr(s,l,f,y),S&2048&&ec(9,l);break;case 3:rr(s,l,f,y),S&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&_n(s)));break;case 12:if(S&2048){rr(s,l,f,y),s=l.stateNode;try{var N=l.memoizedProps,W=N.id,nt=N.onPostCommit;typeof nt=="function"&&nt(W,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(dt){Be(l,l.return,dt)}}else rr(s,l,f,y);break;case 23:break;case 22:N=l.stateNode,l.memoizedState!==null?N._visibility&4?rr(s,l,f,y):Ds(s,l):N._visibility&4?rr(s,l,f,y):(N._visibility|=4,ui(s,l,f,y,(l.subtreeFlags&10256)!==0)),S&2048&&eh(l.alternate,l);break;case 24:rr(s,l,f,y),S&2048&&nh(l.alternate,l);break;default:rr(s,l,f,y)}}function ui(s,l,f,y,S){for(S=S&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var N=s,W=l,nt=f,dt=y,Tt=W.flags;switch(W.tag){case 0:case 11:case 15:ui(N,W,nt,dt,S),ec(8,W);break;case 23:break;case 22:var Ut=W.stateNode;W.memoizedState!==null?Ut._visibility&4?ui(N,W,nt,dt,S):Ds(N,W):(Ut._visibility|=4,ui(N,W,nt,dt,S)),S&&Tt&2048&&eh(W.alternate,W);break;case 24:ui(N,W,nt,dt,S),S&&Tt&2048&&nh(W.alternate,W);break;default:ui(N,W,nt,dt,S)}l=l.sibling}}function Ds(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,y=l,S=y.flags;switch(y.tag){case 22:Ds(f,y),S&2048&&eh(y.alternate,y);break;case 24:Ds(f,y),S&2048&&nh(y.alternate,y);break;default:Ds(f,y)}l=l.sibling}}function lr(s){if(s.subtreeFlags&bl)for(s=s.child;s!==null;)ic(s),s=s.sibling}function ic(s){switch(s.tag){case 26:lr(s),s.flags&bl&&(s.memoizedState!==null?kf(Ci,s.memoizedState,s.memoizedProps):Rf(s.type,s.memoizedProps));break;case 5:lr(s),s.flags&bl&&Rf(s.type,s.memoizedProps);break;case 3:case 4:if(Aa){var l=Ci;Ci=$n(s.stateNode.containerInfo),lr(s),Ci=l}else lr(s);break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=bl,bl=16777216,lr(s),bl=l):lr(s));break;default:lr(s)}}function ac(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Ql(s){var l=s.deletions;if(s.flags&16){if(l!==null)for(var f=0;f<l.length;f++){var y=l[f];Kt=y,rc(y,s)}ac(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)or(s),s=s.sibling}function or(s){switch(s.tag){case 0:case 11:case 15:Ql(s),s.flags&2048&&Qr(9,s,s.return);break;case 3:Ql(s);break;case 12:Ql(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&4&&(s.return===null||s.return.tag!==13)?(l._visibility&=-5,sc(s)):Ql(s);break;default:Ql(s)}}function sc(s){var l=s.deletions;if(s.flags&16){if(l!==null)for(var f=0;f<l.length;f++){var y=l[f];Kt=y,rc(y,s)}ac(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:Qr(8,l,l.return),sc(l);break;case 22:f=l.stateNode,f._visibility&4&&(f._visibility&=-5,sc(l));break;default:sc(l)}s=s.sibling}}function rc(s,l){for(;Kt!==null;){var f=Kt;switch(f.tag){case 0:case 11:case 15:Qr(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var y=f.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:_n(f.memoizedState.cache)}if(y=f.child,y!==null)y.return=f,Kt=y;else t:for(f=s;Kt!==null;){y=Kt;var S=y.sibling,N=y.return;if($c(y),y===f){Kt=null;break t}if(S!==null){S.return=N,Kt=S;break t}Kt=N}}}function Wr(s){var l=ch(s);if(l!=null){if(typeof l.memoizedProps["data-testname"]!="string")throw Error(u(364));return l}if(s=jg(s),s===null)throw Error(u(362));return s.stateNode.current}function ih(s,l){var f=s.tag;switch(l.$$typeof){case hn:if(s.type===l.value)return!0;break;case _s:t:{for(l=l.value,s=[s,0],f=0;f<s.length;){var y=s[f++],S=y.tag,N=s[f++],W=l[N];if(S!==5&&S!==26&&S!==27||!Vs(y)){for(;W!=null&&ih(y,W);)N++,W=l[N];if(N===l.length){l=!0;break t}else for(y=y.child;y!==null;)s.push(y,N),y=y.sibling}}l=!1}return l;case Bs:if((f===5||f===26||f===27)&&Kg(s.stateNode,l.value))return!0;break;case Pi:if((f===5||f===6||f===26||f===27)&&(s=Fg(s),s!==null&&0<=s.indexOf(l.value)))return!0;break;case uu:if((f===5||f===26||f===27)&&(s=s.memoizedProps["data-testname"],typeof s=="string"&&s.toLowerCase()===l.value.toLowerCase()))return!0;break;default:throw Error(u(365))}return!1}function ta(s){switch(s.$$typeof){case hn:return"<"+(d(s.value)||"Unknown")+">";case _s:return":has("+(ta(s)||"")+")";case Bs:return'[role="'+s.value+'"]';case Pi:return'"'+s.value+'"';case uu:return'[data-testname="'+s.value+'"]';default:throw Error(u(365))}}function Zl(s,l){var f=[];s=[s,0];for(var y=0;y<s.length;){var S=s[y++],N=S.tag,W=s[y++],nt=l[W];if(N!==5&&N!==26&&N!==27||!Vs(S)){for(;nt!=null&&ih(S,nt);)W++,nt=l[W];if(W===l.length)f.push(S);else for(S=S.child;S!==null;)s.push(S,W),S=S.sibling}}return f}function Jr(s,l){if(!$o)throw Error(u(363));s=Wr(s),s=Zl(s,l),l=[],s=Array.from(s);for(var f=0;f<s.length;){var y=s[f++],S=y.tag;if(S===5||S===26||S===27)Vs(y)||l.push(y.stateNode);else for(y=y.child;y!==null;)s.push(y),y=y.sibling}return l}function vi(){if(ye&2&&_e!==0)return _e&-_e;if(Zt.T!==null){var s=cn;return s!==0?s:He()}return zg()}function lc(){wa===0&&(wa=!(_e&536870912)||Me?V():536870912);var s=sa.current;return s!==null&&(s.flags|=32),wa}function rn(s,l,f){(s===Qe&&je===2||s.cancelPendingCommit!==null)&&($r(s,0),Vi(s,_e,wa,!1)),L(s,f),(!(ye&2)||s!==Qe)&&(s===Qe&&(!(ye&2)&&(Nr|=f),mn===4&&Vi(s,_e,wa,!1)),ke(s))}function Ta(s,l,f){if(ye&6)throw Error(u(327));var y=!f&&(l&60)===0&&(l&s.expiredLanes)===0||Y(s,l),S=y?Ng(s,l):uc(s,l,!0),N=y;do{if(S===0){Ya&&!y&&Vi(s,l,0,!1);break}else if(S===6)Vi(s,l,0,!Ka);else{if(f=s.current.alternate,N&&!cr(f)){S=uc(s,l,!1),N=!1;continue}if(S===2){if(N=l,s.errorRecoveryDisabledLanes&N)var W=0;else W=s.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){l=W;t:{var nt=s;S=cu;var dt=na&&nt.current.memoizedState.isDehydrated;if(dt&&($r(nt,W).flags|=256),W=uc(nt,W,!1),W!==2){if(ho&&!dt){nt.errorRecoveryDisabledLanes|=N,Nr|=N,S=4;break t}N=Qa,Qa=S,N!==null&&ur(N)}S=W}if(N=!1,S!==2)continue}}if(S===1){$r(s,0),Vi(s,l,0,!0);break}t:{switch(y=s,S){case 0:case 1:throw Error(u(345));case 4:if((l&4194176)===l){Vi(y,l,wa,!Ka);break t}break;case 2:Qa=null;break;case 3:case 5:break;default:throw Error(u(329))}if(y.finishedWork=f,y.finishedLanes=l,(l&62914560)===l&&(N=Xf+300-Ra(),10<N)){if(Vi(y,l,wa,!Ka),H(y,0)!==0)break t;y.timeoutHandle=uh(ws.bind(null,y,f,Qa,fo,wh,l,wa,Nr,Fn,Ka,2,-0,0),N);break t}ws(y,f,Qa,fo,wh,l,wa,Nr,Fn,Ka,0,-0,0)}}break}while(!0);ke(s)}function ur(s){Qa===null?Qa=s:Qa.push.apply(Qa,s)}function ws(s,l,f,y,S,N,W,nt,dt,Tt,Ut,zt,xt){var ie=l.subtreeFlags;if((ie&8192||(ie&16785408)===16785408)&&($0(),ic(l),l=Gg(),l!==null)){s.cancelPendingCommit=l(ah.bind(null,s,f,y,S,W,nt,dt,1,zt,xt)),Vi(s,N,W,!Tt);return}ah(s,f,y,S,W,nt,dt,Ut,zt,xt)}function cr(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var y=0;y<f.length;y++){var S=f[y],N=S.getSnapshot;S=S.value;try{if(!Ii(N(),S))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Vi(s,l,f,y){l&=~Bi,l&=~Nr,s.suspendedLanes|=l,s.pingedLanes&=~l,y&&(s.warmLanes|=l),y=s.expirationTimes;for(var S=l;0<S;){var N=31-On(S),W=1<<N;y[N]=-1,S&=~W}f!==0&&T(s,f,l)}function pf(){return ye&6?!0:(oi(0),!1)}function oc(){if(fe!==null){if(je===0)var s=fe.return;else s=fe,Fa=Tl=null,ya(s),oo=null,Ri=0,s=fe;for(;s!==null;)Dg(s.alternate,s),s=s.return;fe=null}}function $r(s,l){s.finishedWork=null,s.finishedLanes=0;var f=s.timeoutHandle;f!==Jo&&(s.timeoutHandle=Jo,yc(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),oc(),Qe=s,fe=f=fr(s.current,null),_e=l,je=0,jn=null,Ka=!1,Ya=Y(s,l),ho=!1,Fn=wa=Bi=Nr=Xa=mn=0,Qa=cu=null,wh=!1,l&8&&(l|=l&32);var y=s.entangledLanes;if(y!==0)for(s=s.entanglements,y&=l;0<y;){var S=31-On(y),N=1<<S;l|=s[S],y&=~N}return vs=l,ue(),f}function Ei(s,l){ee=null,Zt.H=Un,l===bc?(l=Ks(),je=3):l===Ac?(l=Ks(),je=4):je=l===Kf?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,jn=l,fe===null&&(mn=1,er(s,ut(l,s.current)))}function ai(){var s=sa.current;return s===null?!0:(_e&4194176)===_e?qa===null:(_e&62914560)===_e||_e&536870912?s===qa:!1}function Oe(){var s=Zt.H;return Zt.H=Un,s===null?Un:s}function Ba(){var s=Zt.A;return Zt.A=wr,s}function Ga(){mn=4,Ka||(_e&4194176)!==_e&&sa.current!==null||(Ya=!0),!(Xa&134217727)&&!(Nr&134217727)||Qe===null||Vi(Qe,_e,wa,!1)}function uc(s,l,f){var y=ye;ye|=2;var S=Oe(),N=Ba();(Qe!==s||_e!==l)&&(fo=null,$r(s,l)),l=!1;var W=mn;t:do try{if(je!==0&&fe!==null){var nt=fe,dt=jn;switch(je){case 8:oc(),W=6;break t;case 3:case 2:case 6:sa.current===null&&(l=!0);var Tt=je;if(je=0,jn=null,Ns(s,nt,dt,Tt),f&&Ya){W=0;break t}break;default:Tt=je,je=0,jn=null,Ns(s,nt,dt,Tt)}}Wl(),W=mn;break}catch(Ut){Ei(s,Ut)}while(!0);return l&&s.shellSuspendCounter++,Fa=Tl=null,ye=y,Zt.H=S,Zt.A=N,fe===null&&(Qe=null,_e=0,ue()),W}function Wl(){for(;fe!==null;)Fo(fe)}function Ng(s,l){var f=ye;ye|=2;var y=Oe(),S=Ba();Qe!==s||_e!==l?(fo=null,Na=Ra()+500,$r(s,l)):Ya=Y(s,l);t:do try{if(je!==0&&fe!==null){l=fe;var N=jn;e:switch(je){case 1:je=0,jn=null,Ns(s,l,N,1);break;case 2:if(Fs(N)){je=0,jn=null,Ko(l);break}l=function(){je===2&&Qe===s&&(je=7),ke(s)},N.then(l,l);break t;case 3:je=7;break t;case 4:je=5;break t;case 7:Fs(N)?(je=0,jn=null,Ko(l)):(je=0,jn=null,Ns(s,l,N,7));break;case 5:var W=null;switch(fe.tag){case 26:W=fe.memoizedState;case 5:case 27:var nt=fe,dt=nt.type,Tt=nt.pendingProps;if(W?Gf(W):Af(dt,Tt)){je=0,jn=null;var Ut=nt.sibling;if(Ut!==null)fe=Ut;else{var zt=nt.return;zt!==null?(fe=zt,tl(zt)):fe=null}break e}}je=0,jn=null,Ns(s,l,N,5);break;case 6:je=0,jn=null,Ns(s,l,N,6);break;case 8:oc(),mn=6;break t;default:throw Error(u(462))}}Og();break}catch(xt){Ei(s,xt)}while(!0);return Fa=Tl=null,Zt.H=y,Zt.A=S,ye=f,fe!==null?0:(Qe=null,_e=0,ue(),mn)}function Og(){for(;fe!==null&&!gl();)Fo(fe)}function Fo(s){var l=_i(s.alternate,s,vs);s.memoizedProps=s.pendingProps,l===null?tl(s):fe=l}function Ko(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=Yr(f,l,l.pendingProps,l.type,void 0,_e);break;case 11:l=Yr(f,l,l.pendingProps,l.type.render,l.ref,_e);break;case 5:ya(l);default:Dg(f,l),l=fe=Jl(l,vs),l=_i(f,l,vs)}s.memoizedProps=s.pendingProps,l===null?tl(s):fe=l}function Ns(s,l,f,y){Fa=Tl=null,ya(l),oo=null,Ri=0;var S=l.return;try{if(lf(s,S,l,f,_e)){mn=1,er(s,ut(f,s.current)),fe=null;return}}catch(N){if(S!==null)throw fe=S,N;mn=1,er(s,ut(f,s.current)),fe=null;return}l.flags&32768?(Me||y===1?s=!0:Ya||_e&536870912?s=!1:(Ka=s=!0,(y===2||y===3||y===6)&&(y=sa.current,y!==null&&y.tag===13&&(y.flags|=16384))),yf(l,s)):tl(l)}function tl(s){var l=s;do{if(l.flags&32768){yf(l,Ka);return}s=l.return;var f=Cg(l.alternate,l,vs);if(f!==null){fe=f;return}if(l=l.sibling,l!==null){fe=l;return}fe=l=s}while(l!==null);mn===0&&(mn=5)}function yf(s,l){do{var f=X0(s.alternate,s);if(f!==null){f.flags&=32767,fe=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){fe=s;return}fe=s=f}while(s!==null);mn=6,fe=null}function ah(s,l,f,y,S,N,W,nt,dt,Tt){var Ut=Zt.T,zt=hl();try{Ui(2),Zt.T=null,Mg(s,l,f,y,zt,S,N,W,nt,dt,Tt)}finally{Zt.T=Ut,Ui(zt)}}function Mg(s,l,f,y,S,N,W,nt){do el();while(Al!==null);if(ye&6)throw Error(u(327));var dt=s.finishedWork;if(y=s.finishedLanes,dt===null)return null;if(s.finishedWork=null,s.finishedLanes=0,dt===s.current)throw Error(u(177));s.callbackNode=null,s.callbackPriority=0,s.cancelPendingCommit=null;var Tt=dt.lanes|dt.childLanes;if(Tt|=ms,j(s,y,Tt,N,W,nt),s===Qe&&(fe=Qe=null,_e=0),!(dt.subtreeFlags&10256)&&!(dt.flags&10256)||Or||(Or=!0,Nh=Tt,wc=f,xg(nu,function(){return el(),null})),f=(dt.flags&15990)!==0,dt.subtreeFlags&15990||f?(f=Zt.T,Zt.T=null,N=hl(),Ui(2),W=ye,ye|=4,ff(s,dt),gf(dt,s),J0(s.containerInfo),s.current=dt,qo(s,dt.alternate,dt),Er(),ye=W,Ui(N),Zt.T=f):s.current=dt,Or?(Or=!1,Al=s,hu=y):cc(s,Tt),Tt=s.pendingLanes,Tt===0&&(ks=null),X(dt.stateNode),ke(s),l!==null)for(S=s.onRecoverableError,dt=0;dt<l.length;dt++)Tt=l[dt],S(Tt.value,{componentStack:Tt.stack});return hu&3&&el(),Tt=s.pendingLanes,y&4194218&&Tt&42?s===Qf?go++:(go=0,Qf=s):go=0,oi(0),null}function cc(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,_n(l)))}function el(){if(Al!==null){var s=Al,l=Nh;Nh=0;var f=k(hu),y=32>f?32:f;f=Zt.T;var S=hl();try{if(Ui(y),Zt.T=null,Al===null)var N=!1;else{y=wc,wc=null;var W=Al,nt=hu;if(Al=null,hu=0,ye&6)throw Error(u(331));var dt=ye;if(ye|=4,or(W.current),Pa(W,W.current,nt,y),ye=dt,oi(0,!1),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(iu,W)}catch{}N=!0}return N}finally{Ui(S),Zt.T=f,cc(s,l)}}return!1}function Yo(s,l,f){l=ut(f,l),l=nr(s.stateNode,l,2),s=Re(s,l,2),s!==null&&(L(s,2),ke(s))}function Be(s,l,f){if(s.tag===3)Yo(s,s,f);else for(;l!==null;){if(l.tag===3){Yo(l,s,f);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(ks===null||!ks.has(y))){s=ut(f,s),f=Sa(2),y=Re(l,f,2),y!==null&&(Xu(f,y,l,s),L(y,2),ke(y));break}}l=l.return}}function nl(s,l,f){var y=s.pingCache;if(y===null){y=s.pingCache=new Dc;var S=new Set;y.set(l,S)}else S=y.get(l),S===void 0&&(S=new Set,y.set(l,S));S.has(f)||(ho=!0,S.add(f),s=hc.bind(null,s,l,f),l.then(s,s))}function hc(s,l,f){var y=s.pingCache;y!==null&&y.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Qe===s&&(_e&f)===f&&(mn===4||mn===3&&(_e&62914560)===_e&&300>Ra()-Xf?!(ye&2)&&$r(s,0):Bi|=f,Fn===_e&&(Fn=0)),ke(s)}function fc(s,l){l===0&&(l=D()),s=oe(s,l),s!==null&&(L(s,l),ke(s))}function dc(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),fc(s,f)}function sh(s,l){var f=0;switch(s.tag){case 13:var y=s.stateNode,S=s.memoizedState;S!==null&&(f=S.retryLane);break;case 19:y=s.stateNode;break;case 22:y=s.stateNode._retryCache;break;default:throw Error(u(314))}y!==null&&y.delete(l),fc(s,f)}function xg(s,l){return Is(s,l)}function Vg(s,l,f,y){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(s){return s=s.prototype,!(!s||!s.isReactComponent)}function fr(s,l){var f=s.alternate;return f===null?(f=n(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&31457280,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function Jl(s,l){s.flags&=31457282;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function $l(s,l,f,y,S,N){var W=0;if(y=s,typeof s=="function")hr(s)&&(W=1);else if(typeof s=="string")W=Aa&&si?Jn(s,f,Mn.current)?26:vh(s)?27:5:Aa?Jn(s,f,Mn.current)?26:5:si&&vh(s)?27:5;else t:switch(s){case sl:return il(f.children,S,N,l);case to:W=8,S|=24;break;case rl:return s=n(12,f,l,S|2),s.elementType=rl,s.lanes=N,s;case mr:return s=n(13,f,l,S),s.elementType=mr,s.lanes=N,s;case mc:return s=n(19,f,l,S),s.elementType=mc,s.lanes=N,s;case yr:return rh(f,S,N,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Z0:case ll:W=10;break t;case Ef:W=9;break t;case lh:W=11;break t;case Qo:W=14;break t;case pr:W=16,y=null;break t}W=29,f=Error(u(130,s===null?"null":typeof s,"")),y=null}return l=n(W,f,l,S),l.elementType=s,l.type=y,l.lanes=N,l}function il(s,l,f,y){return s=n(7,s,y,l),s.lanes=f,s}function rh(s,l,f,y){s=n(22,s,y,l),s.elementType=yr,s.lanes=f;var S={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var N=S._current;if(N===null)throw Error(u(456));if(!(S._pendingVisibility&2)){var W=oe(N,2);W!==null&&(S._pendingVisibility|=2,rn(W,N,2))}},attach:function(){var N=S._current;if(N===null)throw Error(u(456));if(S._pendingVisibility&2){var W=oe(N,2);W!==null&&(S._pendingVisibility&=-3,rn(W,N,2))}}};return s.stateNode=S,s}function gc(s,l,f){return s=n(6,s,null,l),s.lanes=f,s}function ea(s,l,f){return l=n(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function Os(s,l,f,y,S,N,W,nt){this.tag=1,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Jo,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=x(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=x(0),this.hiddenUpdates=x(null),this.identifierPrefix=y,this.onUncaughtError=S,this.onCaughtError=N,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=nt,this.incompleteTransitions=new Map}function dr(s,l,f,y,S,N,W,nt,dt,Tt,Ut,zt){return s=new Os(s,l,f,W,nt,dt,Tt,zt),l=1,N===!0&&(l|=24),N=n(3,null,null,l),s.current=N,N.stateNode=s,l=Ee(),l.refCount++,s.pooledCache=l,l.refCount++,N.memoizedState={element:y,isDehydrated:f,cache:l},da(N),s}function _f(s){return s?(s=ro,s):ro}function gr(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(u(188)):(s=Object.keys(s).join(","),Error(u(268,s)));return s=w(l),s=s!==null?O(s):null,s===null?null:eo(s.stateNode)}function Ms(s,l,f,y,S,N){S=_f(S),y.context===null?y.context=S:y.pendingContext=S,y=an(l),y.payload={element:f},N=N===void 0?null:N,N!==null&&(y.callback=N),f=Re(s,y,l),f!==null&&(rn(f,s,l),ga(f,s,l))}function Gn(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function Xo(s,l){Gn(s,l),(s=s.alternate)&&Gn(s,l)}var pe={},Q0=b0(),ba=O1(),wn=Object.assign,vf=Symbol.for("react.element"),al=Symbol.for("react.transitional.element"),xs=Symbol.for("react.portal"),sl=Symbol.for("react.fragment"),to=Symbol.for("react.strict_mode"),rl=Symbol.for("react.profiler"),Z0=Symbol.for("react.provider"),Ef=Symbol.for("react.consumer"),ll=Symbol.for("react.context"),lh=Symbol.for("react.forward_ref"),mr=Symbol.for("react.suspense"),mc=Symbol.for("react.suspense_list"),Qo=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),yr=Symbol.for("react.offscreen"),he=Symbol.for("react.memo_cache_sentinel"),qe=Symbol.iterator,kn=Symbol.for("react.client.reference"),Zt=Q0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ol,ul,Zo=!1,cl=Array.isArray,Wo=t.rendererVersion,W0=t.rendererPackageName,Tn=t.extraDevToolsConfig,eo=t.getPublicInstance,Sf=t.getRootHostContext,Ug=t.getChildHostContext,Ig=t.prepareForCommit,J0=t.resetAfterCommit,Tf=t.createInstance,pc=t.appendInitialChild,oh=t.finalizeInitialChildren,ci=t.shouldSetTextContent,Nn=t.createTextInstance,uh=t.scheduleTimeout,yc=t.cancelTimeout,Jo=t.noTimeout,cs=t.isPrimaryRenderer;t.warnsIfNotActing;var dn=t.supportsMutation,hs=t.supportsPersistence,na=t.supportsHydration,ch=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var Lg=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Ui=t.setCurrentUpdatePriority,hl=t.getCurrentUpdatePriority,zg=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var Pg=t.shouldAttemptEagerTransition,Bg=t.detachDeletedInstance;t.requestPostPaintCallback;var bf=t.maySuspendCommit,Af=t.preloadInstance,$0=t.startSuspendingCommit,Rf=t.suspendInstance,Gg=t.waitForCommitToBeReady,no=t.NotPendingTransition,_r=t.HostTransitionContext,kg=t.resetFormInstance;t.bindToConsole;var Hg=t.supportsMicrotasks,qg=t.scheduleMicrotask,$o=t.supportsTestSelectors,jg=t.findFiberRoot,tp=t.getBoundingRect,Fg=t.getTextContent,Vs=t.isHiddenSubtree,Kg=t.matchAccessibilityRole,hh=t.setFocusIfFocusable,fh=t.setupIntersectionObserver,Yg=t.appendChild,Cf=t.appendChildToContainer,Xg=t.commitTextUpdate,Qg=t.commitMount,Zg=t.commitUpdate,Wg=t.insertBefore,Df=t.insertInContainerBefore,Jg=t.removeChild,$g=t.removeChildFromContainer,dh=t.resetTextContent,tm=t.hideInstance,em=t.hideTextInstance,ep=t.unhideInstance,wf=t.unhideTextInstance,nm=t.clearContainer,im=t.cloneInstance,gh=t.createContainerChildSet,Nf=t.appendChildToContainerChildSet,am=t.finalizeContainerChildren,sm=t.replaceContainerChildren,rm=t.cloneHiddenInstance,Of=t.cloneHiddenTextInstance,io=t.isSuspenseInstancePending,_c=t.isSuspenseInstanceFallback,mh=t.getSuspenseInstanceFallbackErrorDetails,lm=t.registerSuspenseInstanceRetry,om=t.canHydrateFormStateMarker,Us=t.isFormStateMarkerMatching,fl=t.getNextHydratableSibling,vr=t.getFirstHydratableChild,ao=t.getFirstHydratableChildWithinContainer,Mf=t.getFirstHydratableChildWithinSuspenseInstance,xf=t.canHydrateInstance,um=t.canHydrateTextInstance,cm=t.canHydrateSuspenseInstance,so=t.hydrateInstance,ph=t.hydrateTextInstance,hm=t.hydrateSuspenseInstance,fm=t.getNextHydratableInstanceAfterSuspenseInstance,dm=t.commitHydratedContainer,yh=t.commitHydratedSuspenseInstance,gm=t.clearSuspenseBoundary,Vf=t.clearSuspenseBoundaryFromContainer,Uf=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var mm=t.validateHydratableInstance,np=t.validateHydratableTextInstance,Aa=t.supportsResources,Jn=t.isHostHoistableType,$n=t.getHoistableRoot,If=t.getResource,Lf=t.acquireResource,zf=t.releaseResource,pm=t.hydrateHoistable,Pf=t.mountHoistable,tu=t.unmountHoistable,Bf=t.createHoistableInstance,ym=t.prepareToCommitHoistables,_m=t.mayResourceSuspendCommit,Gf=t.preloadResource,kf=t.suspendResource,si=t.supportsSingletons,_h=t.resolveSingletonInstance,vm=t.clearSingleton,Hf=t.acquireSingletonInstance,qf=t.releaseSingletonInstance,vh=t.isHostSingletonType,Eh=[],dl=-1,ro={},On=Math.clz32?Math.clz32:M,jf=Math.log,ip=Math.LN2,vc=128,eu=4194304,Is=ba.unstable_scheduleCallback,fs=ba.unstable_cancelCallback,gl=ba.unstable_shouldYield,Er=ba.unstable_requestPaint,Ra=ba.unstable_now,Sh=ba.unstable_ImmediatePriority,Ec=ba.unstable_UserBlockingPriority,nu=ba.unstable_NormalPriority,lo=ba.unstable_IdlePriority,Si=ba.log,Th=ba.unstable_setDisableYieldValue,iu=null,Hn=null,Ii=typeof Object.is=="function"?Object.is:it,bh=new WeakMap,Ca=[],Da=0,ml=null,au=0,ia=[],Ti=0,ds=null,Ls=1,zs="",Mn=P(null),ka=P(null),Sr=P(null),Sc=P(null),xn=null,Ye=null,Me=!1,Ha=null,gs=!1,Tc=Error(u(519)),aa=[],Tr=0,ms=0,un=null,pl=null,Ah=!1,Vn=!1,Rh=!1,su=0,ru=null,Ch=0,cn=0,ri=null,bi=!1,Dh=!1,Em=Object.prototype.hasOwnProperty,bc=Error(u(460)),Ac=Error(u(474)),Li={then:function(){}},Ai=null,oo=null,Ri=0,yl=En(!0),Ps=En(!1),ps=P(null),ys=P(0),sa=P(null),qa=null,ln=P(0),br=0,ee=null,Ie=null,gn=null,Ar=!1,uo=!1,_l=!1,vl=0,lu=0,Rr=null,Sm=0,Ff=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Un={readContext:ot,use:sn,useCallback:ce,useContext:ce,useEffect:ce,useImperativeHandle:ce,useLayoutEffect:ce,useInsertionEffect:ce,useMemo:ce,useReducer:ce,useRef:ce,useState:ce,useDebugValue:ce,useDeferredValue:ce,useTransition:ce,useSyncExternalStore:ce,useId:ce};Un.useCacheRefresh=ce,Un.useMemoCache=ce,Un.useHostTransitionStatus=ce,Un.useFormState=ce,Un.useActionState=ce,Un.useOptimistic=ce;var Cr={readContext:ot,use:sn,useCallback:function(s,l){return Sn().memoizedState=[s,l===void 0?null:l],s},useContext:ot,useEffect:Fu,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,xo(4194308,4,as.bind(null,l,s),f)},useLayoutEffect:function(s,l){return xo(4194308,4,s,l)},useInsertionEffect:function(s,l){xo(4,2,s,l)},useMemo:function(s,l){var f=Sn();l=l===void 0?null:l;var y=s();if(_l){$(!0);try{s()}finally{$(!1)}}return f.memoizedState=[y,l],y},useReducer:function(s,l,f){var y=Sn();if(f!==void 0){var S=f(l);if(_l){$(!0);try{f(l)}finally{$(!1)}}}else S=l;return y.memoizedState=y.baseState=S,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:S},y.queue=s,s=s.dispatch=tr.bind(null,ee,s),[y.memoizedState,s]},useRef:function(s){var l=Sn();return s={current:s},l.memoizedState=s},useState:function(s){s=Xi(s);var l=s.queue,f=Uo.bind(null,ee,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:Gr,useDeferredValue:function(s,l){var f=Sn();return ss(f,s,l)},useTransition:function(){var s=Xi(!1);return s=Ku.bind(null,ee,s.queue,!0,!1),Sn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var y=ee,S=Sn();if(Me){if(f===void 0)throw Error(u(407));f=f()}else{if(f=l(),Qe===null)throw Error(u(349));_e&60||No(y,l,f)}S.memoizedState=f;var N={value:f,getSnapshot:l};return S.queue=N,Fu(ju.bind(null,y,N,s),[s]),y.flags|=2048,_a(9,Oo.bind(null,y,N,f,l),{destroy:void 0},null),f},useId:function(){var s=Sn(),l=Qe.identifierPrefix;if(Me){var f=zs,y=Ls;f=(y&~(1<<32-On(y)-1)).toString(32)+f,l=":"+l+"R"+f,f=vl++,0<f&&(l+="H"+f.toString(32)),l+=":"}else f=Sm++,l=":"+l+"r"+f.toString(32)+":";return s.memoizedState=l},useCacheRefresh:function(){return Sn().memoizedState=qr.bind(null,ee)}};Cr.useMemoCache=zl,Cr.useHostTransitionStatus=Qi,Cr.useFormState=$s,Cr.useActionState=$s,Cr.useOptimistic=function(s){var l=Sn();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=Ma.bind(null,ee,!0,f),f.dispatch=l,[s,l]};var zi={readContext:ot,use:sn,useCallback:As,useContext:ot,useEffect:Bl,useImperativeHandle:Ea,useInsertionEffect:Yc,useLayoutEffect:Xc,useMemo:Rs,useReducer:mi,useRef:va,useState:function(){return mi(Yi)},useDebugValue:Gr,useDeferredValue:function(s,l){var f=Je();return Vo(f,Ie.memoizedState,s,l)},useTransition:function(){var s=mi(Yi)[0],l=Je().memoizedState;return[typeof s=="boolean"?s:Oa(s),l]},useSyncExternalStore:jc,useId:Hr};zi.useCacheRefresh=rs,zi.useMemoCache=zl,zi.useHostTransitionStatus=Qi,zi.useFormState=zr,zi.useActionState=zr,zi.useOptimistic=function(s,l){var f=Je();return yi(f,Ie,s,l)};var El={readContext:ot,use:sn,useCallback:As,useContext:ot,useEffect:Bl,useImperativeHandle:Ea,useInsertionEffect:Yc,useLayoutEffect:Xc,useMemo:Rs,useReducer:xi,useRef:va,useState:function(){return xi(Yi)},useDebugValue:Gr,useDeferredValue:function(s,l){var f=Je();return Ie===null?ss(f,s,l):Vo(f,Ie.memoizedState,s,l)},useTransition:function(){var s=xi(Yi)[0],l=Je().memoizedState;return[typeof s=="boolean"?s:Oa(s),l]},useSyncExternalStore:jc,useId:Hr};El.useCacheRefresh=rs,El.useMemoCache=zl,El.useHostTransitionStatus=Qi,El.useFormState=Pr,El.useActionState=Pr,El.useOptimistic=function(s,l){var f=Je();return Ie!==null?yi(f,Ie,s,l):(f.baseState=s,[s,f.queue.dispatch])};var ou={isMounted:function(s){return(s=s._reactInternals)?R(s)===s:!1},enqueueSetState:function(s,l,f){s=s._reactInternals;var y=vi(),S=an(y);S.payload=l,f!=null&&(S.callback=f),l=Re(s,S,y),l!==null&&(rn(l,s,y),ga(l,s,y))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var y=vi(),S=an(y);S.tag=1,S.payload=l,f!=null&&(S.callback=f),l=Re(s,S,y),l!==null&&(rn(l,s,y),ga(l,s,y))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=vi(),y=an(f);y.tag=2,l!=null&&(y.callback=l),l=Re(s,y,f),l!==null&&(rn(l,s,f),ga(l,s,f))}},Sl=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Kf=Error(u(461)),qn=!1,Rc={dehydrated:null,treeContext:null,retryLane:0},ja=P(null),Tl=null,Fa=null,Cc=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,y){s.push(y)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},vn=ba.unstable_scheduleCallback,ap=ba.unstable_NormalPriority,bn={$$typeof:ll,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Yf=Zt.S;Zt.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&Qn(s,l),Yf!==null&&Yf(s,l)};var co=P(null),Dr=!1,ne=!1,Xe=!1,ge=typeof WeakSet=="function"?WeakSet:Set,Kt=null,$e=!1,Le=null,In=!1,Ci=null,bl=8192,wr={getCacheForType:function(s){var l=ot(bn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f}},hn=0,_s=1,Bs=2,uu=3,Pi=4;if(typeof Symbol=="function"&&Symbol.for){var Gs=Symbol.for;hn=Gs("selector.component"),_s=Gs("selector.has_pseudo_class"),Bs=Gs("selector.role"),uu=Gs("selector.test_id"),Pi=Gs("selector.text")}var Dc=typeof WeakMap=="function"?WeakMap:Map,ye=0,Qe=null,fe=null,_e=0,je=0,jn=null,Ka=!1,Ya=!1,ho=!1,vs=0,mn=0,Xa=0,Nr=0,Bi=0,wa=0,Fn=0,cu=null,Qa=null,wh=!1,Xf=0,Na=1/0,fo=null,ks=null,Or=!1,Al=null,hu=0,Nh=0,wc=null,go=0,Qf=null;return pe.attemptContinuousHydration=function(s){if(s.tag===13){var l=oe(s,67108864);l!==null&&rn(l,s,67108864),Xo(s,67108864)}},pe.attemptHydrationAtCurrentPriority=function(s){if(s.tag===13){var l=vi(),f=oe(s,l);f!==null&&rn(f,s,l),Xo(s,l)}},pe.attemptSynchronousHydration=function(s){switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var l=G(s.pendingLanes);if(l!==0){for(s.pendingLanes|=2,s.entangledLanes|=2;l;){var f=1<<31-On(l);s.entanglements[1]|=f,l&=~f}ke(s),!(ye&6)&&(Na=Ra()+500,oi(0))}}break;case 13:l=oe(s,2),l!==null&&rn(l,s,2),pf(),Xo(s,2)}},pe.batchedUpdates=function(s,l){return s(l)},pe.createComponentSelector=function(s){return{$$typeof:hn,value:s}},pe.createContainer=function(s,l,f,y,S,N,W,nt,dt,Tt){return dr(s,l,!1,null,f,y,N,W,nt,dt,Tt,null)},pe.createHasPseudoClassSelector=function(s){return{$$typeof:_s,value:s}},pe.createHydrationContainer=function(s,l,f,y,S,N,W,nt,dt,Tt,Ut,zt,xt){return s=dr(f,y,!0,s,S,N,nt,dt,Tt,Ut,zt,xt),s.context=_f(null),f=s.current,y=vi(),S=an(y),S.callback=l??null,Re(f,S,y),s.current.lanes=y,L(s,y),ke(s),s},pe.createPortal=function(s,l,f){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xs,key:y==null?null:""+y,children:s,containerInfo:l,implementation:f}},pe.createRoleSelector=function(s){return{$$typeof:Bs,value:s}},pe.createTestNameSelector=function(s){return{$$typeof:uu,value:s}},pe.createTextSelector=function(s){return{$$typeof:Pi,value:s}},pe.defaultOnCaughtError=function(s){console.error(s)},pe.defaultOnRecoverableError=function(s){Sl(s)},pe.defaultOnUncaughtError=function(s){Sl(s)},pe.deferredUpdates=function(s){var l=Zt.T,f=hl();try{return Ui(32),Zt.T=null,s()}finally{Ui(f),Zt.T=l}},pe.discreteUpdates=function(s,l,f,y,S){var N=Zt.T,W=hl();try{return Ui(2),Zt.T=null,s(l,f,y,S)}finally{Ui(W),Zt.T=N,ye===0&&(Na=Ra()+500)}},pe.findAllNodes=Jr,pe.findBoundingRects=function(s,l){if(!$o)throw Error(u(363));l=Jr(s,l),s=[];for(var f=0;f<l.length;f++)s.push(tp(l[f]));for(l=s.length-1;0<l;l--){f=s[l];for(var y=f.x,S=y+f.width,N=f.y,W=N+f.height,nt=l-1;0<=nt;nt--)if(l!==nt){var dt=s[nt],Tt=dt.x,Ut=Tt+dt.width,zt=dt.y,xt=zt+dt.height;if(y>=Tt&&N>=zt&&S<=Ut&&W<=xt){s.splice(l,1);break}else if(y!==Tt||f.width!==dt.width||xt<N||zt>W){if(!(N!==zt||f.height!==dt.height||Ut<y||Tt>S)){Tt>y&&(dt.width+=Tt-y,dt.x=y),Ut<S&&(dt.width=S-Tt),s.splice(l,1);break}}else{zt>N&&(dt.height+=zt-N,dt.y=N),xt<W&&(dt.height=W-zt),s.splice(l,1);break}}}return s},pe.findHostInstance=gr,pe.findHostInstanceWithNoPortals=function(s){return s=w(s),s=s!==null?I(s):null,s===null?null:eo(s.stateNode)},pe.findHostInstanceWithWarning=function(s){return gr(s)},pe.flushPassiveEffects=el,pe.flushSyncFromReconciler=function(s){var l=ye;ye|=1;var f=Zt.T,y=hl();try{if(Ui(2),Zt.T=null,s)return s()}finally{Ui(y),Zt.T=f,ye=l,!(ye&6)&&oi(0)}},pe.flushSyncWork=pf,pe.focusWithin=function(s,l){if(!$o)throw Error(u(363));for(s=Wr(s),l=Zl(s,l),l=Array.from(l),s=0;s<l.length;){var f=l[s++],y=f.tag;if(!Vs(f)){if((y===5||y===26||y===27)&&hh(f.stateNode))return!0;for(f=f.child;f!==null;)l.push(f),f=f.sibling}}return!1},pe.getFindAllNodesFailureDescription=function(s,l){if(!$o)throw Error(u(363));var f=0,y=[];s=[Wr(s),0];for(var S=0;S<s.length;){var N=s[S++],W=N.tag,nt=s[S++],dt=l[nt];if((W!==5&&W!==26&&W!==27||!Vs(N))&&(ih(N,dt)&&(y.push(ta(dt)),nt++,nt>f&&(f=nt)),nt<l.length))for(N=N.child;N!==null;)s.push(N,nt),N=N.sibling}if(f<l.length){for(s=[];f<l.length;f++)s.push(ta(l[f]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+s.join(" > ")}return null},pe.getPublicRootInstance=function(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 27:case 5:return eo(s.child.stateNode);default:return s.child.stateNode}},pe.injectIntoDevTools=function(){var s={bundleType:0,version:Wo,rendererPackageName:W0,currentDispatcherRef:Zt,findFiberByHostInstance:ch,reconcilerVersion:"19.0.0"};if(Tn!==null&&(s.rendererConfig=Tn),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")s=!1;else{var l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(l.isDisabled||!l.supportsFiber)s=!0;else{try{iu=l.inject(s),Hn=l}catch{}s=!!l.checkDCE}}return s},pe.isAlreadyRendering=function(){return!1},pe.observeVisibleRects=function(s,l,f,y){if(!$o)throw Error(u(363));s=Jr(s,l);var S=fh(s,f,y).disconnect;return{disconnect:function(){S()}}},pe.shouldError=function(){return null},pe.shouldSuspend=function(){return!1},pe.startHostTransition=function(s,l,f,y){if(s.tag!==5)throw Error(u(476));var S=kr(s).queue;Ku(s,S,l,no,f===null?r:function(){var N=kr(s).next.queue;return Zi(s,N,{},vi()),f(y)})},pe.updateContainer=function(s,l,f,y){var S=l.current,N=vi();return Ms(S,N,s,l,f,y),N},pe.updateContainerSync=function(s,l,f,y){return l.tag===0&&el(),Ms(l.current,2,s,l,f,y),2},pe},a.exports.default=a.exports,Object.defineProperty(a.exports,"__esModule",{value:!0})}(qp)),qp.exports}var T2;function oS(){return T2||(T2=1,Hp.exports=lS()),Hp.exports}var uS=oS();const cS=N1(uS);var jp={exports:{}},vo={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b2;function hS(){return b2||(b2=1,vo.ConcurrentRoot=1,vo.ContinuousEventPriority=8,vo.DefaultEventPriority=32,vo.DiscreteEventPriority=2,vo.IdleEventPriority=268435456,vo.LegacyRoot=0,vo.NoEventPriority=0),vo}var A2;function fS(){return A2||(A2=1,jp.exports=hS()),jp.exports}var I1=fS(),dS=ve();const R2={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let C2=!1,D2=!1;const L1=".react-konva-event",gS=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,mS=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,pS={};function C0(a,t,n=pS){if(!C2&&"zIndex"in t&&(console.warn(mS),C2=!0),!D2&&t.draggable){var r=t.x!==void 0||t.y!==void 0,u=t.onDragEnd||t.onDragMove;r&&!u&&(console.warn(gS),D2=!0)}for(var c in n)if(!R2[c]){var d=c.slice(0,2)==="on",m=n[c]!==t[c];if(d&&m){var _=c.substr(2).toLowerCase();_.substr(0,7)==="content"&&(_="content"+_.substr(7,1).toUpperCase()+_.substr(8)),a.off(_,n[c])}var v=!t.hasOwnProperty(c);v&&a.setAttr(c,void 0)}var b=t._useStrictMode,R={},U=!1;const w={};for(var c in t)if(!R2[c]){var d=c.slice(0,2)==="on",O=n[c]!==t[c];if(d&&O){var _=c.substr(2).toLowerCase();_.substr(0,7)==="content"&&(_="content"+_.substr(7,1).toUpperCase()+_.substr(8)),t[c]&&(w[_]=t[c])}!d&&(t[c]!==n[c]||b&&t[c]!==a.getAttr(c))&&(U=!0,R[c]=t[c])}U&&(a.setAttrs(R),Lu(a));for(var _ in w)a.on(_+L1,w[_])}function Lu(a){if(!dS.Konva.autoDrawEnabled){var t=a.getLayer()||a.getStage();t&&t.batchDraw()}}var Fp=O1();const o4={},yS={};s0.Node.prototype._applyProps=C0;let D0=I1.DefaultEventPriority;function _S(a,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}a.add(t),Lu(a)}function vS(a,t,n){let r=s0[a];r||(console.error(`Konva has no node with the type ${a}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${a}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=s0.Group);const u={},c={};for(var d in t){var m=d.slice(0,2)==="on";m?c[d]=t[d]:u[d]=t[d]}const _=new r(u);return C0(_,c),_}function ES(a,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${a}"`)}function SS(a,t,n){return!1}function TS(a){return a}function bS(){return null}function AS(){return null}function RS(a,t,n,r){return yS}function CS(){}function DS(a){}function wS(a,t){return!1}function NS(){return o4}function OS(){return o4}const MS=setTimeout,xS=clearTimeout,VS=-1;function US(a,t){return!1}const IS=!1,LS=!0,zS=!0,PS=!1,BS=!1;function GS(a,t){t.parent===a?t.moveToTop():a.add(t),Lu(a)}function kS(a,t){t.parent===a?t.moveToTop():a.add(t),Lu(a)}function u4(a,t,n){t._remove(),a.add(t),t.setZIndex(n.getZIndex()),Lu(a)}function HS(a,t,n){u4(a,t,n)}function qS(a,t){t.destroy(),t.off(L1),Lu(a)}function jS(a,t){t.destroy(),t.off(L1),Lu(a)}function FS(a,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function KS(a,t,n){}function YS(a,t,n,r){C0(a,r,n)}function XS(a){a.hide(),Lu(a)}function QS(a){}function ZS(a,t){(t.visible==null||t.visible)&&a.show()}function WS(a,t){}function JS(a){}function $S(){}function t6(){return D0}function e6(){}function n6(){return null}function i6(a){D0=a}function a6(){return D0}function s6(){return D0||I1.DefaultEventPriority}function r6(){return!1}function l6(){}function o6(){return!1}function u6(){return!0}function c6(){}function h6(){}function f6(){return null}const d6=null;function g6(){}const m6=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:d6,appendChild:GS,appendChildToContainer:kS,appendInitialChild:_S,cancelTimeout:xS,clearContainer:JS,commitMount:KS,commitTextUpdate:FS,commitUpdate:YS,createInstance:vS,createTextInstance:ES,detachDeletedInstance:$S,finalizeInitialChildren:SS,getChildHostContext:OS,getCurrentEventPriority:t6,getCurrentUpdatePriority:a6,getInstanceFromScope:n6,getPublicInstance:TS,getRootHostContext:NS,hideInstance:XS,hideTextInstance:QS,idlePriority:Fp.unstable_IdlePriority,insertBefore:u4,insertInContainerBefore:HS,isPrimaryRenderer:IS,maySuspendCommit:o6,noTimeout:VS,now:Fp.unstable_now,preloadInstance:u6,prepareForCommit:bS,preparePortalMount:AS,prepareScopeUpdate:e6,prepareUpdate:RS,removeChild:qS,removeChildFromContainer:jS,requestPostPaintCallback:l6,resetAfterCommit:CS,resetFormInstance:g6,resetTextContent:DS,resolveUpdatePriority:s6,run:Fp.unstable_runWithPriority,scheduleTimeout:MS,setCurrentUpdatePriority:i6,shouldAttemptEagerTransition:r6,shouldDeprioritizeSubtree:wS,shouldSetTextContent:US,startSuspendingCommit:c6,supportsHydration:BS,supportsMutation:zS,supportsPersistence:PS,suspendInstance:h6,unhideInstance:ZS,unhideTextInstance:WS,waitForCommitToBeReady:f6,warnsIfNotActing:LS},Symbol.toStringTag,{value:"Module"}));var p6=Object.defineProperty,y6=Object.defineProperties,_6=Object.getOwnPropertyDescriptors,w2=Object.getOwnPropertySymbols,v6=Object.prototype.hasOwnProperty,E6=Object.prototype.propertyIsEnumerable,N2=(a,t,n)=>t in a?p6(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,O2=(a,t)=>{for(var n in t||(t={}))v6.call(t,n)&&N2(a,n,t[n]);if(w2)for(var n of w2(t))E6.call(t,n)&&N2(a,n,t[n]);return a},S6=(a,t)=>y6(a,_6(t)),M2,x2;typeof window<"u"&&((M2=window.document)!=null&&M2.createElement||((x2=window.navigator)==null?void 0:x2.product)==="ReactNative")?ae.useLayoutEffect:ae.useEffect;function c4(a,t,n){if(!a)return;if(n(a)===!0)return a;let r=a.child;for(;r;){const u=c4(r,t,n);if(u)return u;r=r.sibling}}function h4(a){try{return Object.defineProperties(a,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return a}}const V2=console.error;console.error=function(){const a=[...arguments].join("");if(a!=null&&a.startsWith("Warning:")&&a.includes("useContext")){console.error=V2;return}return V2.apply(this,arguments)};const z1=h4(ae.createContext(null));class f4 extends ae.Component{render(){return ae.createElement(z1.Provider,{value:this._reactInternals},this.props.children)}}function T6(){const a=ae.useContext(z1);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=ae.useId();return ae.useMemo(()=>{for(const r of[a,a==null?void 0:a.alternate]){if(!r)continue;const u=c4(r,!1,c=>{let d=c.memoizedState;for(;d;){if(d.memoizedState===t)return!0;d=d.next}});if(u)return u}},[a,t])}function b6(){const a=T6(),[t]=ae.useState(()=>new Map);t.clear();let n=a;for(;n;){if(n.type&&typeof n.type=="object"){const u=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;u&&u!==z1&&!t.has(u)&&t.set(u,ae.useContext(h4(u)))}n=n.return}return t}function A6(){const a=b6();return ae.useMemo(()=>Array.from(a.keys()).reduce((t,n)=>r=>ae.createElement(t,null,ae.createElement(n.Provider,S6(O2({},r),{value:a.get(n)}))),t=>ae.createElement(f4,O2({},t))),[a])}if(oa.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function R6(a){const t=oa.useRef({});return oa.useLayoutEffect(()=>{t.current=a}),oa.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const C6=a=>{const t=oa.useRef(null),n=oa.useRef(null),r=oa.useRef(null),u=R6(a),c=A6(),d=m=>{const{forwardedRef:_}=a;_&&(typeof _=="function"?_(m):_.current=m)};return oa.useLayoutEffect(()=>(n.current=new s0.Stage({width:a.width,height:a.height,container:t.current}),d(n.current),r.current=Qd.createContainer(n.current,I1.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),Qd.updateContainer(oa.createElement(c,{},a.children),r.current,null,()=>{}),()=>{d(null),Qd.updateContainer(null,r.current,null),n.current.destroy()}),[]),oa.useLayoutEffect(()=>{d(n.current),C0(n.current,a,u),Qd.updateContainer(oa.createElement(c,{},a.children),r.current,null)}),oa.createElement("div",{ref:t,id:a.id,accessKey:a.accessKey,className:a.className,role:a.role,style:a.style,tabIndex:a.tabIndex,title:a.title})},D6="Layer",w6="Line",N6="Path",Qd=cS(m6);Qd.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:oa.version,rendererPackageName:"react-konva"});const O6=oa.forwardRef((a,t)=>oa.createElement(f4,{},oa.createElement(C6,{...a,forwardedRef:t}))),P1=a=>{const t=a.filter((v,b)=>b%2===0),n=a.filter((v,b)=>b%2===1),r=Math.min(...t),u=Math.max(...t),c=Math.min(...n),d=Math.max(...n),m=u-r||1,_=d-c||1;return a.map((v,b)=>b%2===0?(v-r)/m:(v-c)/_)},M6=a=>{const t=a.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/g);let n=0,r=0;const u=[];return t==null||t.forEach(c=>{const d=c[0],m=c.slice(1).trim().split(/[\s,]+/).map(Number).filter(_=>!isNaN(_));d==="M"||d==="L"?(n=m[0],r=m[1],u.push(n,r)):d==="H"?(n=m[0],u.push(n,r)):d==="V"&&(r=m[0],u.push(n,r))}),P1(u)},U2=a=>{if([...new Set(a)].length<=2){console.warn("Very simple shape detected. Scaling to default range.");const n=Math.min(...a),r=Math.max(...a)||1;return a.map(u=>(u-n)/(r-n))}return P1(a)},I2=(a,t)=>a.length<t?[...a,...Array(t-a.length).fill(0)]:a,L2=(a,t,n=10)=>{const r=Math.max(a.length,t.length),u=I2(a,r),c=I2(t,r),d=u.reduce((b,R,U)=>b+Math.pow(R-c[U],2),0),_=Math.sqrt(d)/r,v=Math.max(0,1-_*n);return Math.min(v)},z2=(a,t)=>{const n=(a.length-1)/(t-1);return Array.from({length:t},(r,u)=>{const c=u*n,d=Math.floor(c),m=Math.min(d+1,a.length-1),_=c-d;return a[d]*(1-_)+a[m]*_})},x6=(a,t)=>{if(a.length<2||t.length<2)return console.warn("Insufficient points to calculate similarity"),0;const n=U2(a),r=U2(t);if(n.every(b=>b===0)||r.every(b=>b===0))return console.warn("One or both normalized paths are entirely zeros. Using fallback similarity."),L2(n,r);const u=Math.max(n.length,r.length),c=z2(n,u),d=z2(r,u),m=c.reduce((b,R,U)=>b+R*d[U],0),_=Math.sqrt(c.reduce((b,R)=>b+R*R,0)),v=Math.sqrt(d.reduce((b,R)=>b+R*R,0));return _===0||v===0?(console.warn("One or both paths have zero magnitude. Using fallback similarity."),L2(n,r)):m/(_*v)},V6=({svgPath:a,similarityThreshold:t,onComplete:n})=>{const[r,u]=ae.useState([]),[c,d]=ae.useState(!1),[m,_]=ae.useState(!1),[v,b]=ae.useState(null),R=400,U=400,w=G=>G.x>=0&&G.x<=R&&G.y>=0&&G.y<=U,O=G=>{const Y=G.target.getStage().getPointerPosition();return Y?{x:Y.x,y:Y.y}:{x:0,y:0}},I=G=>{const H=O(G);w(H)&&(d(!0),m||u([...r,{points:[H.x,H.y]}]))},P=G=>{if(!c)return;const H=O(G);if(w(H))if(m){const Y=r.map(q=>{const V=[];for(let D=0;D<q.points.length;D+=2){const x=q.points[D],L=q.points[D+1];Math.hypot(H.x-x,H.y-L)>=10&&V.push(x,L)}return{points:V}}).filter(q=>q.points.length>0);u(Y)}else{const Y=r[r.length-1],q=r.slice(0,r.length-1);q.push({points:[...Y.points,H.x,H.y]}),u(q)}},K=()=>{d(!1)},C=()=>{if(r.length===0){b("Please draw something on the canvas before submitting!"),setTimeout(()=>b(null),3e3);return}const G=r.flatMap(D=>D.points),H=P1(G),Y=M6(a),q=x6(H,Y),V=q>=t;b(V?`Great job! Similarity: ${(q*100).toFixed(2)}%`:`Keep practicing! Similarity: ${(q*100).toFixed(2)}%`),setTimeout(()=>{b(null),n(V,q)},2e3)},M=()=>{_(G=>!G)};return kt.jsxs("div",{style:Oc.container,children:[kt.jsx(O6,{width:R,height:U,onMouseDown:I,onMouseMove:P,onMouseUp:K,onTouchStart:I,onTouchMove:P,onTouchEnd:K,style:{border:"1px solid black",touchAction:"none"},children:kt.jsxs(D6,{children:[kt.jsx(N6,{data:a,stroke:"gray",strokeWidth:4,lineJoin:"round",x:150,y:100}),r.map((G,H)=>kt.jsx(w6,{points:G.points,stroke:"black",strokeWidth:6,tension:.5,lineCap:"round"},H))]})}),kt.jsxs("div",{style:Oc.controls,children:[kt.jsx("button",{style:m?Oc.activeButton:Oc.button,onClick:M,children:m?"Disable Eraser":"Enable Eraser"}),kt.jsx("button",{style:Oc.button,onClick:C,children:"Done Tracing"})]}),v&&kt.jsx("div",{style:Oc.feedbackPopup,children:kt.jsx("p",{style:Oc.feedbackText,children:v})})]})},Oc={container:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},controls:{display:"flex",gap:"10px",marginTop:"10px"},button:{padding:"10px 20px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",transition:"background-color 0.3s ease"},activeButton:{padding:"10px 20px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",transition:"background-color 0.3s ease"},feedbackPopup:{marginTop:"20px",padding:"15px 20px",borderRadius:"8px",backgroundColor:"#ffffff",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",border:"2px solid #ccc",textAlign:"center"},feedbackText:{fontSize:"18px",fontWeight:"bold",color:"#333"}},U6=({path:a,width:t=400,height:n=400,viewBox:r="-100 -100 300 400"})=>kt.jsx("div",{style:{...P2.svgWrapper,width:`${t}px`,height:`${n}px`},children:kt.jsx("svg",{width:"100%",height:"100%",viewBox:r,preserveAspectRatio:"xMidYMid meet",xmlns:"http://www.w3.org/2000/svg",style:P2.svg,children:kt.jsx("path",{d:a,stroke:"black",strokeWidth:"8",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})}),P2={svgWrapper:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px",border:"4px dotted #A6C3BB",borderRadius:"16px",background:"#E6F2ED",boxShadow:"4px 4px 0px rgba(0, 0, 0, 0.2)"},svg:{display:"block",maxWidth:"100%",maxHeight:"100%",filter:"drop-shadow(2px 4px 6px rgba(0, 0, 0, 0.2))"}};var B2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=function(a){const t=[];let n=0;for(let r=0;r<a.length;r++){let u=a.charCodeAt(r);u<128?t[n++]=u:u<2048?(t[n++]=u>>6|192,t[n++]=u&63|128):(u&64512)===55296&&r+1<a.length&&(a.charCodeAt(r+1)&64512)===56320?(u=65536+((u&1023)<<10)+(a.charCodeAt(++r)&1023),t[n++]=u>>18|240,t[n++]=u>>12&63|128,t[n++]=u>>6&63|128,t[n++]=u&63|128):(t[n++]=u>>12|224,t[n++]=u>>6&63|128,t[n++]=u&63|128)}return t},I6=function(a){const t=[];let n=0,r=0;for(;n<a.length;){const u=a[n++];if(u<128)t[r++]=String.fromCharCode(u);else if(u>191&&u<224){const c=a[n++];t[r++]=String.fromCharCode((u&31)<<6|c&63)}else if(u>239&&u<365){const c=a[n++],d=a[n++],m=a[n++],_=((u&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(_>>10)),t[r++]=String.fromCharCode(56320+(_&1023))}else{const c=a[n++],d=a[n++];t[r++]=String.fromCharCode((u&15)<<12|(c&63)<<6|d&63)}}return t.join("")},g4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,t){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let u=0;u<a.length;u+=3){const c=a[u],d=u+1<a.length,m=d?a[u+1]:0,_=u+2<a.length,v=_?a[u+2]:0,b=c>>2,R=(c&3)<<4|m>>4;let U=(m&15)<<2|v>>6,w=v&63;_||(w=64,d||(U=64)),r.push(n[b],n[R],n[U],n[w])}return r.join("")},encodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(a):this.encodeByteArray(d4(a),t)},decodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(a):I6(this.decodeStringToByteArray(a,t))},decodeStringToByteArray(a,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let u=0;u<a.length;){const c=n[a.charAt(u++)],m=u<a.length?n[a.charAt(u)]:0;++u;const v=u<a.length?n[a.charAt(u)]:64;++u;const R=u<a.length?n[a.charAt(u)]:64;if(++u,c==null||m==null||v==null||R==null)throw new L6;const U=c<<2|m>>4;if(r.push(U),v!==64){const w=m<<4&240|v>>2;if(r.push(w),R!==64){const O=v<<6&192|R;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class L6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z6=function(a){const t=d4(a);return g4.encodeByteArray(t,!0)},r0=function(a){return z6(a).replace(/\./g,"")},m4=function(a){try{return g4.decodeString(a,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=()=>P6().__FIREBASE_DEFAULTS__,G6=()=>{if(typeof process>"u"||typeof B2>"u")return;const a=B2.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},k6=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=a&&m4(a[1]);return t&&JSON.parse(t)},w0=()=>{try{return B6()||G6()||k6()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},p4=a=>{var t,n;return(n=(t=w0())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[a]},H6=a=>{const t=p4(a);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},y4=()=>{var a;return(a=w0())===null||a===void 0?void 0:a.config},_4=a=>{var t;return(t=w0())===null||t===void 0?void 0:t[`_${a}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(a,t){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",u=a.iat||0,c=a.sub||a.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:u,exp:u+3600,auth_time:u,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},a);return[r0(JSON.stringify(n)),r0(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function F6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ha())}function K6(){var a;const t=(a=w0())===null||a===void 0?void 0:a.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Y6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function X6(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function Q6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Z6(){const a=ha();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function W6(){return!K6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J6(){try{return typeof indexedDB=="object"}catch{return!1}}function $6(){return new Promise((a,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(r);u.onsuccess=()=>{u.result.close(),n||self.indexedDB.deleteDatabase(r),a(!0)},u.onupgradeneeded=()=>{n=!1},u.onerror=()=>{var c;t(((c=u.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="FirebaseError";class wo extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=tT,Object.setPrototypeOf(this,wo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pg.prototype.create)}}class pg{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},u=`${this.service}/${t}`,c=this.errors[t],d=c?eT(c,r):"Error",m=`${this.serviceName}: ${d} (${u}).`;return new wo(u,m,r)}}function eT(a,t){return a.replace(nT,(n,r)=>{const u=t[r];return u!=null?String(u):`<${r}?>`})}const nT=/\{\$([^}]+)}/g;function iT(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}function l0(a,t){if(a===t)return!0;const n=Object.keys(a),r=Object.keys(t);for(const u of n){if(!r.includes(u))return!1;const c=a[u],d=t[u];if(G2(c)&&G2(d)){if(!l0(c,d))return!1}else if(c!==d)return!1}for(const u of r)if(!n.includes(u))return!1;return!0}function G2(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(a){const t=[];for(const[n,r]of Object.entries(a))Array.isArray(r)?r.forEach(u=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(u))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Zd(a){const t={};return a.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[u,c]=r.split("=");t[decodeURIComponent(u)]=decodeURIComponent(c)}}),t}function Wd(a){const t=a.indexOf("?");if(!t)return"";const n=a.indexOf("#",t);return a.substring(t,n>0?n:void 0)}function aT(a,t){const n=new sT(a,t);return n.subscribe.bind(n)}class sT{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let u;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");rT(t,["next","error","complete"])?u=t:u={next:t,error:n,complete:r},u.next===void 0&&(u.next=Kp),u.error===void 0&&(u.error=Kp),u.complete===void 0&&(u.complete=Kp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?u.error(this.finalError):u.complete()}catch{}}),this.observers.push(u),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rT(a,t){if(typeof a!="object"||a===null)return!1;for(const n of t)if(n in a&&typeof a[n]=="function")return!0;return!1}function Kp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(a){return a&&a._delegate?a._delegate:a}class Ic{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new q6;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:n});u&&r.resolve(u)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),u=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(u)return null;throw c}else{if(u)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(uT(t))try{this.getOrInitializeService({instanceIdentifier:xc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:u});r.resolve(c)}catch{}}}}clearInstance(t=xc){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=xc){return this.instances.has(t)}getOptions(t=xc){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);r===m&&d.resolve(u)}return u}onInit(t,n){var r;const u=this.normalizeInstanceIdentifier(n),c=(r=this.onInitCallbacks.get(u))!==null&&r!==void 0?r:new Set;c.add(t),this.onInitCallbacks.set(u,c);const d=this.instances.get(u);return d&&t(d,u),()=>{c.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const u of r)try{u(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oT(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=xc){return this.component?this.component.multipleInstances?t:xc:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oT(a){return a===xc?void 0:a}function uT(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new lT(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(we||(we={}));const hT={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},fT=we.INFO,dT={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},gT=(a,t,...n)=>{if(t<a.logLevel)return;const r=new Date().toISOString(),u=dT[t];if(u)console[u](`[${r}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class B1{constructor(t){this.name=t,this._logLevel=fT,this._logHandler=gT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in we))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?hT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...t),this._logHandler(this,we.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...t),this._logHandler(this,we.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,we.INFO,...t),this._logHandler(this,we.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,we.WARN,...t),this._logHandler(this,we.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...t),this._logHandler(this,we.ERROR,...t)}}const mT=(a,t)=>t.some(n=>a instanceof n);let k2,H2;function pT(){return k2||(k2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yT(){return H2||(H2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const v4=new WeakMap,r1=new WeakMap,E4=new WeakMap,Yp=new WeakMap,G1=new WeakMap;function _T(a){const t=new Promise((n,r)=>{const u=()=>{a.removeEventListener("success",c),a.removeEventListener("error",d)},c=()=>{n(Ru(a.result)),u()},d=()=>{r(a.error),u()};a.addEventListener("success",c),a.addEventListener("error",d)});return t.then(n=>{n instanceof IDBCursor&&v4.set(n,a)}).catch(()=>{}),G1.set(t,a),t}function vT(a){if(r1.has(a))return;const t=new Promise((n,r)=>{const u=()=>{a.removeEventListener("complete",c),a.removeEventListener("error",d),a.removeEventListener("abort",d)},c=()=>{n(),u()},d=()=>{r(a.error||new DOMException("AbortError","AbortError")),u()};a.addEventListener("complete",c),a.addEventListener("error",d),a.addEventListener("abort",d)});r1.set(a,t)}let l1={get(a,t,n){if(a instanceof IDBTransaction){if(t==="done")return r1.get(a);if(t==="objectStoreNames")return a.objectStoreNames||E4.get(a);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ru(a[t])},set(a,t,n){return a[t]=n,!0},has(a,t){return a instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in a}};function ET(a){l1=a(l1)}function ST(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=a.call(Xp(this),t,...n);return E4.set(r,t.sort?t.sort():[t]),Ru(r)}:yT().includes(a)?function(...t){return a.apply(Xp(this),t),Ru(v4.get(this))}:function(...t){return Ru(a.apply(Xp(this),t))}}function TT(a){return typeof a=="function"?ST(a):(a instanceof IDBTransaction&&vT(a),mT(a,pT())?new Proxy(a,l1):a)}function Ru(a){if(a instanceof IDBRequest)return _T(a);if(Yp.has(a))return Yp.get(a);const t=TT(a);return t!==a&&(Yp.set(a,t),G1.set(t,a)),t}const Xp=a=>G1.get(a);function bT(a,t,{blocked:n,upgrade:r,blocking:u,terminated:c}={}){const d=indexedDB.open(a,t),m=Ru(d);return r&&d.addEventListener("upgradeneeded",_=>{r(Ru(d.result),_.oldVersion,_.newVersion,Ru(d.transaction),_)}),n&&d.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),m.then(_=>{c&&_.addEventListener("close",()=>c()),u&&_.addEventListener("versionchange",v=>u(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const AT=["get","getKey","getAll","getAllKeys","count"],RT=["put","add","delete","clear"],Qp=new Map;function q2(a,t){if(!(a instanceof IDBDatabase&&!(t in a)&&typeof t=="string"))return;if(Qp.get(t))return Qp.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,u=RT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(u||AT.includes(n)))return;const c=async function(d,...m){const _=this.transaction(d,u?"readwrite":"readonly");let v=_.store;return r&&(v=v.index(m.shift())),(await Promise.all([v[n](...m),u&&_.done]))[0]};return Qp.set(t,c),c}ET(a=>({...a,get:(t,n,r)=>q2(t,n)||a.get(t,n,r),has:(t,n)=>!!q2(t,n)||a.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function DT(a){const t=a.getComponent();return(t==null?void 0:t.type)==="VERSION"}const o1="@firebase/app",j2="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new B1("@firebase/app"),wT="@firebase/app-compat",NT="@firebase/analytics-compat",OT="@firebase/analytics",MT="@firebase/app-check-compat",xT="@firebase/app-check",VT="@firebase/auth",UT="@firebase/auth-compat",IT="@firebase/database",LT="@firebase/data-connect",zT="@firebase/database-compat",PT="@firebase/functions",BT="@firebase/functions-compat",GT="@firebase/installations",kT="@firebase/installations-compat",HT="@firebase/messaging",qT="@firebase/messaging-compat",jT="@firebase/performance",FT="@firebase/performance-compat",KT="@firebase/remote-config",YT="@firebase/remote-config-compat",XT="@firebase/storage",QT="@firebase/storage-compat",ZT="@firebase/firestore",WT="@firebase/vertexai",JT="@firebase/firestore-compat",$T="firebase",t9="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="[DEFAULT]",e9={[o1]:"fire-core",[wT]:"fire-core-compat",[OT]:"fire-analytics",[NT]:"fire-analytics-compat",[xT]:"fire-app-check",[MT]:"fire-app-check-compat",[VT]:"fire-auth",[UT]:"fire-auth-compat",[IT]:"fire-rtdb",[LT]:"fire-data-connect",[zT]:"fire-rtdb-compat",[PT]:"fire-fn",[BT]:"fire-fn-compat",[GT]:"fire-iid",[kT]:"fire-iid-compat",[HT]:"fire-fcm",[qT]:"fire-fcm-compat",[jT]:"fire-perf",[FT]:"fire-perf-compat",[KT]:"fire-rc",[YT]:"fire-rc-compat",[XT]:"fire-gcs",[QT]:"fire-gcs-compat",[ZT]:"fire-fst",[JT]:"fire-fst-compat",[WT]:"fire-vertex","fire-js":"fire-js",[$T]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new Map,n9=new Map,c1=new Map;function F2(a,t){try{a.container.addComponent(t)}catch(n){Ao.debug(`Component ${t.name} failed to register with FirebaseApp ${a.name}`,n)}}function Kh(a){const t=a.name;if(c1.has(t))return Ao.debug(`There were multiple attempts to register component ${t}.`),!1;c1.set(t,a);for(const n of o0.values())F2(n,a);for(const n of n9.values())F2(n,a);return!0}function k1(a,t){const n=a.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),a.container.getProvider(t)}function Dl(a){return a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cu=new pg("app","Firebase",i9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ic("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Cu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=t9;function S4(a,t={}){let n=a;typeof t!="object"&&(t={name:t});const r=Object.assign({name:u1,automaticDataCollectionEnabled:!1},t),u=r.name;if(typeof u!="string"||!u)throw Cu.create("bad-app-name",{appName:String(u)});if(n||(n=y4()),!n)throw Cu.create("no-options");const c=o0.get(u);if(c){if(l0(n,c.options)&&l0(r,c.config))return c;throw Cu.create("duplicate-app",{appName:u})}const d=new cT(u);for(const _ of c1.values())d.addComponent(_);const m=new a9(n,r,d);return o0.set(u,m),m}function T4(a=u1){const t=o0.get(a);if(!t&&a===u1&&y4())return S4();if(!t)throw Cu.create("no-app",{appName:a});return t}function Du(a,t,n){var r;let u=(r=e9[a])!==null&&r!==void 0?r:a;n&&(u+=`-${n}`);const c=u.match(/\s|\//),d=t.match(/\s|\//);if(c||d){const m=[`Unable to register library "${u}" with version "${t}":`];c&&m.push(`library name "${u}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ao.warn(m.join(" "));return}Kh(new Ic(`${u}-version`,()=>({library:u,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9="firebase-heartbeat-database",r9=1,rg="firebase-heartbeat-store";let Zp=null;function b4(){return Zp||(Zp=bT(s9,r9,{upgrade:(a,t)=>{switch(t){case 0:try{a.createObjectStore(rg)}catch(n){console.warn(n)}}}}).catch(a=>{throw Cu.create("idb-open",{originalErrorMessage:a.message})})),Zp}async function l9(a){try{const n=(await b4()).transaction(rg),r=await n.objectStore(rg).get(A4(a));return await n.done,r}catch(t){if(t instanceof wo)Ao.warn(t.message);else{const n=Cu.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ao.warn(n.message)}}}async function K2(a,t){try{const r=(await b4()).transaction(rg,"readwrite");await r.objectStore(rg).put(t,A4(a)),await r.done}catch(n){if(n instanceof wo)Ao.warn(n.message);else{const r=Cu.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ao.warn(r.message)}}}function A4(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9=1024,u9=30*24*60*60*1e3;class c9{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new f9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Y2();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:u}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const m=new Date(d.date).valueOf();return Date.now()-m<=u9}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ao.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Y2(),{heartbeatsToSend:r,unsentEntries:u}=h9(this._heartbeatsCache.heartbeats),c=r0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,u.length>0?(this._heartbeatsCache.heartbeats=u,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Ao.warn(n),""}}}function Y2(){return new Date().toISOString().substring(0,10)}function h9(a,t=o9){const n=[];let r=a.slice();for(const u of a){const c=n.find(d=>d.agent===u.agent);if(c){if(c.dates.push(u.date),X2(n)>t){c.dates.pop();break}}else if(n.push({agent:u.agent,dates:[u.date]}),X2(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class f9{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return J6()?$6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await l9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const u=await this.read();return K2(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:u.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const u=await this.read();return K2(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:u.lastSentHeartbeatDate,heartbeats:[...u.heartbeats,...t.heartbeats]})}else return}}function X2(a){return r0(JSON.stringify({version:2,heartbeats:a})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d9(a){Kh(new Ic("platform-logger",t=>new CT(t),"PRIVATE")),Kh(new Ic("heartbeat",t=>new c9(t),"PRIVATE")),Du(o1,j2,a),Du(o1,j2,"esm2017"),Du("fire-js","")}d9("");var g9="firebase",m9="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Du(g9,m9,"app");function H1(a,t){var n={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&t.indexOf(r)<0&&(n[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,r=Object.getOwnPropertySymbols(a);u<r.length;u++)t.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(a,r[u])&&(n[r[u]]=a[r[u]]);return n}function R4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p9=R4,C4=new pg("auth","Firebase",R4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=new B1("@firebase/auth");function y9(a,...t){u0.logLevel<=we.WARN&&u0.warn(`Auth (${tf}): ${a}`,...t)}function Qm(a,...t){u0.logLevel<=we.ERROR&&u0.error(`Auth (${tf}): ${a}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(a,...t){throw q1(a,...t)}function wl(a,...t){return q1(a,...t)}function D4(a,t,n){const r=Object.assign(Object.assign({},p9()),{[t]:n});return new pg("auth","Firebase",r).create(t,{appName:a.name})}function bo(a){return D4(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function q1(a,...t){if(typeof a!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=a.name),a._errorFactory.create(n,...r)}return C4.create(a,...t)}function Jt(a,t,...n){if(!a)throw q1(t,...n)}function Eo(a){const t="INTERNAL ASSERTION FAILED: "+a;throw Qm(t),new Error(t)}function Ro(a,t){a||Eo(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.href)||""}function _9(){return Q2()==="http:"||Q2()==="https:"}function Q2(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_9()||X6()||"connection"in navigator)?navigator.onLine:!0}function E9(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(t,n){this.shortDelay=t,this.longDelay=n,Ro(n>t,"Short delay should be less than long delay!"),this.isMobile=F6()||Q6()}get(){return v9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(a,t){Ro(a.emulator,"Emulator should always be set here");const{url:n}=a.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Eo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Eo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Eo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9=new _g(3e4,6e4);function zu(a,t){return a.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:a.tenantId}):t}async function Pu(a,t,n,r,u={}){return N4(a,u,async()=>{let c={},d={};r&&(t==="GET"?d=r:c={body:JSON.stringify(r)});const m=yg(Object.assign({key:a.config.apiKey},d)).slice(1),_=await a._getAdditionalHeaders();_["Content-Type"]="application/json",a.languageCode&&(_["X-Firebase-Locale"]=a.languageCode);const v=Object.assign({method:t,headers:_},c);return Y6()||(v.referrerPolicy="no-referrer"),w4.fetch()(O4(a,a.config.apiHost,n,m),v)})}async function N4(a,t,n){a._canInitEmulator=!1;const r=Object.assign(Object.assign({},S9),t);try{const u=new A9(a),c=await Promise.race([n(),u.promise]);u.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Gm(a,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[_,v]=m.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gm(a,"credential-already-in-use",d);if(_==="EMAIL_EXISTS")throw Gm(a,"email-already-in-use",d);if(_==="USER_DISABLED")throw Gm(a,"user-disabled",d);const b=r[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw D4(a,b,v);Ur(a,b)}}catch(u){if(u instanceof wo)throw u;Ur(a,"network-request-failed",{message:String(u)})}}async function vg(a,t,n,r,u={}){const c=await Pu(a,t,n,r,u);return"mfaPendingCredential"in c&&Ur(a,"multi-factor-auth-required",{_serverResponse:c}),c}function O4(a,t,n,r){const u=`${t}${n}?${r}`;return a.config.emulator?j1(a.config,u):`${a.config.apiScheme}://${u}`}function b9(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class A9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wl(this.auth,"network-request-failed")),T9.get())})}}function Gm(a,t,n){const r={appName:a.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const u=wl(a,t,r);return u.customData._tokenResponse=n,u}function Z2(a){return a!==void 0&&a.enterprise!==void 0}class R9{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return b9(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function C9(a,t){return Pu(a,"GET","/v2/recaptchaConfig",zu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D9(a,t){return Pu(a,"POST","/v1/accounts:delete",t)}async function M4(a,t){return Pu(a,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(a){if(a)try{const t=new Date(Number(a));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function w9(a,t=!1){const n=$a(a),r=await n.getIdToken(t),u=F1(r);Jt(u&&u.exp&&u.auth_time&&u.iat,n.auth,"internal-error");const c=typeof u.firebase=="object"?u.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:u,token:r,authTime:eg(Wp(u.auth_time)),issuedAtTime:eg(Wp(u.iat)),expirationTime:eg(Wp(u.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Wp(a){return Number(a)*1e3}function F1(a){const[t,n,r]=a.split(".");if(t===void 0||n===void 0||r===void 0)return Qm("JWT malformed, contained fewer than 3 sections"),null;try{const u=m4(n);return u?JSON.parse(u):(Qm("Failed to decode base64 JWT payload"),null)}catch(u){return Qm("Caught error parsing JWT payload as JSON",u==null?void 0:u.toString()),null}}function W2(a){const t=F1(a);return Jt(t,"internal-error"),Jt(typeof t.exp<"u","internal-error"),Jt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lg(a,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof wo&&N9(r)&&a.auth.currentUser===a&&await a.auth.signOut(),r}}function N9({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const u=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,u)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=eg(this.lastLoginAt),this.creationTime=eg(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c0(a){var t;const n=a.auth,r=await a.getIdToken(),u=await lg(a,M4(n,{idToken:r}));Jt(u==null?void 0:u.users.length,n,"internal-error");const c=u.users[0];a._notifyReloadListener(c);const d=!((t=c.providerUserInfo)===null||t===void 0)&&t.length?x4(c.providerUserInfo):[],m=x9(a.providerData,d),_=a.isAnonymous,v=!(a.email&&c.passwordHash)&&!(m!=null&&m.length),b=_?v:!1,R={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:m,metadata:new f1(c.createdAt,c.lastLoginAt),isAnonymous:b};Object.assign(a,R)}async function M9(a){const t=$a(a);await c0(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function x9(a,t){return[...a.filter(r=>!t.some(u=>u.providerId===r.providerId)),...t]}function x4(a){return a.map(t=>{var{providerId:n}=t,r=H1(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V9(a,t){const n=await N4(a,{},async()=>{const r=yg({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:u,apiKey:c}=a.config,d=O4(a,u,"/v1/token",`key=${c}`),m=await a._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",w4.fetch()(d,{method:"POST",headers:m,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function U9(a,t){return Pu(a,"POST","/v2/accounts:revokeToken",zu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Jt(t.idToken,"internal-error"),Jt(typeof t.idToken<"u","internal-error"),Jt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):W2(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Jt(t.length!==0,"internal-error");const n=W2(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Jt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:u,expiresIn:c}=await V9(t,n);this.updateTokensAndExpiration(r,u,Number(c))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:u,expirationTime:c}=n,d=new Hh;return r&&(Jt(typeof r=="string","internal-error",{appName:t}),d.refreshToken=r),u&&(Jt(typeof u=="string","internal-error",{appName:t}),d.accessToken=u),c&&(Jt(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Hh,this.toJSON())}_performRefresh(){return Eo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(a,t){Jt(typeof a=="string"||typeof a>"u","internal-error",{appName:t})}class So{constructor(t){var{uid:n,auth:r,stsTokenManager:u}=t,c=H1(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new O9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=u,this.accessToken=u.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new f1(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(t){const n=await lg(this,this.stsTokenManager.getToken(this.auth,t));return Jt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return w9(this,t)}reload(){return M9(this)}_assign(t){this!==t&&(Jt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new So(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Jt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await c0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dl(this.auth.app))return Promise.reject(bo(this.auth));const t=await this.getIdToken();return await lg(this,D9(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,u,c,d,m,_,v,b;const R=(r=n.displayName)!==null&&r!==void 0?r:void 0,U=(u=n.email)!==null&&u!==void 0?u:void 0,w=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,O=(d=n.photoURL)!==null&&d!==void 0?d:void 0,I=(m=n.tenantId)!==null&&m!==void 0?m:void 0,P=(_=n._redirectEventId)!==null&&_!==void 0?_:void 0,K=(v=n.createdAt)!==null&&v!==void 0?v:void 0,C=(b=n.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:M,emailVerified:G,isAnonymous:H,providerData:Y,stsTokenManager:q}=n;Jt(M&&q,t,"internal-error");const V=Hh.fromJSON(this.name,q);Jt(typeof M=="string",t,"internal-error"),vu(R,t.name),vu(U,t.name),Jt(typeof G=="boolean",t,"internal-error"),Jt(typeof H=="boolean",t,"internal-error"),vu(w,t.name),vu(O,t.name),vu(I,t.name),vu(P,t.name),vu(K,t.name),vu(C,t.name);const D=new So({uid:M,auth:t,email:U,emailVerified:G,displayName:R,isAnonymous:H,photoURL:O,phoneNumber:w,tenantId:I,stsTokenManager:V,createdAt:K,lastLoginAt:C});return Y&&Array.isArray(Y)&&(D.providerData=Y.map(x=>Object.assign({},x))),P&&(D._redirectEventId=P),D}static async _fromIdTokenResponse(t,n,r=!1){const u=new Hh;u.updateFromServerResponse(n);const c=new So({uid:n.localId,auth:t,stsTokenManager:u,isAnonymous:r});return await c0(c),c}static async _fromGetAccountInfoResponse(t,n,r){const u=n.users[0];Jt(u.localId!==void 0,"internal-error");const c=u.providerUserInfo!==void 0?x4(u.providerUserInfo):[],d=!(u.email&&u.passwordHash)&&!(c!=null&&c.length),m=new Hh;m.updateFromIdToken(r);const _=new So({uid:u.localId,auth:t,stsTokenManager:m,isAnonymous:d}),v={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:c,metadata:new f1(u.createdAt,u.lastLoginAt),isAnonymous:!(u.email&&u.passwordHash)&&!(c!=null&&c.length)};return Object.assign(_,v),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=new Map;function To(a){Ro(a instanceof Function,"Expected a class definition");let t=J2.get(a);return t?(Ro(t instanceof a,"Instance stored in cache mismatched with class"),t):(t=new a,J2.set(a,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}V4.type="NONE";const $2=V4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(a,t,n){return`firebase:${a}:${t}:${n}`}class qh{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:u,name:c}=this.auth;this.fullUserKey=Zm(this.userKey,u.apiKey,c),this.fullPersistenceKey=Zm("persistence",u.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?So._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new qh(To($2),t,r);const u=(await Promise.all(n.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let c=u[0]||To($2);const d=Zm(r,t.config.apiKey,t.name);let m=null;for(const v of n)try{const b=await v._get(d);if(b){const R=So._fromJSON(t,b);v!==c&&(m=R),c=v;break}}catch{}const _=u.filter(v=>v._shouldAllowMigration);return!c._shouldAllowMigration||!_.length?new qh(c,t,r):(c=_[0],m&&await c._set(d,m.toJSON()),await Promise.all(n.map(async v=>{if(v!==c)try{await v._remove(d)}catch{}})),new qh(c,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(a){const t=a.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(z4(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(U4(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(B4(t))return"Blackberry";if(G4(t))return"Webos";if(I4(t))return"Safari";if((t.includes("chrome/")||L4(t))&&!t.includes("edge/"))return"Chrome";if(P4(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=a.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function U4(a=ha()){return/firefox\//i.test(a)}function I4(a=ha()){const t=a.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function L4(a=ha()){return/crios\//i.test(a)}function z4(a=ha()){return/iemobile/i.test(a)}function P4(a=ha()){return/android/i.test(a)}function B4(a=ha()){return/blackberry/i.test(a)}function G4(a=ha()){return/webos/i.test(a)}function K1(a=ha()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function I9(a=ha()){var t;return K1(a)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function L9(){return Z6()&&document.documentMode===10}function k4(a=ha()){return K1(a)||P4(a)||G4(a)||B4(a)||/windows phone/i.test(a)||z4(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(a,t=[]){let n;switch(a){case"Browser":n=tv(ha());break;case"Worker":n=`${tv(ha())}-${a}`;break;default:n=a}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${tf}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=c=>new Promise((d,m)=>{try{const _=t(c);d(_)}catch(_){m(_)}});r.onAbort=n,this.queue.push(r);const u=this.queue.length-1;return()=>{this.queue[u]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const u of n)try{u()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P9(a,t={}){return Pu(a,"GET","/v2/passwordPolicy",zu(a,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9=6;class G9{constructor(t){var n,r,u,c;const d=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:B9,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(u=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&u!==void 0?u:"",this.forceUpgradeOnSignin=(c=t.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,u,c,d,m;const _={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,_),this.validatePasswordCharacterOptions(t,_),_.isValid&&(_.isValid=(n=_.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),_.isValid&&(_.isValid=(r=_.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),_.isValid&&(_.isValid=(u=_.containsLowercaseLetter)!==null&&u!==void 0?u:!0),_.isValid&&(_.isValid=(c=_.containsUppercaseLetter)!==null&&c!==void 0?c:!0),_.isValid&&(_.isValid=(d=_.containsNumericCharacter)!==null&&d!==void 0?d:!0),_.isValid&&(_.isValid=(m=_.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),_}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,u=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),u&&(n.meetsMaxPasswordLength=t.length<=u)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let u=0;u<t.length;u++)r=t.charAt(u),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,u,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=u)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(t,n,r,u){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=u,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ev(this),this.idTokenSubscription=new ev(this),this.beforeStateQueue=new z9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=C4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=u.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=To(n)),this._initializationPromise=this.queue(async()=>{var r,u;if(!this._deleted&&(this.persistenceManager=await qh.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await M4(this,{idToken:t}),r=await So._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Dl(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let u=r,c=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=u==null?void 0:u._redirectEventId,_=await this.tryRedirectSignIn(t);(!d||d===m)&&(_!=null&&_.user)&&(u=_.user,c=!0)}if(!u)return this.directlySetCurrentUser(null);if(!u._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(u)}catch(d){u=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return u?this.reloadAndSetCurrentUserOrClear(u):this.directlySetCurrentUser(null)}return Jt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===u._redirectEventId?this.directlySetCurrentUser(u):this.reloadAndSetCurrentUserOrClear(u)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await c0(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=E9()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Dl(this.app))return Promise.reject(bo(this));const n=t?$a(t):null;return n&&Jt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Jt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Dl(this.app)?Promise.reject(bo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Dl(this.app)?Promise.reject(bo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(To(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await P9(this),n=new G9(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new pg("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await U9(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&To(t)||this._popupRedirectResolver;Jt(n,this,"argument-error"),this.redirectPersistenceManager=await qh.create(this,[To(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,u){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Jt(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const _=t.addObserver(n,r,u);return()=>{d=!0,_()}}else{const _=t.addObserver(n);return()=>{d=!0,_()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Jt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=H4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const u=await this._getAppCheckToken();return u&&(n["X-Firebase-AppCheck"]=u),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&y9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Bc(a){return $a(a)}class ev{constructor(t){this.auth=t,this.observer=null,this.addObserver=aT(n=>this.observer=n)}get next(){return Jt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H9(a){N0=a}function q4(a){return N0.loadJS(a)}function q9(){return N0.recaptchaEnterpriseScript}function j9(){return N0.gapiScript}function F9(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class K9{constructor(){this.enterprise=new Y9}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class Y9{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const X9="recaptcha-enterprise",j4="NO_RECAPTCHA";class Q9{constructor(t){this.type=X9,this.auth=Bc(t)}async verify(t="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{C9(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(_=>{if(_.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const v=new R9(_);return c.tenantId==null?c._agentRecaptchaConfig=v:c._tenantRecaptchaConfigs[c.tenantId]=v,d(v.siteKey)}}).catch(_=>{m(_)})})}function u(c,d,m){const _=window.grecaptcha;Z2(_)?_.enterprise.ready(()=>{_.enterprise.execute(c,{action:t}).then(v=>{d(v)}).catch(()=>{d(j4)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new K9().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{r(this.auth).then(m=>{if(!n&&Z2(window.grecaptcha))u(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let _=q9();_.length!==0&&(_+=m),q4(_).then(()=>{u(m,c,d)}).catch(v=>{d(v)})}}).catch(m=>{d(m)})})}}async function nv(a,t,n,r=!1,u=!1){const c=new Q9(a);let d;if(u)d=j4;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const m=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const _=m.phoneEnrollmentInfo.phoneNumber,v=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:_,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const _=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function d1(a,t,n,r,u){var c;if(!((c=a._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await nv(a,t,n,n==="getOobCode");return r(a,d)}else return r(a,t).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await nv(a,t,n,n==="getOobCode");return r(a,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(a,t){const n=k1(a,"auth");if(n.isInitialized()){const u=n.getImmediate(),c=n.getOptions();if(l0(c,t??{}))return u;Ur(u,"already-initialized")}return n.initialize({options:t})}function W9(a,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(To);t!=null&&t.errorMap&&a._updateErrorMap(t.errorMap),a._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function J9(a,t,n){const r=Bc(a);Jt(r._canInitEmulator,r,"emulator-config-failed"),Jt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const u=!1,c=F4(t),{host:d,port:m}=$9(t),_=m===null?"":`:${m}`;r.config.emulator={url:`${c}//${d}${_}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:u})}),t8()}function F4(a){const t=a.indexOf(":");return t<0?"":a.substr(0,t+1)}function $9(a){const t=F4(a),n=/(\/\/)?([^?#/]+)/.exec(a.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",u=/^(\[[^\]]+\])(:|$)/.exec(r);if(u){const c=u[1];return{host:c,port:iv(r.substr(c.length+1))}}else{const[c,d]=r.split(":");return{host:c,port:iv(d)}}}function iv(a){if(!a)return null;const t=Number(a);return isNaN(t)?null:t}function t8(){function a(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Eo("not implemented")}_getIdTokenResponse(t){return Eo("not implemented")}_linkToIdToken(t,n){return Eo("not implemented")}_getReauthenticationResolver(t){return Eo("not implemented")}}async function e8(a,t){return Pu(a,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n8(a,t){return vg(a,"POST","/v1/accounts:signInWithPassword",zu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8(a,t){return vg(a,"POST","/v1/accounts:signInWithEmailLink",zu(a,t))}async function a8(a,t){return vg(a,"POST","/v1/accounts:signInWithEmailLink",zu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og extends Y1{constructor(t,n,r,u=null){super("password",r),this._email=t,this._password=n,this._tenantId=u}static _fromEmailAndPassword(t,n){return new og(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new og(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return d1(t,n,"signInWithPassword",n8);case"emailLink":return i8(t,{email:this._email,oobCode:this._password});default:Ur(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return d1(t,r,"signUpPassword",e8);case"emailLink":return a8(t,{idToken:n,email:this._email,oobCode:this._password});default:Ur(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jh(a,t){return vg(a,"POST","/v1/accounts:signInWithIdp",zu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8="http://localhost";class Lc extends Y1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Lc(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:u}=n,c=H1(n,["providerId","signInMethod"]);if(!r||!u)return null;const d=new Lc(r,u);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const n=this.buildRequest();return jh(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,jh(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,jh(t,n)}buildRequest(){const t={requestUri:s8,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=yg(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function l8(a){const t=Zd(Wd(a)).link,n=t?Zd(Wd(t)).deep_link_id:null,r=Zd(Wd(a)).deep_link_id;return(r?Zd(Wd(r)).link:null)||r||n||t||a}class X1{constructor(t){var n,r,u,c,d,m;const _=Zd(Wd(t)),v=(n=_.apiKey)!==null&&n!==void 0?n:null,b=(r=_.oobCode)!==null&&r!==void 0?r:null,R=r8((u=_.mode)!==null&&u!==void 0?u:null);Jt(v&&b&&R,"argument-error"),this.apiKey=v,this.operation=R,this.code=b,this.continueUrl=(c=_.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(d=_.languageCode)!==null&&d!==void 0?d:null,this.tenantId=(m=_.tenantId)!==null&&m!==void 0?m:null}static parseLink(t){const n=l8(t);try{return new X1(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(){this.providerId=ef.PROVIDER_ID}static credential(t,n){return og._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=X1.parseLink(n);return Jt(r,"argument-error"),og._fromEmailAndCode(t,r.code,r.tenantId)}}ef.PROVIDER_ID="password";ef.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ef.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg extends K4{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends Eg{constructor(){super("facebook.com")}static credential(t){return Lc._fromParams({providerId:Eu.PROVIDER_ID,signInMethod:Eu.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Eu.credentialFromTaggedObject(t)}static credentialFromError(t){return Eu.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Eu.credential(t.oauthAccessToken)}catch{return null}}}Eu.FACEBOOK_SIGN_IN_METHOD="facebook.com";Eu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su extends Eg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Lc._fromParams({providerId:Su.PROVIDER_ID,signInMethod:Su.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Su.credentialFromTaggedObject(t)}static credentialFromError(t){return Su.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Su.credential(n,r)}catch{return null}}}Su.GOOGLE_SIGN_IN_METHOD="google.com";Su.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends Eg{constructor(){super("github.com")}static credential(t){return Lc._fromParams({providerId:Tu.PROVIDER_ID,signInMethod:Tu.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Tu.credentialFromTaggedObject(t)}static credentialFromError(t){return Tu.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Tu.credential(t.oauthAccessToken)}catch{return null}}}Tu.GITHUB_SIGN_IN_METHOD="github.com";Tu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends Eg{constructor(){super("twitter.com")}static credential(t,n){return Lc._fromParams({providerId:bu.PROVIDER_ID,signInMethod:bu.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return bu.credentialFromTaggedObject(t)}static credentialFromError(t){return bu.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return bu.credential(n,r)}catch{return null}}}bu.TWITTER_SIGN_IN_METHOD="twitter.com";bu.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o8(a,t){return vg(a,"POST","/v1/accounts:signUp",zu(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,u=!1){const c=await So._fromIdTokenResponse(t,r,u),d=av(r);return new zc({user:c,providerId:d,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const u=av(r);return new zc({user:t,providerId:u,_tokenResponse:r,operationType:n})}}function av(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0 extends wo{constructor(t,n,r,u){var c;super(n.code,n.message),this.operationType=r,this.user=u,Object.setPrototypeOf(this,h0.prototype),this.customData={appName:t.name,tenantId:(c=t.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,u){return new h0(t,n,r,u)}}function Y4(a,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(a):n._getIdTokenResponse(a)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?h0._fromErrorAndOperation(a,c,t,r):c})}async function u8(a,t,n=!1){const r=await lg(a,t._linkToIdToken(a.auth,await a.getIdToken()),n);return zc._forOperation(a,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c8(a,t,n=!1){const{auth:r}=a;if(Dl(r.app))return Promise.reject(bo(r));const u="reauthenticate";try{const c=await lg(a,Y4(r,u,t,a),n);Jt(c.idToken,r,"internal-error");const d=F1(c.idToken);Jt(d,r,"internal-error");const{sub:m}=d;return Jt(a.uid===m,r,"user-mismatch"),zc._forOperation(a,u,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Ur(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X4(a,t,n=!1){if(Dl(a.app))return Promise.reject(bo(a));const r="signIn",u=await Y4(a,r,t),c=await zc._fromIdTokenResponse(a,r,u);return n||await a._updateCurrentUser(c.user),c}async function h8(a,t){return X4(Bc(a),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q4(a){const t=Bc(a);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function f8(a,t,n){if(Dl(a.app))return Promise.reject(bo(a));const r=Bc(a),d=await d1(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",o8).catch(_=>{throw _.code==="auth/password-does-not-meet-requirements"&&Q4(a),_}),m=await zc._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(m.user),m}function d8(a,t,n){return Dl(a.app)?Promise.reject(bo(a)):h8($a(a),ef.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Q4(a),r})}function g8(a,t,n,r){return $a(a).onIdTokenChanged(t,n,r)}function m8(a,t,n){return $a(a).beforeAuthStateChanged(t,n)}function O0(a,t,n,r){return $a(a).onAuthStateChanged(t,n,r)}function p8(a){return $a(a).signOut()}const f0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(f0,"1"),this.storage.removeItem(f0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y8=1e3,_8=10;class W4 extends Z4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=k4(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),u=this.localCache[n];r!==u&&t(n,u,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((d,m,_)=>{this.notifyListeners(d,_)});return}const r=t.key;n?this.detachListener():this.stopPolling();const u=()=>{const d=this.storage.getItem(r);!n&&this.localCache[r]===d||this.notifyListeners(r,d)},c=this.storage.getItem(r);L9()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(u,_8):u()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const u of Array.from(r))u(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},y8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}W4.type="LOCAL";const v8=W4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4 extends Z4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}J4.type="SESSION";const $4=J4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E8(a){return Promise.all(a.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(u=>u.isListeningto(t));if(n)return n;const r=new M0(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:u,data:c}=n.data,d=this.handlersMap[u];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:u});const m=Array.from(d).map(async v=>v(n.origin,c)),_=await E8(m);n.ports[0].postMessage({status:"done",eventId:r,eventType:u,response:_})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}M0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(a="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return a+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const u=typeof MessageChannel<"u"?new MessageChannel:null;if(!u)throw new Error("connection_unavailable");let c,d;return new Promise((m,_)=>{const v=Q1("",20);u.port1.start();const b=setTimeout(()=>{_(new Error("unsupported_event"))},r);d={messageChannel:u,onMessage(R){const U=R;if(U.data.eventId===v)switch(U.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(U.data.response);break;default:clearTimeout(b),clearTimeout(c),_(new Error("invalid_response"));break}}},this.handlers.add(d),u.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:v,data:n},[u.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(){return window}function T8(a){Nl().location.href=a}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(){return typeof Nl().WorkerGlobalScope<"u"&&typeof Nl().importScripts=="function"}async function b8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function A8(){var a;return((a=navigator==null?void 0:navigator.serviceWorker)===null||a===void 0?void 0:a.controller)||null}function R8(){return tE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="firebaseLocalStorageDb",C8=1,d0="firebaseLocalStorage",nE="fbase_key";class Sg{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function x0(a,t){return a.transaction([d0],t?"readwrite":"readonly").objectStore(d0)}function D8(){const a=indexedDB.deleteDatabase(eE);return new Sg(a).toPromise()}function g1(){const a=indexedDB.open(eE,C8);return new Promise((t,n)=>{a.addEventListener("error",()=>{n(a.error)}),a.addEventListener("upgradeneeded",()=>{const r=a.result;try{r.createObjectStore(d0,{keyPath:nE})}catch(u){n(u)}}),a.addEventListener("success",async()=>{const r=a.result;r.objectStoreNames.contains(d0)?t(r):(r.close(),await D8(),t(await g1()))})})}async function sv(a,t,n){const r=x0(a,!0).put({[nE]:t,value:n});return new Sg(r).toPromise()}async function w8(a,t){const n=x0(a,!1).get(t),r=await new Sg(n).toPromise();return r===void 0?null:r.value}function rv(a,t){const n=x0(a,!0).delete(t);return new Sg(n).toPromise()}const N8=800,O8=3;class iE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await g1(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>O8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=M0._getInstance(R8()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await b8(),!this.activeServiceWorker)return;this.sender=new S8(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||A8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await g1();return await sv(t,f0,"1"),await rv(t,f0),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>sv(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>w8(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>rv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(u=>{const c=x0(u,!1).getAll();return new Sg(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:u,value:c}of t)r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(c)&&(this.notifyListeners(u,c),n.push(u));for(const u of Object.keys(this.localCache))this.localCache[u]&&!r.has(u)&&(this.notifyListeners(u,null),n.push(u));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const u of Array.from(r))u(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),N8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iE.type="LOCAL";const M8=iE;new _g(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8(a,t){return t?To(t):(Jt(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1 extends Y1{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return jh(t,this._buildIdpRequest())}_linkToIdToken(t,n){return jh(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return jh(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function V8(a){return X4(a.auth,new Z1(a),a.bypassAuthState)}function U8(a){const{auth:t,user:n}=a;return Jt(n,t,"internal-error"),c8(n,new Z1(a),a.bypassAuthState)}async function I8(a){const{auth:t,user:n}=a;return Jt(n,t,"internal-error"),u8(n,new Z1(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(t,n,r,u,c=!1){this.auth=t,this.resolver=r,this.user=u,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:u,tenantId:c,error:d,type:m}=t;if(d){this.reject(d);return}const _={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:u||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(_))}catch(v){this.reject(v)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return V8;case"linkViaPopup":case"linkViaRedirect":return I8;case"reauthViaPopup":case"reauthViaRedirect":return U8;default:Ur(this.auth,"internal-error")}}resolve(t){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8=new _g(2e3,1e4);class kh extends aE{constructor(t,n,r,u,c){super(t,n,u,c),this.provider=r,this.authWindow=null,this.pollId=null,kh.currentPopupAction&&kh.currentPopupAction.cancel(),kh.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Jt(t,this.auth,"internal-error"),t}async onExecution(){Ro(this.filter.length===1,"Popup operations only handle one event");const t=Q1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(wl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kh.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,L8.get())};t()}}kh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8="pendingRedirect",Wm=new Map;class P8 extends aE{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=Wm.get(this.auth._key());if(!t){try{const r=await B8(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}Wm.set(this.auth._key(),t)}return this.bypassAuthState||Wm.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function B8(a,t){const n=H8(t),r=k8(a);if(!await r._isAvailable())return!1;const u=await r._get(n)==="true";return await r._remove(n),u}function G8(a,t){Wm.set(a._key(),t)}function k8(a){return To(a._redirectPersistence)}function H8(a){return Zm(z8,a.config.apiKey,a.name)}async function q8(a,t,n=!1){if(Dl(a.app))return Promise.reject(bo(a));const r=Bc(a),u=x8(r,t),d=await new P8(r,u,n).execute();return d&&!n&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8=10*60*1e3;class F8{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!K8(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!sE(t)){const u=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(wl(this.auth,u))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=j8&&this.cachedEventUids.clear(),this.cachedEventUids.has(lv(t))}saveEventToCache(t){this.cachedEventUids.add(lv(t)),this.lastProcessedEventTime=Date.now()}}function lv(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(t=>t).join("-")}function sE({type:a,error:t}){return a==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function K8(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sE(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y8(a,t={}){return Pu(a,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Q8=/^https?/;async function Z8(a){if(a.config.emulator)return;const{authorizedDomains:t}=await Y8(a);for(const n of t)try{if(W8(n))return}catch{}Ur(a,"unauthorized-domain")}function W8(a){const t=h1(),{protocol:n,hostname:r}=new URL(t);if(a.startsWith("chrome-extension://")){const d=new URL(a);return d.hostname===""&&r===""?n==="chrome-extension:"&&a.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===r}if(!Q8.test(n))return!1;if(X8.test(a))return r===a;const u=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+u+"|"+u+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8=new _g(3e4,6e4);function ov(){const a=Nl().___jsl;if(a!=null&&a.H){for(const t of Object.keys(a.H))if(a.H[t].r=a.H[t].r||[],a.H[t].L=a.H[t].L||[],a.H[t].r=[...a.H[t].L],a.CP)for(let n=0;n<a.CP.length;n++)a.CP[n]=null}}function $8(a){return new Promise((t,n)=>{var r,u,c;function d(){ov(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ov(),n(wl(a,"network-request-failed"))},timeout:J8.get()})}if(!((u=(r=Nl().gapi)===null||r===void 0?void 0:r.iframes)===null||u===void 0)&&u.Iframe)t(gapi.iframes.getContext());else if(!((c=Nl().gapi)===null||c===void 0)&&c.load)d();else{const m=F9("iframefcb");return Nl()[m]=()=>{gapi.load?d():n(wl(a,"network-request-failed"))},q4(`${j9()}?onload=${m}`).catch(_=>n(_))}}).catch(t=>{throw Jm=null,t})}let Jm=null;function tb(a){return Jm=Jm||$8(a),Jm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=new _g(5e3,15e3),nb="__/auth/iframe",ib="emulator/auth/iframe",ab={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rb(a){const t=a.config;Jt(t.authDomain,a,"auth-domain-config-required");const n=t.emulator?j1(t,ib):`https://${a.config.authDomain}/${nb}`,r={apiKey:t.apiKey,appName:a.name,v:tf},u=sb.get(a.config.apiHost);u&&(r.eid=u);const c=a._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${yg(r).slice(1)}`}async function lb(a){const t=await tb(a),n=Nl().gapi;return Jt(n,a,"internal-error"),t.open({where:document.body,url:rb(a),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ab,dontclear:!0},r=>new Promise(async(u,c)=>{await r.restyle({setHideOnLeave:!1});const d=wl(a,"network-request-failed"),m=Nl().setTimeout(()=>{c(d)},eb.get());function _(){Nl().clearTimeout(m),u(r)}r.ping(_).then(_,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ub=500,cb=600,hb="_blank",fb="http://localhost";class uv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function db(a,t,n,r=ub,u=cb){const c=Math.max((window.screen.availHeight-u)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const _=Object.assign(Object.assign({},ob),{width:r.toString(),height:u.toString(),top:c,left:d}),v=ha().toLowerCase();n&&(m=L4(v)?hb:n),U4(v)&&(t=t||fb,_.scrollbars="yes");const b=Object.entries(_).reduce((U,[w,O])=>`${U}${w}=${O},`,"");if(I9(v)&&m!=="_self")return gb(t||"",m),new uv(null);const R=window.open(t||"",m,b);Jt(R,a,"popup-blocked");try{R.focus()}catch{}return new uv(R)}function gb(a,t){const n=document.createElement("a");n.href=a,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="__/auth/handler",pb="emulator/auth/handler",yb=encodeURIComponent("fac");async function cv(a,t,n,r,u,c){Jt(a.config.authDomain,a,"auth-domain-config-required"),Jt(a.config.apiKey,a,"invalid-api-key");const d={apiKey:a.config.apiKey,appName:a.name,authType:n,redirectUrl:r,v:tf,eventId:u};if(t instanceof K4){t.setDefaultLanguage(a.languageCode),d.providerId=t.providerId||"",iT(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[b,R]of Object.entries({}))d[b]=R}if(t instanceof Eg){const b=t.getScopes().filter(R=>R!=="");b.length>0&&(d.scopes=b.join(","))}a.tenantId&&(d.tid=a.tenantId);const m=d;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const _=await a._getAppCheckToken(),v=_?`#${yb}=${encodeURIComponent(_)}`:"";return`${_b(a)}?${yg(m).slice(1)}${v}`}function _b({config:a}){return a.emulator?j1(a,pb):`https://${a.authDomain}/${mb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="webStorageSupport";class vb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$4,this._completeRedirectFn=q8,this._overrideRedirectResult=G8}async _openPopup(t,n,r,u){var c;Ro((c=this.eventManagers[t._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await cv(t,n,r,h1(),u);return db(t,d,Q1())}async _openRedirect(t,n,r,u){await this._originValidation(t);const c=await cv(t,n,r,h1(),u);return T8(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:u,promise:c}=this.eventManagers[n];return u?Promise.resolve(u):(Ro(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await lb(t),r=new F8(t);return n.register("authEvent",u=>(Jt(u==null?void 0:u.authEvent,t,"invalid-auth-event"),{status:r.onEvent(u.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Jp,{type:Jp},u=>{var c;const d=(c=u==null?void 0:u[0])===null||c===void 0?void 0:c[Jp];d!==void 0&&n(!!d),Ur(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Z8(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return k4()||I4()||K1()}}const Eb=vb;var hv="@firebase/auth",fv="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Jt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bb(a){Kh(new Ic("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),u=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=r.options;Jt(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const _={apiKey:d,authDomain:m,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:H4(a)},v=new k9(r,u,c,_);return W9(v,n),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Kh(new Ic("auth-internal",t=>{const n=Bc(t.getProvider("auth").getImmediate());return(r=>new Sb(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Du(hv,fv,Tb(a)),Du(hv,fv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=5*60,Rb=_4("authIdTokenMaxAge")||Ab;let dv=null;const Cb=a=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Rb)return;const u=n==null?void 0:n.token;dv!==u&&(dv=u,await fetch(a,{method:u?"POST":"DELETE",headers:u?{Authorization:`Bearer ${u}`}:{}}))};function Db(a=T4()){const t=k1(a,"auth");if(t.isInitialized())return t.getImmediate();const n=Z9(a,{popupRedirectResolver:Eb,persistence:[M8,v8,$4]}),r=_4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const d=Cb(c.toString());m8(n,d,()=>d(n.currentUser)),g8(n,m=>d(m))}}const u=p4("auth");return u&&J9(n,`http://${u}`),n}function wb(){var a,t;return(t=(a=document.getElementsByTagName("head"))===null||a===void 0?void 0:a[0])!==null&&t!==void 0?t:document}H9({loadJS(a){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",a),r.onload=t,r.onerror=u=>{const c=wl("internal-error");c.customData=u,n(c)},r.type="text/javascript",r.charset="UTF-8",wb().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bb("Browser");var gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wu,rE;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(q,V){function D(){}D.prototype=V.prototype,q.D=V.prototype,q.prototype=new D,q.prototype.constructor=q,q.C=function(x,L,j){for(var T=Array(arguments.length-2),F=2;F<arguments.length;F++)T[F-2]=arguments[F];return V.prototype[L].apply(x,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(q,V,D){D||(D=0);var x=Array(16);if(typeof V=="string")for(var L=0;16>L;++L)x[L]=V.charCodeAt(D++)|V.charCodeAt(D++)<<8|V.charCodeAt(D++)<<16|V.charCodeAt(D++)<<24;else for(L=0;16>L;++L)x[L]=V[D++]|V[D++]<<8|V[D++]<<16|V[D++]<<24;V=q.g[0],D=q.g[1],L=q.g[2];var j=q.g[3],T=V+(j^D&(L^j))+x[0]+3614090360&4294967295;V=D+(T<<7&4294967295|T>>>25),T=j+(L^V&(D^L))+x[1]+3905402710&4294967295,j=V+(T<<12&4294967295|T>>>20),T=L+(D^j&(V^D))+x[2]+606105819&4294967295,L=j+(T<<17&4294967295|T>>>15),T=D+(V^L&(j^V))+x[3]+3250441966&4294967295,D=L+(T<<22&4294967295|T>>>10),T=V+(j^D&(L^j))+x[4]+4118548399&4294967295,V=D+(T<<7&4294967295|T>>>25),T=j+(L^V&(D^L))+x[5]+1200080426&4294967295,j=V+(T<<12&4294967295|T>>>20),T=L+(D^j&(V^D))+x[6]+2821735955&4294967295,L=j+(T<<17&4294967295|T>>>15),T=D+(V^L&(j^V))+x[7]+4249261313&4294967295,D=L+(T<<22&4294967295|T>>>10),T=V+(j^D&(L^j))+x[8]+1770035416&4294967295,V=D+(T<<7&4294967295|T>>>25),T=j+(L^V&(D^L))+x[9]+2336552879&4294967295,j=V+(T<<12&4294967295|T>>>20),T=L+(D^j&(V^D))+x[10]+4294925233&4294967295,L=j+(T<<17&4294967295|T>>>15),T=D+(V^L&(j^V))+x[11]+2304563134&4294967295,D=L+(T<<22&4294967295|T>>>10),T=V+(j^D&(L^j))+x[12]+1804603682&4294967295,V=D+(T<<7&4294967295|T>>>25),T=j+(L^V&(D^L))+x[13]+4254626195&4294967295,j=V+(T<<12&4294967295|T>>>20),T=L+(D^j&(V^D))+x[14]+2792965006&4294967295,L=j+(T<<17&4294967295|T>>>15),T=D+(V^L&(j^V))+x[15]+1236535329&4294967295,D=L+(T<<22&4294967295|T>>>10),T=V+(L^j&(D^L))+x[1]+4129170786&4294967295,V=D+(T<<5&4294967295|T>>>27),T=j+(D^L&(V^D))+x[6]+3225465664&4294967295,j=V+(T<<9&4294967295|T>>>23),T=L+(V^D&(j^V))+x[11]+643717713&4294967295,L=j+(T<<14&4294967295|T>>>18),T=D+(j^V&(L^j))+x[0]+3921069994&4294967295,D=L+(T<<20&4294967295|T>>>12),T=V+(L^j&(D^L))+x[5]+3593408605&4294967295,V=D+(T<<5&4294967295|T>>>27),T=j+(D^L&(V^D))+x[10]+38016083&4294967295,j=V+(T<<9&4294967295|T>>>23),T=L+(V^D&(j^V))+x[15]+3634488961&4294967295,L=j+(T<<14&4294967295|T>>>18),T=D+(j^V&(L^j))+x[4]+3889429448&4294967295,D=L+(T<<20&4294967295|T>>>12),T=V+(L^j&(D^L))+x[9]+568446438&4294967295,V=D+(T<<5&4294967295|T>>>27),T=j+(D^L&(V^D))+x[14]+3275163606&4294967295,j=V+(T<<9&4294967295|T>>>23),T=L+(V^D&(j^V))+x[3]+4107603335&4294967295,L=j+(T<<14&4294967295|T>>>18),T=D+(j^V&(L^j))+x[8]+1163531501&4294967295,D=L+(T<<20&4294967295|T>>>12),T=V+(L^j&(D^L))+x[13]+2850285829&4294967295,V=D+(T<<5&4294967295|T>>>27),T=j+(D^L&(V^D))+x[2]+4243563512&4294967295,j=V+(T<<9&4294967295|T>>>23),T=L+(V^D&(j^V))+x[7]+1735328473&4294967295,L=j+(T<<14&4294967295|T>>>18),T=D+(j^V&(L^j))+x[12]+2368359562&4294967295,D=L+(T<<20&4294967295|T>>>12),T=V+(D^L^j)+x[5]+4294588738&4294967295,V=D+(T<<4&4294967295|T>>>28),T=j+(V^D^L)+x[8]+2272392833&4294967295,j=V+(T<<11&4294967295|T>>>21),T=L+(j^V^D)+x[11]+1839030562&4294967295,L=j+(T<<16&4294967295|T>>>16),T=D+(L^j^V)+x[14]+4259657740&4294967295,D=L+(T<<23&4294967295|T>>>9),T=V+(D^L^j)+x[1]+2763975236&4294967295,V=D+(T<<4&4294967295|T>>>28),T=j+(V^D^L)+x[4]+1272893353&4294967295,j=V+(T<<11&4294967295|T>>>21),T=L+(j^V^D)+x[7]+4139469664&4294967295,L=j+(T<<16&4294967295|T>>>16),T=D+(L^j^V)+x[10]+3200236656&4294967295,D=L+(T<<23&4294967295|T>>>9),T=V+(D^L^j)+x[13]+681279174&4294967295,V=D+(T<<4&4294967295|T>>>28),T=j+(V^D^L)+x[0]+3936430074&4294967295,j=V+(T<<11&4294967295|T>>>21),T=L+(j^V^D)+x[3]+3572445317&4294967295,L=j+(T<<16&4294967295|T>>>16),T=D+(L^j^V)+x[6]+76029189&4294967295,D=L+(T<<23&4294967295|T>>>9),T=V+(D^L^j)+x[9]+3654602809&4294967295,V=D+(T<<4&4294967295|T>>>28),T=j+(V^D^L)+x[12]+3873151461&4294967295,j=V+(T<<11&4294967295|T>>>21),T=L+(j^V^D)+x[15]+530742520&4294967295,L=j+(T<<16&4294967295|T>>>16),T=D+(L^j^V)+x[2]+3299628645&4294967295,D=L+(T<<23&4294967295|T>>>9),T=V+(L^(D|~j))+x[0]+4096336452&4294967295,V=D+(T<<6&4294967295|T>>>26),T=j+(D^(V|~L))+x[7]+1126891415&4294967295,j=V+(T<<10&4294967295|T>>>22),T=L+(V^(j|~D))+x[14]+2878612391&4294967295,L=j+(T<<15&4294967295|T>>>17),T=D+(j^(L|~V))+x[5]+4237533241&4294967295,D=L+(T<<21&4294967295|T>>>11),T=V+(L^(D|~j))+x[12]+1700485571&4294967295,V=D+(T<<6&4294967295|T>>>26),T=j+(D^(V|~L))+x[3]+2399980690&4294967295,j=V+(T<<10&4294967295|T>>>22),T=L+(V^(j|~D))+x[10]+4293915773&4294967295,L=j+(T<<15&4294967295|T>>>17),T=D+(j^(L|~V))+x[1]+2240044497&4294967295,D=L+(T<<21&4294967295|T>>>11),T=V+(L^(D|~j))+x[8]+1873313359&4294967295,V=D+(T<<6&4294967295|T>>>26),T=j+(D^(V|~L))+x[15]+4264355552&4294967295,j=V+(T<<10&4294967295|T>>>22),T=L+(V^(j|~D))+x[6]+2734768916&4294967295,L=j+(T<<15&4294967295|T>>>17),T=D+(j^(L|~V))+x[13]+1309151649&4294967295,D=L+(T<<21&4294967295|T>>>11),T=V+(L^(D|~j))+x[4]+4149444226&4294967295,V=D+(T<<6&4294967295|T>>>26),T=j+(D^(V|~L))+x[11]+3174756917&4294967295,j=V+(T<<10&4294967295|T>>>22),T=L+(V^(j|~D))+x[2]+718787259&4294967295,L=j+(T<<15&4294967295|T>>>17),T=D+(j^(L|~V))+x[9]+3951481745&4294967295,q.g[0]=q.g[0]+V&4294967295,q.g[1]=q.g[1]+(L+(T<<21&4294967295|T>>>11))&4294967295,q.g[2]=q.g[2]+L&4294967295,q.g[3]=q.g[3]+j&4294967295}r.prototype.u=function(q,V){V===void 0&&(V=q.length);for(var D=V-this.blockSize,x=this.B,L=this.h,j=0;j<V;){if(L==0)for(;j<=D;)u(this,q,j),j+=this.blockSize;if(typeof q=="string"){for(;j<V;)if(x[L++]=q.charCodeAt(j++),L==this.blockSize){u(this,x),L=0;break}}else for(;j<V;)if(x[L++]=q[j++],L==this.blockSize){u(this,x),L=0;break}}this.h=L,this.o+=V},r.prototype.v=function(){var q=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);q[0]=128;for(var V=1;V<q.length-8;++V)q[V]=0;var D=8*this.o;for(V=q.length-8;V<q.length;++V)q[V]=D&255,D/=256;for(this.u(q),q=Array(16),V=D=0;4>V;++V)for(var x=0;32>x;x+=8)q[D++]=this.g[V]>>>x&255;return q};function c(q,V){var D=m;return Object.prototype.hasOwnProperty.call(D,q)?D[q]:D[q]=V(q)}function d(q,V){this.h=V;for(var D=[],x=!0,L=q.length-1;0<=L;L--){var j=q[L]|0;x&&j==V||(D[L]=j,x=!1)}this.g=D}var m={};function _(q){return-128<=q&&128>q?c(q,function(V){return new d([V|0],0>V?-1:0)}):new d([q|0],0>q?-1:0)}function v(q){if(isNaN(q)||!isFinite(q))return R;if(0>q)return P(v(-q));for(var V=[],D=1,x=0;q>=D;x++)V[x]=q/D|0,D*=4294967296;return new d(V,0)}function b(q,V){if(q.length==0)throw Error("number format error: empty string");if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(q.charAt(0)=="-")return P(b(q.substring(1),V));if(0<=q.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=v(Math.pow(V,8)),x=R,L=0;L<q.length;L+=8){var j=Math.min(8,q.length-L),T=parseInt(q.substring(L,L+j),V);8>j?(j=v(Math.pow(V,j)),x=x.j(j).add(v(T))):(x=x.j(D),x=x.add(v(T)))}return x}var R=_(0),U=_(1),w=_(16777216);a=d.prototype,a.m=function(){if(I(this))return-P(this).m();for(var q=0,V=1,D=0;D<this.g.length;D++){var x=this.i(D);q+=(0<=x?x:4294967296+x)*V,V*=4294967296}return q},a.toString=function(q){if(q=q||10,2>q||36<q)throw Error("radix out of range: "+q);if(O(this))return"0";if(I(this))return"-"+P(this).toString(q);for(var V=v(Math.pow(q,6)),D=this,x="";;){var L=G(D,V).g;D=K(D,L.j(V));var j=((0<D.g.length?D.g[0]:D.h)>>>0).toString(q);if(D=L,O(D))return j+x;for(;6>j.length;)j="0"+j;x=j+x}},a.i=function(q){return 0>q?0:q<this.g.length?this.g[q]:this.h};function O(q){if(q.h!=0)return!1;for(var V=0;V<q.g.length;V++)if(q.g[V]!=0)return!1;return!0}function I(q){return q.h==-1}a.l=function(q){return q=K(this,q),I(q)?-1:O(q)?0:1};function P(q){for(var V=q.g.length,D=[],x=0;x<V;x++)D[x]=~q.g[x];return new d(D,~q.h).add(U)}a.abs=function(){return I(this)?P(this):this},a.add=function(q){for(var V=Math.max(this.g.length,q.g.length),D=[],x=0,L=0;L<=V;L++){var j=x+(this.i(L)&65535)+(q.i(L)&65535),T=(j>>>16)+(this.i(L)>>>16)+(q.i(L)>>>16);x=T>>>16,j&=65535,T&=65535,D[L]=T<<16|j}return new d(D,D[D.length-1]&-2147483648?-1:0)};function K(q,V){return q.add(P(V))}a.j=function(q){if(O(this)||O(q))return R;if(I(this))return I(q)?P(this).j(P(q)):P(P(this).j(q));if(I(q))return P(this.j(P(q)));if(0>this.l(w)&&0>q.l(w))return v(this.m()*q.m());for(var V=this.g.length+q.g.length,D=[],x=0;x<2*V;x++)D[x]=0;for(x=0;x<this.g.length;x++)for(var L=0;L<q.g.length;L++){var j=this.i(x)>>>16,T=this.i(x)&65535,F=q.i(L)>>>16,k=q.i(L)&65535;D[2*x+2*L]+=T*k,C(D,2*x+2*L),D[2*x+2*L+1]+=j*k,C(D,2*x+2*L+1),D[2*x+2*L+1]+=T*F,C(D,2*x+2*L+1),D[2*x+2*L+2]+=j*F,C(D,2*x+2*L+2)}for(x=0;x<V;x++)D[x]=D[2*x+1]<<16|D[2*x];for(x=V;x<2*V;x++)D[x]=0;return new d(D,0)};function C(q,V){for(;(q[V]&65535)!=q[V];)q[V+1]+=q[V]>>>16,q[V]&=65535,V++}function M(q,V){this.g=q,this.h=V}function G(q,V){if(O(V))throw Error("division by zero");if(O(q))return new M(R,R);if(I(q))return V=G(P(q),V),new M(P(V.g),P(V.h));if(I(V))return V=G(q,P(V)),new M(P(V.g),V.h);if(30<q.g.length){if(I(q)||I(V))throw Error("slowDivide_ only works with positive integers.");for(var D=U,x=V;0>=x.l(q);)D=H(D),x=H(x);var L=Y(D,1),j=Y(x,1);for(x=Y(x,2),D=Y(D,2);!O(x);){var T=j.add(x);0>=T.l(q)&&(L=L.add(D),j=T),x=Y(x,1),D=Y(D,1)}return V=K(q,L.j(V)),new M(L,V)}for(L=R;0<=q.l(V);){for(D=Math.max(1,Math.floor(q.m()/V.m())),x=Math.ceil(Math.log(D)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),j=v(D),T=j.j(V);I(T)||0<T.l(q);)D-=x,j=v(D),T=j.j(V);O(j)&&(j=U),L=L.add(j),q=K(q,T)}return new M(L,q)}a.A=function(q){return G(this,q).h},a.and=function(q){for(var V=Math.max(this.g.length,q.g.length),D=[],x=0;x<V;x++)D[x]=this.i(x)&q.i(x);return new d(D,this.h&q.h)},a.or=function(q){for(var V=Math.max(this.g.length,q.g.length),D=[],x=0;x<V;x++)D[x]=this.i(x)|q.i(x);return new d(D,this.h|q.h)},a.xor=function(q){for(var V=Math.max(this.g.length,q.g.length),D=[],x=0;x<V;x++)D[x]=this.i(x)^q.i(x);return new d(D,this.h^q.h)};function H(q){for(var V=q.g.length+1,D=[],x=0;x<V;x++)D[x]=q.i(x)<<1|q.i(x-1)>>>31;return new d(D,q.h)}function Y(q,V){var D=V>>5;V%=32;for(var x=q.g.length-D,L=[],j=0;j<x;j++)L[j]=0<V?q.i(j+D)>>>V|q.i(j+D+1)<<32-V:q.i(j+D);return new d(L,q.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rE=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=b,wu=d}).apply(typeof gv<"u"?gv:typeof self<"u"?self:typeof window<"u"?window:{});var km=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lE,Jd,oE,$m,m1,uE,cE,hE;(function(){var a,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,A,z){return g==Array.prototype||g==Object.prototype||(g[A]=z.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof km=="object"&&km];for(var A=0;A<g.length;++A){var z=g[A];if(z&&z.Math==Math)return z}throw Error("Cannot find global object")}var r=n(this);function u(g,A){if(A)t:{var z=r;g=g.split(".");for(var J=0;J<g.length-1;J++){var ot=g[J];if(!(ot in z))break t;z=z[ot]}g=g[g.length-1],J=z[g],A=A(J),A!=J&&A!=null&&t(z,g,{configurable:!0,writable:!0,value:A})}}function c(g,A){g instanceof String&&(g+="");var z=0,J=!1,ot={next:function(){if(!J&&z<g.length){var vt=z++;return{value:A(vt,g[vt]),done:!1}}return J=!0,{done:!0,value:void 0}}};return ot[Symbol.iterator]=function(){return ot},ot}u("Array.prototype.values",function(g){return g||function(){return c(this,function(A,z){return z})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function _(g){var A=typeof g;return A=A!="object"?A:g?Array.isArray(g)?"array":A:"null",A=="array"||A=="object"&&typeof g.length=="number"}function v(g){var A=typeof g;return A=="object"&&g!=null||A=="function"}function b(g,A,z){return g.call.apply(g.bind,arguments)}function R(g,A,z){if(!g)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var ot=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ot,J),g.apply(A,ot)}}return function(){return g.apply(A,arguments)}}function U(g,A,z){return U=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:R,U.apply(null,arguments)}function w(g,A){var z=Array.prototype.slice.call(arguments,1);return function(){var J=z.slice();return J.push.apply(J,arguments),g.apply(this,J)}}function O(g,A){function z(){}z.prototype=A.prototype,g.aa=A.prototype,g.prototype=new z,g.prototype.constructor=g,g.Qb=function(J,ot,vt){for(var Lt=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)Lt[Ee-2]=arguments[Ee];return A.prototype[ot].apply(J,Lt)}}function I(g){const A=g.length;if(0<A){const z=Array(A);for(let J=0;J<A;J++)z[J]=g[J];return z}return[]}function P(g,A){for(let z=1;z<arguments.length;z++){const J=arguments[z];if(_(J)){const ot=g.length||0,vt=J.length||0;g.length=ot+vt;for(let Lt=0;Lt<vt;Lt++)g[ot+Lt]=J[Lt]}else g.push(J)}}class K{constructor(A,z){this.i=A,this.j=z,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function C(g){return/^[\s\xa0]*$/.test(g)}function M(){var g=m.navigator;return g&&(g=g.userAgent)?g:""}function G(g){return G[" "](g),g}G[" "]=function(){};var H=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function Y(g,A,z){for(const J in g)A.call(z,g[J],J,g)}function q(g,A){for(const z in g)A.call(void 0,g[z],z,g)}function V(g){const A={};for(const z in g)A[z]=g[z];return A}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(g,A){let z,J;for(let ot=1;ot<arguments.length;ot++){J=arguments[ot];for(z in J)g[z]=J[z];for(let vt=0;vt<D.length;vt++)z=D[vt],Object.prototype.hasOwnProperty.call(J,z)&&(g[z]=J[z])}}function L(g){var A=1;g=g.split(":");const z=[];for(;0<A&&g.length;)z.push(g.shift()),A--;return g.length&&z.push(g.join(":")),z}function j(g){m.setTimeout(()=>{throw g},0)}function T(){var g=ut;let A=null;return g.g&&(A=g.g,g.g=g.g.next,g.g||(g.h=null),A.next=null),A}class F{constructor(){this.h=this.g=null}add(A,z){const J=k.get();J.set(A,z),this.h?this.h.next=J:this.g=J,this.h=J}}var k=new K(()=>new X,g=>g.reset());class X{constructor(){this.next=this.g=this.h=null}set(A,z){this.h=A,this.g=z,this.next=null}reset(){this.next=this.g=this.h=null}}let $,it=!1,ut=new F,Q=()=>{const g=m.Promise.resolve(void 0);$=()=>{g.then(at)}};var at=()=>{for(var g;g=T();){try{g.h.call(g.g)}catch(z){j(z)}var A=k;A.j(g),100>A.h&&(A.h++,g.next=A.g,A.g=g)}it=!1};function Et(){this.s=this.s,this.C=this.C}Et.prototype.s=!1,Et.prototype.ma=function(){this.s||(this.s=!0,this.N())},Et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(g,A){this.type=g,this.g=this.target=A,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var gt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var g=!1,A=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const z=()=>{};m.addEventListener("test",z,A),m.removeEventListener("test",z,A)}catch{}return g}();function Rt(g,A){if(st.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var z=this.type=g.type,J=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=A,A=g.relatedTarget){if(H){t:{try{G(A.nodeName);var ot=!0;break t}catch{}ot=!1}ot||(A=null)}}else z=="mouseover"?A=g.fromElement:z=="mouseout"&&(A=g.toElement);this.relatedTarget=A,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Nt[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Rt.aa.h.call(this)}}O(Rt,st);var Nt={2:"touch",3:"pen",4:"mouse"};Rt.prototype.h=function(){Rt.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),ht=0;function At(g,A,z,J,ot){this.listener=g,this.proxy=null,this.src=A,this.type=z,this.capture=!!J,this.ha=ot,this.key=++ht,this.da=this.fa=!1}function Ct(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function It(g){this.src=g,this.g={},this.h=0}It.prototype.add=function(g,A,z,J,ot){var vt=g.toString();g=this.g[vt],g||(g=this.g[vt]=[],this.h++);var Lt=$t(g,A,J,ot);return-1<Lt?(A=g[Lt],z||(A.fa=!1)):(A=new At(A,this.src,vt,!!J,ot),A.fa=z,g.push(A)),A};function Pt(g,A){var z=A.type;if(z in g.g){var J=g.g[z],ot=Array.prototype.indexOf.call(J,A,void 0),vt;(vt=0<=ot)&&Array.prototype.splice.call(J,ot,1),vt&&(Ct(A),g.g[z].length==0&&(delete g.g[z],g.h--))}}function $t(g,A,z,J){for(var ot=0;ot<g.length;++ot){var vt=g[ot];if(!vt.da&&vt.listener==A&&vt.capture==!!z&&vt.ha==J)return ot}return-1}var ue="closure_lm_"+(1e6*Math.random()|0),Yt={};function Fe(g,A,z,J,ot){if(Array.isArray(A)){for(var vt=0;vt<A.length;vt++)Fe(g,A[vt],z,J,ot);return null}return z=Oi(z),g&&g[et]?g.K(A,z,v(J)?!!J.capture:!1,ot):oe(g,A,z,!1,J,ot)}function oe(g,A,z,J,ot,vt){if(!A)throw Error("Invalid event type");var Lt=v(ot)?!!ot.capture:!!ot,Ee=Xn(g);if(Ee||(g[ue]=Ee=new It(g)),z=Ee.add(A,z,J,Lt,vt),z.proxy)return z;if(J=Ke(),z.proxy=J,J.src=g,J.listener=z,g.addEventListener)gt||(ot=Lt),ot===void 0&&(ot=!1),g.addEventListener(A.toString(),J,ot);else if(g.attachEvent)g.attachEvent(oi(A.toString()),J);else if(g.addListener&&g.removeListener)g.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return z}function Ke(){function g(z){return A.call(g.src,g.listener,z)}const A=en;return g}function gi(g,A,z,J,ot){if(Array.isArray(A))for(var vt=0;vt<A.length;vt++)gi(g,A[vt],z,J,ot);else J=v(J)?!!J.capture:!!J,z=Oi(z),g&&g[et]?(g=g.i,A=String(A).toString(),A in g.g&&(vt=g.g[A],z=$t(vt,z,J,ot),-1<z&&(Ct(vt[z]),Array.prototype.splice.call(vt,z,1),vt.length==0&&(delete g.g[A],g.h--)))):g&&(g=Xn(g))&&(A=g.g[A.toString()],g=-1,A&&(g=$t(A,z,J,ot)),(z=-1<g?A[g]:null)&&ke(z))}function ke(g){if(typeof g!="number"&&g&&!g.da){var A=g.src;if(A&&A[et])Pt(A.i,g);else{var z=g.type,J=g.proxy;A.removeEventListener?A.removeEventListener(z,J,g.capture):A.detachEvent?A.detachEvent(oi(z),J):A.addListener&&A.removeListener&&A.removeListener(J),(z=Xn(A))?(Pt(z,g),z.h==0&&(z.src=null,A[ue]=null)):Ct(g)}}}function oi(g){return g in Yt?Yt[g]:Yt[g]="on"+g}function en(g,A){if(g.da)g=!0;else{A=new Rt(A,this);var z=g.listener,J=g.ha||g.src;g.fa&&ke(g),g=z.call(J,A)}return g}function Xn(g){return g=g[ue],g instanceof It?g:null}var nn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oi(g){return typeof g=="function"?g:(g[nn]||(g[nn]=function(A){return g.handleEvent(A)}),g[nn])}function De(){Et.call(this),this.i=new It(this),this.M=this,this.F=null}O(De,Et),De.prototype[et]=!0,De.prototype.removeEventListener=function(g,A,z,J){gi(this,g,A,z,J)};function He(g,A){var z,J=g.F;if(J)for(z=[];J;J=J.F)z.push(J);if(g=g.M,J=A.type||A,typeof A=="string")A=new st(A,g);else if(A instanceof st)A.target=A.target||g;else{var ot=A;A=new st(J,g),x(A,ot)}if(ot=!0,z)for(var vt=z.length-1;0<=vt;vt--){var Lt=A.g=z[vt];ot=Qn(Lt,J,!0,A)&&ot}if(Lt=A.g=g,ot=Qn(Lt,J,!0,A)&&ot,ot=Qn(Lt,J,!1,A)&&ot,z)for(vt=0;vt<z.length;vt++)Lt=A.g=z[vt],ot=Qn(Lt,J,!1,A)&&ot}De.prototype.N=function(){if(De.aa.N.call(this),this.i){var g=this.i,A;for(A in g.g){for(var z=g.g[A],J=0;J<z.length;J++)Ct(z[J]);delete g.g[A],g.h--}}this.F=null},De.prototype.K=function(g,A,z,J){return this.i.add(String(g),A,!1,z,J)},De.prototype.L=function(g,A,z,J){return this.i.add(String(g),A,!0,z,J)};function Qn(g,A,z,J){if(A=g.i.g[String(A)],!A)return!0;A=A.concat();for(var ot=!0,vt=0;vt<A.length;++vt){var Lt=A[vt];if(Lt&&!Lt.da&&Lt.capture==z){var Ee=Lt.listener,_n=Lt.ha||Lt.src;Lt.fa&&Pt(g.i,Lt),ot=Ee.call(_n,J)!==!1&&ot}}return ot&&!J.defaultPrevented}function fa(g,A,z){if(typeof g=="function")z&&(g=U(g,z));else if(g&&typeof g.handleEvent=="function")g=U(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:m.setTimeout(g,A||0)}function ji(g){g.g=fa(()=>{g.g=null,g.i&&(g.i=!1,ji(g))},g.l);const A=g.h;g.h=null,g.m.apply(null,A)}class da extends Et{constructor(A,z){super(),this.m=A,this.l=z,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:ji(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zn(g){Et.call(this),this.h=g,this.g={}}O(zn,Et);var an=[];function Re(g){Y(g.g,function(A,z){this.g.hasOwnProperty(z)&&ke(A)},g),g.g={}}zn.prototype.N=function(){zn.aa.N.call(this),Re(this)},zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ga=m.JSON.stringify,Fi=m.JSON.parse,Zn=class{stringify(g){return m.JSON.stringify(g,void 0)}parse(g){return m.JSON.parse(g,void 0)}};function js(){}js.prototype.h=null;function Bu(g){return g.h||(g.h=g.i())}function Gu(){}var ma={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fs(){st.call(this,"d")}O(Fs,st);function Ki(){st.call(this,"c")}O(Ki,st);var pa={},Ks=null;function Ys(){return Ks=Ks||new De}pa.La="serverreachability";function Xs(g){st.call(this,pa.La,g)}O(Xs,st);function ts(g){const A=Ys();He(A,new Xs(A))}pa.STAT_EVENT="statevent";function Il(g,A){st.call(this,pa.STAT_EVENT,g),this.stat=A}O(Il,st);function En(g){const A=Ys();He(A,new Il(A,g))}pa.Ma="timingevent";function ku(g,A){st.call(this,pa.Ma,g),this.size=A}O(ku,st);function Es(g,A){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){g()},A)}function Ss(){this.g=!0}Ss.prototype.xa=function(){this.g=!1};function es(g,A,z,J,ot,vt){g.info(function(){if(g.g)if(vt)for(var Lt="",Ee=vt.split("&"),_n=0;_n<Ee.length;_n++){var Se=Ee[_n].split("=");if(1<Se.length){var Cn=Se[0];Se=Se[1];var Pn=Cn.split("_");Lt=2<=Pn.length&&Pn[1]=="type"?Lt+(Cn+"="+Se+"&"):Lt+(Cn+"=redacted&")}}else Lt=null;else Lt=vt;return"XMLHTTP REQ ("+J+") [attempt "+ot+"]: "+A+`
`+z+`
`+Lt})}function Hu(g,A,z,J,ot,vt,Lt){g.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+ot+"]: "+A+`
`+z+`
`+vt+" "+Lt})}function Mi(g,A,z,J){g.info(function(){return"XMLHTTP TEXT ("+A+"): "+Rn(g,z)+(J?" "+J:"")})}function ni(g,A){g.info(function(){return"TIMEOUT: "+A})}Ss.prototype.info=function(){};function Rn(g,A){if(!g.g)return A;if(!A)return null;try{var z=JSON.parse(A);if(z){for(g=0;g<z.length;g++)if(Array.isArray(z[g])){var J=z[g];if(!(2>J.length)){var ot=J[1];if(Array.isArray(ot)&&!(1>ot.length)){var vt=ot[0];if(vt!="noop"&&vt!="stop"&&vt!="close")for(var Lt=1;Lt<ot.length;Lt++)ot[Lt]=""}}}}return ga(z)}catch{return A}}var ce={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ns={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qs;function Ll(){}O(Ll,js),Ll.prototype.g=function(){return new XMLHttpRequest},Ll.prototype.i=function(){return{}},Qs=new Ll;function is(g,A,z,J){this.j=g,this.i=A,this.l=z,this.R=J||1,this.U=new zn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qu}function qu(){this.i=null,this.g="",this.h=!1}var Ts={},Zs={};function ya(g,A,z){g.L=1,g.v=Pr(pn(A)),g.m=z,g.P=!0,Sn(g,null)}function Sn(g,A){g.F=Date.now(),sn(g),g.A=pn(g.v);var z=g.A,J=g.R;Array.isArray(J)||(J=[String(J)]),Rs(z.i,"t",J),g.C=0,z=g.j.J,g.h=new qu,g.g=Va(g.j,z?A:null,!g.m),0<g.O&&(g.M=new da(U(g.Y,g,g.g),g.O)),A=g.U,z=g.g,J=g.ca;var ot="readystatechange";Array.isArray(ot)||(ot&&(an[0]=ot.toString()),ot=an);for(var vt=0;vt<ot.length;vt++){var Lt=Fe(z,ot[vt],J||A.handleEvent,!1,A.h||A);if(!Lt)break;A.g[Lt.key]=Lt}A=g.H?V(g.H):{},g.m?(g.u||(g.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,A)):(g.u="GET",g.g.ea(g.A,g.u,null,A)),ts(),es(g.i,g.u,g.A,g.l,g.R,g.m)}is.prototype.ca=function(g){g=g.target;const A=this.M;A&&Sa(g)==3?A.j():this.Y(g)},is.prototype.Y=function(g){try{if(g==this.g)t:{const Pn=Sa(this.g);var A=this.g.Ba();const Dn=this.g.Z();if(!(3>Pn)&&(Pn!=3||this.g&&(this.h.h||this.g.oa()||Xu(this.g)))){this.J||Pn!=4||A==7||(A==8||0>=Dn?ts(3):ts(2)),Yi(this);var z=this.g.Z();this.X=z;e:if(Je(this)){var J=Xu(this.g);g="";var ot=J.length,vt=Sa(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pi(this),mi(this);var Lt="";break e}this.h.i=new m.TextDecoder}for(A=0;A<ot;A++)this.h.h=!0,g+=this.h.i.decode(J[A],{stream:!(vt&&A==ot-1)});J.length=0,this.h.g+=g,this.C=0,Lt=this.h.g}else Lt=this.g.oa();if(this.o=z==200,Hu(this.i,this.u,this.A,this.l,this.R,Pn,z),this.o){if(this.T&&!this.K){e:{if(this.g){var Ee,_n=this.g;if((Ee=_n.g?_n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(Ee)){var Se=Ee;break e}}Se=null}if(z=Se)Mi(this.i,this.l,z,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xi(this,z);else{this.o=!1,this.s=3,En(12),pi(this),mi(this);break t}}if(this.P){z=!0;let ii;for(;!this.J&&this.C<Lt.length;)if(ii=Oa(this,Lt),ii==Zs){Pn==4&&(this.s=4,En(14),z=!1),Mi(this.i,this.l,null,"[Incomplete Response]");break}else if(ii==Ts){this.s=4,En(15),Mi(this.i,this.l,Lt,"[Invalid Chunk]"),z=!1;break}else Mi(this.i,this.l,ii,null),xi(this,ii);if(Je(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pn!=4||Lt.length!=0||this.h.h||(this.s=1,En(16),z=!1),this.o=this.o&&z,!z)Mi(this.i,this.l,Lt,"[Invalid Chunked Response]"),pi(this),mi(this);else if(0<Lt.length&&!this.W){this.W=!0;var Cn=this.j;Cn.g==this&&Cn.ba&&!Cn.M&&(Cn.j.info("Great, no buffering proxy detected. Bytes received: "+Lt.length),ir(Cn),Cn.M=!0,En(11))}}else Mi(this.i,this.l,Lt,null),xi(this,Lt);Pn==4&&pi(this),this.o&&!this.J&&(Pn==4?Lo(this.j,this):(this.o=!1,sn(this)))}else lf(this.g),z==400&&0<Lt.indexOf("Unknown SID")?(this.s=3,En(12)):(this.s=0,En(13)),pi(this),mi(this)}}}catch{}finally{}};function Je(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Oa(g,A){var z=g.C,J=A.indexOf(`
`,z);return J==-1?Zs:(z=Number(A.substring(z,J)),isNaN(z)?Ts:(J+=1,J+z>A.length?Zs:(A=A.slice(J,J+z),g.C=J+z,A)))}is.prototype.cancel=function(){this.J=!0,pi(this)};function sn(g){g.S=Date.now()+g.I,zl(g,g.I)}function zl(g,A){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Es(U(g.ba,g),A)}function Yi(g){g.B&&(m.clearTimeout(g.B),g.B=null)}is.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(ni(this.i,this.A),this.L!=2&&(ts(),En(17)),pi(this),this.s=2,mi(this)):zl(this,this.S-g)};function mi(g){g.j.G==0||g.J||Lo(g.j,g)}function pi(g){Yi(g);var A=g.M;A&&typeof A.ma=="function"&&A.ma(),g.M=null,Re(g.U),g.g&&(A=g.g,g.g=null,A.abort(),A.ma())}function xi(g,A){try{var z=g.j;if(z.G!=0&&(z.g==g||Ws(z.h,g))){if(!g.K&&Ws(z.h,g)&&z.G==3){try{var J=z.Da.g.parse(A)}catch{J=null}if(Array.isArray(J)&&J.length==3){var ot=J;if(ot[0]==0){t:if(!z.u){if(z.g)if(z.g.F+3e3<g.F)Xr(z),kl(z);else break t;Fl(z),En(18)}}else z.za=ot[1],0<z.za-z.T&&37500>ot[2]&&z.F&&z.v==0&&!z.C&&(z.C=Es(U(z.Za,z),6e3));if(1>=ju(z.h)&&z.ca){try{z.ca()}catch{}z.ca=void 0}}else Cs(z,11)}else if((g.K||z.g==g)&&Xr(z),!C(A))for(ot=z.Da.g.parse(A),A=0;A<ot.length;A++){let Se=ot[A];if(z.T=Se[0],Se=Se[1],z.G==2)if(Se[0]=="c"){z.K=Se[1],z.ia=Se[2];const Cn=Se[3];Cn!=null&&(z.la=Cn,z.j.info("VER="+z.la));const Pn=Se[4];Pn!=null&&(z.Aa=Pn,z.j.info("SVER="+z.Aa));const Dn=Se[5];Dn!=null&&typeof Dn=="number"&&0<Dn&&(J=1.5*Dn,z.L=J,z.j.info("backChannelRequestTimeoutMs_="+J)),J=z;const ii=g.g;if(ii){const La=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(La){var vt=J.h;vt.g||La.indexOf("spdy")==-1&&La.indexOf("quic")==-1&&La.indexOf("h2")==-1||(vt.j=vt.l,vt.g=new Set,vt.h&&(Js(vt,vt.h),vt.h=null))}if(J.D){const Go=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;Go&&(J.ya=Go,Ue(J.I,J.D,Go))}}z.G=3,z.l&&z.l.ua(),z.ba&&(z.R=Date.now()-g.F,z.j.info("Handshake RTT: "+z.R+"ms")),J=z;var Lt=g;if(J.qa=$u(J,J.J?J.ia:null,J.W),Lt.K){Xi(J.h,Lt);var Ee=Lt,_n=J.L;_n&&(Ee.I=_n),Ee.B&&(Yi(Ee),sn(Ee)),J.g=Lt}else Wu(J);0<z.i.length&&Hl(z)}else Se[0]!="stop"&&Se[0]!="close"||Cs(z,7);else z.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Cs(z,7):Io(z):Se[0]!="noop"&&z.l&&z.l.ta(Se),z.v=0)}}ts(4)}catch{}}var jc=class{constructor(g,A){this.g=g,this.map=A}};function No(g){this.l=g||10,m.PerformanceNavigationTiming?(g=m.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Oo(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function ju(g){return g.h?1:g.g?g.g.size:0}function Ws(g,A){return g.h?g.h==A:g.g?g.g.has(A):!1}function Js(g,A){g.g?g.g.add(A):g.h=A}function Xi(g,A){g.h&&g.h==A?g.h=null:g.g&&g.g.has(A)&&g.g.delete(A)}No.prototype.cancel=function(){if(this.i=yi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function yi(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let A=g.i;for(const z of g.g.values())A=A.concat(z.D);return A}return I(g.i)}function Fc(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(_(g)){for(var A=[],z=g.length,J=0;J<z;J++)A.push(g[J]);return A}A=[],z=0;for(J in g)A[z++]=g[J];return A}function Kc(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(_(g)||typeof g=="string"){var A=[];g=g.length;for(var z=0;z<g;z++)A.push(z);return A}A=[],z=0;for(const J in g)A[z++]=J;return A}}}function Ir(g,A){if(g.forEach&&typeof g.forEach=="function")g.forEach(A,void 0);else if(_(g)||typeof g=="string")Array.prototype.forEach.call(g,A,void 0);else for(var z=Kc(g),J=Fc(g),ot=J.length,vt=0;vt<ot;vt++)A.call(void 0,J[vt],z&&z[vt],g)}var Mo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lr(g,A){if(g){g=g.split("&");for(var z=0;z<g.length;z++){var J=g[z].indexOf("="),ot=null;if(0<=J){var vt=g[z].substring(0,J);ot=g[z].substring(J+1)}else vt=g[z];A(vt,ot?decodeURIComponent(ot.replace(/\+/g," ")):"")}}}function bs(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof bs){this.h=g.h,$s(this,g.j),this.o=g.o,this.g=g.g,zr(this,g.s),this.l=g.l;var A=g.i,z=new as;z.i=A.i,A.g&&(z.g=new Map(A.g),z.h=A.h),Pl(this,z),this.m=g.m}else g&&(A=String(g).match(Mo))?(this.h=!1,$s(this,A[1]||"",!0),this.o=_a(A[2]||""),this.g=_a(A[3]||"",!0),zr(this,A[4]),this.l=_a(A[5]||"",!0),Pl(this,A[6]||"",!0),this.m=_a(A[7]||"")):(this.h=!1,this.i=new as(null,this.h))}bs.prototype.toString=function(){var g=[],A=this.j;A&&g.push(va(A,Br,!0),":");var z=this.g;return(z||A=="file")&&(g.push("//"),(A=this.o)&&g.push(va(A,Br,!0),"@"),g.push(encodeURIComponent(String(z)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),z=this.s,z!=null&&g.push(":",String(z))),(z=this.l)&&(this.g&&z.charAt(0)!="/"&&g.push("/"),g.push(va(z,z.charAt(0)=="/"?Bl:Fu,!0))),(z=this.i.toString())&&g.push("?",z),(z=this.m)&&g.push("#",va(z,Xc)),g.join("")};function pn(g){return new bs(g)}function $s(g,A,z){g.j=z?_a(A,!0):A,g.j&&(g.j=g.j.replace(/:$/,""))}function zr(g,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);g.s=A}else g.s=null}function Pl(g,A,z){A instanceof as?(g.i=A,Vo(g.i,g.h)):(z||(A=va(A,Yc)),g.i=new as(A,g.h))}function Ue(g,A,z){g.i.set(A,z)}function Pr(g){return Ue(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function _a(g,A){return g?A?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function va(g,A,z){return typeof g=="string"?(g=encodeURI(g).replace(A,xo),z&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function xo(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Br=/[#\/\?@]/g,Fu=/[#\?:]/g,Bl=/[#\?]/g,Yc=/[#\?@]/g,Xc=/#/g;function as(g,A){this.h=this.g=null,this.i=g||null,this.j=!!A}function Ea(g){g.g||(g.g=new Map,g.h=0,g.i&&Lr(g.i,function(A,z){g.add(decodeURIComponent(A.replace(/\+/g," ")),z)}))}a=as.prototype,a.add=function(g,A){Ea(this),this.i=null,g=ss(this,g);var z=this.g.get(g);return z||this.g.set(g,z=[]),z.push(A),this.h+=1,this};function Gr(g,A){Ea(g),A=ss(g,A),g.g.has(A)&&(g.i=null,g.h-=g.g.get(A).length,g.g.delete(A))}function As(g,A){return Ea(g),A=ss(g,A),g.g.has(A)}a.forEach=function(g,A){Ea(this),this.g.forEach(function(z,J){z.forEach(function(ot){g.call(A,ot,J,this)},this)},this)},a.na=function(){Ea(this);const g=Array.from(this.g.values()),A=Array.from(this.g.keys()),z=[];for(let J=0;J<A.length;J++){const ot=g[J];for(let vt=0;vt<ot.length;vt++)z.push(A[J])}return z},a.V=function(g){Ea(this);let A=[];if(typeof g=="string")As(this,g)&&(A=A.concat(this.g.get(ss(this,g))));else{g=Array.from(this.g.values());for(let z=0;z<g.length;z++)A=A.concat(g[z])}return A},a.set=function(g,A){return Ea(this),this.i=null,g=ss(this,g),As(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[A]),this.h+=1,this},a.get=function(g,A){return g?(g=this.V(g),0<g.length?String(g[0]):A):A};function Rs(g,A,z){Gr(g,A),0<z.length&&(g.i=null,g.g.set(ss(g,A),I(z)),g.h+=z.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],A=Array.from(this.g.keys());for(var z=0;z<A.length;z++){var J=A[z];const vt=encodeURIComponent(String(J)),Lt=this.V(J);for(J=0;J<Lt.length;J++){var ot=vt;Lt[J]!==""&&(ot+="="+encodeURIComponent(String(Lt[J]))),g.push(ot)}}return this.i=g.join("&")};function ss(g,A){return A=String(A),g.j&&(A=A.toLowerCase()),A}function Vo(g,A){A&&!g.j&&(Ea(g),g.i=null,g.g.forEach(function(z,J){var ot=J.toLowerCase();J!=ot&&(Gr(this,J),Rs(this,ot,z))},g)),g.j=A}function Ku(g,A){const z=new Ss;if(m.Image){const J=new Image;J.onload=w(Qi,z,"TestLoadImage: loaded",!0,A,J),J.onerror=w(Qi,z,"TestLoadImage: error",!1,A,J),J.onabort=w(Qi,z,"TestLoadImage: abort",!1,A,J),J.ontimeout=w(Qi,z,"TestLoadImage: timeout",!1,A,J),m.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=g}else A(!1)}function kr(g,A){const z=new Ss,J=new AbortController,ot=setTimeout(()=>{J.abort(),Qi(z,"TestPingServer: timeout",!1,A)},1e4);fetch(g,{signal:J.signal}).then(vt=>{clearTimeout(ot),vt.ok?Qi(z,"TestPingServer: ok",!0,A):Qi(z,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(ot),Qi(z,"TestPingServer: error",!1,A)})}function Qi(g,A,z,J,ot){try{ot&&(ot.onload=null,ot.onerror=null,ot.onabort=null,ot.ontimeout=null),J(z)}catch{}}function Hr(){this.g=new Zn}function rs(g,A,z){const J=z||"";try{Ir(g,function(ot,vt){let Lt=ot;v(ot)&&(Lt=ga(ot)),A.push(J+vt+"="+encodeURIComponent(Lt))})}catch(ot){throw A.push(J+"type="+encodeURIComponent("_badmap")),ot}}function qr(g){this.l=g.Ub||null,this.j=g.eb||!1}O(qr,js),qr.prototype.g=function(){return new tr(this.l,this.j)},qr.prototype.i=function(g){return function(){return g}}({});function tr(g,A){De.call(this),this.D=g,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(tr,De),a=tr.prototype,a.open=function(g,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=A,this.readyState=1,Ma(this)},a.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(A.body=g),(this.D||m).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zi(this)),this.readyState=0},a.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Ma(this)),this.g&&(this.readyState=3,Ma(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Uo(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function Uo(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}a.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var A=g.value?g.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!g.done}))&&(this.response=this.responseText+=A)}g.done?Zi(this):Ma(this),this.readyState==3&&Uo(this)}},a.Ra=function(g){this.g&&(this.response=this.responseText=g,Zi(this))},a.Qa=function(g){this.g&&(this.response=g,Zi(this))},a.ga=function(){this.g&&Zi(this)};function Zi(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Ma(g)}a.setRequestHeader=function(g,A){this.u.append(g,A)},a.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],A=this.h.entries();for(var z=A.next();!z.done;)z=z.value,g.push(z[0]+": "+z[1]),z=A.next();return g.join(`\r
`)};function Ma(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function jr(g){let A="";return Y(g,function(z,J){A+=J,A+=":",A+=z,A+=`\r
`}),A}function Wn(g,A,z){t:{for(J in z){var J=!1;break t}J=!0}J||(z=jr(z),typeof g=="string"?z!=null&&encodeURIComponent(String(z)):Ue(g,A,z))}function Pe(g){De.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(Pe,De);var Fr=/^https?$/i,Kr=["POST","PUT"];a=Pe.prototype,a.Ha=function(g){this.J=g},a.ea=function(g,A,z,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);A=A?A.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qs.g(),this.v=this.o?Bu(this.o):Bu(Qs),this.g.onreadystatechange=U(this.Ea,this);try{this.B=!0,this.g.open(A,String(g),!0),this.B=!1}catch(vt){Yu(this,vt);return}if(g=z||"",z=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var ot in J)z.set(ot,J[ot]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const vt of J.keys())z.set(vt,J.get(vt));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(z.keys()).find(vt=>vt.toLowerCase()=="content-type"),ot=m.FormData&&g instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Kr,A,void 0))||J||ot||z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[vt,Lt]of z)this.g.setRequestHeader(vt,Lt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nr(this),this.u=!0,this.g.send(g),this.u=!1}catch(vt){Yu(this,vt)}};function Yu(g,A){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=A,g.m=5,xa(g),ls(g)}function xa(g){g.A||(g.A=!0,He(g,"complete"),He(g,"error"))}a.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,He(this,"complete"),He(this,"abort"),ls(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ls(this,!0)),Pe.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?er(this):this.bb())},a.bb=function(){er(this)};function er(g){if(g.h&&typeof d<"u"&&(!g.v[1]||Sa(g)!=4||g.Z()!=2)){if(g.u&&Sa(g)==4)fa(g.Ea,0,g);else if(He(g,"readystatechange"),Sa(g)==4){g.h=!1;try{const Lt=g.Z();t:switch(Lt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break t;default:A=!1}var z;if(!(z=A)){var J;if(J=Lt===0){var ot=String(g.D).match(Mo)[1]||null;!ot&&m.self&&m.self.location&&(ot=m.self.location.protocol.slice(0,-1)),J=!Fr.test(ot?ot.toLowerCase():"")}z=J}if(z)He(g,"complete"),He(g,"success");else{g.m=6;try{var vt=2<Sa(g)?g.g.statusText:""}catch{vt=""}g.l=vt+" ["+g.Z()+"]",xa(g)}}finally{ls(g)}}}}function ls(g,A){if(g.g){nr(g);const z=g.g,J=g.v[0]?()=>{}:null;g.g=null,g.v=null,A||He(g,"ready");try{z.onreadystatechange=J}catch{}}}function nr(g){g.I&&(m.clearTimeout(g.I),g.I=null)}a.isActive=function(){return!!this.g};function Sa(g){return g.g?g.g.readyState:0}a.Z=function(){try{return 2<Sa(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(g){if(this.g){var A=this.g.responseText;return g&&A.indexOf(g)==0&&(A=A.substring(g.length)),Fi(A)}};function Xu(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function lf(g){const A={};g=(g.g&&2<=Sa(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<g.length;J++){if(C(g[J]))continue;var z=L(g[J]);const ot=z[0];if(z=z[1],typeof z!="string")continue;z=z.trim();const vt=A[ot]||[];A[ot]=vt,vt.push(z)}q(A,function(J){return J.join(", ")})}a.Ba=function(){return this.m},a.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yn(g,A,z){return z&&z.internalChannelParams&&z.internalChannelParams[g]||A}function Gl(g){this.Aa=0,this.i=[],this.j=new Ss,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yn("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yn("baseRetryDelayMs",5e3,g),this.cb=yn("retryDelaySeedMs",1e4,g),this.Wa=yn("forwardChannelMaxRetries",2,g),this.wa=yn("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new No(g&&g.concurrentRequestLimit),this.Da=new Hr,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}a=Gl.prototype,a.la=8,a.G=1,a.connect=function(g,A,z,J){En(0),this.W=g,this.H=A||{},z&&J!==void 0&&(this.H.OSID=z,this.H.OAID=J),this.F=this.X,this.I=$u(this,null,this.W),Hl(this)};function Io(g){if(Qu(g),g.G==3){var A=g.U++,z=pn(g.I);if(Ue(z,"SID",g.K),Ue(z,"RID",A),Ue(z,"TYPE","terminate"),Yr(g,z),A=new is(g,g.j,A),A.L=2,A.v=Pr(pn(z)),z=!1,m.navigator&&m.navigator.sendBeacon)try{z=m.navigator.sendBeacon(A.v.toString(),"")}catch{}!z&&m.Image&&(new Image().src=A.v,z=!0),z||(A.g=Va(A.j,null),A.g.ea(A.v)),A.F=Date.now(),sn(A)}zo(g)}function kl(g){g.g&&(ir(g),g.g.cancel(),g.g=null)}function Qu(g){kl(g),g.u&&(m.clearTimeout(g.u),g.u=null),Xr(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&m.clearTimeout(g.s),g.s=null)}function Hl(g){if(!Oo(g.h)&&!g.s){g.s=!0;var A=g.Ga;$||Q(),it||($(),it=!0),ut.add(A,g),g.B=0}}function ql(g,A){return ju(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=A.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Es(U(g.Ga,g,A),Kl(g,g.B)),g.B++,!0)}a.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const ot=new is(this,this.j,g);let vt=this.o;if(this.S&&(vt?(vt=V(vt),x(vt,this.S)):vt=this.S),this.m!==null||this.O||(ot.H=vt,vt=null),this.P)t:{for(var A=0,z=0;z<this.i.length;z++){e:{var J=this.i[z];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break e}J=void 0}if(J===void 0)break;if(A+=J,4096<A){A=z;break t}if(A===4096||z===this.i.length-1){A=z+1;break t}}A=1e3}else A=1e3;A=Zu(this,ot,A),z=pn(this.I),Ue(z,"RID",g),Ue(z,"CVER",22),this.D&&Ue(z,"X-HTTP-Session-Id",this.D),Yr(this,z),vt&&(this.O?A="headers="+encodeURIComponent(String(jr(vt)))+"&"+A:this.m&&Wn(z,this.m,vt)),Js(this.h,ot),this.Ua&&Ue(z,"TYPE","init"),this.P?(Ue(z,"$req",A),Ue(z,"SID","null"),ot.T=!0,ya(ot,z,null)):ya(ot,z,A),this.G=2}}else this.G==3&&(g?jl(this,g):this.i.length==0||Oo(this.h)||jl(this))};function jl(g,A){var z;A?z=A.l:z=g.U++;const J=pn(g.I);Ue(J,"SID",g.K),Ue(J,"RID",z),Ue(J,"AID",g.T),Yr(g,J),g.m&&g.o&&Wn(J,g.m,g.o),z=new is(g,g.j,z,g.B+1),g.m===null&&(z.H=g.o),A&&(g.i=A.D.concat(g.i)),A=Zu(g,z,1e3),z.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Js(g.h,z),ya(z,J,A)}function Yr(g,A){g.H&&Y(g.H,function(z,J){Ue(A,J,z)}),g.l&&Ir({},function(z,J){Ue(A,J,z)})}function Zu(g,A,z){z=Math.min(g.i.length,z);var J=g.l?U(g.l.Na,g.l,g):null;t:{var ot=g.i;let vt=-1;for(;;){const Lt=["count="+z];vt==-1?0<z?(vt=ot[0].g,Lt.push("ofs="+vt)):vt=0:Lt.push("ofs="+vt);let Ee=!0;for(let _n=0;_n<z;_n++){let Se=ot[_n].g;const Cn=ot[_n].map;if(Se-=vt,0>Se)vt=Math.max(0,ot[_n].g-100),Ee=!1;else try{rs(Cn,Lt,"req"+Se+"_")}catch{J&&J(Cn)}}if(Ee){J=Lt.join("&");break t}}}return g=g.i.splice(0,z),A.D=g,J}function Wu(g){if(!g.g&&!g.u){g.Y=1;var A=g.Fa;$||Q(),it||($(),it=!0),ut.add(A,g),g.v=0}}function Fl(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Es(U(g.Fa,g),Kl(g,g.v)),g.v++,!0)}a.Fa=function(){if(this.u=null,Ju(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Es(U(this.ab,this),g)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,En(10),kl(this),Ju(this))};function ir(g){g.A!=null&&(m.clearTimeout(g.A),g.A=null)}function Ju(g){g.g=new is(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var A=pn(g.qa);Ue(A,"RID","rpc"),Ue(A,"SID",g.K),Ue(A,"AID",g.T),Ue(A,"CI",g.F?"0":"1"),!g.F&&g.ja&&Ue(A,"TO",g.ja),Ue(A,"TYPE","xmlhttp"),Yr(g,A),g.m&&g.o&&Wn(A,g.m,g.o),g.L&&(g.g.I=g.L);var z=g.g;g=g.ia,z.L=1,z.v=Pr(pn(A)),z.m=null,z.P=!0,Sn(z,g)}a.Za=function(){this.C!=null&&(this.C=null,kl(this),Fl(this),En(19))};function Xr(g){g.C!=null&&(m.clearTimeout(g.C),g.C=null)}function Lo(g,A){var z=null;if(g.g==A){Xr(g),ir(g),g.g=null;var J=2}else if(Ws(g.h,A))z=A.D,Xi(g.h,A),J=1;else return;if(g.G!=0){if(A.o)if(J==1){z=A.m?A.m.length:0,A=Date.now()-A.F;var ot=g.B;J=Ys(),He(J,new ku(J,z)),Hl(g)}else Wu(g);else if(ot=A.s,ot==3||ot==0&&0<A.X||!(J==1&&ql(g,A)||J==2&&Fl(g)))switch(z&&0<z.length&&(A=g.h,A.i=A.i.concat(z)),ot){case 1:Cs(g,5);break;case 4:Cs(g,10);break;case 3:Cs(g,6);break;default:Cs(g,2)}}}function Kl(g,A){let z=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(z*=2),z*A}function Cs(g,A){if(g.j.info("Error code "+A),A==2){var z=U(g.fb,g),J=g.Xa;const ot=!J;J=new bs(J||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||$s(J,"https"),Pr(J),ot?Ku(J.toString(),z):kr(J.toString(),z)}else En(2);g.G=0,g.l&&g.l.sa(A),zo(g),Qu(g)}a.fb=function(g){g?(this.j.info("Successfully pinged google.com"),En(2)):(this.j.info("Failed to ping google.com"),En(1))};function zo(g){if(g.G=0,g.ka=[],g.l){const A=yi(g.h);(A.length!=0||g.i.length!=0)&&(P(g.ka,A),P(g.ka,g.i),g.h.i.length=0,I(g.i),g.i.length=0),g.l.ra()}}function $u(g,A,z){var J=z instanceof bs?pn(z):new bs(z);if(J.g!="")A&&(J.g=A+"."+J.g),zr(J,J.s);else{var ot=m.location;J=ot.protocol,A=A?A+"."+ot.hostname:ot.hostname,ot=+ot.port;var vt=new bs(null);J&&$s(vt,J),A&&(vt.g=A),ot&&zr(vt,ot),z&&(vt.l=z),J=vt}return z=g.D,A=g.ya,z&&A&&Ue(J,z,A),Ue(J,"VER",g.la),Yr(g,J),J}function Va(g,A,z){if(A&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=g.Ca&&!g.pa?new Pe(new qr({eb:z})):new Pe(g.pa),A.Ha(g.J),A}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function Po(){}a=Po.prototype,a.ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){};function Bo(){}Bo.prototype.g=function(g,A){return new _i(g,A)};function _i(g,A){De.call(this),this.g=new Gl(A),this.l=g,this.h=A&&A.messageUrlParams||null,g=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(g?g["X-WebChannel-Content-Type"]=A.messageContentType:g={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(g?g["X-WebChannel-Client-Profile"]=A.va:g={"X-WebChannel-Client-Profile":A.va}),this.g.S=g,(g=A&&A.Sb)&&!C(g)&&(this.g.m=g),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!C(A)&&(this.g.D=A,g=this.h,g!==null&&A in g&&(g=this.h,A in g&&delete g[A])),this.j=new Ia(this)}O(_i,De),_i.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_i.prototype.close=function(){Io(this.g)},_i.prototype.o=function(g){var A=this.g;if(typeof g=="string"){var z={};z.__data__=g,g=z}else this.u&&(z={},z.__data__=ga(g),g=z);A.i.push(new jc(A.Ya++,g)),A.G==3&&Hl(A)},_i.prototype.N=function(){this.g.l=null,delete this.j,Io(this.g),delete this.g,_i.aa.N.call(this)};function os(g){Fs.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var A=g.__sm__;if(A){t:{for(const z in A){g=z;break t}g=void 0}(this.i=g)&&(g=this.i,A=A!==null&&g in A?A[g]:void 0),this.data=A}else this.data=g}O(os,Fs);function Ua(){Ki.call(this),this.status=1}O(Ua,Ki);function Ia(g){this.g=g}O(Ia,Po),Ia.prototype.ua=function(){He(this.g,"a")},Ia.prototype.ta=function(g){He(this.g,new os(g))},Ia.prototype.sa=function(g){He(this.g,new Ua)},Ia.prototype.ra=function(){He(this.g,"b")},Bo.prototype.createWebChannel=Bo.prototype.g,_i.prototype.send=_i.prototype.o,_i.prototype.open=_i.prototype.m,_i.prototype.close=_i.prototype.close,hE=function(){return new Bo},cE=function(){return Ys()},uE=pa,m1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ce.NO_ERROR=0,ce.TIMEOUT=8,ce.HTTP_ERROR=6,$m=ce,ns.COMPLETE="complete",oE=ns,Gu.EventType=ma,ma.OPEN="a",ma.CLOSE="b",ma.ERROR="c",ma.MESSAGE="d",De.prototype.listen=De.prototype.K,Jd=Gu,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,lE=Pe}).apply(typeof km<"u"?km:typeof self<"u"?self:typeof window<"u"?window:{});const mv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ua.UNAUTHENTICATED=new ua(null),ua.GOOGLE_CREDENTIALS=new ua("google-credentials-uid"),ua.FIRST_PARTY=new ua("first-party-uid"),ua.MOCK_USER=new ua("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new B1("@firebase/firestore");function zh(){return Pc.logLevel}function Bt(a,...t){if(Pc.logLevel<=we.DEBUG){const n=t.map(W1);Pc.debug(`Firestore (${nf}): ${a}`,...n)}}function Co(a,...t){if(Pc.logLevel<=we.ERROR){const n=t.map(W1);Pc.error(`Firestore (${nf}): ${a}`,...n)}}function Yh(a,...t){if(Pc.logLevel<=we.WARN){const n=t.map(W1);Pc.warn(`Firestore (${nf}): ${a}`,...n)}}function W1(a){if(typeof a=="string")return a;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(a="Unexpected state"){const t=`FIRESTORE (${nf}) INTERNAL ASSERTION FAILED: `+a;throw Co(t),new Error(t)}function We(a,t){a||te()}function le(a,t){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ft extends wo{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Nb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(ua.UNAUTHENTICATED))}shutdown(){}}class Ob{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Mb{constructor(t){this.t=t,this.currentUser=ua.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){We(this.o===void 0);let r=this.i;const u=_=>this.i!==r?(r=this.i,n(_)):Promise.resolve();let c=new Nu;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Nu,t.enqueueRetryable(()=>u(this.currentUser))};const d=()=>{const _=c;t.enqueueRetryable(async()=>{await _.promise,await u(this.currentUser)})},m=_=>{Bt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(_=>m(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?m(_):(Bt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Nu)}},0),d()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Bt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We(typeof r.accessToken=="string"),new fE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return We(t===null||typeof t=="string"),new ua(t)}}class xb{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=ua.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Vb{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new xb(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(ua.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ub{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ib{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){We(this.o===void 0);const r=c=>{c.error!=null&&Bt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,Bt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable(()=>r(c))};const u=c=>{Bt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>u(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?u(c):Bt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(We(typeof n.token=="string"),this.R=n.token,new Ub(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<a;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const u=Lb(40);for(let c=0;c<u.length;++c)r.length<20&&u[c]<n&&(r+=t.charAt(u[c]%t.length))}return r}}function Ve(a,t){return a<t?-1:a>t?1:0}function Xh(a,t,n){return a.length===t.length&&a.every((r,u)=>n(r,t[u]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{static now(){return fi.fromMillis(Date.now())}static fromDate(t){return fi.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new fi(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Ft(Vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ft(Vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ft(Vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ft(Vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ve(this.nanoseconds,t.nanoseconds):Ve(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{static fromTimestamp(t){return new se(t)}static min(){return new se(new fi(0,0))}static max(){return new se(new fi(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(t,n,r){n===void 0?n=0:n>t.length&&te(),r===void 0?r=t.length-n:r>t.length-n&&te(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Cl.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Cl?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let u=0;u<r;u++){const c=Cl.compareSegments(t.get(u),n.get(u));if(c!==0)return c}return Math.sign(t.length-n.length)}static compareSegments(t,n){const r=Cl.isNumericId(t),u=Cl.isNumericId(n);return r&&!u?-1:!r&&u?1:r&&u?Cl.extractNumericId(t).compare(Cl.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return wu.fromString(t.substring(4,t.length-2))}}class An extends Cl{construct(t,n,r){return new An(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ft(Vt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(u=>u.length>0))}return new An(n)}static emptyPath(){return new An([])}}const zb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hi extends Cl{construct(t,n,r){return new Hi(t,n,r)}static isValidIdentifier(t){return zb.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Hi(["__name__"])}static fromServerFormat(t){const n=[];let r="",u=0;const c=()=>{if(r.length===0)throw new Ft(Vt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;u<t.length;){const m=t[u];if(m==="\\"){if(u+1===t.length)throw new Ft(Vt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const _=t[u+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new Ft(Vt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=_,u+=2}else m==="`"?(d=!d,u++):m!=="."||d?(r+=m,u++):(c(),u++)}if(c(),d)throw new Ft(Vt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Hi(n)}static emptyPath(){return new Hi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(t){this.path=t}static fromPath(t){return new Xt(An.fromString(t))}static fromName(t){return new Xt(An.fromString(t).popFirst(5))}static empty(){return new Xt(An.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&An.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return An.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Xt(new An(t.slice()))}}function Pb(a,t){const n=a.toTimestamp().seconds,r=a.toTimestamp().nanoseconds+1,u=se.fromTimestamp(r===1e9?new fi(n+1,0):new fi(n,r));return new Mu(u,Xt.empty(),t)}function Bb(a){return new Mu(a.readTime,a.key,-1)}class Mu{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Mu(se.min(),Xt.empty(),-1)}static max(){return new Mu(se.max(),Xt.empty(),-1)}}function Gb(a,t){let n=a.readTime.compareTo(t.readTime);return n!==0?n:(n=Xt.comparator(a.documentKey,t.documentKey),n!==0?n:Ve(a.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(a){if(a.code!==Vt.FAILED_PRECONDITION||a.message!==kb)throw a;Bt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new wt((r,u)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(r,u)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,u)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof wt?n:wt.resolve(n)}catch(n){return wt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):wt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):wt.reject(n)}static resolve(t){return new wt((n,r)=>{n(t)})}static reject(t){return new wt((n,r)=>{r(t)})}static waitFor(t){return new wt((n,r)=>{let u=0,c=0,d=!1;t.forEach(m=>{++u,m.next(()=>{++c,d&&c===u&&n()},_=>r(_))}),d=!0,c===u&&n()})}static or(t){let n=wt.resolve(!1);for(const r of t)n=n.next(u=>u?wt.resolve(u):r());return n}static forEach(t,n){const r=[];return t.forEach((u,c)=>{r.push(n.call(this,u,c))}),this.waitFor(r)}static mapArray(t,n){return new wt((r,u)=>{const c=t.length,d=new Array(c);let m=0;for(let _=0;_<c;_++){const v=_;n(t[v]).next(b=>{d[v]=b,++m,m===c&&r(d)},b=>u(b))}})}static doWhile(t,n){return new wt((r,u)=>{const c=()=>{t()===!0?n().next(()=>{c()},u):r()};c()})}}function qb(a){const t=a.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sf(a){return a.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}V0.oe=-1;function U0(a){return a==null}function g0(a){return a===0&&1/a==-1/0}function jb(a){return typeof a=="number"&&Number.isInteger(a)&&!g0(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(a){let t="";for(let n=0;n<a.length;n++)t.length>0&&(t=pv(t)),t=Kb(a.get(n),t);return pv(t)}function Kb(a,t){let n=t;const r=a.length;for(let u=0;u<r;u++){const c=a.charAt(u);switch(c){case"\0":n+="";break;case"":n+="";break;default:n+=c}}return n}function pv(a){return a+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(a){let t=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&t++;return t}function Gc(a,t){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&t(n,a[n])}function gE(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t,n){this.comparator=t,this.root=n||ki.EMPTY}insert(t,n){return new Ln(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ki.BLACK,null,null))}remove(t){return new Ln(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ki.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const u=this.comparator(t,r.key);if(u===0)return n+r.left.size;u<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Hm(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Hm(this.root,t,this.comparator,!1)}getReverseIterator(){return new Hm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Hm(this.root,t,this.comparator,!0)}}class Hm{constructor(t,n,r,u){this.isReverse=u,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?r(t.key,n):1,n&&u&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ki{constructor(t,n,r,u,c){this.key=t,this.value=n,this.color=r??ki.RED,this.left=u??ki.EMPTY,this.right=c??ki.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,u,c){return new ki(t??this.key,n??this.value,r??this.color,u??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let u=this;const c=r(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,n,r),null):c===0?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(t,n,r)),u.fixUp()}removeMin(){if(this.left.isEmpty())return ki.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,u=this;if(n(t,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(t,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),n(t,u.key)===0){if(u.right.isEmpty())return ki.EMPTY;r=u.right.min(),u=u.copy(r.key,r.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(t,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const t=this.left.check();if(t!==this.right.check())throw te();return t+(this.isRed()?0:1)}}ki.EMPTY=null,ki.RED=!0,ki.BLACK=!1;ki.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(t,n,r,u,c){return this}insert(t,n,r){return new ki(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t){this.comparator=t,this.data=new Ln(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const u=r.getNext();if(this.comparator(u.key,t[1])>=0)return;n(u.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new _v(this.data.getIterator())}getIteratorFrom(t){return new _v(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof di)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=r.getNext().key;if(this.comparator(u,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new di(this.comparator);return n.data=t,n}}class _v{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(t){this.fields=t,t.sort(Hi.comparator)}static empty(){return new xr([])}unionWith(t){let n=new di(Hi.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new xr(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Xh(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(u){try{return atob(u)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new mE("Invalid base64 string: "+c):c}}(t);return new qi(n)}static fromUint8Array(t){const n=function(u){let c="";for(let d=0;d<u.length;++d)c+=String.fromCharCode(u[d]);return c}(t);return new qi(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let u=0;u<n.length;u++)r[u]=n.charCodeAt(u);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ve(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}qi.EMPTY_BYTE_STRING=new qi("");const Yb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xu(a){if(We(!!a),typeof a=="string"){let t=0;const n=Yb.exec(a);if(We(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),t=Number(u)}const r=new Date(a);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ti(a.seconds),nanos:ti(a.nanos)}}function ti(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function Vu(a){return typeof a=="string"?qi.fromBase64String(a):qi.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(a){var t,n;return((n=(((t=a==null?void 0:a.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function I0(a){const t=a.mapValue.fields.__previous_value__;return J1(t)?I0(t):t}function ug(a){const t=xu(a.mapValue.fields.__local_write_time__.timestampValue);return new fi(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(t,n,r,u,c,d,m,_,v){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=u,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=_,this.useFetchStreams=v}}class cg{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new cg("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof cg&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Uu(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?J1(a)?4:Zb(a)?9007199254740991:Qb(a)?10:11:te()}function Vl(a,t){if(a===t)return!0;const n=Uu(a);if(n!==Uu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return ug(a).isEqual(ug(t));case 3:return function(u,c){if(typeof u.timestampValue=="string"&&typeof c.timestampValue=="string"&&u.timestampValue.length===c.timestampValue.length)return u.timestampValue===c.timestampValue;const d=xu(u.timestampValue),m=xu(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(a,t);case 5:return a.stringValue===t.stringValue;case 6:return function(u,c){return Vu(u.bytesValue).isEqual(Vu(c.bytesValue))}(a,t);case 7:return a.referenceValue===t.referenceValue;case 8:return function(u,c){return ti(u.geoPointValue.latitude)===ti(c.geoPointValue.latitude)&&ti(u.geoPointValue.longitude)===ti(c.geoPointValue.longitude)}(a,t);case 2:return function(u,c){if("integerValue"in u&&"integerValue"in c)return ti(u.integerValue)===ti(c.integerValue);if("doubleValue"in u&&"doubleValue"in c){const d=ti(u.doubleValue),m=ti(c.doubleValue);return d===m?g0(d)===g0(m):isNaN(d)&&isNaN(m)}return!1}(a,t);case 9:return Xh(a.arrayValue.values||[],t.arrayValue.values||[],Vl);case 10:case 11:return function(u,c){const d=u.mapValue.fields||{},m=c.mapValue.fields||{};if(yv(d)!==yv(m))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(m[_]===void 0||!Vl(d[_],m[_])))return!1;return!0}(a,t);default:return te()}}function hg(a,t){return(a.values||[]).find(n=>Vl(n,t))!==void 0}function Qh(a,t){if(a===t)return 0;const n=Uu(a),r=Uu(t);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(a.booleanValue,t.booleanValue);case 2:return function(c,d){const m=ti(c.integerValue||c.doubleValue),_=ti(d.integerValue||d.doubleValue);return m<_?-1:m>_?1:m===_?0:isNaN(m)?isNaN(_)?0:-1:1}(a,t);case 3:return vv(a.timestampValue,t.timestampValue);case 4:return vv(ug(a),ug(t));case 5:return Ve(a.stringValue,t.stringValue);case 6:return function(c,d){const m=Vu(c),_=Vu(d);return m.compareTo(_)}(a.bytesValue,t.bytesValue);case 7:return function(c,d){const m=c.split("/"),_=d.split("/");for(let v=0;v<m.length&&v<_.length;v++){const b=Ve(m[v],_[v]);if(b!==0)return b}return Ve(m.length,_.length)}(a.referenceValue,t.referenceValue);case 8:return function(c,d){const m=Ve(ti(c.latitude),ti(d.latitude));return m!==0?m:Ve(ti(c.longitude),ti(d.longitude))}(a.geoPointValue,t.geoPointValue);case 9:return Ev(a.arrayValue,t.arrayValue);case 10:return function(c,d){var m,_,v,b;const R=c.fields||{},U=d.fields||{},w=(m=R.value)===null||m===void 0?void 0:m.arrayValue,O=(_=U.value)===null||_===void 0?void 0:_.arrayValue,I=Ve(((v=w==null?void 0:w.values)===null||v===void 0?void 0:v.length)||0,((b=O==null?void 0:O.values)===null||b===void 0?void 0:b.length)||0);return I!==0?I:Ev(w,O)}(a.mapValue,t.mapValue);case 11:return function(c,d){if(c===qm.mapValue&&d===qm.mapValue)return 0;if(c===qm.mapValue)return 1;if(d===qm.mapValue)return-1;const m=c.fields||{},_=Object.keys(m),v=d.fields||{},b=Object.keys(v);_.sort(),b.sort();for(let R=0;R<_.length&&R<b.length;++R){const U=Ve(_[R],b[R]);if(U!==0)return U;const w=Qh(m[_[R]],v[b[R]]);if(w!==0)return w}return Ve(_.length,b.length)}(a.mapValue,t.mapValue);default:throw te()}}function vv(a,t){if(typeof a=="string"&&typeof t=="string"&&a.length===t.length)return Ve(a,t);const n=xu(a),r=xu(t),u=Ve(n.seconds,r.seconds);return u!==0?u:Ve(n.nanos,r.nanos)}function Ev(a,t){const n=a.values||[],r=t.values||[];for(let u=0;u<n.length&&u<r.length;++u){const c=Qh(n[u],r[u]);if(c)return c}return Ve(n.length,r.length)}function Zh(a){return p1(a)}function p1(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(n){const r=xu(n);return`time(${r.seconds},${r.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?function(n){return Vu(n).toBase64()}(a.bytesValue):"referenceValue"in a?function(n){return Xt.fromName(n).toString()}(a.referenceValue):"geoPointValue"in a?function(n){return`geo(${n.latitude},${n.longitude})`}(a.geoPointValue):"arrayValue"in a?function(n){let r="[",u=!0;for(const c of n.values||[])u?u=!1:r+=",",r+=p1(c);return r+"]"}(a.arrayValue):"mapValue"in a?function(n){const r=Object.keys(n.fields||{}).sort();let u="{",c=!0;for(const d of r)c?c=!1:u+=",",u+=`${d}:${p1(n.fields[d])}`;return u+"}"}(a.mapValue):te()}function t0(a){switch(Uu(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=I0(a);return t?16+t0(t):16;case 5:return 2*a.stringValue.length;case 6:return Vu(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((u,c)=>u+t0(c),0)}(a.arrayValue);case 10:case 11:return function(r){let u=0;return Gc(r.fields,(c,d)=>{u+=c.length+t0(d)}),u}(a.mapValue);default:throw te()}}function y1(a){return!!a&&"integerValue"in a}function $1(a){return!!a&&"arrayValue"in a}function Sv(a){return!!a&&"nullValue"in a}function Tv(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function e0(a){return!!a&&"mapValue"in a}function Qb(a){var t,n;return((n=(((t=a==null?void 0:a.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ng(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const t={mapValue:{fields:{}}};return Gc(a.mapValue.fields,(n,r)=>t.mapValue.fields[n]=ng(r)),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ng(a.arrayValue.values[n]);return t}return Object.assign({},a)}function Zb(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(t){this.value=t}static empty(){return new qs({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!e0(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ng(n)}setAll(t){let n=Hi.emptyPath(),r={},u=[];t.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const _=this.getFieldsMap(n);this.applyChanges(_,r,u),r={},u=[],n=m.popLast()}d?r[m.lastSegment()]=ng(d):u.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,r,u)}delete(t){const n=this.field(t.popLast());e0(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Vl(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let u=n.mapValue.fields[t.get(r)];e0(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=u),n=u}return n.mapValue.fields}applyChanges(t,n,r){Gc(n,(u,c)=>t[u]=c);for(const u of r)delete t[u]}clone(){return new qs(ng(this.value))}}function pE(a){const t=[];return Gc(a.fields,(n,r)=>{const u=new Hi([n]);if(e0(r)){const c=pE(r.mapValue).fields;if(c.length===0)t.push(u);else for(const d of c)t.push(u.child(d))}else t.push(u)}),new xr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(t,n,r,u,c,d,m){this.key=t,this.documentType=n,this.version=r,this.readTime=u,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(t){return new ca(t,0,se.min(),se.min(),se.min(),qs.empty(),0)}static newFoundDocument(t,n,r,u){return new ca(t,1,n,se.min(),r,u,0)}static newNoDocument(t,n){return new ca(t,2,n,se.min(),se.min(),qs.empty(),0)}static newUnknownDocument(t,n){return new ca(t,3,n,se.min(),se.min(),qs.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=qs.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=qs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ca&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ca(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(t,n){this.position=t,this.inclusive=n}}function bv(a,t,n){let r=0;for(let u=0;u<a.position.length;u++){const c=t[u],d=a.position[u];if(c.field.isKeyField()?r=Xt.comparator(Xt.fromName(d.referenceValue),n.key):r=Qh(d,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function Av(a,t){if(a===null)return t===null;if(t===null||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!Vl(a.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(t,n="asc"){this.field=t,this.dir=n}}function Wb(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{}class hi extends yE{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new $b(t,n,r):n==="array-contains"?new n7(t,r):n==="in"?new i7(t,r):n==="not-in"?new a7(t,r):n==="array-contains-any"?new s7(t,r):new hi(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new t7(t,r):new e7(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Qh(n,this.value)):n!==null&&Uu(this.value)===Uu(n)&&this.matchesComparison(Qh(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ul extends yE{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Ul(t,n)}matches(t){return _E(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _E(a){return a.op==="and"}function vE(a){return Jb(a)&&_E(a)}function Jb(a){for(const t of a.filters)if(t instanceof Ul)return!1;return!0}function _1(a){if(a instanceof hi)return a.field.canonicalString()+a.op.toString()+Zh(a.value);if(vE(a))return a.filters.map(t=>_1(t)).join(",");{const t=a.filters.map(n=>_1(n)).join(",");return`${a.op}(${t})`}}function EE(a,t){return a instanceof hi?function(r,u){return u instanceof hi&&r.op===u.op&&r.field.isEqual(u.field)&&Vl(r.value,u.value)}(a,t):a instanceof Ul?function(r,u){return u instanceof Ul&&r.op===u.op&&r.filters.length===u.filters.length?r.filters.reduce((c,d,m)=>c&&EE(d,u.filters[m]),!0):!1}(a,t):void te()}function SE(a){return a instanceof hi?function(n){return`${n.field.canonicalString()} ${n.op} ${Zh(n.value)}`}(a):a instanceof Ul?function(n){return n.op.toString()+" {"+n.getFilters().map(SE).join(" ,")+"}"}(a):"Filter"}class $b extends hi{constructor(t,n,r){super(t,n,r),this.key=Xt.fromName(r.referenceValue)}matches(t){const n=Xt.comparator(t.key,this.key);return this.matchesComparison(n)}}class t7 extends hi{constructor(t,n){super(t,"in",n),this.keys=TE("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class e7 extends hi{constructor(t,n){super(t,"not-in",n),this.keys=TE("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function TE(a,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Xt.fromName(r.referenceValue))}class n7 extends hi{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return $1(n)&&hg(n.arrayValue,this.value)}}class i7 extends hi{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&hg(this.value.arrayValue,n)}}class a7 extends hi{constructor(t,n){super(t,"not-in",n)}matches(t){if(hg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!hg(this.value.arrayValue,n)}}class s7 extends hi{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!$1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>hg(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(t,n=null,r=[],u=[],c=null,d=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=u,this.limit=c,this.startAt=d,this.endAt=m,this.ue=null}}function Rv(a,t=null,n=[],r=[],u=null,c=null,d=null){return new r7(a,t,n,r,u,c,d)}function ty(a){const t=le(a);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>_1(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(c){return c.field.canonicalString()+c.dir}(r)).join(","),U0(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Zh(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Zh(r)).join(",")),t.ue=n}return t.ue}function ey(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!Wb(a.orderBy[n],t.orderBy[n]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!EE(a.filters[n],t.filters[n]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!Av(a.startAt,t.startAt)&&Av(a.endAt,t.endAt)}function v1(a){return Xt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(t,n=null,r=[],u=[],c=null,d="F",m=null,_=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=u,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=_,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function l7(a,t,n,r,u,c,d,m){return new L0(a,t,n,r,u,c,d,m)}function bE(a){return new L0(a)}function Cv(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function o7(a){return a.collectionGroup!==null}function ig(a){const t=le(a);if(t.ce===null){t.ce=[];const n=new Set;for(const c of t.explicitOrderBy)t.ce.push(c),n.add(c.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new di(Hi.comparator);return d.filters.forEach(_=>{_.getFlattenedFilters().forEach(v=>{v.isInequality()&&(m=m.add(v.field))})}),m})(t).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||t.ce.push(new p0(c,r))}),n.has(Hi.keyField().canonicalString())||t.ce.push(new p0(Hi.keyField(),r))}return t.ce}function Ol(a){const t=le(a);return t.le||(t.le=u7(t,ig(a))),t.le}function u7(a,t){if(a.limitType==="F")return Rv(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map(u=>{const c=u.dir==="desc"?"asc":"desc";return new p0(u.field,c)});const n=a.endAt?new m0(a.endAt.position,a.endAt.inclusive):null,r=a.startAt?new m0(a.startAt.position,a.startAt.inclusive):null;return Rv(a.path,a.collectionGroup,t,a.filters,a.limit,n,r)}}function E1(a,t,n){return new L0(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,n,a.startAt,a.endAt)}function z0(a,t){return ey(Ol(a),Ol(t))&&a.limitType===t.limitType}function AE(a){return`${ty(Ol(a))}|lt:${a.limitType}`}function Ph(a){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(u=>SE(u)).join(", ")}]`),U0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(u=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(u)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(u=>Zh(u)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(u=>Zh(u)).join(",")),`Target(${r})`}(Ol(a))}; limitType=${a.limitType})`}function P0(a,t){return t.isFoundDocument()&&function(r,u){const c=u.key.path;return r.collectionGroup!==null?u.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Xt.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(a,t)&&function(r,u){for(const c of ig(r))if(!c.field.isKeyField()&&u.data.field(c.field)===null)return!1;return!0}(a,t)&&function(r,u){for(const c of r.filters)if(!c.matches(u))return!1;return!0}(a,t)&&function(r,u){return!(r.startAt&&!function(d,m,_){const v=bv(d,m,_);return d.inclusive?v<=0:v<0}(r.startAt,ig(r),u)||r.endAt&&!function(d,m,_){const v=bv(d,m,_);return d.inclusive?v>=0:v>0}(r.endAt,ig(r),u))}(a,t)}function c7(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function RE(a){return(t,n)=>{let r=!1;for(const u of ig(a)){const c=h7(u,t,n);if(c!==0)return c;r=r||u.field.isKeyField()}return 0}}function h7(a,t,n){const r=a.field.isKeyField()?Xt.comparator(t.key,n.key):function(c,d,m){const _=d.data.field(c),v=m.data.field(c);return _!==null&&v!==null?Qh(_,v):te()}(a.field,t,n);switch(a.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[u,c]of r)if(this.equalsFn(u,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),u=this.inner[r];if(u===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let c=0;c<u.length;c++)if(this.equalsFn(u[c][0],t))return void(u[c]=[t,n]);u.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let u=0;u<r.length;u++)if(this.equalsFn(r[u][0],t))return r.length===1?delete this.inner[n]:r.splice(u,1),this.innerSize--,!0;return!1}forEach(t){Gc(this.inner,(n,r)=>{for(const[u,c]of r)t(u,c)})}isEmpty(){return gE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7=new Ln(Xt.comparator);function Do(){return f7}const CE=new Ln(Xt.comparator);function $d(...a){let t=CE;for(const n of a)t=t.insert(n.key,n);return t}function DE(a){let t=CE;return a.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Vc(){return ag()}function wE(){return ag()}function ag(){return new kc(a=>a.toString(),(a,t)=>a.isEqual(t))}const d7=new Ln(Xt.comparator),g7=new di(Xt.comparator);function Ne(...a){let t=g7;for(const n of a)t=t.add(n);return t}const m7=new di(Ve);function p7(){return m7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:g0(t)?"-0":t}}function NE(a){return{integerValue:""+a}}function y7(a,t){return jb(t)?NE(t):ny(a,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(){this._=void 0}}function _7(a,t,n){return a instanceof fg?function(u,c){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return c&&J1(c)&&(c=I0(c)),c&&(d.fields.__previous_value__=c),{mapValue:d}}(n,t):a instanceof dg?ME(a,t):a instanceof gg?xE(a,t):function(u,c){const d=OE(u,c),m=Dv(d)+Dv(u.Pe);return y1(d)&&y1(u.Pe)?NE(m):ny(u.serializer,m)}(a,t)}function v7(a,t,n){return a instanceof dg?ME(a,t):a instanceof gg?xE(a,t):n}function OE(a,t){return a instanceof y0?function(r){return y1(r)||function(c){return!!c&&"doubleValue"in c}(r)}(t)?t:{integerValue:0}:null}class fg extends B0{}class dg extends B0{constructor(t){super(),this.elements=t}}function ME(a,t){const n=VE(t);for(const r of a.elements)n.some(u=>Vl(u,r))||n.push(r);return{arrayValue:{values:n}}}class gg extends B0{constructor(t){super(),this.elements=t}}function xE(a,t){let n=VE(t);for(const r of a.elements)n=n.filter(u=>!Vl(u,r));return{arrayValue:{values:n}}}class y0 extends B0{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Dv(a){return ti(a.integerValue||a.doubleValue)}function VE(a){return $1(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(t,n){this.field=t,this.transform=n}}function S7(a,t){return a.field.isEqual(t.field)&&function(r,u){return r instanceof dg&&u instanceof dg||r instanceof gg&&u instanceof gg?Xh(r.elements,u.elements,Vl):r instanceof y0&&u instanceof y0?Vl(r.Pe,u.Pe):r instanceof fg&&u instanceof fg}(a.transform,t.transform)}class T7{constructor(t,n){this.version=t,this.transformResults=n}}class Ml{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ml}static exists(t){return new Ml(void 0,t)}static updateTime(t){return new Ml(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function n0(a,t){return a.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(a.updateTime):a.exists===void 0||a.exists===t.isFoundDocument()}class G0{}function UE(a,t){if(!a.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return a.isNoDocument()?new iy(a.key,Ml.none()):new Tg(a.key,a.data,Ml.none());{const n=a.data,r=qs.empty();let u=new di(Hi.comparator);for(let c of t.fields)if(!u.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?r.delete(c):r.set(c,d),u=u.add(c)}return new Hc(a.key,r,new xr(u.toArray()),Ml.none())}}function b7(a,t,n){a instanceof Tg?function(u,c,d){const m=u.value.clone(),_=Nv(u.fieldTransforms,c,d.transformResults);m.setAll(_),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(a,t,n):a instanceof Hc?function(u,c,d){if(!n0(u.precondition,c))return void c.convertToUnknownDocument(d.version);const m=Nv(u.fieldTransforms,c,d.transformResults),_=c.data;_.setAll(IE(u)),_.setAll(m),c.convertToFoundDocument(d.version,_).setHasCommittedMutations()}(a,t,n):function(u,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,t,n)}function sg(a,t,n,r){return a instanceof Tg?function(c,d,m,_){if(!n0(c.precondition,d))return m;const v=c.value.clone(),b=Ov(c.fieldTransforms,_,d);return v.setAll(b),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(a,t,n,r):a instanceof Hc?function(c,d,m,_){if(!n0(c.precondition,d))return m;const v=Ov(c.fieldTransforms,_,d),b=d.data;return b.setAll(IE(c)),b.setAll(v),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(R=>R.field))}(a,t,n,r):function(c,d,m){return n0(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(a,t,n)}function A7(a,t){let n=null;for(const r of a.fieldTransforms){const u=t.data.field(r.field),c=OE(r.transform,u||null);c!=null&&(n===null&&(n=qs.empty()),n.set(r.field,c))}return n||null}function wv(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&!!function(r,u){return r===void 0&&u===void 0||!(!r||!u)&&Xh(r,u,(c,d)=>S7(c,d))}(a.fieldTransforms,t.fieldTransforms)&&(a.type===0?a.value.isEqual(t.value):a.type!==1||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask))}class Tg extends G0{constructor(t,n,r,u=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Hc extends G0{constructor(t,n,r,u,c=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=u,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function IE(a){const t=new Map;return a.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=a.data.field(n);t.set(n,r)}}),t}function Nv(a,t,n){const r=new Map;We(a.length===n.length);for(let u=0;u<n.length;u++){const c=a[u],d=c.transform,m=t.data.field(c.field);r.set(c.field,v7(d,m,n[u]))}return r}function Ov(a,t,n){const r=new Map;for(const u of a){const c=u.transform,d=n.data.field(u.field);r.set(u.field,_7(c,d,t))}return r}class iy extends G0{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class R7 extends G0{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(t,n,r,u){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=u}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const c=this.mutations[u];c.key.isEqual(t.key)&&b7(c,t,r[u])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=sg(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=sg(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=wE();return this.mutations.forEach(u=>{const c=t.get(u.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(u.key)?null:m;const _=UE(d,m);_!==null&&r.set(u.key,_),d.isValidDocument()||d.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Ne())}isEqual(t){return this.batchId===t.batchId&&Xh(this.mutations,t.mutations,(n,r)=>wv(n,r))&&Xh(this.baseMutations,t.baseMutations,(n,r)=>wv(n,r))}}class ay{constructor(t,n,r,u){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=u}static from(t,n,r){We(t.mutations.length===r.length);let u=function(){return d7}();const c=t.mutations;for(let d=0;d<c.length;d++)u=u.insert(c[d].key,r[d].version);return new ay(t,n,r,u)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li,ze;function N7(a){switch(a){default:return te();case Vt.CANCELLED:case Vt.UNKNOWN:case Vt.DEADLINE_EXCEEDED:case Vt.RESOURCE_EXHAUSTED:case Vt.INTERNAL:case Vt.UNAVAILABLE:case Vt.UNAUTHENTICATED:return!1;case Vt.INVALID_ARGUMENT:case Vt.NOT_FOUND:case Vt.ALREADY_EXISTS:case Vt.PERMISSION_DENIED:case Vt.FAILED_PRECONDITION:case Vt.ABORTED:case Vt.OUT_OF_RANGE:case Vt.UNIMPLEMENTED:case Vt.DATA_LOSS:return!0}}function LE(a){if(a===void 0)return Co("GRPC error has no .code"),Vt.UNKNOWN;switch(a){case li.OK:return Vt.OK;case li.CANCELLED:return Vt.CANCELLED;case li.UNKNOWN:return Vt.UNKNOWN;case li.DEADLINE_EXCEEDED:return Vt.DEADLINE_EXCEEDED;case li.RESOURCE_EXHAUSTED:return Vt.RESOURCE_EXHAUSTED;case li.INTERNAL:return Vt.INTERNAL;case li.UNAVAILABLE:return Vt.UNAVAILABLE;case li.UNAUTHENTICATED:return Vt.UNAUTHENTICATED;case li.INVALID_ARGUMENT:return Vt.INVALID_ARGUMENT;case li.NOT_FOUND:return Vt.NOT_FOUND;case li.ALREADY_EXISTS:return Vt.ALREADY_EXISTS;case li.PERMISSION_DENIED:return Vt.PERMISSION_DENIED;case li.FAILED_PRECONDITION:return Vt.FAILED_PRECONDITION;case li.ABORTED:return Vt.ABORTED;case li.OUT_OF_RANGE:return Vt.OUT_OF_RANGE;case li.UNIMPLEMENTED:return Vt.UNIMPLEMENTED;case li.DATA_LOSS:return Vt.DATA_LOSS;default:return te()}}(ze=li||(li={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=new wu([4294967295,4294967295],0);function Mv(a){const t=O7().encode(a),n=new rE;return n.update(t),new Uint8Array(n.digest())}function xv(a){const t=new DataView(a.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),u=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new wu([n,r],0),new wu([u,c],0)]}class sy{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new tg(`Invalid padding: ${n}`);if(r<0)throw new tg(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new tg(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new tg(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ie=wu.fromNumber(this.Te)}de(t,n,r){let u=t.add(n.multiply(wu.fromNumber(r)));return u.compare(M7)===1&&(u=new wu([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ie).toNumber()}Ee(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=Mv(t),[r,u]=xv(n);for(let c=0;c<this.hashCount;c++){const d=this.de(r,u,c);if(!this.Ee(d))return!1}return!0}static create(t,n,r){const u=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new sy(c,u,n);return r.forEach(m=>d.insert(m)),d}insert(t){if(this.Te===0)return;const n=Mv(t),[r,u]=xv(n);for(let c=0;c<this.hashCount;c++){const d=this.de(r,u,c);this.Ae(d)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class tg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(t,n,r,u,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=u,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const u=new Map;return u.set(t,bg.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new k0(se.min(),u,new Ln(Ve),Do(),Ne())}}class bg{constructor(t,n,r,u,c){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=u,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new bg(r,n,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(t,n,r,u){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=u}}class zE{constructor(t,n){this.targetId=t,this.me=n}}class PE{constructor(t,n,r=qi.EMPTY_BYTE_STRING,u=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=u}}class Vv{constructor(){this.fe=0,this.ge=Uv(),this.pe=qi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Ne(),n=Ne(),r=Ne();return this.ge.forEach((u,c)=>{switch(c){case 0:t=t.add(u);break;case 2:n=n.add(u);break;case 1:r=r.add(u);break;default:te()}}),new bg(this.pe,this.ye,t,n,r)}Ce(){this.we=!1,this.ge=Uv()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class x7{constructor(t){this.Be=t,this.Le=new Map,this.ke=Do(),this.qe=jm(),this.Qe=jm(),this.Ke=new Ln(Ve)}$e(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(n,t.Ve):this.We(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.We(n,t.key,t.Ve)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(t.resumeToken));break;default:te()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Le.forEach((r,u)=>{this.je(u)&&n(u)})}Je(t){const n=t.targetId,r=t.me.count,u=this.Ye(n);if(u){const c=u.target;if(v1(c))if(r===0){const d=new Xt(c.path);this.We(n,d,ca.newNoDocument(d,se.min()))}else We(r===1);else{const d=this.Ze(n);if(d!==r){const m=this.Xe(t),_=m?this.et(m,t,d):1;if(_!==0){this.He(n);const v=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,v)}}}}}Xe(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:u=0},hashCount:c=0}=n;let d,m;try{d=Vu(r).toUint8Array()}catch(_){if(_ instanceof mE)return Yh("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{m=new sy(d,u,c)}catch(_){return Yh(_ instanceof tg?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return m.Te===0?null:m}et(t,n,r){return n.me.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Be.getRemoteKeysForTarget(n);let u=0;return r.forEach(c=>{const d=this.Be.nt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(m)||(this.We(n,c,null),u++)}),u}it(t){const n=new Map;this.Le.forEach((c,d)=>{const m=this.Ye(d);if(m){if(c.current&&v1(m.target)){const _=new Xt(m.target.path);this.st(_).has(d)||this.ot(d,_)||this.We(d,_,ca.newNoDocument(_,t))}c.be&&(n.set(d,c.ve()),c.Ce())}});let r=Ne();this.Qe.forEach((c,d)=>{let m=!0;d.forEachWhile(_=>{const v=this.Ye(_);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(c))}),this.ke.forEach((c,d)=>d.setReadTime(t));const u=new k0(t,n,this.Ke,this.ke,r);return this.ke=Do(),this.qe=jm(),this.Qe=jm(),this.Ke=new Ln(Ve),u}Ue(t,n){if(!this.je(t))return;const r=this.ot(t,n.key)?2:0;this.ze(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const u=this.ze(t);this.ot(t,n)?u.Fe(n,1):u.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(t)),this.Qe=this.Qe.insert(n,this._t(n).add(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Le.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let n=this.Le.get(t);return n||(n=new Vv,this.Le.set(t,n)),n}_t(t){let n=this.Qe.get(t);return n||(n=new di(Ve),this.Qe=this.Qe.insert(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new di(Ve),this.qe=this.qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||Bt("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.Le.get(t);return n&&n.Se?null:this.Be.ut(t)}He(t){this.Le.set(t,new Vv),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}ot(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function jm(){return new Ln(Xt.comparator)}function Uv(){return new Ln(Xt.comparator)}const V7={asc:"ASCENDING",desc:"DESCENDING"},U7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},I7={and:"AND",or:"OR"};class L7{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function S1(a,t){return a.useProto3Json||U0(t)?t:{value:t}}function _0(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function BE(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function z7(a,t){return _0(a,t.toTimestamp())}function xl(a){return We(!!a),se.fromTimestamp(function(n){const r=xu(n);return new fi(r.seconds,r.nanos)}(a))}function ry(a,t){return T1(a,t).canonicalString()}function T1(a,t){const n=function(u){return new An(["projects",u.projectId,"databases",u.database])}(a).child("documents");return t===void 0?n:n.child(t)}function GE(a){const t=An.fromString(a);return We(FE(t)),t}function b1(a,t){return ry(a.databaseId,t.path)}function $p(a,t){const n=GE(t);if(n.get(1)!==a.databaseId.projectId)throw new Ft(Vt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new Ft(Vt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new Xt(HE(n))}function kE(a,t){return ry(a.databaseId,t)}function P7(a){const t=GE(a);return t.length===4?An.emptyPath():HE(t)}function A1(a){return new An(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function HE(a){return We(a.length>4&&a.get(4)==="documents"),a.popFirst(5)}function Iv(a,t,n){return{name:b1(a,t),fields:n.value.mapValue.fields}}function B7(a,t){let n;if("targetChange"in t){t.targetChange;const r=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:te()}(t.targetChange.targetChangeType||"NO_CHANGE"),u=t.targetChange.targetIds||[],c=function(v,b){return v.useProto3Json?(We(b===void 0||typeof b=="string"),qi.fromBase64String(b||"")):(We(b===void 0||b instanceof Buffer||b instanceof Uint8Array),qi.fromUint8Array(b||new Uint8Array))}(a,t.targetChange.resumeToken),d=t.targetChange.cause,m=d&&function(v){const b=v.code===void 0?Vt.UNKNOWN:LE(v.code);return new Ft(b,v.message||"")}(d);n=new PE(r,u,c,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const u=$p(a,r.document.name),c=xl(r.document.updateTime),d=r.document.createTime?xl(r.document.createTime):se.min(),m=new qs({mapValue:{fields:r.document.fields}}),_=ca.newFoundDocument(u,c,d,m),v=r.targetIds||[],b=r.removedTargetIds||[];n=new i0(v,b,_.key,_)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const u=$p(a,r.document),c=r.readTime?xl(r.readTime):se.min(),d=ca.newNoDocument(u,c),m=r.removedTargetIds||[];n=new i0([],m,d.key,d)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const u=$p(a,r.document),c=r.removedTargetIds||[];n=new i0([],c,u,null)}else{if(!("filter"in t))return te();{t.filter;const r=t.filter;r.targetId;const{count:u=0,unchangedNames:c}=r,d=new w7(u,c),m=r.targetId;n=new zE(m,d)}}return n}function G7(a,t){let n;if(t instanceof Tg)n={update:Iv(a,t.key,t.value)};else if(t instanceof iy)n={delete:b1(a,t.key)};else if(t instanceof Hc)n={update:Iv(a,t.key,t.data),updateMask:Q7(t.fieldMask)};else{if(!(t instanceof R7))return te();n={verify:b1(a,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(c,d){const m=d.transform;if(m instanceof fg)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof dg)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof gg)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof y0)return{fieldPath:d.field.canonicalString(),increment:m.Pe};throw te()}(0,r))),t.precondition.isNone||(n.currentDocument=function(u,c){return c.updateTime!==void 0?{updateTime:z7(u,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:te()}(a,t.precondition)),n}function k7(a,t){return a&&a.length>0?(We(t!==void 0),a.map(n=>function(u,c){let d=u.updateTime?xl(u.updateTime):xl(c);return d.isEqual(se.min())&&(d=xl(c)),new T7(d,u.transformResults||[])}(n,t))):[]}function H7(a,t){return{documents:[kE(a,t.path)]}}function q7(a,t){const n={structuredQuery:{}},r=t.path;let u;t.collectionGroup!==null?(u=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(u=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kE(a,u);const c=function(v){if(v.length!==0)return jE(Ul.create(v,"and"))}(t.filters);c&&(n.structuredQuery.where=c);const d=function(v){if(v.length!==0)return v.map(b=>function(U){return{field:Bh(U.field),direction:K7(U.dir)}}(b))}(t.orderBy);d&&(n.structuredQuery.orderBy=d);const m=S1(a,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(t.endAt)),{ct:n,parent:u}}function j7(a){let t=P7(a.parent);const n=a.structuredQuery,r=n.from?n.from.length:0;let u=null;if(r>0){We(r===1);const b=n.from[0];b.allDescendants?u=b.collectionId:t=t.child(b.collectionId)}let c=[];n.where&&(c=function(R){const U=qE(R);return U instanceof Ul&&vE(U)?U.getFilters():[U]}(n.where));let d=[];n.orderBy&&(d=function(R){return R.map(U=>function(O){return new p0(Gh(O.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(U))}(n.orderBy));let m=null;n.limit&&(m=function(R){let U;return U=typeof R=="object"?R.value:R,U0(U)?null:U}(n.limit));let _=null;n.startAt&&(_=function(R){const U=!!R.before,w=R.values||[];return new m0(w,U)}(n.startAt));let v=null;return n.endAt&&(v=function(R){const U=!R.before,w=R.values||[];return new m0(w,U)}(n.endAt)),l7(t,u,d,c,m,"F",_,v)}function F7(a,t){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function qE(a){return a.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gh(n.unaryFilter.field);return hi.create(r,"==",{doubleValue:NaN});case"IS_NULL":const u=Gh(n.unaryFilter.field);return hi.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Gh(n.unaryFilter.field);return hi.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Gh(n.unaryFilter.field);return hi.create(d,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(a):a.fieldFilter!==void 0?function(n){return hi.create(Gh(n.fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(a):a.compositeFilter!==void 0?function(n){return Ul.create(n.compositeFilter.filters.map(r=>qE(r)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(a):te()}function K7(a){return V7[a]}function Y7(a){return U7[a]}function X7(a){return I7[a]}function Bh(a){return{fieldPath:a.canonicalString()}}function Gh(a){return Hi.fromServerFormat(a.fieldPath)}function jE(a){return a instanceof hi?function(n){if(n.op==="=="){if(Tv(n.value))return{unaryFilter:{field:Bh(n.field),op:"IS_NAN"}};if(Sv(n.value))return{unaryFilter:{field:Bh(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tv(n.value))return{unaryFilter:{field:Bh(n.field),op:"IS_NOT_NAN"}};if(Sv(n.value))return{unaryFilter:{field:Bh(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bh(n.field),op:Y7(n.op),value:n.value}}}(a):a instanceof Ul?function(n){const r=n.getFilters().map(u=>jE(u));return r.length===1?r[0]:{compositeFilter:{op:X7(n.op),filters:r}}}(a):te()}function Q7(a){const t=[];return a.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function FE(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(t,n,r,u,c=se.min(),d=se.min(),m=qi.EMPTY_BYTE_STRING,_=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=u,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=_}withSequenceNumber(t){return new Au(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(t){this.ht=t}}function W7(a){const t=j7({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?E1(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(){this.ln=new $7}addToCollectionParentIndex(t,n){return this.ln.add(n),wt.resolve()}getCollectionParents(t,n){return wt.resolve(this.ln.getEntries(n))}addFieldIndex(t,n){return wt.resolve()}deleteFieldIndex(t,n){return wt.resolve()}deleteAllFieldIndexes(t){return wt.resolve()}createTargetIndexes(t,n){return wt.resolve()}getDocumentsMatchingTarget(t,n){return wt.resolve(null)}getIndexType(t,n){return wt.resolve(0)}getFieldIndexes(t,n){return wt.resolve([])}getNextCollectionGroupToUpdate(t){return wt.resolve(null)}getMinOffset(t,n){return wt.resolve(Mu.min())}getMinOffsetFromCollectionGroup(t,n){return wt.resolve(Mu.min())}updateCollectionGroup(t,n,r){return wt.resolve()}updateIndexEntries(t,n){return wt.resolve()}}class $7{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),u=this.index[n]||new di(An.comparator),c=!u.has(r);return this.index[n]=u.add(r),c}has(t){const n=t.lastSegment(),r=t.popLast(),u=this.index[n];return u&&u.has(r)}getEntries(t){return(this.index[t]||new di(An.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ja{static withCacheSize(t){return new Ja(t,Ja.DEFAULT_COLLECTION_PERCENTILE,Ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ja.DEFAULT_COLLECTION_PERCENTILE=10,Ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ja.DEFAULT=new Ja(41943040,Ja.DEFAULT_COLLECTION_PERCENTILE,Ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ja.DISABLED=new Ja(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new Wh(0)}static Qn(){return new Wh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv([a,t],[n,r]){const u=Ve(a,n);return u===0?Ve(t,r):u}class tA{constructor(t){this.Gn=t,this.buffer=new di(zv),this.zn=0}jn(){return++this.zn}Hn(t){const n=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();zv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class eA{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){Bt("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sf(n)?Bt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await af(n)}await this.Yn(3e5)})}}class nA{constructor(t,n){this.Zn=t,this.params=n}calculateTargetCount(t,n){return this.Zn.Xn(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return wt.resolve(V0.oe);const r=new tA(n);return this.Zn.forEachTarget(t,u=>r.Hn(u.sequenceNumber)).next(()=>this.Zn.er(t,u=>r.Hn(u))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Zn.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Zn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Bt("LruGarbageCollector","Garbage collection skipped; disabled"),wt.resolve(Lv)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Bt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lv):this.tr(t,n))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,n){let r,u,c,d,m,_,v;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Bt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),u=this.params.maximumSequenceNumbersToCollect):u=R,d=Date.now(),this.nthSequenceNumber(t,u))).next(R=>(r=R,m=Date.now(),this.removeTargets(t,r,n))).next(R=>(c=R,_=Date.now(),this.removeOrphanedDocuments(t,r))).next(R=>(v=Date.now(),zh()<=we.DEBUG&&Bt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${u} in `+(m-d)+`ms
	Removed ${c} targets in `+(_-m)+`ms
	Removed ${R} documents in `+(v-_)+`ms
Total Duration: ${v-b}ms`),wt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:c,documentsRemoved:R})))}}function iA(a,t){return new nA(a,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this.changes=new kc(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ca.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?wt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(t,n,r,u){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=u}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(u=>(r=u,this.remoteDocumentCache.getEntry(t,n))).next(u=>(r!==null&&sg(r.mutation,u,xr.empty(),fi.now()),u))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Ne()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Ne()){const u=Vc();return this.populateOverlays(t,u,n).next(()=>this.computeViews(t,n,u,r).next(c=>{let d=$d();return c.forEach((m,_)=>{d=d.insert(m,_.overlayedDocument)}),d}))}getOverlayedDocuments(t,n){const r=Vc();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Ne()))}populateOverlays(t,n,r){const u=[];return r.forEach(c=>{n.has(c)||u.push(c)}),this.documentOverlayCache.getOverlays(t,u).next(c=>{c.forEach((d,m)=>{n.set(d,m)})})}computeViews(t,n,r,u){let c=Do();const d=ag(),m=function(){return ag()}();return n.forEach((_,v)=>{const b=r.get(v.key);u.has(v.key)&&(b===void 0||b.mutation instanceof Hc)?c=c.insert(v.key,v):b!==void 0?(d.set(v.key,b.mutation.getFieldMask()),sg(b.mutation,v,b.mutation.getFieldMask(),fi.now())):d.set(v.key,xr.empty())}),this.recalculateAndSaveOverlays(t,c).next(_=>(_.forEach((v,b)=>d.set(v,b)),n.forEach((v,b)=>{var R;return m.set(v,new sA(b,(R=d.get(v))!==null&&R!==void 0?R:null))}),m))}recalculateAndSaveOverlays(t,n){const r=ag();let u=new Ln((d,m)=>d-m),c=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(d=>{for(const m of d)m.keys().forEach(_=>{const v=n.get(_);if(v===null)return;let b=r.get(_)||xr.empty();b=m.applyToLocalView(v,b),r.set(_,b);const R=(u.get(m.batchId)||Ne()).add(_);u=u.insert(m.batchId,R)})}).next(()=>{const d=[],m=u.getReverseIterator();for(;m.hasNext();){const _=m.getNext(),v=_.key,b=_.value,R=wE();b.forEach(U=>{if(!c.has(U)){const w=UE(n.get(U),r.get(U));w!==null&&R.set(U,w),c=c.add(U)}}),d.push(this.documentOverlayCache.saveOverlays(t,v,R))}return wt.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,u){return function(d){return Xt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):o7(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,u):this.getDocumentsMatchingCollectionQuery(t,n,r,u)}getNextDocuments(t,n,r,u){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,u).next(c=>{const d=u-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,u-c.size):wt.resolve(Vc());let m=-1,_=c;return d.next(v=>wt.forEach(v,(b,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),c.get(b)?wt.resolve():this.remoteDocumentCache.getEntry(t,b).next(U=>{_=_.insert(b,U)}))).next(()=>this.populateOverlays(t,v,c)).next(()=>this.computeViews(t,_,v,Ne())).next(b=>({batchId:m,changes:DE(b)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Xt(n)).next(r=>{let u=$d();return r.isFoundDocument()&&(u=u.insert(r.key,r)),u})}getDocumentsMatchingCollectionGroupQuery(t,n,r,u){const c=n.collectionGroup;let d=$d();return this.indexManager.getCollectionParents(t,c).next(m=>wt.forEach(m,_=>{const v=function(R,U){return new L0(U,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(n,_.child(c));return this.getDocumentsMatchingCollectionQuery(t,v,r,u).next(b=>{b.forEach((R,U)=>{d=d.insert(R,U)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(t,n,r,u){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,c,u))).next(d=>{c.forEach((_,v)=>{const b=v.getKey();d.get(b)===null&&(d=d.insert(b,ca.newInvalidDocument(b)))});let m=$d();return d.forEach((_,v)=>{const b=c.get(_);b!==void 0&&sg(b.mutation,v,xr.empty(),fi.now()),P0(n,v)&&(m=m.insert(_,v))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,n){return wt.resolve(this.Tr.get(n))}saveBundleMetadata(t,n){return this.Tr.set(n.id,function(u){return{id:u.id,version:u.version,createTime:xl(u.createTime)}}(n)),wt.resolve()}getNamedQuery(t,n){return wt.resolve(this.Ir.get(n))}saveNamedQuery(t,n){return this.Ir.set(n.name,function(u){return{name:u.name,query:W7(u.bundledQuery),readTime:xl(u.readTime)}}(n)),wt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.overlays=new Ln(Xt.comparator),this.dr=new Map}getOverlay(t,n){return wt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Vc();return wt.forEach(n,u=>this.getOverlay(t,u).next(c=>{c!==null&&r.set(u,c)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((u,c)=>{this.Tt(t,n,c)}),wt.resolve()}removeOverlaysForBatchId(t,n,r){const u=this.dr.get(r);return u!==void 0&&(u.forEach(c=>this.overlays=this.overlays.remove(c)),this.dr.delete(r)),wt.resolve()}getOverlaysForCollection(t,n,r){const u=Vc(),c=n.length+1,d=new Xt(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const _=m.getNext().value,v=_.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&_.largestBatchId>r&&u.set(_.getKey(),_)}return wt.resolve(u)}getOverlaysForCollectionGroup(t,n,r,u){let c=new Ln((v,b)=>v-b);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>r){let b=c.get(v.largestBatchId);b===null&&(b=Vc(),c=c.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const m=Vc(),_=c.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((v,b)=>m.set(v,b)),!(m.size()>=u)););return wt.resolve(m)}Tt(t,n,r){const u=this.overlays.get(r.key);if(u!==null){const d=this.dr.get(u.largestBatchId).delete(r.key);this.dr.set(u.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new D7(n,r));let c=this.dr.get(n);c===void 0&&(c=Ne(),this.dr.set(n,c)),this.dr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.sessionToken=qi.EMPTY_BYTE_STRING}getSessionToken(t){return wt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,wt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(){this.Er=new di(wi.Ar),this.Rr=new di(wi.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(t,n){const r=new wi(t,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.gr(new wi(t,n))}pr(t,n){t.forEach(r=>this.removeReference(r,n))}yr(t){const n=new Xt(new An([])),r=new wi(n,t),u=new wi(n,t+1),c=[];return this.Rr.forEachInRange([r,u],d=>{this.gr(d),c.push(d.key)}),c}wr(){this.Er.forEach(t=>this.gr(t))}gr(t){this.Er=this.Er.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const n=new Xt(new An([])),r=new wi(n,t),u=new wi(n,t+1);let c=Ne();return this.Rr.forEachInRange([r,u],d=>{c=c.add(d.key)}),c}containsKey(t){const n=new wi(t,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class wi{constructor(t,n){this.key=t,this.br=n}static Ar(t,n){return Xt.comparator(t.key,n.key)||Ve(t.br,n.br)}static Vr(t,n){return Ve(t.br,n.br)||Xt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new di(wi.Ar)}checkEmpty(t){return wt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,u){const c=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new C7(c,n,r,u);this.mutationQueue.push(d);for(const m of u)this.vr=this.vr.add(new wi(m.key,c)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return wt.resolve(d)}lookupMutationBatch(t,n){return wt.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,u=this.Fr(r),c=u<0?0:u;return wt.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return wt.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return wt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new wi(n,0),u=new wi(n,Number.POSITIVE_INFINITY),c=[];return this.vr.forEachInRange([r,u],d=>{const m=this.Cr(d.br);c.push(m)}),wt.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new di(Ve);return n.forEach(u=>{const c=new wi(u,0),d=new wi(u,Number.POSITIVE_INFINITY);this.vr.forEachInRange([c,d],m=>{r=r.add(m.br)})}),wt.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,u=r.length+1;let c=r;Xt.isDocumentKey(c)||(c=c.child(""));const d=new wi(new Xt(c),0);let m=new di(Ve);return this.vr.forEachWhile(_=>{const v=_.key.path;return!!r.isPrefixOf(v)&&(v.length===u&&(m=m.add(_.br)),!0)},d),wt.resolve(this.Mr(m))}Mr(t){const n=[];return t.forEach(r=>{const u=this.Cr(r);u!==null&&n.push(u)}),n}removeMutationBatch(t,n){We(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return wt.forEach(n.mutations,u=>{const c=new wi(u.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,u.key)}).next(()=>{this.vr=r})}Bn(t){}containsKey(t,n){const r=new wi(n,0),u=this.vr.firstAfterOrEqual(r);return wt.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(t){return this.mutationQueue.length,wt.resolve()}Or(t,n){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){const n=this.Fr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(t){this.Nr=t,this.docs=function(){return new Ln(Xt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,u=this.docs.get(r),c=u?u.size:0,d=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return wt.resolve(r?r.document.mutableCopy():ca.newInvalidDocument(n))}getEntries(t,n){let r=Do();return n.forEach(u=>{const c=this.docs.get(u);r=r.insert(u,c?c.document.mutableCopy():ca.newInvalidDocument(u))}),wt.resolve(r)}getDocumentsMatchingQuery(t,n,r,u){let c=Do();const d=n.path,m=new Xt(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(m);for(;_.hasNext();){const{key:v,value:{document:b}}=_.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||Gb(Bb(b),r)<=0||(u.has(b.key)||P0(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return wt.resolve(c)}getAllFromCollectionGroup(t,n,r,u){te()}Br(t,n){return wt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new fA(this)}getSize(t){return wt.resolve(this.size)}}class fA extends aA{constructor(t){super(),this.hr=t}applyChanges(t){const n=[];return this.changes.forEach((r,u)=>{u.isValidDocument()?n.push(this.hr.addEntry(t,u)):this.hr.removeEntry(r)}),wt.waitFor(n)}getFromCache(t,n){return this.hr.getEntry(t,n)}getAllFromCache(t,n){return this.hr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(t){this.persistence=t,this.Lr=new kc(n=>ty(n),ey),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.kr=0,this.qr=new ly,this.targetCount=0,this.Qr=Wh.qn()}forEachTarget(t,n){return this.Lr.forEach((r,u)=>n(u)),wt.resolve()}getLastRemoteSnapshotVersion(t){return wt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return wt.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),wt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),wt.resolve()}Un(t){this.Lr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Qr=new Wh(n),this.highestTargetId=n),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,n){return this.Un(n),this.targetCount+=1,wt.resolve()}updateTargetData(t,n){return this.Un(n),wt.resolve()}removeTargetData(t,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,wt.resolve()}removeTargets(t,n,r){let u=0;const c=[];return this.Lr.forEach((d,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.Lr.delete(d),c.push(this.removeMatchingKeysForTargetId(t,m.targetId)),u++)}),wt.waitFor(c).next(()=>u)}getTargetCount(t){return wt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Lr.get(n)||null;return wt.resolve(r)}addMatchingKeys(t,n,r){return this.qr.mr(n,r),wt.resolve()}removeMatchingKeys(t,n,r){this.qr.pr(n,r);const u=this.persistence.referenceDelegate,c=[];return u&&n.forEach(d=>{c.push(u.markPotentiallyOrphaned(t,d))}),wt.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this.qr.yr(n),wt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.qr.Sr(n);return wt.resolve(r)}containsKey(t,n){return wt.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(t,n){this.Kr={},this.overlays={},this.$r=new V0(0),this.Ur=!1,this.Ur=!0,this.Wr=new uA,this.referenceDelegate=t(this),this.Gr=new dA(this),this.indexManager=new J7,this.remoteDocumentCache=function(u){return new hA(u)}(r=>this.referenceDelegate.zr(r)),this.serializer=new Z7(n),this.jr=new lA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new oA,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Kr[t.toKey()];return r||(r=new cA(n,this.referenceDelegate),this.Kr[t.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,n,r){Bt("MemoryPersistence","Starting transaction:",t);const u=new gA(this.$r.next());return this.referenceDelegate.Hr(),r(u).next(c=>this.referenceDelegate.Jr(u).next(()=>c)).toPromise().then(c=>(u.raiseOnCommittedEvent(),c))}Yr(t,n){return wt.or(Object.values(this.Kr).map(r=>()=>r.containsKey(t,n)))}}class gA extends Hb{constructor(t){super(),this.currentSequenceNumber=t}}class oy{constructor(t){this.persistence=t,this.Zr=new ly,this.Xr=null}static ei(t){return new oy(t)}get ti(){if(this.Xr)return this.Xr;throw te()}addReference(t,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),wt.resolve()}removeReference(t,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),wt.resolve()}markPotentiallyOrphaned(t,n){return this.ti.add(n.toString()),wt.resolve()}removeTarget(t,n){this.Zr.yr(n.targetId).forEach(u=>this.ti.add(u.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(u=>{u.forEach(c=>this.ti.add(c.toString()))}).next(()=>r.removeTargetData(t,n))}Hr(){this.Xr=new Set}Jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wt.forEach(this.ti,r=>{const u=Xt.fromPath(r);return this.ni(t,u).next(c=>{c||n.removeEntry(u,se.min())})}).next(()=>(this.Xr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ni(t,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(t){return 0}ni(t,n){return wt.or([()=>wt.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Yr(t,n)])}}class v0{constructor(t,n){this.persistence=t,this.ri=new kc(r=>Fb(r.path),(r,u)=>r.isEqual(u)),this.garbageCollector=iA(this,n)}static ei(t,n){return new v0(t,n)}Hr(){}Jr(t){return wt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}Xn(t){const n=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(u=>r+u))}nr(t){let n=0;return this.er(t,r=>{n++}).next(()=>n)}er(t,n){return wt.forEach(this.ri,(r,u)=>this.ir(t,r,u).next(c=>c?wt.resolve():n(u)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const u=this.persistence.getRemoteDocumentCache(),c=u.newChangeBuffer();return u.Br(t,d=>this.ir(t,d,n).next(m=>{m||(r++,c.removeEntry(d,se.min()))})).next(()=>c.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.ri.set(n,t.currentSequenceNumber),wt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),wt.resolve()}removeReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),wt.resolve()}updateLimboDocument(t,n){return this.ri.set(n,t.currentSequenceNumber),wt.resolve()}zr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=t0(t.data.value)),n}ir(t,n,r){return wt.or([()=>this.persistence.Yr(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const u=this.ri.get(n);return wt.resolve(u!==void 0&&u>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(t,n,r,u){this.targetId=t,this.fromCache=n,this.Wi=r,this.Gi=u}static zi(t,n){let r=Ne(),u=Ne();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:u=u.add(c.doc.key)}return new uy(t,n.fromCache,r,u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return W6()?8:qb(ha())>0?6:4}()}initialize(t,n){this.Zi=t,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(t,n,r,u){const c={result:null};return this.Xi(t,n).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.es(t,n,u,r).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new mA;return this.ts(t,n,d).next(m=>{if(c.result=m,this.Hi)return this.ns(t,n,d,m.size)})}).next(()=>c.result)}ns(t,n,r,u){return r.documentReadCount<this.Ji?(zh()<=we.DEBUG&&Bt("QueryEngine","SDK will not create cache indexes for query:",Ph(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),wt.resolve()):(zh()<=we.DEBUG&&Bt("QueryEngine","Query:",Ph(n),"scans",r.documentReadCount,"local documents and returns",u,"documents as results."),r.documentReadCount>this.Yi*u?(zh()<=we.DEBUG&&Bt("QueryEngine","The SDK decides to create cache indexes for query:",Ph(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ol(n))):wt.resolve())}Xi(t,n){if(Cv(n))return wt.resolve(null);let r=Ol(n);return this.indexManager.getIndexType(t,r).next(u=>u===0?null:(n.limit!==null&&u===1&&(n=E1(n,null,"F"),r=Ol(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(c=>{const d=Ne(...c);return this.Zi.getDocuments(t,d).next(m=>this.indexManager.getMinOffset(t,r).next(_=>{const v=this.rs(n,m);return this.ss(n,v,d,_.readTime)?this.Xi(t,E1(n,null,"F")):this.os(t,v,n,_)}))})))}es(t,n,r,u){return Cv(n)||u.isEqual(se.min())?wt.resolve(null):this.Zi.getDocuments(t,r).next(c=>{const d=this.rs(n,c);return this.ss(n,d,r,u)?wt.resolve(null):(zh()<=we.DEBUG&&Bt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Ph(n)),this.os(t,d,n,Pb(u,-1)).next(m=>m))})}rs(t,n){let r=new di(RE(t));return n.forEach((u,c)=>{P0(t,c)&&(r=r.add(c))}),r}ss(t,n,r,u){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(u)>0)}ts(t,n,r){return zh()<=we.DEBUG&&Bt("QueryEngine","Using full collection scan to execute query:",Ph(n)),this.Zi.getDocumentsMatchingQuery(t,n,Mu.min(),r)}os(t,n,r,u){return this.Zi.getDocumentsMatchingQuery(t,r,u).next(c=>(n.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(t,n,r,u){this.persistence=t,this._s=n,this.serializer=u,this.us=new Ln(Ve),this.cs=new kc(c=>ty(c),ey),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(r)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new rA(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.us))}}function _A(a,t,n,r){return new yA(a,t,n,r)}async function YE(a,t){const n=le(a);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let u;return n.mutationQueue.getAllMutationBatches(r).next(c=>(u=c,n.Ps(t),n.mutationQueue.getAllMutationBatches(r))).next(c=>{const d=[],m=[];let _=Ne();for(const v of u){d.push(v.batchId);for(const b of v.mutations)_=_.add(b.key)}for(const v of c){m.push(v.batchId);for(const b of v.mutations)_=_.add(b.key)}return n.localDocuments.getDocuments(r,_).next(v=>({Ts:v,removedBatchIds:d,addedBatchIds:m}))})})}function vA(a,t){const n=le(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const u=t.batch.keys(),c=n.hs.newChangeBuffer({trackRemovals:!0});return function(m,_,v,b){const R=v.batch,U=R.keys();let w=wt.resolve();return U.forEach(O=>{w=w.next(()=>b.getEntry(_,O)).next(I=>{const P=v.docVersions.get(O);We(P!==null),I.version.compareTo(P)<0&&(R.applyToRemoteDocument(I,v),I.isValidDocument()&&(I.setReadTime(v.commitVersion),b.addEntry(I)))})}),w.next(()=>m.mutationQueue.removeMutationBatch(_,R))}(n,r,t,c).next(()=>c.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,u,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let _=Ne();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(_=_.add(m.batch.mutations[v].key));return _}(t))).next(()=>n.localDocuments.getDocuments(r,u))})}function XE(a){const t=le(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Gr.getLastRemoteSnapshotVersion(n))}function EA(a,t){const n=le(a),r=t.snapshotVersion;let u=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=n.hs.newChangeBuffer({trackRemovals:!0});u=n.us;const m=[];t.targetChanges.forEach((b,R)=>{const U=u.get(R);if(!U)return;m.push(n.Gr.removeMatchingKeys(c,b.removedDocuments,R).next(()=>n.Gr.addMatchingKeys(c,b.addedDocuments,R)));let w=U.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(R)!==null?w=w.withResumeToken(qi.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):b.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(b.resumeToken,r)),u=u.insert(R,w),function(I,P,K){return I.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(U,w,b)&&m.push(n.Gr.updateTargetData(c,w))});let _=Do(),v=Ne();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))}),m.push(SA(c,d,t.documentUpdates).next(b=>{_=b.Is,v=b.ds})),!r.isEqual(se.min())){const b=n.Gr.getLastRemoteSnapshotVersion(c).next(R=>n.Gr.setTargetsMetadata(c,c.currentSequenceNumber,r));m.push(b)}return wt.waitFor(m).next(()=>d.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,_,v)).next(()=>_)}).then(c=>(n.us=u,c))}function SA(a,t,n){let r=Ne(),u=Ne();return n.forEach(c=>r=r.add(c)),t.getEntries(a,r).next(c=>{let d=Do();return n.forEach((m,_)=>{const v=c.get(m);_.isFoundDocument()!==v.isFoundDocument()&&(u=u.add(m)),_.isNoDocument()&&_.version.isEqual(se.min())?(t.removeEntry(m,_.readTime),d=d.insert(m,_)):!v.isValidDocument()||_.version.compareTo(v.version)>0||_.version.compareTo(v.version)===0&&v.hasPendingWrites?(t.addEntry(_),d=d.insert(m,_)):Bt("LocalStore","Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",_.version)}),{Is:d,ds:u}})}function TA(a,t){const n=le(a);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function bA(a,t){const n=le(a);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let u;return n.Gr.getTargetData(r,t).next(c=>c?(u=c,wt.resolve(u)):n.Gr.allocateTargetId(r).next(d=>(u=new Au(t,d,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,u).next(()=>u))))}).then(r=>{const u=n.us.get(r.targetId);return(u===null||r.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(t,r.targetId)),r})}async function R1(a,t,n){const r=le(a),u=r.us.get(t),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,d=>r.persistence.referenceDelegate.removeTarget(d,u))}catch(d){if(!sf(d))throw d;Bt("LocalStore",`Failed to update sequence numbers for target ${t}: ${d}`)}r.us=r.us.remove(t),r.cs.delete(u.target)}function Pv(a,t,n){const r=le(a);let u=se.min(),c=Ne();return r.persistence.runTransaction("Execute query","readwrite",d=>function(_,v,b){const R=le(_),U=R.cs.get(b);return U!==void 0?wt.resolve(R.us.get(U)):R.Gr.getTargetData(v,b)}(r,d,Ol(t)).next(m=>{if(m)return u=m.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(d,m.targetId).next(_=>{c=_})}).next(()=>r._s.getDocumentsMatchingQuery(d,t,n?u:se.min(),n?c:Ne())).next(m=>(AA(r,c7(t),m),{documents:m,Es:c})))}function AA(a,t,n){let r=a.ls.get(t)||se.min();n.forEach((u,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),a.ls.set(t,r)}class Bv{constructor(){this.activeTargetIds=p7()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class RA{constructor(){this._o=new Bv,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,n,r){this.ao[t]=n}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new Bv,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{uo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Bt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){Bt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fm=null;function t1(){return Fm===null?Fm=function(){return 268435456+Math.round(2147483648*Math.random())}():Fm++,"0x"+Fm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="WebChannelConnection";class NA extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${u}/databases/${c}`,this.xo=this.databaseId.database==="(default)"?`project_id=${u}`:`project_id=${u}&database_id=${c}`}Oo(n,r,u,c,d){const m=t1(),_=this.No(n,r.toUriEncodedString());Bt("RestConnection",`Sending RPC '${n}' ${m}:`,_,u);const v={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(v,c,d),this.Lo(n,_,v,u).then(b=>(Bt("RestConnection",`Received RPC '${n}' ${m}: `,b),b),b=>{throw Yh("RestConnection",`RPC '${n}' ${m} failed with error: `,b,"url: ",_,"request:",u),b})}ko(n,r,u,c,d,m){return this.Oo(n,r,u,c,d)}Bo(n,r,u){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nf}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((c,d)=>n[d]=c),u&&u.headers.forEach((c,d)=>n[d]=c)}No(n,r){const u=DA[n];return`${this.Fo}/v1/${r}:${u}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Lo(t,n,r,u){const c=t1();return new Promise((d,m)=>{const _=new lE;_.setWithCredentials(!0),_.listenOnce(oE.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case $m.NO_ERROR:const b=_.getResponseJson();Bt(la,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(b)),d(b);break;case $m.TIMEOUT:Bt(la,`RPC '${t}' ${c} timed out`),m(new Ft(Vt.DEADLINE_EXCEEDED,"Request time out"));break;case $m.HTTP_ERROR:const R=_.getStatus();if(Bt(la,`RPC '${t}' ${c} failed with status:`,R,"response text:",_.getResponseText()),R>0){let U=_.getResponseJson();Array.isArray(U)&&(U=U[0]);const w=U==null?void 0:U.error;if(w&&w.status&&w.message){const O=function(P){const K=P.toLowerCase().replace(/_/g,"-");return Object.values(Vt).indexOf(K)>=0?K:Vt.UNKNOWN}(w.status);m(new Ft(O,w.message))}else m(new Ft(Vt.UNKNOWN,"Server responded with status "+_.getStatus()))}else m(new Ft(Vt.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{Bt(la,`RPC '${t}' ${c} completed.`)}});const v=JSON.stringify(u);Bt(la,`RPC '${t}' ${c} sending request:`,u),_.send(n,"POST",v,r,15)})}qo(t,n,r){const u=t1(),c=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=hE(),m=cE(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(_.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(_.useFetchStreams=!0),this.Bo(_.initMessageHeaders,n,r),_.encodeInitMessageHeaders=!0;const b=c.join("");Bt(la,`Creating RPC '${t}' stream ${u}: ${b}`,_);const R=d.createWebChannel(b,_);let U=!1,w=!1;const O=new wA({Eo:P=>{w?Bt(la,`Not sending because RPC '${t}' stream ${u} is closed:`,P):(U||(Bt(la,`Opening RPC '${t}' stream ${u} transport.`),R.open(),U=!0),Bt(la,`RPC '${t}' stream ${u} sending:`,P),R.send(P))},Ao:()=>R.close()}),I=(P,K,C)=>{P.listen(K,M=>{try{C(M)}catch(G){setTimeout(()=>{throw G},0)}})};return I(R,Jd.EventType.OPEN,()=>{w||(Bt(la,`RPC '${t}' stream ${u} transport opened.`),O.So())}),I(R,Jd.EventType.CLOSE,()=>{w||(w=!0,Bt(la,`RPC '${t}' stream ${u} transport closed`),O.Do())}),I(R,Jd.EventType.ERROR,P=>{w||(w=!0,Yh(la,`RPC '${t}' stream ${u} transport errored:`,P),O.Do(new Ft(Vt.UNAVAILABLE,"The operation could not be completed")))}),I(R,Jd.EventType.MESSAGE,P=>{var K;if(!w){const C=P.data[0];We(!!C);const M=C,G=(M==null?void 0:M.error)||((K=M[0])===null||K===void 0?void 0:K.error);if(G){Bt(la,`RPC '${t}' stream ${u} received error:`,G);const H=G.status;let Y=function(D){const x=li[D];if(x!==void 0)return LE(x)}(H),q=G.message;Y===void 0&&(Y=Vt.INTERNAL,q="Unknown error status: "+H+" with message "+G.message),w=!0,O.Do(new Ft(Y,q)),R.close()}else Bt(la,`RPC '${t}' stream ${u} received:`,C),O.vo(C)}}),I(m,uE.STAT_EVENT,P=>{P.stat===m1.PROXY?Bt(la,`RPC '${t}' stream ${u} detected buffering proxy`):P.stat===m1.NOPROXY&&Bt(la,`RPC '${t}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{O.bo()},0),O}}function e1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(a){return new L7(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(t,n,r=1e3,u=1.5,c=6e4){this.li=t,this.timerId=n,this.Qo=r,this.Ko=u,this.$o=c,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),u=Math.max(0,n-r);u>0&&Bt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,u,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(t,n,r,u,c,d,m,_){this.li=t,this.Yo=r,this.Zo=u,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=_,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new QE(t,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():n&&n.code===Vt.RESOURCE_EXHAUSTED?(Co(n.toString()),Co("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===Vt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(n)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,u])=>{this.Xo===n&&this.I_(r,u)},r=>{t(()=>{const u=new Ft(Vt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(u)})})}I_(t,n){const r=this.T_(this.Xo);this.stream=this.E_(t,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(u=>{r(()=>this.d_(u))}),this.stream.onMessage(u=>{r(()=>++this.n_==1?this.A_(u):this.onNext(u))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(t){return Bt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return n=>{this.li.enqueueAndForget(()=>this.Xo===t?n():(Bt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OA extends ZE{constructor(t,n,r,u,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,u,d),this.serializer=c}E_(t,n){return this.connection.qo("Listen",t,n)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();const n=B7(this.serializer,t),r=function(c){if(!("targetChange"in c))return se.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?se.min():d.readTime?xl(d.readTime):se.min()}(t);return this.listener.R_(n,r)}V_(t){const n={};n.database=A1(this.serializer),n.addTarget=function(c,d){let m;const _=d.target;if(m=v1(_)?{documents:H7(c,_)}:{query:q7(c,_).ct},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=BE(c,d.resumeToken);const v=S1(c,d.expectedCount);v!==null&&(m.expectedCount=v)}else if(d.snapshotVersion.compareTo(se.min())>0){m.readTime=_0(c,d.snapshotVersion.toTimestamp());const v=S1(c,d.expectedCount);v!==null&&(m.expectedCount=v)}return m}(this.serializer,t);const r=F7(this.serializer,t);r&&(n.labels=r),this.c_(n)}m_(t){const n={};n.database=A1(this.serializer),n.removeTarget=t,this.c_(n)}}class MA extends ZE{constructor(t,n,r,u,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,u,d),this.serializer=c}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(t,n){return this.connection.qo("Write",t,n)}A_(t){return We(!!t.streamToken),this.lastStreamToken=t.streamToken,We(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){We(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const n=k7(t.writeResults,t.commitTime),r=xl(t.commitTime);return this.listener.y_(r,n)}w_(){const t={};t.database=A1(this.serializer),this.c_(t)}g_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>G7(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA extends class{}{constructor(t,n,r,u){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=u,this.S_=!1}b_(){if(this.S_)throw new Ft(Vt.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,n,r,u){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Oo(t,T1(n,r),u,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ft(Vt.UNKNOWN,c.toString())})}ko(t,n,r,u,c){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.ko(t,T1(n,r),u,d,m,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ft(Vt.UNKNOWN,d.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class VA{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Co(n),this.C_=!1):Bt("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(t,n,r,u,c){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=c,this.Q_.uo(d=>{r.enqueueAndForget(async()=>{qc(this)&&(Bt("RemoteStore","Restarting streams for network reachability change."),await async function(_){const v=le(_);v.k_.add(4),await Ag(v),v.K_.set("Unknown"),v.k_.delete(4),await q0(v)}(this))})}),this.K_=new VA(r,u)}}async function q0(a){if(qc(a))for(const t of a.q_)await t(!0)}async function Ag(a){for(const t of a.q_)await t(!1)}function WE(a,t){const n=le(a);n.L_.has(t.targetId)||(n.L_.set(t.targetId,t),dy(n)?fy(n):rf(n).s_()&&hy(n,t))}function cy(a,t){const n=le(a),r=rf(n);n.L_.delete(t),r.s_()&&JE(n,t),n.L_.size===0&&(r.s_()?r.a_():qc(n)&&n.K_.set("Unknown"))}function hy(a,t){if(a.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(se.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}rf(a).V_(t)}function JE(a,t){a.U_.xe(t),rf(a).m_(t)}function fy(a){a.U_=new x7({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>a.L_.get(t)||null,nt:()=>a.datastore.serializer.databaseId}),rf(a).start(),a.K_.F_()}function dy(a){return qc(a)&&!rf(a).i_()&&a.L_.size>0}function qc(a){return le(a).k_.size===0}function $E(a){a.U_=void 0}async function IA(a){a.K_.set("Online")}async function LA(a){a.L_.forEach((t,n)=>{hy(a,t)})}async function zA(a,t){$E(a),dy(a)?(a.K_.O_(t),fy(a)):a.K_.set("Unknown")}async function PA(a,t,n){if(a.K_.set("Online"),t instanceof PE&&t.state===2&&t.cause)try{await async function(u,c){const d=c.cause;for(const m of c.targetIds)u.L_.has(m)&&(await u.remoteSyncer.rejectListen(m,d),u.L_.delete(m),u.U_.removeTarget(m))}(a,t)}catch(r){Bt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await E0(a,r)}else if(t instanceof i0?a.U_.$e(t):t instanceof zE?a.U_.Je(t):a.U_.Ge(t),!n.isEqual(se.min()))try{const r=await XE(a.localStore);n.compareTo(r)>=0&&await function(c,d){const m=c.U_.it(d);return m.targetChanges.forEach((_,v)=>{if(_.resumeToken.approximateByteSize()>0){const b=c.L_.get(v);b&&c.L_.set(v,b.withResumeToken(_.resumeToken,d))}}),m.targetMismatches.forEach((_,v)=>{const b=c.L_.get(_);if(!b)return;c.L_.set(_,b.withResumeToken(qi.EMPTY_BYTE_STRING,b.snapshotVersion)),JE(c,_);const R=new Au(b.target,_,v,b.sequenceNumber);hy(c,R)}),c.remoteSyncer.applyRemoteEvent(m)}(a,n)}catch(r){Bt("RemoteStore","Failed to raise snapshot:",r),await E0(a,r)}}async function E0(a,t,n){if(!sf(t))throw t;a.k_.add(1),await Ag(a),a.K_.set("Offline"),n||(n=()=>XE(a.localStore)),a.asyncQueue.enqueueRetryable(async()=>{Bt("RemoteStore","Retrying IndexedDB access"),await n(),a.k_.delete(1),await q0(a)})}function t3(a,t){return t().catch(n=>E0(a,n,t))}async function j0(a){const t=le(a),n=Iu(t);let r=t.B_.length>0?t.B_[t.B_.length-1].batchId:-1;for(;BA(t);)try{const u=await TA(t.localStore,r);if(u===null){t.B_.length===0&&n.a_();break}r=u.batchId,GA(t,u)}catch(u){await E0(t,u)}e3(t)&&n3(t)}function BA(a){return qc(a)&&a.B_.length<10}function GA(a,t){a.B_.push(t);const n=Iu(a);n.s_()&&n.f_&&n.g_(t.mutations)}function e3(a){return qc(a)&&!Iu(a).i_()&&a.B_.length>0}function n3(a){Iu(a).start()}async function kA(a){Iu(a).w_()}async function HA(a){const t=Iu(a);for(const n of a.B_)t.g_(n.mutations)}async function qA(a,t,n){const r=a.B_.shift(),u=ay.from(r,t,n);await t3(a,()=>a.remoteSyncer.applySuccessfulWrite(u)),await j0(a)}async function jA(a,t){t&&Iu(a).f_&&await async function(r,u){if(function(d){return N7(d)&&d!==Vt.ABORTED}(u.code)){const c=r.B_.shift();Iu(r).__(),await t3(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,u)),await j0(r)}}(a,t),e3(a)&&n3(a)}async function kv(a,t){const n=le(a);n.asyncQueue.verifyOperationInProgress(),Bt("RemoteStore","RemoteStore received new credentials");const r=qc(n);n.k_.add(3),await Ag(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await q0(n)}async function FA(a,t){const n=le(a);t?(n.k_.delete(2),await q0(n)):t||(n.k_.add(2),await Ag(n),n.K_.set("Unknown"))}function rf(a){return a.W_||(a.W_=function(n,r,u){const c=le(n);return c.b_(),new OA(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(a.datastore,a.asyncQueue,{Ro:IA.bind(null,a),mo:LA.bind(null,a),po:zA.bind(null,a),R_:PA.bind(null,a)}),a.q_.push(async t=>{t?(a.W_.__(),dy(a)?fy(a):a.K_.set("Unknown")):(await a.W_.stop(),$E(a))})),a.W_}function Iu(a){return a.G_||(a.G_=function(n,r,u){const c=le(n);return c.b_(),new MA(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(a.datastore,a.asyncQueue,{Ro:()=>Promise.resolve(),mo:kA.bind(null,a),po:jA.bind(null,a),p_:HA.bind(null,a),y_:qA.bind(null,a)}),a.q_.push(async t=>{t?(a.G_.__(),await j0(a)):(await a.G_.stop(),a.B_.length>0&&(Bt("RemoteStore",`Stopping write stream with ${a.B_.length} pending writes`),a.B_=[]))})),a.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(t,n,r,u,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=u,this.removalCallback=c,this.deferred=new Nu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,u,c){const d=Date.now()+r,m=new gy(t,n,d,u,c);return m.start(r),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ft(Vt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function my(a,t){if(Co("AsyncQueue",`${t}: ${a}`),sf(a))return new Ft(Vt.UNAVAILABLE,`${t}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{static emptySet(t){return new Fh(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Xt.comparator(n.key,r.key):(n,r)=>Xt.comparator(n.key,r.key),this.keyedMap=$d(),this.sortedSet=new Ln(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Fh)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=r.getNext().key;if(!u.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Fh;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.z_=new Ln(Xt.comparator)}track(t){const n=t.doc.key,r=this.z_.get(n);r?t.type!==0&&r.type===3?this.z_=this.z_.insert(n,t):t.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.z_=this.z_.remove(n):t.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):te():this.z_=this.z_.insert(n,t)}j_(){const t=[];return this.z_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Jh{constructor(t,n,r,u,c,d,m,_,v){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=u,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=_,this.hasCachedResults=v}static fromInitialDocuments(t,n,r,u,c){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new Jh(t,n,Fh.emptySet(n),d,r,u,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&z0(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==r[u].type||!n[u].doc.isEqual(r[u].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}}class YA{constructor(){this.queries=qv(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const u=le(n),c=u.queries;u.queries=qv(),c.forEach((d,m)=>{for(const _ of m.J_)_.onError(r)})})(this,new Ft(Vt.ABORTED,"Firestore shutting down"))}}function qv(){return new kc(a=>AE(a),z0)}async function XA(a,t){const n=le(a);let r=3;const u=t.query;let c=n.queries.get(u);c?!c.Y_()&&t.Z_()&&(r=2):(c=new KA,r=t.Z_()?0:1);try{switch(r){case 0:c.H_=await n.onListen(u,!0);break;case 1:c.H_=await n.onListen(u,!1);break;case 2:await n.onFirstRemoteStoreListen(u)}}catch(d){const m=my(d,`Initialization of query '${Ph(t.query)}' failed`);return void t.onError(m)}n.queries.set(u,c),c.J_.push(t),t.ea(n.onlineState),c.H_&&t.ta(c.H_)&&py(n)}async function QA(a,t){const n=le(a),r=t.query;let u=3;const c=n.queries.get(r);if(c){const d=c.J_.indexOf(t);d>=0&&(c.J_.splice(d,1),c.J_.length===0?u=t.Z_()?0:1:!c.Y_()&&t.Z_()&&(u=2))}switch(u){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ZA(a,t){const n=le(a);let r=!1;for(const u of t){const c=u.query,d=n.queries.get(c);if(d){for(const m of d.J_)m.ta(u)&&(r=!0);d.H_=u}}r&&py(n)}function WA(a,t,n){const r=le(a),u=r.queries.get(t);if(u)for(const c of u.J_)c.onError(n);r.queries.delete(t)}function py(a){a.X_.forEach(t=>{t.next()})}var C1,jv;(jv=C1||(C1={})).na="default",jv.Cache="cache";class JA{constructor(t,n,r){this.query=t,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(t){if(!this.options.includeMetadataChanges){const r=[];for(const u of t.docChanges)u.type!==3&&r.push(u);t=new Jh(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ia?this.oa(t)&&(this.ra.next(t),n=!0):this._a(t,this.onlineState)&&(this.aa(t),n=!0),this.sa=t,n}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),n=!0),n}_a(t,n){if(!t.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}oa(t){if(t.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(t){t=Jh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==C1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(t){this.key=t}}class a3{constructor(t){this.key=t}}class $A{constructor(t,n){this.query=t,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ne(),this.mutatedKeys=Ne(),this.Va=RE(t),this.ma=new Fh(this.Va)}get fa(){return this.Ea}ga(t,n){const r=n?n.pa:new Hv,u=n?n.ma:this.ma;let c=n?n.mutatedKeys:this.mutatedKeys,d=u,m=!1;const _=this.query.limitType==="F"&&u.size===this.query.limit?u.last():null,v=this.query.limitType==="L"&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal((b,R)=>{const U=u.get(b),w=P0(this.query,R)?R:null,O=!!U&&this.mutatedKeys.has(U.key),I=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let P=!1;U&&w?U.data.isEqual(w.data)?O!==I&&(r.track({type:3,doc:w}),P=!0):this.ya(U,w)||(r.track({type:2,doc:w}),P=!0,(_&&this.Va(w,_)>0||v&&this.Va(w,v)<0)&&(m=!0)):!U&&w?(r.track({type:0,doc:w}),P=!0):U&&!w&&(r.track({type:1,doc:U}),P=!0,(_||v)&&(m=!0)),P&&(w?(d=d.add(w),c=I?c.add(b):c.delete(b)):(d=d.delete(b),c=c.delete(b)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),c=c.delete(b.key),r.track({type:1,doc:b})}return{ma:d,pa:r,ss:m,mutatedKeys:c}}ya(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,u){const c=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;const d=t.pa.j_();d.sort((b,R)=>function(w,O){const I=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return I(w)-I(O)}(b.type,R.type)||this.Va(b.doc,R.doc)),this.wa(r),u=u!=null&&u;const m=n&&!u?this.Sa():[],_=this.Ra.size===0&&this.current&&!u?1:0,v=_!==this.Aa;return this.Aa=_,d.length!==0||v?{snapshot:new Jh(this.query,t.ma,c,d,t.mutatedKeys,_===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:m}:{ba:m}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Hv,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.Ea.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=t.current)}Sa(){if(!this.current)return[];const t=this.Ra;this.Ra=Ne(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return t.forEach(r=>{this.Ra.has(r)||n.push(new a3(r))}),this.Ra.forEach(r=>{t.has(r)||n.push(new i3(r))}),n}va(t){this.Ea=t.Es,this.Ra=Ne();const n=this.ga(t.documents);return this.applyChanges(n,!0)}Ca(){return Jh.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class tR{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class eR{constructor(t){this.key=t,this.Fa=!1}}class nR{constructor(t,n,r,u,c,d){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=u,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Ma={},this.xa=new kc(m=>AE(m),z0),this.Oa=new Map,this.Na=new Set,this.Ba=new Ln(Xt.comparator),this.La=new Map,this.ka=new ly,this.qa={},this.Qa=new Map,this.Ka=Wh.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function iR(a,t,n=!0){const r=c3(a);let u;const c=r.xa.get(t);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),u=c.view.Ca()):u=await s3(r,t,n,!0),u}async function aR(a,t){const n=c3(a);await s3(n,t,!0,!1)}async function s3(a,t,n,r){const u=await bA(a.localStore,Ol(t)),c=u.targetId,d=a.sharedClientState.addLocalQueryTarget(c,n);let m;return r&&(m=await sR(a,t,c,d==="current",u.resumeToken)),a.isPrimaryClient&&n&&WE(a.remoteStore,u),m}async function sR(a,t,n,r,u){a.Ua=(R,U,w)=>async function(I,P,K,C){let M=P.view.ga(K);M.ss&&(M=await Pv(I.localStore,P.query,!1).then(({documents:q})=>P.view.ga(q,M)));const G=C&&C.targetChanges.get(P.targetId),H=C&&C.targetMismatches.get(P.targetId)!=null,Y=P.view.applyChanges(M,I.isPrimaryClient,G,H);return Kv(I,P.targetId,Y.ba),Y.snapshot}(a,R,U,w);const c=await Pv(a.localStore,t,!0),d=new $A(t,c.Es),m=d.ga(c.documents),_=bg.createSynthesizedTargetChangeForCurrentChange(n,r&&a.onlineState!=="Offline",u),v=d.applyChanges(m,a.isPrimaryClient,_);Kv(a,n,v.ba);const b=new tR(t,n,d);return a.xa.set(t,b),a.Oa.has(n)?a.Oa.get(n).push(t):a.Oa.set(n,[t]),v.snapshot}async function rR(a,t,n){const r=le(a),u=r.xa.get(t),c=r.Oa.get(u.targetId);if(c.length>1)return r.Oa.set(u.targetId,c.filter(d=>!z0(d,t))),void r.xa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(u.targetId),r.sharedClientState.isActiveQueryTarget(u.targetId)||await R1(r.localStore,u.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(u.targetId),n&&cy(r.remoteStore,u.targetId),D1(r,u.targetId)}).catch(af)):(D1(r,u.targetId),await R1(r.localStore,u.targetId,!0))}async function lR(a,t){const n=le(a),r=n.xa.get(t),u=n.Oa.get(r.targetId);n.isPrimaryClient&&u.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),cy(n.remoteStore,r.targetId))}async function oR(a,t,n){const r=mR(a);try{const u=await function(d,m){const _=le(d),v=fi.now(),b=m.reduce((w,O)=>w.add(O.key),Ne());let R,U;return _.persistence.runTransaction("Locally write mutations","readwrite",w=>{let O=Do(),I=Ne();return _.hs.getEntries(w,b).next(P=>{O=P,O.forEach((K,C)=>{C.isValidDocument()||(I=I.add(K))})}).next(()=>_.localDocuments.getOverlayedDocuments(w,O)).next(P=>{R=P;const K=[];for(const C of m){const M=A7(C,R.get(C.key).overlayedDocument);M!=null&&K.push(new Hc(C.key,M,pE(M.value.mapValue),Ml.exists(!0)))}return _.mutationQueue.addMutationBatch(w,v,K,m)}).next(P=>{U=P;const K=P.applyToLocalDocumentSet(R,I);return _.documentOverlayCache.saveOverlays(w,P.batchId,K)})}).then(()=>({batchId:U.batchId,changes:DE(R)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(u.batchId),function(d,m,_){let v=d.qa[d.currentUser.toKey()];v||(v=new Ln(Ve)),v=v.insert(m,_),d.qa[d.currentUser.toKey()]=v}(r,u.batchId,n),await Rg(r,u.changes),await j0(r.remoteStore)}catch(u){const c=my(u,"Failed to persist write");n.reject(c)}}async function r3(a,t){const n=le(a);try{const r=await EA(n.localStore,t);t.targetChanges.forEach((u,c)=>{const d=n.La.get(c);d&&(We(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?d.Fa=!0:u.modifiedDocuments.size>0?We(d.Fa):u.removedDocuments.size>0&&(We(d.Fa),d.Fa=!1))}),await Rg(n,r,t)}catch(r){await af(r)}}function Fv(a,t,n){const r=le(a);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const u=[];r.xa.forEach((c,d)=>{const m=d.view.ea(t);m.snapshot&&u.push(m.snapshot)}),function(d,m){const _=le(d);_.onlineState=m;let v=!1;_.queries.forEach((b,R)=>{for(const U of R.J_)U.ea(m)&&(v=!0)}),v&&py(_)}(r.eventManager,t),u.length&&r.Ma.R_(u),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function uR(a,t,n){const r=le(a);r.sharedClientState.updateQueryState(t,"rejected",n);const u=r.La.get(t),c=u&&u.key;if(c){let d=new Ln(Xt.comparator);d=d.insert(c,ca.newNoDocument(c,se.min()));const m=Ne().add(c),_=new k0(se.min(),new Map,new Ln(Ve),d,m);await r3(r,_),r.Ba=r.Ba.remove(c),r.La.delete(t),yy(r)}else await R1(r.localStore,t,!1).then(()=>D1(r,t,n)).catch(af)}async function cR(a,t){const n=le(a),r=t.batch.batchId;try{const u=await vA(n.localStore,t);o3(n,r,null),l3(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Rg(n,u)}catch(u){await af(u)}}async function hR(a,t,n){const r=le(a);try{const u=await function(d,m){const _=le(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let b;return _.mutationQueue.lookupMutationBatch(v,m).next(R=>(We(R!==null),b=R.keys(),_.mutationQueue.removeMutationBatch(v,R))).next(()=>_.mutationQueue.performConsistencyCheck(v)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(v,b,m)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,b)).next(()=>_.localDocuments.getDocuments(v,b))})}(r.localStore,t);o3(r,t,n),l3(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Rg(r,u)}catch(u){await af(u)}}function l3(a,t){(a.Qa.get(t)||[]).forEach(n=>{n.resolve()}),a.Qa.delete(t)}function o3(a,t,n){const r=le(a);let u=r.qa[r.currentUser.toKey()];if(u){const c=u.get(t);c&&(n?c.reject(n):c.resolve(),u=u.remove(t)),r.qa[r.currentUser.toKey()]=u}}function D1(a,t,n=null){a.sharedClientState.removeLocalQueryTarget(t);for(const r of a.Oa.get(t))a.xa.delete(r),n&&a.Ma.Wa(r,n);a.Oa.delete(t),a.isPrimaryClient&&a.ka.yr(t).forEach(r=>{a.ka.containsKey(r)||u3(a,r)})}function u3(a,t){a.Na.delete(t.path.canonicalString());const n=a.Ba.get(t);n!==null&&(cy(a.remoteStore,n),a.Ba=a.Ba.remove(t),a.La.delete(n),yy(a))}function Kv(a,t,n){for(const r of n)r instanceof i3?(a.ka.addReference(r.key,t),fR(a,r)):r instanceof a3?(Bt("SyncEngine","Document no longer in limbo: "+r.key),a.ka.removeReference(r.key,t),a.ka.containsKey(r.key)||u3(a,r.key)):te()}function fR(a,t){const n=t.key,r=n.path.canonicalString();a.Ba.get(n)||a.Na.has(r)||(Bt("SyncEngine","New document in limbo: "+n),a.Na.add(r),yy(a))}function yy(a){for(;a.Na.size>0&&a.Ba.size<a.maxConcurrentLimboResolutions;){const t=a.Na.values().next().value;a.Na.delete(t);const n=new Xt(An.fromString(t)),r=a.Ka.next();a.La.set(r,new eR(n)),a.Ba=a.Ba.insert(n,r),WE(a.remoteStore,new Au(Ol(bE(n.path)),r,"TargetPurposeLimboResolution",V0.oe))}}async function Rg(a,t,n){const r=le(a),u=[],c=[],d=[];r.xa.isEmpty()||(r.xa.forEach((m,_)=>{d.push(r.Ua(_,t,n).then(v=>{var b;if((v||n)&&r.isPrimaryClient){const R=v?!v.fromCache:(b=n==null?void 0:n.targetChanges.get(_.targetId))===null||b===void 0?void 0:b.current;r.sharedClientState.updateQueryState(_.targetId,R?"current":"not-current")}if(v){u.push(v);const R=uy.zi(_.targetId,v);c.push(R)}}))}),await Promise.all(d),r.Ma.R_(u),await async function(_,v){const b=le(_);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>wt.forEach(v,U=>wt.forEach(U.Wi,w=>b.persistence.referenceDelegate.addReference(R,U.targetId,w)).next(()=>wt.forEach(U.Gi,w=>b.persistence.referenceDelegate.removeReference(R,U.targetId,w)))))}catch(R){if(!sf(R))throw R;Bt("LocalStore","Failed to update sequence numbers: "+R)}for(const R of v){const U=R.targetId;if(!R.fromCache){const w=b.us.get(U),O=w.snapshotVersion,I=w.withLastLimboFreeSnapshotVersion(O);b.us=b.us.insert(U,I)}}}(r.localStore,c))}async function dR(a,t){const n=le(a);if(!n.currentUser.isEqual(t)){Bt("SyncEngine","User change. New user:",t.toKey());const r=await YE(n.localStore,t);n.currentUser=t,function(c,d){c.Qa.forEach(m=>{m.forEach(_=>{_.reject(new Ft(Vt.CANCELLED,d))})}),c.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Rg(n,r.Ts)}}function gR(a,t){const n=le(a),r=n.La.get(t);if(r&&r.Fa)return Ne().add(r.key);{let u=Ne();const c=n.Oa.get(t);if(!c)return u;for(const d of c){const m=n.xa.get(d);u=u.unionWith(m.view.fa)}return u}}function c3(a){const t=le(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=r3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=uR.bind(null,t),t.Ma.R_=ZA.bind(null,t.eventManager),t.Ma.Wa=WA.bind(null,t.eventManager),t}function mR(a){const t=le(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=cR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hR.bind(null,t),t}class S0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=H0(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,n){return null}Ya(t,n){return null}Ha(t){return _A(this.persistence,new pA,t.initialUser,this.serializer)}ja(t){return new KE(oy.ei,this.serializer)}za(t){return new RA}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}S0.provider={build:()=>new S0};class pR extends S0{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,n){We(this.persistence.referenceDelegate instanceof v0);const r=this.persistence.referenceDelegate.garbageCollector;return new eA(r,t.asyncQueue,n)}ja(t){const n=this.cacheSizeBytes!==void 0?Ja.withCacheSize(this.cacheSizeBytes):Ja.DEFAULT;return new KE(r=>v0.ei(r,n),this.serializer)}}class w1{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Fv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dR.bind(null,this.syncEngine),await FA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new YA}()}createDatastore(t){const n=H0(t.databaseInfo.databaseId),r=function(c){return new NA(c)}(t.databaseInfo);return function(c,d,m,_){return new xA(c,d,m,_)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,u,c,d,m){return new UA(r,u,c,d,m)}(this.localStore,this.datastore,t.asyncQueue,n=>Fv(this.syncEngine,n,0),function(){return Gv.p()?new Gv:new CA}())}createSyncEngine(t,n){return function(u,c,d,m,_,v,b){const R=new nR(u,c,d,m,_,v);return b&&(R.$a=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(u){const c=le(u);Bt("RemoteStore","RemoteStore shutting down."),c.k_.add(5),await Ag(c),c.Q_.shutdown(),c.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}w1.provider={build:()=>new w1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):Co("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(t,n,r,u,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=u,this.user=ua.UNAUTHENTICATED,this.clientId=dE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,async d=>{Bt("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(r,d=>(Bt("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Nu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=my(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function n1(a,t){a.asyncQueue.verifyOperationInProgress(),Bt("FirestoreClient","Initializing OfflineComponentProvider");const n=a.configuration;await t.initialize(n);let r=n.initialUser;a.setCredentialChangeListener(async u=>{r.isEqual(u)||(await YE(t.localStore,u),r=u)}),t.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=t}async function Yv(a,t){a.asyncQueue.verifyOperationInProgress();const n=await vR(a);Bt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,a.configuration),a.setCredentialChangeListener(r=>kv(t.remoteStore,r)),a.setAppCheckTokenChangeListener((r,u)=>kv(t.remoteStore,u)),a._onlineComponents=t}async function vR(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){Bt("FirestoreClient","Using user provided OfflineComponentProvider");try{await n1(a,a._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(u){return u.name==="FirebaseError"?u.code===Vt.FAILED_PRECONDITION||u.code===Vt.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11}(n))throw n;Yh("Error using user provided cache. Falling back to memory cache: "+n),await n1(a,new S0)}}else Bt("FirestoreClient","Using default OfflineComponentProvider"),await n1(a,new pR(void 0));return a._offlineComponents}async function h3(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(Bt("FirestoreClient","Using user provided OnlineComponentProvider"),await Yv(a,a._uninitializedComponentsProvider._online)):(Bt("FirestoreClient","Using default OnlineComponentProvider"),await Yv(a,new w1))),a._onlineComponents}function ER(a){return h3(a).then(t=>t.syncEngine)}async function SR(a){const t=await h3(a),n=t.eventManager;return n.onListen=iR.bind(null,t.syncEngine),n.onUnlisten=rR.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=aR.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=lR.bind(null,t.syncEngine),n}function TR(a,t,n={}){const r=new Nu;return a.asyncQueue.enqueueAndForget(async()=>function(c,d,m,_,v){const b=new yR({next:U=>{b.eu(),d.enqueueAndForget(()=>QA(c,R)),U.fromCache&&_.source==="server"?v.reject(new Ft(Vt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(U)},error:U=>v.reject(U)}),R=new JA(m,b,{includeMetadataChanges:!0,ua:!0});return XA(c,R)}(await SR(a),a.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(a){const t={};return a.timeoutSeconds!==void 0&&(t.timeoutSeconds=a.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(a,t,n){if(!n)throw new Ft(Vt.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function bR(a,t,n,r){if(t===!0&&r===!0)throw new Ft(Vt.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function Qv(a){if(!Xt.isDocumentKey(a))throw new Ft(Vt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Zv(a){if(Xt.isDocumentKey(a))throw new Ft(Vt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function _y(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(a);return t?`a custom ${t} object`:"an object"}}return typeof a=="function"?"a function":te()}function mg(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new Ft(Vt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_y(a);throw new Ft(Vt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Ft(Vt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ft(Vt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}bR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=f3((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new Ft(Vt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Ft(Vt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Ft(Vt.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,u){return r.timeoutSeconds===u.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class F0{constructor(t,n,r,u){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ft(Vt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ft(Vt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wv(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Nb;switch(r.type){case"firstParty":return new Vb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ft(Vt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xv.get(n);r&&(Bt("ComponentProvider","Removing Datastore"),Xv.delete(n),r.terminate())}(this),Promise.resolve()}}function AR(a,t,n,r={}){var u;const c=(a=mg(a,F0))._getSettings(),d=`${t}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==d&&Yh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},c),{host:d,ssl:!1})),r.mockUserToken){let m,_;if(typeof r.mockUserToken=="string")m=r.mockUserToken,_=ua.MOCK_USER;else{m=j6(r.mockUserToken,(u=a._app)===null||u===void 0?void 0:u.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Ft(Vt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new ua(v)}a._authCredentials=new Ob(new fE(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new K0(this.firestore,t,this._query)}}class Vr{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ou(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Vr(this.firestore,t,this._key)}}class Ou extends K0{constructor(t,n,r){super(t,n,bE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Vr(this.firestore,null,new Xt(t))}withConverter(t){return new Ou(this.firestore,t,this._path)}}function Jv(a,t,...n){if(a=$a(a),d3("collection","path",t),a instanceof F0){const r=An.fromString(t,...n);return Zv(r),new Ou(a,null,r)}{if(!(a instanceof Vr||a instanceof Ou))throw new Ft(Vt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(An.fromString(t,...n));return Zv(r),new Ou(a.firestore,null,r)}}function g3(a,t,...n){if(a=$a(a),arguments.length===1&&(t=dE.newId()),d3("doc","path",t),a instanceof F0){const r=An.fromString(t,...n);return Qv(r),new Vr(a,null,new Xt(r))}{if(!(a instanceof Vr||a instanceof Ou))throw new Ft(Vt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(An.fromString(t,...n));return Qv(r),new Vr(a.firestore,a instanceof Ou?a.converter:null,new Xt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(t=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new QE(this,"async_queue_retry"),this.fu=()=>{const r=e1();r&&Bt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=t;const n=e1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.du){this.du=!0,this.Vu=t||!1;const n=e1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.du)return new Promise(()=>{});const n=new Nu;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!sf(t))throw t;Bt("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const n=this.gu.then(()=>(this.Ru=!0,t().catch(r=>{this.Au=r,this.Ru=!1;const u=function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),m}(r);throw Co("INTERNAL UNHANDLED ERROR: ",u),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(t,n,r){this.pu(),this.mu.indexOf(t)>-1&&(n=0);const u=gy.createAndSchedule(this,t,n,r,c=>this.Su(c));return this.Eu.push(u),u}pu(){this.Au&&te()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const n of this.Eu)if(n.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const n=this.Eu.indexOf(t);this.Eu.splice(n,1)}}class Y0 extends F0{constructor(t,n,r,u){super(t,n,r,u),this.type="firestore",this._queue=new $v,this._persistenceKey=(u==null?void 0:u.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new $v(t),this._firestoreClient=void 0,await t}}}function m3(a,t){const n=typeof a=="object"?a:T4(),r=typeof a=="string"?a:"(default)",u=k1(n,"firestore").getImmediate({identifier:r});if(!u._initialized){const c=H6("firestore");c&&AR(u,...c)}return u}function p3(a){if(a._terminated)throw new Ft(Vt.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||RR(a),a._firestoreClient}function RR(a){var t,n,r;const u=a._freezeSettings(),c=function(m,_,v,b){return new Xb(m,_,v,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,f3(b.experimentalLongPollingOptions),b.useFetchStreams)}(a._databaseId,((t=a._app)===null||t===void 0?void 0:t.options.appId)||"",a._persistenceKey,u);a._componentsProvider||!((n=u.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=u.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(a._componentsProvider={_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider}),a._firestoreClient=new _R(a._authCredentials,a._appCheckCredentials,a._queue,c,a._componentsProvider&&function(m){const _=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(_),_online:_}}(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(t){this._byteString=t}static fromBase64String(t){try{return new $h(qi.fromBase64String(t))}catch(n){throw new Ft(Vt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new $h(qi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Ft(Vt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Ft(Vt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ft(Vt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ve(this._lat,t._lat)||Ve(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,u){if(r.length!==u.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==u[c])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=/^__.*__$/;class DR{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Hc(t,this.data,this.fieldMask,n,this.fieldTransforms):new Tg(t,this.data,n,this.fieldTransforms)}}function y3(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class by{constructor(t,n,r,u,c,d){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=u,c===void 0&&this.Fu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new by(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),u=this.xu({path:r,Nu:!1});return u.Bu(t),u}Lu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),u=this.xu({path:r,Nu:!1});return u.Fu(),u}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return T0(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Bu(this.path.get(t))}Bu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(y3(this.Mu)&&CR.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class wR{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||H0(t)}$u(t,n,r,u=!1){return new by({Mu:t,methodName:n,Ku:r,path:Hi.emptyPath(),Nu:!1,Qu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function NR(a){const t=a._freezeSettings(),n=H0(a._databaseId);return new wR(a._databaseId,!!t.ignoreUndefinedProperties,n)}function OR(a,t,n,r,u,c={}){const d=a.$u(c.merge||c.mergeFields?2:0,t,n,u);S3("Data must be an object, but it was:",d,r);const m=v3(r,d);let _,v;if(c.merge)_=new xr(d.fieldMask),v=d.fieldTransforms;else if(c.mergeFields){const b=[];for(const R of c.mergeFields){const U=MR(t,R,n);if(!d.contains(U))throw new Ft(Vt.INVALID_ARGUMENT,`Field '${U}' is specified in your field mask but missing from your input data.`);VR(b,U)||b.push(U)}_=new xr(b),v=d.fieldTransforms.filter(R=>_.covers(R.field))}else _=null,v=d.fieldTransforms;return new DR(new qs(m),_,v)}class Ay extends Ey{_toFieldTransform(t){return new E7(t.path,new fg)}isEqual(t){return t instanceof Ay}}function _3(a,t){if(E3(a=$a(a)))return S3("Unsupported field value:",t,a),v3(a,t);if(a instanceof Ey)return function(r,u){if(!y3(u.Mu))throw u.qu(`${r._methodName}() can only be used with update() and set()`);if(!u.path)throw u.qu(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(u);c&&u.fieldTransforms.push(c)}(a,t),null;if(a===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(r,u){const c=[];let d=0;for(const m of r){let _=_3(m,u.ku(d));_==null&&(_={nullValue:"NULL_VALUE"}),c.push(_),d++}return{arrayValue:{values:c}}}(a,t)}return function(r,u){if((r=$a(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return y7(u.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=fi.fromDate(r);return{timestampValue:_0(u.serializer,c)}}if(r instanceof fi){const c=new fi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_0(u.serializer,c)}}if(r instanceof Sy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $h)return{bytesValue:BE(u.serializer,r._byteString)};if(r instanceof Vr){const c=u.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw u.qu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:ry(r.firestore._databaseId||u.databaseId,r._key.path)}}if(r instanceof Ty)return function(d,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map(_=>{if(typeof _!="number")throw m.qu("VectorValues must only contain numeric values.");return ny(m.serializer,_)})}}}}}}(r,u);throw u.qu(`Unsupported field value: ${_y(r)}`)}(a,t)}function v3(a,t){const n={};return gE(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Gc(a,(r,u)=>{const c=_3(u,t.Ou(r));c!=null&&(n[r]=c)}),{mapValue:{fields:n}}}function E3(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof fi||a instanceof Sy||a instanceof $h||a instanceof Vr||a instanceof Ey||a instanceof Ty)}function S3(a,t,n){if(!E3(n)||!function(u){return typeof u=="object"&&u!==null&&(Object.getPrototypeOf(u)===Object.prototype||Object.getPrototypeOf(u)===null)}(n)){const r=_y(n);throw r==="an object"?t.qu(a+" a custom object"):t.qu(a+" "+r)}}function MR(a,t,n){if((t=$a(t))instanceof vy)return t._internalPath;if(typeof t=="string")return T3(a,t);throw T0("Field path arguments must be of type string or ",a,!1,void 0,n)}const xR=new RegExp("[~\\*/\\[\\]]");function T3(a,t,n){if(t.search(xR)>=0)throw T0(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new vy(...t.split("."))._internalPath}catch{throw T0(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function T0(a,t,n,r,u){const c=r&&!r.isEmpty(),d=u!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let _="";return(c||d)&&(_+=" (found",c&&(_+=` in field ${r}`),d&&(_+=` in document ${u}`),_+=")"),new Ft(Vt.INVALID_ARGUMENT,m+a+_)}function VR(a,t){return a.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(t,n,r,u,c){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=u,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Vr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new UR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(A3("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UR extends b3{data(){return super.data()}}function A3(a,t){return typeof t=="string"?T3(a,t):t instanceof vy?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new Ft(Vt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class LR{convertValue(t,n="none"){switch(Uu(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ti(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Vu(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw te()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Gc(t,(u,c)=>{r[u]=this.convertValue(c,n)}),r}convertVectorValue(t){var n,r,u;const c=(u=(r=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||u===void 0?void 0:u.map(d=>ti(d.doubleValue));return new Ty(c)}convertGeoPoint(t){return new Sy(ti(t.latitude),ti(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=I0(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ug(t));default:return null}}convertTimestamp(t){const n=xu(t);return new fi(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=An.fromString(t);We(FE(r));const u=new cg(r.get(1),r.get(3)),c=new Xt(r.popFirst(5));return u.isEqual(n)||Co(`Document ${c} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(a,t,n){let r;return r=a?a.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class PR extends b3{constructor(t,n,r,u,c,d){super(t,n,r,u,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new a0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(A3("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class a0 extends PR{data(t={}){return super.data(t)}}class BR{constructor(t,n,r,u){this._firestore=t,this._userDataWriter=n,this._snapshot=u,this.metadata=new Km(u.hasPendingWrites,u.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new a0(this._firestore,this._userDataWriter,r.key,r,new Km(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ft(Vt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,c){if(u._snapshot.oldDocs.isEmpty()){let d=0;return u._snapshot.docChanges.map(m=>{const _=new a0(u._firestore,u._userDataWriter,m.doc.key,m.doc,new Km(u._snapshot.mutatedKeys.has(m.doc.key),u._snapshot.fromCache),u.query.converter);return m.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}})}{let d=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const _=new a0(u._firestore,u._userDataWriter,m.doc.key,m.doc,new Km(u._snapshot.mutatedKeys.has(m.doc.key),u._snapshot.fromCache),u.query.converter);let v=-1,b=-1;return m.type!==0&&(v=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),b=d.indexOf(m.doc.key)),{type:GR(m.type),doc:_,oldIndex:v,newIndex:b}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function GR(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}class kR extends LR{constructor(t){super(),this.firestore=t}convertBytes(t){return new $h(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Vr(this.firestore,null,n)}}function t4(a){a=mg(a,K0);const t=mg(a.firestore,Y0),n=p3(t),r=new kR(t);return IR(a._query),TR(n,a._query).then(u=>new BR(t,r,a,u))}function HR(a){return R3(mg(a.firestore,Y0),[new iy(a._key,Ml.none())])}function qR(a,t){const n=mg(a.firestore,Y0),r=g3(a),u=zR(a.converter,t);return R3(n,[OR(NR(a.firestore),"addDoc",r._key,u,a.converter!==null,{}).toMutation(r._key,Ml.exists(!1))]).then(()=>r)}function R3(a,t){return function(r,u){const c=new Nu;return r.asyncQueue.enqueueAndForget(async()=>oR(await ER(r),u,c)),c.promise}(p3(a),t)}function jR(){return new Ay("serverTimestamp")}(function(t,n=!0){(function(u){nf=u})(tf),Kh(new Ic("firestore",(r,{instanceIdentifier:u,options:c})=>{const d=r.getProvider("app").getImmediate(),m=new Y0(new Mb(r.getProvider("auth-internal")),new Ib(r.getProvider("app-check-internal")),function(v,b){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new Ft(Vt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cg(v.options.projectId,b)}(d,u),d);return c=Object.assign({useFetchStreams:n},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Du(mv,"4.7.6",t),Du(mv,"4.7.6","esm2017")})();const FR={apiKey:"AIzaSyC2TPUyNqYDP-3ebM2bQ-Kx3CJVeb-zlEw",authDomain:"teeline-tracer.firebaseapp.com",projectId:"teeline-tracer",storageBucket:"teeline-tracer.firebasestorage.app",messagingSenderId:"1039627863544",appId:"1:1039627863544:web:79a76cb451f01ce471820d",measurementId:"G-WY00H60KMG"},Ry=S4(FR);m3(Ry);const Uc=Db(Ry),C3=({onAuthChange:a})=>{const[t,n]=ae.useState(""),[r,u]=ae.useState(""),[c,d]=ae.useState(!0);ae.useEffect(()=>{const _=O0(Uc,v=>{a(v)});return()=>_()},[a]);const m=async()=>{try{c?await d8(Uc,t,r):await f8(Uc,t,r),n(""),u("")}catch(_){console.error("Auth Error:",_)}};return kt.jsx("div",{style:Mc.fullScreenContainer,children:kt.jsxs("div",{style:Mc.authBox,children:[kt.jsx("h2",{style:Mc.title,children:c?"Login":"Sign Up"}),kt.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:_=>n(_.target.value),style:Mc.input}),kt.jsx("input",{type:"password",placeholder:"Password",value:r,onChange:_=>u(_.target.value),style:Mc.input}),kt.jsx("button",{style:Mc.authButton,onClick:m,children:c?"Login":"Sign Up"}),kt.jsx("button",{style:Mc.toggleButton,onClick:()=>d(!c),children:c?"Need an account? Sign Up":"Already have an account? Login"})]})})},Mc={fullScreenContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",backgroundColor:"#E6F2ED",fontFamily:"'Baloo 2', cursive",borderRadius:"16px"},authBox:{backgroundColor:"#D1E1DB",padding:"30px",borderRadius:"16px",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.1)",textAlign:"center",width:"300px"},title:{fontSize:"24px",fontWeight:"bold",color:"#2F3D38",marginBottom:"20px"},input:{width:"100%",padding:"10px",border:"2px solid #A6C3BB",borderRadius:"12px",fontSize:"16px",marginBottom:"15px",textAlign:"center"},authButton:{width:"100%",padding:"12px",backgroundColor:"#6D8B83",color:"#FFFFFF",border:"none",borderRadius:"16px",cursor:"pointer",fontSize:"16px",marginBottom:"10px",transition:"background 0.3s"},toggleButton:{background:"none",border:"none",color:"#2F3D38",fontSize:"14px",cursor:"pointer",textDecoration:"underline"}},i1=m3(Ry),Ih=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e4={beginner:.5,intermediate:.6,advanced:.65},KR="/teeline-tracing",D3=()=>{const[a,t]=ae.useState("beginner"),[n,r]=ae.useState(e4.beginner),[u,c]=ae.useState(null),[d,m]=ae.useState(null),[_,v]=ae.useState(null),[b,R]=ae.useState(!1),[U,w]=ae.useState({}),[O,I]=ae.useState([]),[P,K]=ae.useState([]),[C,M]=ae.useState(window.innerWidth<=768);ae.useEffect(()=>{const j=()=>{M(window.innerWidth<=768)};return window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]),ae.useEffect(()=>{const j=O0(Uc,T=>{c(T)});return()=>j()},[]),ae.useEffect(()=>{if(!u)return;(async()=>{try{const T=Jv(i1,`users/${u.uid}/piles`),F=await t4(T),k=[],X=[];F.forEach($=>{const it=$.data();it.pileType==="good"?k.push(it.letter):X.push(it.letter)}),I(k),K(X)}catch(T){console.error("Error fetching user data:",T)}})()},[u]),ae.useEffect(()=>{r(e4[a])},[a]);const G=async(j,T)=>{if(u)try{const F=Jv(i1,`users/${u.uid}/piles`),k=await t4(F);let X=null,$=null;if(k.forEach(it=>{const ut=it.data();ut.letter===j&&(X=it.id,$=ut.pileType)}),$===T)return;X&&await HR(g3(i1,`users/${u.uid}/piles/${X}`)),await qR(F,{pileType:T,letter:j,createdAt:jR()}),I(it=>T==="good"?[...it,j].filter((ut,Q,at)=>at.indexOf(ut)===Q):it.filter(ut=>ut!==j)),K(it=>T==="needsWork"?[...it,j].filter((ut,Q,at)=>at.indexOf(ut)===Q):it.filter(ut=>ut!==j))}catch(F){console.error("Error adding letter to pile:",F)}};ae.useEffect(()=>{(async()=>{try{const T=await Promise.all(Ih.map(k=>fetch(`${KR}/normalized_svgs/${k}.svg`).then(X=>X.text()))),F={};T.forEach((k,X)=>{const $=Ih[X],it=k.match(/<path[^>]*d="([^"]*)"/);it&&(F[$]=it[1])}),w(F)}catch(T){console.error("Error loading SVG paths:",T)}})()},[]);const H=j=>{m(j),R(!1)},Y=()=>{R(!0)},q=j=>{d&&G(d,j?"good":"needsWork"),R(!1)},V=j=>{t(j.target.value)},D=()=>{if(d){const T=(Ih.indexOf(d)+1)%Ih.length;m(Ih[T]),R(!1)}},x=async()=>{await p8(Uc)};if(!u)return kt.jsx(C3,{onAuthChange:c});const L={levelContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",margin:"20px 0"},levelTitle:{fontSize:"24px",fontWeight:"bold",color:"#2F3D38",fontFamily:"'Baloo 2'",marginBottom:"10px",textAlign:"center"},levelSelect:{padding:"10px 15px",fontSize:"18px",fontFamily:"'Baloo 2'",fontWeight:"bold",border:"2px solid #6D8B83",borderRadius:"12px",backgroundColor:"#A6C3BB",color:"#2F3D38",cursor:"pointer",transition:"background 0.3s, box-shadow 0.2s",outline:"none",textAlign:"center"},nextButton:{padding:C?"10px 20px":"12px 24px",backgroundColor:"#4CAF50",color:"#FFFFFF",borderRadius:"16px",cursor:"pointer",marginTop:"10px"},container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",width:"75vw",backgroundColor:"#E6F2ED",padding:C?"15px":"20px",fontFamily:"'Baloo 2'",borderRadius:"16px"},grid:{display:"grid",gridTemplateColumns:C?"repeat(auto-fit, minmax(100px, 1fr))":"repeat(auto-fit, minmax(150px, 1fr))",gap:C?"20px":"30px",width:"100%",height:"50%",fontFamily:"'Baloo 2'",maxWidth:"800px",paddingLeft:C?"50px":"20px"},card:{display:"flex",alignItems:"center",justifyContent:"center",border:"3px solid #D1E1DB",borderRadius:"16px",background:"linear-gradient(135deg, #A6C3BB, #D1E1DB)",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.1)",width:C?"100px":"150px",height:C?"100px":"150px",cursor:"pointer",fontSize:C?"18px":"24px",fontWeight:"bold",fontFamily:"'Baloo 2', cursive",textAlign:"center",color:"#2F3D38",opacity:0,transform:"translateY(-50px)",animation:"dropIn 0.5s ease-out forwards",transition:"transform 0.2s ease, box-shadow 0.2s ease"},cardHover:{transform:"translateY(-4px)",boxShadow:"8px 8px 0px rgba(0, 0, 0, 0.3)",background:"linear-gradient(135deg, #D1E1DB, #A6C3BB)"},previewContainer:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",padding:"20px",borderRadius:"16px",background:"#E6F2ED",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.2)"},title:{fontSize:C?"24px":"28px",fontWeight:"bold",color:"#2F3D38"},traceButton:{padding:C?"10px 20px":"12px 24px",backgroundColor:"#6D8B83",color:"#FFFFFF",borderRadius:"16px",cursor:"pointer"},backButton:{padding:C?"10px 20px":"12px 24px",backgroundColor:"#A6C3BB",color:"#2F3D38",borderRadius:"16px",cursor:"pointer"},letter:{fontSize:"48px",fontWeight:"bold",color:"#2F3D38"},pilesContainer:{display:"flex",flexDirection:C?"column":"row",justifyContent:"space-between",gap:"20px",marginTop:"20px",width:"100%",maxWidth:"800px",paddingLeft:"12px"},pile:{flex:1,border:"3px dashed #A6C3BB",borderRadius:"16px",padding:C?"10px":"20px",backgroundColor:"#E6F2ED",boxShadow:"6px 6px 0px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},logoutButton:{width:"100%",padding:"12px",marginBottom:"20px",backgroundColor:"#A6C3BB",color:"#2F3D38",border:"none",borderRadius:"16px",cursor:"pointer",fontSize:"16px",transition:"background 0.3s"}};return kt.jsxs("div",{style:L.container,children:[!d&&kt.jsxs("div",{style:L.topBar,children:[kt.jsxs("h2",{style:L.title,children:["Welcome, ",u==null?void 0:u.email]}),kt.jsxs("div",{style:L.levelContainer,children:[kt.jsx("h2",{style:L.levelTitle,children:"Choose your level"}),kt.jsxs("select",{value:a,onChange:V,style:L.levelSelect,children:[kt.jsx("option",{value:"beginner",children:"Beginner"}),kt.jsx("option",{value:"intermediate",children:"Intermediate"}),kt.jsx("option",{value:"advanced",children:"Advanced"})]})]}),kt.jsx("button",{style:L.logoutButton,onClick:x,children:"Logout"})]}),d?kt.jsx("div",{style:L.previewContainer,children:b?kt.jsx(V6,{svgPath:U[d],similarityThreshold:n,onComplete:q}):kt.jsxs(kt.Fragment,{children:[kt.jsxs("h2",{style:L.title,children:["Teeline Version: ",d.toUpperCase()]}),U[d]?kt.jsx(U6,{path:U[d],width:400,height:400}):kt.jsx("p",{children:"Loading Teeline version..."}),kt.jsx("button",{style:L.traceButton,onClick:Y,children:"Start Tracing"}),kt.jsx("button",{style:L.nextButton,onClick:D,children:"Move to Next Letter"}),kt.jsx("button",{style:L.backButton,onClick:()=>m(null),children:"Back to Grid"})]})}):kt.jsxs(kt.Fragment,{children:[kt.jsx("div",{style:L.grid,children:Ih.map((j,T)=>kt.jsx("div",{style:{...L.card,..._===T?L.cardHover:{},animationDelay:`${T*.1}s`},onMouseEnter:()=>v(T),onMouseLeave:()=>v(null),onClick:()=>H(j),children:kt.jsx("span",{style:L.letter,children:j.toUpperCase()})},j))}),kt.jsxs("div",{style:L.pilesContainer,children:[kt.jsxs("div",{style:L.pile,children:[kt.jsx("h3",{children:"Good To Go"}),O.map(j=>kt.jsx("div",{children:j.toUpperCase()},j))]}),kt.jsxs("div",{style:L.pile,children:[kt.jsx("h3",{children:"Needs Work"}),P.map(j=>kt.jsx("div",{children:j.toUpperCase()},j))]})]})]})]})},YR=()=>{const[a,t]=ae.useState(null),[n,r]=ae.useState(!1);return ae.useEffect(()=>{const u=O0(Uc,c=>{t(c)});return()=>u()},[]),a?kt.jsx(D3,{}):kt.jsxs("div",{style:Ym.container,children:[kt.jsx("h1",{style:Ym.title,children:"Welcome to Teeline Tracers"}),kt.jsx("p",{style:Ym.description,children:"Learn and practice Teeline shorthand effortlessly!"}),n?kt.jsx(C3,{onAuthChange:t}):kt.jsx("button",{style:Ym.loginButton,onClick:()=>r(!0),children:"Get started"})]})},Ym={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#E6F2ED",fontFamily:"'Baloo 2', cursive"},title:{fontSize:"32px",fontWeight:"bold",color:"#2F3D38",marginBottom:"10px"},description:{fontSize:"18px",color:"#4A5F56",marginBottom:"20px",textAlign:"center",maxWidth:"400px"},loginButton:{padding:"12px 24px",backgroundColor:"#4CAF50",color:"#FFFFFF",borderRadius:"16px",cursor:"pointer",border:"none",fontSize:"18px"}},XR=()=>{const[a,t]=ae.useState(null),[n,r]=ae.useState(window.innerWidth<=768);ae.useEffect(()=>{const c=()=>{r(window.innerWidth<=768)};return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]),ae.useEffect(()=>{const c=O0(Uc,d=>{t(d)});return()=>c()},[]);const u={appContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"50%",background:"radial-gradient(circle at bottom right, #2F3D38, #6D8B83 40%, #A6C3BB 70%)",padding:n?"10px":"20px",boxShadow:"0px 10px 20px rgba(0, 0, 0, 0.2)",borderRadius:"16px",border:"4px dotted #2F3D38"},title:{textAlign:"center",marginBottom:"20px",fontSize:n?"28px":"36px",color:"#2F3D38",fontFamily:"'Baloo 2'",textShadow:"3px 3px 0px #6D8B83, 5px 5px 0px #A6C3BB"}};return kt.jsx("div",{style:u.appContainer,children:a?kt.jsx(D3,{}):kt.jsx(YR,{})})};v5.createRoot(document.getElementById("root")).render(kt.jsx(ae.StrictMode,{children:kt.jsx(XR,{})}));
